// https://d3js.org/d3-scale/ Version 2.0.0. Copyright 2018 Mike Bostock.
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-collection"),require("d3-interpolate"),require("d3-format"),require("d3-time"),require("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format"],t):t(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3,n.d3,n.d3)}(this,function(n,t,e,r,i,u,o){"use strict";function a(n){function t(t){var e=t+"",o=r.get(e);if(!o){if(u!==B)return u;r.set(e,o=i.push(t))}return n[(o-1)%n.length]}var r=e.map(),i=[],u=B;return n=null==n?[]:j.call(n),t.domain=function(n){if(!arguments.length)return i.slice();i=[],r=e.map();for(var u,o,a=-1,c=n.length;++a<c;)r.has(o=(u=n[a])+"")||r.set(o,i.push(u));return t},t.range=function(e){return arguments.length?(n=j.call(e),t):n.slice()},t.unknown=function(n){return arguments.length?(u=n,t):u},t.copy=function(){return a().domain(i).range(n).unknown(u)},t}function c(){function n(){var n=u().length,i=l[1]<l[0],a=l[i-0],c=l[1-i];e=(c-a)/Math.max(1,n-h+2*d),f&&(e=Math.floor(e)),a+=(c-a-e*(n-h))*s,r=e*(1-h),f&&(a=Math.round(a),r=Math.round(r));var m=t.range(n).map(function(n){return a+e*n});return o(i?m.reverse():m)}var e,r,i=a().unknown(void 0),u=i.domain,o=i.range,l=[0,1],f=!1,h=0,d=0,s=.5;return delete i.unknown,i.domain=function(t){return arguments.length?(u(t),n()):u()},i.range=function(t){return arguments.length?(l=[+t[0],+t[1]],n()):l.slice()},i.rangeRound=function(t){return l=[+t[0],+t[1]],f=!0,n()},i.bandwidth=function(){return r},i.step=function(){return e},i.round=function(t){return arguments.length?(f=!!t,n()):f},i.padding=function(t){return arguments.length?(h=d=Math.max(0,Math.min(1,t)),n()):h},i.paddingInner=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),n()):h},i.paddingOuter=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),n()):d},i.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),n()):s},i.copy=function(){return c().domain(u()).range(l).round(f).paddingInner(h).paddingOuter(d).align(s)},n()}function l(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return l(t())},n}function f(n){return function(){return n}}function h(n){return+n}function d(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:f(t)}function s(n,t,e,r){var i=n[0],u=n[1],o=t[0],a=t[1];return u<i?(i=e(u,i),o=r(a,o)):(i=e(i,u),o=r(o,a)),function(n){return o(i(n))}}function m(n,e,r,i){var u=Math.min(n.length,e.length)-1,o=new Array(u),a=new Array(u),c=-1;for(n[u]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++c<u;)o[c]=r(n[c],n[c+1]),a[c]=i(e[c],e[c+1]);return function(e){var r=t.bisect(n,e,1,u)-1;return a[r](o[r](e))}}function g(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function p(n,t){function e(){return u=Math.min(c.length,l.length)>2?m:s,o=a=null,i}function i(t){return(o||(o=u(c,l,g?function(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return n<=t?0:n>=e?1:r(n)}}}(n):n,f)))(+t)}var u,o,a,c=C,l=C,f=r.interpolate,g=!1;return i.invert=function(n){return(a||(a=u(l,c,d,g?function(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return n<=0?t:n>=1?e:r(n)}}}(t):t)))(+n)},i.domain=function(n){return arguments.length?(c=Y.call(n,h),e()):c.slice()},i.range=function(n){return arguments.length?(l=j.call(n),e()):l.slice()},i.rangeRound=function(n){return l=j.call(n),f=r.interpolateRound,e()},i.clamp=function(n){return arguments.length?(g=!!n,e()):g},i.interpolate=function(n){return arguments.length?(f=n,e()):f},e()}function M(n){var e=n.domain;return n.ticks=function(n){var r=e();return t.ticks(r[0],r[r.length-1],null==n?10:n)},n.tickFormat=function(n,r){return function(n,e,r){var u,o=n[0],a=n[n.length-1],c=t.tickStep(o,a,null==e?10:e);switch((r=i.formatSpecifier(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(o),Math.abs(a));return null!=r.precision||isNaN(u=i.precisionPrefix(c,l))||(r.precision=u),i.formatPrefix(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(u=i.precisionRound(c,Math.max(Math.abs(o),Math.abs(a))))||(r.precision=u-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(u=i.precisionFixed(c))||(r.precision=u-2*("%"===r.type))}return i.format(r)}(e(),n,r)},n.nice=function(r){null==r&&(r=10);var i,u=e(),o=0,a=u.length-1,c=u[o],l=u[a];return l<c&&(i=c,c=l,l=i,i=o,o=a,a=i),(i=t.tickIncrement(c,l,r))>0?(c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i,i=t.tickIncrement(c,l,r)):i<0&&(c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i,i=t.tickIncrement(c,l,r)),i>0?(u[o]=Math.floor(c/i)*i,u[a]=Math.ceil(l/i)*i,e(u)):i<0&&(u[o]=Math.ceil(c*i)/i,u[a]=Math.floor(l*i)/i,e(u)),n},n}function v(){var n=p(d,r.interpolateNumber);return n.copy=function(){return g(n,v())},M(n)}function y(){function n(n){return+n}var t=[0,1];return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Y.call(e,h),n):t.slice()},n.copy=function(){return y().domain(t)},M(n)}function x(n,t){var e,r=0,i=(n=n.slice()).length-1,u=n[r],o=n[i];return o<u&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function k(n,t){return(t=Math.log(t/n))?function(e){return Math.log(e/n)/t}:f(t)}function w(n,t){return n<0?function(e){return-Math.pow(-t,e)*Math.pow(-n,1-e)}:function(e){return Math.pow(t,e)*Math.pow(n,1-e)}}function b(n){return isFinite(n)?+("1e"+n):n<0?0:n}function N(n){return 10===n?b:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function I(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function q(n){return function(t){return-n(-t)}}function D(){function n(){return o=I(u),a=N(u),r()[0]<0&&(o=q(o),a=q(a)),e}var e=p(k,w).domain([1,10]),r=e.domain,u=10,o=I(10),a=N(10);return e.base=function(t){return arguments.length?(u=+t,n()):u},e.domain=function(t){return arguments.length?(r(t),n()):r()},e.ticks=function(n){var e,i=r(),c=i[0],l=i[i.length-1];(e=l<c)&&(s=c,c=l,l=s);var f,h,d,s=o(c),m=o(l),g=null==n?10:+n,p=[];if(!(u%1)&&m-s<g){if(s=Math.round(s)-1,m=Math.round(m)+1,c>0){for(;s<m;++s)for(h=1,f=a(s);h<u;++h)if(!((d=f*h)<c)){if(d>l)break;p.push(d)}}else for(;s<m;++s)for(h=u-1,f=a(s);h>=1;--h)if(!((d=f*h)<c)){if(d>l)break;p.push(d)}}else p=t.ticks(s,m,Math.min(m-s,g)).map(a);return e?p.reverse():p},e.tickFormat=function(n,t){if(null==t&&(t=10===u?".0e":","),"function"!=typeof t&&(t=i.format(t)),n===1/0)return t;null==n&&(n=10);var r=Math.max(1,u*n/e.ticks().length);return function(n){var e=n/a(Math.round(o(n)));return e*u<u-.5&&(e*=u),e<=r?t(n):""}},e.nice=function(){return r(x(r(),{floor:function(n){return a(Math.floor(o(n)))},ceil:function(n){return a(Math.ceil(o(n)))}}))},e.copy=function(){return g(e,D().base(u))},e}function O(n,t){return n<0?-Math.pow(-n,t):Math.pow(n,t)}function S(){var n=1,t=p(function(t,e){return(e=O(e,n)-(t=O(t,n)))?function(r){return(O(r,n)-t)/e}:f(e)},function(t,e){return e=O(e,n)-(t=O(t,n)),function(r){return O(t+e*r,1/n)}}),e=t.domain;return t.exponent=function(t){return arguments.length?(n=+t,e(e())):n},t.copy=function(){return g(t,S().exponent(n))},M(t)}function F(){function n(){var n=0,o=Math.max(1,i.length);for(u=new Array(o-1);++n<o;)u[n-1]=t.quantile(r,n/o);return e}function e(n){if(!isNaN(n=+n))return i[t.bisect(u,n)]}var r=[],i=[],u=[];return e.invertExtent=function(n){var t=i.indexOf(n);return t<0?[NaN,NaN]:[t>0?u[t-1]:r[0],t<u.length?u[t]:r[r.length-1]]},e.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var i,u=0,o=e.length;u<o;++u)null==(i=e[u])||isNaN(i=+i)||r.push(i);return r.sort(t.ascending),n()},e.range=function(t){return arguments.length?(i=j.call(t),n()):i.slice()},e.quantiles=function(){return u.slice()},e.copy=function(){return F().domain(r).range(i)},e}function A(){function n(n){if(n<=n)return a[t.bisect(o,n,0,u)]}function e(){var t=-1;for(o=new Array(u);++t<u;)o[t]=((t+1)*i-(t-u)*r)/(u+1);return n}var r=0,i=1,u=1,o=[.5],a=[0,1];return n.domain=function(n){return arguments.length?(r=+n[0],i=+n[1],e()):[r,i]},n.range=function(n){return arguments.length?(u=(a=j.call(n)).length-1,e()):a.slice()},n.invertExtent=function(n){var t=a.indexOf(n);return t<0?[NaN,NaN]:t<1?[r,o[0]]:t>=u?[o[u-1],i]:[o[t-1],o[t]]},n.copy=function(){return A().domain([r,i]).range(a)},M(n)}function E(){function n(n){if(n<=n)return r[t.bisect(e,n,0,i)]}var e=[.5],r=[0,1],i=1;return n.domain=function(t){return arguments.length?(e=j.call(t),i=Math.min(e.length,r.length-1),n):e.slice()},n.range=function(t){return arguments.length?(r=j.call(t),i=Math.min(e.length,r.length-1),n):r.slice()},n.invertExtent=function(n){var t=r.indexOf(n);return[e[t-1],e[t]]},n.copy=function(){return E().domain(e).range(r)},n}function P(n){return new Date(n)}function R(n){return n instanceof Date?+n:+new Date(+n)}function T(n,e,i,u,o,a,c,l,f){function h(t){return(c(t)<t?y:a(t)<t?k:o(t)<t?w:u(t)<t?b:e(t)<t?i(t)<t?N:I:n(t)<t?q:D)(t)}function s(e,r,i,u){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-r)/e,a=t.bisector(function(n){return n[2]}).right(O,o);a===O.length?(u=t.tickStep(r/J,i/J,e),e=n):a?(u=(a=O[o/O[a-1][2]<O[a][2]/o?a-1:a])[1],e=a[0]):(u=Math.max(t.tickStep(r,i,e),1),e=l)}return null==u?e:e.every(u)}var m=p(d,r.interpolateNumber),M=m.invert,v=m.domain,y=f(".%L"),k=f(":%S"),w=f("%I:%M"),b=f("%I %p"),N=f("%a %d"),I=f("%b %d"),q=f("%B"),D=f("%Y"),O=[[c,1,H],[c,5,5*H],[c,15,15*H],[c,30,30*H],[a,1,Q],[a,5,5*Q],[a,15,15*Q],[a,30,30*Q],[o,1,W],[o,3,3*W],[o,6,6*W],[o,12,12*W],[u,1,_],[u,2,2*_],[i,1,z],[e,1,G],[e,3,3*G],[n,1,J]];return m.invert=function(n){return new Date(M(n))},m.domain=function(n){return arguments.length?v(Y.call(n,R)):v().map(P)},m.ticks=function(n,t){var e,r=v(),i=r[0],u=r[r.length-1],o=u<i;return o&&(e=i,i=u,u=e),e=s(n,i,u,t),e=e?e.range(i,u+1):[],o?e.reverse():e},m.tickFormat=function(n,t){return null==t?h:f(t)},m.nice=function(n,t){var e=v();return(n=s(n,e[0],e[e.length-1],t))?v(x(e,n)):m},m.copy=function(){return g(m,T(n,e,i,u,o,a,c,l,f))},m}function L(n){function t(t){var u=(t-e)/(r-e);return n(i?Math.max(0,Math.min(1,u)):u)}var e=0,r=1,i=!1;return t.domain=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.clamp=function(n){return arguments.length?(i=!!n,t):i},t.interpolator=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return L(n).domain([e,r]).clamp(i)},M(t)}var U=Array.prototype,Y=U.map,j=U.slice,B={name:"implicit"},C=[0,1],H=1e3,Q=60*H,W=60*Q,_=24*W,z=7*_,G=30*_,J=365*_;n.scaleBand=c,n.scalePoint=function(){return l(c().paddingInner(1))},n.scaleIdentity=y,n.scaleLinear=v,n.scaleLog=D,n.scaleOrdinal=a,n.scaleImplicit=B,n.scalePow=S,n.scaleSqrt=function(){return S().exponent(.5)},n.scaleQuantile=F,n.scaleQuantize=A,n.scaleThreshold=E,n.scaleTime=function(){return T(u.timeYear,u.timeMonth,u.timeWeek,u.timeDay,u.timeHour,u.timeMinute,u.timeSecond,u.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},n.scaleUtc=function(){return T(u.utcYear,u.utcMonth,u.utcWeek,u.utcDay,u.utcHour,u.utcMinute,u.utcSecond,u.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},n.scaleSequential=L,Object.defineProperty(n,"__esModule",{value:!0})});