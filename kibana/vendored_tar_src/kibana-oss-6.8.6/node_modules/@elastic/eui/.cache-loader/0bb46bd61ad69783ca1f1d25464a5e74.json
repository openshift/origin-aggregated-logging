{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src/components/popover/input_popover.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src/components/popover/input_popover.js","mtime":1567534071284},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EuiInputPopover = void 0;\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _tabbable = _interopRequireDefault(require(\"tabbable\"));\n\nvar _focus_trap = require(\"../focus_trap\");\n\nvar _popover = require(\"./popover\");\n\nvar _services = require(\"../../services\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar EuiInputPopover = function EuiInputPopover(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      fullWidth = _ref.fullWidth,\n      input = _ref.input,\n      popoverZIndex = _ref.popoverZIndex,\n      props = _objectWithoutProperties(_ref, [\"children\", \"className\", \"fullWidth\", \"input\", \"popoverZIndex\"]);\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputEl = _useState2[0],\n      setInputEl = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputElWidth = _useState4[0],\n      setInputElWidth = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      panelEl = _useState6[0],\n      setPanelEl = _useState6[1];\n\n  var inputRef = function inputRef(node) {\n    return setInputEl(node);\n  };\n\n  var panelRef = function panelRef(node) {\n    return setPanelEl(node);\n  };\n\n  var setPanelWidth = function setPanelWidth() {\n    if (panelEl && inputElWidth) {\n      panelEl.style.width = \"\".concat(inputElWidth, \"px\");\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    if (inputEl) {\n      var width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth();\n    }\n  }, [inputEl]);\n  (0, _react.useEffect)(function () {\n    setPanelWidth();\n  }, [panelEl]);\n\n  var onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === _services.cascadingMenuKeyCodes.TAB) {\n      var tabbableItems = (0, _tabbable.default)(panelEl).filter(function (el) {\n        return _toConsumableArray(el.attributes).map(function (el) {\n          return el.name;\n        }).indexOf('data-focus-guard') < 0;\n      });\n\n      if (tabbableItems.length && tabbableItems[tabbableItems.length - 1] === document.activeElement) {\n        props.closePopover();\n      }\n    }\n  };\n\n  var classes = (0, _classnames.default)('euiInputPopover', {\n    'euiInputPopover--fullWidth': fullWidth\n  }, className);\n  return _react.default.createElement(_popover.EuiPopover, _extends({\n    ownFocus: false,\n    button: input,\n    buttonRef: inputRef,\n    panelRef: panelRef,\n    className: classes\n  }, props), _react.default.createElement(_focus_trap.EuiFocusTrap, {\n    clickOutsideDisables: true\n  }, _react.default.createElement(\"div\", {\n    onKeyDown: onKeyDown\n  }, children)));\n};\n\nexports.EuiInputPopover = EuiInputPopover;\n\nvar button = _popover.EuiPopoverPropTypes.button,\n    buttonRef = _popover.EuiPopoverPropTypes.buttonRef,\n    propTypes = _objectWithoutProperties(_popover.EuiPopoverPropTypes, [\"button\", \"buttonRef\"]);\n\nEuiInputPopover.propTypes = _objectSpread({\n  fullWidth: _propTypes.default.bool,\n  input: _popover.EuiPopoverPropTypes.button,\n  inputRef: _popover.EuiPopoverPropTypes.buttonRef\n}, propTypes);\nEuiInputPopover.defaultProps = {\n  anchorPosition: 'downLeft',\n  attachToAnchor: true,\n  display: 'block',\n  fullWidth: false,\n  panelPaddingSize: 's'\n};\nEuiInputPopover.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"EuiInputPopover\",\n  \"props\": {\n    \"anchorPosition\": {\n      \"defaultValue\": {\n        \"value\": \"'downLeft'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"attachToAnchor\": {\n      \"defaultValue\": {\n        \"value\": \"true\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"display\": {\n      \"defaultValue\": {\n        \"value\": \"'block'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"fullWidth\": {\n      \"defaultValue\": {\n        \"value\": \"false\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"panelPaddingSize\": {\n      \"defaultValue\": {\n        \"value\": \"'s'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"input\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"EuiPopoverPropTypes.button\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"inputRef\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"EuiPopoverPropTypes.buttonRef\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src/components/popover/input_popover.js"],"names":["EuiInputPopover","children","className","fullWidth","input","popoverZIndex","props","inputEl","setInputEl","inputElWidth","setInputElWidth","panelEl","setPanelEl","inputRef","node","panelRef","setPanelWidth","style","width","getBoundingClientRect","onKeyDown","e","keyCode","cascadingMenuKeyCodes","TAB","tabbableItems","filter","el","attributes","map","name","indexOf","length","document","activeElement","closePopover","classes","button","EuiPopoverPropTypes","buttonRef","propTypes","PropTypes","bool","defaultProps","anchorPosition","attachToAnchor","display","panelPaddingSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport tabbable from 'tabbable';\n\nimport { EuiFocusTrap } from '../focus_trap';\nimport { EuiPopover, EuiPopoverPropTypes } from './popover';\nimport { cascadingMenuKeyCodes } from '../../services';\n\nexport const EuiInputPopover = ({\n  children,\n  className,\n  fullWidth,\n  input,\n  popoverZIndex,\n  ...props\n}) => {\n  const [inputEl, setInputEl] = useState();\n  const [inputElWidth, setInputElWidth] = useState();\n  const [panelEl, setPanelEl] = useState();\n  const inputRef = node => setInputEl(node);\n  const panelRef = node => setPanelEl(node);\n  const setPanelWidth = () => {\n    if (panelEl && inputElWidth) {\n      panelEl.style.width = `${inputElWidth}px`;\n    }\n  };\n  useEffect(() => {\n    if (inputEl) {\n      const width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth();\n    }\n  }, [inputEl]);\n  useEffect(() => {\n    setPanelWidth();\n  }, [panelEl]);\n  const onKeyDown = e => {\n    if (e.keyCode === cascadingMenuKeyCodes.TAB) {\n      const tabbableItems = tabbable(panelEl).filter(el => {\n        return (\n          [...el.attributes].map(el => el.name).indexOf('data-focus-guard') < 0\n        );\n      });\n      if (\n        tabbableItems.length &&\n        tabbableItems[tabbableItems.length - 1] === document.activeElement\n      ) {\n        props.closePopover();\n      }\n    }\n  };\n  const classes = classnames(\n    'euiInputPopover',\n    {\n      'euiInputPopover--fullWidth': fullWidth,\n    },\n    className\n  );\n  return (\n    <EuiPopover\n      ownFocus={false}\n      button={input}\n      buttonRef={inputRef}\n      panelRef={panelRef}\n      className={classes}\n      {...props}>\n      <EuiFocusTrap clickOutsideDisables={true}>\n        <div onKeyDown={onKeyDown}>{children}</div>\n      </EuiFocusTrap>\n    </EuiPopover>\n  );\n};\n\nconst { button, buttonRef, ...propTypes } = EuiPopoverPropTypes;\nEuiInputPopover.propTypes = {\n  fullWidth: PropTypes.bool,\n  input: EuiPopoverPropTypes.button,\n  inputRef: EuiPopoverPropTypes.buttonRef,\n  ...propTypes,\n};\n\nEuiInputPopover.defaultProps = {\n  anchorPosition: 'downLeft',\n  attachToAnchor: true,\n  display: 'block',\n  fullWidth: false,\n  panelPaddingSize: 's',\n};\n"]}]}