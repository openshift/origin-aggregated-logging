{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src-docs/src/views/search_bar/search_bar.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src-docs/src/views/search_bar/search_bar.js","mtime":1566922762739},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SearchBar = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"../../../../src/services/utils\");\n\nvar _random = require(\"../../../../src/services/random\");\n\nvar _components = require(\"../../../../src/components\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar random = new _random.Random();\nvar tags = [{\n  name: 'marketing',\n  color: 'danger'\n}, {\n  name: 'finance',\n  color: 'success'\n}, {\n  name: 'eng',\n  color: 'success'\n}, {\n  name: 'sales',\n  color: 'warning'\n}, {\n  name: 'ga',\n  color: 'success'\n}];\nvar types = ['dashboard', 'visualization', 'watch'];\nvar users = ['dewey', 'wanda', 'carrie', 'jmack', 'gabic'];\nvar items = (0, _utils.times)(10, function (id) {\n  return {\n    id: id,\n    status: random.oneOf(['open', 'closed']),\n    type: random.oneOf(types),\n    tag: random.setOf(tags.map(function (tag) {\n      return tag.name;\n    }), {\n      min: 0,\n      max: 3\n    }),\n    active: random.boolean(),\n    owner: random.oneOf(users),\n    followers: random.integer({\n      min: 0,\n      max: 20\n    }),\n    comments: random.integer({\n      min: 0,\n      max: 10\n    }),\n    stars: random.integer({\n      min: 0,\n      max: 5\n    })\n  };\n});\n\nvar loadTags = function loadTags() {\n  return new Promise(function (resolve) {\n    setTimeout(function () {\n      resolve(tags.map(function (tag) {\n        return {\n          value: tag.name,\n          view: _react.default.createElement(_components.EuiHealth, {\n            color: tag.color\n          }, tag.name)\n        };\n      }));\n    }, 2000);\n  });\n};\n\nvar initialQuery = _components.EuiSearchBar.Query.MATCH_ALL;\n\nvar SearchBar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBar, _Component);\n\n  function SearchBar(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBar).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onChange\", function (_ref) {\n      var query = _ref.query,\n          error = _ref.error;\n\n      if (error) {\n        _this.setState({\n          error: error\n        });\n      } else {\n        _this.setState({\n          error: null,\n          result: _components.EuiSearchBar.Query.execute(query, items, {\n            defaultFields: ['owner', 'tag', 'type']\n          }),\n          query: query\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggleIncremental\", function () {\n      _this.setState(function (prevState) {\n        return {\n          incremental: !prevState.incremental\n        };\n      });\n    });\n\n    _this.state = {\n      query: initialQuery,\n      result: items,\n      error: null,\n      incremental: false\n    };\n    return _this;\n  }\n\n  _createClass(SearchBar, [{\n    key: \"renderSearch\",\n    value: function renderSearch() {\n      var incremental = this.state.incremental;\n      var filters = [{\n        type: 'field_value_toggle_group',\n        field: 'status',\n        items: [{\n          value: 'open',\n          name: 'Open'\n        }, {\n          value: 'closed',\n          name: 'Closed'\n        }]\n      }, {\n        type: 'is',\n        field: 'active',\n        name: 'Active',\n        negatedName: 'Inactive'\n      }, {\n        type: 'field_value_toggle',\n        name: 'Mine',\n        field: 'owner',\n        value: 'dewey'\n      }, {\n        type: 'field_value_toggle',\n        name: 'Popular',\n        field: 'followers',\n        value: 5,\n        operator: 'gt'\n      }, {\n        type: 'field_value_selection',\n        field: 'tag',\n        name: 'Tag',\n        multiSelect: 'or',\n        cache: 10000,\n        // will cache the loaded tags for 10 sec\n        options: function options() {\n          return loadTags();\n        }\n      }];\n      var schema = {\n        strict: true,\n        fields: {\n          active: {\n            type: 'boolean'\n          },\n          status: {\n            type: 'string'\n          },\n          followers: {\n            type: 'number'\n          },\n          comments: {\n            type: 'number'\n          },\n          stars: {\n            type: 'number'\n          },\n          created: {\n            type: 'date'\n          },\n          owner: {\n            type: 'string'\n          },\n          tag: {\n            type: 'string',\n            validate: function validate(value) {\n              if (value !== '' && !tags.some(function (tag) {\n                return tag.name === value;\n              })) {\n                throw new Error(\"unknown tag (possible values: \".concat(tags.map(function (tag) {\n                  return tag.name;\n                }).join(','), \")\"));\n              }\n            }\n          }\n        }\n      };\n      return _react.default.createElement(_components.EuiSearchBar, {\n        defaultQuery: initialQuery,\n        box: {\n          placeholder: 'e.g. type:visualization -is:active joe',\n          incremental: incremental,\n          schema: schema\n        },\n        filters: filters,\n        onChange: this.onChange\n      });\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError() {\n      var error = this.state.error;\n\n      if (!error) {\n        return;\n      }\n\n      return _react.default.createElement(_react.Fragment, null, _react.default.createElement(_components.EuiCallOut, {\n        iconType: \"faceSad\",\n        color: \"danger\",\n        title: \"Invalid search: \".concat(error.message)\n      }), _react.default.createElement(_components.EuiSpacer, {\n        size: \"l\"\n      }));\n    }\n  }, {\n    key: \"renderTable\",\n    value: function renderTable() {\n      var columns = [{\n        name: 'Type',\n        field: 'type'\n      }, {\n        name: 'Open',\n        field: 'status',\n        render: function render(status) {\n          return status === 'open' ? 'Yes' : 'No';\n        }\n      }, {\n        name: 'Active',\n        field: 'active',\n        dataType: 'boolean'\n      }, {\n        name: 'Tags',\n        field: 'tag'\n      }, {\n        name: 'Owner',\n        field: 'owner'\n      }, {\n        name: 'Stats',\n        width: '150px',\n        render: function render(item) {\n          return _react.default.createElement(\"div\", null, _react.default.createElement(\"div\", null, \"\".concat(item.stars, \" Stars\")), _react.default.createElement(\"div\", null, \"\".concat(item.followers, \" Followers\")), _react.default.createElement(\"div\", null, \"\".concat(item.comments, \" Comments\")));\n        }\n      }];\n\n      var queriedItems = _components.EuiSearchBar.Query.execute(this.state.query, items, {\n        defaultFields: ['owner', 'tag', 'type']\n      });\n\n      return _react.default.createElement(_components.EuiBasicTable, {\n        items: queriedItems,\n        columns: columns\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          incremental = _this$state.incremental,\n          query = _this$state.query;\n      var esQueryDsl;\n      var esQueryString;\n\n      try {\n        esQueryDsl = _components.EuiSearchBar.Query.toESQuery(query);\n      } catch (e) {\n        esQueryDsl = e.toString();\n      }\n\n      try {\n        esQueryString = _components.EuiSearchBar.Query.toESQueryString(query);\n      } catch (e) {\n        esQueryString = e.toString();\n      }\n\n      var content = this.renderError() || _react.default.createElement(_components.EuiFlexGroup, null, _react.default.createElement(_components.EuiFlexItem, {\n        grow: 4\n      }, _react.default.createElement(_components.EuiTitle, {\n        size: \"s\"\n      }, _react.default.createElement(\"h3\", null, \"Elasticsearch Query String\")), _react.default.createElement(_components.EuiSpacer, {\n        size: \"s\"\n      }), _react.default.createElement(_components.EuiCodeBlock, {\n        language: \"js\"\n      }, esQueryString ? esQueryString : ''), _react.default.createElement(_components.EuiSpacer, {\n        size: \"l\"\n      }), _react.default.createElement(_components.EuiTitle, {\n        size: \"s\"\n      }, _react.default.createElement(\"h3\", null, \"Elasticsearch Query DSL\")), _react.default.createElement(_components.EuiSpacer, {\n        size: \"s\"\n      }), _react.default.createElement(_components.EuiCodeBlock, {\n        language: \"js\"\n      }, esQueryDsl ? JSON.stringify(esQueryDsl, null, 2) : '')), _react.default.createElement(_components.EuiFlexItem, {\n        grow: 6\n      }, _react.default.createElement(_components.EuiTitle, {\n        size: \"s\"\n      }, _react.default.createElement(\"h3\", null, \"JS execution\")), _react.default.createElement(_components.EuiSpacer, {\n        size: \"s\"\n      }), this.renderTable()));\n\n      return _react.default.createElement(_react.Fragment, null, _react.default.createElement(_components.EuiFlexGroup, {\n        alignItems: \"center\"\n      }, _react.default.createElement(_components.EuiFlexItem, null, this.renderSearch()), _react.default.createElement(_components.EuiFlexItem, {\n        grow: false\n      }, _react.default.createElement(_components.EuiSwitch, {\n        label: \"Incremental\",\n        checked: incremental,\n        onChange: this.toggleIncremental\n      }))), _react.default.createElement(_components.EuiSpacer, {\n        size: \"l\"\n      }), content);\n    }\n  }]);\n\n  return SearchBar;\n}(_react.Component);\n\nexports.SearchBar = SearchBar;\nSearchBar.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"onChange\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"{ query, error }\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"toggleIncremental\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderSearch\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderError\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"renderTable\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"SearchBar\"\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src-docs/src/views/search_bar/search_bar.js"],"names":["random","Random","tags","name","color","types","users","items","id","status","oneOf","type","tag","setOf","map","min","max","active","boolean","owner","followers","integer","comments","stars","loadTags","Promise","resolve","setTimeout","value","view","initialQuery","EuiSearchBar","Query","MATCH_ALL","SearchBar","props","query","error","setState","result","execute","defaultFields","prevState","incremental","state","filters","field","negatedName","operator","multiSelect","cache","options","schema","strict","fields","created","validate","some","Error","join","placeholder","onChange","message","columns","render","dataType","width","item","queriedItems","esQueryDsl","esQueryString","toESQuery","e","toString","toESQueryString","content","renderError","JSON","stringify","renderTable","renderSearch","toggleIncremental","Component"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { times } from '../../../../src/services/utils';\nimport { Random } from '../../../../src/services/random';\nimport {\n  EuiHealth,\n  EuiCallOut,\n  EuiSpacer,\n  EuiFlexGroup,\n  EuiFlexItem,\n  EuiCodeBlock,\n  EuiTitle,\n  EuiSwitch,\n  EuiBasicTable,\n  EuiSearchBar,\n} from '../../../../src/components';\n\nconst random = new Random();\n\nconst tags = [\n  { name: 'marketing', color: 'danger' },\n  { name: 'finance', color: 'success' },\n  { name: 'eng', color: 'success' },\n  { name: 'sales', color: 'warning' },\n  { name: 'ga', color: 'success' },\n];\n\nconst types = ['dashboard', 'visualization', 'watch'];\n\nconst users = ['dewey', 'wanda', 'carrie', 'jmack', 'gabic'];\n\nconst items = times(10, id => {\n  return {\n    id,\n    status: random.oneOf(['open', 'closed']),\n    type: random.oneOf(types),\n    tag: random.setOf(tags.map(tag => tag.name), { min: 0, max: 3 }),\n    active: random.boolean(),\n    owner: random.oneOf(users),\n    followers: random.integer({ min: 0, max: 20 }),\n    comments: random.integer({ min: 0, max: 10 }),\n    stars: random.integer({ min: 0, max: 5 }),\n  };\n});\n\nconst loadTags = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(\n        tags.map(tag => ({\n          value: tag.name,\n          view: <EuiHealth color={tag.color}>{tag.name}</EuiHealth>,\n        }))\n      );\n    }, 2000);\n  });\n};\n\nconst initialQuery = EuiSearchBar.Query.MATCH_ALL;\n\nexport class SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: initialQuery,\n      result: items,\n      error: null,\n      incremental: false,\n    };\n  }\n\n  onChange = ({ query, error }) => {\n    if (error) {\n      this.setState({ error });\n    } else {\n      this.setState({\n        error: null,\n        result: EuiSearchBar.Query.execute(query, items, {\n          defaultFields: ['owner', 'tag', 'type'],\n        }),\n        query,\n      });\n    }\n  };\n\n  toggleIncremental = () => {\n    this.setState(prevState => ({ incremental: !prevState.incremental }));\n  };\n\n  renderSearch() {\n    const { incremental } = this.state;\n\n    const filters = [\n      {\n        type: 'field_value_toggle_group',\n        field: 'status',\n        items: [\n          {\n            value: 'open',\n            name: 'Open',\n          },\n          {\n            value: 'closed',\n            name: 'Closed',\n          },\n        ],\n      },\n      {\n        type: 'is',\n        field: 'active',\n        name: 'Active',\n        negatedName: 'Inactive',\n      },\n      {\n        type: 'field_value_toggle',\n        name: 'Mine',\n        field: 'owner',\n        value: 'dewey',\n      },\n      {\n        type: 'field_value_toggle',\n        name: 'Popular',\n        field: 'followers',\n        value: 5,\n        operator: 'gt',\n      },\n      {\n        type: 'field_value_selection',\n        field: 'tag',\n        name: 'Tag',\n        multiSelect: 'or',\n        cache: 10000, // will cache the loaded tags for 10 sec\n        options: () => loadTags(),\n      },\n    ];\n\n    const schema = {\n      strict: true,\n      fields: {\n        active: {\n          type: 'boolean',\n        },\n        status: {\n          type: 'string',\n        },\n        followers: {\n          type: 'number',\n        },\n        comments: {\n          type: 'number',\n        },\n        stars: {\n          type: 'number',\n        },\n        created: {\n          type: 'date',\n        },\n        owner: {\n          type: 'string',\n        },\n        tag: {\n          type: 'string',\n          validate: value => {\n            if (value !== '' && !tags.some(tag => tag.name === value)) {\n              throw new Error(\n                `unknown tag (possible values: ${tags\n                  .map(tag => tag.name)\n                  .join(',')})`\n              );\n            }\n          },\n        },\n      },\n    };\n\n    return (\n      <EuiSearchBar\n        defaultQuery={initialQuery}\n        box={{\n          placeholder: 'e.g. type:visualization -is:active joe',\n          incremental,\n          schema,\n        }}\n        filters={filters}\n        onChange={this.onChange}\n      />\n    );\n  }\n\n  renderError() {\n    const { error } = this.state;\n    if (!error) {\n      return;\n    }\n    return (\n      <Fragment>\n        <EuiCallOut\n          iconType=\"faceSad\"\n          color=\"danger\"\n          title={`Invalid search: ${error.message}`}\n        />\n        <EuiSpacer size=\"l\" />\n      </Fragment>\n    );\n  }\n\n  renderTable() {\n    const columns = [\n      {\n        name: 'Type',\n        field: 'type',\n      },\n      {\n        name: 'Open',\n        field: 'status',\n        render: status => (status === 'open' ? 'Yes' : 'No'),\n      },\n      {\n        name: 'Active',\n        field: 'active',\n        dataType: 'boolean',\n      },\n      {\n        name: 'Tags',\n        field: 'tag',\n      },\n      {\n        name: 'Owner',\n        field: 'owner',\n      },\n      {\n        name: 'Stats',\n        width: '150px',\n        render: item => {\n          return (\n            <div>\n              <div>{`${item.stars} Stars`}</div>\n              <div>{`${item.followers} Followers`}</div>\n              <div>{`${item.comments} Comments`}</div>\n            </div>\n          );\n        },\n      },\n    ];\n\n    const queriedItems = EuiSearchBar.Query.execute(this.state.query, items, {\n      defaultFields: ['owner', 'tag', 'type'],\n    });\n\n    return <EuiBasicTable items={queriedItems} columns={columns} />;\n  }\n\n  render() {\n    const { incremental, query } = this.state;\n\n    let esQueryDsl;\n    let esQueryString;\n\n    try {\n      esQueryDsl = EuiSearchBar.Query.toESQuery(query);\n    } catch (e) {\n      esQueryDsl = e.toString();\n    }\n    try {\n      esQueryString = EuiSearchBar.Query.toESQueryString(query);\n    } catch (e) {\n      esQueryString = e.toString();\n    }\n\n    const content = this.renderError() || (\n      <EuiFlexGroup>\n        <EuiFlexItem grow={4}>\n          <EuiTitle size=\"s\">\n            <h3>Elasticsearch Query String</h3>\n          </EuiTitle>\n          <EuiSpacer size=\"s\" />\n          <EuiCodeBlock language=\"js\">\n            {esQueryString ? esQueryString : ''}\n          </EuiCodeBlock>\n\n          <EuiSpacer size=\"l\" />\n\n          <EuiTitle size=\"s\">\n            <h3>Elasticsearch Query DSL</h3>\n          </EuiTitle>\n          <EuiSpacer size=\"s\" />\n          <EuiCodeBlock language=\"js\">\n            {esQueryDsl ? JSON.stringify(esQueryDsl, null, 2) : ''}\n          </EuiCodeBlock>\n        </EuiFlexItem>\n\n        <EuiFlexItem grow={6}>\n          <EuiTitle size=\"s\">\n            <h3>JS execution</h3>\n          </EuiTitle>\n\n          <EuiSpacer size=\"s\" />\n\n          {this.renderTable()}\n        </EuiFlexItem>\n      </EuiFlexGroup>\n    );\n\n    return (\n      <Fragment>\n        <EuiFlexGroup alignItems=\"center\">\n          <EuiFlexItem>{this.renderSearch()}</EuiFlexItem>\n\n          <EuiFlexItem grow={false}>\n            <EuiSwitch\n              label=\"Incremental\"\n              checked={incremental}\n              onChange={this.toggleIncremental}\n            />\n          </EuiFlexItem>\n        </EuiFlexGroup>\n        <EuiSpacer size=\"l\" />\n        {content}\n      </Fragment>\n    );\n  }\n}\n"]}]}