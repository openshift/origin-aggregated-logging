{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src/components/context_menu/context_menu.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src/components/context_menu/context_menu.js","mtime":1567534071244},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EuiContextMenu = exports.EuiContextMenuPanelShape = exports.EuiContextMenuPanelItemShape = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.find-index\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _context_menu_panel = require(\"./context_menu_panel\");\n\nvar _context_menu_item = require(\"./context_menu_item\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction mapIdsToPanels(panels) {\n  var map = {};\n  panels.forEach(function (panel) {\n    map[panel.id] = panel;\n  });\n  return map;\n}\n\nfunction mapIdsToPreviousPanels(panels) {\n  var idToPreviousPanelIdMap = {};\n  panels.forEach(function (panel) {\n    if (Array.isArray(panel.items)) {\n      panel.items.forEach(function (item) {\n        var isCloseable = item.panel !== undefined;\n\n        if (isCloseable) {\n          idToPreviousPanelIdMap[item.panel] = panel.id;\n        }\n      });\n    }\n  });\n  return idToPreviousPanelIdMap;\n}\n\nfunction mapPanelItemsToPanels(panels) {\n  var idAndItemIndexToPanelIdMap = {};\n  panels.forEach(function (panel) {\n    idAndItemIndexToPanelIdMap[panel.id] = {};\n\n    if (panel.items) {\n      panel.items.forEach(function (item, index) {\n        if (item.panel) {\n          idAndItemIndexToPanelIdMap[panel.id][index] = item.panel;\n        }\n      });\n    }\n  });\n  return idAndItemIndexToPanelIdMap;\n}\n\nvar EuiContextMenuPanelItemShape = _propTypes.default.shape({\n  name: _propTypes.default.string,\n  icon: _propTypes.default.node,\n  onClick: _propTypes.default.func,\n  // If given, shows the panel with this id when clicked:\n  panel: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  disabled: _propTypes.default.bool\n});\n\nexports.EuiContextMenuPanelItemShape = EuiContextMenuPanelItemShape;\n\nvar EuiContextMenuPanelShape = _propTypes.default.shape({\n  id: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  width: _propTypes.default.number,\n  // Pixel value to set the panel width to\n  content: _propTypes.default.node,\n  // Either content or items array should be given.\n  items: _propTypes.default.arrayOf(EuiContextMenuPanelItemShape),\n  title: _propTypes.default.string\n});\n\nexports.EuiContextMenuPanelShape = EuiContextMenuPanelShape;\n\nvar EuiContextMenu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EuiContextMenu, _Component);\n\n  _createClass(EuiContextMenu, null, [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var panels = nextProps.panels;\n\n      if (prevState.prevProps.panels !== panels) {\n        return {\n          prevProps: {\n            panels: panels\n          },\n          idToPanelMap: mapIdsToPanels(panels),\n          idToPreviousPanelIdMap: mapIdsToPreviousPanels(panels),\n          idAndItemIndexToPanelIdMap: mapPanelItemsToPanels(panels)\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  function EuiContextMenu(props) {\n    var _this;\n\n    _classCallCheck(this, EuiContextMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EuiContextMenu).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"hasPreviousPanel\", function (panelId) {\n      var previousPanelId = _this.state.idToPreviousPanelIdMap[panelId];\n      return typeof previousPanelId !== 'undefined';\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"showNextPanel\", function (itemIndex) {\n      var nextPanelId = _this.state.idAndItemIndexToPanelIdMap[_this.state.incomingPanelId][itemIndex];\n\n      if (nextPanelId) {\n        if (_this.state.isUsingKeyboardToNavigate) {\n          _this.setState({\n            focusedItemIndex: 0\n          });\n        }\n\n        _this.showPanel(nextPanelId, 'next');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"showPreviousPanel\", function () {\n      // If there's a previous panel, then we can close the current panel to go back to it.\n      if (_this.hasPreviousPanel(_this.state.incomingPanelId)) {\n        var previousPanelId = _this.state.idToPreviousPanelIdMap[_this.state.incomingPanelId]; // Set focus on the item which shows the panel we're leaving.\n\n        var previousPanel = _this.state.idToPanelMap[previousPanelId];\n        var focusedItemIndex = previousPanel.items.findIndex(function (item) {\n          return item.panel === _this.state.incomingPanelId;\n        });\n\n        if (focusedItemIndex !== -1) {\n          _this.setState({\n            focusedItemIndex: focusedItemIndex\n          });\n        }\n\n        _this.showPanel(previousPanelId, 'previous');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onIncomingPanelHeightChange\", function (height) {\n      _this.setState(function (_ref) {\n        var prevHeight = _ref.height;\n\n        if (height === prevHeight) {\n          return null;\n        } else {\n          return {\n            height: height\n          };\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onOutGoingPanelTransitionComplete\", function () {\n      _this.setState({\n        isOutgoingPanelVisible: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onUseKeyboardToNavigate\", function () {\n      if (!_this.state.isUsingKeyboardToNavigate) {\n        _this.setState({\n          isUsingKeyboardToNavigate: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mapIdsToRenderedItems\", function (panels) {\n      var idToRenderedItemsMap = {}; // Pre-rendering the items lets us check reference equality inside of EuiContextMenuPanel.\n\n      panels.forEach(function (panel) {\n        idToRenderedItemsMap[panel.id] = _this.renderItems(panel.items);\n      });\n      return idToRenderedItemsMap;\n    });\n\n    _this.state = {\n      prevProps: {},\n      idToPanelMap: {},\n      idToPreviousPanelIdMap: {},\n      idAndItemIndexToPanelIdMap: {},\n      idToRenderedItemsMap: _this.mapIdsToRenderedItems(_this.props.panels),\n      height: undefined,\n      outgoingPanelId: undefined,\n      incomingPanelId: props.initialPanelId,\n      transitionDirection: undefined,\n      isOutgoingPanelVisible: false,\n      focusedItemIndex: undefined,\n      isUsingKeyboardToNavigate: false\n    };\n    return _this;\n  }\n\n  _createClass(EuiContextMenu, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.panels !== this.props.panels) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          idToRenderedItemsMap: this.mapIdsToRenderedItems(this.props.panels)\n        });\n      }\n    }\n  }, {\n    key: \"showPanel\",\n    value: function showPanel(panelId, direction) {\n      this.setState({\n        outgoingPanelId: this.state.incomingPanelId,\n        incomingPanelId: panelId,\n        transitionDirection: direction,\n        isOutgoingPanelVisible: true\n      });\n    }\n  }, {\n    key: \"renderItems\",\n    value: function renderItems() {\n      var _this2 = this;\n\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return items.map(function (item, index) {\n        var panel = item.panel,\n            name = item.name,\n            icon = item.icon,\n            onClick = item.onClick,\n            toolTipTitle = item.toolTipTitle,\n            toolTipContent = item.toolTipContent,\n            rest = _objectWithoutProperties(item, [\"panel\", \"name\", \"icon\", \"onClick\", \"toolTipTitle\", \"toolTipContent\"]);\n\n        var onClickHandler = panel ? function (event) {\n          if (onClick && event) {\n            event.persist();\n          } // This component is commonly wrapped in a EuiOutsideClickDetector, which means we'll\n          // need to wait for that logic to complete before re-rendering the DOM via showPanel.\n\n\n          window.requestAnimationFrame(function () {\n            if (onClick) onClick(event);\n\n            _this2.showNextPanel(index);\n          });\n        } : onClick;\n        return _react.default.createElement(_context_menu_item.EuiContextMenuItem, _extends({\n          key: name,\n          icon: icon,\n          onClick: onClickHandler,\n          hasPanel: Boolean(panel),\n          toolTipTitle: toolTipTitle,\n          toolTipContent: toolTipContent\n        }, rest), name);\n      });\n    }\n  }, {\n    key: \"renderPanel\",\n    value: function renderPanel(panelId, transitionType) {\n      var _this3 = this;\n\n      var panel = this.state.idToPanelMap[panelId];\n\n      if (!panel) {\n        return;\n      } // As above, we need to wait for EuiOutsideClickDetector to complete its logic before\n      // re-rendering via showPanel.\n\n\n      var onClose;\n\n      if (this.hasPreviousPanel(panelId)) {\n        onClose = function onClose() {\n          return window.requestAnimationFrame(_this3.showPreviousPanel);\n        };\n      }\n\n      return _react.default.createElement(_context_menu_panel.EuiContextMenuPanel, {\n        key: panelId,\n        className: \"euiContextMenu__panel\",\n        onHeightChange: transitionType === 'in' ? this.onIncomingPanelHeightChange : undefined,\n        onTransitionComplete: transitionType === 'out' ? this.onOutGoingPanelTransitionComplete : undefined,\n        title: panel.title,\n        onClose: onClose,\n        transitionType: this.state.isOutgoingPanelVisible ? transitionType : undefined,\n        transitionDirection: this.state.isOutgoingPanelVisible ? this.state.transitionDirection : undefined,\n        hasFocus: transitionType === 'in',\n        items: this.state.idToRenderedItemsMap[panelId],\n        initialFocusedItemIndex: this.state.isUsingKeyboardToNavigate ? this.state.focusedItemIndex : undefined,\n        onUseKeyboardToNavigate: this.onUseKeyboardToNavigate,\n        showNextPanel: this.showNextPanel,\n        showPreviousPanel: this.showPreviousPanel\n      }, panel.content);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          panels = _this$props.panels,\n          className = _this$props.className,\n          initialPanelId = _this$props.initialPanelId,\n          rest = _objectWithoutProperties(_this$props, [\"panels\", \"className\", \"initialPanelId\"]);\n\n      var incomingPanel = this.renderPanel(this.state.incomingPanelId, 'in');\n      var outgoingPanel;\n\n      if (this.state.isOutgoingPanelVisible) {\n        outgoingPanel = this.renderPanel(this.state.outgoingPanelId, 'out');\n      }\n\n      var width = this.state.idToPanelMap[this.state.incomingPanelId] && this.state.idToPanelMap[this.state.incomingPanelId].width ? this.state.idToPanelMap[this.state.incomingPanelId].width : undefined;\n      var classes = (0, _classnames.default)('euiContextMenu', className);\n      return _react.default.createElement(\"div\", _extends({\n        className: classes,\n        style: {\n          height: this.state.height,\n          width: width\n        }\n      }, rest), outgoingPanel, incomingPanel);\n    }\n  }]);\n\n  return EuiContextMenu;\n}(_react.Component);\n\nexports.EuiContextMenu = EuiContextMenu;\n\n_defineProperty(EuiContextMenu, \"propTypes\", {\n  className: _propTypes.default.string,\n  panels: _propTypes.default.arrayOf(EuiContextMenuPanelShape),\n  initialPanelId: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number])\n});\n\n_defineProperty(EuiContextMenu, \"defaultProps\", {\n  panels: []\n});\n\nEuiContextMenu.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"getDerivedStateFromProps\",\n    \"docblock\": null,\n    \"modifiers\": [\"static\"],\n    \"params\": [{\n      \"name\": \"nextProps\",\n      \"type\": null\n    }, {\n      \"name\": \"prevState\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"hasPreviousPanel\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"panelId\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"showPanel\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"panelId\",\n      \"type\": null\n    }, {\n      \"name\": \"direction\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"showNextPanel\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"itemIndex\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"showPreviousPanel\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"onIncomingPanelHeightChange\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"height\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onOutGoingPanelTransitionComplete\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"onUseKeyboardToNavigate\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"mapIdsToRenderedItems\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"panels\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderItems\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"items\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"renderPanel\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"panelId\",\n      \"type\": null\n    }, {\n      \"name\": \"transitionType\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"EuiContextMenu\",\n  \"props\": {\n    \"panels\": {\n      \"defaultValue\": {\n        \"value\": \"[]\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"arrayOf\",\n        \"value\": {\n          \"name\": \"custom\",\n          \"raw\": \"EuiContextMenuPanelShape\"\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"className\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"initialPanelId\": {\n      \"type\": {\n        \"name\": \"union\",\n        \"value\": [{\n          \"name\": \"string\"\n        }, {\n          \"name\": \"number\"\n        }]\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src/components/context_menu/context_menu.js"],"names":["mapIdsToPanels","panels","map","forEach","panel","id","mapIdsToPreviousPanels","idToPreviousPanelIdMap","Array","isArray","items","item","isCloseable","undefined","mapPanelItemsToPanels","idAndItemIndexToPanelIdMap","index","EuiContextMenuPanelItemShape","PropTypes","shape","name","string","icon","node","onClick","func","oneOfType","number","disabled","bool","EuiContextMenuPanelShape","width","content","arrayOf","title","EuiContextMenu","nextProps","prevState","prevProps","idToPanelMap","props","panelId","previousPanelId","state","itemIndex","nextPanelId","incomingPanelId","isUsingKeyboardToNavigate","setState","focusedItemIndex","showPanel","hasPreviousPanel","previousPanel","findIndex","height","prevHeight","isOutgoingPanelVisible","idToRenderedItemsMap","renderItems","mapIdsToRenderedItems","outgoingPanelId","initialPanelId","transitionDirection","direction","toolTipTitle","toolTipContent","rest","onClickHandler","event","persist","window","requestAnimationFrame","showNextPanel","Boolean","transitionType","onClose","showPreviousPanel","onIncomingPanelHeightChange","onOutGoingPanelTransitionComplete","onUseKeyboardToNavigate","className","incomingPanel","renderPanel","outgoingPanel","classes","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { EuiContextMenuPanel } from './context_menu_panel';\nimport { EuiContextMenuItem } from './context_menu_item';\n\nfunction mapIdsToPanels(panels) {\n  const map = {};\n\n  panels.forEach(panel => {\n    map[panel.id] = panel;\n  });\n\n  return map;\n}\n\nfunction mapIdsToPreviousPanels(panels) {\n  const idToPreviousPanelIdMap = {};\n\n  panels.forEach(panel => {\n    if (Array.isArray(panel.items)) {\n      panel.items.forEach(item => {\n        const isCloseable = item.panel !== undefined;\n        if (isCloseable) {\n          idToPreviousPanelIdMap[item.panel] = panel.id;\n        }\n      });\n    }\n  });\n\n  return idToPreviousPanelIdMap;\n}\n\nfunction mapPanelItemsToPanels(panels) {\n  const idAndItemIndexToPanelIdMap = {};\n\n  panels.forEach(panel => {\n    idAndItemIndexToPanelIdMap[panel.id] = {};\n\n    if (panel.items) {\n      panel.items.forEach((item, index) => {\n        if (item.panel) {\n          idAndItemIndexToPanelIdMap[panel.id][index] = item.panel;\n        }\n      });\n    }\n  });\n\n  return idAndItemIndexToPanelIdMap;\n}\n\nexport const EuiContextMenuPanelItemShape = PropTypes.shape({\n  name: PropTypes.string,\n  icon: PropTypes.node,\n  onClick: PropTypes.func,\n  // If given, shows the panel with this id when clicked:\n  panel: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  disabled: PropTypes.bool,\n});\n\nexport const EuiContextMenuPanelShape = PropTypes.shape({\n  id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  width: PropTypes.number, // Pixel value to set the panel width to\n  content: PropTypes.node, // Either content or items array should be given.\n  items: PropTypes.arrayOf(EuiContextMenuPanelItemShape),\n  title: PropTypes.string,\n});\n\nexport class EuiContextMenu extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    panels: PropTypes.arrayOf(EuiContextMenuPanelShape),\n    initialPanelId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  };\n\n  static defaultProps = {\n    panels: [],\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { panels } = nextProps;\n\n    if (prevState.prevProps.panels !== panels) {\n      return {\n        prevProps: { panels },\n        idToPanelMap: mapIdsToPanels(panels),\n        idToPreviousPanelIdMap: mapIdsToPreviousPanels(panels),\n        idAndItemIndexToPanelIdMap: mapPanelItemsToPanels(panels),\n      };\n    }\n\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      prevProps: {},\n      idToPanelMap: {},\n      idToPreviousPanelIdMap: {},\n      idAndItemIndexToPanelIdMap: {},\n      idToRenderedItemsMap: this.mapIdsToRenderedItems(this.props.panels),\n\n      height: undefined,\n      outgoingPanelId: undefined,\n      incomingPanelId: props.initialPanelId,\n      transitionDirection: undefined,\n      isOutgoingPanelVisible: false,\n      focusedItemIndex: undefined,\n      isUsingKeyboardToNavigate: false,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.panels !== this.props.panels) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({\n        idToRenderedItemsMap: this.mapIdsToRenderedItems(this.props.panels),\n      });\n    }\n  }\n\n  hasPreviousPanel = panelId => {\n    const previousPanelId = this.state.idToPreviousPanelIdMap[panelId];\n    return typeof previousPanelId !== 'undefined';\n  };\n\n  showPanel(panelId, direction) {\n    this.setState({\n      outgoingPanelId: this.state.incomingPanelId,\n      incomingPanelId: panelId,\n      transitionDirection: direction,\n      isOutgoingPanelVisible: true,\n    });\n  }\n\n  showNextPanel = itemIndex => {\n    const nextPanelId = this.state.idAndItemIndexToPanelIdMap[\n      this.state.incomingPanelId\n    ][itemIndex];\n    if (nextPanelId) {\n      if (this.state.isUsingKeyboardToNavigate) {\n        this.setState({\n          focusedItemIndex: 0,\n        });\n      }\n\n      this.showPanel(nextPanelId, 'next');\n    }\n  };\n\n  showPreviousPanel = () => {\n    // If there's a previous panel, then we can close the current panel to go back to it.\n    if (this.hasPreviousPanel(this.state.incomingPanelId)) {\n      const previousPanelId = this.state.idToPreviousPanelIdMap[\n        this.state.incomingPanelId\n      ];\n\n      // Set focus on the item which shows the panel we're leaving.\n      const previousPanel = this.state.idToPanelMap[previousPanelId];\n      const focusedItemIndex = previousPanel.items.findIndex(\n        item => item.panel === this.state.incomingPanelId\n      );\n\n      if (focusedItemIndex !== -1) {\n        this.setState({\n          focusedItemIndex,\n        });\n      }\n\n      this.showPanel(previousPanelId, 'previous');\n    }\n  };\n\n  onIncomingPanelHeightChange = height => {\n    this.setState(({ height: prevHeight }) => {\n      if (height === prevHeight) {\n        return null;\n      } else {\n        return { height };\n      }\n    });\n  };\n\n  onOutGoingPanelTransitionComplete = () => {\n    this.setState({\n      isOutgoingPanelVisible: false,\n    });\n  };\n\n  onUseKeyboardToNavigate = () => {\n    if (!this.state.isUsingKeyboardToNavigate) {\n      this.setState({\n        isUsingKeyboardToNavigate: true,\n      });\n    }\n  };\n\n  mapIdsToRenderedItems = panels => {\n    const idToRenderedItemsMap = {};\n\n    // Pre-rendering the items lets us check reference equality inside of EuiContextMenuPanel.\n    panels.forEach(panel => {\n      idToRenderedItemsMap[panel.id] = this.renderItems(panel.items);\n    });\n\n    return idToRenderedItemsMap;\n  };\n\n  renderItems(items = []) {\n    return items.map((item, index) => {\n      const {\n        panel,\n        name,\n        icon,\n        onClick,\n        toolTipTitle,\n        toolTipContent,\n        ...rest\n      } = item;\n\n      const onClickHandler = panel\n        ? event => {\n            if (onClick && event) {\n              event.persist();\n            }\n            // This component is commonly wrapped in a EuiOutsideClickDetector, which means we'll\n            // need to wait for that logic to complete before re-rendering the DOM via showPanel.\n            window.requestAnimationFrame(() => {\n              if (onClick) onClick(event);\n              this.showNextPanel(index);\n            });\n          }\n        : onClick;\n\n      return (\n        <EuiContextMenuItem\n          key={name}\n          icon={icon}\n          onClick={onClickHandler}\n          hasPanel={Boolean(panel)}\n          toolTipTitle={toolTipTitle}\n          toolTipContent={toolTipContent}\n          {...rest}>\n          {name}\n        </EuiContextMenuItem>\n      );\n    });\n  }\n\n  renderPanel(panelId, transitionType) {\n    const panel = this.state.idToPanelMap[panelId];\n\n    if (!panel) {\n      return;\n    }\n\n    // As above, we need to wait for EuiOutsideClickDetector to complete its logic before\n    // re-rendering via showPanel.\n    let onClose;\n    if (this.hasPreviousPanel(panelId)) {\n      onClose = () => window.requestAnimationFrame(this.showPreviousPanel);\n    }\n\n    return (\n      <EuiContextMenuPanel\n        key={panelId}\n        className=\"euiContextMenu__panel\"\n        onHeightChange={\n          transitionType === 'in' ? this.onIncomingPanelHeightChange : undefined\n        }\n        onTransitionComplete={\n          transitionType === 'out'\n            ? this.onOutGoingPanelTransitionComplete\n            : undefined\n        }\n        title={panel.title}\n        onClose={onClose}\n        transitionType={\n          this.state.isOutgoingPanelVisible ? transitionType : undefined\n        }\n        transitionDirection={\n          this.state.isOutgoingPanelVisible\n            ? this.state.transitionDirection\n            : undefined\n        }\n        hasFocus={transitionType === 'in'}\n        items={this.state.idToRenderedItemsMap[panelId]}\n        initialFocusedItemIndex={\n          this.state.isUsingKeyboardToNavigate\n            ? this.state.focusedItemIndex\n            : undefined\n        }\n        onUseKeyboardToNavigate={this.onUseKeyboardToNavigate}\n        showNextPanel={this.showNextPanel}\n        showPreviousPanel={this.showPreviousPanel}>\n        {panel.content}\n      </EuiContextMenuPanel>\n    );\n  }\n\n  render() {\n    const { panels, className, initialPanelId, ...rest } = this.props;\n\n    const incomingPanel = this.renderPanel(this.state.incomingPanelId, 'in');\n    let outgoingPanel;\n\n    if (this.state.isOutgoingPanelVisible) {\n      outgoingPanel = this.renderPanel(this.state.outgoingPanelId, 'out');\n    }\n\n    const width =\n      this.state.idToPanelMap[this.state.incomingPanelId] &&\n      this.state.idToPanelMap[this.state.incomingPanelId].width\n        ? this.state.idToPanelMap[this.state.incomingPanelId].width\n        : undefined;\n\n    const classes = classNames('euiContextMenu', className);\n\n    return (\n      <div\n        className={classes}\n        style={{ height: this.state.height, width: width }}\n        {...rest}>\n        {outgoingPanel}\n        {incomingPanel}\n      </div>\n    );\n  }\n}\n"]}]}