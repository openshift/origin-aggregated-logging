{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src/components/popover/input_popover.tsx","dependencies":[{"path":"/Users/chanderprall/projects/eui/src/components/popover/input_popover.tsx","mtime":1567626462180},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EuiInputPopover = void 0;\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _tabbable = _interopRequireDefault(require(\"tabbable\"));\n\nvar _focus_trap = require(\"../focus_trap\");\n\nvar _popover = require(\"./popover\");\n\nvar _resize_observer = require(\"../observer/resize_observer\");\n\nvar _services = require(\"../../services\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar EuiInputPopover = function EuiInputPopover(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      input = _ref.input,\n      _ref$fullWidth = _ref.fullWidth,\n      fullWidth = _ref$fullWidth === void 0 ? false : _ref$fullWidth,\n      props = _objectWithoutProperties(_ref, [\"children\", \"className\", \"input\", \"fullWidth\"]);\n\n  var _useState = (0, _react.useState)(),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputEl = _useState2[0],\n      setInputEl = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputElWidth = _useState4[0],\n      setInputElWidth = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      panelEl = _useState6[0],\n      setPanelEl = _useState6[1];\n\n  var inputRef = function inputRef(node) {\n    return setInputEl(node);\n  };\n\n  var panelRef = function panelRef(node) {\n    return setPanelEl(node);\n  };\n\n  var setPanelWidth = function setPanelWidth(width) {\n    if (panelEl && (!!inputElWidth || !!width)) {\n      var newWidth = !!width ? width : inputElWidth;\n      panelEl.style.width = \"\".concat(newWidth, \"px\");\n    }\n  };\n\n  var onResize = function onResize() {\n    if (inputEl) {\n      var width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth(width);\n    }\n  };\n\n  (0, _react.useEffect)(function () {\n    onResize();\n  }, [inputEl]);\n  (0, _react.useEffect)(function () {\n    setPanelWidth();\n  }, [panelEl]);\n\n  var onKeyDown = function onKeyDown(e) {\n    if (e.keyCode === _services.cascadingMenuKeyCodes.TAB) {\n      var tabbableItems = (0, _tabbable.default)(panelEl).filter(function (el) {\n        return Array.from(el.attributes).map(function (el) {\n          return el.name;\n        }).indexOf('data-focus-guard') < 0;\n      });\n\n      if (tabbableItems.length && tabbableItems[tabbableItems.length - 1] === document.activeElement) {\n        props.closePopover();\n      }\n    }\n  };\n\n  var classes = (0, _classnames.default)('euiInputPopover', {\n    'euiInputPopover--fullWidth': fullWidth\n  }, className);\n  return _react.default.createElement(_popover.EuiPopover, _extends({\n    ownFocus: false,\n    button: _react.default.createElement(_resize_observer.EuiResizeObserver, {\n      onResize: onResize\n    }, function (resizeRef) {\n      return _react.default.createElement(\"div\", {\n        ref: resizeRef\n      }, input);\n    }),\n    buttonRef: inputRef,\n    panelRef: panelRef,\n    className: classes\n  }, props), _react.default.createElement(_focus_trap.EuiFocusTrap, {\n    clickOutsideDisables: true\n  }, _react.default.createElement(\"div\", {\n    onKeyDown: onKeyDown\n  }, children)));\n};\n\nexports.EuiInputPopover = EuiInputPopover;\nEuiInputPopover.propTypes = {\n  className: _propTypes.default.string,\n  \"aria-label\": _propTypes.default.string,\n  \"data-test-subj\": _propTypes.default.string,\n  fullWidth: _propTypes.default.bool,\n  input: _propTypes.default.any.isRequired,\n  inputRef: _propTypes.default.any\n};\nEuiInputPopover.defaultProps = {\n  anchorPosition: 'downLeft',\n  attachToAnchor: true,\n  display: 'block',\n  panelPaddingSize: 's'\n};\nEuiInputPopover.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"EuiInputPopover\",\n  \"props\": {\n    \"fullWidth\": {\n      \"defaultValue\": {\n        \"value\": \"false\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"anchorPosition\": {\n      \"defaultValue\": {\n        \"value\": \"'downLeft'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"attachToAnchor\": {\n      \"defaultValue\": {\n        \"value\": \"true\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"display\": {\n      \"defaultValue\": {\n        \"value\": \"'block'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"panelPaddingSize\": {\n      \"defaultValue\": {\n        \"value\": \"'s'\",\n        \"computed\": false\n      },\n      \"required\": false\n    },\n    \"className\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"_propTypes.default.string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"aria-label\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"_propTypes.default.string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"data-test-subj\": {\n      \"type\": {\n        \"name\": \"custom\",\n        \"raw\": \"_propTypes.default.string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"input\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"inputRef\": {\n      \"type\": {\n        \"name\": \"any\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src/components/popover/input_popover.tsx"],"names":["EuiInputPopover","children","className","input","fullWidth","props","inputEl","setInputEl","inputElWidth","setInputElWidth","panelEl","setPanelEl","inputRef","node","panelRef","setPanelWidth","width","newWidth","style","onResize","getBoundingClientRect","onKeyDown","e","keyCode","cascadingMenuKeyCodes","TAB","tabbableItems","filter","el","Array","from","attributes","map","name","indexOf","length","document","activeElement","closePopover","classes","resizeRef","defaultProps","anchorPosition","attachToAnchor","display","panelPaddingSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\nimport classnames from 'classnames';\nimport tabbable from 'tabbable';\nimport { EuiFocusTrap } from '../focus_trap';\nimport { EuiPopover } from './popover';\nimport { EuiResizeObserver } from '../observer/resize_observer';\nimport { cascadingMenuKeyCodes } from '../../services';\nexport var EuiInputPopover = ({\n  children,\n  className,\n  input,\n  fullWidth = false,\n  ...props\n}) => {\n  const [inputEl, setInputEl] = useState();\n  const [inputElWidth, setInputElWidth] = useState();\n  const [panelEl, setPanelEl] = useState();\n\n  const inputRef = node => setInputEl(node);\n\n  const panelRef = node => setPanelEl(node);\n\n  const setPanelWidth = width => {\n    if (panelEl && (!!inputElWidth || !!width)) {\n      const newWidth = !!width ? width : inputElWidth;\n      panelEl.style.width = `${newWidth}px`;\n    }\n  };\n\n  const onResize = () => {\n    if (inputEl) {\n      const width = inputEl.getBoundingClientRect().width;\n      setInputElWidth(width);\n      setPanelWidth(width);\n    }\n  };\n\n  useEffect(() => {\n    onResize();\n  }, [inputEl]);\n  useEffect(() => {\n    setPanelWidth();\n  }, [panelEl]);\n\n  const onKeyDown = e => {\n    if (e.keyCode === cascadingMenuKeyCodes.TAB) {\n      const tabbableItems = tabbable(panelEl).filter(el => {\n        return Array.from(el.attributes).map(el => el.name).indexOf('data-focus-guard') < 0;\n      });\n\n      if (tabbableItems.length && tabbableItems[tabbableItems.length - 1] === document.activeElement) {\n        props.closePopover();\n      }\n    }\n  };\n\n  const classes = classnames('euiInputPopover', {\n    'euiInputPopover--fullWidth': fullWidth\n  }, className);\n  return <EuiPopover ownFocus={false} button={<EuiResizeObserver onResize={onResize}>\n          {resizeRef => <div ref={resizeRef}>{input}</div>}\n        </EuiResizeObserver>} buttonRef={inputRef} panelRef={panelRef} className={classes} {...props}>\n      <EuiFocusTrap clickOutsideDisables={true}>\n        <div onKeyDown={onKeyDown}>{children}</div>\n      </EuiFocusTrap>\n    </EuiPopover>;\n};\nEuiInputPopover.propTypes = {\n  className: _propTypes.default.string,\n  \"aria-label\": _propTypes.default.string,\n  \"data-test-subj\": _propTypes.default.string,\n  fullWidth: PropTypes.bool,\n  input: PropTypes.any.isRequired,\n  inputRef: PropTypes.any\n};\nEuiInputPopover.defaultProps = {\n  anchorPosition: 'downLeft',\n  attachToAnchor: true,\n  display: 'block',\n  panelPaddingSize: 's'\n};"]}]}