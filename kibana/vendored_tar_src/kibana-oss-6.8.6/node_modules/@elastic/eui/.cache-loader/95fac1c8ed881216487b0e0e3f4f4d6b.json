{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src/components/code_editor/code_editor.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src/components/code_editor/code_editor.js","mtime":1565204169630},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EuiCodeEditor = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _reactAce = _interopRequireDefault(require(\"react-ace\"));\n\nvar _services = require(\"../../services\");\n\nvar _i18n = require(\"../i18n\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction setOrRemoveAttribute(element, attributeName, value) {\n  if (value === null || value === undefined) {\n    element.removeAttribute(attributeName);\n  } else {\n    element.setAttribute(attributeName, value);\n  }\n}\n\nvar EuiCodeEditor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EuiCodeEditor, _Component);\n\n  function EuiCodeEditor() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EuiCodeEditor);\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EuiCodeEditor)).call.apply(_getPrototypeOf2, [this].concat(_args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isHintActive: true,\n      isEditing: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"idGenerator\", (0, _services.htmlIdGenerator)());\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"aceEditorRef\", function (aceEditor) {\n      if (aceEditor) {\n        _this.aceEditor = aceEditor;\n        var textbox = aceEditor.editor.textInput.getElement();\n        textbox.tabIndex = -1;\n        textbox.addEventListener('keydown', _this.onKeydownAce);\n        setOrRemoveAttribute(textbox, 'aria-label', _this.props['aria-label']);\n        setOrRemoveAttribute(textbox, 'aria-labelledby', _this.props['aria-labelledby']);\n        setOrRemoveAttribute(textbox, 'aria-describedby', _this.props['aria-describedby']);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeydownAce\", function (ev) {\n      if (ev.keyCode === _services.keyCodes.ESCAPE) {\n        // If the autocompletion context menu is open then we want to let ESCAPE close it but\n        // **not** exit out of editing mode.\n        if (!_this.aceEditor.editor.completer) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          _this.stopEditing();\n\n          _this.editorHint.focus();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onFocusAce\", function () {\n      _this.setState({\n        isEditing: true\n      });\n\n      if (_this.props.onFocus) {\n        var _this$props;\n\n        (_this$props = _this.props).onFocus.apply(_this$props, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onBlurAce\", function () {\n      _this.stopEditing();\n\n      if (_this.props.onBlur) {\n        var _this$props2;\n\n        (_this$props2 = _this.props).onBlur.apply(_this$props2, arguments);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyDownHint\", function (ev) {\n      if (ev.keyCode === _services.keyCodes.ENTER) {\n        ev.preventDefault();\n\n        _this.startEditing();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"startEditing\", function () {\n      _this.setState({\n        isHintActive: false\n      });\n\n      _this.aceEditor.editor.textInput.focus();\n    });\n\n    return _this;\n  }\n\n  _createClass(EuiCodeEditor, [{\n    key: \"stopEditing\",\n    value: function stopEditing() {\n      this.setState({\n        isHintActive: true,\n        isEditing: false\n      });\n    }\n  }, {\n    key: \"isCustomMode\",\n    value: function isCustomMode() {\n      return _typeof(this.props.mode) === 'object';\n    }\n  }, {\n    key: \"setCustomMode\",\n    value: function setCustomMode() {\n      this.aceEditor.editor.getSession().setMode(this.props.mode);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.isCustomMode()) {\n        this.setCustomMode();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.mode !== prevProps.mode && this.isCustomMode()) {\n        this.setCustomMode();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height,\n          onBlur = _this$props3.onBlur,\n          isReadOnly = _this$props3.isReadOnly,\n          setOptions = _this$props3.setOptions,\n          cursorStart = _this$props3.cursorStart,\n          rest = _objectWithoutProperties(_this$props3, [\"width\", \"height\", \"onBlur\", \"isReadOnly\", \"setOptions\", \"cursorStart\"]);\n\n      var classes = (0, _classnames.default)('euiCodeEditorWrapper', {\n        'euiCodeEditorWrapper-isEditing': this.state.isEditing\n      });\n      var promptClasses = (0, _classnames.default)('euiCodeEditorKeyboardHint', {\n        'euiCodeEditorKeyboardHint-isInactive': !this.state.isHintActive\n      });\n      var filteredCursorStart;\n\n      var options = _objectSpread({}, setOptions);\n\n      if (isReadOnly) {\n        // Put the cursor at the beginning of the editor, so that it doesn't look like\n        // a prompt to begin typing.\n        filteredCursorStart = -1;\n        Object.assign(options, {\n          readOnly: true,\n          highlightActiveLine: false,\n          highlightGutterLine: false\n        });\n      } else {\n        filteredCursorStart = cursorStart;\n      } // Don't use EuiKeyboardAccessible here because it doesn't play nicely with onKeyDown.\n\n\n      var prompt = _react.default.createElement(\"div\", {\n        className: promptClasses,\n        id: this.idGenerator('codeEditor'),\n        ref: function ref(hint) {\n          _this2.editorHint = hint;\n        },\n        tabIndex: \"0\",\n        role: \"button\",\n        onClick: this.startEditing,\n        onKeyDown: this.onKeyDownHint,\n        \"data-test-subj\": \"codeEditorHint\"\n      }, _react.default.createElement(\"p\", {\n        className: \"euiText\"\n      }, isReadOnly ? _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCodeEditor.startInteracting\",\n        default: \"Press Enter to start interacting with the code.\"\n      }) : _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCodeEditor.startEditing\",\n        default: \"Press Enter to start editing.\"\n      })), _react.default.createElement(\"p\", {\n        className: \"euiText\"\n      }, isReadOnly ? _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCodeEditor.stopInteracting\",\n        default: \"When you're done, press Escape to stop interacting with the code.\"\n      }) : _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCodeEditor.stopEditing\",\n        default: \"When you're done, press Escape to stop editing.\"\n      })));\n\n      if (this.isCustomMode()) {\n        delete rest.mode; // Otherwise, the AceEditor component will complain about wanting a string value for the mode prop.\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: classes,\n        style: {\n          width: width,\n          height: height\n        },\n        \"data-test-subj\": \"codeEditorContainer\"\n      }, prompt, _react.default.createElement(_reactAce.default, _extends({\n        ref: this.aceEditorRef,\n        width: width,\n        height: height,\n        onFocus: this.onFocusAce,\n        onBlur: this.onBlurAce,\n        setOptions: options,\n        editorProps: {\n          $blockScrolling: Infinity\n        },\n        cursorStart: filteredCursorStart\n      }, rest)));\n    }\n  }]);\n\n  return EuiCodeEditor;\n}(_react.Component);\n\nexports.EuiCodeEditor = EuiCodeEditor;\nEuiCodeEditor.propTypes = {\n  width: _propTypes.default.string,\n  height: _propTypes.default.string,\n  onBlur: _propTypes.default.func,\n  isReadOnly: _propTypes.default.bool,\n  setOptions: _propTypes.default.object,\n  cursorStart: _propTypes.default.number,\n\n  /**\n   * Use string for a built-in mode or object for a custom mode\n   */\n  mode: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object])\n};\nEuiCodeEditor.defaultProps = {\n  setOptions: {}\n};\nEuiCodeEditor.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"aceEditorRef\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"aceEditor\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onKeydownAce\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"ev\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onFocusAce\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"...args\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onBlurAce\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"...args\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onKeyDownHint\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"ev\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"startEditing\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"stopEditing\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"isCustomMode\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"setCustomMode\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }],\n  \"displayName\": \"EuiCodeEditor\",\n  \"props\": {\n    \"setOptions\": {\n      \"defaultValue\": {\n        \"value\": \"{}\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"width\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"height\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"onBlur\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"isReadOnly\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"cursorStart\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"mode\": {\n      \"type\": {\n        \"name\": \"union\",\n        \"value\": [{\n          \"name\": \"string\"\n        }, {\n          \"name\": \"object\"\n        }]\n      },\n      \"required\": false,\n      \"description\": \"Use string for a built-in mode or object for a custom mode\"\n    }\n  }\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src/components/code_editor/code_editor.js"],"names":["setOrRemoveAttribute","element","attributeName","value","undefined","removeAttribute","setAttribute","EuiCodeEditor","isHintActive","isEditing","aceEditor","textbox","editor","textInput","getElement","tabIndex","addEventListener","onKeydownAce","props","ev","keyCode","keyCodes","ESCAPE","completer","preventDefault","stopPropagation","stopEditing","editorHint","focus","setState","onFocus","onBlur","ENTER","startEditing","mode","getSession","setMode","isCustomMode","setCustomMode","prevProps","width","height","isReadOnly","setOptions","cursorStart","rest","classes","state","promptClasses","filteredCursorStart","options","Object","assign","readOnly","highlightActiveLine","highlightGutterLine","prompt","idGenerator","hint","onKeyDownHint","aceEditorRef","onFocusAce","onBlurAce","$blockScrolling","Infinity","Component","propTypes","PropTypes","string","func","bool","object","number","oneOfType","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,oBAAT,CAA8BC,OAA9B,EAAuCC,aAAvC,EAAsDC,KAAtD,EAA6D;AAC3D,MAAIA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKC,SAAhC,EAA2C;AACzCH,IAAAA,OAAO,CAACI,eAAR,CAAwBH,aAAxB;AACD,GAFD,MAEO;AACLD,IAAAA,OAAO,CAACK,YAAR,CAAqBJ,aAArB,EAAoCC,KAApC;AACD;AACF;;IAEYI,a;;;;;;;;;;;;;;;;;;oFACH;AACNC,MAAAA,YAAY,EAAE,IADR;AAENC,MAAAA,SAAS,EAAE;AAFL,K;;0FAKM,gC;;2FAEC,UAAAC,SAAS,EAAI;AAC1B,UAAIA,SAAJ,EAAe;AACb,cAAKA,SAAL,GAAiBA,SAAjB;AACA,YAAMC,OAAO,GAAGD,SAAS,CAACE,MAAV,CAAiBC,SAAjB,CAA2BC,UAA3B,EAAhB;AACAH,QAAAA,OAAO,CAACI,QAAR,GAAmB,CAAC,CAApB;AACAJ,QAAAA,OAAO,CAACK,gBAAR,CAAyB,SAAzB,EAAoC,MAAKC,YAAzC;AACAjB,QAAAA,oBAAoB,CAACW,OAAD,EAAU,YAAV,EAAwB,MAAKO,KAAL,CAAW,YAAX,CAAxB,CAApB;AACAlB,QAAAA,oBAAoB,CAClBW,OADkB,EAElB,iBAFkB,EAGlB,MAAKO,KAAL,CAAW,iBAAX,CAHkB,CAApB;AAKAlB,QAAAA,oBAAoB,CAClBW,OADkB,EAElB,kBAFkB,EAGlB,MAAKO,KAAL,CAAW,kBAAX,CAHkB,CAApB;AAKD;AACF,K;;2FAEc,UAAAC,EAAE,EAAI;AACnB,UAAIA,EAAE,CAACC,OAAH,KAAeC,mBAASC,MAA5B,EAAoC;AAClC;AACA;AACA,YAAI,CAAC,MAAKZ,SAAL,CAAeE,MAAf,CAAsBW,SAA3B,EAAsC;AACpCJ,UAAAA,EAAE,CAACK,cAAH;AACAL,UAAAA,EAAE,CAACM,eAAH;;AACA,gBAAKC,WAAL;;AACA,gBAAKC,UAAL,CAAgBC,KAAhB;AACD;AACF;AACF,K;;yFAEY,YAAa;AACxB,YAAKC,QAAL,CAAc;AACZpB,QAAAA,SAAS,EAAE;AADC,OAAd;;AAGA,UAAI,MAAKS,KAAL,CAAWY,OAAf,EAAwB;AAAA;;AACtB,6BAAKZ,KAAL,EAAWY,OAAX;AACD;AACF,K;;wFAEW,YAAa;AACvB,YAAKJ,WAAL;;AACA,UAAI,MAAKR,KAAL,CAAWa,MAAf,EAAuB;AAAA;;AACrB,8BAAKb,KAAL,EAAWa,MAAX;AACD;AACF,K;;4FAEe,UAAAZ,EAAE,EAAI;AACpB,UAAIA,EAAE,CAACC,OAAH,KAAeC,mBAASW,KAA5B,EAAmC;AACjCb,QAAAA,EAAE,CAACK,cAAH;;AACA,cAAKS,YAAL;AACD;AACF,K;;2FAEc,YAAM;AACnB,YAAKJ,QAAL,CAAc;AACZrB,QAAAA,YAAY,EAAE;AADF,OAAd;;AAGA,YAAKE,SAAL,CAAeE,MAAf,CAAsBC,SAAtB,CAAgCe,KAAhC;AACD,K;;;;;;;kCAEa;AACZ,WAAKC,QAAL,CAAc;AACZrB,QAAAA,YAAY,EAAE,IADF;AAEZC,QAAAA,SAAS,EAAE;AAFC,OAAd;AAID;;;mCAEc;AACb,aAAO,QAAO,KAAKS,KAAL,CAAWgB,IAAlB,MAA2B,QAAlC;AACD;;;oCAEe;AACd,WAAKxB,SAAL,CAAeE,MAAf,CAAsBuB,UAAtB,GAAmCC,OAAnC,CAA2C,KAAKlB,KAAL,CAAWgB,IAAtD;AACD;;;wCAEmB;AAClB,UAAI,KAAKG,YAAL,EAAJ,EAAyB;AACvB,aAAKC,aAAL;AACD;AACF;;;uCAEkBC,S,EAAW;AAC5B,UAAI,KAAKrB,KAAL,CAAWgB,IAAX,KAAoBK,SAAS,CAACL,IAA9B,IAAsC,KAAKG,YAAL,EAA1C,EAA+D;AAC7D,aAAKC,aAAL;AACD;AACF;;;6BAEQ;AAAA;;AAAA,yBASH,KAAKpB,KATF;AAAA,UAELsB,KAFK,gBAELA,KAFK;AAAA,UAGLC,MAHK,gBAGLA,MAHK;AAAA,UAILV,MAJK,gBAILA,MAJK;AAAA,UAKLW,UALK,gBAKLA,UALK;AAAA,UAMLC,UANK,gBAMLA,UANK;AAAA,UAOLC,WAPK,gBAOLA,WAPK;AAAA,UAQFC,IARE;;AAWP,UAAMC,OAAO,GAAG,yBAAW,sBAAX,EAAmC;AACjD,0CAAkC,KAAKC,KAAL,CAAWtC;AADI,OAAnC,CAAhB;AAIA,UAAMuC,aAAa,GAAG,yBAAW,2BAAX,EAAwC;AAC5D,gDAAwC,CAAC,KAAKD,KAAL,CAAWvC;AADQ,OAAxC,CAAtB;AAIA,UAAIyC,mBAAJ;;AAEA,UAAMC,OAAO,qBAAQP,UAAR,CAAb;;AAEA,UAAID,UAAJ,EAAgB;AACd;AACA;AACAO,QAAAA,mBAAmB,GAAG,CAAC,CAAvB;AAEAE,QAAAA,MAAM,CAACC,MAAP,CAAcF,OAAd,EAAuB;AACrBG,UAAAA,QAAQ,EAAE,IADW;AAErBC,UAAAA,mBAAmB,EAAE,KAFA;AAGrBC,UAAAA,mBAAmB,EAAE;AAHA,SAAvB;AAKD,OAVD,MAUO;AACLN,QAAAA,mBAAmB,GAAGL,WAAtB;AACD,OAnCM,CAqCP;;;AACA,UAAMY,MAAM,GACV;AACE,QAAA,SAAS,EAAER,aADb;AAEE,QAAA,EAAE,EAAE,KAAKS,WAAL,CAAiB,YAAjB,CAFN;AAGE,QAAA,GAAG,EAAE,aAAAC,IAAI,EAAI;AACX,UAAA,MAAI,CAAC/B,UAAL,GAAkB+B,IAAlB;AACD,SALH;AAME,QAAA,QAAQ,EAAC,GANX;AAOE,QAAA,IAAI,EAAC,QAPP;AAQE,QAAA,OAAO,EAAE,KAAKzB,YARhB;AASE,QAAA,SAAS,EAAE,KAAK0B,aATlB;AAUE,0BAAe;AAVjB,SAWE;AAAG,QAAA,SAAS,EAAC;AAAb,SACGjB,UAAU,GACT,6BAAC,aAAD;AACE,QAAA,KAAK,EAAC,gCADR;AAEE,QAAA,OAAO,EAAC;AAFV,QADS,GAMT,6BAAC,aAAD;AACE,QAAA,KAAK,EAAC,4BADR;AAEE,QAAA,OAAO,EAAC;AAFV,QAPJ,CAXF,EAyBE;AAAG,QAAA,SAAS,EAAC;AAAb,SACGA,UAAU,GACT,6BAAC,aAAD;AACE,QAAA,KAAK,EAAC,+BADR;AAEE,QAAA,OAAO,EAAC;AAFV,QADS,GAMT,6BAAC,aAAD;AACE,QAAA,KAAK,EAAC,2BADR;AAEE,QAAA,OAAO,EAAC;AAFV,QAPJ,CAzBF,CADF;;AA0CA,UAAI,KAAKL,YAAL,EAAJ,EAAyB;AACvB,eAAOQ,IAAI,CAACX,IAAZ,CADuB,CACL;AACnB;;AAED,aACE;AACE,QAAA,SAAS,EAAEY,OADb;AAEE,QAAA,KAAK,EAAE;AAAEN,UAAAA,KAAK,EAALA,KAAF;AAASC,UAAAA,MAAM,EAANA;AAAT,SAFT;AAGE,0BAAe;AAHjB,SAIGe,MAJH,EAME,6BAAC,iBAAD;AACE,QAAA,GAAG,EAAE,KAAKI,YADZ;AAEE,QAAA,KAAK,EAAEpB,KAFT;AAGE,QAAA,MAAM,EAAEC,MAHV;AAIE,QAAA,OAAO,EAAE,KAAKoB,UAJhB;AAKE,QAAA,MAAM,EAAE,KAAKC,SALf;AAME,QAAA,UAAU,EAAEZ,OANd;AAOE,QAAA,WAAW,EAAE;AACXa,UAAAA,eAAe,EAAEC;AADN,SAPf;AAUE,QAAA,WAAW,EAAEf;AAVf,SAWMJ,IAXN,EANF,CADF;AAsBD;;;;EA5MgCoB,gB;;;AA+MnC1D,aAAa,CAAC2D,SAAd,GAA0B;AACxB1B,EAAAA,KAAK,EAAE2B,mBAAUC,MADO;AAExB3B,EAAAA,MAAM,EAAE0B,mBAAUC,MAFM;AAGxBrC,EAAAA,MAAM,EAAEoC,mBAAUE,IAHM;AAIxB3B,EAAAA,UAAU,EAAEyB,mBAAUG,IAJE;AAKxB3B,EAAAA,UAAU,EAAEwB,mBAAUI,MALE;AAMxB3B,EAAAA,WAAW,EAAEuB,mBAAUK,MANC;;AAQxB;;;AAGAtC,EAAAA,IAAI,EAAEiC,mBAAUM,SAAV,CAAoB,CAACN,mBAAUC,MAAX,EAAmBD,mBAAUI,MAA7B,CAApB;AAXkB,CAA1B;AAcAhE,aAAa,CAACmE,YAAd,GAA6B;AAC3B/B,EAAAA,UAAU,EAAE;AADe,CAA7B","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport AceEditor from 'react-ace';\n\nimport { htmlIdGenerator, keyCodes } from '../../services';\nimport { EuiI18n } from '../i18n';\n\nfunction setOrRemoveAttribute(element, attributeName, value) {\n  if (value === null || value === undefined) {\n    element.removeAttribute(attributeName);\n  } else {\n    element.setAttribute(attributeName, value);\n  }\n}\n\nexport class EuiCodeEditor extends Component {\n  state = {\n    isHintActive: true,\n    isEditing: false,\n  };\n\n  idGenerator = htmlIdGenerator();\n\n  aceEditorRef = aceEditor => {\n    if (aceEditor) {\n      this.aceEditor = aceEditor;\n      const textbox = aceEditor.editor.textInput.getElement();\n      textbox.tabIndex = -1;\n      textbox.addEventListener('keydown', this.onKeydownAce);\n      setOrRemoveAttribute(textbox, 'aria-label', this.props['aria-label']);\n      setOrRemoveAttribute(\n        textbox,\n        'aria-labelledby',\n        this.props['aria-labelledby']\n      );\n      setOrRemoveAttribute(\n        textbox,\n        'aria-describedby',\n        this.props['aria-describedby']\n      );\n    }\n  };\n\n  onKeydownAce = ev => {\n    if (ev.keyCode === keyCodes.ESCAPE) {\n      // If the autocompletion context menu is open then we want to let ESCAPE close it but\n      // **not** exit out of editing mode.\n      if (!this.aceEditor.editor.completer) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        this.stopEditing();\n        this.editorHint.focus();\n      }\n    }\n  };\n\n  onFocusAce = (...args) => {\n    this.setState({\n      isEditing: true,\n    });\n    if (this.props.onFocus) {\n      this.props.onFocus(...args);\n    }\n  };\n\n  onBlurAce = (...args) => {\n    this.stopEditing();\n    if (this.props.onBlur) {\n      this.props.onBlur(...args);\n    }\n  };\n\n  onKeyDownHint = ev => {\n    if (ev.keyCode === keyCodes.ENTER) {\n      ev.preventDefault();\n      this.startEditing();\n    }\n  };\n\n  startEditing = () => {\n    this.setState({\n      isHintActive: false,\n    });\n    this.aceEditor.editor.textInput.focus();\n  };\n\n  stopEditing() {\n    this.setState({\n      isHintActive: true,\n      isEditing: false,\n    });\n  }\n\n  isCustomMode() {\n    return typeof this.props.mode === 'object';\n  }\n\n  setCustomMode() {\n    this.aceEditor.editor.getSession().setMode(this.props.mode);\n  }\n\n  componentDidMount() {\n    if (this.isCustomMode()) {\n      this.setCustomMode();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.mode !== prevProps.mode && this.isCustomMode()) {\n      this.setCustomMode();\n    }\n  }\n\n  render() {\n    const {\n      width,\n      height,\n      onBlur, // eslint-disable-line no-unused-vars\n      isReadOnly,\n      setOptions,\n      cursorStart,\n      ...rest\n    } = this.props;\n\n    const classes = classNames('euiCodeEditorWrapper', {\n      'euiCodeEditorWrapper-isEditing': this.state.isEditing,\n    });\n\n    const promptClasses = classNames('euiCodeEditorKeyboardHint', {\n      'euiCodeEditorKeyboardHint-isInactive': !this.state.isHintActive,\n    });\n\n    let filteredCursorStart;\n\n    const options = { ...setOptions };\n\n    if (isReadOnly) {\n      // Put the cursor at the beginning of the editor, so that it doesn't look like\n      // a prompt to begin typing.\n      filteredCursorStart = -1;\n\n      Object.assign(options, {\n        readOnly: true,\n        highlightActiveLine: false,\n        highlightGutterLine: false,\n      });\n    } else {\n      filteredCursorStart = cursorStart;\n    }\n\n    // Don't use EuiKeyboardAccessible here because it doesn't play nicely with onKeyDown.\n    const prompt = (\n      <div\n        className={promptClasses}\n        id={this.idGenerator('codeEditor')}\n        ref={hint => {\n          this.editorHint = hint;\n        }}\n        tabIndex=\"0\"\n        role=\"button\"\n        onClick={this.startEditing}\n        onKeyDown={this.onKeyDownHint}\n        data-test-subj=\"codeEditorHint\">\n        <p className=\"euiText\">\n          {isReadOnly ? (\n            <EuiI18n\n              token=\"euiCodeEditor.startInteracting\"\n              default=\"Press Enter to start interacting with the code.\"\n            />\n          ) : (\n            <EuiI18n\n              token=\"euiCodeEditor.startEditing\"\n              default=\"Press Enter to start editing.\"\n            />\n          )}\n        </p>\n\n        <p className=\"euiText\">\n          {isReadOnly ? (\n            <EuiI18n\n              token=\"euiCodeEditor.stopInteracting\"\n              default=\"When you're done, press Escape to stop interacting with the code.\"\n            />\n          ) : (\n            <EuiI18n\n              token=\"euiCodeEditor.stopEditing\"\n              default=\"When you're done, press Escape to stop editing.\"\n            />\n          )}\n        </p>\n      </div>\n    );\n\n    if (this.isCustomMode()) {\n      delete rest.mode; // Otherwise, the AceEditor component will complain about wanting a string value for the mode prop.\n    }\n\n    return (\n      <div\n        className={classes}\n        style={{ width, height }}\n        data-test-subj=\"codeEditorContainer\">\n        {prompt}\n\n        <AceEditor\n          ref={this.aceEditorRef}\n          width={width}\n          height={height}\n          onFocus={this.onFocusAce}\n          onBlur={this.onBlurAce}\n          setOptions={options}\n          editorProps={{\n            $blockScrolling: Infinity,\n          }}\n          cursorStart={filteredCursorStart}\n          {...rest}\n        />\n      </div>\n    );\n  }\n}\n\nEuiCodeEditor.propTypes = {\n  width: PropTypes.string,\n  height: PropTypes.string,\n  onBlur: PropTypes.func,\n  isReadOnly: PropTypes.bool,\n  setOptions: PropTypes.object,\n  cursorStart: PropTypes.number,\n\n  /**\n   * Use string for a built-in mode or object for a custom mode\n   */\n  mode: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n};\n\nEuiCodeEditor.defaultProps = {\n  setOptions: {},\n};\n"]}]}