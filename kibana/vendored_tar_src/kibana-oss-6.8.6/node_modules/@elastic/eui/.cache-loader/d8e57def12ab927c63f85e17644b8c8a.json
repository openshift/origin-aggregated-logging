{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src-docs/src/views/header/global_filter_item.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src-docs/src/views/header/global_filter_item.js","mtime":1566853983120},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GlobalFilterItem = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _components = require(\"../../../../src/components\");\n\nvar _global_filter_form = _interopRequireDefault(require(\"./global_filter_form\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction flattenPanelTree(tree) {\n  var array = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  array.push(tree);\n\n  if (tree.items) {\n    tree.items.forEach(function (item) {\n      if (item.panel) {\n        flattenPanelTree(item.panel, array);\n        item.panel = item.panel.id;\n      }\n    });\n  }\n\n  return array;\n}\n\nvar GlobalFilterItem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GlobalFilterItem, _Component);\n\n  function GlobalFilterItem(props) {\n    var _this;\n\n    _classCallCheck(this, GlobalFilterItem);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GlobalFilterItem).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"togglePopover\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isPopoverOpen: !prevState.isPopoverOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"closePopover\", function () {\n      _this.setState({\n        isPopoverOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"deleteFilter\", function (e) {\n      window.alert('Filter would have been deleted.'); // Make sure it doesn't also trigger the onclick for the whole badge\n\n      e.stopPropagation();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"_createFilterContextMenu\", function (filter, button) {\n      var selectedObject = {\n        field: [{\n          label: filter.field\n        }],\n        operand: [{\n          label: filter.operator\n        }],\n        values: [{\n          label: filter.value\n        }]\n      };\n      var panelTree = {\n        id: 0,\n        items: [{\n          name: \"\".concat(filter.isPinned ? 'Unpin' : 'Pin across all apps'),\n          icon: 'pin',\n          onClick: function onClick() {\n            _this.closePopover();\n          }\n        }, {\n          name: 'Edit filter query',\n          icon: 'pencil',\n          panel: {\n            id: 1,\n            width: 400,\n            content: _react.default.createElement(\"div\", {\n              style: {\n                padding: 16\n              }\n            }, _react.default.createElement(_global_filter_form.default, {\n              selectedObject: selectedObject,\n              onAdd: _this.closePopover,\n              onCancel: _this.closePopover\n            }))\n          }\n        }, {\n          name: \"\".concat(filter.isExcluded ? 'Include results' : 'Exclude results'),\n          icon: \"\".concat(filter.isExcluded ? 'plusInCircle' : 'minusInCircle'),\n          onClick: function onClick() {\n            _this.closePopover();\n          }\n        }, {\n          name: \"\".concat(filter.isDisabled ? 'Re-enable' : 'Temporarily disable'),\n          icon: \"\".concat(filter.isDisabled ? 'eye' : 'eyeClosed'),\n          onClick: function onClick() {\n            _this.closePopover();\n          }\n        }, {\n          name: 'Delete',\n          icon: 'trash',\n          onClick: function onClick() {\n            _this.closePopover();\n          }\n        }]\n      };\n      return _react.default.createElement(_components.EuiPopover, {\n        id: \"popoverFor_\".concat(filter.id),\n        isOpen: _this.state.isPopoverOpen,\n        closePopover: _this.closePopover,\n        button: button,\n        anchorPosition: \"downCenter\",\n        panelPaddingSize: \"none\",\n        display: \"block\"\n      }, _react.default.createElement(_components.EuiContextMenu, {\n        initialPanelId: 0,\n        panels: flattenPanelTree(panelTree)\n      }));\n    });\n\n    _this.state = {\n      isPopoverOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(GlobalFilterItem, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          id = _this$props.id,\n          field = _this$props.field,\n          operator = _this$props.operator,\n          value = _this$props.value,\n          isDisabled = _this$props.isDisabled,\n          isPinned = _this$props.isPinned,\n          isExcluded = _this$props.isExcluded,\n          rest = _objectWithoutProperties(_this$props, [\"className\", \"id\", \"field\", \"operator\", \"value\", \"isDisabled\", \"isPinned\", \"isExcluded\"]);\n\n      var classes = (0, _classnames.default)('globalFilterItem', {\n        'globalFilterItem-isDisabled': isDisabled,\n        'globalFilterItem-isPinned': isPinned,\n        'globalFilterItem-isExcluded': isExcluded\n      }, className);\n      var prefix = null;\n\n      if (isExcluded) {\n        prefix = _react.default.createElement(\"span\", null, \"NOT \");\n      }\n\n      var title = \"Filter: \".concat(field, \": \\\"\").concat(value, \"\\\". Select for more filter actions.\");\n\n      if (isPinned) {\n        title = \"Pinned \".concat(title);\n      } else if (isDisabled) {\n        title = \"Disabled \".concat(title);\n      }\n\n      var badge = _react.default.createElement(_components.EuiBadge, _extends({\n        id: id,\n        className: classes,\n        title: title,\n        iconOnClick: this.deleteFilter,\n        iconOnClickAriaLabel: 'Delete filter',\n        iconType: \"cross\",\n        iconSide: \"right\",\n        onClick: this.togglePopover,\n        onClickAriaLabel: \"Filter actions\",\n        closeButtonProps: {\n          // Removing tab focus on close button because the same option can be optained through the context menu\n          // Also, we may want to add a `DEL` keyboard press functionality\n          tabIndex: '-1'\n        }\n      }, rest), prefix, _react.default.createElement(\"span\", null, field, \": \"), _react.default.createElement(\"span\", null, \"\\\"\", value, \"\\\"\"));\n\n      return this._createFilterContextMenu(this.props, badge);\n    }\n  }]);\n\n  return GlobalFilterItem;\n}(_react.Component);\n\nexports.GlobalFilterItem = GlobalFilterItem;\n\n_defineProperty(GlobalFilterItem, \"propTypes\", {\n  className: _propTypes.default.string,\n  id: _propTypes.default.string.isRequired,\n  field: _propTypes.default.string.isRequired,\n  operator: _propTypes.default.string.isRequired,\n  value: _propTypes.default.string.isRequired,\n  isDisabled: _propTypes.default.bool.isRequired,\n  isPinned: _propTypes.default.bool.isRequired,\n  isExcluded: _propTypes.default.bool.isRequired\n});\n\nGlobalFilterItem.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"togglePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"closePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"deleteFilter\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"e\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"_createFilterContextMenu\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"filter\",\n      \"type\": null\n    }, {\n      \"name\": \"button\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"GlobalFilterItem\",\n  \"props\": {\n    \"className\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"id\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"field\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"operator\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"value\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"isDisabled\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"isPinned\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"isExcluded\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src-docs/src/views/header/global_filter_item.js"],"names":["flattenPanelTree","tree","array","push","items","forEach","item","panel","id","GlobalFilterItem","props","setState","prevState","isPopoverOpen","e","window","alert","stopPropagation","filter","button","selectedObject","field","label","operand","operator","values","value","panelTree","name","isPinned","icon","onClick","closePopover","width","content","padding","isExcluded","isDisabled","state","className","rest","classes","prefix","title","badge","deleteFilter","togglePopover","tabIndex","_createFilterContextMenu","Component","PropTypes","string","isRequired","bool"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport {\n  EuiBadge,\n  EuiPopover,\n  EuiContextMenu,\n} from '../../../../src/components';\nimport GlobalFilterForm from './global_filter_form';\n\nfunction flattenPanelTree(tree, array = []) {\n  array.push(tree);\n\n  if (tree.items) {\n    tree.items.forEach(item => {\n      if (item.panel) {\n        flattenPanelTree(item.panel, array);\n        item.panel = item.panel.id;\n      }\n    });\n  }\n\n  return array;\n}\n\nexport class GlobalFilterItem extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    id: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    operator: PropTypes.string.isRequired,\n    value: PropTypes.string.isRequired,\n    isDisabled: PropTypes.bool.isRequired,\n    isPinned: PropTypes.bool.isRequired,\n    isExcluded: PropTypes.bool.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isPopoverOpen: false,\n    };\n  }\n\n  togglePopover = () => {\n    this.setState(prevState => ({\n      isPopoverOpen: !prevState.isPopoverOpen,\n    }));\n  };\n\n  closePopover = () => {\n    this.setState({\n      isPopoverOpen: false,\n    });\n  };\n\n  deleteFilter = e => {\n    window.alert('Filter would have been deleted.');\n    // Make sure it doesn't also trigger the onclick for the whole badge\n    e.stopPropagation();\n  };\n\n  render() {\n    const {\n      className,\n      id,\n      field,\n      operator, // eslint-disable-line no-unused-vars\n      value,\n      isDisabled,\n      isPinned,\n      isExcluded,\n      ...rest\n    } = this.props;\n\n    const classes = classNames(\n      'globalFilterItem',\n      {\n        'globalFilterItem-isDisabled': isDisabled,\n        'globalFilterItem-isPinned': isPinned,\n        'globalFilterItem-isExcluded': isExcluded,\n      },\n      className\n    );\n\n    let prefix = null;\n    if (isExcluded) {\n      prefix = <span>NOT </span>;\n    }\n\n    let title = `Filter: ${field}: \"${value}\". Select for more filter actions.`;\n    if (isPinned) {\n      title = `Pinned ${title}`;\n    } else if (isDisabled) {\n      title = `Disabled ${title}`;\n    }\n\n    const badge = (\n      <EuiBadge\n        id={id}\n        className={classes}\n        title={title}\n        iconOnClick={this.deleteFilter}\n        iconOnClickAriaLabel={'Delete filter'}\n        iconType=\"cross\"\n        iconSide=\"right\"\n        onClick={this.togglePopover}\n        onClickAriaLabel=\"Filter actions\"\n        closeButtonProps={{\n          // Removing tab focus on close button because the same option can be optained through the context menu\n          // Also, we may want to add a `DEL` keyboard press functionality\n          tabIndex: '-1',\n        }}\n        {...rest}>\n        {prefix}\n        <span>{field}: </span>\n        <span>&quot;{value}&quot;</span>\n      </EuiBadge>\n    );\n\n    return this._createFilterContextMenu(this.props, badge);\n  }\n\n  _createFilterContextMenu = (filter, button) => {\n    const selectedObject = {\n      field: [{ label: filter.field }],\n      operand: [{ label: filter.operator }],\n      values: [{ label: filter.value }],\n    };\n\n    const panelTree = {\n      id: 0,\n      items: [\n        {\n          name: `${filter.isPinned ? 'Unpin' : 'Pin across all apps'}`,\n          icon: 'pin',\n          onClick: () => {\n            this.closePopover();\n          },\n        },\n        {\n          name: 'Edit filter query',\n          icon: 'pencil',\n          panel: {\n            id: 1,\n            width: 400,\n            content: (\n              <div style={{ padding: 16 }}>\n                <GlobalFilterForm\n                  selectedObject={selectedObject}\n                  onAdd={this.closePopover}\n                  onCancel={this.closePopover}\n                />\n              </div>\n            ),\n          },\n        },\n        {\n          name: `${filter.isExcluded ? 'Include results' : 'Exclude results'}`,\n          icon: `${filter.isExcluded ? 'plusInCircle' : 'minusInCircle'}`,\n          onClick: () => {\n            this.closePopover();\n          },\n        },\n        {\n          name: `${filter.isDisabled ? 'Re-enable' : 'Temporarily disable'}`,\n          icon: `${filter.isDisabled ? 'eye' : 'eyeClosed'}`,\n          onClick: () => {\n            this.closePopover();\n          },\n        },\n        {\n          name: 'Delete',\n          icon: 'trash',\n          onClick: () => {\n            this.closePopover();\n          },\n        },\n      ],\n    };\n\n    return (\n      <EuiPopover\n        id={`popoverFor_${filter.id}`}\n        isOpen={this.state.isPopoverOpen}\n        closePopover={this.closePopover}\n        button={button}\n        anchorPosition=\"downCenter\"\n        panelPaddingSize=\"none\"\n        display=\"block\">\n        <EuiContextMenu\n          initialPanelId={0}\n          panels={flattenPanelTree(panelTree)}\n        />\n      </EuiPopover>\n    );\n  };\n}\n"]}]}