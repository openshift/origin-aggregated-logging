{"remainingRequest":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js!/Users/chanderprall/projects/eui/src/components/basic_table/collapsed_item_actions.js","dependencies":[{"path":"/Users/chanderprall/projects/eui/src/components/basic_table/collapsed_item_actions.js","mtime":1565204169599},{"path":"/Users/chanderprall/projects/eui/.babelrc.js","mtime":1565204168946},{"path":"/Users/chanderprall/projects/eui/node_modules/cache-loader/dist/cjs.js","mtime":1555436064329},{"path":"/Users/chanderprall/projects/eui/node_modules/babel-loader/lib/index.js","mtime":1543517280769}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollapsedItemActions = void 0;\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _context_menu = require(\"../context_menu\");\n\nvar _popover = require(\"../popover\");\n\nvar _button = require(\"../button\");\n\nvar _tool_tip = require(\"../tool_tip\");\n\nvar _i18n = require(\"../i18n\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CollapsedItemActions =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CollapsedItemActions, _Component);\n\n  function CollapsedItemActions(props) {\n    var _this;\n\n    _classCallCheck(this, CollapsedItemActions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CollapsedItemActions).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"togglePopover\", function () {\n      _this.setState(function (prevState) {\n        return {\n          popoverOpen: !prevState.popoverOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"closePopover\", function () {\n      _this.setState({\n        popoverOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onPopoverBlur\", function () {\n      // you must be asking... WTF? I know... but this timeout is\n      // required to make sure we process the onBlur events after the initial\n      // event cycle. Reference:\n      // https://medium.com/@jessebeach/dealing-with-focus-and-blur-in-a-composite-widget-in-react-90d3c3b49a9b\n      window.requestAnimationFrame(function () {\n        if (!_this.popoverDiv.contains(document.activeElement)) {\n          _this.props.onBlur();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"registerPopoverDiv\", function (popoverDiv) {\n      if (!_this.popoverDiv) {\n        _this.popoverDiv = popoverDiv;\n\n        _this.popoverDiv.addEventListener('focusout', _this.onPopoverBlur);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onClickItem\", function (onClickAction) {\n      _this.closePopover();\n\n      onClickAction();\n    });\n\n    _this.state = {\n      popoverOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(CollapsedItemActions, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.popoverDiv) {\n        this.popoverDiv.removeEventListener('focusout', this.onPopoverBlur);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          actions = _this$props.actions,\n          itemId = _this$props.itemId,\n          item = _this$props.item,\n          actionEnabled = _this$props.actionEnabled,\n          onFocus = _this$props.onFocus,\n          className = _this$props.className;\n      var isOpen = this.state.popoverOpen;\n      var allDisabled = true;\n      var controls = actions.reduce(function (controls, action, index) {\n        var key = \"action_\".concat(itemId, \"_\").concat(index);\n        var available = action.available ? action.available(item) : true;\n\n        if (!available) {\n          return controls;\n        }\n\n        var enabled = actionEnabled(action);\n        allDisabled = allDisabled && !enabled;\n\n        if (action.render) {\n          var actionControl = action.render(item, enabled);\n          var actionControlOnClick = actionControl && actionControl.props && actionControl.props.onClick;\n          controls.push(_react.default.createElement(_context_menu.EuiContextMenuItem, {\n            key: key,\n            onClick: actionControlOnClick ? actionControlOnClick.bind(null, item) : function () {}\n          }, actionControl));\n        } else {\n          controls.push(_react.default.createElement(_context_menu.EuiContextMenuItem, {\n            key: key,\n            disabled: !enabled,\n            icon: action.icon,\n            onClick: _this2.onClickItem.bind(null, action.onClick.bind(null, item))\n          }, action.name));\n        }\n\n        return controls;\n      }, []);\n\n      var popoverButton = _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCollapsedItemActions.allActions\",\n        default: \"All actions\"\n      }, function (allActions) {\n        return _react.default.createElement(_button.EuiButtonIcon, {\n          className: className,\n          \"aria-label\": allActions,\n          iconType: \"boxesHorizontal\",\n          color: \"text\",\n          isDisabled: allDisabled,\n          onClick: _this2.togglePopover.bind(_this2),\n          onFocus: onFocus\n        });\n      });\n\n      var withTooltip = !allDisabled && _react.default.createElement(_i18n.EuiI18n, {\n        token: \"euiCollapsedItemActions.allActions\",\n        default: \"All actions\"\n      }, function (allActions) {\n        return _react.default.createElement(_tool_tip.EuiToolTip, {\n          content: allActions,\n          delay: \"long\"\n        }, popoverButton);\n      });\n\n      return _react.default.createElement(_popover.EuiPopover, {\n        className: className,\n        popoverRef: this.registerPopoverDiv,\n        id: \"\".concat(itemId, \"-actions\"),\n        isOpen: isOpen,\n        button: withTooltip || popoverButton,\n        closePopover: this.closePopover,\n        panelPaddingSize: \"none\",\n        anchorPosition: \"leftCenter\"\n      }, _react.default.createElement(_context_menu.EuiContextMenuPanel, {\n        items: controls\n      }));\n    }\n  }]);\n\n  return CollapsedItemActions;\n}(_react.Component);\n\nexports.CollapsedItemActions = CollapsedItemActions;\nCollapsedItemActions.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"togglePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"closePopover\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"onPopoverBlur\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"registerPopoverDiv\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"popoverDiv\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"onClickItem\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"onClickAction\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"CollapsedItemActions\"\n};",{"version":3,"sources":["/Users/chanderprall/projects/eui/src/components/basic_table/collapsed_item_actions.js"],"names":["CollapsedItemActions","props","setState","prevState","popoverOpen","window","requestAnimationFrame","popoverDiv","contains","document","activeElement","onBlur","addEventListener","onPopoverBlur","onClickAction","closePopover","state","removeEventListener","actions","itemId","item","actionEnabled","onFocus","className","isOpen","allDisabled","controls","reduce","action","index","key","available","enabled","render","actionControl","actionControlOnClick","onClick","push","bind","icon","onClickItem","name","popoverButton","allActions","togglePopover","withTooltip","registerPopoverDiv","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { EuiContextMenuItem, EuiContextMenuPanel } from '../context_menu';\nimport { EuiPopover } from '../popover';\nimport { EuiButtonIcon } from '../button';\nimport { EuiToolTip } from '../tool_tip';\nimport { EuiI18n } from '../i18n';\n\nexport class CollapsedItemActions extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { popoverOpen: false };\n  }\n\n  togglePopover = () => {\n    this.setState(prevState => ({ popoverOpen: !prevState.popoverOpen }));\n  };\n\n  closePopover = () => {\n    this.setState({ popoverOpen: false });\n  };\n\n  onPopoverBlur = () => {\n    // you must be asking... WTF? I know... but this timeout is\n    // required to make sure we process the onBlur events after the initial\n    // event cycle. Reference:\n    // https://medium.com/@jessebeach/dealing-with-focus-and-blur-in-a-composite-widget-in-react-90d3c3b49a9b\n    window.requestAnimationFrame(() => {\n      if (!this.popoverDiv.contains(document.activeElement)) {\n        this.props.onBlur();\n      }\n    });\n  };\n\n  registerPopoverDiv = popoverDiv => {\n    if (!this.popoverDiv) {\n      this.popoverDiv = popoverDiv;\n      this.popoverDiv.addEventListener('focusout', this.onPopoverBlur);\n    }\n  };\n\n  componentWillUnmount() {\n    if (this.popoverDiv) {\n      this.popoverDiv.removeEventListener('focusout', this.onPopoverBlur);\n    }\n  }\n\n  onClickItem = onClickAction => {\n    this.closePopover();\n    onClickAction();\n  };\n\n  render() {\n    const {\n      actions,\n      itemId,\n      item,\n      actionEnabled,\n      onFocus,\n      className,\n    } = this.props;\n\n    const isOpen = this.state.popoverOpen;\n\n    let allDisabled = true;\n    const controls = actions.reduce((controls, action, index) => {\n      const key = `action_${itemId}_${index}`;\n      const available = action.available ? action.available(item) : true;\n      if (!available) {\n        return controls;\n      }\n      const enabled = actionEnabled(action);\n      allDisabled = allDisabled && !enabled;\n      if (action.render) {\n        const actionControl = action.render(item, enabled);\n        const actionControlOnClick =\n          actionControl && actionControl.props && actionControl.props.onClick;\n        controls.push(\n          <EuiContextMenuItem\n            key={key}\n            onClick={\n              actionControlOnClick\n                ? actionControlOnClick.bind(null, item)\n                : () => {}\n            }>\n            {actionControl}\n          </EuiContextMenuItem>\n        );\n      } else {\n        controls.push(\n          <EuiContextMenuItem\n            key={key}\n            disabled={!enabled}\n            icon={action.icon}\n            onClick={this.onClickItem.bind(\n              null,\n              action.onClick.bind(null, item)\n            )}>\n            {action.name}\n          </EuiContextMenuItem>\n        );\n      }\n      return controls;\n    }, []);\n\n    const popoverButton = (\n      <EuiI18n token=\"euiCollapsedItemActions.allActions\" default=\"All actions\">\n        {allActions => (\n          <EuiButtonIcon\n            className={className}\n            aria-label={allActions}\n            iconType=\"boxesHorizontal\"\n            color=\"text\"\n            isDisabled={allDisabled}\n            onClick={this.togglePopover.bind(this)}\n            onFocus={onFocus}\n          />\n        )}\n      </EuiI18n>\n    );\n\n    const withTooltip = !allDisabled && (\n      <EuiI18n token=\"euiCollapsedItemActions.allActions\" default=\"All actions\">\n        {allActions => (\n          <EuiToolTip content={allActions} delay=\"long\">\n            {popoverButton}\n          </EuiToolTip>\n        )}\n      </EuiI18n>\n    );\n\n    return (\n      <EuiPopover\n        className={className}\n        popoverRef={this.registerPopoverDiv}\n        id={`${itemId}-actions`}\n        isOpen={isOpen}\n        button={withTooltip || popoverButton}\n        closePopover={this.closePopover}\n        panelPaddingSize=\"none\"\n        anchorPosition=\"leftCenter\">\n        <EuiContextMenuPanel items={controls} />\n      </EuiPopover>\n    );\n  }\n}\n"]}]}