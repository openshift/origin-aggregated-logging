!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vega-util")):"function"==typeof define&&define.amd?define(["exports","vega-util"],t):t(e.vega=e.vega||{},e.vega)}(this,function(e,t){"use strict";function r(e){this.type=e}function n(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function a(e,t){if(!e)throw new Error("ASSERT: "+t)}function o(e){return e>=48&&e<=57}function i(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function u(e){return"01234567".indexOf(e)>=0}function s(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function c(e){return 10===e||13===e||8232===e||8233===e}function l(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Ve.test(String.fromCharCode(e))}function f(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&ze.test(String.fromCharCode(e))}function p(){for(var e;le<fe&&(e=ce.charCodeAt(le),s(e)||c(e));)++le}function d(e){var t,r,n,a=0;for(r="u"===e?4:2,t=0;t<r;++t)le<fe&&i(ce[le])?(n=ce[le++],a=16*a+"0123456789abcdef".indexOf(n.toLowerCase())):B({},Te,Ge);return String.fromCharCode(a)}function h(){var e,t,r,n;for(t=0,"}"===(e=ce[le])&&B({},Te,Ge);le<fe&&(e=ce[le++],i(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&B({},Te,Ge),t<=65535?String.fromCharCode(t):(r=55296+(t-65536>>10),n=56320+(t-65536&1023),String.fromCharCode(r,n))}function v(){var e,t;for(e=ce.charCodeAt(le++),t=String.fromCharCode(e),92===e&&(117!==ce.charCodeAt(le)&&B({},Te,Ge),++le,(e=d("u"))&&"\\"!==e&&l(e.charCodeAt(0))||B({},Te,Ge),t=e);le<fe&&(e=ce.charCodeAt(le),f(e));)++le,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ce.charCodeAt(le)&&B({},Te,Ge),++le,(e=d("u"))&&"\\"!==e&&f(e.charCodeAt(0))||B({},Te,Ge),t+=e);return t}function g(){var e,t;for(e=le++;le<fe;){if(92===(t=ce.charCodeAt(le)))return le=e,v();if(!f(t))break;++le}return ce.slice(e,le)}function y(){var e,t,r;return e=le,t=92===ce.charCodeAt(le)?v():g(),r=1===t.length?ve:Xe.hasOwnProperty(t)?ge:"null"===t?ye:"true"===t||"false"===t?de:ve,{type:r,value:t,start:e,end:le}}function m(){var e,t,r,n,a=le,o=ce.charCodeAt(le),i=ce[le];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++le,{type:xe,value:String.fromCharCode(o),start:a,end:le};default:if(61===(e=ce.charCodeAt(le+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return le+=2,{type:xe,value:String.fromCharCode(o)+String.fromCharCode(e),start:a,end:le};case 33:case 61:return le+=2,61===ce.charCodeAt(le)&&++le,{type:xe,value:ce.slice(a,le),start:a,end:le}}}return">>>="===(n=ce.substr(le,4))?(le+=4,{type:xe,value:n,start:a,end:le}):">>>"===(r=n.substr(0,3))||"<<="===r||">>="===r?(le+=3,{type:xe,value:r,start:a,end:le}):(t=r.substr(0,2),i===t[1]&&"+-<>&|".indexOf(i)>=0||"=>"===t?(le+=2,{type:xe,value:t,start:a,end:le}):"<>=!+-*%&|^/".indexOf(i)>=0?(++le,{type:xe,value:i,start:a,end:le}):void B({},Te,Ge))}function x(e){for(var t="";le<fe&&i(ce[le]);)t+=ce[le++];return 0===t.length&&B({},Te,Ge),l(ce.charCodeAt(le))&&B({},Te,Ge),{type:me,value:parseInt("0x"+t,16),start:e,end:le}}function C(e){for(var t="0"+ce[le++];le<fe&&u(ce[le]);)t+=ce[le++];return(l(ce.charCodeAt(le))||o(ce.charCodeAt(le)))&&B({},Te,Ge),{type:me,value:parseInt(t,8),octal:!0,start:e,end:le}}function w(){var e,t,r;if(r=ce[le],a(o(r.charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),t=le,e="","."!==r){if(e=ce[le++],r=ce[le],"0"===e){if("x"===r||"X"===r)return++le,x(t);if(u(r))return C(t);r&&o(r.charCodeAt(0))&&B({},Te,Ge)}for(;o(ce.charCodeAt(le));)e+=ce[le++];r=ce[le]}if("."===r){for(e+=ce[le++];o(ce.charCodeAt(le));)e+=ce[le++];r=ce[le]}if("e"===r||"E"===r)if(e+=ce[le++],"+"!==(r=ce[le])&&"-"!==r||(e+=ce[le++]),o(ce.charCodeAt(le)))for(;o(ce.charCodeAt(le));)e+=ce[le++];else B({},Te,Ge);return l(ce.charCodeAt(le))&&B({},Te,Ge),{type:me,value:parseFloat(e),start:t,end:le}}function b(){var e,t,r,n,o="",i=!1;for(a("'"===(e=ce[le])||'"'===e,"String literal must starts with a quote"),t=le,++le;le<fe;){if((r=ce[le++])===e){e="";break}if("\\"===r)if((r=ce[le++])&&c(r.charCodeAt(0)))"\r"===r&&"\n"===ce[le]&&++le;else switch(r){case"u":case"x":"{"===ce[le]?(++le,o+=h()):o+=d(r);break;case"n":o+="\n";break;case"r":o+="\r";break;case"t":o+="\t";break;case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="\v";break;default:u(r)?(0!==(n="01234567".indexOf(r))&&(i=!0),le<fe&&u(ce[le])&&(i=!0,n=8*n+"01234567".indexOf(ce[le++]),"0123".indexOf(r)>=0&&le<fe&&u(ce[le])&&(n=8*n+"01234567".indexOf(ce[le++]))),o+=String.fromCharCode(n)):o+=r}else{if(c(r.charCodeAt(0)))break;o+=r}}return""!==e&&B({},Te,Ge),{type:Ce,value:o,octal:i,start:t,end:le}}function E(e,t){var r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111)return"x";B({},Pe)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(r)}catch(e){B({},Pe)}try{return new RegExp(e,t)}catch(e){return null}}function M(){var e,t,r,n,o;for(a("/"===(e=ce[le]),"Regular expression literal must start with a slash"),t=ce[le++],r=!1,n=!1;le<fe;)if(e=ce[le++],t+=e,"\\"===e)c((e=ce[le++]).charCodeAt(0))&&B({},_e),t+=e;else if(c(e.charCodeAt(0)))B({},_e);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||B({},_e),o=t.substr(1,t.length-2),{value:o,literal:t}}function A(){var e,t,r;for(t="",r="";le<fe&&(e=ce[le],f(e.charCodeAt(0)));)++le,"\\"===e&&le<fe?B({},Te,Ge):(r+=e,t+=e);return r.search(/[^gimuy]/g)>=0&&B({},Pe,r),{value:r,literal:t}}function k(){var e,t,r,n;return pe=null,p(),e=le,t=M(),r=A(),n=E(t.value,r.value),{literal:t.literal+r.literal,value:n,regex:{pattern:t.value,flags:r.value},start:e,end:le}}function O(e){return e.type===ve||e.type===ge||e.type===de||e.type===ye}function S(){var e;return p(),le>=fe?{type:he,start:le,end:le}:(e=ce.charCodeAt(le),l(e)?y():40===e||41===e||59===e?m():39===e||34===e?b():46===e?o(ce.charCodeAt(le+1))?w():m():o(e)?w():m())}function U(){var e;return e=pe,le=e.end,pe=S(),le=e.end,e}function L(){var e;e=le,pe=S(),le=e}function I(e){var t=new r(we);return t.elements=e,t}function T(e,t,n){var a=new r("||"===e||"&&"===e?Oe:be);return a.operator=e,a.left=t,a.right=n,a}function N(e,t){var n=new r(Ee);return n.callee=e,n.arguments=t,n}function j(e,t,n){var a=new r(Me);return a.test=e,a.consequent=t,a.alternate=n,a}function F(e){var t=new r(Ae);return t.name=e,t}function D(e){var t=new r(ke);return t.value=e.value,t.raw=ce.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function R(e,t,n){var a=new r(Se);return a.computed="["===e,a.object=t,a.property=n,a.computed||(n.member=!0),a}function P(e){var t=new r(Ue);return t.properties=e,t}function _(e,t,n){var a=new r(Le);return a.key=t,a.value=n,a.kind=e,a}function q(e,t){var n=new r(Ie);return n.operator=e,n.argument=t,n.prefix=!0,n}function B(e,t){var r,n=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,function(e,t){return a(t<n.length,"Message reference must be in range"),n[t]});throw r=new Error(o),r.index=le,r.description=o,r}function G(e){e.type===he&&B(e,Re),e.type===me&&B(e,Ne),e.type===Ce&&B(e,je),e.type===ve&&B(e,Fe),e.type===ge&&B(e,De),B(e,Te,e.value)}function Q(e){var t=U();t.type===xe&&t.value===e||G(t)}function V(e){return pe.type===xe&&pe.value===e}function z(e){return pe.type===ge&&pe.value===e}function X(){var e=[];for(le=pe.start,Q("[");!V("]");)V(",")?(U(),e.push(null)):(e.push(ue()),V("]")||Q(","));return U(),I(e)}function H(){var e;return le=pe.start,(e=U()).type===Ce||e.type===me?(e.octal&&B(e,qe),D(e)):F(e.value)}function Y(){var e,t,r,n;return le=pe.start,(e=pe).type===ve?(r=H(),Q(":"),n=ue(),_("init",r,n)):e.type!==he&&e.type!==xe?(t=H(),Q(":"),n=ue(),_("init",t,n)):void G(e)}function $(){var e,t,r=[],n={},a=String;for(le=pe.start,Q("{");!V("}");)t="$"+((e=Y()).key.type===Ae?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(n,t)?B({},Be):n[t]=!0,r.push(e),V("}")||Q(",");return Q("}"),P(r)}function J(){var e;return Q("("),e=se(),Q(")"),e}function K(){var e,t,r;if(V("("))return J();if(V("["))return X();if(V("{"))return $();if(e=pe.type,le=pe.start,e===ve||He[pe.value])r=F(U().value);else if(e===Ce||e===me)pe.octal&&B(pe,qe),r=D(U());else{if(e===ge)throw new Error(Qe);e===de?((t=U()).value="true"===t.value,r=D(t)):e===ye?((t=U()).value=null,r=D(t)):V("/")||V("/=")?(r=D(k()),L()):G(U())}return r}function W(){var e=[];if(Q("("),!V(")"))for(;le<fe&&(e.push(ue()),!V(")"));)Q(",");return Q(")"),e}function Z(){var e;return le=pe.start,e=U(),O(e)||G(e),F(e.value)}function ee(){return Q("."),Z()}function te(){var e;return Q("["),e=se(),Q("]"),e}function re(){var e;for(e=K();;)if(V("."))e=R(".",e,ee());else if(V("("))e=N(e,W());else{if(!V("["))break;e=R("[",e,te())}return e}function ne(){var e=re();if(pe.type===xe&&(V("++")||V("--")))throw new Error(Qe);return e}function ae(){var e,t;if(pe.type!==xe&&pe.type!==ge)t=ne();else{if(V("++")||V("--"))throw new Error(Qe);if(V("+")||V("-")||V("~")||V("!"))e=U(),t=ae(),t=q(e.value,t);else{if(z("delete")||z("void")||z("typeof"))throw new Error(Qe);t=ne()}}return t}function oe(e){var t=0;if(e.type!==xe&&e.type!==ge)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function ie(){var e,t,r,n,a,o,i,u,s,c;if(e=pe,s=ae(),n=pe,0===(a=oe(n)))return s;for(n.prec=a,U(),t=[e,pe],o=[s,n,i=ae()];(a=oe(pe))>0;){for(;o.length>2&&a<=o[o.length-2].prec;)i=o.pop(),u=o.pop().value,s=o.pop(),t.pop(),r=T(u,s,i),o.push(r);(n=U()).prec=a,o.push(n),t.push(pe),r=ae(),o.push(r)}for(r=o[c=o.length-1],t.pop();c>1;)t.pop(),r=T(o[c-1].value,o[c-2],r),c-=2;return r}function ue(){var e,t;return e=ie(),V("?")&&(U(),t=ue(),Q(":"),e=j(e,t,ue())),e}function se(){var e=ue();if(V(","))throw new Error(Qe);return e}r.prototype.visit=function(e){var t,r,a,o=this;if(e(o))return 1;for(r=0,a=(t=n(o)).length;r<a;++r)if(t[r].visit(e))return 1};var ce,le,fe,pe,de=1,he=2,ve=3,ge=4,ye=5,me=6,xe=7,Ce=8,we="ArrayExpression",be="BinaryExpression",Ee="CallExpression",Me="ConditionalExpression",Ae="Identifier",ke="Literal",Oe="LogicalExpression",Se="MemberExpression",Ue="ObjectExpression",Le="Property",Ie="UnaryExpression",Te="Unexpected token %0",Ne="Unexpected number",je="Unexpected string",Fe="Unexpected identifier",De="Unexpected reserved word",Re="Unexpected end of input",Pe="Invalid regular expression",_e="Invalid regular expression: missing /",qe="Octal literals are not allowed in strict mode.",Be="Duplicate data property in object literal not allowed in strict mode",Ge="ILLEGAL",Qe="Disabled.",Ve=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),ze=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),Xe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},He={if:1,this:1},Ye={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},$e=function(e){function r(t,r,n,a){var o=e(r[0]);return n&&(o=n+"("+o+")",0===n.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(a<0?"":0===a?"()":"("+r.slice(1).map(e).join(",")+")")}function n(e,t,n){return function(a){return r(e,a,t,n)}}var a="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(r){r.length<3&&t.error("Missing arguments to clamp function."),r.length>3&&t.error("Too many arguments to clamp function.");var n=r.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:a,date:n("getDate",a,0),day:n("getDay",a,0),year:n("getFullYear",a,0),month:n("getMonth",a,0),hours:n("getHours",a,0),minutes:n("getMinutes",a,0),seconds:n("getSeconds",a,0),milliseconds:n("getMilliseconds",a,0),time:n("getTime",a,0),timezoneoffset:n("getTimezoneOffset",a,0),utcdate:n("getUTCDate",a,0),utcday:n("getUTCDay",a,0),utcyear:n("getUTCFullYear",a,0),utcmonth:n("getUTCMonth",a,0),utchours:n("getUTCHours",a,0),utcminutes:n("getUTCMinutes",a,0),utcseconds:n("getUTCSeconds",a,0),utcmilliseconds:n("getUTCMilliseconds",a,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase","String",0),lower:n("toLowerCase","String",0),substring:n("substring","String"),replace:n("replace","String"),regexp:"RegExp",test:n("test","RegExp"),if:function(r){r.length<3&&t.error("Missing arguments to if function."),r.length>3&&t.error("Too many arguments to if function.");var n=r.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};e.ASTNode=r,e.parse=function(e){le=0,fe=(ce=e).length,pe=null,L();var t=se();if(pe.type!==he)throw new Error("Unexpect token after expression.");return t},e.codegen=function(e){function r(e){if(t.isString(e))return e;var r=h[e.type];return null==r&&t.error("Unsupported type: "+e.type),r(e)}function n(e){var t={code:r(e),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},t}var a=(e=e||{}).whitelist?t.toSet(e.whitelist):{},o=e.blacklist?t.toSet(e.blacklist):{},i=e.constants||Ye,u=(e.functions||$e)(r),s=e.globalvar,c=e.fieldvar,l={},f={},p=0,d=t.isFunction(s)?s:function(e){return s+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var r=e.name;return p>0?r:o.hasOwnProperty(r)?t.error("Illegal identifier: "+r):i.hasOwnProperty(r)?i[r]:a.hasOwnProperty(r)?r:(l[r]=1,d(r))},MemberExpression:function(e){var t=!e.computed,n=r(e.object);t&&(p+=1);var a=r(e.property);return n===c&&(f[a]=1),t&&(p-=1),n+(t?"."+a:"["+a+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&t.error("Illegal callee type: "+e.callee.type);var n=e.callee.name,a=e.arguments,o=u.hasOwnProperty(n)&&u[n];return o||t.error("Unrecognized function: "+n),t.isFunction(o)?o(a):o+"("+a.map(r).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(r).join(",")+"]"},BinaryExpression:function(e){return"("+r(e.left)+e.operator+r(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+r(e.argument)+")"},ConditionalExpression:function(e){return"("+r(e.test)+"?"+r(e.consequent)+":"+r(e.alternate)+")"},LogicalExpression:function(e){return"("+r(e.left)+e.operator+r(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(r).join(",")+"}"},Property:function(e){p+=1;var t=r(e.key);return p-=1,t+":"+r(e.value)}};return n.functions=u,n.constants=i,n},e.functions=$e,e.constants=Ye,Object.defineProperty(e,"__esModule",{value:!0})});