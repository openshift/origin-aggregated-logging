(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={1:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([604,0]);return checkDeferredModules()})([,,,,function(module,exports){module.exports=vendors},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}exports.default=function(handleChange){return function(name){return function(selectedOptions){if(_lodash2.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,_lodash2.default.get(selectedOptions,"[0].value",null)))}}}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _detect_ie=__webpack_require__(441);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}exports.default=function(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=_lodash2.default.get(e,"target.value",defaultValue);if(_lodash2.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};module.exports=exports["default"]},,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AggRowUi(props){var iconType="eyeClosed";var iconColor="subdued";var last=_lodash2.default.last(props.siblings);var intl=props.intl;if(last.id===props.model.id){iconType="eye";iconColor="text"}var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.aggRow.dragToSortTooltip",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbAggRow__sortHandle","aria-label":intl.formatMessage({id:"tsvb.aggRow.dragToSortAriaLabel",defaultMessage:"Drag to sort"}),iconType:"grab"})))}return _react2.default.createElement("div",{className:"tvbAggRow"},_react2.default.createElement(_eui.EuiFlexGroup,{"data-test-subj":"aggRow",gutterSize:"s",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiIcon,{className:"tvbAggRow__visibilityIcon",type:iconType,color:iconColor})),_react2.default.createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},props.children),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{testSubj:"addMetric",addTooltip:intl.formatMessage({id:"tsvb.aggRow.addMetricButtonTooltip",defaultMessage:"Add Metric"}),deleteTooltip:intl.formatMessage({id:"tsvb.aggRow.deleteMetricButtonTooltip",defaultMessage:"Delete Metric"}),onAdd:props.onAdd,onDelete:props.onDelete,disableDelete:props.disableDelete}))))}AggRowUi.propTypes={disableDelete:_propTypes2.default.bool,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onDelete:_propTypes2.default.func,siblings:_propTypes2.default.array};var AggRow=(0,_react3.injectI18n)(AggRowUi);exports.default=AggRow;module.exports=exports["default"]},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var metricAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.averageLabel",{defaultMessage:"Average"}),value:"avg"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.cardinalityLabel",{defaultMessage:"Cardinality"}),value:"cardinality"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.countLabel",{defaultMessage:"Count"}),value:"count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.filterRatioLabel",{defaultMessage:"Filter Ratio"}),value:"filter_ratio"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.minLabel",{defaultMessage:"Min"}),value:"min"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileLabel",{defaultMessage:"Percentile"}),value:"percentile"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.percentileRankLabel",{defaultMessage:"Percentile Rank"}),value:"percentile_rank"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.staticValueLabel",{defaultMessage:"Static Value"}),value:"static"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.stdDeviationLabel",{defaultMessage:"Std. Deviation"}),value:"std_deviation"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumLabel",{defaultMessage:"Sum"}),value:"sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.sumOfSquaresLabel",{defaultMessage:"Sum of Squares"}),value:"sum_of_squares"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.topHitLabel",{defaultMessage:"Top Hit"}),value:"top_hit"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.valueCountLabel",{defaultMessage:"Value Count"}),value:"value_count"},{label:_i18n.i18n.translate("tsvb.aggSelect.metricsAggs.varianceLabel",{defaultMessage:"Variance"}),value:"variance"}];var pipelineAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.bucketScriptLabel",{defaultMessage:"Bucket Script"}),value:"calculation"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.derivativeLabel",{defaultMessage:"Derivative"}),value:"derivative"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.movingAverageLabel",{defaultMessage:"Moving Average"}),value:"moving_average"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.positiveOnlyLabel",{defaultMessage:"Positive Only"}),value:"positive_only"},{label:_i18n.i18n.translate("tsvb.aggSelect.pipelineAggs.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),value:"serial_diff"}];var siblingAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallAverageLabel",{defaultMessage:"Overall Average"}),value:"avg_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMaxLabel",{defaultMessage:"Overall Max"}),value:"max_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallMinLabel",{defaultMessage:"Overall Min"}),value:"min_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),value:"std_deviation_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumLabel",{defaultMessage:"Overall Sum"}),value:"sum_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallSumOfSquaresLabel",{defaultMessage:"Overall Sum of Squares"}),value:"sum_of_squares_bucket"},{label:_i18n.i18n.translate("tsvb.aggSelect.siblingAggs.overallVarianceLabel",{defaultMessage:"Overall Variance"}),value:"variance_bucket"}];var specialAggs=[{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.seriesAggLabel",{defaultMessage:"Series Agg"}),value:"series_agg"},{label:_i18n.i18n.translate("tsvb.aggSelect.specialAggs.mathLabel",{defaultMessage:"Math"}),value:"math"}];var allAggOptions=[].concat(metricAggs,pipelineAggs,siblingAggs,specialAggs);function filterByPanelType(panelType){return function(agg){if(panelType==="table")return agg.value!=="series_agg";return true}}function AggSelectUi(props){var siblings=props.siblings,panelType=props.panelType,value=props.value,onChange=props.onChange,intl=props.intl,rest=_objectWithoutProperties(props,["siblings","panelType","value","onChange","intl"]);var selectedOption=allAggOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];var enablePipelines=siblings.some(function(s){return!!metricAggs.find(function(m){return m.value===s.type})});if(siblings.length<=1)enablePipelines=false;var options=void 0;if(panelType==="metrics"){options=metricAggs}else{options=[{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.metricAggLabel",defaultMessage:"Metric Aggregations"}),options:metricAggs},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.parentPipelineAggLabel",defaultMessage:"Parent Pipeline Aggregations"}),options:pipelineAggs.filter(filterByPanelType(panelType)).map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.siblingPipelineAggLabel",defaultMessage:"Sibling Pipeline Aggregations"}),options:siblingAggs.map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})},{label:intl.formatMessage({id:"tsvb.aggSelect.aggGroups.specialAggLabel",defaultMessage:"Special Aggregations"}),options:specialAggs.map(function(agg){return _extends({},agg,{disabled:!enablePipelines})})}]}var handleChange=function handleChange(selectedOptions){if(!selectedOptions||selectedOptions.length<=0)return;onChange(selectedOptions)};return _react2.default.createElement("div",{"data-test-subj":"aggSelector"},_react2.default.createElement(_eui.EuiComboBox,_extends({isClearable:false,placeholder:intl.formatMessage({id:"tsvb.aggSelect.selectAggPlaceholder",defaultMessage:"Select aggregation"}),options:options,selectedOptions:selectedOptions,onChange:handleChange,singleSelection:{asPlainText:true}},rest)))}AggSelectUi.propTypes={onChange:_propTypes2.default.func,panelType:_propTypes2.default.string,siblings:_propTypes2.default.array,value:_propTypes2.default.string};var AggSelect=(0,_react3.injectI18n)(AggSelectUi);exports.default=AggSelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(handleChange,model){return function(part){var doc=_lodash2.default.assign({},model,part);handleChange(doc)}};module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DashboardViewMode=exports.DashboardViewMode=undefined;(function(DashboardViewMode){DashboardViewMode["EDIT"]="edit";DashboardViewMode["VIEW"]="view"})(DashboardViewMode||(exports.DashboardViewMode=DashboardViewMode={}))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(771)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureCatalogueCategory=exports.FeatureCatalogueRegistryProvider=undefined;var _registry=__webpack_require__(23);var FeatureCatalogueRegistryProvider=exports.FeatureCatalogueRegistryProvider=(0,_registry.uiRegistry)({name:"featureCatalogue",index:["id"],group:["category"],order:["title"],filter:function filter(featureCatalogItem){return Object.keys(featureCatalogItem).length>0}});var FeatureCatalogueCategory=exports.FeatureCatalogueCategory={ADMIN:"admin",DATA:"data",OTHER:"other"}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AddDeleteButtons(props){var testSubj=props.testSubj;var createDelete=function createDelete(){if(props.disableDelete){return null}return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:props.deleteTooltip},_react2.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":testSubj+"DeleteBtn","aria-label":props.deleteTooltip,color:"danger",iconType:"trash",onClick:props.onDelete})))};var createAdd=function createAdd(){if(props.disableAdd){return null}return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:props.addTooltip},_react2.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":testSubj+"AddBtn","aria-label":props.addTooltip,iconType:"plusInCircle",onClick:props.onAdd})))};var deleteBtn=createDelete();var addBtn=createAdd();var clone=void 0;if(props.onClone&&!props.disableAdd){clone=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:props.cloneTooltip},_react2.default.createElement(_eui.EuiButtonIcon,{"data-test-subj":testSubj+"CloneBtn","aria-label":props.cloneTooltip,iconType:"copy",onClick:props.onClone})))}return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:props.responsive,justifyContent:"flexEnd"},clone,addBtn,deleteBtn)}AddDeleteButtons.defaultProps={testSubj:"Add",addTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),deleteTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.deleteButtonDefaultTooltip",{defaultMessage:"Delete"}),cloneTooltip:_i18n.i18n.translate("tsvb.addDeleteButtons.cloneButtonDefaultTooltip",{defaultMessage:"Clone"})};AddDeleteButtons.propTypes={addTooltip:_propTypes2.default.string,deleteTooltip:_propTypes2.default.string,cloneTooltip:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,onClone:_propTypes2.default.func,onAdd:_propTypes2.default.func,onDelete:_propTypes2.default.func,responsive:_propTypes2.default.bool};exports.default=AddDeleteButtons;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _embeddable_factory=__webpack_require__(1484);Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableFactory}});var _embeddable=__webpack_require__(1485);Object.keys(_embeddable).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable[key]}})});var _context_menu_actions=__webpack_require__(1486);Object.keys(_context_menu_actions).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context_menu_actions[key]}})});var _embeddable_factories_registry=__webpack_require__(250);Object.defineProperty(exports,"EmbeddableFactoriesRegistryProvider",{enumerable:true,get:function get(){return _embeddable_factories_registry.EmbeddableFactoriesRegistryProvider}})},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _custom_color_picker=__webpack_require__(1020);var _custom_color_picker2=_interopRequireDefault(_custom_color_picker);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ColorPicker=function(_Component){_inherits(ColorPicker,_Component);function ColorPicker(props){_classCallCheck(this,ColorPicker);var _this=_possibleConstructorReturn(this,(ColorPicker.__proto__||Object.getPrototypeOf(ColorPicker)).call(this,props));_this.state={displayPicker:false,color:{}};_this.handleClick=_this.handleClick.bind(_this);_this.handleChange=_this.handleChange.bind(_this);_this.handleClear=_this.handleClear.bind(_this);_this.handleClose=_this.handleClose.bind(_this);return _this}_createClass(ColorPicker,[{key:"handleChange",value:function handleChange(color){var rgb=color.rgb;var part={};part[this.props.name]="rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")";if(this.props.onChange)this.props.onChange(part)}},{key:"handleClick",value:function handleClick(){this.setState({displayPicker:!this.state.displayColorPicker})}},{key:"handleClose",value:function handleClose(){this.setState({displayPicker:false})}},{key:"handleClear",value:function handleClear(){var part={};part[this.props.name]=null;this.props.onChange(part)}},{key:"renderSwatch",value:function renderSwatch(){if(!this.props.value){return _react2.default.createElement("button",{"aria-label":this.props.intl.formatMessage({id:"tsvb.colorPicker.notAccessibleAriaLabel",defaultMessage:"Color picker, not accessible"}),className:"tvbColorPicker__swatch-empty",onClick:this.handleClick})}return _react2.default.createElement("button",{"aria-label":this.props.intl.formatMessage({id:"tsvb.colorPicker.notAccessibleWithValueAriaLabel",defaultMessage:"Color picker ({value}), not accessible"},{value:this.props.value}),style:{backgroundColor:this.props.value},className:"tvbColorPicker__swatch",onClick:this.handleClick})}},{key:"render",value:function render(){var swatch=this.renderSwatch();var value=this.props.value||undefined;var clear=void 0;if(!this.props.disableTrash){clear=_react2.default.createElement("div",{className:"tvbColorPicker__clear",onClick:this.handleClear},_react2.default.createElement(_eui.EuiIconTip,{size:"s",type:"cross",color:"danger",content:this.props.intl.formatMessage({id:"tsvb.colorPicker.clearIconLabel",defaultMessage:"Clear"})}))}return _react2.default.createElement("div",{className:"tvbColorPicker"},swatch,clear,this.state.displayPicker?_react2.default.createElement("div",{className:"tvbColorPicker__popover"},_react2.default.createElement("div",{className:"tvbColorPicker__cover",onClick:this.handleClose}),_react2.default.createElement(_custom_color_picker2.default,{color:value,onChangeComplete:this.handleChange})):null)}}]);return ColorPicker}(_react.Component);ColorPicker.propTypes={name:_propTypes2.default.string.isRequired,value:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),disableTrash:_propTypes2.default.bool,onChange:_propTypes2.default.func};exports.default=(0,_react3.injectI18n)(ColorPicker);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function YesNo(props){var name=props.name,value=props.value;var handleChange=function handleChange(value){var name=props.name;return function(){var parts=_defineProperty({},name,value);props.onChange(parts)}};var htmlId=(0,_eui.htmlIdGenerator)();var inputName=name+_lodash2.default.uniqueId();return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiRadio,{id:htmlId("yes"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.yesButtonLabel",defaultMessage:"Yes"}),className:"eui-displayInlineBlock",name:inputName,checked:Boolean(value),value:"yes",onChange:handleChange(1)})," ",_react2.default.createElement(_eui.EuiRadio,{id:htmlId("no"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.noButtonLabel",defaultMessage:"No"}),className:"eui-displayInlineBlock",name:inputName,checked:!Boolean(value),value:"no",onChange:handleChange(0)}))}YesNo.propTypes={name:_propTypes2.default.string,value:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string])};exports.default=YesNo;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _generate_by_type_filter=__webpack_require__(1029);var _generate_by_type_filter2=_interopRequireDefault(_generate_by_type_filter);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function FieldSelectUi(props){var type=props.type,fields=props.fields,indexPattern=props.indexPattern,value=props.value,onChange=props.onChange,disabled=props.disabled,restrict=props.restrict,intl=props.intl,rest=_objectWithoutProperties(props,["type","fields","indexPattern","value","onChange","disabled","restrict","intl"]);if(type==="count"){return null}var options=(fields[indexPattern]||[]).filter((0,_generate_by_type_filter2.default)(restrict)).map(function(field){return{label:field.name,value:field.name}});var selectedOption=options.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react2.default.createElement(_eui.EuiComboBox,_extends({placeholder:intl.formatMessage({id:"tsvb.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field…"}),isDisabled:disabled,options:options,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true}},rest))}FieldSelectUi.defaultProps={indexPattern:"*",disabled:false,restrict:"none"};FieldSelectUi.propTypes={disabled:_propTypes2.default.bool,fields:_propTypes2.default.object,id:_propTypes2.default.string,indexPattern:_propTypes2.default.string,onChange:_propTypes2.default.func,restrict:_propTypes2.default.string,type:_propTypes2.default.string,value:_propTypes2.default.string};var FieldSelect=(0,_react3.injectI18n)(FieldSelectUi);exports.default=FieldSelect;module.exports=exports["default"]},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(274)},,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(14)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2352)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _view=__webpack_require__(1691);Object.keys(_view).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _view[key]}})});var _panels=__webpack_require__(576);Object.keys(_panels).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panels[key]}})});var _embeddables=__webpack_require__(1692);Object.keys(_embeddables).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddables[key]}})});var _metadata=__webpack_require__(1695);Object.keys(_metadata).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metadata[key]}})})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(data){var lookback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(_lodash2.default.isNumber(data))return data;if(!Array.isArray(data))return 0;var last=data[data.length-1];var lastValue=Array.isArray(last)&&last[1];if(lastValue)return lastValue;var lookbackCounter=1;var value=void 0;while(lookback>lookbackCounter&&!value){var next=data[data.length-++lookbackCounter];value=_lodash2.default.isArray(next)&&next[1]||0}return value||0};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPattern=exports.IndexPattern=function IndexPattern(props){var _defaults;var fields=props.fields,prefix=props.prefix;var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var timeFieldName=prefix+"time_field";var indexPatternName=prefix+"index_pattern";var intervalName=prefix+"interval";var dropBucketName=prefix+"drop_last_bucket";var defaults=(_defaults={default_index_pattern:""},_defineProperty(_defaults,indexPatternName,"*"),_defineProperty(_defaults,intervalName,"auto"),_defineProperty(_defaults,dropBucketName,1),_defaults);var htmlId=(0,_eui.htmlIdGenerator)();var model=_extends({},defaults,props.model);return _react2.default.createElement("div",{className:props.className},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPatternLabel",defaultMessage:"Index pattern"}),helpText:model.default_index_pattern&&!model[indexPatternName]&&_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPattern.searchByDefaultIndex",defaultMessage:"Default index pattern is used. To query all indexes use *"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"metricsIndexPatternInput",disabled:props.disabled,placeholder:model.default_index_pattern,onChange:handleTextChange(indexPatternName,"*"),value:model[indexPatternName],fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPattern.timeFieldLabel",defaultMessage:"Time field"}),fullWidth:true},_react2.default.createElement(_field_select2.default,{"data-test-subj":"metricsIndexPatternFieldsSelect",restrict:"date",value:model[timeFieldName],disabled:props.disabled,onChange:handleSelectChange(timeFieldName),indexPattern:model[indexPatternName],fields:fields,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("interval"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPattern.intervalLabel",defaultMessage:"Interval"}),helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPattern.intervalHelpText",defaultMessage:"Examples: auto, 1m, 1d, 7d, 1y, >=1m",description:"auto, 1m, 1d, 7d, 1y, >=1m are required values and must not be translated."})},_react2.default.createElement(_eui.EuiFieldText,{disabled:props.disabled,onChange:handleTextChange(intervalName,"auto"),value:model[intervalName]}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.indexPattern.dropLastBucketLabel",defaultMessage:"Drop last bucket?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model[dropBucketName],name:dropBucketName,onChange:props.onChange}))))};IndexPattern.defaultProps={prefix:"",disabled:false};IndexPattern.propTypes={model:_propTypes2.default.object.isRequired,fields:_propTypes2.default.object.isRequired,onChange:_propTypes2.default.func.isRequired,prefix:_propTypes2.default.string,disabled:_propTypes2.default.bool,className:_propTypes2.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.filterRows=filterRows;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(2);var _calculate_siblings=__webpack_require__(1031);var _calculate_siblings2=_interopRequireDefault(_calculate_siblings);var _calculate_label=__webpack_require__(293);var _calculate_label2=_interopRequireDefault(_calculate_label);var _basic_aggs=__webpack_require__(438);var _basic_aggs2=_interopRequireDefault(_basic_aggs);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function createTypeFilter(restrict,exclude){return function(metric){if(_lodash2.default.includes(exclude,metric.type))return false;switch(restrict){case"basic":return _lodash2.default.includes(_basic_aggs2.default,metric.type);default:return true}}}function filterRows(includeSiblings){return function(row){if(includeSiblings){return!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}return!/_bucket$/.test(row.type)&&!/^series/.test(row.type)&&!/^percentile/.test(row.type)&&row.type!=="math"}}function MetricSelectUi(props){var additionalOptions=props.additionalOptions,restrict=props.restrict,metric=props.metric,metrics=props.metrics,onChange=props.onChange,value=props.value,exclude=props.exclude,includeSiblings=props.includeSiblings,clearable=props.clearable,intl=props.intl,rest=_objectWithoutProperties(props,["additionalOptions","restrict","metric","metrics","onChange","value","exclude","includeSiblings","clearable","intl"]);var calculatedMetrics=metrics.filter(createTypeFilter(restrict,exclude));var siblings=(0,_calculate_siblings2.default)(calculatedMetrics,metric);var percentileOptions=siblings.filter(function(row){return/^percentile/.test(row.type)}).reduce(function(acc,row){var label=(0,_calculate_label2.default)(row,calculatedMetrics);row.percentiles.forEach(function(p){if(p.value){var _value=/\./.test(p.value)?p.value:p.value+".0";acc.push({value:row.id+"["+_value+"]",label:label+" ("+_value+")"})}});return acc},[]);var options=siblings.filter(filterRows(includeSiblings)).map(function(row){var label=(0,_calculate_label2.default)(row,calculatedMetrics);return{value:row.id,label:label}});var allOptions=[].concat(_toConsumableArray(options),_toConsumableArray(additionalOptions),_toConsumableArray(percentileOptions));var selectedOption=allOptions.find(function(option){return value===option.value});var selectedOptions=selectedOption?[selectedOption]:[];return _react2.default.createElement(_eui.EuiComboBox,_extends({placeholder:intl.formatMessage({id:"tsvb.metricSelect.selectMetricPlaceholder",defaultMessage:"Select metric…"}),options:allOptions,selectedOptions:selectedOptions,onChange:onChange,singleSelection:{asPlainText:true},isClearable:clearable},rest))}MetricSelectUi.defaultProps={additionalOptions:[],exclude:[],metric:{},restrict:"none",includeSiblings:false};MetricSelectUi.propTypes={additionalOptions:_propTypes2.default.array,exclude:_propTypes2.default.array,metric:_propTypes2.default.object,onChange:_propTypes2.default.func,restrict:_propTypes2.default.string,value:_propTypes2.default.string,includeSiblings:_propTypes2.default.bool};var MetricSelect=(0,_react3.injectI18n)(MetricSelectUi);exports.default=MetricSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleChange=handleChange;exports.handleDelete=handleDelete;exports.handleAdd=handleAdd;var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var newFn=function newFn(){return{id:_uuid2.default.v1()}};function handleChange(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.map(function(row){if(row.id===doc.id)return doc;return row});if(_lodash2.default.isFunction(props.onChange)){props.onChange(_lodash2.default.assign({},model,part))}}function handleDelete(props,doc){var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.filter(function(row){return row.id!==doc.id});if(_lodash2.default.isFunction(props.onChange)){props.onChange(_lodash2.default.assign({},model,part))}}function handleAdd(props){var fn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:newFn;if(!_lodash2.default.isFunction(fn))fn=newFn;var model=props.model,name=props.name;var collection=model[name]||[];var part={};part[name]=collection.concat([fn()]);if(_lodash2.default.isFunction(props.onChange)){props.onChange(_lodash2.default.assign({},model,part))}}exports.default={handleAdd:handleAdd,handleDelete:handleDelete,handleChange:handleChange}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _default=__webpack_require__(1343);Object.defineProperty(exports,"DefaultFormatEditor",{enumerable:true,get:function get(){return _default.DefaultFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SharedComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _autocomplete_component=__webpack_require__(519);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SharedComponent=exports.SharedComponent=function(_AutocompleteComponen){_inherits(SharedComponent,_AutocompleteComponen);function SharedComponent(name,parent){_classCallCheck(this,SharedComponent);var _this=_possibleConstructorReturn(this,(SharedComponent.__proto__||Object.getPrototypeOf(SharedComponent)).call(this,name));_this._nextDict={};if(parent){parent.addComponent(_this)}_this._parent=parent;return _this}_createClass(SharedComponent,[{key:"getComponent",value:function getComponent(name){return(this._nextDict[name]||[undefined])[0]}},{key:"addComponent",value:function addComponent(component){var current=this._nextDict[component.name]||[];current.push(component);this._nextDict[component.name]=current;this.next=[].concat.apply([],_lodash2.default.values(this._nextDict))}}]);return SharedComponent}(_autocomplete_component.AutocompleteComponent)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _handlebars=__webpack_require__(444);var _handlebars2=_interopRequireDefault(_handlebars);var _durations=__webpack_require__(433);var _lodash=__webpack_require__(0);var _field_formats=__webpack_require__(35);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var durationsLookup=_durations.durationInputOptions.reduce(function(acc,row){acc[row.value]=row.label;return acc},{});exports.default=function(){var format=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"0,0.[00]";var template=arguments[1];var getConfig=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!template)template="{{value}}";var render=_handlebars2.default.compile(template,{knownHelpersOnly:true});var durationFormatTest=/[pnumshdwMY]+,[pnumshdwMY]+,\d+/;var formatter=void 0;if(durationFormatTest.test(format)){var _format$split=format.split(","),_format$split2=_slicedToArray(_format$split,3),from=_format$split2[0],to=_format$split2[1],decimals=_format$split2[2];var inputFormat=durationsLookup[from];var outputFormat="as"+(0,_lodash.capitalize)(durationsLookup[to]);var DurationFormat=_field_formats.fieldFormats.getType("duration");formatter=new DurationFormat({inputFormat:inputFormat,outputFormat:outputFormat,outputPrecision:decimals})}else{var FieldFormat=_field_formats.fieldFormats.getType(format);if(FieldFormat){formatter=new FieldFormat(null,getConfig)}else{FieldFormat=_field_formats.fieldFormats.getType("number");formatter=new FieldFormat({pattern:format},getConfig)}}return function(val){var value=void 0;if(!(0,_lodash.isNumber)(val)){value=0}else{try{value=formatter.convert(val,"text")}catch(e){value=val}}try{return render({value:value})}catch(e){return String(value)}}};module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _autocomplete_component=__webpack_require__(519);Object.defineProperty(exports,"AutocompleteComponent",{enumerable:true,get:function get(){return _autocomplete_component.AutocompleteComponent}});var _shared_component=__webpack_require__(68);Object.defineProperty(exports,"SharedComponent",{enumerable:true,get:function get(){return _shared_component.SharedComponent}});var _constant_component=__webpack_require__(1394);Object.defineProperty(exports,"ConstantComponent",{enumerable:true,get:function get(){return _constant_component.ConstantComponent}});var _list_component=__webpack_require__(92);Object.defineProperty(exports,"ListComponent",{enumerable:true,get:function get(){return _list_component.ListComponent}});var _simple_param_component=__webpack_require__(1395);Object.defineProperty(exports,"SimpleParamComponent",{enumerable:true,get:function get(){return _simple_param_component.SimpleParamComponent}});var _conditional_proxy=__webpack_require__(1396);Object.defineProperty(exports,"ConditionalProxy",{enumerable:true,get:function get(){return _conditional_proxy.ConditionalProxy}});var _global_only_component=__webpack_require__(1397);Object.defineProperty(exports,"GlobalOnlyComponent",{enumerable:true,get:function get(){return _global_only_component.GlobalOnlyComponent}});var _object_component=__webpack_require__(1398);Object.defineProperty(exports,"ObjectComponent",{enumerable:true,get:function get(){return _object_component.ObjectComponent}});var _accept_endpoint_component=__webpack_require__(1399);Object.defineProperty(exports,"AcceptEndpointComponent",{enumerable:true,get:function get(){return _accept_endpoint_component.AcceptEndpointComponent}});Object.defineProperty(exports,"URL_PATH_END_MARKER",{enumerable:true,get:function get(){return _accept_endpoint_component.URL_PATH_END_MARKER}});var _url_pattern_matcher=__webpack_require__(1400);Object.defineProperty(exports,"UrlPatternMatcher",{enumerable:true,get:function get(){return _url_pattern_matcher.UrlPatternMatcher}});var _index_autocomplete_component=__webpack_require__(1401);Object.defineProperty(exports,"IndexAutocompleteComponent",{enumerable:true,get:function get(){return _index_autocomplete_component.IndexAutocompleteComponent}});var _field_autocomplete_component=__webpack_require__(1404);Object.defineProperty(exports,"FieldAutocompleteComponent",{enumerable:true,get:function get(){return _field_autocomplete_component.FieldAutocompleteComponent}});var _type_autocomplete_component=__webpack_require__(1405);Object.defineProperty(exports,"TypeAutocompleteComponent",{enumerable:true,get:function get(){return _type_autocomplete_component.TypeAutocompleteComponent}});var _id_autocomplete_component=__webpack_require__(1406);Object.defineProperty(exports,"IdAutocompleteComponent",{enumerable:true,get:function get(){return _id_autocomplete_component.IdAutocompleteComponent}});var _template_autocomplete_component=__webpack_require__(1407);Object.defineProperty(exports,"TemplateAutocompleteComponent",{enumerable:true,get:function get(){return _template_autocomplete_component.TemplateAutocompleteComponent}});var _username_autocomplete_component=__webpack_require__(1408);Object.defineProperty(exports,"UsernameAutocompleteComponent",{enumerable:true,get:function get(){return _username_autocomplete_component.UsernameAutocompleteComponent}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _default_component_registry=__webpack_require__(580);Object.defineProperty(exports,"PAGE_TITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_TITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_SUBTITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_SUBTITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_FOOTER_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_FOOTER_COMPONENT}});var _component_registry=__webpack_require__(346);Object.defineProperty(exports,"registerSettingsComponent",{enumerable:true,get:function get(){return _component_registry.registerSettingsComponent}});var _field=__webpack_require__(581);Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});var _sections_register=__webpack_require__(1758);Object.defineProperty(exports,"management",{enumerable:true,get:function get(){return _sections_register.management}});var _components=__webpack_require__(1760);Object.defineProperty(exports,"SidebarNav",{enumerable:true,get:function get(){return _components.SidebarNav}});var _breadcrumbs=__webpack_require__(1762);Object.defineProperty(exports,"MANAGEMENT_BREADCRUMB",{enumerable:true,get:function get(){return _breadcrumbs.MANAGEMENT_BREADCRUMB}})},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Status=exports.getUpdateStatus=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _calculate_object_hash=__webpack_require__(422);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var Status;(function(Status){Status["AGGS"]="aggs";Status["DATA"]="data";Status["PARAMS"]="params";Status["RESIZE"]="resize";Status["TIME"]="time";Status["UI_STATE"]="uiState"})(Status||(exports.Status=Status={}));function hasHashChanged(valueHash,oldStatus,name){var oldHash=oldStatus[name];return oldHash!==valueHash}function hasSizeChanged(size,oldSize){if(!oldSize){return true}return oldSize.width!==size.width||oldSize.height!==size.height}function getUpdateStatus(requiresUpdateStatus,obj,param){if(requiresUpdateStatus===void 0){requiresUpdateStatus=[]}var e_1,_a;var status={};if(requiresUpdateStatus.length===0){return status}if(!obj._oldStatus){obj._oldStatus={}}try{for(var requiresUpdateStatus_1=tslib_1.__values(requiresUpdateStatus),requiresUpdateStatus_1_1=requiresUpdateStatus_1.next();!requiresUpdateStatus_1_1.done;requiresUpdateStatus_1_1=requiresUpdateStatus_1.next()){var requiredStatus=requiresUpdateStatus_1_1.value;var hash=void 0;switch(requiredStatus){case Status.AGGS:hash=(0,_calculate_object_hash.calculateObjectHash)(param.vis.aggs);status.aggs=hasHashChanged(hash,obj._oldStatus,"aggs");obj._oldStatus.aggs=hash;break;case Status.DATA:hash=(0,_calculate_object_hash.calculateObjectHash)(param.visData);status.data=hasHashChanged(hash,obj._oldStatus,"data");obj._oldStatus.data=hash;break;case Status.PARAMS:hash=(0,_calculate_object_hash.calculateObjectHash)(param.vis.params);status.params=hasHashChanged(hash,obj._oldStatus,"param");obj._oldStatus.param=hash;break;case Status.RESIZE:var width=param.vis.size?param.vis.size[0]:0;var height=param.vis.size?param.vis.size[1]:0;var size={width:width,height:height};status.resize=hasSizeChanged(size,obj._oldStatus.resize);obj._oldStatus.resize=size;break;case Status.TIME:var timeRange=param.vis.filters&&param.vis.filters.timeRange;hash=(0,_calculate_object_hash.calculateObjectHash)(timeRange);status.time=hasHashChanged(hash,obj._oldStatus,"time");obj._oldStatus.time=hash;break;case Status.UI_STATE:hash=(0,_calculate_object_hash.calculateObjectHash)(param.uiState);status.uiState=hasHashChanged(hash,obj._oldStatus,"uiState");obj._oldStatus.uiState=hash;break}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(requiresUpdateStatus_1_1&&!requiresUpdateStatus_1_1.done&&(_a=requiresUpdateStatus_1.return))_a.call(requiresUpdateStatus_1)}finally{if(e_1)throw e_1.error}}return status}exports.getUpdateStatus=getUpdateStatus;exports.Status=Status},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ui=__webpack_require__(948);Object.defineProperty(exports,"InspectorView",{enumerable:true,get:function get(){return _ui.InspectorView}});var _inspector=__webpack_require__(950);Object.defineProperty(exports,"Inspector",{enumerable:true,get:function get(){return _inspector.Inspector}});var _view_registry=__webpack_require__(427);Object.defineProperty(exports,"viewRegistry",{enumerable:true,get:function get(){return _view_registry.viewRegistry}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(818)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _re_id_series=__webpack_require__(1017);var _re_id_series2=_interopRequireDefault(_re_id_series);var _series=__webpack_require__(1018);var _series2=_interopRequireDefault(_series);var _collection_actions=__webpack_require__(65);var _new_series_fn=__webpack_require__(1062);var _new_series_fn2=_interopRequireDefault(_new_series_fn);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SeriesEditor=function(_Component){_inherits(SeriesEditor,_Component);function SeriesEditor(props){_classCallCheck(this,SeriesEditor);var _this=_possibleConstructorReturn(this,(SeriesEditor.__proto__||Object.getPrototypeOf(SeriesEditor)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);_this.sortSeries=_this.sortSeries.bind(_this);return _this}_createClass(SeriesEditor,[{key:"handleClone",value:function handleClone(series){var newSeries=(0,_re_id_series2.default)(series);_collection_actions.handleAdd.call(null,this.props,function(){return newSeries})}},{key:"sortSeries",value:function sortSeries(index,direction,allSeries){var newIndex=index+(direction==="up"?-1:1);if(newIndex<0||newIndex>=allSeries.length){return}var newSeries=allSeries.slice(0);var changeWithElement=allSeries[newIndex];newSeries[newIndex]=allSeries[index];newSeries[index]=changeWithElement;this.props.onChange({series:newSeries})}},{key:"renderRow",value:function renderRow(row,index,allSeries){var _this2=this;var props=this.props;var fields=props.fields,model=props.model,name=props.name,limit=props.limit,colorPicker=props.colorPicker;return _react2.default.createElement(_series2.default,{className:"tvbSeriesEditor",colorPicker:colorPicker,disableAdd:model[name].length>=limit,disableDelete:model[name].length<2,fields:fields,key:row.id,onAdd:_collection_actions.handleAdd.bind(null,props,_new_series_fn2.default),onChange:_collection_actions.handleChange.bind(null,props),onClone:function onClone(){return _this2.handleClone(row)},onDelete:_collection_actions.handleDelete.bind(null,props,row),onShouldSortItem:function onShouldSortItem(direction){return _this2.sortSeries(index,direction,allSeries)},model:row,panel:model,sortData:row.id})}},{key:"render",value:function render(){var _this3=this;var _props=this.props,limit=_props.limit,model=_props.model,name=_props.name;var series=model[name].filter(function(val,index){return index<(limit||Infinity)}).map(this.renderRow);var handleSort=function handleSort(data){var series=data.map(function(id){return model[name].find(function(s){return s.id===id})});_this3.props.onChange({series:series})};return _react2.default.createElement("div",{className:"tvbSeriesEditor__container"},_react2.default.createElement(_reactAnythingSortable2.default,{dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbSeries__sortHandle"},series))}}]);return SeriesEditor}(_react.Component);SeriesEditor.defaultProps={name:"series",limit:Infinity,colorPicker:true};SeriesEditor.propTypes={colorPicker:_propTypes2.default.bool,fields:_propTypes2.default.object,limit:_propTypes2.default.number,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=SeriesEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=createAggRowRender;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_change_handler=__webpack_require__(1036);var _series_change_handler2=_interopRequireDefault(_series_change_handler);var _new_metric_agg_fn=__webpack_require__(296);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);var _collection_actions=__webpack_require__(65);var _agg=__webpack_require__(1037);var _agg2=_interopRequireDefault(_agg);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createAggRowRender(props){return function(row,index,items){var panel=props.panel,model=props.model,fields=props.fields;var changeHandler=(0,_series_change_handler2.default)(props,items);return _react2.default.createElement(_agg2.default,{key:row.id,disableDelete:items.length<2,fields:fields,model:row,onAdd:_collection_actions.handleAdd.bind(null,props,_new_metric_agg_fn2.default),onChange:changeHandler,onDelete:_collection_actions.handleDelete.bind(null,props,row),panel:panel,series:model,siblings:items,sortData:row.id})}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ORIGIN=exports.ORIGIN={EMS:"elastic_maps_service",KIBANA_YML:"self_hosted"}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _samples=__webpack_require__(1344);Object.defineProperty(exports,"FormatEditorSamples",{enumerable:true,get:function get(){return _samples.FormatEditorSamples}})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _shared_component=__webpack_require__(68);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ListComponent=exports.ListComponent=function(_SharedComponent){_inherits(ListComponent,_SharedComponent);function ListComponent(name,list,parent,multiValued,allowNonValidValues){_classCallCheck(this,ListComponent);var _this=_possibleConstructorReturn(this,(ListComponent.__proto__||Object.getPrototypeOf(ListComponent)).call(this,name,parent));_this.listGenerator=Array.isArray(list)?function(){return list}:list;_this.multiValued=_lodash2.default.isUndefined(multiValued)?true:multiValued;_this.allowNonValidValues=_lodash2.default.isUndefined(allowNonValidValues)?false:allowNonValidValues;return _this}_createClass(ListComponent,[{key:"getTerms",value:function getTerms(context,editor){if(!this.multiValued&&context.otherTokenValues){return[]}var alreadySet=context.otherTokenValues||[];if(_lodash2.default.isString(alreadySet)){alreadySet=[alreadySet]}var ret=_lodash2.default.difference(this.listGenerator(context,editor),alreadySet);if(this.getDefaultTermMeta()){var meta=this.getDefaultTermMeta();ret=_lodash2.default.map(ret,function(term){if(_lodash2.default.isString(term)){term={name:term}}return _lodash2.default.defaults(term,{meta:meta})})}return ret}},{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}var list=this.listGenerator();var notFound=_lodash2.default.any(tokens,function(token){return list.indexOf(token)===-1});if(notFound){return false}return true}},{key:"getContextKey",value:function getContextKey(){return this.name}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return this.name}},{key:"match",value:function match(token,context,editor){if(!Array.isArray(token)){token=[token]}if(!this.allowNonValidValues&&!this.validateTokens(token,context,editor)){return null}var result=_get(ListComponent.prototype.__proto__||Object.getPrototypeOf(ListComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.getContextKey()]=token;return result}}]);return ListComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var $=__webpack_require__(11);var _=__webpack_require__(0);var es=__webpack_require__(320);var settings=__webpack_require__(113);var perIndexTypes={};var perAliasIndexes=[];var templates=[];var mappingObj={};function expandAliases(indicesOrAliases){if(!indicesOrAliases){return indicesOrAliases}if(typeof indicesOrAliases==="string"){indicesOrAliases=[indicesOrAliases]}indicesOrAliases=$.map(indicesOrAliases,function(iOrA){if(perAliasIndexes[iOrA]){return perAliasIndexes[iOrA]}return[iOrA]});var ret=[].concat.apply([],indicesOrAliases);ret.sort();var last=void 0;ret=$.map(ret,function(v){var r=last===v?null:v;last=v;return r});return ret.length>1?ret:ret[0]}function getTemplates(){return[].concat(_toConsumableArray(templates))}function getFields(indices,types){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}if(typeof types==="string"){var f=typeDict[types];ret=f?f:[]}else{$.each(typeDict,function(type,fields){if(!types||types.length===0||$.inArray(type,types)!==-1){ret.push(fields)}});ret=[].concat.apply([],ret)}}else{$.each(perIndexTypes,function(index){if(!indices||indices.length===0||$.inArray(index,indices)!==-1){ret.push(getFields(index,types))}});ret=[].concat.apply([],ret)}return _.uniq(ret,function(f){return f.name+":"+f.type})}function getTypes(indices){var ret=[];indices=expandAliases(indices);if(typeof indices==="string"){var typeDict=perIndexTypes[indices];if(!typeDict){return[]}$.each(typeDict,function(type){ret.push(type)})}else{$.each(perIndexTypes,function(index){if(!indices||$.inArray(index,indices)!==-1){ret.push(getTypes(index))}});ret=[].concat.apply([],ret)}return _.uniq(ret)}function getIndices(includeAliases){var ret=[];$.each(perIndexTypes,function(index){ret.push(index)});if(typeof includeAliases==="undefined"?true:includeAliases){$.each(perAliasIndexes,function(alias){ret.push(alias)})}return ret}function getFieldNamesFromFieldMapping(fieldName,fieldMapping){if(fieldMapping.enabled===false){return[]}var nestedFields=void 0;function applyPathSettings(nestedFieldNames){var pathType=fieldMapping.path||"full";if(pathType==="full"){return $.map(nestedFieldNames,function(f){f.name=fieldName+"."+f.name;return f})}return nestedFieldNames}if(fieldMapping.properties){nestedFields=getFieldNamesFromTypeMapping(fieldMapping);return applyPathSettings(nestedFields)}var fieldType=fieldMapping.type;if(fieldType==="multi_field"){nestedFields=$.map(fieldMapping.fields,function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});return applyPathSettings(nestedFields)}var ret={name:fieldName,type:fieldType};if(fieldMapping.index_name){ret.name=fieldMapping.index_name}if(fieldMapping.fields){nestedFields=$.map(fieldMapping.fields,function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});nestedFields=applyPathSettings(nestedFields);nestedFields.unshift(ret);return nestedFields}return[ret]}function getFieldNamesFromTypeMapping(typeMapping){var fieldList=$.map(typeMapping.properties||{},function(fieldMapping,fieldName){return getFieldNamesFromFieldMapping(fieldName,fieldMapping)});return _.uniq(fieldList,function(f){return f.name+":"+f.type})}function loadTemplates(templatesObject){templates=Object.keys(templatesObject)}function loadMappings(mappings){perIndexTypes={};$.each(mappings,function(index,indexMapping){var normalizedIndexMappings={};if(indexMapping.mappings&&_.keys(indexMapping).length===1){indexMapping=indexMapping.mappings}$.each(indexMapping,function(typeName,typeMapping){var fieldList=getFieldNamesFromTypeMapping(typeMapping);normalizedIndexMappings[typeName]=fieldList});perIndexTypes[index]=normalizedIndexMappings})}function loadAliases(aliases){perAliasIndexes={};$.each(aliases||{},function(index,omdexAliases){perIndexTypes[index]=perIndexTypes[index]||{};$.each(omdexAliases.aliases||{},function(alias){if(alias===index){return}var curAliases=perAliasIndexes[alias];if(!curAliases){curAliases=[];perAliasIndexes[alias]=curAliases}curAliases.push(index)})});perAliasIndexes._all=getIndices(false)}function clear(){perIndexTypes={};perAliasIndexes={};templates=[]}function retrieveAutocompleteInfoFromServer(){var autocompleteSettings=settings.getAutocomplete();var mappingPromise=void 0;var aliasesPromise=void 0;var templatesPromise=void 0;if(autocompleteSettings.fields){mappingPromise=es.send("GET","_mapping",null,null,true)}else{mappingPromise=new $.Deferred;mappingPromise.resolve()}if(autocompleteSettings.indices){aliasesPromise=es.send("GET","_aliases",null,null,true)}else{aliasesPromise=new $.Deferred;aliasesPromise.resolve()}if(autocompleteSettings.templates){templatesPromise=es.send("GET","_template",null,null,true)}else{templatesPromise=new $.Deferred;templatesPromise.resolve()}$.when(mappingPromise,aliasesPromise,templatesPromise).done(function(mappings,aliases,templates){if(!mappings){mappings={}}else if(mappings[0].length<10*1024*1024){mappings=JSON.parse(mappings[0])}else{console.warn("mapping size is larger than 10MB ("+mappings[0].length/1024/1024+" MB). ignoring..");mappings={}}loadMappings(mappings);if(aliases){loadAliases(JSON.parse(aliases[0]))}else{aliases=[{}];loadAliases({})}if(templates){loadTemplates(JSON.parse(templates[0]))}else{templates=[]}$(mappingObj).trigger("update",[mappings[0],aliases[0]])})}function autocompleteRetriever(){retrieveAutocompleteInfoFromServer();setTimeout(function(){autocompleteRetriever()},6e4)}exports.default=_.assign(mappingObj,{getFields:getFields,getTemplates:getTemplates,getIndices:getIndices,getTypes:getTypes,loadMappings:loadMappings,loadAliases:loadAliases,expandAliases:expandAliases,clear:clear,startRetrievingAutoCompleteInfo:autocompleteRetriever});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard=__webpack_require__(1694);Object.keys(_dashboard).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _dashboard[key]}})})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2020)},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2458)},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _data=__webpack_require__(431);Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data.DataAdapter}});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _data.FormattedData}});var _request=__webpack_require__(967);Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request.RequestAdapter}});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _request.RequestStatus}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _terms=__webpack_require__(1030);var _filter=__webpack_require__(1032);var _filters=__webpack_require__(1033);var _filters2=_interopRequireDefault(_filters);var _everything=__webpack_require__(1035);var _everything2=_interopRequireDefault(_everything);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Split=function(_Component){_inherits(Split,_Component);function Split(){_classCallCheck(this,Split);return _possibleConstructorReturn(this,(Split.__proto__||Object.getPrototypeOf(Split)).apply(this,arguments))}_createClass(Split,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var model=nextProps.model;if(model.split_mode==="filters"&&!model.split_filters){this.props.onChange({split_filters:[{color:model.color,id:_uuid2.default.v1()}]})}}},{key:"render",value:function render(){var _props=this.props,model=_props.model,panel=_props.panel;var indexPattern=model.override_index_pattern&&model.series_index_pattern||panel.index_pattern;if(model.split_mode==="filter"){return _react2.default.createElement(_filter.SplitByFilter,{model:model,onChange:this.props.onChange})}if(model.split_mode==="filters"){return _react2.default.createElement(_filters2.default,{model:model,onChange:this.props.onChange})}if(model.split_mode==="terms"){return _react2.default.createElement(_terms.SplitByTerms,{model:model,indexPattern:indexPattern,fields:this.props.fields,onChange:this.props.onChange})}return _react2.default.createElement(_everything2.default,{model:model,onChange:this.props.onChange})}}]);return Split}(_react.Component);Split.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,panel:_propTypes2.default.object};exports.default=Split;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createUpDownHandler=createUpDownHandler;var _eui=__webpack_require__(2);function createUpDownHandler(callback){return function(ev){if(ev.keyCode===_eui.keyCodes.UP){ev.preventDefault();callback("up")}else if(ev.keyCode===_eui.keyCodes.DOWN){ev.preventDefault();callback("down")}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.truncatedColorMaps=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _colormaps=__webpack_require__(81);var truncatedColorMaps=exports.truncatedColorMaps={};var colormaps=_colormaps.vislibColorMaps;for(var key in colormaps){if(colormaps.hasOwnProperty(key)){truncatedColorMaps[key]=_extends({},colormaps[key],{value:colormaps[key].value.slice(Math.floor(colormaps[key].value.length/4))})}}},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAutocomplete=getAutocomplete;exports.applyCurrentSettings=applyCurrentSettings;exports.getCurrentSettings=getCurrentSettings;exports.updateSettings=updateSettings;var _input=__webpack_require__(517);var _input2=_interopRequireDefault(_input);var _output=__webpack_require__(520);var _output2=_interopRequireDefault(_output);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var storage=__webpack_require__(114);function getFontSize(){return storage.get("font_size",14)}function setFontSize(size){storage.set("font_size",size);applyCurrentSettings();return true}function getWrapMode(){return storage.get("wrap_mode",true)}function setWrapMode(mode){storage.set("wrap_mode",mode);applyCurrentSettings();return true}function getAutocomplete(){return storage.get("autocomplete_settings",{fields:true,indices:true,templates:true})}function setAutocomplete(settings){storage.set("autocomplete_settings",settings);return true}function applyCurrentSettings(editor){if(typeof editor==="undefined"){applyCurrentSettings((0,_input2.default)());applyCurrentSettings((0,_output2.default)())}if(editor){editor.getSession().setUseWrapMode(getWrapMode());editor.$el.css("font-size",getFontSize()+"px")}}function getCurrentSettings(){return{autocomplete:getAutocomplete(),wrapMode:getWrapMode(),fontSize:parseFloat(getFontSize())}}function updateSettings(_ref){var fontSize=_ref.fontSize,wrapMode=_ref.wrapMode,autocomplete=_ref.autocomplete;setFontSize(fontSize);setWrapMode(wrapMode);setAutocomplete(autocomplete);(0,_input2.default)().focus();return getCurrentSettings()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=__webpack_require__(0),transform=_require.transform,_keys=_require.keys,startsWith=_require.startsWith;var Storage=function(){function Storage(engine,prefix){_classCallCheck(this,Storage);this.engine=engine;this.prefix=prefix}_createClass(Storage,[{key:"encode",value:function encode(val){return JSON.stringify(val)}},{key:"decode",value:function decode(val){if(typeof val==="string"){return JSON.parse(val)}}},{key:"encodeKey",value:function encodeKey(key){return""+this.prefix+key}},{key:"decodeKey",value:function decodeKey(key){if(startsWith(key,this.prefix)){return""+key.slice(this.prefix.length)}}},{key:"set",value:function set(key,val){this.engine.setItem(this.encodeKey(key),this.encode(val));return val}},{key:"has",value:function has(key){return this.engine.getItem(this.encodeKey(key))!=null}},{key:"get",value:function get(key,_default){if(this.has(key)){return this.decode(this.engine.getItem(this.encodeKey(key)))}else{return _default}}},{key:"delete",value:function _delete(key){return this.engine.removeItem(this.encodeKey(key))}},{key:"keys",value:function keys(){var _this=this;return transform(_keys(this.engine),function(ours,key){var ourKey=_this.decodeKey(key);if(ourKey!=null)ours.push(ourKey)})}}]);return Storage}();var instance=new Storage(window.localStorage,"sense:");exports.default=instance;module.exports=exports["default"]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports='<div>\n  \x3c!-- Global settings --\x3e\n  <div class="kuiSideBarSection">\n    <div class="kuiSideBarSectionTitle">\n      <div\n        class="kuiSideBarSectionTitle__text"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.settingsTitle"\n        i18n-default-message="Settings"\n      ></div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="legendPosition"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.legendPositionLabel"\n        i18n-default-message="Legend Position"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="legendPosition"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.legendPosition"\n          ng-options="position for position in [\'top\', \'left\', \'right\', \'bottom\']"\n        ></select>\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="showCursor"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.showTooltipLabel"\n        i18n-default-message="Show Tooltip"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showCursor" type="checkbox" ng-model="editorState.params.addTooltip">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow" ng-show="vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="currentTimeMarker"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.currentTimeMarkerLabel"\n        i18n-default-message="Current Time Marker"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="currentTimeMarker" type="checkbox"\n               ng-model="editorState.params.addTimeMarker"\n               ng-checked="editorState.params.addTimeMarker"\n        >\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow" ng-show="!vis.hasSchemaAgg(\'segment\', \'date_histogram\')">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="orderBuckets"\n        i18n-id="kbnVislibVisTypes.editors.pointSeries.orderBucketsBySumLabel"\n        i18n-default-message="Order Buckets by Sum"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="orderBuckets" type="checkbox" ng-model="editorState.params.orderBucketsBySum">\n      </div>\n    </div>\n\n    <vislib-grid></vislib-grid>\n  </div>\n\n</div>\n'},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeLoaderProvider=exports.getVisualizeLoader=exports.VisualizeLoader=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _query_filter=__webpack_require__(54);var _embedded_visualize_handler=__webpack_require__(947);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizeLoader=function(){function VisualizeLoader(savedVisualizations,Private){this.savedVisualizations=savedVisualizations;this.Private=Private}VisualizeLoader.prototype.embedVisualizationWithId=function(element,savedVisualizationId,params){return tslib_1.__awaiter(this,void 0,void 0,function(){var _this=this;return tslib_1.__generator(this,function(_a){return[2,new Promise(function(resolve,reject){_this.savedVisualizations.get(savedVisualizationId).then(function(savedObj){var handler=_this.renderVis(element,savedObj,params);resolve(handler)},reject)})]})})};VisualizeLoader.prototype.embedVisualizationWithSavedObject=function(el,savedObj,params){return this.renderVis(el,savedObj,params)};VisualizeLoader.prototype.getVisualizationList=function(){return this.savedVisualizations.find().then(function(result){return result.hits})};VisualizeLoader.prototype.renderVis=function(container,savedObj,params){var vis=savedObj.vis,description=savedObj.description,searchSource=savedObj.searchSource;vis.description=description;vis.searchSource=searchSource;if(!params.append){container.innerHTML=""}var element=document.createElement("div");element.className="visualize";element.setAttribute("data-test-subj","visualizationLoader");container.appendChild(element);container.style.display="flex";if(params.cssClass){params.cssClass.split(" ").forEach(function(cssClass){element.classList.add(cssClass)})}var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){element.setAttribute("data-"+key,dataAttrs[key])})}var handlerParams=tslib_1.__assign({},params,{queryFilter:this.Private(_query_filter.FilterBarQueryFilterProvider),Private:this.Private});return new _embedded_visualize_handler.EmbeddedVisualizeHandler(element,savedObj,handlerParams)};return VisualizeLoader}();exports.VisualizeLoader=VisualizeLoader;function VisualizeLoaderProvider(savedVisualizations,Private){return new VisualizeLoader(savedVisualizations,Private)}function getVisualizeLoader(){return _chrome2.default.dangerouslyGetActiveInjector().then(function($injector){var Private=$injector.get("Private");return Private(VisualizeLoaderProvider)})}exports.getVisualizeLoader=getVisualizeLoader;exports.VisualizeLoaderProvider=VisualizeLoaderProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisResponseHandlersRegistryProvider=undefined;var _registry=__webpack_require__(23);var VisResponseHandlersRegistryProvider=exports.VisResponseHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visResponseHandlers",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=replaceVars;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _handlebars=__webpack_require__(444);var _handlebars2=_interopRequireDefault(_handlebars);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function replaceVars(str){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var vars=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};try{var template=_handlebars2.default.compile(str,{strict:true,knownHelpersOnly:true});var string=template(_lodash2.default.assign({},vars,{args:args}));return string}catch(e){if(e.toString().indexOf("Parse error")!==-1){return str}else if(e.message.indexOf("not defined in")!==-1){var badVar=e.message.split(/"/)[1];e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+badVar+"}}"}}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else{e.error={caused_by:{reason:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:_i18n.i18n.translate("tsvb.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}}}return e}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GroupBySelectUi(props){var intl=props.intl;var modeOptions=[{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.everythingLabel",defaultMessage:"Everything"}),value:"everything"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filterLabel",defaultMessage:"Filter"}),value:"filter"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.filtersLabel",defaultMessage:"Filters"}),value:"filters"},{label:intl.formatMessage({id:"tsvb.splits.groupBySelect.modeOptions.termsLabel",defaultMessage:"Terms"}),value:"terms"}];var selectedValue=props.value||"everything";var selectedOption=modeOptions.find(function(option){return selectedValue===option.value});return _react2.default.createElement(_eui.EuiComboBox,{id:props.id,isClearable:false,options:modeOptions,selectedOptions:[selectedOption],onChange:props.onChange,singleSelection:true})}GroupBySelectUi.propTypes={onChange:_propTypes2.default.func,value:_propTypes2.default.string};var GroupBySelect=(0,_react3.injectI18n)(GroupBySelectUi);exports.default=GroupBySelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeriesConfig=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _data_format_picker=__webpack_require__(295);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _index_pattern=__webpack_require__(63);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SeriesConfig=exports.SeriesConfig=function SeriesConfig(props){var defaults={offset_time:"",value_template:""};var model=_extends({},defaults,props.model);var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement("div",{className:"tvbAggRow"},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter}),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true})),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.templateLabel",defaultMessage:"Template"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.templateHelpText",defaultMessage:"eg. {templateExample}",values:{templateExample:_react2.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("offsetSeries"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w and 1d are required values and must not be translated."})},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_index_pattern.IndexPattern,{onChange:props.onChange,model:props.model,fields:props.fields,prefix:"series_",disabled:!model.override_index_pattern}))))};SeriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _collection_actions=__webpack_require__(65);var collectionActions=_interopRequireWildcard(_collection_actions);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ColorRules=function(_Component){_inherits(ColorRules,_Component);function ColorRules(props){_classCallCheck(this,ColorRules);var _this=_possibleConstructorReturn(this,(ColorRules.__proto__||Object.getPrototypeOf(ColorRules)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(ColorRules,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;var cast=arguments.length>2&&arguments[2]!==undefined?arguments[2]:String;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=cast(_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value")));if(part[name]==="undefined")part[name]=undefined;if(part[name]===NaN)part[name]=undefined;handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={value:0};var model=_extends({},defaults,row);var handleAdd=collectionActions.handleAdd.bind(null,this.props);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;var operatorOptions=[{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanLabel",defaultMessage:"> greater than"}),value:"gt"},{label:intl.formatMessage({id:"tsvb.colorRules.greaterThanOrEqualLabel",defaultMessage:">= greater than or equal"}),value:"gte"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanLabel",defaultMessage:"< less than"}),value:"lt"},{label:intl.formatMessage({id:"tsvb.colorRules.lessThanOrEqualLabel",defaultMessage:"<= less than or equal"}),value:"lte"}];var handleColorChange=function handleColorChange(part){var handleChange=collectionActions.handleChange.bind(null,_this3.props);handleChange(_lodash2.default.assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedOperatorOption=operatorOptions.find(function(option){return model.operator===option.value});var labelStyle={marginBottom:0};var secondary=void 0;if(!this.props.hideSecondary){secondary=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.colorRules.setSecondaryColorLabel",defaultMessage:"and {secondaryName} to",values:{secondaryName:this.props.secondaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{onChange:handleColorChange,name:this.props.secondaryVarName,value:model[this.props.secondaryVarName]})))}return _react2.default.createElement(_eui.EuiFlexGroup,{wrap:true,responsive:false,gutterSize:"s",key:model.id,alignItems:"center",className:"tvbColorRules__rule"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.colorRules.setPrimaryColorLabel",defaultMessage:"Set {primaryName} to",values:{primaryName:this.props.primaryName},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{onChange:handleColorChange,name:this.props.primaryVarName,value:model[this.props.primaryVarName]})),secondary,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("ifMetricIs")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.colorRules.ifMetricIsLabel",defaultMessage:"if metric is",description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("ifMetricIs"),options:operatorOptions,selectedOptions:selectedOperatorOption?[selectedOperatorOption]:[],onChange:this.handleChange(model,"operator"),singleSelection:true,fullWidth:true})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.colorRules.valueAriaLabel",defaultMessage:"Value"}),value:model.value,onChange:this.handleChange(model,"value",Number),fullWidth:true})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",null,rows)}}]);return ColorRules}(_react.Component);ColorRules.defaultProps={name:"color_rules",primaryName:_i18n.i18n.translate("tsvb.colorRules.defaultPrimaryNameLabel",{defaultMessage:"background"}),primaryVarName:"background_color",secondaryName:_i18n.i18n.translate("tsvb.colorRules.defaultSecondaryNameLabel",{defaultMessage:"text"}),secondaryVarName:"color",hideSecondary:false};ColorRules.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func,primaryName:_propTypes2.default.string,primaryVarName:_propTypes2.default.string,secondaryName:_propTypes2.default.string,secondaryVarName:_propTypes2.default.string,hideSecondary:_propTypes2.default.bool};exports.default=(0,_react3.injectI18n)(ColorRules);module.exports=exports["default"]},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactoriesRegistryProvider=undefined;var _registry=__webpack_require__(23);var EmbeddableFactoriesRegistryProvider=exports.EmbeddableFactoriesRegistryProvider=(0,_registry.uiRegistry)({index:["name"],name:"embeddableFactories"})},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2706)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _is_default_value=__webpack_require__(1754);Object.defineProperty(exports,"isDefaultValue",{enumerable:true,get:function get(){return _is_default_value.isDefaultValue}});var _to_editable_config=__webpack_require__(1755);Object.defineProperty(exports,"toEditableConfig",{enumerable:true,get:function get(){return _to_editable_config.toEditableConfig}});var _get_category_name=__webpack_require__(1757);Object.defineProperty(exports,"getCategoryName",{enumerable:true,get:function get(){return _get_category_name.getCategoryName}});var _default_category=__webpack_require__(583);Object.defineProperty(exports,"DEFAULT_CATEGORY",{enumerable:true,get:function get(){return _default_category.DEFAULT_CATEGORY}});var _get_aria_name=__webpack_require__(582);Object.defineProperty(exports,"getAriaName",{enumerable:true,get:function get(){return _get_aria_name.getAriaName}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get_in_app_url=__webpack_require__(588);Object.keys(_get_in_app_url).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_in_app_url[key]}})});var _get_relationships=__webpack_require__(1785);Object.keys(_get_relationships).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_relationships[key]}})});var _get_saved_object_counts=__webpack_require__(1786);Object.keys(_get_saved_object_counts).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_counts[key]}})});var _get_saved_object_icon=__webpack_require__(1787);Object.keys(_get_saved_object_icon).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_icon[key]}})});var _get_saved_object_label=__webpack_require__(1788);Object.keys(_get_saved_object_label).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_label[key]}})});var _import_file=__webpack_require__(586);Object.keys(_import_file).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _import_file[key]}})});var _parse_query=__webpack_require__(1789);Object.keys(_parse_query).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_query[key]}})});var _resolve_saved_objects=__webpack_require__(587);Object.keys(_resolve_saved_objects).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _resolve_saved_objects[key]}})});var _retrieve_and_export_docs=__webpack_require__(1790);Object.keys(_retrieve_and_export_docs).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _retrieve_and_export_docs[key]}})});var _save_to_file=__webpack_require__(1791);Object.keys(_save_to_file).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _save_to_file[key]}})});var _scan_all_types=__webpack_require__(1792);Object.keys(_scan_all_types).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _scan_all_types[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ESTIMATED_NUMBER_OF_SYSTEM_INDICES=exports.ESTIMATED_NUMBER_OF_SYSTEM_INDICES=100;var MAX_NUMBER_OF_MATCHING_INDICES=exports.MAX_NUMBER_OF_MATCHING_INDICES=100;var MAX_SEARCH_SIZE=exports.MAX_SEARCH_SIZE=MAX_NUMBER_OF_MATCHING_INDICES+ESTIMATED_NUMBER_OF_SYSTEM_INDICES;var PER_PAGE_INCREMENTS=exports.PER_PAGE_INCREMENTS=[5,10,20,50]},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2531)},,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var CONTROL_TYPES=exports.CONTROL_TYPES={LIST:"list",RANGE:"range"};var setControl=exports.setControl=function setControl(controls,controlIndex,control){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),[control],_toConsumableArray(controls.slice(controlIndex+1)))};var addControl=exports.addControl=function addControl(controls,control){return[].concat(_toConsumableArray(controls),[control])};var moveControl=exports.moveControl=function moveControl(controls,controlIndex,direction){var newIndex=void 0;if(direction>=0){newIndex=controlIndex+1}else{newIndex=controlIndex-1}if(newIndex<0){return[].concat(_toConsumableArray(controls.slice(1)),[controls[0]])}else if(newIndex>=controls.length){var lastItemIndex=controls.length-1;return[controls[lastItemIndex]].concat(_toConsumableArray(controls.slice(0,lastItemIndex)))}else{var swapped=controls.slice();var temp=swapped[newIndex];swapped[newIndex]=swapped[controlIndex];swapped[controlIndex]=temp;return swapped}};var removeControl=exports.removeControl=function removeControl(controls,controlIndex){return[].concat(_toConsumableArray(controls.slice(0,controlIndex)),_toConsumableArray(controls.slice(controlIndex+1)))};var getDefaultOptions=exports.getDefaultOptions=function getDefaultOptions(type){var defaultOptions={};switch(type){case CONTROL_TYPES.RANGE:defaultOptions.decimalPlaces=0;defaultOptions.step=1;break;case CONTROL_TYPES.LIST:defaultOptions.type="terms";defaultOptions.multiselect=true;defaultOptions.dynamicOptions=true;defaultOptions.size=5;defaultOptions.order="desc";break}return defaultOptions};var newControl=exports.newControl=function newControl(type){return{id:(new Date).getTime().toString(),indexPattern:"",fieldName:"",parent:"",label:"",type:type,options:getDefaultOptions(type)}};var getTitle=exports.getTitle=function getTitle(controlParams,controlIndex){var title=controlParams.type+": "+controlIndex;if(controlParams.label){title=""+controlParams.label}else if(controlParams.fieldName){title=""+controlParams.fieldName}return title}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultFeedbackMessage=undefined;var _i18n=__webpack_require__(8);var defaultFeedbackMessage=exports.defaultFeedbackMessage=_i18n.i18n.translate("common.ui.vis.defaultFeedbackMessage",{defaultMessage:"Have feedback? Please create an issue in {link}.",values:{link:'<a href="https://github.com/elastic/kibana/issues/new" rel="noopener noreferrer" target="_blank">GitHub</a>'}})},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisRequestHandlersRegistryProvider=undefined;var _registry=__webpack_require__(23);var VisRequestHandlersRegistryProvider=exports.VisRequestHandlersRegistryProvider=(0,_registry.uiRegistry)({name:"visRequestHandlers",index:["name"],order:["title"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var RequestStatus=exports.RequestStatus=undefined;(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(RequestStatus||(exports.RequestStatus=RequestStatus={}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=calculateLabel;var _lodash=__webpack_require__(0);var _agg_lookup=__webpack_require__(437);var _agg_lookup2=_interopRequireDefault(_agg_lookup);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var paths=["cumulative_sum","derivative","moving_average","avg_bucket","sum_bucket","min_bucket","max_bucket","std_deviation_bucket","variance_bucket","sum_of_squares_bucket","serial_diff","positive_only"];function calculateLabel(metric,metrics){if(!metric)return _i18n.i18n.translate("tsvb.calculateLabel.unknownLabel",{defaultMessage:"Unknown"});if(metric.alias)return metric.alias;if(metric.type==="count")return _i18n.i18n.translate("tsvb.calculateLabel.countLabel",{defaultMessage:"Count"});if(metric.type==="calculation"){return _i18n.i18n.translate("tsvb.calculateLabel.bucketScriptsLabel",{defaultMessage:"Bucket Script"})}if(metric.type==="math")return _i18n.i18n.translate("tsvb.calculateLabel.mathLabel",{defaultMessage:"Math"});if(metric.type==="series_agg"){return _i18n.i18n.translate("tsvb.calculateLabel.seriesAggLabel",{defaultMessage:"Series Agg ({metricFunction})",values:{metricFunction:metric.function}})}if(metric.type==="filter_ratio")return _i18n.i18n.translate("tsvb.calculateLabel.filterRatioLabel",{defaultMessage:"Filter Ratio"});if(metric.type==="static"){return _i18n.i18n.translate("tsvb.calculateLabel.staticValueLabel",{defaultMessage:"Static Value of {metricValue}",values:{metricValue:metric.value}})}if(metric.type==="percentile_rank"){return _i18n.i18n.translate("tsvb.calculateLabel.percentileRankLabel",{defaultMessage:"{lookupMetricType} ({metricValue}) of {metricField}",values:{lookupMetricType:_agg_lookup2.default[metric.type],metricValue:metric.value,metricField:metric.field}})}if((0,_lodash.includes)(paths,metric.type)){var targetMetric=metrics.find(function(m){return(0,_lodash.startsWith)(metric.field,m.id)});var targetLabel=calculateLabel(targetMetric,metrics);if(targetMetric&&targetMetric.type==="percentile"){var percentileValueMatch=/\[([0-9\.]+)\]$/;var matches=metric.field.match(percentileValueMatch);if(matches){return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetWithAdditionalLabel",{defaultMessage:"{lookupMetricType} of {targetLabel} ({additionalLabel})",values:{lookupMetricType:_agg_lookup2.default[metric.type],targetLabel:targetLabel,additionalLabel:matches[1]}})}}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfTargetLabel",{defaultMessage:"{lookupMetricType} of {targetLabel}",values:{lookupMetricType:_agg_lookup2.default[metric.type],targetLabel:targetLabel}})}return _i18n.i18n.translate("tsvb.calculateLabel.lookupMetricTypeOfMetricFieldRankLabel",{defaultMessage:"{lookupMetricType} of {metricField}",values:{lookupMetricType:_agg_lookup2.default[metric.type],metricField:metric.field}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.default=calculateCoordinates;var _reactDom=__webpack_require__(26);var _calc_dimensions=__webpack_require__(1003);var _calc_dimensions2=_interopRequireDefault(_calc_dimensions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function calculateCoordinates(innerRef,resizeRef,state){var inner=(0,_reactDom.findDOMNode)(innerRef);var resize=(0,_reactDom.findDOMNode)(resizeRef);var scale=state.scale;if(resize.clientWidth-resize.clientHeight<0){scale=resize.clientWidth/inner.clientWidth}else{scale=resize.clientHeight/inner.clientHeight}var _calcDimensions=(0,_calc_dimensions2.default)(inner,scale),_calcDimensions2=_slicedToArray(_calcDimensions,2),newWidth=_calcDimensions2[0],newHeight=_calcDimensions2[1];if(newWidth>resize.clientWidth){scale=resize.clientWidth/inner.clientWidth}if(newHeight>resize.clientHeight){scale=resize.clientHeight/inner.clientHeight}var _calcDimensions3=(0,_calc_dimensions2.default)(inner,scale);var _calcDimensions4=_slicedToArray(_calcDimensions3,2);newWidth=_calcDimensions4[0];newHeight=_calcDimensions4[1];var translateX=(newWidth-inner.clientWidth)/2;var translateY=(newHeight-inner.clientHeight)/2;var top=Math.floor((resize.clientHeight-newHeight)/2);var left=Math.floor((resize.clientWidth-newWidth)/2);return{scale:scale,top:top,left:left,translateY:translateY,translateX:translateX}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(2);var _durations=__webpack_require__(433);var _i18n=__webpack_require__(8);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var durationFormatTest=/[pnumshdwMY]+,[pnumshdwMY]+/;var DataFormatPicker=function(_Component){_inherits(DataFormatPicker,_Component);function DataFormatPicker(props){_classCallCheck(this,DataFormatPicker);var _this=_possibleConstructorReturn(this,(DataFormatPicker.__proto__||Object.getPrototypeOf(DataFormatPicker)).call(this,props));_this.handleChange=_this.handleChange.bind(_this);_this.handleCustomChange=_this.handleCustomChange.bind(_this);var from="ms";var to="ms";var decimals=2;if(durationFormatTest.test(props.value)){var _props$value$split=props.value.split(",");var _props$value$split2=_slicedToArray(_props$value$split,3);from=_props$value$split2[0];to=_props$value$split2[1];decimals=_props$value$split2[2]}_this.state={from:from,to:to,decimals:decimals};return _this}_createClass(DataFormatPicker,[{key:"handleCustomChange",value:function handleCustomChange(){this.props.onChange([{value:this.custom&&this.custom.value||""}])}},{key:"handleChange",value:function handleChange(selectedOptions){if(selectedOptions.length<1){return}if(selectedOptions[0].value==="custom"){this.handleCustomChange()}else if(selectedOptions[0].value==="duration"){var _state=this.state,from=_state.from,to=_state.to,decimals=_state.decimals;this.props.onChange([{value:from+","+to+","+decimals}])}else{this.props.onChange(selectedOptions)}}},{key:"handleDurationChange",value:function handleDurationChange(name){var _this2=this;return function(selectedOptions){if(selectedOptions.length<1){return}var newValue=void 0;if(name==="decimals"){newValue=_this2.decimals.value}else{newValue=selectedOptions[0].value}_this2.setState(_defineProperty({},name,newValue),function(){var _state2=_this2.state,from=_state2.from,to=_state2.to,decimals=_state2.decimals;_this2.props.onChange([{value:from+","+to+","+decimals}])})}}},{key:"render",value:function render(){var _this3=this;var htmlId=(0,_eui.htmlIdGenerator)();var value=this.props.value||"";var defaultValue=value;if(!_lodash2.default.includes(["bytes","number","percent"],value)){defaultValue="custom"}if(durationFormatTest.test(value)){defaultValue="duration"}var intl=this.props.intl;var options=[{label:intl.formatMessage({id:"tsvb.dataFormatPicker.bytesLabel",defaultMessage:"Bytes"}),value:"bytes"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.numberLabel",defaultMessage:"Number"}),value:"number"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.percentLabel",defaultMessage:"Percent"}),value:"percent"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.durationLabel",defaultMessage:"Duration"}),value:"duration"},{label:intl.formatMessage({id:"tsvb.dataFormatPicker.customLabel",defaultMessage:"Custom"}),value:"custom"}];var selectedOption=options.find(function(option){return defaultValue===option.value});var custom=void 0;if(defaultValue==="duration"){var _value$split=value.split(","),_value$split2=_slicedToArray(_value$split,3),from=_value$split2[0],to=_value$split2[1],decimals=_value$split2[2];var selectedFrom=_durations.durationInputOptions.find(function(option){return from===option.value});var selectedTo=_durations.durationOutputOptions.find(function(option){return to===option.value});return _react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("date"),label:this.props.label},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("from"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.dataFormatPicker.fromLabel",defaultMessage:"From"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationInputOptions,selectedOptions:selectedFrom?[selectedFrom]:[],onChange:this.handleDurationChange("from"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("to"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.dataFormatPicker.toLabel",defaultMessage:"To"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:_durations.durationOutputOptions,selectedOptions:selectedTo?[selectedTo]:[],onChange:this.handleDurationChange("to"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("decimal"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.dataFormatPicker.decimalPlacesLabel",defaultMessage:"Decimal places"})},_react2.default.createElement(_eui.EuiFieldText,{defaultValue:decimals,inputRef:function inputRef(el){return _this3.decimals=el},onChange:this.handleDurationChange("decimals")}))))}if(defaultValue==="custom"){custom=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringLabel",defaultMessage:"Format string"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.dataFormatPicker.formatStringHelpText",defaultMessage:"See {numeralJsLink}",values:{numeralJsLink:_react2.default.createElement(_eui.EuiLink,{href:"http://numeraljs.com/#format",target:"_BLANK"},"Numeral.js")}}))},_react2.default.createElement(_eui.EuiFieldText,{defaultValue:value,inputRef:function inputRef(el){return _this3.custom=el},onChange:this.handleCustomChange})))}return _react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{label:this.props.label},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:options,selectedOptions:selectedOption?[selectedOption]:[],onChange:this.handleChange,singleSelection:true}))),custom)}}]);return DataFormatPicker}(_react.Component);DataFormatPicker.defaultProps={label:_i18n.i18n.translate("tsvb.defaultDataFormatterLabel",{defaultMessage:"Data Formatter"})};DataFormatPicker.propTypes={value:_propTypes2.default.string,label:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=(0,_react3.injectI18n)(DataFormatPicker);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){return{id:_uuid2.default.v1(),type:"count"}};module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMapLayer=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _events=__webpack_require__(44);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KibanaMapLayer=exports.KibanaMapLayer=function(_EventEmitter){_inherits(KibanaMapLayer,_EventEmitter);function KibanaMapLayer(){_classCallCheck(this,KibanaMapLayer);var _this=_possibleConstructorReturn(this,(KibanaMapLayer.__proto__||Object.getPrototypeOf(KibanaMapLayer)).call(this));_this._leafletLayer=null;return _this}_createClass(KibanaMapLayer,[{key:"getBounds",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this._leafletLayer.getBounds());case 1:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _ref.apply(this,arguments)}return getBounds}()},{key:"addToLeafletMap",value:function addToLeafletMap(leafletMap){this._leafletLayer.addTo(leafletMap)}},{key:"removeFromLeafletMap",value:function removeFromLeafletMap(leafletMap){leafletMap.removeLayer(this._leafletLayer)}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"updateExtent",value:function updateExtent(){}},{key:"movePointer",value:function movePointer(){}},{key:"getAttributions",value:function getAttributions(){return this._attribution}}]);return KibanaMapLayer}(_events.EventEmitter)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScaledCirclesMarkers=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(13);var _d2=_interopRequireDefault(_d);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _events=__webpack_require__(44);var _truncated_colormaps=__webpack_require__(108);var _color_util=__webpack_require__(450);var colorUtil=_interopRequireWildcard(_color_util);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ScaledCirclesMarkers=exports.ScaledCirclesMarkers=function(_EventEmitter){_inherits(ScaledCirclesMarkers,_EventEmitter);function ScaledCirclesMarkers(featureCollection,featureCollectionMetaData,options,targetZoom,kibanaMap,metricAgg){_classCallCheck(this,ScaledCirclesMarkers);var _this=_possibleConstructorReturn(this,(ScaledCirclesMarkers.__proto__||Object.getPrototypeOf(ScaledCirclesMarkers)).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._zoom=targetZoom;_this._metricAgg=metricAgg;_this._valueFormatter=options.valueFormatter||function(x){x};_this._tooltipFormatter=options.tooltipFormatter||function(x){x};_this._label=options.label;_this._colorRamp=options.colorRamp;_this._legendColors=null;_this._legendQuantizer=null;_this._popups=[];var layerOptions={pointToLayer:_this.getMarkerFunction(),style:_this.getStyleFunction(),onEachFeature:function onEachFeature(feature,layer){_this._bindPopup(feature,layer)}};if(!options.isFilteredByCollar){layerOptions.filter=function(feature){var bucketRectBounds=feature.properties.geohash_meta.rectangle;return kibanaMap.isInside(bucketRectBounds)}}_this._leafletLayer=_leaflet2.default.geoJson(null,layerOptions);_this._leafletLayer.addData(_this._featureCollection);return _this}_createClass(ScaledCirclesMarkers,[{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"getStyleFunction",value:function getStyleFunction(){var min=_lodash2.default.get(this._featureCollectionMetaData,"min",0);var max=_lodash2.default.get(this._featureCollectionMetaData,"max",1);var quantizeDomain=min!==max?[min,max]:_d2.default.scale.quantize().domain();this._legendColors=makeLegendColors(this._colorRamp);this._legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(this._legendColors);return makeStyleFunction(this._legendColors,quantizeDomain)}},{key:"movePointer",value:function movePointer(){}},{key:"getLabel",value:function getLabel(){if(this._popups.length){return this._label}return""}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this2=this;if(!this._legendColors||!this._legendQuantizer){return}var titleText=this.getLabel();var $title=(0,_jquery2.default)("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this2._legendQuantizer.invertExtent(color).map(_this2._valueFormatter).join(" – ");var label=(0,_jquery2.default)("<div>");var icon=(0,_jquery2.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery2.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_bindPopup",value:function _bindPopup(feature,layer){var _this3=this;var popup=layer.on({mouseover:function mouseover(e){var layer=e.target;if(!_leaflet2.default.Browser.ie&&!_leaflet2.default.Browser.opera){layer.bringToFront()}_this3._showTooltip(feature)},mouseout:function mouseout(){_this3.emit("hideTooltip")}});this._popups.push(popup)}},{key:"_showTooltip",value:function _showTooltip(feature){var content=this._tooltipFormatter(feature);if(!content){return}var latLng=_leaflet2.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0]);this.emit("showTooltip",{content:content,position:latLng})}},{key:"getMarkerFunction",value:function getMarkerFunction(){var _this4=this;var scaleFactor=.6;return function(feature,latlng){var value=feature.properties.value;var scaledRadius=_this4._radiusScale(value)*scaleFactor;return _leaflet2.default.circleMarker(latlng).setRadius(scaledRadius)}}},{key:"_radiusScale",value:function _radiusScale(value){var precisionBiasBase=5;var precisionBiasNumerator=200;var precision=_lodash2.default.max(this._featureCollection.features.map(function(feature){return String(feature.properties.geohash).length}));var pct=Math.abs(value)/Math.abs(this._featureCollectionMetaData.max);var zoomRadius=.5*Math.pow(2,this._zoom);var precisionScale=precisionBiasNumerator/Math.pow(precisionBiasBase,precision);return Math.pow(pct,.5)*zoomRadius*precisionScale}},{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}}]);return ScaledCirclesMarkers}(_events.EventEmitter);function makeLegendColors(colorRampKey){var colorRamp=_lodash2.default.get(_truncated_colormaps.truncatedColorMaps[colorRampKey],"value");return colorUtil.getLegendColors(colorRamp)}function makeColorDarker(color){var amount=1.3;return _d2.default.hcl(color).darker(amount).toString()}function makeStyleFunction(legendColors,quantizeDomain){var legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(legendColors);return function(feature){var value=_lodash2.default.get(feature,"properties.value");var color=legendQuantizer(value);return{fillColor:color,color:makeColorDarker(color),weight:1.5,opacity:1,fillOpacity:.75}}}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaBaseView=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.bypassExternalUrlCheck=bypassExternalUrlCheck;var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _datemath=__webpack_require__(40);var _datemath2=_interopRequireDefault(_datemath);var _vegaLib=__webpack_require__(252);var vega=_interopRequireWildcard(_vegaLib);var _vegaLite=__webpack_require__(457);var vegaLite=_interopRequireWildcard(_vegaLite);var _utils=__webpack_require__(458);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _vega_tooltip=__webpack_require__(1150);var _esQuery=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}vega.scheme("elastic",_eui.VISUALIZATION_COLORS);var vegaFunctions={kibanaAddFilter:"addFilterHandler",kibanaRemoveFilter:"removeFilterHandler",kibanaRemoveAllFilters:"removeAllFiltersHandler",kibanaSetTimeFilter:"setTimeFilterHandler"};var _loop=function _loop(funcName){if(!vega.expressionFunction(funcName)){vega.expressionFunction(funcName,function handlerFwd(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var view=this.context.dataflow;view.runAfter(function(){var _view$_kibanaView;return(_view$_kibanaView=view._kibanaView).vegaFunctionsHandler.apply(_view$_kibanaView,[funcName].concat(args))})})}};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(vegaFunctions)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var funcName=_step.value;_loop(funcName)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var bypassToken=Symbol();function bypassExternalUrlCheck(url){return{url:url,bypassToken:bypassToken}}var VegaBaseView=exports.VegaBaseView=function(){function VegaBaseView(opts){_classCallCheck(this,VegaBaseView);this._$rootScope=opts.$rootScope;this._vegaConfig=opts.vegaConfig;this._$parentEl=(0,_jquery2.default)(opts.parentEl);this._parser=opts.vegaParser;this._serviceSettings=opts.serviceSettings;this._queryfilter=opts.queryfilter;this._timefilter=opts.timefilter;this._findIndex=opts.findIndex;this._view=null;this._vegaViewConfig=null;this._$messages=null;this._destroyHandlers=[];this._initialized=false}_createClass(VegaBaseView,[{key:"init",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this=this;var _iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,warn;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._initialized){_context.next=2;break}throw new Error;case 2:this._initialized=true;_context.prev=3;this._$parentEl.empty().addClass("vgaVis").css("flex-direction",this._parser.containerDir);_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context.prev=8;for(_iterator2=this._parser.warnings[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){warn=_step2.value;this._addMessage("warn",warn)}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](8);_didIteratorError2=true;_iteratorError2=_context.t0;case 16:_context.prev=16;_context.prev=17;if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}case 19:_context.prev=19;if(!_didIteratorError2){_context.next=22;break}throw _iteratorError2;case 22:return _context.finish(19);case 23:return _context.finish(16);case 24:if(!this._parser.error){_context.next=27;break}this._addMessage("err",this._parser.error);return _context.abrupt("return");case 27:this._$container=(0,_jquery2.default)('<div class="vgaVis__view">').css("height","100%").appendTo(this._$parentEl);this._$controls=(0,_jquery2.default)('<div class="vgaVis__controls vgaVis__controls--'+this._parser.controlsDir+'">').appendTo(this._$parentEl);this._addDestroyHandler(function(){if(_this._$container){_this._$container.remove();_this._$container=null}if(_this._$controls){_this._$controls.remove();_this._$controls=null}if(_this._$messages){_this._$messages.remove();_this._$messages=null}if(_this._view){_this._view.finalize()}_this._view=null});this._vegaViewConfig=this.createViewConfig();_context.next=33;return this._initViewCustomizations();case 33:_context.next=38;break;case 35:_context.prev=35;_context.t1=_context["catch"](3);this.onError(_context.t1);case 38:case"end":return _context.stop()}}},_callee,this,[[3,35],[8,12,16,24],[17,,19,23]])}));function init(){return _ref.apply(this,arguments)}return init}()},{key:"createViewConfig",value:function createViewConfig(){var _this2=this;var config={logLevel:vega.Warn,renderer:this._parser.renderer};var loader=vega.loader();var originalSanitize=loader.sanitize.bind(loader);loader.sanitize=function(uri,options){if(uri.bypassToken===bypassToken){uri=uri.url}else if(!_this2._vegaConfig.enableExternalUrls){throw new Error(_i18n.i18n.translate("vega.vegaParser.baseView.externalUrlsAreNotEnabledErrorMessage",{defaultMessage:"External URLs are not enabled. Add   {enableExternalUrls}   to {kibanaConfigFileName}",values:{enableExternalUrls:"vega.enableExternalUrls: true",kibanaConfigFileName:"kibana.yml"}}))}return originalSanitize(uri,options)};config.loader=loader;return config}},{key:"onError",value:function onError(){this._addMessage("err",_utils.Utils.formatErrorToStr.apply(_utils.Utils,arguments))}},{key:"onWarn",value:function onWarn(){if(!this._parser||!this._parser.hideWarnings){this._addMessage("warn",_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}}},{key:"_addMessage",value:function _addMessage(type,text){if(!this._$messages){this._$messages=(0,_jquery2.default)('<ul class="vgaVis__messages">').appendTo(this._$parentEl)}this._$messages.append((0,_jquery2.default)('<li class="vgaVis__message vgaVis__message--'+type+'">').append((0,_jquery2.default)('<pre class="vgaVis__messageCode">').text(text)))}},{key:"resize",value:function resize(){if(this._parser.useResize&&this._view&&this.updateVegaSize(this._view)){return this._view.runAsync()}}},{key:"updateVegaSize",value:function updateVegaSize(view){var heightExtraPadding=6;var width=Math.max(0,this._$container.width()-this._parser.paddingWidth);var height=Math.max(0,this._$container.height()-this._parser.paddingHeight)-heightExtraPadding;var adjustedHeight=height+1e-8;if(view.width()!==width||view.height()!==adjustedHeight){view.width(width).height(adjustedHeight);return true}return false}},{key:"setView",value:function setView(view){if(this._view===view)return;if(this._view){this._view.finalize()}this._view=view;if(view){view._kibanaView=this;if(this._parser.tooltips){var tthandler=new _vega_tooltip.TooltipHandler(this._$container[0],view,this._parser.tooltips);this._addDestroyHandler(function(){return tthandler.hideTooltip()})}return view.runAsync()}}},{key:"vegaFunctionsHandler",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(funcName){var handlerFunc,_len,args,_key,_args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;handlerFunc=vegaFunctions[funcName];if(!(!handlerFunc||!this[handlerFunc])){_context2.next=4;break}throw new Error(_i18n.i18n.translate("vega.vegaParser.baseView.functionIsNotDefinedForGraphErrorMessage",{defaultMessage:"{funcName} is not defined for this graph",values:{funcName:funcName+"()"}}));case 4:for(_len=_args2.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=_args2[_key]}_context2.next=7;return this[handlerFunc].apply(this,_toConsumableArray(args));case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);this.onError(_context2.t0);case 12:case"end":return _context2.stop()}}},_callee2,this,[[0,9]])}));function vegaFunctionsHandler(_x){return _ref2.apply(this,arguments)}return vegaFunctionsHandler}()},{key:"addFilterHandler",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(query,index){var indexId,filter;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._findIndex(index);case 2:indexId=_context3.sent;filter=(0,_esQuery.buildQueryFilter)(query,indexId);_context3.next=6;return this._queryfilter.addFilters(filter);case 6:case"end":return _context3.stop()}}},_callee3,this)}));function addFilterHandler(_x2,_x3){return _ref3.apply(this,arguments)}return addFilterHandler}()},{key:"removeFilterHandler",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(query,index){var _this3=this;var indexId,filter;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._findIndex(index);case 2:indexId=_context4.sent;filter=(0,_esQuery.buildQueryFilter)(query,indexId);this._$rootScope.$evalAsync(function(){try{_this3._queryfilter.removeFilter(filter)}catch(err){_this3.onError(err)}});case 5:case"end":return _context4.stop()}}},_callee4,this)}));function removeFilterHandler(_x4,_x5){return _ref4.apply(this,arguments)}return removeFilterHandler}()},{key:"removeAllFiltersHandler",value:function removeAllFiltersHandler(){this._queryfilter.removeAll()}},{key:"setTimeFilterHandler",value:function setTimeFilterHandler(start,end){this._timefilter.setTime(VegaBaseView._parseTimeRange(start,end))}},{key:"setDebugValues",value:function setDebugValues(view,spec,vlspec){if(window){if(window.VEGA_DEBUG===undefined&&console){console.log("%cWelcome to Kibana Vega Plugin!","font-size: 16px; font-weight: bold;");console.log("You can access the Vega view with VEGA_DEBUG. "+"Learn more at https://vega.github.io/vega/docs/api/debugging/.")}var debugObj={};window.VEGA_DEBUG=debugObj;window.VEGA_DEBUG.VEGA_VERSION=vega.version;window.VEGA_DEBUG.VEGA_LITE_VERSION=vegaLite.version;window.VEGA_DEBUG.view=view;window.VEGA_DEBUG.vega_spec=spec;window.VEGA_DEBUG.vegalite_spec=vlspec;this._addDestroyHandler(function(){if(debugObj===window.VEGA_DEBUG){window.VEGA_DEBUG=null}})}}},{key:"destroy",value:function destroy(){if(this._destroyHandlers){this._ongoingDestroy=Promise.all(this._destroyHandlers.map(function(v){return v()}));this._destroyHandlers=null}return this._ongoingDestroy}},{key:"_addDestroyHandler",value:function _addDestroyHandler(handler){if(this._destroyHandlers){this._destroyHandlers.push(handler)}else{handler()}}}],[{key:"_parseTimeRange",value:function _parseTimeRange(start,end){var absStart=(0,_moment2.default)(start);var absEnd=(0,_moment2.default)(end);var isValidAbsStart=absStart.isValid();var isValidAbsEnd=absEnd.isValid();var mode="absolute";var from=void 0;var to=void 0;var reverse=void 0;if(isValidAbsStart&&isValidAbsEnd){from=absStart;to=absEnd;reverse=absStart.isAfter(absEnd)}else{var startDate=_datemath2.default.parse(start);var endDate=_datemath2.default.parse(end);if(!startDate||!endDate||!startDate.isValid()||!endDate.isValid()){throw new Error(_i18n.i18n.translate("vega.vegaParser.baseView.timeValuesTypeErrorMessage",{defaultMessage:"Error setting time filter: both time values must be either relative or absolute dates. {start}, {end}",values:{start:"start="+JSON.stringify(start),end:"end="+JSON.stringify(end)}}))}reverse=startDate.isAfter(endDate);if(isValidAbsStart||isValidAbsEnd){from=startDate;to=endDate}else{mode="relative";from=start;to=end}}if(reverse){var _ref5=[to,from];from=_ref5[0];to=_ref5[1]}return{from:from,to:to,mode:mode}}}]);return VegaBaseView}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _response_writer=__webpack_require__(1172);var _buckets=__webpack_require__(1174);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function tabifyAggResponse(aggs,esResponse){var respOpts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var write=new _response_writer.TabbedAggResponseWriter(aggs,respOpts);var topLevelBucket=_lodash2.default.assign({},esResponse.aggregations,{doc_count:esResponse.hits.total});collectBucket(write,topLevelBucket,"",1);return write.response()}function collectBucket(write,bucket,key,aggScale){var column=write.aggStack.shift();var agg=column.aggConfig;var aggInfo=agg.write(write.aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case"buckets":var buckets=new _buckets.TabifyBuckets(bucket[agg.id],agg.params,write.timeRange);if(buckets.length){buckets.forEach(function(subBucket,key){var bucketValue=agg.getKey(subBucket,key);var hasBucketValue=typeof bucketValue!=="undefined";if(hasBucketValue){write.bucketBuffer.push({id:column.id,value:bucketValue})}collectBucket(write,subBucket,agg.getKey(subBucket,key),aggScale);if(hasBucketValue){write.bucketBuffer.pop()}})}else if(write.partialRows){write.aggStack.unshift(column);passEmptyBuckets(write,bucket,key,aggScale);write.aggStack.shift()}else{write.row()}break;case"metrics":var value=agg.getValue(bucket);if(aggScale!==1){value*=aggScale}write.metricBuffer.push({id:column.id,value:value});if(!write.aggStack.length){write.row()}else{collectBucket(write,bucket,key,aggScale)}write.metricBuffer.pop();break}write.aggStack.unshift(column)}function passEmptyBuckets(write,bucket,key,aggScale){var column=write.aggStack.shift();var agg=column.aggConfig;switch(agg.type.type){case"metrics":write.aggStack.unshift(column);collectBucket(write,bucket,key,aggScale);return;case"buckets":passEmptyBuckets(write,bucket,key,aggScale)}write.aggStack.unshift(column)}},,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _number=__webpack_require__(1342);Object.defineProperty(exports,"NumberFormatEditor",{enumerable:true,get:function get(){return _number.NumberFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useResizeChecker=useResizeChecker;var _resize_checker=__webpack_require__(429);function useResizeChecker($scope,$el){for(var _len=arguments.length,editors=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){editors[_key-2]=arguments[_key]}var checker=new _resize_checker.ResizeChecker($el);checker.on("resize",function(){return editors.forEach(function(e){return e.resize()})});$scope.$on("$destroy",function(){return checker.destroy()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVersion=getVersion;exports.getContentType=getContentType;exports.send=send;exports.constructESUrl=constructESUrl;var _querystring=__webpack_require__(239);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var esVersion=[];function getVersion(){return esVersion}function getContentType(body){if(!body)return;return"application/json"}function send(method,path,data){var wrappedDfd=_jquery2.default.Deferred();var isGetRequest=/^get$/i.test(method);if(data&&isGetRequest){method="POST"}var options={url:"../api/console/proxy?"+(0,_querystring.stringify)({path:path,method:method}),data:data,contentType:getContentType(data),cache:false,crossDomain:true,type:"POST",dataType:"text"};_jquery2.default.ajax(options).then(function(data,textStatus,jqXHR){wrappedDfd.resolveWith(this,[data,textStatus,jqXHR])},function(jqXHR,textStatus,errorThrown){if(jqXHR.status===0){jqXHR.responseText="\n\nFailed to connect to Console's backend.\nPlease check the Kibana server is up and running"}wrappedDfd.rejectWith(this,[jqXHR,textStatus,errorThrown])});return wrappedDfd}function constructESUrl(baseUri,path){baseUri=baseUri.replace(/\/+$/,"");path=path.replace(/^\/+/,"");return baseUri+"/"+path}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var utils={};utils.textFromRequest=function(request){var data=request.data;if(typeof data!=="string"){data=data.join("\n")}return request.method+" "+request.url+"\n"+data};utils.jsonToString=function(data,indent){return JSON.stringify(data,null,indent?2:0)};utils.reformatData=function(data,indent){var changed=false;var formattedData=[];for(var i=0;i<data.length;i++){var curDoc=data[i];try{var newDoc=utils.jsonToString(JSON.parse(utils.collapseLiteralStrings(curDoc)),indent?2:0);if(indent){newDoc=utils.expandLiteralStrings(newDoc)}changed=changed||newDoc!==curDoc;formattedData.push(newDoc)}catch(e){console.log(e);formattedData.push(curDoc)}}return{changed:changed,data:formattedData}};utils.collapseLiteralStrings=function(data){return data.replace(/"""(?:\s*\r?\n)?((?:.|\r?\n)*?)(?:\r?\n\s*)?"""/g,function(match,literal){return JSON.stringify(literal)})};utils.expandLiteralStrings=function(data){return data.replace(/("(?:\\"|[^"])*?")/g,function(match,string){if(string.split(/\\./).length>2){string=JSON.parse(string).replace("^s*\n","").replace("\ns*^","");var append=string.includes("\n")?"\n":"";return'"""'+append+string+append+'"""'}else{return string}})};utils.extractDeprecationMessages=function(warnings){var re=/\d{3} [0-9a-zA-Z!#$%&'*+-.^_`|~]+ \"((?:\t| |!|[\x23-\x5b]|[\x5d-\x7e]|[\x80-\xff]|\\\\|\\")*)\"(?: \"[^"]*\")?/;return _lodash2.default.map(utils.splitOnUnquotedCommaSpace(warnings),function(warning){var match=re.exec(warning);return"#! Deprecation: "+(match!==null?utils.unescape(match[1]):warning)})};utils.unescape=function(s){return s.replace(/\\\\/g,"\\").replace(/\\"/g,'"')};utils.splitOnUnquotedCommaSpace=function(s){var quoted=false;var arr=[];var buffer="";var i=0;while(i<s.length){var token=s.charAt(i++);if(token==="\\"&&i<s.length){token+=s.charAt(i++)}else if(token===","&&i<s.length&&s.charAt(i)===" "){token+=s.charAt(i++)}if(token==='"'){quoted=!quoted}else if(!quoted&&token===", "){arr.push(buffer);buffer="";continue}buffer+=token}arr.push(buffer);return arr};exports.default=utils;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=SenseEditor;var _=__webpack_require__(0);var ace=__webpack_require__(49);var $=__webpack_require__(11);var curl=__webpack_require__(1413);var RowParser=__webpack_require__(1414);var InputMode=__webpack_require__(1415);var utils=__webpack_require__(321);var es=__webpack_require__(320);var chrome=__webpack_require__(7);var smartResize=__webpack_require__(524);function createInstance($el){var aceEditor=ace.edit($el[0]);var CustomSenseEditor=function CustomSenseEditor(){};CustomSenseEditor.prototype={};function bindProp(key){Object.defineProperty(CustomSenseEditor.prototype,key,{get:function get(){return aceEditor[key]},set:function set(val){aceEditor[key]=val}})}for(var key in aceEditor){switch(_typeof(aceEditor[key])){case"function":CustomSenseEditor.prototype[key]=_.bindKey(aceEditor,key);break;default:bindProp(key);break}}var editor=new CustomSenseEditor;editor.__ace=aceEditor;return editor}function SenseEditor($el){var editor=createInstance($el);var CURRENT_REQ_RANGE=null;editor.$el=$el;editor.$actions=null;editor.parser=new RowParser(editor);editor.resize=smartResize(editor);var onceDoneTokenizing=function onceDoneTokenizing(func,cancelAlreadyScheduledCalls){var session=editor.getSession();var timer=false;var checkInterval=25;return function(){var self=this;var args=[].slice.call(arguments,0);if(cancelAlreadyScheduledCalls){timer=clearTimeout(timer)}setTimeout(function check(){if(session.bgTokenizer.running){timer=setTimeout(check,checkInterval)}else{func.apply(self,args)}})}};editor.setShowPrintMargin(false);(function(session){session.setMode(new InputMode.Mode);session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true)})(editor.getSession());editor.prevRequestStart=function(rowOrPos){rowOrPos=_.isUndefined(rowOrPos)||rowOrPos===null?editor.getCursorPosition():rowOrPos;var curRow=_.isObject(rowOrPos)?rowOrPos.row:rowOrPos;while(curRow>0&&!editor.parser.isStartRequestRow(curRow,editor)){curRow--}return{row:curRow,column:0}};editor.nextRequestStart=function(rowOrPos){rowOrPos=_.isUndefined(rowOrPos)||rowOrPos===null?editor.getCursorPosition():rowOrPos;var session=editor.getSession();var curRow=_.isObject(rowOrPos)?rowOrPos.row:rowOrPos;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){if(editor.parser.isStartRequestRow(curRow,editor)){break}}return{row:curRow,column:0}};editor.autoIndent=onceDoneTokenizing(function(){editor.getRequestRange(function(reqRange){if(!reqRange){return}editor.getRequest(function(parsedReq){if(parsedReq.data&&parsedReq.data.length>0){var indent=parsedReq.data.length===1;var formattedData=utils.reformatData(parsedReq.data,indent);if(!formattedData.changed){indent=!indent;formattedData=utils.reformatData(parsedReq.data,indent)}parsedReq.data=formattedData.data;editor.replaceRequestRange(parsedReq,reqRange)}})})},true);editor.update=function(data,callback){callback=typeof callback==="function"?callback:null;var session=editor.getSession();session.setValue(data);if(callback){setTimeout(function(){var i=void 0;for(i=0;i<session.getLength();i++){session.getTokens(i)}callback()})}};editor.replaceRequestRange=function(newRequest,requestRange){var text=utils.textFromRequest(newRequest);if(requestRange){var pos=editor.getCursorPosition();editor.getSession().replace(requestRange,text);var maxRow=Math.max(requestRange.start.row+text.split("\n").length-1,0);pos.row=Math.min(pos.row,maxRow);editor.moveCursorToPosition(pos);editor.clearSelection()}else{editor.insert(text)}};editor.iterForCurrentLoc=function(){var pos=editor.getCursorPosition();return editor.iterForPosition(pos.row,pos.column,editor)};editor.iterForPosition=function(row,column){return new(ace.acequire("ace/token_iterator").TokenIterator)(editor.getSession(),row,column)};editor.getRequestRange=onceDoneTokenizing(function(row,cb){if(_.isUndefined(cb)){cb=row;row=null}if(typeof cb!=="function"){return}if(editor.parser.isInBetweenRequestsRow(row)){cb(null);return}var reqStart=editor.prevRequestStart(row,editor);var reqEnd=editor.nextRequestEnd(reqStart,editor);cb(new(ace.acequire("ace/range").Range)(reqStart.row,reqStart.column,reqEnd.row,reqEnd.column))});editor.getEngulfingRequestsRange=onceDoneTokenizing(function(range,cb){if(_.isUndefined(cb)){cb=range;range=null}range=range||editor.getSelectionRange();var session=editor.getSession();var startRow=range.start.row;var endRow=range.end.row;var maxLine=Math.max(0,session.getLength()-1);if(editor.parser.isInBetweenRequestsRow(startRow)){}else{for(;startRow>=0;startRow--){if(editor.parser.isStartRequestRow(startRow)){break}}}if(startRow<0||startRow>endRow){cb(null);return}if(editor.parser.isInBetweenRequestsRow(endRow)){for(;endRow>=startRow;endRow--){if(editor.parser.isEndRequestRow(endRow)){break}}}else{for(;endRow<=maxLine;endRow++){if(editor.parser.isEndRequestRow(endRow)){break}}}if(endRow<startRow||endRow>maxLine){cb(null);return}var endColumn=(session.getLine(endRow)||"").replace(/\s+$/,"").length;cb(new(ace.acequire("ace/range").Range)(startRow,0,endRow,endColumn))});editor.getRequestInRange=onceDoneTokenizing(function(range,cb){if(!range){return}var request={method:"",data:[],url:null,range:range};var pos=range.start;var tokenIter=editor.iterForPosition(pos.row,pos.column,editor);var t=tokenIter.getCurrentToken();if(editor.parser.isEmptyToken(t)){t=editor.parser.nextNonEmptyToken(tokenIter)}request.method=t.value;t=editor.parser.nextNonEmptyToken(tokenIter);if(!t||t.type==="method"){return null}request.url="";while(t&&t.type&&t.type.indexOf("url")===0){request.url+=t.value;t=tokenIter.stepForward()}if(editor.parser.isEmptyToken(t)){t=editor.parser.nextNonEmptyToken(tokenIter)}var bodyStartRow=(t?0:1)+tokenIter.getCurrentTokenRow();var dataEndPos=void 0;while(bodyStartRow<range.end.row||bodyStartRow===range.end.row&&0<range.end.column){dataEndPos=editor.nextDataDocEnd({row:bodyStartRow,column:0});var bodyRange=new(ace.acequire("ace/range").Range)(bodyStartRow,0,dataEndPos.row,dataEndPos.column);var data=editor.getSession().getTextRange(bodyRange);request.data.push(data.trim());bodyStartRow=dataEndPos.row+1}cb(request)});editor.getRequestsInRange=function(range,includeNonRequestBlocks,cb){if(_.isUndefined(includeNonRequestBlocks)){includeNonRequestBlocks=false;cb=range;range=null}else if(_.isUndefined(cb)){cb=includeNonRequestBlocks;includeNonRequestBlocks=false}function explicitRangeToRequests(requestsRange,tempCb){if(!requestsRange){tempCb([]);return}var startRow=requestsRange.start.row;var endRow=requestsRange.end.row;var currentRow=startRow;for(;currentRow<=endRow;currentRow++){if(editor.parser.isStartRequestRow(currentRow)){break}}var nonRequestPrefixBlock=null;if(includeNonRequestBlocks&&currentRow!==startRow){nonRequestPrefixBlock=editor.getSession().getLines(startRow,currentRow-1).join("\n")}if(currentRow>endRow){tempCb(nonRequestPrefixBlock?[nonRequestPrefixBlock]:[]);return}editor.getRequest(currentRow,function(request){if(!request){return}explicitRangeToRequests({start:{row:request.range.end.row+1},end:{row:requestsRange.end.row}},function(restOfRequests){restOfRequests.unshift(request);if(nonRequestPrefixBlock!==null){restOfRequests.unshift(nonRequestPrefixBlock)}tempCb(restOfRequests)})})}editor.getEngulfingRequestsRange(range,function(requestRange){explicitRangeToRequests(requestRange,cb)})};editor.getRequest=onceDoneTokenizing(function(row,cb){if(_.isUndefined(cb)){cb=row;row=null}if(typeof cb!=="function"){return}if(editor.parser.isInBetweenRequestsRow(row)){cb(null);return}editor.getRequestRange(row,function(range){editor.getRequestInRange(range,cb)})});editor.moveToPreviousRequestEdge=onceDoneTokenizing(function(){var pos=editor.getCursorPosition();for(pos.row--;pos.row>0&&!editor.parser.isRequestEdge(pos.row);pos.row--){}editor.moveCursorTo(pos.row,0)});editor.moveToNextRequestEdge=onceDoneTokenizing(function(moveOnlyIfNotOnEdge){var pos=editor.getCursorPosition();var maxRow=editor.getSession().getLength();if(!moveOnlyIfNotOnEdge){pos.row++}for(;pos.row<maxRow&&!editor.parser.isRequestEdge(pos.row);pos.row++){}editor.moveCursorTo(pos.row,0)});editor.nextRequestEnd=function(pos){pos=pos||editor.getCursorPosition();var session=editor.getSession();var curRow=pos.row;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){var curRowMode=editor.parser.getRowParseMode(curRow,editor);if((curRowMode&editor.parser.MODE.REQUEST_END)>0){break}if(curRow!==pos.row&&(curRowMode&editor.parser.MODE.REQUEST_START)>0){break}}var column=(session.getLine(curRow)||"").replace(/\s+$/,"").length;return{row:curRow,column:column}};editor.nextDataDocEnd=function(pos){pos=pos||editor.getCursorPosition();var session=editor.getSession();var curRow=pos.row;var maxLines=session.getLength();for(;curRow<maxLines-1;curRow++){var curRowMode=editor.parser.getRowParseMode(curRow,editor);if((curRowMode&RowParser.REQUEST_END)>0){break}if((curRowMode&editor.parser.MODE.MULTI_DOC_CUR_DOC_END)>0){break}if(curRow!==pos.row&&(curRowMode&editor.parser.MODE.REQUEST_START)>0){break}}var column=(session.getLine(curRow)||"").length;return{row:curRow,column:column}};var origOnPaste=editor.__ace.onPaste;editor.__ace.onPaste=function(text){if(text&&curl.detectCURL(text)){editor.handleCURLPaste(text);return}origOnPaste.call(this,text)};editor.handleCURLPaste=function(text){var curlInput=curl.parseCURL(text);editor.insert(curlInput)};editor.highlightCurrentRequestsAndUpdateActionBar=onceDoneTokenizing(function(){var session=editor.getSession();editor.getEngulfingRequestsRange(function(newCurrentReqRange){if(newCurrentReqRange===null&&CURRENT_REQ_RANGE===null){return}if(newCurrentReqRange!==null&&CURRENT_REQ_RANGE!==null&&newCurrentReqRange.start.row===CURRENT_REQ_RANGE.start.row&&newCurrentReqRange.end.row===CURRENT_REQ_RANGE.end.row){var cursorRow=editor.getCursorPosition().row;if(cursorRow===CURRENT_REQ_RANGE.start.row){editor.updateActionsBar()}return}if(CURRENT_REQ_RANGE){session.removeMarker(CURRENT_REQ_RANGE.marker_id)}CURRENT_REQ_RANGE=newCurrentReqRange;if(CURRENT_REQ_RANGE){CURRENT_REQ_RANGE.marker_id=session.addMarker(CURRENT_REQ_RANGE,"ace_snippet-marker","fullLine")}editor.updateActionsBar()})},true);editor.getRequestsAsCURL=function(range,cb){if(_.isUndefined(cb)){cb=range;range=null}if(_.isUndefined(cb)){cb=$.noop}editor.getRequestsInRange(range,true,function(requests){var result=_.map(requests,function requestToCurl(req){if(typeof req==="string"){return req}var esPath=req.url;var esMethod=req.method;var esData=req.data;var elasticsearchBaseUrl=chrome.getInjected("elasticsearchUrl");var url=es.constructESUrl(elasticsearchBaseUrl,esPath);var ret="curl -X"+esMethod+' "'+url+'"';if(esData&&esData.length){ret+=" -H 'Content-Type: application/json' -d'\n";var dataAsString=utils.collapseLiteralStrings(esData.join("\n"));ret+=dataAsString.replace(/'/g,'\\"');if(esData.length>1){ret+="\n"}ret+="'"}return ret});cb(result.join("\n"))})};editor.getSession().on("tokenizerUpdate",function(){editor.highlightCurrentRequestsAndUpdateActionBar()});editor.getSession().selection.on("changeCursor",function(){editor.highlightCurrentRequestsAndUpdateActionBar()});editor.updateActionsBar=function(){var set=function set(top){if(top===null){editor.$actions.css("visibility","hidden")}else{editor.$actions.css({top:top,visibility:"visible"})}};var hide=function hide(){set()};return function(){if(!editor.$actions){return}if(CURRENT_REQ_RANGE){var offsetFromPage=editor.$el.offset().top;var startRow=CURRENT_REQ_RANGE.start.row;var startColumn=CURRENT_REQ_RANGE.start.column;var session=editor.session;var firstLine=session.getLine(startRow);if(firstLine.length>session.getWrapLimit()-5){if(startRow>0){startRow--}else{startRow++}}var topOfReq=editor.renderer.textToScreenCoordinates(startRow,startColumn).pageY-offsetFromPage;if(topOfReq>=0){return set(topOfReq)}var bottomOfReq=editor.renderer.textToScreenCoordinates(CURRENT_REQ_RANGE.end.row,CURRENT_REQ_RANGE.end.column).pageY-offsetFromPage;if(bottomOfReq>=0){return set(0)}}hide()}}();editor.getSession().on("changeScrollTop",editor.updateActionsBar);return editor}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var $=__webpack_require__(11);var storage=__webpack_require__(114);var history={restoreFromHistory:function restoreFromHistory(){throw new Error("not implemented")},getHistoryKeys:function getHistoryKeys(){return storage.keys().filter(function(key){return key.indexOf("hist_elem")===0}).sort().reverse()},getHistory:function getHistory(){return history.getHistoryKeys().map(function(key){return storage.get(key)})},addToHistory:function addToHistory(endpoint,method,data){var keys=history.getHistoryKeys();keys.splice(0,500);$.each(keys,function(i,k){storage.delete(k)});var timestamp=(new Date).getTime();var k="hist_elem_"+timestamp;storage.set(k,{time:timestamp,endpoint:endpoint,method:method,data:data})},updateCurrentState:function updateCurrentState(content){var timestamp=(new Date).getTime();storage.set("editor_state",{time:timestamp,content:content})},getSavedEditorState:function getSavedEditorState(){var saved=storage.get("editor_state");if(!saved)return;var time=saved.time,content=saved.content;return{time:time,content:content}},clearHistory:function clearHistory(){history.getHistoryKeys().forEach(function(key){return storage.delete(key)})}};exports.default=history;module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewsRegistryProvider=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _registry=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DocViewsRegistryProvider=exports.DocViewsRegistryProvider=(0,_registry.uiRegistry)({name:"docViews",index:["name"],order:["order"],constructor:function constructor(){this.forEach(function(docView){docView.shouldShow=docView.shouldShow||_lodash2.default.constant(true);docView.name=docView.name||docView.title})}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(1848)},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _visualize_loader=__webpack_require__(232);Object.keys(_visualize_loader).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _visualize_loader[key]}})})},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Synopsis=Synopsis;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Synopsis(_ref){var description=_ref.description,iconUrl=_ref.iconUrl,iconType=_ref.iconType,title=_ref.title,url=_ref.url,wrapInPanel=_ref.wrapInPanel,onClick=_ref.onClick,isBeta=_ref.isBeta;var optionalImg=void 0;if(iconUrl){optionalImg=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("img",{className:"synopsisIcon",src:iconUrl,alt:""}))}else if(iconType){optionalImg=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiIcon,{type:iconType,color:"primary",size:"xl"}))}var content=_react2.default.createElement(_eui.EuiFlexGroup,null,optionalImg,_react2.default.createElement(_eui.EuiFlexItem,{className:"synopsisContent"},_react2.default.createElement(_eui.EuiTitle,{size:"s",className:"synopsisTitle"},_react2.default.createElement("h4",null,title)),_react2.default.createElement(_eui.EuiText,{className:"synopsisBody"},_react2.default.createElement("p",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},description)))));var synopsisDisplay=content;if(wrapInPanel){synopsisDisplay=_react2.default.createElement(_eui.EuiPanel,{className:"synopsisPanel",betaBadgeLabel:isBeta?"BETA":null},content)}if(onClick){return _react2.default.createElement("span",{onClick:onClick,className:"euiLink synopsis","data-test-subj":"homeSynopsisLink"+title.toLowerCase()},synopsisDisplay)}return _react2.default.createElement("a",{href:url,className:"euiLink synopsis","data-test-subj":"homeSynopsisLink"+title.toLowerCase()},synopsisDisplay)}Synopsis.propTypes={description:_propTypes2.default.string.isRequired,iconUrl:_propTypes2.default.string,iconType:_propTypes2.default.string,title:_propTypes2.default.string.isRequired,url:_propTypes2.default.string,onClick:_propTypes2.default.func,isBeta:_propTypes2.default.bool};Synopsis.defaultProps={isBeta:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Content=Content;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _markdown=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var whiteListedRules=["backticks","emphasis","link","list"];function Content(_ref){var text=_ref.text;return _react2.default.createElement(_markdown.Markdown,{className:"euiText",markdown:text,openLinksInNewTab:true,whiteListedRules:whiteListedRules})}Content.propTypes={text:_propTypes2.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _components=__webpack_require__(554);Object.defineProperty(exports,"QueryBar",{enumerable:true,get:function get(){return _components.QueryBar}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stateMonitorFactory=undefined;var _lodash=__webpack_require__(0);var stateMonitorFactory=exports.stateMonitorFactory={create:function create(state,customInitialState){return stateMonitor(state,customInitialState)}};function stateMonitor(state,customInitialState){var destroyed=false;var ignoredProps=[];var changeHandlers=[];var initialState;_setInitialState(customInitialState);function _setInitialState(innerCustomInitialState){initialState=(0,_lodash.cloneDeep)(innerCustomInitialState)||(0,_lodash.cloneDeep)(state.toJSON())}function removeIgnoredProps(innerState){ignoredProps.forEach(function(path){(0,_lodash.set)(innerState,path,true)});return innerState}function getStatus(){var currentState=removeIgnoredProps((0,_lodash.cloneDeep)(state.toJSON()));var isClean=(0,_lodash.isEqual)(currentState,initialState);return{clean:isClean,dirty:!isClean}}function dispatchChange(type,keys){if(type===void 0){type=null}if(keys===void 0){keys=[]}var status=getStatus();if(!changeHandlers){throw new Error("Change handlers is undefined, this object has been destroyed")}changeHandlers.forEach(function(changeHandler){changeHandler(status,type,keys)})}function dispatchFetch(keys){dispatchChange("fetch_with_changes",keys)}function dispatchSave(keys){dispatchChange("save_with_changes",keys)}function dispatchReset(keys){dispatchChange("reset_with_changes",keys)}return{setInitialState:function setInitialState(innerCustomInitialState){if(!(0,_lodash.isPlainObject)(innerCustomInitialState)){throw new TypeError("The default state must be an object")}var previousStatus=getStatus();_setInitialState(innerCustomInitialState);removeIgnoredProps(initialState);if(!(0,_lodash.isEqual)(previousStatus,getStatus())){dispatchChange()}},ignoreProps:function ignoreProps(props){ignoredProps=ignoredProps.concat(props);removeIgnoredProps(initialState);return this},onChange:function onChange(callback){if(destroyed||!changeHandlers){throw new Error("Monitor has been destroyed")}if(typeof callback!=="function"){throw new Error("onChange handler must be a function")}changeHandlers.push(callback);state.on("fetch_with_changes",dispatchFetch);state.on("save_with_changes",dispatchSave);state.on("reset_with_changes",dispatchReset);var status=getStatus();if(status.dirty){dispatchChange()}return this},destroy:function destroy(){destroyed=true;changeHandlers=undefined;state.off("fetch_with_changes",dispatchFetch);state.off("save_with_changes",dispatchSave);state.off("reset_with_changes",dispatchReset)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _show_share_context_menu=__webpack_require__(1647);Object.defineProperty(exports,"showShareContextMenu",{enumerable:true,get:function get(){return _show_share_context_menu.showShareContextMenu}});var _share_action_registry=__webpack_require__(1652);Object.defineProperty(exports,"ShareContextMenuExtensionsRegistryProvider",{enumerable:true,get:function get(){return _share_action_registry.ShareContextMenuExtensionsRegistryProvider}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showSaveModal(saveModal){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onSave=saveModal.props.onSave;var onSaveConfirmed=function onSaveConfirmed(){onSave.apply(undefined,arguments).then(function(_ref){var id=_ref.id,error=_ref.error;if(id||error){closeModal()}})};document.body.appendChild(container);var element=_react2.default.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});_reactDom2.default.render(_react2.default.createElement(_i18n.I18nContext,null,element),container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectSaveModal=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SavedObjectSaveModal=exports.SavedObjectSaveModal=function(_React$Component){_inherits(SavedObjectSaveModal,_React$Component);function SavedObjectSaveModal(props){var _this2=this;_classCallCheck(this,SavedObjectSaveModal);var _this=_possibleConstructorReturn(this,(SavedObjectSaveModal.__proto__||Object.getPrototypeOf(SavedObjectSaveModal)).call(this,props));_this.onTitleDuplicate=function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})};_this.saveSavedObject=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate});case 5:case"end":return _context.stop()}}},_callee,_this2)}));_this.onTitleChange=function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})};_this.onCopyOnSaveChange=function(event){_this.setState({copyOnSave:event.target.checked})};_this.renderDuplicateTitleCallout=function(){if(!_this.state.hasTitleDuplicate){return}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"A {objectType} with the title '{title}' already exists.",values:{objectType:_this.props.objectType,title:_this.state.title}}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Click {confirmSaveLabel} to save the {objectType} with the duplicate title.",values:{objectType:_this.props.objectType,confirmSaveLabel:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.duplicateTitleDescription.confirmSaveText",defaultMessage:"Confirm Save"}))}}))),_react2.default.createElement(_eui.EuiSpacer,null))};_this.renderCopyOnSave=function(){if(!_this.props.showCopyOnSave){return}return _react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as a new {objectType}",values:{objectType:_this.props.objectType}})},_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange}))};_this.state={title:props.title,copyOnSave:false,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(SavedObjectSaveModal,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"dshSaveModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),_react2.default.createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(),_react2.default.createElement(_eui.EuiForm,null,this.renderCopyOnSave(),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},_react2.default.createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"savedObjectTitle",value:this.state.title,onChange:this.onTitleChange,isInvalid:this.state.hasTitleDuplicate||this.state.title.length===0})),this.props.options)),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",onClick:this.saveSavedObject,isLoading:this.state.isLoading,isDisabled:this.state.title.length===0},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.savedObjects.saveModal.confirmSaveButtonLabel",defaultMessage:"Confirm Save"})))))}}]);return SavedObjectSaveModal}(_react2.default.Component);SavedObjectSaveModal.propTypes={onSave:_propTypes2.default.func.isRequired,onClose:_propTypes2.default.func.isRequired,title:_propTypes2.default.string.isRequired,showCopyOnSave:_propTypes2.default.bool.isRequired,objectType:_propTypes2.default.string.isRequired,options:_propTypes2.default.node}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NewVisModal=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _visualize_constants=__webpack_require__(89);var _type_selection=__webpack_require__(1677);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var NewVisModal=function(_super){tslib_1.__extends(NewVisModal,_super);function NewVisModal(props){var _this=_super.call(this,props)||this;_this.onVisTypeSelected=function(visType){var baseUrl=visType.requiresSearch&&visType.options.showIndexSelection?"#"+_visualize_constants.VisualizeConstants.WIZARD_STEP_2_PAGE_PATH+"?":"#"+_visualize_constants.VisualizeConstants.CREATE_PATH+"?";var params=tslib_1.__spread(["type="+encodeURIComponent(visType.name)],_this.props.editorParams);_this.props.onClose();location.assign(""+baseUrl+params.join("&"))};_this.isLabsEnabled=_chrome2.default.getUiSettingsClient().get("visualize:enableLabs");return _this}NewVisModal.prototype.render=function(){if(!this.props.isOpen){return null}return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:this.props.onClose,maxWidth:"100vw",className:"visNewVisDialog"},_react2.default.createElement(_type_selection.TypeSelection,{showExperimental:this.isLabsEnabled,onVisTypeSelected:this.onVisTypeSelected,visTypesRegistry:this.props.visTypesRegistry})))};NewVisModal.defaultProps={editorParams:[]};return NewVisModal}(_react2.default.Component);exports.NewVisModal=NewVisModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterUtils=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FilterUtils=exports.FilterUtils=function(){function FilterUtils(){_classCallCheck(this,FilterUtils)}_createClass(FilterUtils,null,[{key:"isQueryFilter",value:function isQueryFilter(filter){return filter.query&&!filter.meta}},{key:"getDashboardFilters",value:function getDashboardFilters(dashboard){return dashboard.searchSource.getOwnField("filter")}},{key:"getQueryFilterForDashboard",value:function getQueryFilterForDashboard(dashboard){if(dashboard.searchSource.getOwnField("query")){return dashboard.searchSource.getOwnField("query")}var dashboardFilters=this.getDashboardFilters(dashboard);var dashboardQueryFilter=_lodash2.default.find(dashboardFilters,this.isQueryFilter);return dashboardQueryFilter?dashboardQueryFilter.query:""}},{key:"getFilterBarsForDashboard",value:function getFilterBarsForDashboard(dashboard){return _lodash2.default.reject(this.getDashboardFilters(dashboard),this.isQueryFilter)}},{key:"convertTimeToUTCString",value:function convertTimeToUTCString(time){if((0,_moment2.default)(time).isValid()){return(0,_moment2.default)(time).utc()}else{return time}}},{key:"areTimesEqual",value:function areTimesEqual(timeA,timeB){return this.convertTimeToUTCString(timeA)===this.convertTimeToUTCString(timeB)}},{key:"cleanFiltersForComparison",value:function cleanFiltersForComparison(filters){return _lodash2.default.map(filters,function(filter){return _lodash2.default.omit(filter,["$$hashKey","$state"])})}}]);return FilterUtils}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tryRegisterSettingsComponent=tryRegisterSettingsComponent;exports.registerSettingsComponent=registerSettingsComponent;exports.getSettingsComponent=getSettingsComponent;var registry={};function tryRegisterSettingsComponent(id,component){if(id in registry){return false}registerSettingsComponent(id,component);return true}function registerSettingsComponent(id,component){var allowOverride=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!allowOverride&&id in registry){throw new Error("Component with id "+id+" is already registered.")}if(!component.displayName){component.displayName=id}registry[id]=component}function getSettingsComponent(id){if(!(id in registry)){throw new Error("Component not found with id "+id)}return registry[id]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfigRegistry=undefined;var _registry=__webpack_require__(23);var IndexPatternListConfigRegistry=exports.IndexPatternListConfigRegistry=(0,_registry.uiRegistry)({name:"indexPatternList",index:["name"],order:["order"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfigRegistry=undefined;var _registry=__webpack_require__(23);var IndexPatternCreationConfigRegistry=exports.IndexPatternCreationConfigRegistry=(0,_registry.uiRegistry)({name:"indexPatternCreation",index:["name"],order:["order"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCreateBreadcrumbs=getCreateBreadcrumbs;exports.getEditBreadcrumbs=getEditBreadcrumbs;exports.getEditFieldBreadcrumbs=getEditFieldBreadcrumbs;exports.getCreateFieldBreadcrumbs=getCreateFieldBreadcrumbs;var _management=__webpack_require__(74);var _i18n=__webpack_require__(8);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function getCreateBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.indexPatterns.createBreadcrumb",{defaultMessage:"Create index pattern"}),href:"#/management/kibana/objects"}]}function getEditBreadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;return[_management.MANAGEMENT_BREADCRUMB,{text:indexPattern.title,href:"#/management/kibana/indices/"+indexPattern.id}]}function getEditFieldBreadcrumbs($route){var fieldName=$route.current.params.fieldName;return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:fieldName}])}function getCreateFieldBreadcrumbs($route){return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:_i18n.i18n.translate("kbn.management.indexPatterns.createFieldBreadcrumb",{defaultMessage:"Create field"})}])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _can_append_wildcard=__webpack_require__(1806);Object.defineProperty(exports,"canAppendWildcard",{enumerable:true,get:function get(){return _can_append_wildcard.canAppendWildcard}});var _ensure_minimum_time=__webpack_require__(1807);Object.defineProperty(exports,"ensureMinimumTime",{enumerable:true,get:function get(){return _ensure_minimum_time.ensureMinimumTime}});var _get_indices=__webpack_require__(1808);Object.defineProperty(exports,"getIndices",{enumerable:true,get:function get(){return _get_indices.getIndices}});var _get_matched_indices=__webpack_require__(1809);Object.defineProperty(exports,"getMatchedIndices",{enumerable:true,get:function get(){return _get_matched_indices.getMatchedIndices}});var _contains_illegal_characters=__webpack_require__(1810);Object.defineProperty(exports,"containsIllegalCharacters",{enumerable:true,get:function get(){return _contains_illegal_characters.containsIllegalCharacters}});var _extract_time_fields=__webpack_require__(1811);Object.defineProperty(exports,"extractTimeFields",{enumerable:true,get:function get(){return _extract_time_fields.extractTimeFields}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var FAILURE_REASONS=exports.FAILURE_REASONS={UNKNOWN:"unknown",INVALID_TIEBREAKER:"invalid_tiebreaker"};var LOADING_STATUS=exports.LOADING_STATUS={FAILED:"failed",LOADED:"loaded",LOADING:"loading",UNINITIALIZED:"uninitialized"}},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(879)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormRow=FormRow;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FormRow(props){var control=props.children;if(props.disableMsg){control=_react2.default.createElement(_eui.EuiToolTip,{placement:"top",content:props.disableMsg},control)}return _react2.default.createElement(_eui.EuiFormRow,{label:props.label,id:props.id,"data-test-subj":"inputControl"+props.controlIndex},control)}FormRow.propTypes={label:_propTypes2.default.string.isRequired,id:_propTypes2.default.string.isRequired,children:_propTypes2.default.node.isRequired,controlIndex:_propTypes2.default.number.isRequired,disableMsg:_propTypes2.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Control=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.noValuesDisableMsg=noValuesDisableMsg;exports.noIndexPatternMsg=noIndexPatternMsg;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function noValuesDisableMsg(fieldName,indexPatternName){return _i18n.i18n.translate("inputControl.control.noValuesDisableTooltip",{defaultMessage:'Filtering occurs on the "{fieldName}" field, which doesn\'t exist on any documents in the "{indexPatternName}" index pattern. Choose a different field or index documents that contain values for this field.',values:{fieldName:fieldName,indexPatternName:indexPatternName}})}function noIndexPatternMsg(indexPatternId){return _i18n.i18n.translate("inputControl.control.noIndexPatternTooltip",{defaultMessage:"Could not locate index-pattern id: {indexPatternId}.",values:{indexPatternId:indexPatternId}})}var Control=exports.Control=function(){function Control(controlParams,filterManager,kbnApi,useTimeFilter){var _this=this;_classCallCheck(this,Control);this.format=function(value){var field=_this.filterManager.getField();if(field){return field.format.convert(value)}return value};this.id=controlParams.id;this.controlParams=controlParams;this.options=controlParams.options;this.type=controlParams.type;this.label=controlParams.label?controlParams.label:controlParams.fieldName;this.useTimeFilter=useTimeFilter;this.filterManager=filterManager;this.kbnApi=kbnApi;this.reset();this.disable(_i18n.i18n.translate("inputControl.control.notInitializedTooltip",{defaultMessage:"Control has not been initialized"}))}_createClass(Control,[{key:"fetch",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:throw new Error("fetch method not defined, subclass are required to implement");case 1:case"end":return _context.stop()}}},_callee,this)}));function fetch(){return _ref.apply(this,arguments)}return fetch}()},{key:"setAncestors",value:function setAncestors(ancestors){this.ancestors=ancestors}},{key:"hasAncestors",value:function hasAncestors(){return this.ancestors&&this.ancestors.length>0}},{key:"hasUnsetAncestor",value:function hasUnsetAncestor(){return this.ancestors.reduce(function(accumulator,ancestor){return accumulator||!ancestor.hasValue()},false)}},{key:"getAncestorValues",value:function getAncestorValues(){return this.ancestors.map(function(ancestor){return ancestor.value})}},{key:"getAncestorFilters",value:function getAncestorFilters(){return this.ancestors.map(function(ancestor){return ancestor.filterManager.createFilter(ancestor.value)})}},{key:"isEnabled",value:function isEnabled(){return this.enable}},{key:"disable",value:function disable(reason){this.enable=false;this.disabledReason=reason}},{key:"set",value:function set(newValue){this.value=newValue;if(this.hasValue()){this._kbnFilter=this.filterManager.createFilter(this.value)}else{this._kbnFilter=null}}},{key:"reset",value:function reset(){this._kbnFilter=null;this.value=this.filterManager.getValueFromFilterBar()}},{key:"clear",value:function clear(){this.value=undefined}},{key:"hasChanged",value:function hasChanged(){return!_lodash2.default.isEqual(this.value,this.filterManager.getValueFromFilterBar())}},{key:"hasKbnFilter",value:function hasKbnFilter(){if(this._kbnFilter){return true}return false}},{key:"getKbnFilter",value:function getKbnFilter(){return this._kbnFilter}},{key:"hasValue",value:function hasValue(){return this.value!==undefined}}]);return Control}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FilterManager=exports.FilterManager=function(){function FilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,FilterManager);this.controlId=controlId;this.fieldName=fieldName;this.indexPattern=indexPattern;this.queryFilter=queryFilter}_createClass(FilterManager,[{key:"getIndexPattern",value:function getIndexPattern(){return this.indexPattern}},{key:"getField",value:function getField(){return this.indexPattern.fields.byName[this.fieldName]}},{key:"createFilter",value:function createFilter(){throw new Error("Must implement createFilter.")}},{key:"findFilters",value:function findFilters(){var _this=this;var kbnFilters=_lodash2.default.flatten([this.queryFilter.getAppFilters(),this.queryFilter.getGlobalFilters()]);return kbnFilters.filter(function(kbnFilter){return _lodash2.default.get(kbnFilter,"meta.controlledBy")===_this.controlId})}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){throw new Error("Must implement getValueFromFilterBar.")}}]);return FilterManager}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchSource=createSearchSource;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function createSearchSource(kbnApi,initialState,indexPattern,aggs,useTimeFilter){var filters=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[];var searchSource=new kbnApi.SearchSource(initialState);searchSource.setParent(false);searchSource.setField("filter",function(){var activeFilters=[].concat(_toConsumableArray(filters));if(useTimeFilter){activeFilters.push(kbnApi.timeFilter.createFilter(indexPattern))}return activeFilters});searchSource.setField("size",0);searchSource.setField("index",indexPattern);searchSource.setField("aggs",aggs);return searchSource}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lineage_map=__webpack_require__(913);Object.defineProperty(exports,"getLineageMap",{enumerable:true,get:function get(){return _lineage_map.getLineageMap}});var _parent_candidates=__webpack_require__(914);Object.defineProperty(exports,"getParentCandidates",{enumerable:true,get:function get(){return _parent_candidates.getParentCandidates}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternSelectFormRow=undefined;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);var _index_pattern_select=__webpack_require__(420);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndexPatternSelectFormRowUi(props){var controlIndex=props.controlIndex,indexPatternId=props.indexPatternId,intl=props.intl,onChange=props.onChange;var selectId="indexPatternSelect-"+controlIndex;return _react2.default.createElement(_eui.EuiFormRow,{id:selectId,label:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(_index_pattern_select.IndexPatternSelect,{placeholder:intl.formatMessage({id:"inputControl.editor.indexPatternSelect.patternPlaceholder",defaultMessage:"Select index pattern..."}),indexPatternId:indexPatternId,onChange:onChange,"data-test-subj":selectId}))}IndexPatternSelectFormRowUi.propTypes={onChange:_propTypes2.default.func.isRequired,indexPatternId:_propTypes2.default.string,controlIndex:_propTypes2.default.number.isRequired};var IndexPatternSelectFormRow=exports.IndexPatternSelectFormRow=(0,_react3.injectI18n)(IndexPatternSelectFormRowUi)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldSelect=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FieldSelectUi=function(_Component){_inherits(FieldSelectUi,_Component);function FieldSelectUi(props){var _this2=this;_classCallCheck(this,FieldSelectUi);var _this=_possibleConstructorReturn(this,(FieldSelectUi.__proto__||Object.getPrototypeOf(FieldSelectUi)).call(this,props));_this.loadFields=function(indexPatternId){_this.setState({isLoading:true,fields:[],indexPatternId:indexPatternId},_this.debouncedLoad.bind(null,indexPatternId))};_this.debouncedLoad=_lodash2.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){var indexPattern,fieldsByTypeMap,fields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternId||indexPatternId.length===0)){_context.next=2;break}return _context.abrupt("return");case 2:indexPattern=void 0;_context.prev=3;_context.next=6;return _this.props.getIndexPattern(indexPatternId);case 6:indexPattern=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](3);return _context.abrupt("return");case 12:if(!_this._hasUnmounted){_context.next=14;break}return _context.abrupt("return");case 14:if(!(indexPattern.id!==_this.state.indexPatternId)){_context.next=16;break}return _context.abrupt("return");case 16:fieldsByTypeMap=new Map;fields=[];indexPattern.fields.filter(_this.filterField).forEach(function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else{fieldsByTypeMap.set(field.type,[field.name])}});fieldsByTypeMap.forEach(function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map(function(fieldName){return{value:fieldName,label:fieldName}})})});fields.sort(function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});_this.setState({isLoading:false,fields:fields});case 22:case"end":return _context.stop()}}},_callee,_this2,[[3,9]])}));return function(_x){return _ref.apply(this,arguments)}}(),300);_this.onChange=function(selectedOptions){_this.props.onChange(_lodash2.default.get(selectedOptions,"0.value"))};_this._hasUnmounted=false;_this.state={isLoading:false,fields:[],indexPatternId:props.indexPatternId};_this.filterField=_lodash2.default.get(props,"filterField",function(){return true});return _this}_createClass(FieldSelectUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._hasUnmounted=true}},{key:"componentDidMount",value:function componentDidMount(){this.loadFields(this.state.indexPatternId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(this.props.indexPatternId!==nextProps.indexPatternId){this.loadFields(nextProps.indexPatternId)}}},{key:"render",value:function render(){if(!this.props.indexPatternId||this.props.indexPatternId.trim().length===0){return null}var selectId="fieldSelect-"+this.props.controlIndex;var selectedOptions=[];var intl=this.props.intl;if(this.props.fieldName){selectedOptions.push({value:this.props.fieldName,label:this.props.fieldName})}return _react2.default.createElement(_eui.EuiFormRow,{id:selectId,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.fieldSelect.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_eui.EuiComboBox,{placeholder:intl.formatMessage({id:"inputControl.editor.fieldSelect.selectFieldPlaceholder",defaultMessage:"Select field..."}),singleSelection:true,isLoading:this.state.isLoading,options:this.state.fields,selectedOptions:selectedOptions,onChange:this.onChange,"data-test-subj":selectId}))}}]);return FieldSelectUi}(_react.Component);FieldSelectUi.propTypes={getIndexPattern:_propTypes2.default.func.isRequired,indexPatternId:_propTypes2.default.string,onChange:_propTypes2.default.func.isRequired,fieldName:_propTypes2.default.string,filterField:_propTypes2.default.func,controlIndex:_propTypes2.default.number.isRequired};var FieldSelect=exports.FieldSelect=(0,_react3.injectI18n)(FieldSelectUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function pad(hash,len){while(hash.length<len){hash="0"+hash}return hash}function fold(hash,text){var i=void 0;var chr=void 0;var len=void 0;if(text.length===0){return hash}for(i=0,len=text.length;i<len;i++){chr=text.charCodeAt(i);hash=(hash<<5)-hash+chr;hash|=0}return hash<0?hash*-2:hash}function foldObject(hash,o,seen){return Object.keys(o).sort().reduce(foldKey,hash);function foldKey(hash,key){return foldValue(hash,o[key],key,seen)}}function foldValue(input,value,key,seen){var hash=fold(fold(fold(input,key),toString(value)),typeof value==="undefined"?"undefined":_typeof(value));if(value===null){return fold(hash,"null")}if(value===undefined){return fold(hash,"undefined")}if((typeof value==="undefined"?"undefined":_typeof(value))==="object"){if(key==="vis"&&value.constructor.name==="Vis"){return hash}if(seen.indexOf(value)!==-1){return fold(hash,"[Circular]"+key)}seen.push(value);return foldObject(hash,value,seen)}return fold(hash,value.toString())}function toString(o){return Object.prototype.toString.call(o)}function sum(o){return pad(foldValue(0,o,"",[]).toString(16),8)}var calculateObjectHash=exports.calculateObjectHash=sum},function(module,exports){module.exports="\x3c!-- vis type specific options --\x3e\n<gauge-options></gauge-options>\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Markdown=exports.markdownFactory=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _markdownIt=__webpack_require__(101);var _markdownIt2=_interopRequireDefault(_markdownIt);var _lodash=__webpack_require__(0);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var markdownFactory=exports.markdownFactory=(0,_lodash.memoize)(function(){var whiteListedRules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var markdownIt=void 0;if(whiteListedRules&&whiteListedRules.length>0){markdownIt=new _markdownIt2.default("zero",{html:false,linkify:true});markdownIt.enable(whiteListedRules)}else{markdownIt=new _markdownIt2.default({html:false,linkify:true})}if(openLinksInNewTab){var originalLinkRender=markdownIt.renderer.rules.link_open||function(tokens,idx,options,env,self){return self.renderToken(tokens,idx,options)};markdownIt.renderer.rules.link_open=function(tokens,idx,options,env,self){var href=tokens[idx].attrGet("href");var target="_blank";var rel=(0,_eui.getSecureRelForTarget)({href:href,target:target});tokens[idx].attrPush(["target",target]);tokens[idx].attrPush(["rel",rel]);return originalLinkRender(tokens,idx,options,env,self)}}return function(markdown){return markdown?markdownIt.render(markdown):""}},function(){var whiteListedRules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var openLinksInNewTab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return whiteListedRules.join("_").concat(openLinksInNewTab)});var Markdown=exports.Markdown=function(_PureComponent){_inherits(Markdown,_PureComponent);function Markdown(){_classCallCheck(this,Markdown);return _possibleConstructorReturn(this,(Markdown.__proto__||Object.getPrototypeOf(Markdown)).apply(this,arguments))}_createClass(Markdown,[{key:"render",value:function render(){var _props=this.props,className=_props.className,markdown=_props.markdown,openLinksInNewTab=_props.openLinksInNewTab,whiteListedRules=_props.whiteListedRules,rest=_objectWithoutProperties(_props,["className","markdown","openLinksInNewTab","whiteListedRules"]);var classes=(0,_classnames2.default)("kbnMarkdown__body",className);var markdownRenderer=markdownFactory(whiteListedRules,openLinksInNewTab);var renderedMarkdown=markdownRenderer(markdown);return _react2.default.createElement("div",_extends({},rest,{className:classes,dangerouslySetInnerHTML:{__html:renderedMarkdown}}))}}]);return Markdown}(_react.PureComponent);Markdown.propTypes={className:_propTypes2.default.string,markdown:_propTypes2.default.string,openLinksInNewTab:_propTypes2.default.bool,whiteListedRules:_propTypes2.default.arrayOf(_propTypes2.default.string)}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _rxjs=__webpack_require__(32);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(38);var _vis_editor_visualization=__webpack_require__(946);var _vis_editor_visualization2=_interopRequireDefault(_vis_editor_visualization);var _visualization=__webpack_require__(973);var _visualization2=_interopRequireDefault(_visualization);var _vis_picker=__webpack_require__(1014);var _vis_picker2=_interopRequireDefault(_vis_picker);var _panel_config=__webpack_require__(1015);var _panel_config2=_interopRequireDefault(_panel_config);var _create_brush_handler=__webpack_require__(1074);var _create_brush_handler2=_interopRequireDefault(_create_brush_handler);var _lodash=__webpack_require__(0);var _extract_index_patterns=__webpack_require__(1075);var _fetch_fields=__webpack_require__(1076);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VisEditor=function(_Component){_inherits(VisEditor,_Component);function VisEditor(props){var _this2=this;_classCallCheck(this,VisEditor);var _this=_possibleConstructorReturn(this,(VisEditor.__proto__||Object.getPrototypeOf(VisEditor)).call(this,props));_this.fetchIndexPatternFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var params,visFields,indexPatterns,fields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=_this.props.vis.params;visFields=_this.state.visFields;indexPatterns=(0,_extract_index_patterns.extractIndexPatterns)(params,visFields);_context.next=5;return(0,_fetch_fields.fetchFields)(indexPatterns);case 5:fields=_context.sent;_this.setState(function(previousState){return{visFields:_extends({},previousState.visFields,fields)}});case 7:case"end":return _context.stop()}}},_callee,_this2)}));_this.setDefaultIndexPattern=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var savedObjectsClient,indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:savedObjectsClient=_chrome2.default.getSavedObjectsClient();_context2.next=3;return savedObjectsClient.get("index-pattern",_this.getConfig("defaultIndex"));case 3:indexPattern=_context2.sent;_this.handleChange({default_index_pattern:indexPattern.attributes.title});case 5:case"end":return _context2.stop()}}},_callee2,_this2)}));_this.handleChange=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(partialModel){var nextModel;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:nextModel=_extends({},_this.state.model,partialModel);_this.props.vis.params=nextModel;if(_this.state.autoApply){_this.props.vis.updateState()}_this.setState({model:nextModel,dirty:!_this.state.autoApply});_this.fetchIndexPatternFields();case 5:case"end":return _context3.stop()}}},_callee3,_this2)}));return function(_x){return _ref3.apply(this,arguments)}}();_this.handleCommit=function(){_this.props.vis.updateState();_this.setState({dirty:false})};_this.handleAutoApplyToggle=function(event){_this.setState({autoApply:event.target.checked})};_this.onDataChange=function(data){_this.visDataSubject.next(data)};var vis=props.vis;_this.appState=vis.API.getAppState();var reversed=(0,_lodash.get)(_this.appState,"options.darkTheme",false);_this.state={model:props.vis.params,dirty:false,autoApply:true,reversed:reversed,visFields:{}};_this.onBrush=(0,_create_brush_handler2.default)(props.vis.API.timeFilter);_this.handleUiState=_this.handleUiState.bind(_this,props.vis);_this.handleAppStateChange=_this.handleAppStateChange.bind(_this);_this.getConfig=_this.getConfig.bind(_this);_this.visDataSubject=new Rx.Subject;_this.visData$=_this.visDataSubject.asObservable().pipe((0,_operators.share)());return _this}_createClass(VisEditor,[{key:"getConfig",value:function getConfig(){var _props$config;return(_props$config=this.props.config).get.apply(_props$config,arguments)}},{key:"handleUiState",value:function handleUiState(vis){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}vis.uiStateVal.apply(vis,args)}},{key:"componentWillMount",value:function componentWillMount(){if(this.appState){this.appState.on("save_with_changes",this.handleAppStateChange)}}},{key:"handleAppStateChange",value:function handleAppStateChange(){var reversed=(0,_lodash.get)(this.appState,"options.darkTheme",false);this.setState({reversed:reversed})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.appState){this.appState.off("save_with_changes",this.handleAppStateChange)}}},{key:"render",value:function render(){if(!this.props.isEditorMode){if(!this.props.vis.params||!this.props.visData){return null}var reversed=this.state.reversed;return _react2.default.createElement(_visualization2.default,{dateFormat:this.props.config.get("dateFormat"),reversed:reversed,onBrush:this.onBrush,onUiState:this.handleUiState,uiState:this.props.vis.getUiState(),fields:this.state.visFields,model:this.props.vis.params,visData:this.props.visData,getConfig:this.getConfig})}var model=this.state.model;if(model){return _react2.default.createElement("div",{className:"tvbEditor"},_react2.default.createElement("div",{className:"tvbEditor--hideForReporting"},_react2.default.createElement(_vis_picker2.default,{model:model,onChange:this.handleChange})),_react2.default.createElement(_vis_editor_visualization2.default,{dirty:this.state.dirty,autoApply:this.state.autoApply,model:model,appState:this.appState,savedObj:this.props.savedObj,timeRange:this.props.timeRange,onUiState:this.handleUiState,uiState:this.props.vis.getUiState(),onBrush:this.onBrush,onCommit:this.handleCommit,onToggleAutoApply:this.handleAutoApplyToggle,onChange:this.handleChange,title:this.props.vis.title,description:this.props.vis.description,dateFormat:this.props.config.get("dateFormat"),onDataChange:this.onDataChange}),_react2.default.createElement("div",{className:"tvbEditor--hideForReporting"},_react2.default.createElement(_panel_config2.default,{fields:this.state.visFields,model:model,visData$:this.visData$,dateFormat:this.props.config.get("dateFormat"),onChange:this.handleChange,getConfig:this.getConfig})))}return null}},{key:"componentDidMount",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.setDefaultIndexPattern();case 2:_context4.next=4;return this.fetchIndexPatternFields();case 4:this.props.renderComplete();case 5:case"end":return _context4.stop()}}},_callee4,this)}));function componentDidMount(){return _ref4.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return VisEditor}(_react.Component);VisEditor.defaultProps={visData:{}};VisEditor.propTypes={vis:_propTypes2.default.object,visData:_propTypes2.default.object,renderComplete:_propTypes2.default.func,config:_propTypes2.default.object,isEditorMode:_propTypes2.default.bool,savedObj:_propTypes2.default.object,timeRange:_propTypes2.default.object};exports.default=VisEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewRegistry=exports.viewRegistry=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _events=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var InspectorViewRegistry=function(_super){tslib_1.__extends(InspectorViewRegistry,_super);function InspectorViewRegistry(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.views=[];return _this}InspectorViewRegistry.prototype.register=function(view){if(!view){return}this.views.push(view);this.views.sort(function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)});this.emit("change")};InspectorViewRegistry.prototype.getAll=function(){return this.views};InspectorViewRegistry.prototype.getVisible=function(adapters){if(!adapters){return[]}return this.views.filter(function(view){return!view.shouldShow||view.shouldShow(adapters)})};return InspectorViewRegistry}(_events.EventEmitter);var viewRegistry=new InspectorViewRegistry;exports.viewRegistry=viewRegistry;exports.InspectorViewRegistry=InspectorViewRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var neverCalled=Symbol();function memoizeLast(func){var prevCall=neverCalled;var memoizedFunction=function memoizedFunction(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(prevCall!==neverCalled&&prevCall.this===this&&prevCall.args.length===args.length&&prevCall.args.every(function(arg,index){return arg===args[index]})){return prevCall.returnValue}prevCall={args:args,this:this,returnValue:func.apply(this,args)};return prevCall.returnValue};return memoizedFunction}exports.memoizeLast=memoizeLast},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _resize_checker=__webpack_require__(958);Object.defineProperty(exports,"ResizeChecker",{enumerable:true,get:function get(){return _resize_checker.ResizeChecker}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchError=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ElasticsearchError=exports.ElasticsearchError=function(){function ElasticsearchError(error){_classCallCheck(this,ElasticsearchError);this.error=error;this.getRootCauses=this.getRootCauses.bind(this);this.hasRootCause=this.hasRootCause.bind(this);if(!this.getRootCauses().length){throw new Error("ElasticsearchError must be instantiated with an elasticsearch error, i.e. it must have"+("a resp.error.root_cause property. Instead got "+JSON.stringify(error)))}}_createClass(ElasticsearchError,[{key:"getRootCauses",value:function getRootCauses(){var rootCauses=_lodash2.default.get(this.error,"resp.error.root_cause");return _lodash2.default.pluck(rootCauses,"reason")}},{key:"hasRootCause",value:function hasRootCause(cause){var normalizedCause=cause.toLowerCase();var rootCauses=this.getRootCauses();var matchingCauses=rootCauses.filter(function(rootCause){var normalizedRootCause=rootCause.toLowerCase();return normalizedRootCause.indexOf(normalizedCause)!==-1});return matchingCauses.length!==0}}],[{key:"hasRootCause",value:function hasRootCause(error,cause){try{var esError=new ElasticsearchError(error);return esError.hasRootCause(cause)}catch(err){return false}}}]);return ElasticsearchError}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _formatted_data=__webpack_require__(965);Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _formatted_data.FormattedData}});var _data_adapter=__webpack_require__(966);Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data_adapter.DataAdapter}})},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.durationInputOptions=exports.durationOutputOptions=undefined;var _i18n=__webpack_require__(8);var durationOutputOptions=exports.durationOutputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.millisecondsLabel",{defaultMessage:"milliseconds"}),value:"ms"},{label:_i18n.i18n.translate("tsvb.durationOptions.secondsLabel",{defaultMessage:"seconds"}),value:"s"},{label:_i18n.i18n.translate("tsvb.durationOptions.minutesLabel",{defaultMessage:"minutes"}),value:"m"},{label:_i18n.i18n.translate("tsvb.durationOptions.hoursLabel",{defaultMessage:"hours"}),value:"h"},{label:_i18n.i18n.translate("tsvb.durationOptions.daysLabel",{defaultMessage:"days"}),value:"d"},{label:_i18n.i18n.translate("tsvb.durationOptions.weeksLabel",{defaultMessage:"weeks"}),value:"w"},{label:_i18n.i18n.translate("tsvb.durationOptions.monthsLabel",{defaultMessage:"months"}),value:"M"},{label:_i18n.i18n.translate("tsvb.durationOptions.yearsLabel",{defaultMessage:"years"}),value:"Y"}];var durationInputOptions=exports.durationInputOptions=[{label:_i18n.i18n.translate("tsvb.durationOptions.picosecondsLabel",{defaultMessage:"picoseconds"}),value:"ps"},{label:_i18n.i18n.translate("tsvb.durationOptions.nanosecondsLabel",{defaultMessage:"nanoseconds"}),value:"ns"},{label:_i18n.i18n.translate("tsvb.durationOptions.microsecondsLabel",{defaultMessage:"microseconds"}),value:"us"}].concat(durationOutputOptions)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=(0,_jquery2.default)({});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(props){return function(row){function tickFormatter(value){if(_lodash2.default.isFunction(props.tickFormatter))return props.tickFormatter(value);return value}var formatter=row.tickFormatter||tickFormatter;var value=formatter(props.seriesValues[row.id]);var classes=["tvbLegend__item"];var key=row.id;if(!_lodash2.default.includes(props.seriesFilter,row.id))classes.push("disabled");if(row.label==null||row.legend===false)return _react2.default.createElement("div",{key:key,style:{display:"none"}});return _react2.default.createElement("div",{key:key,className:classes.join(" "),"data-test-subj":"tsvbLegendItem"},_react2.default.createElement("button",{onClick:function onClick(event){return props.onToggle(event,row.id)},className:"tvbLegend__button"},_react2.default.createElement("div",{className:"tvbLegend__itemLabel",title:row.label+": "+value},_react2.default.createElement(_eui.EuiIcon,{type:"dot",color:row.color}),_react2.default.createElement("span",null,row.label)),_react2.default.createElement("div",{className:"tvbLegend__itemValue"},value)))}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();exports.visWithSplits=visWithSplits;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _get_display_name=__webpack_require__(1001);var _lodash=__webpack_require__(0);var _calculate_label=__webpack_require__(293);var _calculate_label2=_interopRequireDefault(_calculate_label);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function visWithSplits(WrappedComponent){function SplitVisComponent(props){var model=props.model,visData=props.visData;if(!model||!visData||!visData[model.id])return _react2.default.createElement(WrappedComponent,props);if(visData[model.id].series.every(function(s){return s.id.split(":").length===1})){return _react2.default.createElement(WrappedComponent,props)}var splitsVisData=visData[model.id].series.reduce(function(acc,series){var _series$id$split=series.id.split(":"),_series$id$split2=_slicedToArray(_series$id$split,2),seriesId=_series$id$split2[0],splitId=_series$id$split2[1];var seriesModel=model.series.find(function(s){return s.id===seriesId});if(!seriesModel||!splitId)return acc;var metric=(0,_lodash.last)(seriesModel.metrics);var label=(0,_calculate_label2.default)(metric,seriesModel.metrics);if(!acc[splitId])acc[splitId]={series:[],label:series.label};acc[splitId].series.push(_extends({},series,{id:seriesId,color:series.color||seriesModel.color,label:seriesModel.label||label}));return acc},{});var nonSplitSeries=(0,_lodash.first)(visData[model.id].series.filter(function(series){var seriesModel=model.series.find(function(s){return s.id===series.id});if(!seriesModel)return false;return["everything","filter"].includes(seriesModel.split_mode)}));var indexOfNonSplit=nonSplitSeries?(0,_lodash.findIndex)(model.series,function(s){return s.id===nonSplitSeries.id}):null;var rows=Object.keys(splitsVisData).map(function(key){var splitData=splitsVisData[key];var series=splitData.series,label=splitData.label;var newSeries=indexOfNonSplit!=null&&indexOfNonSplit>0?[].concat(_toConsumableArray(series),[nonSplitSeries]):[nonSplitSeries].concat(_toConsumableArray(series));var newVisData=_defineProperty({},model.id,{id:model.id,series:newSeries||series});return _react2.default.createElement("div",{key:key,className:"tvbSplitVis__split"},_react2.default.createElement(WrappedComponent,{model:model,visData:newVisData,onBrush:props.onBrush,additionalLabel:label,backgroundColor:props.backgroundColor,getConfig:props.getConfig}))});return _react2.default.createElement("div",{className:"tvbSplitVis"},rows)}SplitVisComponent.displayName="SplitVisComponent("+(0,_get_display_name.getDisplayName)(WrappedComponent)+")";return SplitVisComponent}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isBasicAgg=isBasicAgg;exports.createOptions=createOptions;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var lookup={count:_i18n.i18n.translate("tsvb.aggLookup.countLabel",{defaultMessage:"Count"}),calculation:_i18n.i18n.translate("tsvb.aggLookup.calculationLabel",{defaultMessage:"Calculation"}),std_deviation:_i18n.i18n.translate("tsvb.aggLookup.deviationLabel",{defaultMessage:"Std. Deviation"}),variance:_i18n.i18n.translate("tsvb.aggLookup.varianceLabel",{defaultMessage:"Variance"}),sum_of_squares:_i18n.i18n.translate("tsvb.aggLookup.sumOfSqLabel",{defaultMessage:"Sum of Sq."}),avg:_i18n.i18n.translate("tsvb.aggLookup.averageLabel",{defaultMessage:"Average"}),max:_i18n.i18n.translate("tsvb.aggLookup.maxLabel",{defaultMessage:"Max"}),min:_i18n.i18n.translate("tsvb.aggLookup.minLabel",{defaultMessage:"Min"}),sum:_i18n.i18n.translate("tsvb.aggLookup.sumLabel",{defaultMessage:"Sum"}),percentile:_i18n.i18n.translate("tsvb.aggLookup.percentileLabel",{defaultMessage:"Percentile"}),percentile_rank:_i18n.i18n.translate("tsvb.aggLookup.percentileRankLabel",{defaultMessage:"Percentile Rank"}),cardinality:_i18n.i18n.translate("tsvb.aggLookup.cardinalityLabel",{defaultMessage:"Cardinality"}),value_count:_i18n.i18n.translate("tsvb.aggLookup.valueCountLabel",{defaultMessage:"Value Count"}),derivative:_i18n.i18n.translate("tsvb.aggLookup.derivativeLabel",{defaultMessage:"Derivative"}),cumulative_sum:_i18n.i18n.translate("tsvb.aggLookup.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),moving_average:_i18n.i18n.translate("tsvb.aggLookup.movingAverageLabel",{defaultMessage:"Moving Average"}),avg_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallAverageLabel",{defaultMessage:"Overall Average"}),min_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMinLabel",{defaultMessage:"Overall Min"}),max_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallMaxLabel",{defaultMessage:"Overall Max"}),sum_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumLabel",{defaultMessage:"Overall Sum"}),variance_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallVarianceLabel",{defaultMessage:"Overall Variance"}),sum_of_squares_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallSumOfSqLabel",{defaultMessage:"Overall Sum of Sq."}),std_deviation_bucket:_i18n.i18n.translate("tsvb.aggLookup.overallStdDeviationLabel",{defaultMessage:"Overall Std. Deviation"}),series_agg:_i18n.i18n.translate("tsvb.aggLookup.seriesAggLabel",{defaultMessage:"Series Agg"}),math:_i18n.i18n.translate("tsvb.aggLookup.mathLabel",{defaultMessage:"Math"}),serial_diff:_i18n.i18n.translate("tsvb.aggLookup.serialDifferenceLabel",{defaultMessage:"Serial Difference"}),filter_ratio:_i18n.i18n.translate("tsvb.aggLookup.filterRatioLabel",{defaultMessage:"Filter Ratio"}),positive_only:_i18n.i18n.translate("tsvb.aggLookup.positiveOnlyLabel",{defaultMessage:"Positive Only"}),static:_i18n.i18n.translate("tsvb.aggLookup.staticValueLabel",{defaultMessage:"Static Value"}),top_hit:_i18n.i18n.translate("tsvb.aggLookup.topHitLabel",{defaultMessage:"Top Hit"})};var pipeline=["calculation","derivative","cumulative_sum","moving_average","avg_bucket","min_bucket","max_bucket","sum_bucket","variance_bucket","sum_of_squares_bucket","std_deviation_bucket","series_agg","math","serial_diff","positive_only"];var byType={_all:lookup,pipeline:pipeline,basic:_lodash2.default.omit(lookup,pipeline),metrics:_lodash2.default.pick(lookup,["count","avg","min","max","sum","cardinality","value_count"])};function isBasicAgg(item){return _lodash2.default.includes(Object.keys(byType.basic),item.type)}function createOptions(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"_all";var siblings=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var aggs=byType[type];if(!aggs)aggs=byType._all;var enablePipelines=siblings.some(isBasicAgg);if(siblings.length<=1)enablePipelines=false;return(0,_lodash2.default)(aggs).map(function(label,value){var disabled=_lodash2.default.includes(pipeline,value)?!enablePipelines:false;return{label:disabled?_i18n.i18n.translate("tsvb.aggLookup.addPipelineAggDescription",{defaultMessage:'{label} (use the "+" button to add this pipeline agg)',values:{label:label}}):label,value:value,disabled:disabled}}).value()}exports.default=lookup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"];module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(series,model){var dateFormat=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"lll";var getConfig=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var variables={};model.series.forEach(function(seriesModel){series.filter(function(row){return _lodash2.default.startsWith(row.id,seriesModel.id)}).forEach(function(row){var varName=[_lodash2.default.snakeCase(row.label),_lodash2.default.snakeCase(seriesModel.var_name)].filter(function(v){return v}).join(".");var formatter=(0,_tick_formatter2.default)(seriesModel.formatter,seriesModel.value_template,getConfig);var lastValue=(0,_get_last_value2.default)(row.data);var data={last:{raw:lastValue,formatted:formatter(lastValue)},data:{raw:row.data,formatted:row.data.map(function(point){return[(0,_moment2.default)(point[0]).format(dateFormat),formatter(point[1])]})}};_lodash2.default.set(variables,varName,data);_lodash2.default.set(variables,_lodash2.default.snakeCase(row.label)+".label",row.label)})});return variables};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ErrorComponent(props){var error=props.error;var additionalInfo=void 0;var type=_lodash2.default.get(error,"error.caused_by.type");var reason=_lodash2.default.get(error,"error.caused_by.reason");var title=_lodash2.default.get(error,"error.caused_by.title");if(!reason){reason=_lodash2.default.get(error,"message")}if(type==="script_exception"){var scriptStack=_lodash2.default.get(error,"error.caused_by.script_stack");reason=_lodash2.default.get(error,"error.caused_by.caused_by.reason");additionalInfo=_react2.default.createElement("div",{className:"tvbError__additional"},_react2.default.createElement("div",{className:"tvbError__reason"},reason),_react2.default.createElement("div",{className:"tvbError__stack"},scriptStack.join("\n")))}else if(reason){additionalInfo=_react2.default.createElement("div",{className:"tvbError__additional"},_react2.default.createElement("div",{className:"tvbError__reason"},reason))}return _react2.default.createElement("div",{className:"tvbError"},_react2.default.createElement("div",{className:"tvbError__title"},title||_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.error.requestForPanelFailedErrorMessage",defaultMessage:"The request for this panel failed"})),additionalInfo)}ErrorComponent.propTypes={error:_propTypes2.default.object};exports.default=ErrorComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectIE=detectIE;function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)}var trident=ua.indexOf("Trident/");if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _detect_ie=__webpack_require__(441);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}exports.default=function(handleChange){return function(name,defaultValue){return function(e){if(!(0,_detect_ie.detectIE)()||e.keyCode===13)e.preventDefault();var value=Number(_lodash2.default.get(e,"target.value",defaultValue));if(_lodash2.default.isFunction(handleChange)){return handleChange(_defineProperty({},name,value))}}}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _collection_actions=__webpack_require__(65);var collectionActions=_interopRequireWildcard(_collection_actions);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CalculationVarsUi=function(_Component){_inherits(CalculationVarsUi,_Component);function CalculationVarsUi(props){_classCallCheck(this,CalculationVarsUi);var _this=_possibleConstructorReturn(this,(CalculationVarsUi.__proto__||Object.getPrototypeOf(CalculationVarsUi)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(CalculationVarsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var handleAdd=collectionActions.handleAdd.bind(null,this.props);var handleDelete=collectionActions.handleDelete.bind(null,this.props,row);var intl=this.props.intl;return _react2.default.createElement(_eui.EuiFlexItem,{key:row.id,"data-test-subj":"varRow"},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{className:"tvbAggs__varName","aria-label":intl.formatMessage({id:"tsvb.vars.variableNameAriaLabel",defaultMessage:"Variable name"}),placeholder:intl.formatMessage({id:"tsvb.vars.variableNamePlaceholder",defaultMessage:"Variable name"}),onChange:this.handleChange(row,"name"),value:row.name})),_react2.default.createElement(_eui.EuiFlexItem,{className:"tvbAggs__varMetricWrapper"},_react2.default.createElement(_metric_select2.default,{onChange:this.handleChange(row,"field"),metrics:this.props.metrics,metric:this.props.model,value:row.field,includeSiblings:this.props.includeSiblings})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return CalculationVarsUi}(_react.Component);CalculationVarsUi.defaultProps={name:"variables",includeSiblings:false};CalculationVarsUi.propTypes={metrics:_propTypes2.default.array,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func,includeSiblings:_propTypes2.default.bool};var CalculationVars=(0,_react3.injectI18n)(CalculationVarsUi);exports.default=CalculationVars;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2151)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapToLayerWithId=mapToLayerWithId;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _origin=__webpack_require__(87);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapToLayerWithId(prefix,layer){var clonedLayer=_lodash2.default.cloneDeep(layer);clonedLayer.layerId=prefix+"."+layer.name;clonedLayer.isEMS=_origin.ORIGIN.EMS===prefix?true:false;return clonedLayer}},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _wms_options=__webpack_require__(1080);var _wms_options2=_interopRequireDefault(_wms_options);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("wmsOptions",function(serviceSettings,i18n){return{restrict:"E",template:_wms_options2.default,replace:true,scope:{options:"=",collections:"="},link:function link($scope){$scope.wmsLinkText=i18n("tileMap.wmsOptions.wmsLinkText",{defaultMessage:"here"});new Promise(function(resolve,reject){serviceSettings.getTMSServices().then(function(allTMSServices){var newBaseLayers=$scope.collections.tmsLayers.slice();var _loop=function _loop(i){var layerFromService=allTMSServices[i];var alreadyAdded=newBaseLayers.some(function(layer){return layerFromService.id===layer.id});if(!alreadyAdded){newBaseLayers.push(layerFromService)}};for(var i=0;i<allTMSServices.length;i+=1){_loop(i)}$scope.collections.tmsLayers=newBaseLayers;if(!$scope.options.selectedTmsLayer&&$scope.collections.tmsLayers.length){$scope.options.selectedTmsLayer=$scope.collections.tmsLayers[0]}resolve(true)}).catch(function(e){reject(e)})})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.BaseMapsVisualizationProvider=BaseMapsVisualizationProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _kibana_map=__webpack_require__(448);var _rxjs=__webpack_require__(32);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(38);__webpack_require__(449);var _notify=__webpack_require__(10);var _modules=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var WMS_MINZOOM=0;var WMS_MAXZOOM=22;var emsServiceSettings=new Promise(function(resolve){_modules.uiModules.get("kibana").run(function($injector){var serviceSttings=$injector.get("serviceSettings");resolve(serviceSttings)})});function BaseMapsVisualizationProvider(serviceSettings,i18n){return function(){function BaseMapsVisualization(element,vis){_classCallCheck(this,BaseMapsVisualization);this.vis=vis;this._container=element;this._kibanaMap=null;this._chartData=null;this._baseLayerDirty=true;this._mapIsLoaded=this._makeKibanaMap()}_createClass(BaseMapsVisualization,[{key:"isLoaded",value:function isLoaded(){return this._mapIsLoaded}},{key:"destroy",value:function destroy(){if(this._kibanaMap){this._kibanaMap.destroy();this._kibanaMap=null}}},{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._kibanaMap){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return this._mapIsLoaded;case 4:if(status.resize){this._kibanaMap.resize()}if(!(status.params||status.aggs)){_context.next=8;break}_context.next=8;return this._updateParams();case 8:if(!this._hasESResponseChanged(esResponse)){_context.next=11;break}_context.next=11;return this._updateData(esResponse);case 11:if(status.uiState){this._kibanaMap.useUiStateFromVisualization(this.vis)}_context.next=14;return this._whenBaseLayerIsLoaded();case 14:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"_makeKibanaMap",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this=this;var options,uiState,zoomFromUiState,centerFromUIState;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options={};uiState=this.vis.getUiState();zoomFromUiState=parseInt(uiState.get("mapZoom"));centerFromUIState=uiState.get("mapCenter");options.zoom=!isNaN(zoomFromUiState)?zoomFromUiState:this.vis.params.mapZoom;options.center=centerFromUIState?centerFromUIState:this.vis.params.mapCenter;this._kibanaMap=new _kibana_map.KibanaMap(this._container,options);this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM);this._kibanaMap.addLegendControl();this._kibanaMap.addFitControl();this._kibanaMap.persistUiStateForVisualization(this.vis);this._kibanaMap.on("baseLayer:loaded",function(){_this._baseLayerDirty=false});this._kibanaMap.on("baseLayer:loading",function(){_this._baseLayerDirty=true});_context2.next=16;return this._updateBaseLayer();case 16:case"end":return _context2.stop()}}},_callee2,this)}));function _makeKibanaMap(){return _ref2.apply(this,arguments)}return _makeKibanaMap}()},{key:"_tmsConfigured",value:function _tmsConfigured(){var _getMapsParams2=this._getMapsParams(),wms=_getMapsParams2.wms;var hasTmsBaseLayer=!!wms.selectedTmsLayer;return hasTmsBaseLayer}},{key:"_wmsConfigured",value:function _wmsConfigured(){var _getMapsParams3=this._getMapsParams(),wms=_getMapsParams3.wms;var hasWmsBaseLayer=!!wms.enabled;return hasWmsBaseLayer}},{key:"_updateBaseLayer",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var DEFAULT_EMS_BASEMAP,mapParams,tmsServices,userConfiguredTmsLayer,initBasemapLayer,selectedTmsLayer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:DEFAULT_EMS_BASEMAP="road_map";if(this._kibanaMap){_context3.next=3;break}return _context3.abrupt("return");case 3:mapParams=this._getMapsParams();if(this._tmsConfigured()){_context3.next=19;break}_context3.prev=5;_context3.next=8;return serviceSettings.getTMSServices();case 8:tmsServices=_context3.sent;userConfiguredTmsLayer=tmsServices[0];initBasemapLayer=userConfiguredTmsLayer?userConfiguredTmsLayer:tmsServices.find(function(s){return s.id===DEFAULT_EMS_BASEMAP});if(initBasemapLayer){this._setTmsLayer(initBasemapLayer)}_context3.next=18;break;case 14:_context3.prev=14;_context3.t0=_context3["catch"](5);_notify.toastNotifications.addWarning(_context3.t0.message);return _context3.abrupt("return");case 18:return _context3.abrupt("return");case 19:try{if(this._wmsConfigured()){if(WMS_MINZOOM>this._kibanaMap.getMaxZoomLevel()){this._kibanaMap.setMinZoom(WMS_MINZOOM);this._kibanaMap.setMaxZoom(WMS_MAXZOOM)}this._kibanaMap.setBaseLayer({baseLayerType:"wms",options:_extends({minZoom:WMS_MINZOOM,maxZoom:WMS_MAXZOOM,url:mapParams.wms.url},mapParams.wms.options)})}else if(this._tmsConfigured()){selectedTmsLayer=mapParams.wms.selectedTmsLayer;this._setTmsLayer(selectedTmsLayer)}}catch(tmsLoadingError){_notify.toastNotifications.addWarning(tmsLoadingError.message)}case 20:case"end":return _context3.stop()}}},_callee3,this,[[5,14]])}));function _updateBaseLayer(){return _ref3.apply(this,arguments)}return _updateBaseLayer}()},{key:"_setTmsLayer",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(tmsLayer){var url,showZoomMessage,options;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this._kibanaMap.setMinZoom(tmsLayer.minZoom);this._kibanaMap.setMaxZoom(tmsLayer.maxZoom);if(this._kibanaMap.getZoomLevel()>tmsLayer.maxZoom){this._kibanaMap.setZoomLevel(tmsLayer.maxZoom)}_context4.next=5;return emsServiceSettings;case 5:_context4.t0=tmsLayer;_context4.next=8;return _context4.sent.getUrlTemplateForTMSLayer(_context4.t0);case 8:url=_context4.sent;showZoomMessage=serviceSettings.shouldShowZoomMessage(tmsLayer);options=_lodash2.default.cloneDeep(tmsLayer);delete options.id;delete options.url;this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:_extends({url:url,showZoomMessage:showZoomMessage},options)});case 14:case"end":return _context4.stop()}}},_callee4,this)}));function _setTmsLayer(_x3){return _ref4.apply(this,arguments)}return _setTmsLayer}()},{key:"_updateData",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:throw new Error(i18n("tileMap.baseMapsVisualization.childShouldImplementMethodErrorMessage",{defaultMessage:"Child should implement this method to respond to data-update"}));case 1:case"end":return _context5.stop()}}},_callee5,this)}));function _updateData(){return _ref5.apply(this,arguments)}return _updateData}()},{key:"_hasESResponseChanged",value:function _hasESResponseChanged(data){return this._chartData!==data}},{key:"_updateParams",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var mapParams;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:mapParams=this._getMapsParams();_context6.next=3;return this._updateBaseLayer();case 3:this._kibanaMap.setLegendPosition(mapParams.legendPosition);this._kibanaMap.setShowTooltip(mapParams.addTooltip);this._kibanaMap.useUiStateFromVisualization(this.vis);case 6:case"end":return _context6.stop()}}},_callee6,this)}));function _updateParams(){return _ref6.apply(this,arguments)}return _updateParams}()},{key:"_getMapsParams",value:function _getMapsParams(){return _lodash2.default.assign({},this.vis.type.visConfig.defaults,{type:this.vis.type.name},this.vis.params)}},{key:"_whenBaseLayerIsLoaded",value:function _whenBaseLayerIsLoaded(){var _this2=this;if(!this._tmsConfigured()){return true}var maxTimeForBaseLayer=1e4;var interval$=Rx.interval(10).pipe((0,_operators.filter)(function(){return!_this2._baseLayerDirty}));var timer$=Rx.timer(maxTimeForBaseLayer);return Rx.race(interval$,timer$).pipe((0,_operators.first)()).toPromise()}}]);return BaseMapsVisualization}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaMap=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _events=__webpack_require__(44);var _map_messages=__webpack_require__(1082);var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _zoom_to_precision=__webpack_require__(1083);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function makeFitControl(fitContainer,kibanaMap){var FitControl=_leaflet2.default.Control.extend({options:{position:"topleft"},initialize:function initialize(fitContainer,kibanaMap){this._fitContainer=fitContainer;this._kibanaMap=kibanaMap;this._leafletMap=null},onAdd:function onAdd(leafletMap){var _this=this;this._leafletMap=leafletMap;var fitDatBoundsLabel=_i18n.i18n.translate("common.ui.vis.kibanaMap.leaflet.fitDataBoundsAriaLabel",{defaultMessage:"Fit Data Bounds"});(0,_jquery2.default)(this._fitContainer).html('<a class="kuiIcon fa-crop" href="#" title="'+fitDatBoundsLabel+'" aria-label="'+fitDatBoundsLabel+'"></a>').on("click",function(e){e.preventDefault();_this._kibanaMap.fitToData()});return this._fitContainer},onRemove:function onRemove(){(0,_jquery2.default)(this._fitContainer).off("click")}});return new FitControl(fitContainer,kibanaMap)}function makeLegendControl(container,kibanaMap,position){var LegendControl=_leaflet2.default.Control.extend({options:{position:"topright"},initialize:function initialize(container,kibanaMap,position){this._legendContainer=container;this._kibanaMap=kibanaMap;this.options.position=position},updateContents:function updateContents(){this._legendContainer.empty();var $div=(0,_jquery2.default)("<div>").addClass("visMapLegend");this._legendContainer.append($div);var layers=this._kibanaMap.getLayers();layers.forEach(function(layer){return layer.appendLegendContents($div)})},onAdd:function onAdd(){var _this2=this;this._layerUpdateHandle=function(){return _this2.updateContents()};this._kibanaMap.on("layers:update",this._layerUpdateHandle);this.updateContents();return this._legendContainer.get(0)},onRemove:function onRemove(){this._kibanaMap.removeListener("layers:update",this._layerUpdateHandle);this._legendContainer.empty()}});return new LegendControl(container,kibanaMap,position)}var KibanaMap=exports.KibanaMap=function(_EventEmitter){_inherits(KibanaMap,_EventEmitter);function KibanaMap(containerNode,options){_classCallCheck(this,KibanaMap);var _this3=_possibleConstructorReturn(this,(KibanaMap.__proto__||Object.getPrototypeOf(KibanaMap)).call(this));_this3.getZoomLevel=function(){return _this3._leafletMap.getZoom()};_this3.getMaxZoomLevel=function(){return _this3._leafletMap.getMaxZoom()};_this3._addMaxZoomMessage=function(layer){var zoomWarningMsg=(0,_map_messages.createZoomWarningMsg)(_this3.getZoomLevel,_this3.getMaxZoomLevel);_this3._leafletMap.on("zoomend",zoomWarningMsg);_this3._containerNode.setAttribute("data-test-subj","zoomWarningEnabled");layer.on("remove",function(){_this3._leafletMap.off("zoomend",zoomWarningMsg);_this3._containerNode.removeAttribute("data-test-subj")})};_this3._containerNode=containerNode;_this3._leafletBaseLayer=null;_this3._baseLayerSettings=null;_this3._baseLayerIsDesaturated=true;_this3._leafletDrawControl=null;_this3._leafletFitControl=null;_this3._leafletLegendControl=null;_this3._legendPosition="topright";_this3._layers=[];_this3._listeners=[];_this3._showTooltip=false;var leafletOptions={minZoom:options.minZoom,maxZoom:options.maxZoom,center:options.center?options.center:[0,0],zoom:options.zoom?options.zoom:2,renderer:_leaflet2.default.canvas(),zoomAnimation:false,zoomControl:options.zoomControl===undefined?true:options.zoomControl};_this3._leafletMap=_leaflet2.default.map(containerNode,leafletOptions);_this3._leafletMap.attributionControl.setPrefix("");if(!options.scrollWheelZoom){_this3._leafletMap.scrollWheelZoom.disable()}var previousZoom=_this3._leafletMap.getZoom();_this3._leafletMap.on("zoomend",function(){if(previousZoom!==_this3._leafletMap.getZoom()){previousZoom=_this3._leafletMap.getZoom();_this3.emit("zoomchange")}});_this3._leafletMap.on("zoomend",function(){return _this3.emit("zoomend")});_this3._leafletMap.on("dragend",function(){return _this3.emit("dragend")});_this3._leafletMap.on("zoomend",function(){return _this3._updateExtent()});_this3._leafletMap.on("dragend",function(){return _this3._updateExtent()});_this3._leafletMap.on("mousemove",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousemove",e)})});_this3._leafletMap.on("mouseout",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseout",e)})});_this3._leafletMap.on("mousedown",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mousedown",e)})});_this3._leafletMap.on("mouseup",function(e){return _this3._layers.forEach(function(layer){return layer.movePointer("mouseup",e)})});_this3._leafletMap.on("draw:created",function(event){var drawType=event.layerType;if(drawType==="rectangle"){var bounds=event.layer.getBounds();var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;if(southEastLng>180){southEastLng-=360}var northWestLng=northWest.lng;if(northWestLng<-180){northWestLng+=360}var southEastLat=southEast.lat;var northWestLat=northWest.lat;if(southEastLat===northWestLat||southEastLng===northWestLng){return}_this3.emit("drawCreated:rectangle",{bounds:{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}})}else if(drawType==="polygon"){var latLongs=event.layer.getLatLngs()[0];_this3.emit("drawCreated:polygon",{points:latLongs.map(function(leafletLatLng){return{lat:leafletLatLng.lat,lon:leafletLatLng.lng}})})}});_this3.resize();return _this3}_createClass(KibanaMap,[{key:"setShowTooltip",value:function setShowTooltip(showTooltip){this._showTooltip=showTooltip}},{key:"getLayers",value:function getLayers(){return this._layers.slice()}},{key:"addLayer",value:function addLayer(kibanaLayer){var _this4=this;var onshowTooltip=function onshowTooltip(event){if(!_this4._showTooltip){return}if(!_this4._popup){_this4._popup=_leaflet2.default.responsivePopup({autoPan:false});_this4._popup.setLatLng(event.position);_this4._popup.setContent(event.content);_this4._popup.openOn(_this4._leafletMap)}else{if(!_this4._popup.getLatLng().equals(event.position)){_this4._popup.setLatLng(event.position)}if(_this4._popup.getContent()!==event.content){_this4._popup.setContent(event.content)}}};kibanaLayer.on("showTooltip",onshowTooltip);this._listeners.push({name:"showTooltip",handle:onshowTooltip,layer:kibanaLayer});var onHideTooltip=function onHideTooltip(){_this4._leafletMap.closePopup();_this4._popup=null};kibanaLayer.on("hideTooltip",onHideTooltip);this._listeners.push({name:"hideTooltip",handle:onHideTooltip,layer:kibanaLayer});var onStyleChanged=function onStyleChanged(){if(_this4._leafletLegendControl){_this4._leafletLegendControl.updateContents()}};kibanaLayer.on("styleChanged",onStyleChanged);this._listeners.push({name:"styleChanged",handle:onStyleChanged,layer:kibanaLayer});this._layers.push(kibanaLayer);kibanaLayer.addToLeafletMap(this._leafletMap);this.emit("layers:update");this._addAttributions(kibanaLayer.getAttributions())}},{key:"removeLayer",value:function removeLayer(kibanaLayer){var _this5=this;if(!kibanaLayer){return}this._removeAttributions(kibanaLayer.getAttributions());var index=this._layers.indexOf(kibanaLayer);if(index>=0){this._layers.splice(index,1);kibanaLayer.removeFromLeafletMap(this._leafletMap)}this._listeners.forEach(function(listener){if(listener.layer===kibanaLayer){listener.layer.removeListener(listener.name,listener.handle)}});this._layers.forEach(function(layer){return _this5._addAttributions(layer.getAttributions())});if(this._baseLayerSettings){this._addAttributions(this._baseLayerSettings.options.attribution)}}},{key:"_addAttributions",value:function _addAttributions(attribution){var _this6=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this6._leafletMap.attributionControl.removeAttribution(attribution);_this6._leafletMap.attributionControl.addAttribution(attribution)})}},{key:"_removeAttributions",value:function _removeAttributions(attribution){var _this7=this;var attributions=getAttributionArray(attribution);attributions.forEach(function(attribution){_this7._leafletMap.attributionControl.removeAttribution(attribution)})}},{key:"destroy",value:function destroy(){if(this._leafletFitControl){this._leafletMap.removeControl(this._leafletFitControl)}if(this._leafletDrawControl){this._leafletMap.removeControl(this._leafletDrawControl)}if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}this.setBaseLayer(null);var layer=void 0;while(this._layers.length){layer=this._layers.pop();layer.removeFromLeafletMap(this._leafletMap)}this._leafletMap.remove();this._containerNode.innerHTML="";this._listeners.forEach(function(listener){return listener.layer.removeListener(listener.name,listener.handle)})}},{key:"getCenter",value:function getCenter(){var center=this._leafletMap.getCenter();return{lon:center.lng,lat:center.lat}}},{key:"setCenter",value:function setCenter(latitude,longitude){var latLong=_leaflet2.default.latLng(latitude,longitude);if(latLong.equals&&!latLong.equals(this._leafletMap.getCenter())){this._leafletMap.setView(latLong)}}},{key:"setZoomLevel",value:function setZoomLevel(zoomLevel){if(this._leafletMap.getZoom()!==zoomLevel){this._leafletMap.setZoom(zoomLevel)}}},{key:"getGeohashPrecision",value:function getGeohashPrecision(){return(0,_zoom_to_precision.zoomToPrecision)(this._leafletMap.getZoom(),12,this._leafletMap.getMaxZoom())}},{key:"getLeafletBounds",value:function getLeafletBounds(){return this._leafletMap.getBounds()}},{key:"getMetersPerPixel",value:function getMetersPerPixel(){var pointC=this._leafletMap.latLngToContainerPoint(this._leafletMap.getCenter());var pointX=[pointC.x+1,pointC.y];var pointY=[pointC.x,pointC.y+1];var latLngC=this._leafletMap.containerPointToLatLng(pointC);var latLngX=this._leafletMap.containerPointToLatLng(pointX);var latLngY=this._leafletMap.containerPointToLatLng(pointY);var distanceX=latLngC.distanceTo(latLngX);var distanceY=latLngC.distanceTo(latLngY);return _lodash2.default.min([distanceX,distanceY])}},{key:"_getLeafletBounds",value:function _getLeafletBounds(resizeOnFail){var boundsRaw=this._leafletMap.getBounds();var bounds=this._leafletMap.wrapLatLngBounds(boundsRaw);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();if(southEast.lng===northWest.lng||southEast.lat===northWest.lat){if(resizeOnFail){this._leafletMap.invalidateSize();return this._getLeafletBounds(false)}else{return null}}else{return bounds}}},{key:"getBounds",value:function getBounds(){var bounds=this._getLeafletBounds(true);if(!bounds){return null}var southEast=bounds.getSouthEast();var northWest=bounds.getNorthWest();var southEastLng=southEast.lng;var northWestLng=northWest.lng;var southEastLat=southEast.lat;var northWestLat=northWest.lat;return{bottom_right:{lat:southEastLat,lon:southEastLng},top_left:{lat:northWestLat,lon:northWestLng}}}},{key:"setDesaturateBaseLayer",value:function setDesaturateBaseLayer(isDesaturated){if(isDesaturated===this._baseLayerIsDesaturated){return}this._baseLayerIsDesaturated=isDesaturated;this._updateDesaturation();if(this._leafletBaseLayer){this._leafletBaseLayer.redraw()}}},{key:"addDrawControl",value:function addDrawControl(){var drawColor="#000";var drawOptions={draw:{polyline:false,marker:false,circle:false,rectangle:{shapeOptions:{stroke:false,color:drawColor}},polygon:{shapeOptions:{color:drawColor}}}};this._leafletDrawControl=new _leaflet2.default.Control.Draw(drawOptions);this._leafletMap.addControl(this._leafletDrawControl)}},{key:"addFitControl",value:function addFitControl(){if(this._leafletFitControl||!this._leafletMap){return}var fitContainer=_leaflet2.default.DomUtil.create("div","leaflet-control leaflet-bar leaflet-control-fit");this._leafletFitControl=makeFitControl(fitContainer,this);this._leafletMap.addControl(this._leafletFitControl)}},{key:"addLegendControl",value:function addLegendControl(){if(this._leafletLegendControl||!this._leafletMap){return}this._updateLegend()}},{key:"setLegendPosition",value:function setLegendPosition(position){if(this._legendPosition===position){if(!this._leafletLegendControl){this._updateLegend()}}else{this._legendPosition=position;this._updateLegend()}}},{key:"_updateLegend",value:function _updateLegend(){if(this._leafletLegendControl){this._leafletMap.removeControl(this._leafletLegendControl)}var $wrapper=(0,_jquery2.default)("<div>").addClass("visMapLegend__wrapper");this._leafletLegendControl=makeLegendControl($wrapper,this,this._legendPosition);this._leafletMap.addControl(this._leafletLegendControl)}},{key:"resize",value:function resize(){this._leafletMap.invalidateSize();this._updateExtent()}},{key:"setMinZoom",value:function setMinZoom(zoom){this._leafletMap.setMinZoom(zoom)}},{key:"setMaxZoom",value:function setMaxZoom(zoom){this._leafletMap.setMaxZoom(zoom)}},{key:"getLeafletBaseLayer",value:function getLeafletBaseLayer(){return this._leafletBaseLayer}},{key:"setBaseLayer",value:function setBaseLayer(settings){var _this8=this;if(_lodash2.default.isEqual(settings,this._baseLayerSettings)){return}if(settings===null){if(this._leafletBaseLayer&&this._leafletMap){this._removeAttributions(this._baseLayerSettings.options.attribution);this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null;this._baseLayerSettings=null}return}this._baseLayerSettings=settings;if(this._leafletBaseLayer){this._leafletMap.removeLayer(this._leafletBaseLayer);this._leafletBaseLayer=null}var baseLayer=void 0;if(settings.baseLayerType==="wms"){this._baseLayerSettings.options.attribution=_lodash2.default.escape(settings.options.attribution);baseLayer=this._getWMSBaseLayer(settings.options)}else if(settings.baseLayerType==="tms"){baseLayer=this._getTMSBaseLayer(settings.options)}if(baseLayer){baseLayer.on("tileload",function(){return _this8._updateDesaturation()});baseLayer.on("load",function(){_this8.emit("baseLayer:loaded")});baseLayer.on("loading",function(){_this8.emit("baseLayer:loading")});this._leafletBaseLayer=baseLayer;if(settings.options.showZoomMessage){baseLayer.on("add",function(){_this8._addMaxZoomMessage(baseLayer)})}this._leafletBaseLayer.addTo(this._leafletMap);this._leafletBaseLayer.bringToBack();if(settings.options.minZoom>this._leafletMap.getZoom()){this._leafletMap.setZoom(settings.options.minZoom)}this._addAttributions(settings.options.attribution);this.resize()}}},{key:"isInside",value:function isInside(bucketRectBounds){var mapBounds=this._leafletMap.getBounds();return mapBounds.intersects(bucketRectBounds)}},{key:"fitToData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this9=this;var boundsArray,bounds;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this._leafletMap){_context3.next=2;break}return _context3.abrupt("return");case 2:_context3.next=4;return Promise.all(this._layers.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(layer){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return layer.getBounds();case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee,_this9)}));return function(_x){return _ref2.apply(this,arguments)}}()));case 4:boundsArray=_context3.sent;bounds=null;boundsArray.forEach(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(b){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(bounds){bounds.extend(b)}else{bounds=b}case 1:case"end":return _context2.stop()}}},_callee2,_this9)}));return function(_x2){return _ref3.apply(this,arguments)}}());if(bounds&&bounds.isValid()){this._leafletMap.fitBounds(bounds)}case 8:case"end":return _context3.stop()}}},_callee3,this)}));function fitToData(){return _ref.apply(this,arguments)}return fitToData}()},{key:"_getTMSBaseLayer",value:function _getTMSBaseLayer(options){return _leaflet2.default.tileLayer(options.url,{minZoom:options.minZoom,maxZoom:options.maxZoom,subdomains:options.subdomains||[]})}},{key:"_getWMSBaseLayer",value:function _getWMSBaseLayer(options){var wmsOptions={format:options.format||"",layers:options.layers||"",minZoom:options.minZoom,maxZoom:options.maxZoom,styles:options.styles||"",transparent:options.transparent,version:options.version||"1.3.0"};return typeof options.url==="string"&&options.url.length?_leaflet2.default.tileLayer.wms(options.url,wmsOptions):null}},{key:"_updateExtent",value:function _updateExtent(){this._layers.forEach(function(layer){return layer.updateExtent()})}},{key:"_updateDesaturation",value:function _updateDesaturation(){var tiles=(0,_jquery2.default)("img.leaflet-tile-loaded");if(this._baseLayerIsDesaturated){tiles.removeClass("filters-off")}else if(!this._baseLayerIsDesaturated){tiles.addClass("filters-off")}}},{key:"persistUiStateForVisualization",value:function persistUiStateForVisualization(visualization){var _this10=this;function persistMapStateInUiState(){var uiState=visualization.getUiState();var centerFromUIState=uiState.get("mapCenter");var zoomFromUiState=parseInt(uiState.get("mapZoom"));if(isNaN(zoomFromUiState)||this.getZoomLevel()!==zoomFromUiState){visualization.uiStateVal("mapZoom",this.getZoomLevel())}var centerFromMap=this.getCenter();if(!centerFromUIState||centerFromMap.lon!==centerFromUIState[1]||centerFromMap.lat!==centerFromUIState[0]){visualization.uiStateVal("mapCenter",[centerFromMap.lat,centerFromMap.lon])}}this._leafletMap.on("resize",function(){visualization.sessionState.mapBounds=_this10.getBounds()});this._leafletMap.on("load",function(){visualization.sessionState.mapBounds=_this10.getBounds()});this.on("dragend",persistMapStateInUiState);this.on("zoomend",persistMapStateInUiState)}},{key:"useUiStateFromVisualization",value:function useUiStateFromVisualization(visualization){var uiState=visualization.getUiState();var zoomFromUiState=parseInt(uiState.get("mapZoom"));var centerFromUIState=uiState.get("mapCenter");if(!isNaN(zoomFromUiState)){this.setZoomLevel(zoomFromUiState)}if(centerFromUIState){this.setCenter(centerFromUIState[0],centerFromUIState[1])}}}]);return KibanaMap}(_events.EventEmitter);function getAttributionArray(attribution){var attributionString=attribution||"";var attributions=attributionString.split(/\s*\|\s*/);if(attributions.length===1){attributions=attributions[0].split(",")}return attributions}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _modules=__webpack_require__(3);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _markdownIt=__webpack_require__(101);var _markdownIt2=_interopRequireDefault(_markdownIt);var _origin=__webpack_require__(87);var _ems_client=__webpack_require__(1084);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var markdownIt=new _markdownIt2.default({html:false,linkify:true});var TMS_IN_YML_ID="TMS in config/kibana.yml";_modules.uiModules.get("kibana").service("serviceSettings",function($http,$sanitize,mapConfig,tilemapsConfig,kbnVersion){var attributionFromConfig=$sanitize(markdownIt.render(tilemapsConfig.deprecated.config.options.attribution||""));var tmsOptionsFromConfig=_lodash2.default.assign({},tilemapsConfig.deprecated.config.options,{attribution:attributionFromConfig});var ServiceSettings=function(){function ServiceSettings(){_classCallCheck(this,ServiceSettings);this._showZoomMessage=true;this._emsClient=new _ems_client.EMSClientV66({language:_i18n.i18n.getLocale(),kbnVersion:kbnVersion,manifestServiceUrl:mapConfig.manifestServiceUrl,htmlSanitizer:$sanitize,landingPageUrl:mapConfig.emsLandingPageUrl})}_createClass(ServiceSettings,[{key:"shouldShowZoomMessage",value:function shouldShowZoomMessage(_ref){var origin=_ref.origin;return origin===_origin.ORIGIN.EMS&&this._showZoomMessage}},{key:"disableZoomMessage",value:function disableZoomMessage(){this._showZoomMessage=false}},{key:"__debugStubManifestCalls",value:function __debugStubManifestCalls(manifestRetrieval){var _this=this;var oldGetManifest=this._emsClient._getManifest;this._emsClient._getManifest=manifestRetrieval;return{removeStub:function removeStub(){delete _this._emsClient._getManifest;if(_this._emsClient._getManifest!==oldGetManifest){_this._emsClient._getManifest=oldGetManifest}}}}},{key:"getFileLayers",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var fileLayers;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(mapConfig.includeElasticMapsService){_context.next=2;break}return _context.abrupt("return",[]);case 2:_context.next=4;return this._emsClient.getFileLayers();case 4:fileLayers=_context.sent;return _context.abrupt("return",fileLayers.map(function(fileLayer){var format=fileLayer.getDefaultFormatType();var meta=fileLayer.getDefaultFormatMeta();return{name:fileLayer.getDisplayName(),origin:fileLayer.getOrigin(),id:fileLayer.getId(),created_at:fileLayer.getCreatedAt(),attribution:fileLayer.getHTMLAttribution(),fields:fileLayer.getFieldsInLanguage(),format:format,meta:meta}}));case 6:case"end":return _context.stop()}}},_callee,this)}));function getFileLayers(){return _ref2.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var allServices,tmsService,servicesFromManifest,strippedServiceFromManifest;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:allServices=[];if(tilemapsConfig.deprecated.isOverridden){tmsService=_lodash2.default.cloneDeep(tmsOptionsFromConfig);tmsService.id=TMS_IN_YML_ID;tmsService.origin=_origin.ORIGIN.KIBANA_YML;allServices.push(tmsService)}if(!mapConfig.includeElasticMapsService){_context2.next=8;break}_context2.next=5;return this._emsClient.getTMSServices();case 5:servicesFromManifest=_context2.sent;strippedServiceFromManifest=servicesFromManifest.map(function(service){var shim={origin:service.getOrigin(),id:service.getId(),minZoom:service.getMinZoom(),maxZoom:service.getMaxZoom(),attribution:service.getHTMLAttribution()};return shim});allServices=allServices.concat(strippedServiceFromManifest);case 8:return _context2.abrupt("return",allServices);case 9:case"end":return _context2.stop()}}},_callee2,this)}));function getTMSServices(){return _ref3.apply(this,arguments)}return getTMSServices}()},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){this._emsClient.addQueryParams(additionalQueryParams)}},{key:"getEMSHotLink",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context3.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});return _context3.abrupt("return",layer?layer.getEMSHotLink():null);case 5:case"end":return _context3.stop()}}},_callee3,this)}));function getEMSHotLink(_x){return _ref4.apply(this,arguments)}return getEMSHotLink}()},{key:"_getUrlTemplateForEMSTMSLayer",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(tmsServiceConfig){var tmsServices,tmsService;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this._emsClient.getTMSServices();case 2:tmsServices=_context4.sent;tmsService=tmsServices.find(function(service){return service.getId()===tmsServiceConfig.id});return _context4.abrupt("return",tmsService.getUrlTemplate());case 5:case"end":return _context4.stop()}}},_callee4,this)}));function _getUrlTemplateForEMSTMSLayer(_x2){return _ref5.apply(this,arguments)}return _getUrlTemplateForEMSTMSLayer}()},{key:"getUrlTemplateForTMSLayer",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(tmsServiceConfig){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(tmsServiceConfig.origin===_origin.ORIGIN.EMS)){_context5.next=4;break}return _context5.abrupt("return",this._getUrlTemplateForEMSTMSLayer(tmsServiceConfig));case 4:if(!(tmsServiceConfig.origin===_origin.ORIGIN.KIBANA_YML)){_context5.next=8;break}return _context5.abrupt("return",tilemapsConfig.deprecated.config.url);case 8:if(!(tmsServiceConfig.id===TMS_IN_YML_ID)){_context5.next=12;break}return _context5.abrupt("return",tilemapsConfig.deprecated.config.url);case 12:return _context5.abrupt("return",this._getUrlTemplateForEMSTMSLayer(tmsServiceConfig));case 13:case"end":return _context5.stop()}}},_callee5,this)}));function getUrlTemplateForTMSLayer(_x3){return _ref6.apply(this,arguments)}return getUrlTemplateForTMSLayer}()},{key:"_getFileUrlFromEMS",value:function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(fileLayerConfig){var fileLayers,layer;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this._emsClient.getFileLayers();case 2:fileLayers=_context6.sent;layer=fileLayers.find(function(fileLayer){var hasIdByName=fileLayer.hasId(fileLayerConfig.name);var hasIdById=fileLayer.hasId(fileLayerConfig.id);return hasIdByName||hasIdById});if(!layer){_context6.next=8;break}return _context6.abrupt("return",layer.getDefaultFormatUrl());case 8:throw new Error("File  "+fileLayerConfig.name+" not recognized");case 9:case"end":return _context6.stop()}}},_callee6,this)}));function _getFileUrlFromEMS(_x4){return _ref7.apply(this,arguments)}return _getFileUrlFromEMS}()},{key:"getUrlForRegionLayer",value:function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(fileLayerConfig){var url;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:url=void 0;if(fileLayerConfig.origin===_origin.ORIGIN.EMS){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith(_origin.ORIGIN.EMS+".")){url=this._getFileUrlFromEMS(fileLayerConfig)}else if(fileLayerConfig.layerId&&fileLayerConfig.layerId.startsWith(_origin.ORIGIN.KIBANA_YML+".")){url=fileLayerConfig.url}else{url=fileLayerConfig.url}return _context7.abrupt("return",url);case 3:case"end":return _context7.stop()}}},_callee7,this)}));function getUrlForRegionLayer(_x5){return _ref8.apply(this,arguments)}return getUrlForRegionLayer}()},{key:"getJsonForRegionLayer",value:function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(fileLayerConfig){var url,json;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.getUrlForRegionLayer(fileLayerConfig);case 2:url=_context8.sent;_context8.next=5;return $http({url:url,method:"GET"});case 5:json=_context8.sent;return _context8.abrupt("return",json.data);case 7:case"end":return _context8.stop()}}},_callee8,this)}));function getJsonForRegionLayer(_x6){return _ref9.apply(this,arguments)}return getJsonForRegionLayer}()}]);return ServiceSettings}();return new ServiceSettings})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLegendColors=getLegendColors;exports.getColor=getColor;function getLegendColors(colorRamp){var numLegendColors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var colors=[];colors[0]=getColor(colorRamp,0);for(var i=1;i<numLegendColors-1;i++){colors[i]=getColor(colorRamp,Math.floor(colorRamp.length*i/numLegendColors))}colors[numLegendColors-1]=getColor(colorRamp,colorRamp.length-1);return colors}function getColor(colorRamp,i){var color=colorRamp[i][1];var red=Math.floor(color[0]*255);var green=Math.floor(color[1]*255);var blue=Math.floor(color[2]*255);return"rgb("+red+","+green+","+blue+")"}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1096)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2011)},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2001)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2710)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Utils=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _jsonStringifyPrettyCompact=__webpack_require__(460);var _jsonStringifyPrettyCompact2=_interopRequireDefault(_jsonStringifyPrettyCompact);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Utils=exports.Utils=function(){function Utils(){_classCallCheck(this,Utils)}_createClass(Utils,null,[{key:"formatWarningToStr",value:function formatWarningToStr(value){if(arguments.length>=2){try{if(typeof arguments[1]==="string"){value+="\n"+arguments[1]}else{value+="\n"+(0,_jsonStringifyPrettyCompact2.default)(arguments[1],{maxLength:70})}}catch(err){}}return value}},{key:"formatErrorToStr",value:function formatErrorToStr(error){if(!error){error="ERR"}else if(error instanceof Error){error=error.message}return Utils.formatWarningToStr.apply(Utils,[error].concat(_toConsumableArray(Array.from(arguments).slice(1))))}}]);return Utils}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2152)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2158)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LegacyResponseHandlerProvider=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _agg_config_result=__webpack_require__(238);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _vis_response_handlers=__webpack_require__(233);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LegacyResponseHandlerProvider=function LegacyResponseHandlerProvider(){return{name:"legacy",handler:function handler(table){return new Promise(function(resolve){var converted={tables:[]};var metricsAtAllLevels=table.columns.findIndex(function(column){return _lodash2.default.get(column,"aggConfig.type.type")==="metrics"})<_lodash2.default.findLastIndex(table.columns,function(column){return _lodash2.default.get(column,"aggConfig.type.type")==="buckets"});var splitColumn=table.columns.find(function(column){return _lodash2.default.get(column,"aggConfig.schema.name")==="split"});var numberOfMetrics=table.columns.filter(function(column){return _lodash2.default.get(column,"aggConfig.type.type")==="metrics"}).length;var numberOfBuckets=table.columns.filter(function(column){return _lodash2.default.get(column,"aggConfig.type.type")==="buckets"}).length;var metricsPerBucket=numberOfMetrics/numberOfBuckets;if(splitColumn){var splitAgg=splitColumn.aggConfig;var splitColumnFormatter=splitAgg.fieldFormatter("text");var splitMap={};var splitIndex=0;table.rows.forEach(function(row,rowIndex){var splitValue=row[splitColumn.id];var splitColumnIndex=table.columns.findIndex(function(column){return column===splitColumn});if(!splitMap.hasOwnProperty(splitValue)){splitMap[splitValue]=splitIndex++;var tableGroup={$parent:converted,aggConfig:splitAgg,title:splitColumnFormatter(splitValue)+": "+splitAgg.makeLabel(),key:splitValue,tables:[]};tableGroup.tables.push({$parent:tableGroup,columns:table.columns.filter(function(column,i){var isSplitColumn=i===splitColumnIndex;var isSplitMetric=metricsAtAllLevels&&i>splitColumnIndex&&i<=splitColumnIndex+metricsPerBucket;return!isSplitColumn&&!isSplitMetric}).map(function(column){return _extends({title:column.name},column)}),rows:[]});converted.tables.push(tableGroup)}var previousSplitAgg=new _agg_config_result2.default(splitAgg,null,splitValue,splitValue);previousSplitAgg.rawData={table:table,column:splitColumnIndex,row:rowIndex};var tableIndex=splitMap[splitValue];var newRow=_lodash2.default.map(converted.tables[tableIndex].tables[0].columns,function(column){var value=row[column.id];var aggConfigResult=new _agg_config_result2.default(column.aggConfig,previousSplitAgg,value,value);aggConfigResult.rawData={table:table,column:table.columns.findIndex(function(c){return c.id===column.id}),row:rowIndex};if(column.aggConfig.type.type==="buckets"){previousSplitAgg=aggConfigResult}return aggConfigResult});converted.tables[tableIndex].tables[0].rows.push(newRow)})}else{converted.tables.push({columns:table.columns.map(function(column){return _extends({title:column.name},column)}),rows:table.rows.map(function(row,rowIndex){var previousSplitAgg=void 0;return table.columns.map(function(column,columnIndex){var value=row[column.id];var aggConfigResult=new _agg_config_result2.default(column.aggConfig,previousSplitAgg,value,value);aggConfigResult.rawData={table:table,column:columnIndex,row:rowIndex};if(column.aggConfig.type.type==="buckets"){previousSplitAgg=aggConfigResult}return aggConfigResult})}),aggConfig:function aggConfig(column){return column.aggConfig}})}resolve(converted)})}}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(LegacyResponseHandlerProvider);exports.LegacyResponseHandlerProvider=LegacyResponseHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibSlicesResponseHandlerProvider=exports.VislibSeriesResponseHandlerProvider=undefined;var _legacy=__webpack_require__(461);var _build_hierarchical_data=__webpack_require__(463);var _point_series=__webpack_require__(274);var _vis_response_handlers=__webpack_require__(233);function convertTableGroup(tableGroup,convertTable){var tables=tableGroup.tables;var firstChild=tables[0];if(!tables.length)return;if(firstChild.columns){var chart=convertTable(firstChild);if(tableGroup.$parent){chart.label=tableGroup.title}return chart}var out={};var outList=void 0;tables.forEach(function(table){if(!outList){var aggConfig=table.aggConfig;var direction=aggConfig.params.row?"rows":"columns";outList=out[direction]=[]}var output=void 0;if(output=convertTableGroup(table,convertTable)){outList.push(output)}});return out}var handlerFunction=function handlerFunction(tableResponseProvider,convertTable){return function(response){return new Promise(function(resolve){return tableResponseProvider(response).then(function(tableGroup){var converted=convertTableGroup(tableGroup,convertTable);if(!converted){converted={rows:[]}}converted.hits=response.rows.length;resolve(converted)})})}};var VislibSeriesResponseHandlerProvider=function VislibSeriesResponseHandlerProvider(Private){var tableResponseProvider=Private(_legacy.LegacyResponseHandlerProvider).handler;var buildPointSeriesData=Private(_point_series.AggResponsePointSeriesProvider);return{name:"vislib_series",handler:handlerFunction(tableResponseProvider,buildPointSeriesData)}};var VislibSlicesResponseHandlerProvider=function VislibSlicesResponseHandlerProvider(Private){var buildHierarchicalData=Private(_build_hierarchical_data.BuildHierarchicalDataProvider);var tableResponseProvider=Private(_legacy.LegacyResponseHandlerProvider).handler;return{name:"vislib_slices",handler:handlerFunction(tableResponseProvider,buildHierarchicalData)}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(VislibSeriesResponseHandlerProvider);_vis_response_handlers.VisResponseHandlersRegistryProvider.register(VislibSlicesResponseHandlerProvider);exports.VislibSeriesResponseHandlerProvider=VislibSeriesResponseHandlerProvider;exports.VislibSlicesResponseHandlerProvider=VislibSlicesResponseHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BuildHierarchicalDataProvider=BuildHierarchicalDataProvider;var _lodash=__webpack_require__(0);var _hierarchical_tooltip_formatter=__webpack_require__(1167);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function BuildHierarchicalDataProvider(Private){var tooltipFormatter=Private(_hierarchical_tooltip_formatter.HierarchicalTooltipFormatterProvider);return function(table){var slices=void 0;var names={};if(table.columns.length===1){slices=[{name:table.columns[0].title,size:table.rows[0][0].value}];names[table.columns[0].title]=table.columns[0].title}else{var parent=void 0;slices=[];table.rows.forEach(function(row){var dataLevel=slices;var _loop=function _loop(columnIndex){var aggConfig=table.columns[columnIndex].aggConfig;var fieldFormatter=aggConfig.fieldFormatter("text");var bucketColumn=row[columnIndex];var metricColumn=row[columnIndex+1];var name=fieldFormatter(bucketColumn.value);var size=metricColumn.value;names[name]=name;var slice=dataLevel.find(function(slice){return slice.name===name});if(!slice){slice={name:name,size:size,parent:parent,aggConfig:aggConfig,aggConfigResult:bucketColumn,children:[]};dataLevel.push(slice)}parent=slice;dataLevel=slice.children};for(var columnIndex=0;columnIndex<table.columns.length;columnIndex+=2){_loop(columnIndex)}})}return{hits:table.rows.length,raw:table,names:(0,_lodash.toArray)(names),tooltipFormatter:tooltipFormatter(table.columns),slices:{children:[].concat(_toConsumableArray(slices))}}}}},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(1179);__webpack_require__(486);var _modules=__webpack_require__(3);var _sidebar=__webpack_require__(1266);var _sidebar2=_interopRequireDefault(_sidebar);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorSidebar",function(){return{restrict:"E",template:_sidebar2.default,scope:true,controllerAs:"sidebar",controller:function controller($scope){var _this=this;$scope.$watch("vis.type",function(visType){if(visType){_this.showData=visType.schemas.buckets||visType.schemas.metrics;if(_lodash2.default.has(visType,"editorConfig.optionTabs")){var activeTabs=visType.editorConfig.optionTabs.filter(function(tab){return _lodash2.default.get(tab,"active",false)});if(activeTabs.length>0){_this.section=activeTabs[0].name}}_this.section=_this.section||(_this.showData?"data":_lodash2.default.get(visType,"editorConfig.optionTabs[0].name"))}})}}})},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg_type_filters=__webpack_require__(1258);Object.defineProperty(exports,"aggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.aggTypeFilters}})},function(module,exports,__webpack_require__){"use strict";var _agg_config=__webpack_require__(109);var _modules=__webpack_require__(3);var _agg_add=__webpack_require__(1260);var _agg_add2=_interopRequireDefault(_agg_add);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("visEditorAggAdd",function(){return{restrict:"E",template:_agg_add2.default,controllerAs:"add",controller:function controller($scope){var self=this;self.form=false;self.submit=function(schema){self.form=false;var aggConfig=new _agg_config.AggConfig($scope.state.aggs,{schema:schema,id:_agg_config.AggConfig.nextId($scope.state.aggs)});aggConfig.brandNew=true;$scope.state.aggs.push(aggConfig)}}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _modules=__webpack_require__(3);var _vis_options=__webpack_require__(1265);var _vis_options2=_interopRequireDefault(_vis_options);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorVisOptions",function(Private,$compile){return{restrict:"E",template:_vis_options2.default,scope:{vis:"=",visData:"=",uiState:"=",editor:"=",visualizeEditor:"=",editorState:"="},link:function link($scope,$el){var $optionContainer=$el.find("[data-visualization-options]");var reactOptionsComponent=typeof $scope.editor!=="string";var stageEditorParams=function stageEditorParams(params){$scope.editorState.params=_lodash2.default.cloneDeep(params);$scope.$apply()};var renderReactComponent=function renderReactComponent(){var Component=$scope.editor;(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(Component,{scope:$scope,editorState:$scope.editorState,stageEditorParams:stageEditorParams})),$el[0])};if(reactOptionsComponent){renderReactComponent()}else{var $editor=$compile($scope.editor)($scope);$optionContainer.append($editor)}$scope.$watchGroup(["visData","visualizeEditor","editorState.params"],function(){if(reactOptionsComponent){renderReactComponent()}});$scope.$watch("vis.type.schemas.all.length",function(len){$scope.alwaysShowOptions=len===0});$el.on("$destroy",function(){if(reactOptionsComponent){(0,_reactDom.unmountComponentAtNode)($el[0])}})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisEditorTypesRegistryProvider=undefined;var _registry=__webpack_require__(23);var VisEditorTypesRegistryProvider=exports.VisEditorTypesRegistryProvider=(0,_registry.uiRegistry)({name:"visEditorTypes",index:["name"],order:["title"]})},,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RegistryFieldFormatEditorsProvider=undefined;var _registry=__webpack_require__(23);var RegistryFieldFormatEditorsProvider=exports.RegistryFieldFormatEditorsProvider=(0,_registry.uiRegistry)({name:"fieldFormatEditors",index:["formatId"],constructor:function constructor(){this.getEditor=function(formatId){return this.byFormatId[formatId]}}})},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeInput=initializeInput;exports.default=getInput;var _autocomplete=__webpack_require__(518);var _autocomplete2=_interopRequireDefault(_autocomplete);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var $=__webpack_require__(11);__webpack_require__(49);__webpack_require__(595);var SenseEditor=__webpack_require__(322);var settings=__webpack_require__(113);var utils=__webpack_require__(321);var es=__webpack_require__(320);var history=__webpack_require__(323);var input=void 0;function initializeInput($el,$actionsEl,$copyAsCurlEl,output){var openDocumentation=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){};input=new SenseEditor($el);if(_modules.uiModules){var appSense=_modules.uiModules.get("app/sense");if(appSense&&appSense.setupResizeCheckerForRootEditors){appSense.setupResizeCheckerForRootEditors($el,input,output)}}input.autocomplete=new _autocomplete2.default(input);input.$actions=$actionsEl;input.commands.addCommand({name:"auto indent request",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function exec(){input.autoIndent()}});input.commands.addCommand({name:"move to previous request start or end",bindKey:{win:"Ctrl-Up",mac:"Command-Up"},exec:function exec(){input.moveToPreviousRequestEdge()}});input.commands.addCommand({name:"move to next request start or end",bindKey:{win:"Ctrl-Down",mac:"Command-Down"},exec:function exec(){input.moveToNextRequestEdge()}});(function setupClipboard(){function copyText(text){var node=$('<textarea style="height:1px"></textarea').val(text).appendTo(document.body).select();document.execCommand("copy");node.remove()}if(!document.queryCommandSupported("copy")){$copyAsCurlEl.hide();return}$copyAsCurlEl.click(function(){copyText($copyAsCurlEl.attr("data-clipboard-text"))});input.$actions.on("mouseenter",function(){if($(this).hasClass("open"))return;input.getRequestsAsCURL(function(text){$copyAsCurlEl.attr("data-clipboard-text",text)})})})();var CURRENT_REQ_ID=0;function sendCurrentRequestToES(){var reqId=++CURRENT_REQ_ID;input.getRequestsInRange(function(requests){if(reqId!==CURRENT_REQ_ID){return}output.update("");if(requests.length===0){return}var isMultiRequest=requests.length>1;var finishChain=function finishChain(){};var isFirstRequest=true;var sendNextRequest=function sendNextRequest(){if(reqId!==CURRENT_REQ_ID){return}if(requests.length===0){finishChain();return}var req=requests.shift();var esPath=req.url;var esMethod=req.method;var esData=utils.collapseLiteralStrings(req.data.join("\n"));if(esData){esData+="\n"}es.send(esMethod,esPath,esData).always(function(dataOrjqXHR,textStatus,jqXhrORerrorThrown){if(reqId!==CURRENT_REQ_ID){return}var xhr=void 0;if(dataOrjqXHR.promise){xhr=dataOrjqXHR}else{xhr=jqXhrORerrorThrown}function modeForContentType(contentType){if(contentType.indexOf("text/plain")>=0){return"ace/mode/text"}else if(contentType.indexOf("application/yaml")>=0){return"ace/mode/yaml"}return null}if(typeof xhr.status==="number"&&(xhr.status>=200&&xhr.status<300||xhr.status===404)){history.addToHistory(esPath,esMethod,esData);var value=xhr.responseText;var mode=modeForContentType(xhr.getAllResponseHeaders("Content-Type")||"");if(mode===null||mode==="application/json"){try{value=utils.expandLiteralStrings(value)}catch(e){}}var warnings=xhr.getResponseHeader("warning");if(warnings){var deprecationMessages=utils.extractDeprecationMessages(warnings);value=deprecationMessages.join("\n")+"\n"+value}if(isMultiRequest){value="# "+req.method+" "+req.url+"\n"+value}if(isFirstRequest){output.update(value,mode)}else{output.append("\n"+value)}isFirstRequest=false;sendNextRequest()}else{var _value=void 0;var _mode=void 0;if(xhr.responseText){_value=xhr.responseText;_mode=modeForContentType(xhr.getAllResponseHeaders("Content-Type")||"");if(_value[0]==="{"){try{_value=JSON.stringify(JSON.parse(_value),null,2)}catch(e){}}}else{_value="Request failed to get to the server (status code: "+xhr.status+")";_mode="ace/mode/text"}if(isMultiRequest){_value="# "+req.method+" "+req.url+"\n"+_value}if(isFirstRequest){output.update(_value,_mode)}else{output.append("\n"+_value)}finishChain()}})};sendNextRequest()})}input.commands.addCommand({name:"send to elasticsearch",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:sendCurrentRequestToES});input.commands.addCommand({name:"open documentation",bindKey:{win:"Ctrl-/",mac:"Command-/"},exec:function exec(){openDocumentation()}});if(settings){settings.applyCurrentSettings(input)}input.focus();input.highlightCurrentRequestsAndUpdateActionBar();input.sendCurrentRequestToES=sendCurrentRequestToES;__webpack_require__(1420)(input,output);return input}function getInput(){return input}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.getEndpointFromPosition=getEndpointFromPosition;exports.default=function(editor){function isUrlPathToken(token){switch((token||{}).type){case"url.slash":case"url.comma":case"url.part":return true;default:return false}}function addMetaToTermsList(list,meta,template){return _lodash2.default.map(list,function(t){if((typeof t==="undefined"?"undefined":_typeof(t))!=="object"){t={name:t}}return _lodash2.default.defaults(t,{meta:meta,template:template})})}function applyTerm(term){var session=editor.getSession();var context=term.context;addReplacementInfoToContext(context,editor.getCursorPosition(),term.insertValue);var termAsString=void 0;if(context.autoCompleteType==="body"){termAsString=typeof term.insertValue==="string"?'"'+term.insertValue+'"':term.insertValue+"";if(term.insertValue==="["||term.insertValue==="{"){termAsString=""}}else{termAsString=term.insertValue+""}var valueToInsert=termAsString;var templateInserted=false;if(context.addTemplate&&!_lodash2.default.isUndefined(term.template)&&!_lodash2.default.isNull(term.template)){var indentedTemplateLines=_utils2.default.jsonToString(term.template,true).split("\n");var currentIndentation=session.getLine(context.rangeToReplace.start.row);currentIndentation=currentIndentation.match(/^\s*/)[0];for(var i=1;i<indentedTemplateLines.length;i++){indentedTemplateLines[i]=currentIndentation+indentedTemplateLines[i]}valueToInsert+=": "+indentedTemplateLines.join("\n");templateInserted=true}else{templateInserted=true;if(term.value==="["){valueToInsert+="[]"}else if(term.value==="{"){valueToInsert+="{}"}else{templateInserted=false}}valueToInsert=context.prefixToAdd+valueToInsert+context.suffixToAdd;removeChangeListener();if(context.rangeToReplace.start.column!==context.rangeToReplace.end.column){session.replace(context.rangeToReplace,valueToInsert)}else{editor.insert(valueToInsert)}editor.clearSelection();var newPos={row:context.rangeToReplace.start.row,column:context.rangeToReplace.start.column+termAsString.length+context.prefixToAdd.length+(templateInserted?0:context.suffixToAdd.length)};var tokenIter=editor.iterForPosition(newPos.row,newPos.column);if(context.autoCompleteType==="body"){var nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"paren.rparen":newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};break;case"punctuation.colon":nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if((nonEmptyToken||{}).type==="paren.lparen"){nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};if(nonEmptyToken&&nonEmptyToken.value.indexOf('"')===0){newPos.column++}}break;case"paren.lparen":case"punctuation.comma":tokenIter.stepForward();newPos={row:tokenIter.getCurrentTokenRow(),column:tokenIter.getCurrentTokenColumn()};break}editor.moveCursorToPosition(newPos)}addChangeListener()}function getAutoCompleteContext(editor,session,pos){var context={autoCompleteSet:null,endpoint:null,urlPath:null,method:null,activeScheme:null,editor:editor};context.autoCompleteType=getAutoCompleteType(pos);switch(context.autoCompleteType){case"path":addPathAutoCompleteSetToContext(context,pos);break;case"url_params":addUrlParamsAutoCompleteSetToContext(context,pos);break;case"method":addMethodAutoCompleteSetToContext(context,pos);break;case"body":addBodyAutoCompleteSetToContext(context,pos);break;default:return null}if(!context.autoCompleteSet){return null}addReplacementInfoToContext(context,pos);context.createdWithToken=_lodash2.default.clone(context.updatedForToken);return context}function getAutoCompleteType(pos){var rowMode=editor.parser.getRowParseMode();if(rowMode&editor.parser.MODE.IN_REQUEST){return"body"}if(rowMode&editor.parser.MODE.REQUEST_START){var tokenIter=editor.iterForPosition(pos.row,pos.column);var t=tokenIter.getCurrentToken();while(t.type==="url.comma"){t=tokenIter.stepBackward()}switch(t.type){case"method":return"method";case"whitespace":t=editor.parser.prevNonEmptyToken(tokenIter);switch((t||{}).type){case"method":return"path";break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}break;default:if(isUrlPathToken(t)){return"path"}if(isUrlParamsToken(t)){return"url_params"}return null}}if(rowMode&editor.parser.MODE.REQUEST_END){return"body"}if((editor.getSession().getLine(pos.row)||"").trim()===""){rowMode=editor.parser.getRowParseMode(pos.row-1);if(rowMode&editor.parser.MODE.REQUEST_START&&rowMode&editor.parser.MODE.REQUEST_END){return"body"}return"method"}return null}function addReplacementInfoToContext(context,pos,replacingTerm){var session=editor.getSession();context.updatedForToken=_lodash2.default.clone(session.getTokenAt(pos.row,pos.column));if(!context.updatedForToken){context.updatedForToken={value:"",start:pos.column}}var anchorToken=context.createdWithToken;if(!anchorToken){anchorToken=context.updatedForToken}switch(context.updatedForToken.type){case"variable":case"string":case"text":case"constant.numeric":case"constant.language.boolean":case"method":case"url.index":case"url.type":case"url.id":case"url.method":case"url.endpoint":case"url.part":case"url.param":case"url.value":context.rangeToReplace=new AceRange(pos.row,anchorToken.start,pos.row,context.updatedForToken.start+context.updatedForToken.value.length);context.replacingToken=true;break;default:if(replacingTerm&&context.updatedForToken.value===replacingTerm){context.rangeToReplace=new AceRange(pos.row,anchorToken.start,pos.row,context.updatedForToken.start+context.updatedForToken.value.length);context.replacingToken=true}else{context.rangeToReplace=new AceRange(pos.row,pos.column,pos.row,pos.column);context.replacingToken=false}break}context.textBoxPosition={row:context.rangeToReplace.start.row,column:context.rangeToReplace.start.column};switch(context.autoCompleteType){case"path":addPathPrefixSuffixToContext(context);break;case"url_params":addUrlParamsPrefixSuffixToContext(context);break;case"method":addMethodPrefixSuffixToContext(context);break;case"body":addBodyPrefixSuffixToContext(context);break}}function addBodyPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=editor.iterForCurrentLoc();var nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"paren.rparen":case"punctuation.comma":context.addTemplate=true;break;case"punctuation.colon":context.addTemplate=false;nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="{")){break}nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);if(!(nonEmptyToken&&nonEmptyToken.value==="}")){break}context.addTemplate=true;context.rangeToReplace.end.row=tokenIter.getCurrentTokenRow();context.rangeToReplace.end.column=tokenIter.getCurrentTokenColumn()+nonEmptyToken.value.length;nonEmptyToken=editor.parser.nextNonEmptyToken(tokenIter);switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.rparen":case"punctuation.comma":case"punctuation.colon":break;default:context.suffixToAdd=", "}break;default:context.addTemplate=true;context.suffixToAdd=", ";break}tokenIter=editor.iterForCurrentLoc();nonEmptyToken=tokenIter.getCurrentToken();var insertingRelativeToToken=void 0;if(context.replacingToken){insertingRelativeToToken=0}else{var pos=editor.getCursorPosition();if(pos.column===context.updatedForToken.start){insertingRelativeToToken=-1}else if(pos.column<context.updatedForToken.start+context.updatedForToken.value.length){insertingRelativeToToken=0}else{insertingRelativeToToken=1}}if(editor.parser.isEmptyToken(nonEmptyToken)||insertingRelativeToToken<=0){nonEmptyToken=editor.parser.prevNonEmptyToken(tokenIter)}switch(nonEmptyToken?nonEmptyToken.type:"NOTOKEN"){case"NOTOKEN":case"paren.lparen":case"punctuation.comma":case"punctuation.colon":case"method":break;default:if(nonEmptyToken&&nonEmptyToken.type.indexOf("url")<0){context.prefixToAdd=", "}}return context}function addUrlParamsPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd="";var tokenIter=editor.iterForCurrentLoc();var row=tokenIter.getCurrentTokenRow();var t=editor.parser.nextNonEmptyToken(tokenIter);if(tokenIter.getCurrentTokenRow()!==row||!t){context.suffixToAdd=" "}}function addPathPrefixSuffixToContext(context){context.prefixToAdd="";context.suffixToAdd=""}function addMethodAutoCompleteSetToContext(context){context.autoCompleteSet=["GET","PUT","POST","DELETE","HEAD"].map(function(m,i){return{name:m,score:-i,meta:_i18n.i18n.translate("console.autocomplete.addMethodMetaText",{defaultMessage:"method"})}})}function addPathAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.token=ret.token;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;var components=(0,_kb.getTopLevelUrlCompleteComponents)(context.method);(0,_engine.populateContext)(ret.urlTokenPath,context,editor,true,components);context.autoCompleteSet=addMetaToTermsList(context.autoCompleteSet,"endpoint")}function addUrlParamsAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;if(!ret.urlTokenPath){console.log("Can't extract a valid url token path.");return context}(0,_engine.populateContext)(ret.urlTokenPath,context,editor,false,(0,_kb.getTopLevelUrlCompleteComponents)(context.method));if(!context.endpoint){console.log("couldn't resolve an endpoint.");return context}if(!ret.urlParamsTokenPath){console.log("Can't extract a valid urlParams token path.");return context}var tokenPath=[];var currentParam=ret.urlParamsTokenPath.pop();if(currentParam){tokenPath=Object.keys(currentParam);context.otherTokenValues=currentParam[tokenPath[0]]}(0,_engine.populateContext)(tokenPath,context,editor,true,context.endpoint.paramsAutocomplete.getTopLevelComponents(context.method));return context}function addBodyAutoCompleteSetToContext(context,pos){var ret=getCurrentMethodAndTokenPaths(editor,pos);context.method=ret.method;context.otherTokenValues=ret.otherTokenValues;context.urlTokenPath=ret.urlTokenPath;context.requestStartRow=ret.requestStartRow;if(!ret.urlTokenPath){console.log("Can't extract a valid url token path.");return context}(0,_engine.populateContext)(ret.urlTokenPath,context,editor,false,(0,_kb.getTopLevelUrlCompleteComponents)(context.method));context.bodyTokenPath=ret.bodyTokenPath;if(!ret.bodyTokenPath){console.log("Can't extract a valid body token path.");return context}context.endpointComponentResolver=_kb.getEndpointBodyCompleteComponents;context.globalComponentResolver=_kb.getGlobalAutocompleteComponents;var components=void 0;if(context.endpoint){components=context.endpoint.bodyAutocompleteRootComponents}else{components=(0,_kb.getUnmatchedEndpointComponents)()}(0,_engine.populateContext)(ret.bodyTokenPath,context,editor,true,components);return context}var evaluateCurrentTokenAfterAChange=_lodash2.default.debounce(function evaluateCurrentTokenAfterAChange(pos){var session=editor.getSession();var currentToken=session.getTokenAt(pos.row,pos.column);if(!currentToken){if(pos.row===0){LAST_EVALUATED_TOKEN=null;return}currentToken={start:0,value:""}}currentToken.row=pos.row;if(editor.parser.isEmptyToken(currentToken)){var nextToken=session.getTokenAt(pos.row,pos.column+1);if(editor.parser.isEmptyToken(nextToken)){currentToken.start=pos.column;LAST_EVALUATED_TOKEN=currentToken}else{nextToken.row=pos.row;LAST_EVALUATED_TOKEN=nextToken}return}if(!LAST_EVALUATED_TOKEN){LAST_EVALUATED_TOKEN=currentToken;return}if(LAST_EVALUATED_TOKEN.start!==currentToken.start||LAST_EVALUATED_TOKEN.row!==currentToken.row||LAST_EVALUATED_TOKEN.value===currentToken.value){LAST_EVALUATED_TOKEN=currentToken;return}switch(currentToken.type||"UNKNOWN"){case"paren.lparen":case"paren.rparen":case"punctuation.colon":case"punctuation.comma":case"UNKNOWN":return}LAST_EVALUATED_TOKEN=currentToken;editor.execCommand("startAutocomplete")},100);function editorChangeListener(){var cursor=editor.selection.lead;if(editor.__ace.completer&&editor.__ace.completer.activated){return}evaluateCurrentTokenAfterAChange(cursor)}function addChangeListener(){editor.on("changeSelection",editorChangeListener)}function removeChangeListener(){editor.off("changeSelection",editorChangeListener)}function getCompletions(aceEditor,session,pos,prefix,callback){try{var context=getAutoCompleteContext(editor,session,pos);if(!context){callback(null,[])}else{var terms=_lodash2.default.map(context.autoCompleteSet,function(term){if((typeof term==="undefined"?"undefined":_typeof(term))!=="object"){term={name:term}}else{term=_lodash2.default.clone(term)}var defaults={value:term.name,meta:"API",score:0,context:context};if(context.autoCompleteType==="body"){defaults.completer={insertMatch:function insertMatch(){return applyTerm(term)}}}return _lodash2.default.defaults(term,defaults)});terms.sort(function(t1,t2){if(t1.score>t2.score){return-1}if(t1.score<t2.score){return 1}if(t1.name<t2.name){return-1}if(t1.name===t2.name){return 0}return 1});callback(null,_lodash2.default.map(terms,function(t,i){t.insertValue=t.insertValue||t.value;t.value=""+t.value;t.score=-i;return t}))}}catch(e){console.log("error while getting completion terms",e);callback(e,null)}}addChangeListener();_brace2.default.define("ace/autocomplete/text_completer",["require","exports","module"],function(require,exports){exports.getCompletions=function(editor,session,pos,prefix,callback){callback(null,[])}});var langTools=_brace2.default.acequire("ace/ext/language_tools");langTools.setCompleters([{identifierRegexps:[/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/],getCompletions:getCompletions}]);editor.setOptions({enableBasicAutocompletion:true});editor.$blockScrolling=Infinity;return{_test:{getCompletions:getCompletions,addReplacementInfoToContext:addReplacementInfoToContext,addChangeListener:addChangeListener,removeChangeListener:removeChangeListener}}};var _kb=__webpack_require__(1393);var _utils=__webpack_require__(321);var _utils2=_interopRequireDefault(_utils);var _engine=__webpack_require__(525);var _components=__webpack_require__(73);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _brace=__webpack_require__(49);var _brace2=_interopRequireDefault(_brace);__webpack_require__(1818);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AceRange=_brace2.default.acequire("ace/range").Range;var LAST_EVALUATED_TOKEN=null;function isUrlParamsToken(token){switch((token||{}).type){case"url.param":case"url.equal":case"url.value":case"url.questionmark":case"url.amp":return true;default:return false}}function getCurrentMethodAndTokenPaths(editor,pos,forceEndOfUrl){var tokenIter=editor.iterForPosition(pos.row,pos.column);var startPos=pos;var bodyTokenPath=[];var ret={};var STATES={looking_for_key:0,looking_for_scope_start:1,start:3};var state=STATES.start;var t=tokenIter.getCurrentToken();if(t){if(startPos.column===0){t=tokenIter.stepBackward();state=STATES.looking_for_scope_start}}else{if(startPos.column===0){t=tokenIter.stepBackward();state=STATES.start}}var walkedSomeBody=false;for(;t&&t.type.indexOf("url")===-1&&t.type!=="method";t=tokenIter.stepBackward()){if(t.type!=="whitespace"){walkedSomeBody=true}switch(t.type){case"variable":if(state===STATES.looking_for_key){bodyTokenPath.unshift(t.value.trim().replace(/"/g,""))}state=STATES.looking_for_scope_start;break;case"paren.lparen":bodyTokenPath.unshift(t.value);if(state===STATES.looking_for_scope_start){state=STATES.looking_for_key}break;case"paren.rparen":state=STATES.looking_for_scope_start;var parenCount=1;t=tokenIter.stepBackward();while(t&&parenCount>0){switch(t.type){case"paren.lparen":parenCount--;break;case"paren.rparen":parenCount++;break}if(parenCount>0){t=tokenIter.stepBackward()}}if(!t){return{}}continue;case"punctuation.end_triple_quote":state=STATES.looking_for_scope_start;for(t=tokenIter.stepBackward();t;t=tokenIter.stepBackward()){if(t.type==="punctuation.start_triple_quote"){t=tokenIter.stepBackward();break}}if(!t){return{}}continue;case"punctuation.start_triple_quote":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}bodyTokenPath.unshift('"""');continue;case"string":case"constant.numeric":case"constant.language.boolean":case"text":if(state===STATES.start){state=STATES.looking_for_key}else if(state===STATES.looking_for_key){state=STATES.looking_for_scope_start}break;case"punctuation.comma":if(state===STATES.start){state=STATES.looking_for_scope_start}break;case"punctuation.colon":case"whitespace":if(state===STATES.start){state=STATES.looking_for_key}break}}if(walkedSomeBody&&(!bodyTokenPath||bodyTokenPath.length===0)){return{}}ret.urlTokenPath=[];if(tokenIter.getCurrentTokenRow()===startPos.row){if(t&&(t.type==="url.part"||t.type==="url.param"||t.type==="url.value")){if(forceEndOfUrl&&t.type==="url.part"){ret.urlTokenPath.push(t.value);ret.urlTokenPath.push(_components.URL_PATH_END_MARKER)}t=tokenIter.stepBackward();while(t.type==="whitespace"){t=tokenIter.stepBackward()}}bodyTokenPath=null}ret.bodyTokenPath=bodyTokenPath;ret.urlParamsTokenPath=null;ret.requestStartRow=tokenIter.getCurrentTokenRow();var curUrlPart=void 0;while(t&&isUrlParamsToken(t)){switch(t.type){case"url.value":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.param":var v=curUrlPart;curUrlPart={};curUrlPart[t.value]=v;break;case"url.amp":case"url.questionmark":if(!ret.urlParamsTokenPath){ret.urlParamsTokenPath=[]}ret.urlParamsTokenPath.unshift(curUrlPart||{});curUrlPart=null;break}t=tokenIter.stepBackward()}curUrlPart=null;while(t&&t.type.indexOf("url")!==-1){switch(t.type){case"url.part":if(Array.isArray(curUrlPart)){curUrlPart.unshift(t.value)}else if(curUrlPart){curUrlPart=[t.value,curUrlPart]}else{curUrlPart=t.value}break;case"url.comma":if(!curUrlPart){curUrlPart=[]}else if(!Array.isArray(curUrlPart)){curUrlPart=[curUrlPart]}break;case"url.slash":if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart);curUrlPart=null}break}t=editor.parser.prevNonEmptyToken(tokenIter)}if(curUrlPart){ret.urlTokenPath.unshift(curUrlPart)}if(!ret.bodyTokenPath&&!ret.urlParamsTokenPath){if(ret.urlTokenPath.length>0){ret.otherTokenValues=ret.urlTokenPath[0]}}else{ret.urlTokenPath.push(_components.URL_PATH_END_MARKER)}if(t&&t.type==="method"){ret.method=t.value}return ret}function getEndpointFromPosition(editor,pos){var context=_extends({},getCurrentMethodAndTokenPaths(editor,pos,true));var components=(0,_kb.getTopLevelUrlCompleteComponents)(context.method);(0,_engine.populateContext)(context.urlTokenPath,context,editor,true,components);return context.endpoint}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AutocompleteComponent=exports.AutocompleteComponent=function(){function AutocompleteComponent(name){_classCallCheck(this,AutocompleteComponent);this.name=name}_createClass(AutocompleteComponent,[{key:"getTerms",value:function getTerms(){return[]}},{key:"match",value:function match(){return{next:this.next}}}]);return AutocompleteComponent}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initializeOutput=initializeOutput;exports.default=getOutput;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ace=__webpack_require__(49);var settings=__webpack_require__(113);var OutputMode=__webpack_require__(1402);var smartResize=__webpack_require__(524);var output=void 0;function initializeOutput($el){output=ace.acequire("ace/ace").edit($el[0]);var outputMode=new OutputMode.Mode;output.$blockScrolling=Infinity;output.resize=smartResize(output);output.update=function(val,mode,cb){if(typeof mode==="function"){cb=mode;mode=void 0}var session=output.getSession();session.setMode(val?mode||outputMode:"ace/mode/text");session.setValue(val);if(typeof cb==="function"){setTimeout(cb)}};output.append=function(val,foldPrevious,cb){if(typeof foldPrevious==="function"){cb=foldPrevious;foldPrevious=true}if(_lodash2.default.isUndefined(foldPrevious)){foldPrevious=true}var session=output.getSession();var lastLine=session.getLength();if(foldPrevious){output.moveCursorTo(Math.max(0,lastLine-1),0)}session.insert({row:lastLine,column:0},"\n"+val);output.moveCursorTo(lastLine+1,0);if(typeof cb==="function"){setTimeout(cb)}};output.$el=$el;(function(session){session.setMode("ace/mode/text");session.setFoldStyle("markbeginend");session.setTabSize(2);session.setUseWrapMode(true)})(output.getSession());output.setShowPrintMargin(false);output.setReadOnly(true);if(settings){settings.applyCurrentSettings(output)}return output}function getOutput(){return output}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OutputJsonHighlightRules=OutputJsonHighlightRules;__webpack_require__(1753);var _x_json_highlight_rules=__webpack_require__(522);var ace=__webpack_require__(49);var oop=ace.acequire("ace/lib/oop");var JsonHighlightRules=ace.acequire("ace/mode/json_highlight_rules").JsonHighlightRules;function OutputJsonHighlightRules(){this.$rules={};(0,_x_json_highlight_rules.addToRules)(this,"start");this.$rules.start.unshift({token:"warning",regex:"#!.*$"},{token:"comment",regex:"#.*$"});if(this.constructor===OutputJsonHighlightRules){this.normalizeRules()}}oop.inherits(OutputJsonHighlightRules,JsonHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addToRules=addToRules;var _=__webpack_require__(0);var ScriptHighlightRules=__webpack_require__(523).ScriptHighlightRules;var jsonRules=function jsonRules(root){root=root?root:"json";var rules={};rules[root]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:false,push:true},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:false,push:true},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:false,regex:"{",next:root,push:true},{token:"paren.lparen",merge:false,regex:"[[(]"},{token:"paren.rparen",merge:false,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:false,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];rules.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}];return rules};function addToRules(otherRules,embedUnder){otherRules.$rules=_.defaultsDeep(otherRules.$rules,jsonRules(embedUnder));otherRules.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptHighlightRules=ScriptHighlightRules;var ace=__webpack_require__(49);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;var painlessKeywords="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function ScriptHighlightRules(){this.name="ScriptHighlightRules";this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:painlessKeywords},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}oop.inherits(ScriptHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(editor){var resize=editor.resize;var throttledResize=(0,_lodash.throttle)(function(){resize.call(editor);var userRow=(0,_lodash.get)(throttledResize,"topRow",0);if(userRow!==0){editor.renderer.scrollToLine(userRow,false,false,function(){})}},35);return throttledResize};var _lodash=__webpack_require__(0);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.wrapComponentWithDefaults=wrapComponentWithDefaults;exports.WalkingState=WalkingState;exports.walkTokenPath=walkTokenPath;exports.populateContext=populateContext;var _=__webpack_require__(0);function wrapComponentWithDefaults(component,defaults){var originalGetTerms=component.getTerms;component.getTerms=function(context,editor){var result=originalGetTerms.call(component,context,editor);if(!result){return result}result=_.map(result,function(term){if(!_.isObject(term)){term={name:term}}return _.defaults(term,defaults)},this);return result};return component}var tracer=function tracer(){if(window.engine_trace){console.log.call(console,arguments)}};function passThroughContext(context,extensionList){function PTC(){}PTC.prototype=context;var result=new PTC;if(extensionList){extensionList.unshift(result);_.assign.apply(_,extensionList);extensionList.shift()}return result}function WalkingState(parentName,components,contextExtensionList,depth,priority){this.parentName=parentName;this.components=components;this.contextExtensionList=contextExtensionList;this.depth=depth||0;this.priority=priority}function walkTokenPath(tokenPath,walkingStates,context,editor){if(!tokenPath||tokenPath.length===0){return walkingStates}var token=tokenPath[0];var nextWalkingStates=[];tracer("starting token evaluation ["+token+"]");_.each(walkingStates,function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);_.each(ws.components,function(component){tracer("evaluating ["+token+"] with ["+component.name+"]",component);var result=component.match(token,contextForState,editor);if(result&&!_.isEmpty(result)){tracer("matched ["+token+"] with:",result);var next=void 0;var extensionList=void 0;if(result.next&&!Array.isArray(result.next)){next=[result.next]}else{next=result.next}if(result.context_values){extensionList=[];[].push.apply(extensionList,ws.contextExtensionList);extensionList.push(result.context_values)}else{extensionList=ws.contextExtensionList}var priority=ws.priority;if(_.isNumber(result.priority)){if(_.isNumber(priority)){priority=Math.min(priority,result.priority)}else{priority=result.priority}}nextWalkingStates.push(new WalkingState(component.name,next,extensionList,ws.depth+1,priority))}})});if(nextWalkingStates.length===0){return _.map(walkingStates,function(ws){return new WalkingState(ws.name,[],ws.contextExtensionList)})}return walkTokenPath(tokenPath.slice(1),nextWalkingStates,context,editor)}function populateContext(tokenPath,context,editor,includeAutoComplete,components){var walkStates=walkTokenPath(tokenPath,[new WalkingState("ROOT",components,[])],context,editor);if(includeAutoComplete){var autoCompleteSet=[];_.each(walkStates,function(ws){var contextForState=passThroughContext(context,ws.contextExtensionList);_.each(ws.components,function(component){_.each(component.getTerms(contextForState,editor),function(term){if(!_.isObject(term)){term={name:term}}autoCompleteSet.push(term)})})});autoCompleteSet=_.uniq(autoCompleteSet,false);context.autoCompleteSet=autoCompleteSet}if(walkStates.length!==0){var wsToUse=void 0;walkStates=_.sortBy(walkStates,function(ws){return _.isNumber(ws.priority)?ws.priority:Number.MAX_VALUE});wsToUse=_.find(walkStates,function(ws){return _.isEmpty(ws.components)});if(!wsToUse&&walkStates.length>1&&!includeAutoComplete){console.info("more then one context active for current path, but autocomplete isn't requested",walkStates)}if(!wsToUse){wsToUse=walkStates[0]}_.each(wsToUse.contextExtensionList,function(extension){_.assign(context,extension)})}}},,function(module,exports,__webpack_require__){"use strict";var _sense_editor_resize=__webpack_require__(319);var SenseEditor=__webpack_require__(322);var exampleText=__webpack_require__(1431).trim();__webpack_require__(3).get("app/sense").directive("senseHelpExample",function(){return{restrict:"E",link:function link($scope,$el){$el.text(exampleText);$scope.editor=new SenseEditor($el);(0,_sense_editor_resize.useResizeChecker)($scope,$el,$scope.editor);$scope.editor.setReadOnly(true);$scope.editor.$blockScrolling=Infinity;$scope.$on("$destroy",function(){if($scope.editor)$scope.editor.destroy()})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1444)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSort=getSort;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSort(sort,indexPattern){var defaultSortOrder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"desc";var sortObj={};var field=void 0;var direction=void 0;function isSortable(field){return indexPattern.fields.byName[field]&&indexPattern.fields.byName[field].sortable}if(Array.isArray(sort)&&sort.length===2&&isSortable(sort[0])){field=sort[0];direction=sort[1]}else if(indexPattern.timeFieldName&&isSortable(indexPattern.timeFieldName)){field=indexPattern.timeFieldName;direction=defaultSortOrder}if(field){sortObj[field]=direction}else{sortObj._score="desc"}return sortObj}getSort.array=function(sort,indexPattern,defaultSortOrder){return(0,_lodash2.default)(getSort(sort,indexPattern,defaultSortOrder)).pairs().pop()}},,function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _risonNode=__webpack_require__(55);var _risonNode2=_interopRequireDefault(_risonNode);__webpack_require__(532);__webpack_require__(533);__webpack_require__(249);var _no_white_space=__webpack_require__(511);var _open=__webpack_require__(1449);var _open2=_interopRequireDefault(_open);var _details=__webpack_require__(1450);var _details2=_interopRequireDefault(_details);var _modules=__webpack_require__(3);var _filter_bar=__webpack_require__(534);var _render_complete=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");var MIN_LINE_LENGTH=20;_module.directive("kbnTableRow",function($compile,$httpParamSerializer,kbnUrl,config){var cellTemplate=_lodash2.default.template((0,_no_white_space.noWhiteSpace)(__webpack_require__(1481)));var truncateByHeightTemplate=_lodash2.default.template((0,_no_white_space.noWhiteSpace)(__webpack_require__(1482)));return{restrict:"A",scope:{columns:"=",filter:"=",filters:"=?",indexPattern:"=",row:"=kbnTableRow",onAddColumn:"=?",onRemoveColumn:"=?"},link:function link($scope,$el){$el.after('<tr data-test-subj="docTableDetailsRow">');$el.empty();var $detailsScope=void 0;var $toggleScope=void 0;$scope.toggleRow=function(){var $detailsTr=$el.next();$scope.open=!$scope.open;$detailsTr.toggle($scope.open);if(!$scope.open){$detailsScope.$destroy();return}else{$detailsScope=$scope.$new()}$detailsTr.html(_details2.default);$detailsScope.row=$scope.row;$compile($detailsTr)($detailsScope)};$scope.$watchMulti(["indexPattern.timeFieldName","row.highlight","[]columns"],function(){createSummaryRow($scope.row,$scope.row._id)});$scope.inlineFilter=function inlineFilter($event,type){var column=(0,_jquery2.default)($event.target).data().column;var field=$scope.indexPattern.fields.byName[column];$scope.filter(field,$scope.flattenedRow[column],type)};$scope.getContextAppHref=function(){var path=kbnUrl.eval("#/context/{{ indexPattern }}/{{ anchorType }}/{{ anchorId }}",{anchorId:$scope.row._id,anchorType:$scope.row._type,indexPattern:$scope.indexPattern.id});var hash=$httpParamSerializer({_a:_risonNode2.default.encode({columns:$scope.columns,filters:($scope.filters||[]).map(_filter_bar.disableFilter)})});return path+"?"+hash};function createSummaryRow(row){var indexPattern=$scope.indexPattern;$scope.flattenedRow=indexPattern.flattenHit(row);var newHtmls=[_open2.default];var mapping=indexPattern.fields.byName;var hideTimeColumn=config.get("doc_table:hideTimeColumn");if(indexPattern.timeFieldName&&!hideTimeColumn){newHtmls.push(cellTemplate({timefield:true,formatted:_displayField(row,indexPattern.timeFieldName),filterable:mapping[indexPattern.timeFieldName].filterable&&_lodash2.default.isFunction($scope.filter),column:indexPattern.timeFieldName}))}$scope.columns.forEach(function(column){var isFilterable=$scope.flattenedRow[column]!==undefined&&mapping[column]&&mapping[column].filterable&&_lodash2.default.isFunction($scope.filter);newHtmls.push(cellTemplate({timefield:false,sourcefield:column==="_source",formatted:_displayField(row,column,true),filterable:isFilterable,column:column}))});var $cells=$el.children();newHtmls.forEach(function(html,i){var $cell=$cells.eq(i);if($cell.data("discover:html")===html)return;var reuse=_lodash2.default.find($cells.slice(i+1),function(cell){return _jquery2.default.data(cell,"discover:html")===html});var $target=reuse?(0,_jquery2.default)(reuse).detach():(0,_jquery2.default)(html);$target.data("discover:html",html);var $before=$cells.eq(i-1);if($before.length){$before.after($target)}else{$el.append($target)}$cells=$el.children();if(!reuse){$toggleScope=$scope.$new();$compile($target)($toggleScope)}});if($scope.open){$detailsScope.row=row}$cells.filter(":gt("+(newHtmls.length-1)+")").remove();(0,_render_complete.dispatchRenderComplete)($el[0])}function _displayField(row,fieldName,truncate){var indexPattern=$scope.indexPattern;var text=indexPattern.formatField(row,fieldName);if(truncate&&text.length>MIN_LINE_LENGTH){return truncateByHeightTemplate({body:text})}return text}}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1448)},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addColumn=addColumn;exports.removeColumn=removeColumn;exports.moveColumn=moveColumn;function addColumn(columns,columnName){if(columns.includes(columnName)){return}columns.push(columnName)}function removeColumn(columns,columnName){if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1)}function moveColumn(columns,columnName,newIndex){if(newIndex<0){return}if(newIndex>=columns.length){return}if(!columns.includes(columnName)){return}columns.splice(columns.indexOf(columnName),1);columns.splice(newIndex,0,columnName)}},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.recentlyAccessedShape=exports.RecentlyAccessed=exports.NUM_LONG_LINKS=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NUM_LONG_LINKS=exports.NUM_LONG_LINKS=5;var RecentlyAccessed=exports.RecentlyAccessed=function(_Component){_inherits(RecentlyAccessed,_Component);function RecentlyAccessed(props){_classCallCheck(this,RecentlyAccessed);var _this=_possibleConstructorReturn(this,(RecentlyAccessed.__proto__||Object.getPrototypeOf(RecentlyAccessed)).call(this,props));_this.onButtonClick=function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})};_this.closePopover=function(){_this.setState({isPopoverOpen:false})};_this.renderDropdown=function(){if(_this.props.recentlyAccessed.length<=NUM_LONG_LINKS){return}var dropdownLinks=[];for(var i=NUM_LONG_LINKS;i<_this.props.recentlyAccessed.length;i++){dropdownLinks.push(_react2.default.createElement("li",{style:{marginBottom:8},key:_this.props.recentlyAccessed[i].id,"data-test-subj":"moreRecentlyAccessedItem"+_this.props.recentlyAccessed[i].id},_react2.default.createElement(_eui.EuiLink,{className:"homRecentlyAccessed__dropdownLink",href:_this.props.recentlyAccessed[i].link},_this.props.recentlyAccessed[i].label)))}var openPopoverComponent=_react2.default.createElement(_eui.EuiLink,{onClick:_this.onButtonClick,"data-test-subj":"openMoreRecentlyAccessedPopover"},_react2.default.createElement(_eui.EuiTextColor,{className:"homRecentlyAccessed__dropdownLabel",color:"subdued"},dropdownLinks.length+" more"),_react2.default.createElement(_eui.EuiIcon,{type:"arrowDown",color:"subdued"}));var anchorPosition="downRight";if(window.innerWidth<=768){anchorPosition="downLeft"}return _react2.default.createElement(_eui.EuiPopover,{id:"popover",ownFocus:true,button:openPopoverComponent,isOpen:_this.state.isPopoverOpen,closePopover:_this.closePopover,anchorPosition:anchorPosition},_react2.default.createElement("ul",null,dropdownLinks))};_this.renderLongLink=function(recentlyAccessedItem){var includeSeparator=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var separator=void 0;if(includeSeparator){separator=_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"homRecentlyAccessed__separator"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_eui.EuiIcon,{type:"dot",color:"subdued"})))}var EM_RATIO=.65;var minWidth=(recentlyAccessedItem.label.length<8?recentlyAccessedItem.label.length:8)*EM_RATIO;var style={minWidth:minWidth+"em"};return _react2.default.createElement(_react2.default.Fragment,{key:recentlyAccessedItem.id},separator,_react2.default.createElement(_eui.EuiFlexItem,{className:"homRecentlyAccessed__item",style:style,grow:false},_react2.default.createElement(_eui.EuiToolTip,{anchorClassName:"homRecentlyAccessed__anchor",position:"bottom",content:recentlyAccessedItem.label},_react2.default.createElement(_eui.EuiLink,{className:"homRecentlyAccessed__longLink",href:recentlyAccessedItem.link},recentlyAccessedItem.label))))};_this.renderRecentlyAccessed=function(){if(_this.props.recentlyAccessed.length<=NUM_LONG_LINKS){return _this.props.recentlyAccessed.map(function(item,index){var includeSeparator=true;if(index===0){includeSeparator=false}return _this.renderLongLink(item,includeSeparator)})}var links=[];for(var i=0;i<NUM_LONG_LINKS;i++){var includeSeparator=true;if(i===0){includeSeparator=false}links.push(_this.renderLongLink(_this.props.recentlyAccessed[i],includeSeparator))}return links};_this.state={isPopoverOpen:false};return _this}_createClass(RecentlyAccessed,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.recentlyAccessed.recentlyViewedTitle",defaultMessage:"Recently viewed"})))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd",wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"homRecentlyAccessed__flexItem"},_react2.default.createElement(_eui.EuiFlexGroup,null,this.renderRecentlyAccessed())),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},this.renderDropdown())))}}]);return RecentlyAccessed}(_react.Component);var recentlyAccessedShape=exports.recentlyAccessedShape=_propTypes2.default.shape({label:_propTypes2.default.string.isRequired,link:_propTypes2.default.string.isRequired,id:_propTypes2.default.string.isRequired});RecentlyAccessed.propTypes={recentlyAccessed:_propTypes2.default.arrayOf(recentlyAccessedShape).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTutorial=exports.getTutorials=undefined;var loadTutorials=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(baseUrl,{method:"get",credentials:"include",headers:headers});case 3:response=_context.sent;if(!(response.status>=300)){_context.next=6;break}throw new Error(_i18n.i18n.translate("kbn.home.loadTutorials.requestFailedErrorMessage",{defaultMessage:"Request failed with status code: {status}",values:{status:response.status}}));case 6:_context.next=8;return response.json();case 8:tutorials=_context.sent;tutorialsLoaded=true;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.loadTutorials.unableToLoadErrorMessage",{defaultMessage:"Unable to load tutorials"}),text:_context.t0.message});case 15:case"end":return _context.stop()}}},_callee,this,[[0,12]])}));return function loadTutorials(){return _ref.apply(this,arguments)}}();var getTutorials=exports.getTutorials=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(tutorialsLoaded){_context2.next=3;break}_context2.next=3;return loadTutorials();case 3:return _context2.abrupt("return",_lodash2.default.cloneDeep(tutorials));case 4:case"end":return _context2.stop()}}},_callee2,this)}));return function getTutorials(){return _ref2.apply(this,arguments)}}();var getTutorial=exports.getTutorial=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id){var tutorial;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(tutorialsLoaded){_context3.next=3;break}_context3.next=3;return loadTutorials();case 3:tutorial=tutorials.find(function(tutorial){return tutorial.id===id});if(!tutorial){_context3.next=6;break}return _context3.abrupt("return",_lodash2.default.cloneDeep(tutorial));case 6:case"end":return _context3.stop()}}},_callee3,this)}));return function getTutorial(_x){return _ref3.apply(this,arguments)}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n=__webpack_require__(8);var _notify=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var baseUrl=_chrome2.default.addBasePath("/api/kibana/home/tutorials");var headers=new Headers;headers.append("Accept","application/json");headers.append("Content-Type","application/json");headers.append("kbn-xsrf","kibana");var tutorials=[];var tutorialsLoaded=false},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var HAS_DATA=exports.HAS_DATA="has_data";var FETCHING=exports.FETCHING="FETCHING";var NO_DATA=exports.NO_DATA="NO_DATA";var NOT_CHECKED=exports.NOT_CHECKED="NOT_CHECKED";var ERROR=exports.ERROR="ERROR"},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1633)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFilter=addFilter;function addFilter(field){var values=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var operation=arguments[2];var index=arguments[3];var state=arguments[4];var filterManager=arguments[5];if(!Array.isArray(values)){values=[values]}filterManager.add(field,values,operation,index)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _loader=__webpack_require__(331);Object.keys(_loader).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _loader[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinder=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SavedObjectFinderUI=function(_React$Component){_inherits(SavedObjectFinderUI,_React$Component);function SavedObjectFinderUI(props){var _this2=this;_classCallCheck(this,SavedObjectFinderUI);var _this=_possibleConstructorReturn(this,(SavedObjectFinderUI.__proto__||Object.getPrototypeOf(SavedObjectFinderUI)).call(this,props));_this.onTableChange=function(_ref){var page=_ref.page,_ref$sort=_ref.sort,sort=_ref$sort===undefined?{}:_ref$sort;var sortField=sort.field,sortDirection=sort.direction;if(_this.state.sortField===sortField&&_this.state.sortDirection==="desc"&&sortDirection==="asc"){sortField=null;sortDirection=null}_this.setState({page:page.index,perPage:page.size,sortField:sortField,sortDirection:sortDirection})};_this.getPageOfItems=function(){var items=_this.state.items.slice();if(_this.state.sortField){items.sort(function(a,b){var fieldA=_lodash2.default.get(a,_this.state.sortField,"");var fieldB=_lodash2.default.get(b,_this.state.sortField,"");var order=1;if(_this.state.sortDirection==="desc"){order=-1}return order*fieldA.toLowerCase().localeCompare(fieldB.toLowerCase())})}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.slice(startIndex,lastIndex)};_this.debouncedFetch=_lodash2.default.debounce(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _chrome2.default.getSavedObjectsClient().find({type:_this.props.savedObjectType,fields:["title","visState"],search:filter?filter+"*":undefined,page:1,perPage:_chrome2.default.getUiSettingsClient().get("savedObjects:listingLimit"),searchFields:["title^3","description"]});case 2:resp=_context.sent;if(_this.props.savedObjectType==="visualization"&&!_chrome2.default.getUiSettingsClient().get("visualize:enableLabs")&&_this.props.visTypes){resp.savedObjects=resp.savedObjects.filter(function(savedObject){var typeName=JSON.parse(savedObject.attributes.visState).type;var visType=_this.props.visTypes.byName[typeName];return visType.stage!=="experimental"})}if(_this._isMounted){_context.next=6;break}return _context.abrupt("return");case 6:if(filter===_this.state.filter){_this.setState({isFetchingItems:false,items:resp.savedObjects.map(function(savedObject){return{title:savedObject.attributes.title,id:savedObject.id,type:savedObject.type}})})}case 7:case"end":return _context.stop()}}},_callee,_this2)}));return function(_x){return _ref2.apply(this,arguments)}}(),300);_this.fetchItems=function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.filter))};_this.state={items:[],isFetchingItems:false,page:0,perPage:10,filter:""};return _this}_createClass(SavedObjectFinderUI,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchItems()}},{key:"renderSearchBar",value:function renderSearchBar(){var _this3=this;var actionBtn=void 0;if(this.props.callToActionButton){actionBtn=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},this.props.callToActionButton)}return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFieldSearch,{placeholder:this.props.intl.formatMessage({id:"common.ui.savedObjects.finder.searchPlaceholder",defaultMessage:"Search…"}),fullWidth:true,value:this.state.filter,onChange:function onChange(e){_this3.setState({filter:e.target.value},_this3.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput"})),actionBtn)}},{key:"renderTable",value:function renderTable(){var _this4=this;var pagination={pageIndex:this.state.page,pageSize:this.state.perPage,totalItemCount:this.state.items.length,pageSizeOptions:[5,10]};var sorting={};if(this.state.sortField){sorting.sort={field:this.state.sortField,direction:this.state.sortDirection}}var tableColumns=[{field:"title",name:this.props.intl.formatMessage({id:"common.ui.savedObjects.finder.titleLabel",defaultMessage:"Title"}),sortable:true,render:function render(title,record){var _props=_this4.props,onChoose=_props.onChoose,makeUrl=_props.makeUrl;if(!onChoose&&!makeUrl){return _react2.default.createElement("span",null,title)}return _react2.default.createElement(_eui.EuiLink,{onClick:onChoose?function(){onChoose(record.id,record.type)}:undefined,href:makeUrl?makeUrl(record.id):undefined,"data-test-subj":"savedObjectTitle"+title.split(" ").join("-")},title)}}];var items=this.state.items.length===0?[]:this.getPageOfItems();return _react2.default.createElement(_eui.EuiBasicTable,{items:items,loading:this.state.isFetchingItems,columns:tableColumns,pagination:pagination,sorting:sorting,onChange:this.onTableChange,noItemsMessage:this.props.noItemsMessage})}},{key:"render",value:function render(){return _react2.default.createElement(_react2.default.Fragment,null,this.renderSearchBar(),this.renderTable())}}]);return SavedObjectFinderUI}(_react2.default.Component);SavedObjectFinderUI.propTypes={callToActionButton:_propTypes2.default.node,onChoose:_propTypes2.default.func,makeUrl:_propTypes2.default.func,noItemsMessage:_propTypes2.default.node,savedObjectType:_propTypes2.default.oneOf(["visualization","search"]).isRequired,visTypes:_propTypes2.default.object};var SavedObjectFinder=exports.SavedObjectFinder=(0,_react3.injectI18n)(SavedObjectFinderUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Pager=undefined;var _pager=__webpack_require__(570);Object.defineProperty(exports,"Pager",{enumerable:true,get:function get(){return _pager.Pager}});__webpack_require__(1674)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function clamp(val,min,max){return Math.min(Math.max(min,val),max)}var Pager=exports.Pager=function(){function Pager(totalItems,pageSize,startingPage){_classCallCheck(this,Pager);this.currentPage=startingPage;this.totalItems=totalItems;this.pageSize=pageSize;this.startIndex=0;this.updateMeta()}_createClass(Pager,[{key:"nextPage",value:function nextPage(){this.currentPage+=1;this.updateMeta()}},{key:"previousPage",value:function previousPage(){this.currentPage-=1;this.updateMeta()}},{key:"setTotalItems",value:function setTotalItems(count){this.totalItems=count;this.updateMeta()}},{key:"setPageSize",value:function setPageSize(count){this.pageSize=count;this.updateMeta()}},{key:"updateMeta",value:function updateMeta(){this.totalPages=Math.ceil(this.totalItems/this.pageSize);this.currentPage=clamp(this.currentPage,1,this.totalPages);this.startItem=(this.currentPage-1)*this.pageSize+1;this.startItem=clamp(this.startItem,0,this.totalItems);this.endItem=this.startItem-1+this.pageSize;this.endItem=clamp(this.endItem,0,this.totalItems);this.startIndex=this.startItem-1}},{key:"pageCount",get:function get(){return Math.ceil(this.totalItems/this.pageSize)}},{key:"hasNextPage",get:function get(){return this.currentPage<this.totalPages}},{key:"hasPreviousPage",get:function get(){return this.currentPage>1}}]);return Pager}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var PanelActionsStore=function(){function PanelActionsStore(){this.actions=[]}PanelActionsStore.prototype.initializeFromRegistry=function(panelActionsRegistry){var _this=this;panelActionsRegistry.forEach(function(panelAction){_this.actions.push(panelAction)})};return PanelActionsStore}();var panelActionsStore=exports.panelActionsStore=new PanelActionsStore},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var TopNavIds=exports.TopNavIds={ADD:"add",SHARE:"share",DOCUMENTATION:"documentation",OPTIONS:"options",SAVE:"save",EXIT_EDIT_MODE:"exitEditMode",ENTER_EDIT_MODE:"enterEditMode",CLONE:"clone",FULL_SCREEN:"fullScreenMode"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelUtils=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);var _dashboard_constants=__webpack_require__(58);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var PANEL_HEIGHT_SCALE_FACTOR=5;var PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS=4;var PANEL_WIDTH_SCALE_FACTOR=4;var PanelUtils=exports.PanelUtils=function(){function PanelUtils(){_classCallCheck(this,PanelUtils)}_createClass(PanelUtils,null,[{key:"convertPanelDataPre_6_1",value:function convertPanelDataPre_6_1(panel){["col","row"].forEach(function(key){if(!_lodash2.default.has(panel,key)){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixOneZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.1.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}});panel.gridData={x:panel.col-1,y:panel.row-1,w:panel.size_x||_dashboard_constants.DEFAULT_PANEL_WIDTH,h:panel.size_y||_dashboard_constants.DEFAULT_PANEL_HEIGHT,i:panel.panelIndex.toString()};panel.version=_chrome2.default.getKibanaVersion();panel.panelIndex=panel.panelIndex.toString();delete panel.size_x;delete panel.size_y;delete panel.row;delete panel.col;return panel}},{key:"convertPanelDataPre_6_3",value:function convertPanelDataPre_6_3(panel,useMargins){["w","x","h","y"].forEach(function(key){if(!_lodash2.default.has(panel.gridData,key)){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.unableToMigratePanelDataForSixThreeZeroErrorMessage",{defaultMessage:'Unable to migrate panel data for "6.3.0" backwards compatibility, panel does not contain expected field: {key}',values:{key:key}}))}});var heightScaleFactor=useMargins?PANEL_HEIGHT_SCALE_FACTOR_WITH_MARGINS:PANEL_HEIGHT_SCALE_FACTOR;panel.gridData.w=panel.gridData.w*PANEL_WIDTH_SCALE_FACTOR;panel.gridData.x=panel.gridData.x*PANEL_WIDTH_SCALE_FACTOR;panel.gridData.h=panel.gridData.h*heightScaleFactor;panel.gridData.y=panel.gridData.y*heightScaleFactor;panel.version=_chrome2.default.getKibanaVersion();return panel}},{key:"parseVersion",value:function parseVersion(){var version=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"6.0.0";var versionSplit=version.split(".");if(versionSplit.length<3){throw new Error(_i18n.i18n.translate("kbn.dashboard.panel.invalidVersionErrorMessage",{defaultMessage:"Invalid version, {version}, expected {semver}",values:{version:version,semver:"<major>.<minor>.<patch>"}}))}return{major:parseInt(versionSplit[0],10),minor:parseInt(versionSplit[1],10)}}},{key:"initPanelIndexes",value:function initPanelIndexes(panels){var maxIndex=this.getMaxPanelIndex(panels);panels.forEach(function(panel){if(!panel.panelIndex){panel.panelIndex=maxIndex++}})}},{key:"getMaxPanelIndex",value:function getMaxPanelIndex(panels){var maxId=panels.reduce(function(id,panel){return Math.max(id,panel.panelIndex||id)},0);return++maxId}}]);return PanelUtils}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.store=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _redux=__webpack_require__(363);var _reduxThunk=__webpack_require__(1955);var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _types=__webpack_require__(575);var _dashboard_view_mode=__webpack_require__(36);var _reducers=__webpack_require__(1688);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var enhancers=[(0,_redux.applyMiddleware)(_reduxThunk2.default)];var store=exports.store=(0,_redux.createStore)(_reducers.reducers,{dashboard:{embeddables:{},metadata:{title:"New Dashboard"},panels:{},view:{filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:_types.QueryLanguageType.LUCENE,query:""},timeRange:{from:"now-15m",to:"now"},useMargins:true,viewMode:_dashboard_view_mode.DashboardViewMode.VIEW}}},_redux.compose.apply(void 0,tslib_1.__spread(enhancers)))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var QueryLanguageType=exports.QueryLanguageType=undefined;(function(QueryLanguageType){QueryLanguageType["KUERY"]="kuery";QueryLanguageType["LUCENE"]="lucene"})(QueryLanguageType||(exports.QueryLanguageType=QueryLanguageType={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setPanels=exports.updatePanels=exports.setPanelTitle=exports.resetPanelTitle=exports.updatePanel=exports.deletePanel=exports.PanelActionTypeKeys=undefined;var _reduxActions=__webpack_require__(261);var PanelActionTypeKeys=exports.PanelActionTypeKeys=undefined;(function(PanelActionTypeKeys){PanelActionTypeKeys["DELETE_PANEL"]="DELETE_PANEL";PanelActionTypeKeys["UPDATE_PANEL"]="UPDATE_PANEL";PanelActionTypeKeys["RESET_PANEl_TITLE"]="RESET_PANEl_TITLE";PanelActionTypeKeys["SET_PANEl_TITLE"]="SET_PANEl_TITLE";PanelActionTypeKeys["UPDATE_PANELS"]="UPDATE_PANELS";PanelActionTypeKeys["SET_PANELS"]="SET_PANELS"})(PanelActionTypeKeys||(exports.PanelActionTypeKeys=PanelActionTypeKeys={}));var deletePanel=exports.deletePanel=(0,_reduxActions.createAction)(PanelActionTypeKeys.DELETE_PANEL);var updatePanel=exports.updatePanel=(0,_reduxActions.createAction)(PanelActionTypeKeys.UPDATE_PANEL);var resetPanelTitle=exports.resetPanelTitle=(0,_reduxActions.createAction)(PanelActionTypeKeys.RESET_PANEl_TITLE);var setPanelTitle=exports.setPanelTitle=(0,_reduxActions.createAction)(PanelActionTypeKeys.SET_PANEl_TITLE);var updatePanels=exports.updatePanels=(0,_reduxActions.createAction)(PanelActionTypeKeys.UPDATE_PANELS);var setPanels=exports.setPanels=(0,_reduxActions.createAction)(PanelActionTypeKeys.SET_PANELS)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard_selectors=__webpack_require__(1693);Object.keys(_dashboard_selectors).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _dashboard_selectors[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard_panel_container=__webpack_require__(1699);Object.defineProperty(exports,"DashboardPanel",{enumerable:true,get:function get(){return _dashboard_panel_container.DashboardPanelContainer}});var _panel_state=__webpack_require__(1714);Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel_state.createPanelState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _save_dashboard=__webpack_require__(1715);Object.defineProperty(exports,"saveDashboard",{enumerable:true,get:function get(){return _save_dashboard.saveDashboard}});var _get_app_state_defaults=__webpack_require__(1717);Object.defineProperty(exports,"getAppStateDefaults",{enumerable:true,get:function get(){return _get_app_state_defaults.getAppStateDefaults}});var _migrate_app_state=__webpack_require__(1718);Object.defineProperty(exports,"migrateAppState",{enumerable:true,get:function get(){return _migrate_app_state.migrateAppState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PAGE_FOOTER_COMPONENT=exports.PAGE_SUBTITLE_COMPONENT=exports.PAGE_TITLE_COMPONENT=undefined;exports.registerDefaultComponents=registerDefaultComponents;var _component_registry=__webpack_require__(346);var _page_title=__webpack_require__(1747);var _page_subtitle=__webpack_require__(1749);var _page_footer=__webpack_require__(1751);var PAGE_TITLE_COMPONENT=exports.PAGE_TITLE_COMPONENT="advanced_settings_page_title";var PAGE_SUBTITLE_COMPONENT=exports.PAGE_SUBTITLE_COMPONENT="advanced_settings_page_subtitle";var PAGE_FOOTER_COMPONENT=exports.PAGE_FOOTER_COMPONENT="advanced_settings_page_footer";function registerDefaultComponents(){(0,_component_registry.tryRegisterSettingsComponent)(PAGE_TITLE_COMPONENT,_page_title.PageTitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_SUBTITLE_COMPONENT,_page_subtitle.PageSubtitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_FOOTER_COMPONENT,_page_footer.PageFooter)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);__webpack_require__(1960);__webpack_require__(452);var _notify=__webpack_require__(10);var _eui=__webpack_require__(2);var _lib=__webpack_require__(253);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FieldUI=function(_PureComponent){_inherits(FieldUI,_PureComponent);function FieldUI(props){_classCallCheck(this,FieldUI);var _this=_possibleConstructorReturn(this,(FieldUI.__proto__||Object.getPrototypeOf(FieldUI)).call(this,props));_initialiseProps.call(_this);var _this$props$setting=_this.props.setting,type=_this$props$setting.type,value=_this$props$setting.value,defVal=_this$props$setting.defVal;var editableValue=_this.getEditableValue(type,value,defVal);_this.state={isInvalid:false,error:null,loading:false,changeImage:false,savedValue:editableValue,unsavedValue:editableValue,isJsonArray:type==="json"?Array.isArray(JSON.parse(defVal||"{}")):false};_this.changeImageForm=null;return _this}_createClass(FieldUI,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var unsavedValue=this.state.unsavedValue;var _nextProps$setting=nextProps.setting,type=_nextProps$setting.type,value=_nextProps$setting.value,defVal=_nextProps$setting.defVal;var editableValue=this.getEditableValue(type,value,defVal);this.setState({savedValue:editableValue,unsavedValue:value===null||value===undefined?editableValue:unsavedValue})}},{key:"getEditableValue",value:function getEditableValue(type,value,defVal){var val=value===null||value===undefined?defVal:value;switch(type){case"array":return val.join(", ");case"boolean":return!!val;case"number":return Number(val);case"image":return val;default:return val||""}}},{key:"getDisplayedDefaultValue",value:function getDisplayedDefaultValue(type,defVal){var optionLabels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(defVal===undefined||defVal===null||defVal===""){return"null"}switch(type){case"array":return defVal.join(", ");case"select":return optionLabels.hasOwnProperty(defVal)?optionLabels[defVal]:String(defVal);default:return String(defVal)}}},{key:"setLoading",value:function setLoading(loading){this.setState({loading:loading})}},{key:"clearError",value:function clearError(){this.setState({isInvalid:false,error:null})}},{key:"getImageAsBase64",value:function getImageAsBase64(file){if(!file instanceof File){return null}var reader=new FileReader;reader.readAsDataURL(file);return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(err){reject(err)}})}},{key:"renderField",value:function renderField(setting){var _this2=this;var _state=this.state,loading=_state.loading,changeImage=_state.changeImage,unsavedValue=_state.unsavedValue;var name=setting.name,value=setting.value,type=setting.type,options=setting.options,_setting$optionLabels=setting.optionLabels,optionLabels=_setting$optionLabels===undefined?{}:_setting$optionLabels,isOverridden=setting.isOverridden,ariaName=setting.ariaName;switch(type){case"boolean":return _react2.default.createElement(_eui.EuiSwitch,{label:!!unsavedValue?_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.onLabel",defaultMessage:"On"}):_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.offLabel",defaultMessage:"Off"}),checked:!!unsavedValue,onChange:this.onFieldChange,disabled:loading||isOverridden,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-"+name,"aria-label":ariaName});case"markdown":case"json":return _react2.default.createElement("div",{"data-test-subj":"advancedSetting-editField-"+name},_react2.default.createElement(_eui.EuiCodeEditor,{"aria-label":ariaName,mode:type,theme:"textmate",value:unsavedValue,onChange:this.onCodeEditorChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:isOverridden,setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity}}));case"image":if(!(0,_lib.isDefaultValue)(setting)&&!changeImage){return _react2.default.createElement(_eui.EuiImage,{"aria-label":ariaName,allowFullScreen:true,url:value,alt:name})}else{return _react2.default.createElement(_eui.EuiFilePicker,{disabled:loading||isOverridden,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:function ref(input){_this2.changeImageForm=input},onKeyDown:this.onFieldEscape,"data-test-subj":"advancedSetting-editField-"+name})}case"select":return _react2.default.createElement(_eui.EuiSelect,{"aria-label":ariaName,value:unsavedValue,options:options.map(function(option){return{text:optionLabels.hasOwnProperty(option)?optionLabels[option]:option,value:option}}),onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-"+name});case"number":return _react2.default.createElement(_eui.EuiFieldNumber,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-"+name});default:return _react2.default.createElement(_eui.EuiFieldText,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-"+name})}}},{key:"renderLabel",value:function renderLabel(setting){return setting.name}},{key:"renderHelpText",value:function renderHelpText(setting){if(setting.isOverridden){return _react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}))}var defaultLink=this.renderResetToDefaultLink(setting);var imageLink=this.renderChangeImageLink(setting);if(defaultLink||imageLink){return _react2.default.createElement("span",null,defaultLink,imageLink)}return null}},{key:"renderTitle",value:function renderTitle(setting){return _react2.default.createElement("h3",null,setting.displayName||setting.name,setting.isCustom?_react2.default.createElement(_eui.EuiIconTip,{type:"asterisk",color:"primary","aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.customSettingAriaLabel",defaultMessage:"Custom setting"}),content:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"")}},{key:"renderDescription",value:function renderDescription(setting){var description=void 0;if(_react2.default.isValidElement(setting.description)){description=setting.description}else{description=_react2.default.createElement("div",{dangerouslySetInnerHTML:{__html:setting.description}})}return _react2.default.createElement(_react.Fragment,null,description,this.renderDefaultValue(setting))}},{key:"renderDefaultValue",value:function renderDefaultValue(setting){var type=setting.type,defVal=setting.defVal,optionLabels=setting.optionLabels;if((0,_lib.isDefaultValue)(setting)){return}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"xs"},type==="json"?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:_react2.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:defVal.length>=500?300:null},this.getDisplayedDefaultValue(type,defVal))}})):_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:_react2.default.createElement(_eui.EuiCode,null,this.getDisplayedDefaultValue(type,defVal,optionLabels))}}))))}},{key:"renderResetToDefaultLink",value:function renderResetToDefaultLink(setting){var ariaName=setting.ariaName,name=setting.name;if((0,_lib.isDefaultValue)(setting)){return}return _react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiLink,{"aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.resetToDefaultLinkAriaLabel",defaultMessage:"Reset {ariaName} to default"},{ariaName:ariaName}),onClick:this.resetField,"data-test-subj":"advancedSetting-resetField-"+name},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}},{key:"renderChangeImageLink",value:function renderChangeImageLink(setting){var changeImage=this.state.changeImage;var type=setting.type,value=setting.value,ariaName=setting.ariaName,name=setting.name;if(type!=="image"||!value||changeImage){return}return _react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiLink,{"aria-label":this.props.intl.formatMessage({id:"kbn.management.settings.field.changeImageLinkAriaLabel",defaultMessage:"Change {ariaName}"},{ariaName:ariaName}),onClick:this.changeImage,"data-test-subj":"advancedSetting-changeImage-"+name},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.changeImageLinkText",defaultMessage:"Change image"})))}},{key:"renderActions",value:function renderActions(setting){var _this3=this;var ariaName=setting.ariaName,name=setting.name;var _state2=this.state,loading=_state2.loading,isInvalid=_state2.isInvalid,changeImage=_state2.changeImage,savedValue=_state2.savedValue,unsavedValue=_state2.unsavedValue;var isDisabled=loading||setting.isOverridden;var intl=this.props.intl;if(savedValue===unsavedValue&&!changeImage){return}return _react2.default.createElement(_eui.EuiFormRow,{className:"mgtAdvancedSettings__fieldActions",hasEmptyLabelSpace:true},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,"aria-label":intl.formatMessage({id:"kbn.management.settings.field.saveButtonAriaLabel",defaultMessage:"Save {ariaName}"},{ariaName:ariaName}),onClick:this.saveEdit,disabled:isDisabled||isInvalid,"data-test-subj":"advancedSetting-saveEditField-"+name},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{"aria-label":intl.formatMessage({id:"kbn.management.settings.field.cancelEditingButtonAriaLabel",defaultMessage:"Cancel editing {ariaName}"},{ariaName:ariaName}),onClick:function onClick(){return changeImage?_this3.cancelChangeImage():_this3.cancelEdit()},disabled:isDisabled,"data-test-subj":"advancedSetting-cancelEditField-"+name},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.cancelEditingButtonLabel",defaultMessage:"Cancel"})))))}},{key:"render",value:function render(){var setting=this.props.setting;var _state3=this.state,error=_state3.error,isInvalid=_state3.isInvalid;return _react2.default.createElement(_eui.EuiFlexGroup,{className:"mgtAdvancedSettings__field"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiDescribedFormGroup,{className:"mgtAdvancedSettings__fieldWrapper",title:this.renderTitle(setting),description:this.renderDescription(setting),idAria:setting.name+"-aria"},_react2.default.createElement(_eui.EuiFormRow,{isInvalid:isInvalid,error:error,label:this.renderLabel(setting),helpText:this.renderHelpText(setting),describedByIds:[setting.name+"-aria"],className:"mgtAdvancedSettings__fieldRow"},this.renderField(setting)))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},this.renderActions(setting)))}}]);return FieldUI}(_react.PureComponent);FieldUI.propTypes={setting:_propTypes2.default.object.isRequired,save:_propTypes2.default.func.isRequired,clear:_propTypes2.default.func.isRequired};var _initialiseProps=function _initialiseProps(){var _this4=this;this.onCodeEditorChange=function(value){var type=_this4.props.setting.type;var isJsonArray=_this4.state.isJsonArray;var newUnsavedValue=undefined;var isInvalid=false;var error=null;switch(type){case"json":newUnsavedValue=value.trim()||(isJsonArray?"[]":"{}");try{JSON.parse(newUnsavedValue)}catch(e){isInvalid=true;error=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.field.codeEditorSyntaxErrorMessage",defaultMessage:"Invalid JSON syntax"})}break;default:newUnsavedValue=value}_this4.setState({error:error,isInvalid:isInvalid,unsavedValue:newUnsavedValue})};this.onFieldChange=function(e){var value=e.target.value;var type=_this4.props.setting.type;var unsavedValue=_this4.state.unsavedValue;var newUnsavedValue=undefined;switch(type){case"boolean":newUnsavedValue=!unsavedValue;break;case"number":newUnsavedValue=Number(value);break;default:newUnsavedValue=value}_this4.setState({unsavedValue:newUnsavedValue})};this.onFieldKeyDown=function(_ref){var keyCode=_ref.keyCode;if(keyCode===_eui.keyCodes.ENTER){_this4.saveEdit()}if(keyCode===_eui.keyCodes.ESCAPE){_this4.cancelEdit()}};this.onFieldEscape=function(_ref2){var keyCode=_ref2.keyCode;if(keyCode===_eui.keyCodes.ESCAPE){_this4.cancelEdit()}};this.onImageChange=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(files){var file,maxSize,base64Image,isInvalid;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(files.length){_context.next=4;break}_this4.clearError();_this4.setState({unsavedValue:null});return _context.abrupt("return");case 4:file=files[0];maxSize=_this4.props.setting.options.maxSize;_context.prev=6;_context.next=9;return _this4.getImageAsBase64(file);case 9:base64Image=_context.sent;isInvalid=!!(maxSize&&maxSize.length&&base64Image.length>maxSize.length);_this4.setState({isInvalid:isInvalid,error:isInvalid?_this4.props.intl.formattedMessage({id:"kbn.management.settings.field.imageTooLargeErrorMessage",defaultMessage:"Image is too large, maximum size is {maxSizeDescription}"},{maxSizeDescription:maxSize.description}):null,changeImage:true,unsavedValue:base64Image});_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](6);_notify.toastNotifications.addDanger(_this4.props.intl.formatMessage({id:"kbn.management.settings.field.imageChangeErrorMessage",defaultMessage:"Image could not be saved"}));_this4.cancelChangeImage();case 18:case"end":return _context.stop()}}},_callee,_this4,[[6,14]])}));return function(_x2){return _ref3.apply(this,arguments)}}();this.changeImage=function(){_this4.setState({changeImage:true})};this.cancelChangeImage=function(){var savedValue=_this4.state.savedValue;if(_this4.changeImageForm){_this4.changeImageForm.fileInput.value=null;_this4.changeImageForm.handleChange()}_this4.setState({changeImage:false,unsavedValue:savedValue})};this.cancelEdit=function(){var savedValue=_this4.state.savedValue;_this4.clearError();_this4.setState({unsavedValue:savedValue})};this.saveEdit=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _props$setting,name,defVal,type,_state4,changeImage,savedValue,unsavedValue,isJsonArray,valueToSave,isSameValue;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_props$setting=_this4.props.setting,name=_props$setting.name,defVal=_props$setting.defVal,type=_props$setting.type;_state4=_this4.state,changeImage=_state4.changeImage,savedValue=_state4.savedValue,unsavedValue=_state4.unsavedValue,isJsonArray=_state4.isJsonArray;if(!(savedValue===unsavedValue)){_context2.next=4;break}return _context2.abrupt("return");case 4:valueToSave=unsavedValue;isSameValue=false;_context2.t0=type;_context2.next=_context2.t0==="array"?9:_context2.t0==="json"?12:14;break;case 9:valueToSave=valueToSave.split(",").map(function(val){return val.trim()});isSameValue=valueToSave.join(",")===defVal.join(",");return _context2.abrupt("break",15);case 12:valueToSave=valueToSave.trim();valueToSave=valueToSave||(isJsonArray?"[]":"{}");case 14:isSameValue=valueToSave===defVal;case 15:_this4.setLoading(true);_context2.prev=16;if(!isSameValue){_context2.next=22;break}_context2.next=20;return _this4.props.clear(name);case 20:_context2.next=24;break;case 22:_context2.next=24;return _this4.props.save(name,valueToSave);case 24:if(changeImage){_this4.cancelChangeImage()}_context2.next=30;break;case 27:_context2.prev=27;_context2.t1=_context2["catch"](16);_notify.toastNotifications.addDanger(_this4.props.intl.formatMessage({id:"kbn.management.settings.field.saveFieldErrorMessage",defaultMessage:"Unable to save {name}"},{name:name}));case 30:_this4.setLoading(false);case 31:case"end":return _context2.stop()}}},_callee2,_this4,[[16,27]])}));this.resetField=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var name;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:name=_this4.props.setting.name;_this4.setLoading(true);_context3.prev=2;_context3.next=5;return _this4.props.clear(name);case 5:_this4.cancelChangeImage();_this4.clearError();_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](2);_notify.toastNotifications.addDanger(_this4.props.intl.formatMessage({id:"kbn.management.settings.field.resetFieldErrorMessage",defaultMessage:"Unable to reset {name}"},{name:name}));case 12:_this4.setLoading(false);case 13:case"end":return _context3.stop()}}},_callee3,_this4,[[2,9]])}))};var Field=exports.Field=(0,_react3.injectI18n)(FieldUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAriaName=getAriaName;var _lodash=__webpack_require__(0);function getAriaName(name){return(0,_lodash.words)(name).map(function(word){return word.toLowerCase()}).join(" ")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DEFAULT_CATEGORY=exports.DEFAULT_CATEGORY="general"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexBreadcrumbs=getIndexBreadcrumbs;exports.getViewBreadcrumbs=getViewBreadcrumbs;var _management=__webpack_require__(74);var _i18n=__webpack_require__(8);var _saved_object_registry=__webpack_require__(72);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function getIndexBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.savedObjects.indexBreadcrumb",{defaultMessage:"Saved objects"}),href:"#/management/kibana/objects"}]}function getViewBreadcrumbs($routeParams,$injector){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);return[].concat(_toConsumableArray(getIndexBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.management.savedObjects.editBreadcrumb",{defaultMessage:"Edit {savedObjectType}",values:{savedObjectType:service.type}})}])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectsTable=exports.INCLUDED_TYPES=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(0);var _header=__webpack_require__(1779);var _flyout=__webpack_require__(1781);var _relationships=__webpack_require__(1783);var _table=__webpack_require__(1793);var _notify=__webpack_require__(10);var _eui=__webpack_require__(2);var _lib=__webpack_require__(254);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var INCLUDED_TYPES=exports.INCLUDED_TYPES=["index-pattern","visualization","dashboard","search"];var ObjectsTableUI=function(_Component){_inherits(ObjectsTableUI,_Component);function ObjectsTableUI(props){var _this2=this;_classCallCheck(this,ObjectsTableUI);var _this=_possibleConstructorReturn(this,(ObjectsTableUI.__proto__||Object.getPrototypeOf(ObjectsTableUI)).call(this,props));_this.fetchCounts=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _parseQuery,queryText,visibleTypes,filteredTypes,filteredSavedObjectCounts,exportAllOptions,exportAllSelectedOptions,savedObjectCounts;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_parseQuery=(0,_lib.parseQuery)(_this.state.activeQuery),queryText=_parseQuery.queryText,visibleTypes=_parseQuery.visibleTypes;filteredTypes=INCLUDED_TYPES.filter(function(type){return!visibleTypes||visibleTypes.includes(type)});_context.next=4;return(0,_lib.getSavedObjectCounts)(_this.props.$http,filteredTypes,queryText);case 4:filteredSavedObjectCounts=_context.sent;exportAllOptions=[];exportAllSelectedOptions={};Object.keys(filteredSavedObjectCounts).forEach(function(id){exportAllOptions.push({id:id,label:id+" ("+(filteredSavedObjectCounts[id]||0)+")"});exportAllSelectedOptions[id]=true});_context.next=10;return(0,_lib.getSavedObjectCounts)(_this.props.$http,INCLUDED_TYPES,queryText);case 10:savedObjectCounts=_context.sent;_this.setState(function(state){return _extends({},state,{savedObjectCounts:savedObjectCounts,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions})});case 12:case"end":return _context.stop()}}},_callee,_this2)}));_this.fetchSavedObjects=function(){_this.setState({isSearching:true},_this.debouncedFetch)};_this.debouncedFetch=(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this$props,intl,savedObjectsClient,_this$state,query,page,perPage,_parseQuery2,queryText,visibleTypes,findOptions,resp;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,intl=_this$props.intl,savedObjectsClient=_this$props.savedObjectsClient;_this$state=_this.state,query=_this$state.activeQuery,page=_this$state.page,perPage=_this$state.perPage;_parseQuery2=(0,_lib.parseQuery)(query),queryText=_parseQuery2.queryText,visibleTypes=_parseQuery2.visibleTypes;findOptions={search:queryText?queryText+"*":undefined,perPage:perPage,page:page+1,fields:["title","id"],searchFields:["title"],type:INCLUDED_TYPES.filter(function(type){return!visibleTypes||visibleTypes.includes(type)})};if(findOptions.type.length>1){findOptions.sortField="type"}resp=void 0;_context2.prev=6;_context2.next=9;return savedObjectsClient.find(findOptions);case 9:resp=_context2.sent;_context2.next=17;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](6);if(_this._isMounted){_this.setState({isSearching:false})}_notify.toastNotifications.addDanger({title:intl.formatMessage({id:"kbn.management.objects.objectsTable.unableFindSavedObjectsNotificationMessage",defaultMessage:"Unable find saved objects"}),text:""+_context2.t0});return _context2.abrupt("return");case 17:if(_this._isMounted){_context2.next=19;break}return _context2.abrupt("return");case 19:_this.setState(function(_ref3){var activeQuery=_ref3.activeQuery;if(activeQuery.text!==query.text){return{}}return{savedObjects:resp.savedObjects.map(function(savedObject){return{title:savedObject.attributes.title,type:savedObject.type,id:savedObject.id,icon:(0,_lib.getSavedObjectIcon)(savedObject.type)}}),filteredItemCount:resp.total,isSearching:false}});case 20:case"end":return _context2.stop()}}},_callee2,_this2,[[6,12]])})),300);_this.refreshData=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all([_this.fetchSavedObjects(),_this.fetchCounts()]);case 2:case"end":return _context3.stop()}}},_callee3,_this2)}));_this.onSelectionChanged=function(selection){var selectedSavedObjects=selection.map(function(item){return{id:item.id,type:item.type}});_this.setState({selectedSavedObjects:selectedSavedObjects})};_this.onQueryChange=function(_ref5){var query=_ref5.query;_this.setState({activeQuery:query,page:0,selectedSavedObjects:[]},function(){_this.fetchSavedObjects();_this.fetchCounts()})};_this.onTableChange=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(table){var _ref7,page,perPage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref7=table.page||{},page=_ref7.index,perPage=_ref7.size;_this.setState({page:page,perPage:perPage,selectedSavedObjects:[]},_this.fetchSavedObjects);case 2:case"end":return _context4.stop()}}},_callee4,_this2)}));return function(_x){return _ref6.apply(this,arguments)}}();_this.onShowRelationships=function(id,type,title){_this.setState({isShowingRelationships:true,relationshipId:id,relationshipType:type,relationshipTitle:title})};_this.onHideRelationships=function(){_this.setState({isShowingRelationships:false,relationshipId:undefined,relationshipType:undefined,relationshipTitle:undefined})};_this.onExport=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var savedObjectsClient,selectedSavedObjects,objects;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:savedObjectsClient=_this.props.savedObjectsClient;selectedSavedObjects=_this.state.selectedSavedObjects;_context5.next=4;return savedObjectsClient.bulkGet(selectedSavedObjects);case 4:objects=_context5.sent;_context5.next=7;return(0,_lib.retrieveAndExportDocs)(objects.savedObjects,savedObjectsClient);case 7:case"end":return _context5.stop()}}},_callee5,_this2)}));_this.onExportAll=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var $http,exportAllSelectedOptions,exportTypes,results;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:$http=_this.props.$http;exportAllSelectedOptions=_this.state.exportAllSelectedOptions;exportTypes=Object.entries(exportAllSelectedOptions).reduce(function(accum,_ref10){var _ref11=_slicedToArray(_ref10,2),id=_ref11[0],selected=_ref11[1];if(selected){accum.push(id)}return accum},[]);_context6.next=5;return(0,_lib.scanAllTypes)($http,exportTypes);case 5:results=_context6.sent;(0,_lib.saveToFile)(JSON.stringify((0,_lodash.flattenDeep)(results),null,2));case 7:case"end":return _context6.stop()}}},_callee6,_this2)}));_this.finishImport=function(){_this.hideImportFlyout();_this.fetchSavedObjects();_this.fetchCounts()};_this.showImportFlyout=function(){_this.setState({isShowingImportFlyout:true})};_this.hideImportFlyout=function(){_this.setState({isShowingImportFlyout:false})};_this.onDelete=function(){_this.setState({isShowingDeleteConfirmModal:true})};_this.delete=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var savedObjectsClient,_this$state2,selectedSavedObjects,isDeleting,indexPatterns,objects,deletes;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:savedObjectsClient=_this.props.savedObjectsClient;_this$state2=_this.state,selectedSavedObjects=_this$state2.selectedSavedObjects,isDeleting=_this$state2.isDeleting;if(!isDeleting){_context7.next=4;break}return _context7.abrupt("return");case 4:_this.setState({isDeleting:true});indexPatterns=selectedSavedObjects.filter(function(object){return object.type==="index-pattern"});if(!indexPatterns.length){_context7.next=9;break}_context7.next=9;return _this.props.indexPatterns.cache.clearAll();case 9:_context7.next=11;return savedObjectsClient.bulkGet(selectedSavedObjects);case 11:objects=_context7.sent;deletes=objects.savedObjects.map(function(object){return savedObjectsClient.delete(object.type,object.id)});_context7.next=15;return Promise.all(deletes);case 15:_this.setState({selectedSavedObjects:[]});_context7.next=18;return _this.fetchSavedObjects();case 18:_context7.next=20;return _this.fetchCounts();case 20:_this.setState({isShowingDeleteConfirmModal:false,isDeleting:false});case 21:case"end":return _context7.stop()}}},_callee7,_this2)}));_this.getRelationships=function(){var _ref13=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(type,id){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return(0,_lib.getRelationships)(type,id,_this.props.$http,_this.props.basePath);case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8,_this2)}));return function(_x2,_x3){return _ref13.apply(this,arguments)}}();_this.state={totalCount:0,page:0,perPage:props.perPageConfig||50,savedObjects:[],savedObjectCounts:INCLUDED_TYPES.reduce(function(typeToCountMap,type){typeToCountMap[type]=0;return typeToCountMap},{}),activeQuery:_eui.Query.parse(""),selectedSavedObjects:[],isShowingImportFlyout:false,isSearching:false,filteredItemCount:0,isShowingRelationships:false,relationshipId:undefined,relationshipType:undefined,relationshipTitle:undefined,isShowingDeleteConfirmModal:false,isShowingExportAllOptionsModal:false,isDeleting:false,exportAllOptions:[],exportAllSelectedOptions:{}};return _this}_createClass(ObjectsTableUI,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchSavedObjects();this.fetchCounts()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"renderFlyout",value:function renderFlyout(){if(!this.state.isShowingImportFlyout){return null}return _react2.default.createElement(_flyout.Flyout,{close:this.hideImportFlyout,done:this.finishImport,services:this.props.services,indexPatterns:this.props.indexPatterns,newIndexPatternUrl:this.props.newIndexPatternUrl})}},{key:"renderRelationships",value:function renderRelationships(){if(!this.state.isShowingRelationships){return null}return _react2.default.createElement(_relationships.Relationships,{id:this.state.relationshipId,type:this.state.relationshipType,title:this.state.relationshipTitle,getRelationships:this.getRelationships,close:this.onHideRelationships,getDashboardUrl:this.props.getDashboardUrl,getEditUrl:this.props.getEditUrl,goInApp:this.props.goInApp})}},{key:"renderDeleteConfirmModal",value:function renderDeleteConfirmModal(){var _this3=this;var _state=this.state,isShowingDeleteConfirmModal=_state.isShowingDeleteConfirmModal,isDeleting=_state.isDeleting,selectedSavedObjects=_state.selectedSavedObjects;var intl=this.props.intl;if(!isShowingDeleteConfirmModal){return null}var modal=void 0;if(isDeleting){modal=_react2.default.createElement(_eui.EuiLoadingKibana,{size:"xl"})}else{var onCancel=function onCancel(){_this3.setState({isShowingDeleteConfirmModal:false})};var onConfirm=function onConfirm(){_this3.delete()};modal=_react2.default.createElement(_eui.EuiConfirmModal,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModalTitle",defaultMessage:"Delete saved objects"}),onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isDeleting?_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteProcessButtonLabel",defaultMessage:"Deleting…"}):_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.deleteSavedObjectsConfirmModalDescription",defaultMessage:"This action will delete the following saved objects:"})),_react2.default.createElement(_eui.EuiInMemoryTable,{items:selectedSavedObjects,columns:[{field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.typeColumnName",defaultMessage:"Type"}),width:"50px",render:function render(type){return _react2.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react2.default.createElement(_eui.EuiIcon,{type:(0,_lib.getSavedObjectIcon)(type)}))}},{field:"id",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.idColumnName",defaultMessage:"Id/Name"})}],pagination:true,sorting:false}))}return _react2.default.createElement(_eui.EuiOverlayMask,null,modal)}},{key:"renderExportAllOptionsModal",value:function renderExportAllOptionsModal(){var _this4=this;var _state2=this.state,isShowingExportAllOptionsModal=_state2.isShowingExportAllOptionsModal,filteredItemCount=_state2.filteredItemCount,exportAllOptions=_state2.exportAllOptions,exportAllSelectedOptions=_state2.exportAllSelectedOptions;if(!isShowingExportAllOptionsModal){return null}return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalTitle",defaultMessage:"Export {filteredItemCount, plural, one{# object} other {# objects}}",values:{filteredItemCount:filteredItemCount}}),onCancel:function onCancel(){return _this4.setState({isShowingExportAllOptionsModal:false})},onConfirm:this.onExportAll,cancelButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.exportAllButtonLabel",defaultMessage:"Export All"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalDescription",defaultMessage:"Select which types to export. The number in parentheses indicates how many of this type are available to export."})),_react2.default.createElement(_eui.EuiCheckboxGroup,{options:exportAllOptions,idToSelectedMap:exportAllSelectedOptions,onChange:function onChange(optionId){var newExportAllSelectedOptions=_extends({},exportAllSelectedOptions,_defineProperty({},optionId,!exportAllSelectedOptions[optionId]));_this4.setState({exportAllSelectedOptions:newExportAllSelectedOptions})}})))}},{key:"render",value:function render(){var _this5=this;var _state3=this.state,selectedSavedObjects=_state3.selectedSavedObjects,page=_state3.page,perPage=_state3.perPage,savedObjects=_state3.savedObjects,filteredItemCount=_state3.filteredItemCount,isSearching=_state3.isSearching,savedObjectCounts=_state3.savedObjectCounts;var selectionConfig={onSelectionChange:this.onSelectionChanged};var filterOptions=INCLUDED_TYPES.map(function(type){return{value:type,name:type,view:type+" ("+(savedObjectCounts[type]||0)+")"}});return _react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.renderFlyout(),this.renderRelationships(),this.renderDeleteConfirmModal(),this.renderExportAllOptionsModal(),_react2.default.createElement(_header.Header,{onExportAll:function onExportAll(){return _this5.setState({isShowingExportAllOptionsModal:true})},onImport:this.showImportFlyout,onRefresh:this.refreshData,filteredCount:filteredItemCount}),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_table.Table,{itemId:"id",selectionConfig:selectionConfig,selectedSavedObjects:selectedSavedObjects,onQueryChange:this.onQueryChange,onTableChange:this.onTableChange,filterOptions:filterOptions,onExport:this.onExport,onDelete:this.onDelete,getEditUrl:this.props.getEditUrl,goInApp:this.props.goInApp,pageIndex:page,pageSize:perPage,items:savedObjects,totalItemCount:filteredItemCount,isSearching:isSearching,onShowRelationships:this.onShowRelationships}))}}]);return ObjectsTableUI}(_react.Component);ObjectsTableUI.propTypes={savedObjectsClient:_propTypes2.default.object.isRequired,indexPatterns:_propTypes2.default.object.isRequired,$http:_propTypes2.default.func.isRequired,basePath:_propTypes2.default.string.isRequired,perPageConfig:_propTypes2.default.number,newIndexPatternUrl:_propTypes2.default.string.isRequired,services:_propTypes2.default.array.isRequired,getEditUrl:_propTypes2.default.func.isRequired,goInApp:_propTypes2.default.func.isRequired};var ObjectsTable=exports.ObjectsTable=(0,_react3.injectI18n)(ObjectsTableUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var importFile=exports.importFile=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(file){var FileReader=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window.FileReader;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise(function(resolve,reject){var fr=new FileReader;fr.onload=function(_ref2){var result=_ref2.target.result;try{resolve(JSON.parse(result))}catch(e){reject(e)}};fr.readAsText(file)}));case 1:case"end":return _context.stop()}}},_callee,this)}));return function importFile(_x2){return _ref.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveSavedObjects=exports.resolveSavedSearches=exports.saveObject=exports.saveObjects=exports.resolveIndexPatternConflicts=undefined;var getSavedObject=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(doc,services){var service,obj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:service=services.find(function(service){return service.type===doc._type});if(service){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return service.get();case 5:obj=_context.sent;obj.id=doc._id;obj.migrationVersion=doc._migrationVersion;return _context.abrupt("return",obj);case 9:case"end":return _context.stop()}}},_callee,this)}));return function getSavedObject(_x,_x2){return _ref.apply(this,arguments)}}();var importIndexPattern=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(doc,indexPatterns,overwriteAll){var emptyPattern,_doc$_source,title,timeFieldName,fields,fieldFormatMap,sourceFilters,type,typeMeta,importedIndexPattern,newId;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return indexPatterns.get();case 2:emptyPattern=_context2.sent;_doc$_source=doc._source,title=_doc$_source.title,timeFieldName=_doc$_source.timeFieldName,fields=_doc$_source.fields,fieldFormatMap=_doc$_source.fieldFormatMap,sourceFilters=_doc$_source.sourceFilters,type=_doc$_source.type,typeMeta=_doc$_source.typeMeta;importedIndexPattern={id:doc._id,title:title,timeFieldName:timeFieldName};if(type){importedIndexPattern.type=type}addJsonFieldToIndexPattern(importedIndexPattern,fields,"fields",title);addJsonFieldToIndexPattern(importedIndexPattern,fieldFormatMap,"fieldFormatMap",title);addJsonFieldToIndexPattern(importedIndexPattern,sourceFilters,"sourceFilters",title);addJsonFieldToIndexPattern(importedIndexPattern,typeMeta,"typeMeta",title);Object.assign(emptyPattern,importedIndexPattern);_context2.next=13;return emptyPattern.create(true,!overwriteAll);case 13:newId=_context2.sent;indexPatterns.cache.clear(newId);return _context2.abrupt("return",newId);case 16:case"end":return _context2.stop()}}},_callee2,this)}));return function importIndexPattern(_x3,_x4,_x5){return _ref2.apply(this,arguments)}}();var importDocument=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(obj,doc,overwriteAll){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return obj.applyESResp(doc);case 2:_context3.next=4;return obj.save({confirmOverwrite:!overwriteAll});case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}},_callee3,this)}));return function importDocument(_x6,_x7,_x8){return _ref3.apply(this,arguments)}}();var awaitEachItemInParallel=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(list,op){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Promise.all(list.map(function(item){return op(item)}));case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}},_callee4,this)}));return function awaitEachItemInParallel(_x9,_x10){return _ref4.apply(this,arguments)}}();var resolveIndexPatternConflicts=exports.resolveIndexPatternConflicts=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(resolutions,conflictedIndexPatterns,overwriteAll){var _this=this;var importCount;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:importCount=0;_context6.next=3;return awaitEachItemInParallel(conflictedIndexPatterns,function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref6){var obj=_ref6.obj;var oldIndexId,resolution,newIndexId;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:oldIndexId=obj.searchSource.getOwnField("index");if(typeof oldIndexId!=="string"){oldIndexId=oldIndexId.id}resolution=resolutions.find(function(_ref8){var oldId=_ref8.oldId;return oldId===oldIndexId});if(resolution){_context5.next=5;break}return _context5.abrupt("return");case 5:newIndexId=resolution.newId;_context5.next=8;return obj.hydrateIndexPattern(newIndexId);case 8:_context5.next=10;return saveObject(obj,overwriteAll);case 10:if(!_context5.sent){_context5.next=12;break}importCount++;case 12:case"end":return _context5.stop()}}},_callee5,_this)}));return function(_x14){return _ref7.apply(this,arguments)}}());case 3:return _context6.abrupt("return",importCount);case 4:case"end":return _context6.stop()}}},_callee6,this)}));return function resolveIndexPatternConflicts(_x11,_x12,_x13){return _ref5.apply(this,arguments)}}();var saveObjects=exports.saveObjects=function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(objs,overwriteAll){var _this2=this;var importCount;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:importCount=0;_context8.next=3;return awaitEachItemInParallel(objs,function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(obj){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return saveObject(obj,overwriteAll);case 2:if(!_context7.sent){_context7.next=4;break}importCount++;case 4:case"end":return _context7.stop()}}},_callee7,_this2)}));return function(_x17){return _ref10.apply(this,arguments)}}());case 3:return _context8.abrupt("return",importCount);case 4:case"end":return _context8.stop()}}},_callee8,this)}));return function saveObjects(_x15,_x16){return _ref9.apply(this,arguments)}}();var saveObject=exports.saveObject=function(){var _ref11=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(obj,overwriteAll){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return obj.save({confirmOverwrite:!overwriteAll});case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop()}}},_callee9,this)}));return function saveObject(_x18,_x19){return _ref11.apply(this,arguments)}}();var resolveSavedSearches=exports.resolveSavedSearches=function(){var _ref12=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(savedSearches,services,indexPatterns,overwriteAll){var _this3=this;var importCount;return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:importCount=0;_context11.next=3;return awaitEachItemInParallel(savedSearches,function(){var _ref13=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(searchDoc){var obj;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return getSavedObject(searchDoc,services);case 2:obj=_context10.sent;if(obj){_context10.next=5;break}return _context10.abrupt("return");case 5:_context10.next=7;return importDocument(obj,searchDoc,overwriteAll);case 7:if(!_context10.sent){_context10.next=9;break}importCount++;case 9:case"end":return _context10.stop()}}},_callee10,_this3)}));return function(_x24){return _ref13.apply(this,arguments)}}());case 3:return _context11.abrupt("return",importCount);case 4:case"end":return _context11.stop()}}},_callee11,this)}));return function resolveSavedSearches(_x20,_x21,_x22,_x23){return _ref12.apply(this,arguments)}}();var resolveSavedObjects=exports.resolveSavedObjects=function(){var _ref14=_asyncToGenerator(regeneratorRuntime.mark(function _callee15(savedObjects,overwriteAll,services,indexPatterns){var _this4=this;var docTypes,importedObjectCount,failedImports,conflictedSearchDocs,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches;return regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:docTypes=groupByType(savedObjects);importedObjectCount=0;failedImports=[];_context15.next=5;return awaitEachItemInParallel(docTypes.indexPatterns,function(){var _ref15=_asyncToGenerator(regeneratorRuntime.mark(function _callee12(indexPatternDoc){var importedIndexPatternId;return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return importIndexPattern(indexPatternDoc,indexPatterns,overwriteAll);case 3:importedIndexPatternId=_context12.sent;if(importedIndexPatternId){importedObjectCount++}_context12.next=10;break;case 7:_context12.prev=7;_context12.t0=_context12["catch"](0);failedImports.push({indexPatternDoc:indexPatternDoc,error:_context12.t0});case 10:case"end":return _context12.stop()}}},_callee12,_this4,[[0,7]])}));return function(_x29){return _ref15.apply(this,arguments)}}());case 5:conflictedSearchDocs=[];conflictedIndexPatterns=[];conflictedSavedObjectsLinkedToSavedSearches=[];_context15.next=10;return awaitEachItemInParallel(docTypes.searches,function(){var _ref16=_asyncToGenerator(regeneratorRuntime.mark(function _callee13(searchDoc){var obj;return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return getSavedObject(searchDoc,services);case 2:obj=_context13.sent;_context13.prev=3;_context13.next=6;return importDocument(obj,searchDoc,overwriteAll);case 6:if(!_context13.sent){_context13.next=8;break}importedObjectCount++;case 8:_context13.next=13;break;case 10:_context13.prev=10;_context13.t0=_context13["catch"](3);if(_context13.t0 instanceof _errors.SavedObjectNotFound){if(_context13.t0.savedObjectType==="index-pattern"){conflictedIndexPatterns.push({obj:obj,doc:searchDoc})}else{conflictedSearchDocs.push(searchDoc)}}else{failedImports.push({obj:obj,error:_context13.t0})}case 13:case"end":return _context13.stop()}}},_callee13,_this4,[[3,10]])}));return function(_x30){return _ref16.apply(this,arguments)}}());case 10:_context15.next=12;return awaitEachItemInParallel(docTypes.other,function(){var _ref17=_asyncToGenerator(regeneratorRuntime.mark(function _callee14(otherDoc){var obj;return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return getSavedObject(otherDoc,services);case 2:obj=_context14.sent;_context14.prev=3;_context14.next=6;return importDocument(obj,otherDoc,overwriteAll);case 6:if(!_context14.sent){_context14.next=8;break}importedObjectCount++;case 8:_context14.next=13;break;case 10:_context14.prev=10;_context14.t0=_context14["catch"](3);if(_context14.t0 instanceof _errors.SavedObjectNotFound){if(_context14.t0.savedObjectType==="search"){failedImports.push({obj:obj,error:_context14.t0})}if(_context14.t0.savedObjectType==="index-pattern"){if(obj.savedSearchId){conflictedSavedObjectsLinkedToSavedSearches.push(obj)}else{conflictedIndexPatterns.push({obj:obj,doc:otherDoc})}}}else{failedImports.push({obj:obj,error:_context14.t0})}case 13:case"end":return _context14.stop()}}},_callee14,_this4,[[3,10]])}));return function(_x31){return _ref17.apply(this,arguments)}}());case 12:return _context15.abrupt("return",{conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,importedObjectCount:importedObjectCount,failedImports:failedImports});case 13:case"end":return _context15.stop()}}},_callee15,this)}));return function resolveSavedObjects(_x25,_x26,_x27,_x28){return _ref14.apply(this,arguments)}}();var _errors=__webpack_require__(20);var _i18n=__webpack_require__(8);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function addJsonFieldToIndexPattern(target,sourceString,fieldName,indexName){if(sourceString){try{target[fieldName]=JSON.parse(sourceString)}catch(error){throw new Error(_i18n.i18n.translate("kbn.management.objects.parsingFieldErrorMessage",{defaultMessage:"Error encountered parsing {fieldName} for index pattern {indexName}: {errorMessage}",values:{fieldName:fieldName,indexName:indexName,errorMessage:error.message}}))}}}function groupByType(docs){var defaultDocTypes={searches:[],indexPatterns:[],other:[]};return docs.reduce(function(types,doc){switch(doc._type){case"search":types.searches.push(doc);break;case"index-pattern":types.indexPatterns.push(doc);break;default:types.other.push(doc)}return types},defaultDocTypes)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInAppUrl=getInAppUrl;function getInAppUrl(id,type){switch(type){case"search":case"searches":return"/discover/"+id;case"visualization":case"visualizations":return"/visualize/edit/"+id;case"index-pattern":case"index-patterns":case"indexPatterns":return"/management/kibana/indices/"+id;case"dashboard":case"dashboards":return"/dashboard/"+id;default:return"/"+type.toLowerCase()+"/"+id}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfigRegistry=exports.IndexPatternListConfig=exports.IndexPatternListFactory=undefined;var _index_pattern_list=__webpack_require__(1796);Object.defineProperty(exports,"IndexPatternListFactory",{enumerable:true,get:function get(){return _index_pattern_list.IndexPatternListFactory}});var _index_pattern_list_config=__webpack_require__(590);Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _index_pattern_list_config.IndexPatternListConfig}});var _index_pattern_list_config_registry=__webpack_require__(347);Object.defineProperty(exports,"IndexPatternListConfigRegistry",{enumerable:true,get:function get(){return _index_pattern_list_config_registry.IndexPatternListConfigRegistry}});__webpack_require__(1797)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var IndexPatternListConfig=exports.IndexPatternListConfig=function IndexPatternListConfig(){_classCallCheck(this,IndexPatternListConfig);this.getIndexPatternTags=function(){return[]};this.getFieldInfo=function(){return[]};this.areScriptedFieldsEnabled=function(){return true}};IndexPatternListConfig.key="default"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfigRegistry=exports.IndexPatternCreationConfig=exports.IndexPatternCreationFactory=undefined;var _index_pattern_creation=__webpack_require__(1798);Object.defineProperty(exports,"IndexPatternCreationFactory",{enumerable:true,get:function get(){return _index_pattern_creation.IndexPatternCreationFactory}});var _index_pattern_creation_config=__webpack_require__(592);Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _index_pattern_creation_config.IndexPatternCreationConfig}});var _index_pattern_creation_config_registry=__webpack_require__(348);Object.defineProperty(exports,"IndexPatternCreationConfigRegistry",{enumerable:true,get:function get(){return _index_pattern_creation_config_registry.IndexPatternCreationConfigRegistry}});__webpack_require__(1799)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfig=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _i18n=__webpack_require__(8);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var indexPatternTypeName=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultTypeName",{defaultMessage:"index pattern"});var indexPatternButtonText=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultButtonText",{defaultMessage:"Standard index pattern"});var indexPatternButtonDescription=_i18n.i18n.translate("common.ui.management.editIndexPattern.createIndex.defaultButtonDescription",{defaultMessage:"Perform full aggregations against any data"});var IndexPatternCreationConfig=exports.IndexPatternCreationConfig=function(){function IndexPatternCreationConfig(_ref){var _this=this;var _ref$type=_ref.type,type=_ref$type===undefined?undefined:_ref$type,_ref$name=_ref.name,name=_ref$name===undefined?indexPatternTypeName:_ref$name,_ref$showSystemIndice=_ref.showSystemIndices,showSystemIndices=_ref$showSystemIndice===undefined?true:_ref$showSystemIndice,_ref$httpClient=_ref.httpClient,httpClient=_ref$httpClient===undefined?null:_ref$httpClient,_ref$isBeta=_ref.isBeta,isBeta=_ref$isBeta===undefined?false:_ref$isBeta;_classCallCheck(this,IndexPatternCreationConfig);this.getIndexPatternType=function(){return _this.type};this.getIndexPatternName=function(){return _this.name};this.getIsBeta=function(){return _this.isBeta};this.getShowSystemIndices=function(){return _this.showSystemIndices};this.checkIndicesForErrors=function(){return undefined};this.getIndexPatternMappings=function(){return{}};this.renderPrompt=function(){return null};this.getFetchForWildcardOptions=function(){return{}};this.type=type;this.name=name;this.showSystemIndices=showSystemIndices;this.httpClient=httpClient;this.isBeta=isBeta}_createClass(IndexPatternCreationConfig,[{key:"getIndexPatternCreationOption",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(urlHandler){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{text:indexPatternButtonText,description:indexPatternButtonDescription,testSubj:"createStandardIndexPatternButton",onClick:function onClick(){urlHandler("/management/kibana/index")}});case 1:case"end":return _context.stop()}}},_callee,this)}));function getIndexPatternCreationOption(_x){return _ref2.apply(this,arguments)}return getIndexPatternCreationOption}()},{key:"getIndexTags",value:function getIndexTags(){return[]}}]);return IndexPatternCreationConfig}();IndexPatternCreationConfig.key="default"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_editor=__webpack_require__(1846);Object.defineProperty(exports,"FieldEditor",{enumerable:true,get:function get(){return _field_editor.FieldEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSupportedScriptingLanguages=getSupportedScriptingLanguages;exports.getDeprecatedScriptingLanguages=getDeprecatedScriptingLanguages;exports.GetEnabledScriptingLanguagesProvider=GetEnabledScriptingLanguagesProvider;var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _notify=__webpack_require__(10);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSupportedScriptingLanguages(){return["painless"]}function getDeprecatedScriptingLanguages(){return["expression"]}function GetEnabledScriptingLanguagesProvider($http){return function(){return $http.get(_chrome2.default.addBasePath("/api/kibana/scripts/languages")).then(function(res){return res.data}).catch(function(){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.scriptingLanguages.errorFetchingToastDescription",{defaultMessage:"Error getting available scripting languages from Elasticsearch"}));return[]})}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2007)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var META_FIELD_NAMES=["_seq_no","_doc","_uid"];function getFirstSortableField(indexPattern,fieldNames){var sortableFields=fieldNames.filter(function(fieldName){return META_FIELD_NAMES.includes(fieldName)||(indexPattern.fields.byName[fieldName]||{sortable:false}).sortable});return sortableFields[0]}function reverseSortDirection(sortDirection){return sortDirection==="asc"?"desc":"asc"}exports.getFirstSortableField=getFirstSortableField;exports.reverseSortDirection=reverseSortDirection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _actions=__webpack_require__(1914);Object.defineProperty(exports,"QueryParameterActionsProvider",{enumerable:true,get:function get(){return _actions.QueryParameterActionsProvider}});var _constants=__webpack_require__(598);Object.defineProperty(exports,"MAX_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MAX_CONTEXT_SIZE}});Object.defineProperty(exports,"MIN_CONTEXT_SIZE",{enumerable:true,get:function get(){return _constants.MIN_CONTEXT_SIZE}});Object.defineProperty(exports,"QUERY_PARAMETER_KEYS",{enumerable:true,get:function get(){return _constants.QUERY_PARAMETER_KEYS}});var _state=__webpack_require__(599);Object.defineProperty(exports,"createInitialQueryParametersState",{enumerable:true,get:function get(){return _state.createInitialQueryParametersState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QUERY_PARAMETER_KEYS=exports.MIN_CONTEXT_SIZE=exports.MAX_CONTEXT_SIZE=undefined;var _state=__webpack_require__(599);var MAX_CONTEXT_SIZE=exports.MAX_CONTEXT_SIZE=1e4;var MIN_CONTEXT_SIZE=exports.MIN_CONTEXT_SIZE=0;var QUERY_PARAMETER_KEYS=exports.QUERY_PARAMETER_KEYS=Object.keys((0,_state.createInitialQueryParametersState)())},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialQueryParametersState=createInitialQueryParametersState;function createInitialQueryParametersState(defaultStepSize,tieBreakerField){return{anchorType:null,anchorId:null,columns:[],defaultStepSize:defaultStepSize,filters:[],indexPatternId:null,predecessorCount:0,successorCount:0,sort:[],tieBreakerField:tieBreakerField}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2578)},,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(119);__webpack_require__(120);__webpack_require__(121);__webpack_require__(122);__webpack_require__(123);__webpack_require__(124);__webpack_require__(125);__webpack_require__(126);__webpack_require__(127);__webpack_require__(128);__webpack_require__(129);__webpack_require__(130);__webpack_require__(131);__webpack_require__(132);__webpack_require__(133);__webpack_require__(134);__webpack_require__(135);__webpack_require__(136);__webpack_require__(137);__webpack_require__(138);__webpack_require__(139);__webpack_require__(140);__webpack_require__(141);__webpack_require__(142);__webpack_require__(143);__webpack_require__(144);__webpack_require__(145);__webpack_require__(146);__webpack_require__(147);__webpack_require__(148);__webpack_require__(149);__webpack_require__(150);__webpack_require__(151);__webpack_require__(152);__webpack_require__(153);__webpack_require__(154);__webpack_require__(155);__webpack_require__(156);__webpack_require__(157);__webpack_require__(158);__webpack_require__(159);__webpack_require__(160);__webpack_require__(161);__webpack_require__(162);__webpack_require__(163);__webpack_require__(164);__webpack_require__(165);__webpack_require__(166);__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);__webpack_require__(172);__webpack_require__(173);__webpack_require__(174);__webpack_require__(175);__webpack_require__(176);__webpack_require__(177);__webpack_require__(178);__webpack_require__(179);__webpack_require__(180);__webpack_require__(181);__webpack_require__(182);__webpack_require__(183);__webpack_require__(184);__webpack_require__(185);__webpack_require__(186);__webpack_require__(187);__webpack_require__(188);__webpack_require__(189);__webpack_require__(190);__webpack_require__(191);__webpack_require__(192);__webpack_require__(193);__webpack_require__(194);__webpack_require__(195);__webpack_require__(196);__webpack_require__(197);__webpack_require__(198);__webpack_require__(199);__webpack_require__(200);__webpack_require__(201);__webpack_require__(202);__webpack_require__(203);__webpack_require__(204);__webpack_require__(205);__webpack_require__(206);__webpack_require__(207);__webpack_require__(208);__webpack_require__(209);__webpack_require__(210);__webpack_require__(211);__webpack_require__(212);__webpack_require__(213);__webpack_require__(214);__webpack_require__(215);__webpack_require__(216);__webpack_require__(217);__webpack_require__(224);var _i18n=__webpack_require__(8);var _kibanaCore__=__webpack_require__(218);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch(function(e){return e}).then(function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(781)}});var coreStartContract=coreSystem.start();if(i18nError){coreStartContract.fatalErrors.add(i18nError)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);__webpack_require__(782);__webpack_require__(784);__webpack_require__(1165);__webpack_require__(1170);__webpack_require__(1177);__webpack_require__(1270);__webpack_require__(488);__webpack_require__(510);__webpack_require__(1338);__webpack_require__(1371);__webpack_require__(1372);__webpack_require__(1373);__webpack_require__(1374);__webpack_require__(1375);__webpack_require__(1435);__webpack_require__(1441);__webpack_require__(1498);__webpack_require__(1511);__webpack_require__(1513);__webpack_require__(1514);__webpack_require__(542);__webpack_require__(1602);__webpack_require__(1628);__webpack_require__(1656);__webpack_require__(1682);__webpack_require__(1744);__webpack_require__(1900);__webpack_require__(1903);__webpack_require__(1906);__webpack_require__(281);__webpack_require__(1921);__webpack_require__(305);__webpack_require__(549);var _notify=__webpack_require__(10);__webpack_require__(84);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.enable();_routes2.default.otherwise({redirectTo:"/"+_chrome2.default.getInjected("kbnDefaultAppId","discover")});_modules.uiModules.get("kibana").run(_notify.showAppRedirectNotification)},function(module,exports,__webpack_require__){__webpack_require__(783)},function(module,exports,__webpack_require__){"use strict";var _feature_catalogue=__webpack_require__(39);_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"timelion",title:"Timelion",description:i18n("timelion.registerFeatureDescription",{defaultMessage:"Use an expression language to analyze time series data and visualize the results."}),icon:"timelionApp",path:"/app/timelion",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},function(module,exports,__webpack_require__){__webpack_require__(785);__webpack_require__(920);__webpack_require__(933);__webpack_require__(936);__webpack_require__(941);__webpack_require__(1077);__webpack_require__(1092);__webpack_require__(1105);__webpack_require__(1117);__webpack_require__(453);__webpack_require__(1143)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vis_factory=__webpack_require__(25);var _vis_types=__webpack_require__(30);var _vis_controller=__webpack_require__(903);var _controls_tab=__webpack_require__(915);var _options_tab=__webpack_require__(919);var _default_feedback_message=__webpack_require__(287);var _update_status=__webpack_require__(82);var _i18n=__webpack_require__(8);function InputControlVisProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"input_control_vis",title:_i18n.i18n.translate("inputControl.register.controlsTitle",{defaultMessage:"Controls"}),icon:"visControls",description:_i18n.i18n.translate("inputControl.register.controlsDescription",{defaultMessage:"Create interactive controls for easy dashboard manipulation."}),stage:"experimental",requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.TIME],feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visualization:_vis_controller.VisController,visConfig:{defaults:{controls:[],updateFiltersOnChange:false,useTimeFilter:false,pinFilters:false}},editor:"default",editorConfig:{optionTabs:[{name:"controls",title:_i18n.i18n.translate("inputControl.register.tabs.controlsTitle",{defaultMessage:"Controls"}),editor:_controls_tab.ControlsTab},{name:"options",title:_i18n.i18n.translate("inputControl.register.tabs.optionsTitle",{defaultMessage:"Options"}),editor:_options_tab.OptionsTab}]},requestHandler:"none",responseHandler:"none"})}_vis_types.VisTypesRegistryProvider.register(InputControlVisProvider);exports.default=InputControlVisProvider;module.exports=exports["default"]},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisController=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _i18n=__webpack_require__(14);var _input_control_vis=__webpack_require__(904);var _control_factory=__webpack_require__(908);var _lineage=__webpack_require__(418);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var VisController=function(){function VisController(el,vis){var _this=this;_classCallCheck(this,VisController);this.drawVis=function(){(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_input_control_vis.InputControlVis,{updateFiltersOnChange:_this.vis.params.updateFiltersOnChange,controls:_this.controls,stageFilter:_this.stageFilter,submitFilters:_this.submitFilters,resetControls:_this.updateControlsFromKbn,clearControls:_this.clearControls,hasChanges:_this.hasChanges,hasValues:_this.hasValues,refreshControl:_this.refreshControl})),_this.el)};this.stageFilter=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(controlIndex,newValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.controls[controlIndex].set(newValue);if(!_this.vis.params.updateFiltersOnChange){_context.next=5;break}_this.submitFilters();_context.next=8;break;case 5:_context.next=7;return _this.updateNestedControls();case 7:_this.drawVis();case 8:case"end":return _context.stop()}}},_callee,_this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}();this.submitFilters=function(){_this.controls.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(control){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(control.hasAncestors()&&control.hasUnsetAncestor()){control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)})}case 1:case"end":return _context2.stop()}}},_callee2,_this)}));return function(_x3){return _ref2.apply(this,arguments)}}());var stagedControls=_this.controls.filter(function(control){return control.hasChanged()});var newFilters=stagedControls.filter(function(control){return control.hasKbnFilter()}).map(function(control){return control.getKbnFilter()});stagedControls.forEach(function(control){control.filterManager.findFilters().forEach(function(existingFilter){_this.vis.API.queryFilter.removeFilter(existingFilter)})});_this.vis.API.queryFilter.addFilters(newFilters,_this.vis.params.pinFilters)};this.clearControls=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.controls.forEach(function(control){control.clear()});_context3.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context3.stop()}}},_callee3,_this)}));this.updateControlsFromKbn=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.controls.forEach(function(control){control.reset()});_context4.next=3;return _this.updateNestedControls();case 3:_this.drawVis();case 4:case"end":return _context4.stop()}}},_callee4,_this)}));this.hasChanges=function(){return _this.controls.map(function(control){return control.hasChanged()}).reduce(function(a,b){return a||b})};this.hasValues=function(){return _this.controls.map(function(control){return control.hasValue()}).reduce(function(a,b){return a||b})};this.refreshControl=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(controlIndex,query){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this.controls[controlIndex].fetch(query);case 2:_this.drawVis();case 3:case"end":return _context5.stop()}}},_callee5,_this)}));return function(_x4,_x5){return _ref5.apply(this,arguments)}}();this.el=el;this.vis=vis;this.controls=[];this.queryBarUpdateHandler=this.updateControlsFromKbn.bind(this);this.vis.API.queryFilter.on("update",this.queryBarUpdateHandler)}_createClass(VisController,[{key:"render",value:function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(visData,status){return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(status.params||this.vis.params.useTimeFilter&&status.time)){_context6.next=7;break}this.controls=[];_context6.next=4;return this.initControls();case 4:this.controls=_context6.sent;this.drawVis();return _context6.abrupt("return");case 7:return _context6.abrupt("return");case 8:case"end":return _context6.stop()}}},_callee6,this)}));function render(_x6,_x7){return _ref6.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this.vis.API.queryFilter.off("update",this.queryBarUpdateHandler);(0,_reactDom.unmountComponentAtNode)(this.el)}},{key:"initControls",value:function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var _this2=this;var controlParamsList,controlFactoryPromises,controls,getControl,controlInitPromises;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:controlParamsList=this.vis.params.controls.filter(function(controlParams){return controlParams.indexPattern&&controlParams.fieldName});controlFactoryPromises=controlParamsList.map(function(controlParams){var factory=(0,_control_factory.controlFactory)(controlParams);return factory(controlParams,_this2.vis.API,_this2.vis.params.useTimeFilter)});_context7.next=4;return Promise.all(controlFactoryPromises);case 4:controls=_context7.sent;getControl=function getControl(id){return controls.find(function(control){return id===control.id})};controlInitPromises=[];(0,_lineage.getLineageMap)(controlParamsList).forEach(function(lineage,controlId){lineage.shift();var ancestors=[];lineage.forEach(function(ancestorId){ancestors.push(getControl(ancestorId))});var control=getControl(controlId);control.setAncestors(ancestors);controlInitPromises.push(control.fetch())});_context7.next=10;return Promise.all(controlInitPromises);case 10:return _context7.abrupt("return",controls);case 11:case"end":return _context7.stop()}}},_callee7,this)}));function initControls(){return _ref7.apply(this,arguments)}return initControls}()},{key:"updateNestedControls",value:function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var _this3=this;var fetchPromises;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:fetchPromises=this.controls.map(function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(control){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!control.hasAncestors()){_context8.next=3;break}_context8.next=3;return control.fetch();case 3:case"end":return _context8.stop()}}},_callee8,_this3)}));return function(_x8){return _ref9.apply(this,arguments)}}());_context9.next=3;return Promise.all(fetchPromises);case 3:return _context9.abrupt("return",_context9.sent);case 4:case"end":return _context9.stop()}}},_callee9,this)}));function updateNestedControls(){return _ref8.apply(this,arguments)}return updateNestedControls}()}]);return VisController}();exports.VisController=VisController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InputControlVis=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _range_control=__webpack_require__(905);var _list_control=__webpack_require__(907);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var InputControlVis=exports.InputControlVis=function(_Component){_inherits(InputControlVis,_Component);function InputControlVis(props){_classCallCheck(this,InputControlVis);var _this=_possibleConstructorReturn(this,(InputControlVis.__proto__||Object.getPrototypeOf(InputControlVis)).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_this);_this.handleReset=_this.handleReset.bind(_this);_this.handleClearAll=_this.handleClearAll.bind(_this);return _this}_createClass(InputControlVis,[{key:"handleSubmit",value:function handleSubmit(){this.props.submitFilters()}},{key:"handleReset",value:function handleReset(){this.props.resetControls()}},{key:"handleClearAll",value:function handleClearAll(){this.props.clearControls()}},{key:"renderControls",value:function renderControls(){var _this2=this;return this.props.controls.map(function(control,index){var controlComponent=null;switch(control.type){case"list":controlComponent=_react2.default.createElement(_list_control.ListControl,{id:control.id,label:control.label,options:control.selectOptions,selectedOptions:control.value,formatOptionLabel:control.format,disableMsg:control.isEnabled()?null:control.disabledReason,multiselect:control.options.multiselect,dynamicOptions:control.options.dynamicOptions,controlIndex:index,stageFilter:_this2.props.stageFilter,fetchOptions:function fetchOptions(query){_this2.props.refreshControl(index,query)}});break;case"range":controlComponent=_react2.default.createElement(_range_control.RangeControl,{control:control,controlIndex:index,stageFilter:_this2.props.stageFilter});break;default:throw new Error("Unhandled control type "+control.type)}return _react2.default.createElement(_eui.EuiFlexItem,{key:control.id,style:{minWidth:"250px"},"data-test-subj":"inputControlItem"},controlComponent)})}},{key:"renderStagingButtons",value:function renderStagingButtons(){return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:this.handleClearAll,disabled:!this.props.hasValues(),"data-test-subj":"inputControlClearBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.vis.inputControlVis.clearFormButtonLabel",defaultMessage:"Clear form"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:this.handleReset,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlCancelBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.vis.inputControlVis.cancelChangesButtonLabel",defaultMessage:"Cancel changes"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.handleSubmit,disabled:!this.props.hasChanges(),"data-test-subj":"inputControlSubmitBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.vis.inputControlVis.applyChangesButtonLabel",defaultMessage:"Apply changes"})))))}},{key:"render",value:function render(){var stagingButtons=void 0;if(this.props.controls.length>0&&!this.props.updateFiltersOnChange){stagingButtons=this.renderStagingButtons()}return _react2.default.createElement("div",{className:"icvContainer"},_react2.default.createElement(_eui.EuiFlexGroup,{wrap:true},this.renderControls()),stagingButtons)}}]);return InputControlVis}(_react.Component);InputControlVis.propTypes={stageFilter:_propTypes2.default.func.isRequired,submitFilters:_propTypes2.default.func.isRequired,resetControls:_propTypes2.default.func.isRequired,clearControls:_propTypes2.default.func.isRequired,controls:_propTypes2.default.array.isRequired,updateFiltersOnChange:_propTypes2.default.bool,hasChanges:_propTypes2.default.func.isRequired,hasValues:_propTypes2.default.func.isRequired,refreshControl:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeControl=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactInputRange=__webpack_require__(1021);var _reactInputRange2=_interopRequireDefault(_reactInputRange);var _form_row=__webpack_require__(414);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var toState=function toState(_ref){var control=_ref.control;var sliderValue=control.hasValue()?control.value:{min:control.min,max:control.min};var state={sliderValue:sliderValue,minValue:control.hasValue()?control.value.min:"",maxValue:control.hasValue()?control.value.max:"",isRangeValid:true,errorMessage:""};return state};var RangeControlUi=function(_Component){_inherits(RangeControlUi,_Component);function RangeControlUi(props){_classCallCheck(this,RangeControlUi);var _this=_possibleConstructorReturn(this,(RangeControlUi.__proto__||Object.getPrototypeOf(RangeControlUi)).call(this,props));_this.componentWillReceiveProps=function(nextProps){_this.setState(toState(nextProps))};_this.handleOnChange=function(value){_this.setState({sliderValue:value,minValue:value.min,isRangeValid:true,maxValue:value.max,errorMessage:""})};_this.handleOnChangeComplete=function(value){_this.props.stageFilter(_this.props.controlIndex,value)};_this.handleMinChange=function(evt){_this.handleChange(parseFloat(evt.target.value),_this.state.maxValue)};_this.handleMaxChange=function(evt){_this.handleChange(_this.state.minValue,parseFloat(evt.target.value))};_this.handleChange=function(min,max){min=isNaN(min)?"":min;max=isNaN(max)?"":max;var isMinValid=min!=="";var isMaxValid=max!=="";var isRangeValid=true;var errorMessage="";if(!isMinValid&&isMaxValid||isMinValid&&!isMaxValid){isRangeValid=false;errorMessage=_this.props.intl.formatMessage({id:"inputControl.vis.rangeControl.minMaxValidErrorMessage",defaultMessage:"both min and max must be set"})}if(isMinValid&&isMaxValid&&max<min){isRangeValid=false;errorMessage=_this.props.intl.formatMessage({id:"inputControl.vis.rangeControl.maxValidErrorMessage",defaultMessage:"max must be greater or equal to min"})}_this.setState({minValue:min,maxValue:max,isRangeValid:isRangeValid,errorMessage:errorMessage});if(isRangeValid&&isMaxValid&&isMinValid){_this.handleOnChangeComplete({min:min,max:max})}};_this.formatLabel=function(value){var formatedValue=value;var decimalPlaces=_lodash2.default.get(_this.props,"control.options.decimalPlaces");if(decimalPlaces!==null&&decimalPlaces>=0){formatedValue=value.toFixed(decimalPlaces)}return formatedValue};_this.state=toState(props);return _this}_createClass(RangeControlUi,[{key:"renderControl",value:function renderControl(){if(!this.props.control.isEnabled()){return _react2.default.createElement(_eui.EuiRange,{disabled:true})}return _react2.default.createElement(_eui.EuiFormRow,{isInvalid:!this.state.isRangeValid,error:this.state.errorMessage?[this.state.errorMessage]:[],"data-test-subj":"rangeControlFormRow"},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("input",{id:this.props.control.id+"_min",name:"min",type:"number","data-test-subj":"rangeControlMinInputValue",className:"euiFieldNumber",value:this.state.minValue,min:this.props.control.min,max:this.props.control.max,onChange:this.handleMinChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"icvInputRange__container"},_react2.default.createElement(_reactInputRange2.default,{maxValue:this.props.control.max,minValue:this.props.control.min,step:this.props.control.options.step,value:this.state.sliderValue,onChange:this.handleOnChange,onChangeComplete:this.handleOnChangeComplete,draggableTrack:true,ariaLabelledby:this.props.control.id,formatLabel:this.formatLabel})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("input",{id:this.props.control.id+"_max",name:"max",type:"number",className:"euiFieldNumber","data-test-subj":"rangeControlMaxInputValue",value:this.state.maxValue,min:this.props.control.min,max:this.props.control.max,onChange:this.handleMaxChange}))))}},{key:"render",value:function render(){return _react2.default.createElement(_form_row.FormRow,{id:this.props.control.id,label:this.props.control.label,controlIndex:this.props.controlIndex,disableMsg:this.props.control.isEnabled()?null:this.props.control.disabledReason},this.renderControl())}}]);return RangeControlUi}(_react.Component);RangeControlUi.propTypes={control:_propTypes2.default.object.isRequired,controlIndex:_propTypes2.default.number.isRequired,stageFilter:_propTypes2.default.func.isRequired};var RangeControl=exports.RangeControl=(0,_react3.injectI18n)(RangeControlUi)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControl=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _form_row=__webpack_require__(414);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ListControlUi=function(_Component){_inherits(ListControlUi,_Component);function ListControlUi(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControlUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ListControlUi.__proto__||Object.getPrototypeOf(ListControlUi)).call.apply(_ref,[this].concat(args))),_this),_this.state={isLoading:false},_this.componentDidMount=function(){_this._isMounted=true},_this.componentWillUnmount=function(){_this._isMounted=false},_this.handleOnChange=function(selectedOptions){var selectedValues=selectedOptions.map(function(_ref2){var value=_ref2.value;return value});_this.props.stageFilter(_this.props.controlIndex,selectedValues)},_this.debouncedFetch=_lodash2.default.debounce(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(searchValue){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.fetchOptions(searchValue);case 2:if(_this._isMounted){_this.setState({isLoading:false})}case 3:case"end":return _context.stop()}}},_callee,_this2)}));return function(_x){return _ref3.apply(this,arguments)}}(),300),_this.onSearchChange=function(searchValue){_this.setState({isLoading:true},_this.debouncedFetch.bind(null,searchValue))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ListControlUi,[{key:"renderControl",value:function renderControl(){var _this3=this;var intl=this.props.intl;if(this.props.disableMsg){return _react2.default.createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectTextPlaceholder",defaultMessage:"Select..."}),disabled:true})}var options=this.props.options.map(function(option){return _defineProperty({label:_this3.props.formatOptionLabel(option).toString(),value:option},"data-test-subj","option_"+option.toString().replace(" ","_"))}).sort(function(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())});var selectedOptions=this.props.selectedOptions.map(function(selectedOption){return{label:_this3.props.formatOptionLabel(selectedOption).toString(),value:selectedOption}});return _react2.default.createElement(_eui.EuiComboBox,{placeholder:intl.formatMessage({id:"inputControl.vis.listControl.selectPlaceholder",defaultMessage:"Select..."}),options:options,isLoading:this.state.isLoading,async:this.props.dynamicOptions,onSearchChange:this.props.dynamicOptions?this.onSearchChange:undefined,selectedOptions:selectedOptions,onChange:this.handleOnChange,singleSelection:!this.props.multiselect,"data-test-subj":"listControlSelect"+this.props.controlIndex})}},{key:"render",value:function render(){return _react2.default.createElement(_form_row.FormRow,{id:this.props.id,label:this.props.label,controlIndex:this.props.controlIndex,disableMsg:this.props.disableMsg},this.renderControl())}}]);return ListControlUi}(_react.Component);ListControlUi.propTypes={id:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired,selectedOptions:_propTypes2.default.array.isRequired,options:_propTypes2.default.array,formatOptionLabel:_propTypes2.default.func.isRequired,disableMsg:_propTypes2.default.string,multiselect:_propTypes2.default.bool,dynamicOptions:_propTypes2.default.bool,controlIndex:_propTypes2.default.number.isRequired,stageFilter:_propTypes2.default.func.isRequired,fetchOptions:_propTypes2.default.func};ListControlUi.defaultProps={dynamicOptions:false,multiselect:true};ListControlUi.defaultProps={selectedOptions:[],options:[]};var ListControl=exports.ListControl=(0,_react3.injectI18n)(ListControlUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controlFactory=controlFactory;var _range_control_factory=__webpack_require__(909);var _list_control_factory=__webpack_require__(911);function controlFactory(controlParams){var factory=null;switch(controlParams.type){case"range":factory=_range_control_factory.rangeControlFactory;break;case"list":factory=_list_control_factory.listControlFactory;break;default:throw new Error("Unhandled control type "+controlParams.type)}return factory}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeControlFactory=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var rangeControlFactory=exports.rangeControlFactory=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPattern=void 0;_context2.prev=1;_context2.next=4;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 4:indexPattern=_context2.sent;_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](1);case 9:return _context2.abrupt("return",new RangeControl(controlParams,new _range_filter_manager.RangeFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 10:case"end":return _context2.stop()}}},_callee2,this,[[1,7]])}));return function rangeControlFactory(_x,_x2,_x3){return _ref2.apply(this,arguments)}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _control=__webpack_require__(415);var _range_filter_manager=__webpack_require__(910);var _create_search_source=__webpack_require__(417);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var minMaxAgg=function minMaxAgg(field){var aggBody={};if(field.scripted){aggBody.script={source:field.script,lang:field.lang}}else{aggBody.field=field.name}return{maxAgg:{max:aggBody},minAgg:{min:aggBody}}};var RangeControl=function(_Control){_inherits(RangeControl,_Control);function RangeControl(){_classCallCheck(this,RangeControl);return _possibleConstructorReturn(this,(RangeControl.__proto__||Object.getPrototypeOf(RangeControl)).apply(this,arguments))}_createClass(RangeControl,[{key:"fetch",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,fieldName,aggs,searchSource,resp,min,max;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}this.disable((0,_control.noIndexPatternMsg)(this.controlParams.indexPattern));return _context.abrupt("return");case 4:fieldName=this.filterManager.fieldName;aggs=minMaxAgg(indexPattern.fields.byName[fieldName]);searchSource=(0,_create_search_source.createSearchSource)(this.kbnApi,null,indexPattern,aggs,this.useTimeFilter);resp=void 0;_context.prev=8;_context.next=11;return searchSource.fetch();case 11:resp=_context.sent;_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](8);this.disable(_i18n.i18n.translate("inputControl.rangeControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch range min and max, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 18:min=_lodash2.default.get(resp,"aggregations.minAgg.value",null);max=_lodash2.default.get(resp,"aggregations.maxAgg.value",null);if(!(min===null||max===null)){_context.next=23;break}this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 23:this.min=min;this.max=max;this.enable=true;case 26:case"end":return _context.stop()}}},_callee,this,[[8,14]])}));function fetch(){return _ref.apply(this,arguments)}return fetch}()}]);return RangeControl}(_control.Control)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeFilterManager=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _filter_manager=__webpack_require__(416);var _esQuery=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function toRange(sliderValue){return{gte:sliderValue.min,lte:sliderValue.max}}function fromRange(range){var sliderValue={};if(_lodash2.default.has(range,"gte")){sliderValue.min=_lodash2.default.get(range,"gte")}if(_lodash2.default.has(range,"gt")){sliderValue.min=_lodash2.default.get(range,"gt")}if(_lodash2.default.has(range,"lte")){sliderValue.max=_lodash2.default.get(range,"lte")}if(_lodash2.default.has(range,"lt")){sliderValue.max=_lodash2.default.get(range,"lt")}return sliderValue}var RangeFilterManager=exports.RangeFilterManager=function(_FilterManager){_inherits(RangeFilterManager,_FilterManager);function RangeFilterManager(){_classCallCheck(this,RangeFilterManager);return _possibleConstructorReturn(this,(RangeFilterManager.__proto__||Object.getPrototypeOf(RangeFilterManager)).apply(this,arguments))}_createClass(RangeFilterManager,[{key:"createFilter",value:function createFilter(value){var newFilter=(0,_esQuery.buildRangeFilter)(this.indexPattern.fields.byName[this.fieldName],toRange(value),this.indexPattern);newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var range=void 0;if(_lodash2.default.has(kbnFilters[0],"script")){range=_lodash2.default.get(kbnFilters[0],"script.script.params")}else{range=_lodash2.default.get(kbnFilters[0],["range",this.fieldName])}if(!range){return}return fromRange(range)}}]);return RangeFilterManager}(_filter_manager.FilterManager)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.listControlFactory=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var listControlFactory=exports.listControlFactory=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(controlParams,kbnApi,useTimeFilter){var indexPattern,field;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPattern=void 0;_context2.prev=1;_context2.next=4;return kbnApi.indexPatterns.get(controlParams.indexPattern);case 4:indexPattern=_context2.sent;field=indexPattern.fields.find(function(field){return field.name===controlParams.fieldName});if(field&&field.type!=="string"){controlParams.options.dynamicOptions=false}_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](1);case 11:return _context2.abrupt("return",new ListControl(controlParams,new _phrase_filter_manager.PhraseFilterManager(controlParams.id,controlParams.fieldName,indexPattern,kbnApi.queryFilter),kbnApi,useTimeFilter));case 12:case"end":return _context2.stop()}}},_callee2,this,[[1,9]])}));return function listControlFactory(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _control=__webpack_require__(415);var _phrase_filter_manager=__webpack_require__(912);var _create_search_source=__webpack_require__(417);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function getEscapedQuery(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return query.replace(/[.?+*|{}[\]()"\\#@&<>~]/g,function(match){return"\\"+match})}var termsAgg=function termsAgg(_ref){var field=_ref.field,size=_ref.size,direction=_ref.direction,query=_ref.query;var terms={order:{_count:direction}};if(size){terms.size=size<1?1:size}if(field.scripted){terms.script={source:field.script,lang:field.lang};terms.valueType=field.type==="number"?"float":field.type}else{terms.field=field.name}if(query){terms.include=".*"+getEscapedQuery(query)+".*"}return{termsAgg:{terms:terms}}};var ListControl=function(_Control){_inherits(ListControl,_Control);function ListControl(){var _ref2,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref2=ListControl.__proto__||Object.getPrototypeOf(ListControl)).call.apply(_ref2,[this].concat(args))),_this),_this.fetch=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query){var indexPattern,ancestorFilters,ancestorValues,fieldName,initialSearchSourceState,aggs,searchSource,resp,selectOptions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_this.filterManager.getIndexPattern();if(indexPattern){_context.next=4;break}_this.disable((0,_control.noIndexPatternMsg)(_this.controlParams.indexPattern));return _context.abrupt("return");case 4:ancestorFilters=void 0;if(!_this.hasAncestors()){_context.next=15;break}if(!_this.hasUnsetAncestor()){_context.next=10;break}_this.disable(_i18n.i18n.translate("inputControl.listControl.disableTooltip",{defaultMessage:"Disabled until '{label}' is set.",values:{label:_this.ancestors[0].label}}));_this.lastAncestorValues=undefined;return _context.abrupt("return");case 10:ancestorValues=_this.getAncestorValues();if(!_lodash2.default.isEqual(ancestorValues,_this.lastAncestorValues)){_context.next=13;break}return _context.abrupt("return");case 13:_this.lastAncestorValues=ancestorValues;ancestorFilters=_this.getAncestorFilters();case 15:fieldName=_this.filterManager.fieldName;initialSearchSourceState={timeout:"1s",terminate_after:1e5};aggs=termsAgg({field:indexPattern.fields.byName[fieldName],size:_this.options.dynamicOptions?null:_lodash2.default.get(_this.options,"size",5),direction:"desc",query:query});searchSource=(0,_create_search_source.createSearchSource)(_this.kbnApi,initialSearchSourceState,indexPattern,aggs,_this.useTimeFilter,ancestorFilters);_this.lastQuery=query;resp=void 0;_context.prev=21;_context.next=24;return searchSource.fetch();case 24:resp=_context.sent;_context.next=31;break;case 27:_context.prev=27;_context.t0=_context["catch"](21);_this.disable(_i18n.i18n.translate("inputControl.listControl.unableToFetchTooltip",{defaultMessage:"Unable to fetch terms, error: {errorMessage}",values:{errorMessage:_context.t0.message}}));return _context.abrupt("return");case 31:if(!(query&&_this.lastQuery!==query)){_context.next=33;break}return _context.abrupt("return");case 33:selectOptions=_lodash2.default.get(resp,"aggregations.termsAgg.buckets",[]).map(function(bucket){return bucket.key});if(!(selectOptions.length===0&&!query)){_context.next=37;break}_this.disable((0,_control.noValuesDisableMsg)(fieldName,indexPattern.title));return _context.abrupt("return");case 37:_this.selectOptions=selectOptions;_this.enable=true;_this.disabledReason="";case 40:case"end":return _context.stop()}}},_callee,_this2,[[21,27]])}));return function(_x2){return _ref3.apply(this,arguments)}}(),_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ListControl,[{key:"hasValue",value:function hasValue(){return typeof this.value!=="undefined"&&this.value.length>0}}]);return ListControl}(_control.Control)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseFilterManager=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _filter_manager=__webpack_require__(416);var _esQuery=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PhraseFilterManager=exports.PhraseFilterManager=function(_FilterManager){_inherits(PhraseFilterManager,_FilterManager);function PhraseFilterManager(controlId,fieldName,indexPattern,queryFilter){_classCallCheck(this,PhraseFilterManager);return _possibleConstructorReturn(this,(PhraseFilterManager.__proto__||Object.getPrototypeOf(PhraseFilterManager)).call(this,controlId,fieldName,indexPattern,queryFilter))}_createClass(PhraseFilterManager,[{key:"createFilter",value:function createFilter(phrases){var newFilter=void 0;if(phrases.length===1){newFilter=(0,_esQuery.buildPhraseFilter)(this.indexPattern.fields.byName[this.fieldName],phrases[0],this.indexPattern)}else{newFilter=(0,_esQuery.buildPhrasesFilter)(this.indexPattern.fields.byName[this.fieldName],phrases,this.indexPattern)}newFilter.meta.controlledBy=this.controlId;return newFilter}},{key:"getValueFromFilterBar",value:function getValueFromFilterBar(){var _this2=this;var kbnFilters=this.findFilters();if(kbnFilters.length===0){return}var values=kbnFilters.map(function(kbnFilter){return _this2._getValueFromFilter(kbnFilter)}).filter(function(value){return value!=null});if(values.length===0){return}return values.reduce(function(accumulator,currentValue){return accumulator.concat(currentValue)},[])}},{key:"_getValueFromFilter",value:function _getValueFromFilter(kbnFilter){var _this3=this;if(_lodash2.default.has(kbnFilter,"query.bool.should")){return _lodash2.default.get(kbnFilter,"query.bool.should").map(function(kbnFilter){return _this3._getValueFromFilter(kbnFilter)}).filter(function(value){if(value){return true}return false})}if(_lodash2.default.has(kbnFilter,"script")){return _lodash2.default.get(kbnFilter,"script.script.params.value")}if(_lodash2.default.has(kbnFilter,["query","match",this.fieldName])){return _lodash2.default.get(kbnFilter,["query","match",this.fieldName,"query"])}if(_lodash2.default.has(kbnFilter,["match_phrase",this.fieldName])){return _lodash2.default.get(kbnFilter,["match_phrase",this.fieldName])}}}]);return PhraseFilterManager}(_filter_manager.FilterManager)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLineageMap=getLineageMap;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getLineageMap(controlParamsList){function getControlParamsById(controlId){return controlParamsList.find(function(controlParams){return controlParams.id===controlId})}var lineageMap=new Map;controlParamsList.forEach(function(rootControlParams){var lineage=[rootControlParams.id];var getLineage=function getLineage(controlParams){if(_lodash2.default.has(controlParams,"parent")&&controlParams.parent!==""&&!lineage.includes(controlParams.parent)){lineage.push(controlParams.parent);var parent=getControlParamsById(controlParams.parent);getLineage(parent)}};getLineage(rootControlParams);lineageMap.set(rootControlParams.id,lineage)});return lineageMap}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getParentCandidates=getParentCandidates;var _editor_utils=__webpack_require__(286);function getParentCandidates(controlParamsList,controlId,lineageMap){return controlParamsList.filter(function(controlParams){if(!controlParams.indexPattern||!controlParams.fieldName){return false}var lineage=lineageMap.get(controlParams.id);if(lineage.includes(controlId)){return false}return true}).map(function(controlParams,controlIndex){return{value:controlParams.id,text:(0,_editor_utils.getTitle)(controlParams,controlIndex)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlsTab=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _control_editor=__webpack_require__(916);var _editor_utils=__webpack_require__(286);var _lineage=__webpack_require__(418);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ControlsTabUi=function(_Component){_inherits(ControlsTabUi,_Component);function ControlsTabUi(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ControlsTabUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ControlsTabUi.__proto__||Object.getPrototypeOf(ControlsTabUi)).call.apply(_ref,[this].concat(args))),_this),_this.state={type:"list"},_this.getIndexPattern=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.scope.vis.API.indexPatterns.get(indexPatternId);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee,_this2)}));return function(_x){return _ref2.apply(this,arguments)}}(),_this.handleLabelChange=function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.label=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleIndexPatternChange=function(controlIndex,indexPatternId){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.indexPattern=indexPatternId;updatedControl.fieldName="";_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleFieldNameChange=function(controlIndex,fieldName){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.fieldName=fieldName;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleCheckboxOptionChange=function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=evt.target.checked;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleNumberOptionChange=function(controlIndex,optionName,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.options[optionName]=parseFloat(evt.target.value);_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_this.handleRemoveControl=function(controlIndex){_this.setVisParam("controls",(0,_editor_utils.removeControl)(_this.props.editorState.params.controls,controlIndex))},_this.moveControl=function(controlIndex,direction){_this.setVisParam("controls",(0,_editor_utils.moveControl)(_this.props.editorState.params.controls,controlIndex,direction))},_this.handleAddControl=function(){_this.setVisParam("controls",(0,_editor_utils.addControl)(_this.props.editorState.params.controls,(0,_editor_utils.newControl)(_this.state.type)))},_this.handleParentChange=function(controlIndex,evt){var updatedControl=_this.props.editorState.params.controls[controlIndex];updatedControl.parent=evt.target.value;_this.setVisParam("controls",(0,_editor_utils.setControl)(_this.props.editorState.params.controls,controlIndex,updatedControl))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ControlsTabUi,[{key:"setVisParam",value:function setVisParam(paramName,paramValue){var params=_lodash2.default.cloneDeep(this.props.editorState.params);params[paramName]=paramValue;this.props.stageEditorParams(params)}},{key:"renderControls",value:function renderControls(){var _this3=this;var lineageMap=(0,_lineage.getLineageMap)(this.props.editorState.params.controls);return this.props.editorState.params.controls.map(function(controlParams,controlIndex){var parentCandidates=(0,_lineage.getParentCandidates)(_this3.props.editorState.params.controls,controlParams.id,lineageMap);return _react2.default.createElement(_control_editor.ControlEditor,{key:controlParams.id,controlIndex:controlIndex,controlParams:controlParams,handleLabelChange:_this3.handleLabelChange,moveControl:_this3.moveControl,handleRemoveControl:_this3.handleRemoveControl,handleIndexPatternChange:_this3.handleIndexPatternChange,handleFieldNameChange:_this3.handleFieldNameChange,getIndexPattern:_this3.getIndexPattern,handleCheckboxOptionChange:_this3.handleCheckboxOptionChange,handleNumberOptionChange:_this3.handleNumberOptionChange,parentCandidates:parentCandidates,handleParentChange:_this3.handleParentChange})})}},{key:"render",value:function render(){var _this4=this;var intl=this.props.intl;return _react2.default.createElement("div",null,this.renderControls(),_react2.default.createElement(_eui.EuiPanel,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:"selectControlType"},_react2.default.createElement(_eui.EuiSelect,{options:[{value:"range",text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.rangeDropDownOptionLabel",defaultMessage:"Range slider"})},{value:"list",text:intl.formatMessage({id:"inputControl.editor.controlsTab.select.listDropDownOptionLabel",defaultMessage:"Options list"})}],value:this.state.type,onChange:function onChange(evt){return _this4.setState({type:evt.target.value})},"aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.controlTypeAriaLabel",defaultMessage:"Select control type"})}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:"addControl"},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.handleAddControl,iconType:"plusInCircle","data-test-subj":"inputControlEditorAddBtn","aria-label":intl.formatMessage({id:"inputControl.editor.controlsTab.select.addControlAriaLabel",defaultMessage:"Add control"})},_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.controlsTab.addButtonLabel",defaultMessage:"Add"})))))))}}]);return ControlsTabUi}(_react.Component);ControlsTabUi.propTypes={scope:_propTypes2.default.object.isRequired,stageEditorParams:_propTypes2.default.func.isRequired};var ControlsTab=exports.ControlsTab=(0,_react3.injectI18n)(ControlsTabUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _range_control_editor=__webpack_require__(917);var _list_control_editor=__webpack_require__(918);var _editor_utils=__webpack_require__(286);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ControlEditorUi=function(_Component){_inherits(ControlEditorUi,_Component);function ControlEditorUi(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ControlEditorUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ControlEditorUi.__proto__||Object.getPrototypeOf(ControlEditorUi)).call.apply(_ref,[this].concat(args))),_this),_this.changeLabel=function(evt){_this.props.handleLabelChange(_this.props.controlIndex,evt)},_this.removeControl=function(){_this.props.handleRemoveControl(_this.props.controlIndex)},_this.moveUpControl=function(){_this.props.moveControl(_this.props.controlIndex,-1)},_this.moveDownControl=function(){_this.props.moveControl(_this.props.controlIndex,1)},_this.changeIndexPattern=function(evt){_this.props.handleIndexPatternChange(_this.props.controlIndex,evt)},_this.changeFieldName=function(evt){_this.props.handleFieldNameChange(_this.props.controlIndex,evt)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ControlEditorUi,[{key:"renderEditor",value:function renderEditor(){var controlEditor=null;switch(this.props.controlParams.type){case"list":controlEditor=_react2.default.createElement(_list_control_editor.ListControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange,handleCheckboxOptionChange:this.props.handleCheckboxOptionChange,parentCandidates:this.props.parentCandidates,handleParentChange:this.props.handleParentChange});break;case"range":controlEditor=_react2.default.createElement(_range_control_editor.RangeControlEditor,{controlIndex:this.props.controlIndex,controlParams:this.props.controlParams,handleIndexPatternChange:this.changeIndexPattern,handleFieldNameChange:this.changeFieldName,getIndexPattern:this.props.getIndexPattern,handleNumberOptionChange:this.props.handleNumberOptionChange});break;default:throw new Error("Unhandled control editor type "+this.props.controlParams.type)}var labelId="controlLabel"+this.props.controlIndex;return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{id:labelId,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.controlEditor.controlLabel",defaultMessage:"Control Label"})},_react2.default.createElement(_eui.EuiFieldText,{value:this.props.controlParams.label,onChange:this.changeLabel})),controlEditor)}},{key:"renderEditorButtons",value:function renderEditorButtons(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlUpAriaLabel",defaultMessage:"Move control up"}),color:"primary",onClick:this.moveUpControl,iconType:"sortUp","data-test-subj":"inputControlEditorMoveUpControl"+this.props.controlIndex}),_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.moveControlDownAriaLabel",defaultMessage:"Move control down"}),color:"primary",onClick:this.moveDownControl,iconType:"sortDown","data-test-subj":"inputControlEditorMoveDownControl"+this.props.controlIndex}),_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":this.props.intl.formatMessage({id:"inputControl.editor.controlEditor.removeControlAriaLabel",defaultMessage:"Remove control"}),color:"danger",onClick:this.removeControl,iconType:"cross","data-test-subj":"inputControlEditorRemoveControl"+this.props.controlIndex}))}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPanel,{grow:false,className:"icvControlEditor__panel"},_react2.default.createElement(_eui.EuiAccordion,{id:"controlEditorAccordion",buttonContent:(0,_editor_utils.getTitle)(this.props.controlParams,this.props.controlIndex),extraAction:this.renderEditorButtons(),initialIsOpen:true},_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderEditor()))}}]);return ControlEditorUi}(_react.Component);ControlEditorUi.propTypes={controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleLabelChange:_propTypes2.default.func.isRequired,moveControl:_propTypes2.default.func.isRequired,handleRemoveControl:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,getIndexPattern:_propTypes2.default.func.isRequired,handleCheckboxOptionChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired,parentCandidates:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string.isRequired,text:_propTypes2.default.string.isRequired})).isRequired,handleParentChange:_propTypes2.default.func.isRequired};var ControlEditor=exports.ControlEditor=(0,_react3.injectI18n)(ControlEditorUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeControlEditor=RangeControlEditor;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _index_pattern_select_form_row=__webpack_require__(419);var _field_select=__webpack_require__(421);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterField(field){return field.type==="number"}function RangeControlEditor(props){var stepSizeId="stepSize-"+props.controlIndex;var decimalPlacesId="decimalPlaces-"+props.controlIndex;var handleDecimalPlacesChange=function handleDecimalPlacesChange(evt){props.handleNumberOptionChange(props.controlIndex,"decimalPlaces",evt)};var handleStepChange=function handleStepChange(evt){props.handleNumberOptionChange(props.controlIndex,"step",evt)};return _react2.default.createElement("div",null,_react2.default.createElement(_index_pattern_select_form_row.IndexPatternSelectFormRow,{indexPatternId:props.controlParams.indexPattern,onChange:props.handleIndexPatternChange,controlIndex:props.controlIndex}),_react2.default.createElement(_field_select.FieldSelect,{fieldName:props.controlParams.fieldName,indexPatternId:props.controlParams.indexPattern,filterField:filterField,onChange:props.handleFieldNameChange,getIndexPattern:props.getIndexPattern,controlIndex:props.controlIndex}),_react2.default.createElement(_eui.EuiFormRow,{id:stepSizeId,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.rangeControl.stepSizeLabel",defaultMessage:"Step Size"})},_react2.default.createElement(_eui.EuiFieldNumber,{value:props.controlParams.options.step,onChange:handleStepChange,"data-test-subj":"rangeControlSizeInput"+props.controlIndex})),_react2.default.createElement(_eui.EuiFormRow,{id:decimalPlacesId,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.rangeControl.decimalPlacesLabel",defaultMessage:"Decimal Places"})},_react2.default.createElement(_eui.EuiFieldNumber,{min:0,value:props.controlParams.options.decimalPlaces,onChange:handleDecimalPlacesChange,"data-test-subj":"rangeControlDecimalPlacesInput"+props.controlIndex})))}RangeControlEditor.propTypes={getIndexPattern:_propTypes2.default.func.isRequired,controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ListControlEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _index_pattern_select_form_row=__webpack_require__(419);var _field_select=__webpack_require__(421);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function filterField(field){return field.aggregatable&&["number","boolean","date","ip","string"].includes(field.type)}var ListControlEditor=exports.ListControlEditor=function(_Component){_inherits(ListControlEditor,_Component);function ListControlEditor(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,ListControlEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ListControlEditor.__proto__||Object.getPrototypeOf(ListControlEditor)).call.apply(_ref,[this].concat(args))),_this),_this.state={isLoadingFieldType:true,isStringField:false,prevFieldName:_this.props.controlParams.fieldName},_this.componentDidUpdate=function(){if(_this.state.isLoadingFieldType){_this.loadIsStringField()}},_this.loadIsStringField=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPattern,field;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!_this.props.controlParams.indexPattern||!_this.props.controlParams.fieldName)){_context.next=3;break}_this.setState({isLoadingFieldType:false});return _context.abrupt("return");case 3:indexPattern=void 0;_context.prev=4;_context.next=7;return _this.props.getIndexPattern(_this.props.controlParams.indexPattern);case 7:indexPattern=_context.sent;_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](4);return _context.abrupt("return");case 13:if(_this._isMounted){_context.next=15;break}return _context.abrupt("return");case 15:field=indexPattern.fields.find(function(field){return field.name===_this.props.controlParams.fieldName});if(field){_context.next=18;break}return _context.abrupt("return");case 18:_this.setState({isLoadingFieldType:false,isStringField:field.type==="string"});case 19:case"end":return _context.stop()}}},_callee,_this2,[[4,10]])})),_this.renderOptions=function(){if(_this.state.isLoadingFieldType||!_this.props.controlParams.fieldName){return}var options=[];if(_this.props.parentCandidates&&_this.props.parentCandidates.length>0){var parentCandidatesOptions=[{value:"",text:""}].concat(_toConsumableArray(_this.props.parentCandidates));options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"parentSelect-"+_this.props.controlIndex,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.parentLabel",defaultMessage:"Parent control"}),helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.parentDescription",defaultMessage:"Options are based on the value of parent control. Disabled if parent is not set."}),key:"parentSelect"},_react2.default.createElement(_eui.EuiSelect,{options:parentCandidatesOptions,value:_this.props.controlParams.parent,onChange:function onChange(evt){_this.props.handleParentChange(_this.props.controlIndex,evt)}})))}options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"multiselect-"+_this.props.controlIndex,key:"multiselect",helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.multiselectDescription",defaultMessage:"Allow multiple selection"})},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.multiselectLabel",defaultMessage:"Multiselect"}),checked:_this.props.controlParams.options.multiselect,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"multiselect",evt)},"data-test-subj":"listControlMultiselectInput"})));var dynamicOptionsHelpText=_this.state.isStringField?_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.updateDescription",defaultMessage:"Update options in response to user input"}):_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptions.stringFieldDescription",defaultMessage:'Only available for "string" fields'});options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"dynamicOptions-"+_this.props.controlIndex,key:"dynamicOptions",helpText:dynamicOptionsHelpText},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.dynamicOptionsLabel",defaultMessage:"Dynamic Options"}),checked:_this.props.controlParams.options.dynamicOptions,onChange:function onChange(evt){_this.props.handleCheckboxOptionChange(_this.props.controlIndex,"dynamicOptions",evt)},disabled:_this.state.isStringField?false:true,"data-test-subj":"listControlDynamicOptionsSwitch"})));if(!_this.props.controlParams.options.dynamicOptions||!_this.state.isStringField){options.push(_react2.default.createElement(_eui.EuiFormRow,{id:"size-"+_this.props.controlIndex,label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.sizeLabel",defaultMessage:"Size"}),key:"size",helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.listControl.sizeDescription",defaultMessage:"Number of options"})},_react2.default.createElement(_eui.EuiFieldNumber,{min:1,value:_this.props.controlParams.options.size,onChange:function onChange(evt){_this.props.handleNumberOptionChange(_this.props.controlIndex,"size",evt)},"data-test-subj":"listControlSizeInput"})))}return options},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ListControlEditor,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.loadIsStringField()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_index_pattern_select_form_row.IndexPatternSelectFormRow,{indexPatternId:this.props.controlParams.indexPattern,onChange:this.props.handleIndexPatternChange,controlIndex:this.props.controlIndex}),_react2.default.createElement(_field_select.FieldSelect,{fieldName:this.props.controlParams.fieldName,indexPatternId:this.props.controlParams.indexPattern,filterField:filterField,onChange:this.props.handleFieldNameChange,getIndexPattern:this.props.getIndexPattern,controlIndex:this.props.controlIndex}),this.renderOptions())}}]);return ListControlEditor}(_react.Component);ListControlEditor.getDerivedStateFromProps=function(nextProps,prevState){var isNewFieldName=prevState.prevFieldName!==nextProps.controlParams.fieldName;if(!prevState.isLoadingFieldType&&isNewFieldName){return{prevFieldName:nextProps.controlParams.fieldName,isLoadingFieldType:true}}return null};ListControlEditor.propTypes={getIndexPattern:_propTypes2.default.func.isRequired,controlIndex:_propTypes2.default.number.isRequired,controlParams:_propTypes2.default.object.isRequired,handleFieldNameChange:_propTypes2.default.func.isRequired,handleIndexPatternChange:_propTypes2.default.func.isRequired,handleCheckboxOptionChange:_propTypes2.default.func.isRequired,handleNumberOptionChange:_propTypes2.default.func.isRequired,parentCandidates:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string.isRequired,text:_propTypes2.default.string.isRequired})).isRequired,handleParentChange:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsTab=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var OptionsTab=exports.OptionsTab=function(_Component){_inherits(OptionsTab,_Component);function OptionsTab(){var _ref;var _temp,_this,_ret;_classCallCheck(this,OptionsTab);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=OptionsTab.__proto__||Object.getPrototypeOf(OptionsTab)).call.apply(_ref,[this].concat(args))),_this),_this.setVisParam=function(paramName,paramValue){var params=_lodash2.default.cloneDeep(_this.props.editorState.params);params[paramName]=paramValue;_this.props.stageEditorParams(params)},_this.handleUpdateFiltersChange=function(evt){_this.setVisParam("updateFiltersOnChange",evt.target.checked)},_this.handleUseTimeFilter=function(evt){_this.setVisParam("useTimeFilter",evt.target.checked)},_this.handlePinFilters=function(evt){_this.setVisParam("pinFilters",evt.target.checked)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(OptionsTab,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{id:"updateFiltersOnChange"},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.optionsTab.updateFilterLabel",defaultMessage:"Update Kibana filters on each change"}),checked:this.props.editorState.params.updateFiltersOnChange,onChange:this.handleUpdateFiltersChange,"data-test-subj":"inputControlEditorUpdateFiltersOnChangeCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,{id:"useTimeFilter"},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.optionsTab.useTimeFilterLabel",defaultMessage:"Use time filter"}),checked:this.props.editorState.params.useTimeFilter,onChange:this.handleUseTimeFilter,"data-test-subj":"inputControlEditorUseTimeFilterCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,{id:"pinFilters"},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"inputControl.editor.optionsTab.pinFiltersLabel",defaultMessage:"Pin filters to global state"}),checked:this.props.editorState.params.pinFilters,onChange:this.handlePinFilters,"data-test-subj":"inputControlEditorPinFiltersCheckbox"})))}}]);return OptionsTab}(_react.Component);OptionsTab.propTypes={scope:_propTypes2.default.object.isRequired,stageEditorParams:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";var _vis_types=__webpack_require__(30);var _histogram=__webpack_require__(921);var _histogram2=_interopRequireDefault(_histogram);var _line=__webpack_require__(924);var _line2=_interopRequireDefault(_line);var _pie=__webpack_require__(925);var _pie2=_interopRequireDefault(_pie);var _area=__webpack_require__(927);var _area2=_interopRequireDefault(_area);var _heatmap=__webpack_require__(928);var _heatmap2=_interopRequireDefault(_heatmap);var _horizontal_bar=__webpack_require__(930);var _horizontal_bar2=_interopRequireDefault(_horizontal_bar);var _gauge=__webpack_require__(931);var _gauge2=_interopRequireDefault(_gauge);var _goal=__webpack_require__(932);var _goal2=_interopRequireDefault(_goal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(_histogram2.default);_vis_types.VisTypesRegistryProvider.register(_line2.default);_vis_types.VisTypesRegistryProvider.register(_pie2.default);_vis_types.VisTypesRegistryProvider.register(_area2.default);_vis_types.VisTypesRegistryProvider.register(_heatmap2.default);_vis_types.VisTypesRegistryProvider.register(_horizontal_bar2.default);_vis_types.VisTypesRegistryProvider.register(_gauge2.default);_vis_types.VisTypesRegistryProvider.register(_goal2.default)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _point_series=__webpack_require__(230);var _point_series2=_interopRequireDefault(_point_series);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"histogram",title:i18n("kbnVislibVisTypes.histogram.histogramTitle",{defaultMessage:"Vertical Bar"}),icon:"visBarVertical",description:i18n("kbnVislibVisTypes.histogram.histogramDescription",{defaultMessage:"Assign a continuous variable to each axis"}),visConfig:{defaults:{type:"histogram",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"histogram",mode:"stacked",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.histogram.metricTitle",{defaultMessage:"Y-Axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:i18n("kbnVislibVisTypes.histogram.radiusTitle",{defaultMessage:"Dot Size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:i18n("kbnVislibVisTypes.histogram.segmentTitle",{defaultMessage:"X-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.histogram.groupTitle",{defaultMessage:"Split Series"}),min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:i18n("kbnVislibVisTypes.histogram.splitTitle",{defaultMessage:"Split Chart"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _point_series=__webpack_require__(230);var _point_series2=_interopRequireDefault(_point_series);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"line",title:i18n("kbnVislibVisTypes.line.lineTitle",{defaultMessage:"Line"}),icon:"visLine",description:i18n("kbnVislibVisTypes.line.lineDescription",{defaultMessage:"Emphasize trends"}),visConfig:{defaults:{type:"line",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"line",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.line.metricTitle",{defaultMessage:"Y-Axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:i18n("kbnVislibVisTypes.line.radiusTitle",{defaultMessage:"Dot Size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"]},{group:"buckets",name:"segment",title:i18n("kbnVislibVisTypes.line.segmentTitle",{defaultMessage:"X-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.line.groupTitle",{defaultMessage:"Split Series"}),min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:i18n("kbnVislibVisTypes.line.splitTitle",{defaultMessage:"Split Chart"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=HistogramVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _pie=__webpack_require__(926);var _pie2=_interopRequireDefault(_pie);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HistogramVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"pie",title:i18n("kbnVislibVisTypes.pie.pieTitle",{defaultMessage:"Pie"}),icon:"visPie",description:i18n("kbnVislibVisTypes.pie.pieDescription",{defaultMessage:"Compare parts of a whole"}),visConfig:{defaults:{type:"pie",addTooltip:true,addLegend:true,legendPosition:"right",isDonut:true,labels:{show:false,values:true,last_level:true,truncate:100}}},events:{brush:{disabled:true}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}]},optionsTemplate:_pie2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.pie.metricTitle",{defaultMessage:"Slice Size"}),min:1,max:1,aggFilter:["sum","count","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-scissors",title:i18n("kbnVislibVisTypes.pie.segmentTitle",{defaultMessage:"Split Slices"}),min:0,max:Infinity,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",icon:"fa fa-th",title:i18n("kbnVislibVisTypes.pie.splitTitle",{defaultMessage:"Split Chart"}),mustBeFirst:true,min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])},hierarchicalData:true,responseHandler:"vislib_slices"})}module.exports=exports["default"]},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div\n        class="kuiSideBarSectionTitle__text"\n        i18n-id="kbnVislibVisTypes.editors.pie.pieSettingsTitle"\n        i18n-default-message="Pie Settings"\n      ></div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="isDonut"\n        i18n-id="kbnVislibVisTypes.editors.pie.donutLabel"\n        i18n-default-message="Donut"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="isDonut" name="isDonut" type="checkbox" value="{{isDonut}}"\n               ng-checked="editorState.params.isDonut"\n               ng-model="editorState.params.isDonut"\n        >\n      </div>\n    </div>\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n</div>\n\n\x3c!-- Labels --\x3e\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div\n        class="kuiSideBarSectionTitle__text"\n        i18n-id="kbnVislibVisTypes.editors.pie.labelsSettingsTitle"\n        i18n-default-message="Labels Settings"\n      ></div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="showLabels"\n        i18n-id="kbnVislibVisTypes.editors.pie.showLabelsLabel"\n        i18n-default-message="Show Labels"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.labels.show">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="showLastLevel"\n        i18n-id="kbnVislibVisTypes.editors.pie.showTopLevelOnlyLabel"\n        i18n-default-message="Show Top Level Only"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showLastLevel" type="checkbox" ng-model="editorState.params.labels.last_level">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="showValues"\n        i18n-id="kbnVislibVisTypes.editors.pie.showValuesLabel"\n        i18n-default-message="Show Values"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input class="kuiCheckBox" id="showValues" type="checkbox" ng-model="editorState.params.labels.values">\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="truncateLabels"\n        i18n-id="kbnVislibVisTypes.editors.pie.truncateLabel"\n        i18n-default-message="Truncate"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="truncateLabels"\n          class="kuiInput kuiSideBarInput"\n          type="number"\n          ng-model="editorState.params.labels.truncate"\n        >\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _point_series=__webpack_require__(230);var _point_series2=_interopRequireDefault(_point_series);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"area",title:i18n("kbnVislibVisTypes.area.areaTitle",{defaultMessage:"Area"}),icon:"visArea",description:i18n("kbnVislibVisTypes.area.areaDescription",{defaultMessage:"Emphasize the quantity beneath a line chart"}),visConfig:{defaults:{type:"area",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"bottom",show:true,style:{},scale:{type:"linear"},labels:{show:true,truncate:100},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:0,filter:false,truncate:100},title:{text:"Count"}}],seriesParams:[{show:"true",type:"area",mode:"stacked",data:{label:"Count",id:"1"},drawLinesBetweenPoints:true,showCircles:true,interpolate:"linear",valueAxis:"ValueAxis-1"}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.area.metricsTitle",{defaultMessage:"Y-Axis"}),aggFilter:["!geo_centroid","!geo_bounds"],min:1,defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:i18n("kbnVislibVisTypes.area.radiusTitle",{defaultMessage:"Dot Size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:i18n("kbnVislibVisTypes.area.segmentTitle",{defaultMessage:"X-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.area.groupTitle",{defaultMessage:"Split Series"}),min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:i18n("kbnVislibVisTypes.area.splitTitle",{defaultMessage:"Split Chart"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=HeatmapVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _heatmap=__webpack_require__(929);var _heatmap2=_interopRequireDefault(_heatmap);var _colormaps=__webpack_require__(81);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HeatmapVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"heatmap",title:i18n("kbnVislibVisTypes.heatmap.heatmapTitle",{defaultMessage:"Heat Map"}),icon:"visHeatmap",description:i18n("kbnVislibVisTypes.heatmap.heatmapDescription",{defaultMessage:"Shade cells within a matrix"}),visConfig:{defaults:{type:"heatmap",addTooltip:true,addLegend:true,enableHover:false,legendPosition:"right",times:[],colorsNumber:4,colorSchema:"Greens",setColorRange:false,colorsRange:[],invertColors:false,percentageMode:false,valueAxes:[{show:false,id:"ValueAxis-1",type:"value",scale:{type:"linear",defaultYExtents:false},labels:{show:false,rotate:0,overwriteColor:false,color:"#555"}}]}},editorConfig:{collections:{legendPositions:[{value:"left",text:"left"},{value:"right",text:"right"},{value:"top",text:"top"},{value:"bottom",text:"bottom"}],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_heatmap2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.heatmap.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:i18n("kbnVislibVisTypes.heatmap.segmentTitle",{defaultMessage:"X-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.heatmap.groupTitle",{defaultMessage:"Y-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:i18n("kbnVislibVisTypes.heatmap.splitTitle",{defaultMessage:"Split Chart"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="kuiSideBarSectionTitle">\n    <div\n      class="kuiSideBarSectionTitle__text"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.basicSettingsTitle"\n      i18n-default-message="Basic Settings"\n    ></div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="addTooltip"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.showTooltipsLabel"\n      i18n-default-message="Show Tooltips"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="addTooltip" type="checkbox" ng-model="editorState.params.addTooltip">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="enableHover"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.highlightLabel"\n      i18n-default-message="Highlight"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="enableHover" type="checkbox" ng-model="editorState.params.enableHover">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow" ng-show="editorState.params.addLegend">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="legendPosition"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.legendPositionLabel"\n      i18n-default-message="Legend Position"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="legendPosition"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.legendPosition"\n        ng-options="position.value as position.text for position in vis.type.editorConfig.collections.legendPositions"\n      ></select>\n    </div>\n  </div>\n</div>\n\n<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarSectionTitle">\n    <div\n      class="kuiSideBarSectionTitle__text"\n      i18n-id="kbnVislibVisTypes.editors.heatmap.heatmapSettingsTitle"\n      i18n-default-message="Heatmap Settings"\n    ></div>\n  </div>\n\n  <heatmap-options></heatmap-options>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=PointSeriesVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _point_series=__webpack_require__(230);var _point_series2=_interopRequireDefault(_point_series);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PointSeriesVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"horizontal_bar",title:i18n("kbnVislibVisTypes.horizontalBar.horizontalBarTitle",{defaultMessage:"Horizontal Bar"}),icon:"visBarHorizontal",description:i18n("kbnVislibVisTypes.horizontalBar.horizontalBarDescription",{defaultMessage:"Assign a continuous variable to each axis"}),visConfig:{defaults:{type:"histogram",grid:{categoryLines:false,style:{color:"#eee"}},categoryAxes:[{id:"CategoryAxis-1",type:"category",position:"left",show:true,style:{},scale:{type:"linear"},labels:{show:true,rotate:0,filter:false,truncate:200},title:{}}],valueAxes:[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"bottom",show:true,style:{},scale:{type:"linear",mode:"normal"},labels:{show:true,rotate:75,filter:true,truncate:100},title:{text:"Count"}}],seriesParams:[{show:true,type:"histogram",mode:"normal",data:{label:"Count",id:"1"},valueAxis:"ValueAxis-1",drawLinesBetweenPoints:true,showCircles:true}],addTooltip:true,addLegend:true,legendPosition:"right",times:[],addTimeMarker:false}},editorConfig:{collections:{positions:["top","left","right","bottom"],chartTypes:[{value:"line",text:"line"},{value:"area",text:"area"},{value:"histogram",text:"bar"}],axisModes:["normal","percentage","wiggle","silhouette"],scaleTypes:["linear","log","square root"],chartModes:["normal","stacked"],interpolationModes:[{value:"linear",text:"straight"},{value:"cardinal",text:"smoothed"},{value:"step-after",text:"stepped"}]},optionTabs:[{name:"advanced",title:"Metrics & Axes",editor:"<div><vislib-series></vislib-series><vislib-value-axes>"+"</vislib-value-axes><vislib-category-axis></vislib-category-axis></div>"},{name:"options",title:"Panel Settings",editor:_point_series2.default}],schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.horizontalBar.metricTitle",{defaultMessage:"Y-Axis"}),min:1,aggFilter:["!geo_centroid","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"metrics",name:"radius",title:i18n("kbnVislibVisTypes.horizontalBar.radiusTitle",{defaultMessage:"Dot Size"}),min:0,max:1,aggFilter:["count","avg","sum","min","max","cardinality"]},{group:"buckets",name:"segment",title:i18n("kbnVislibVisTypes.horizontalBar.segmentTitle",{defaultMessage:"X-Axis"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.horizontalBar.groupTitle",{defaultMessage:"Split Series"}),min:0,max:3,aggFilter:["!geohash_grid","!filter"]},{group:"buckets",name:"split",title:i18n("kbnVislibVisTypes.horizontalBar.splitTitle",{defaultMessage:"Split Chart"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=GaugeVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _gauge=__webpack_require__(423);var _gauge2=_interopRequireDefault(_gauge);var _colormaps=__webpack_require__(81);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"gauge",title:i18n("kbnVislibVisTypes.gauge.gaugeTitle",{defaultMessage:"Gauge"}),icon:"visGauge",description:i18n("kbnVislibVisTypes.gauge.gaugeDescription",{defaultMessage:"Gauges indicate the status of a metric. Use it to show how a metric's value relates to reference threshold values."}),visConfig:{defaults:{type:"gauge",addTooltip:true,addLegend:true,isDisplayWarning:false,gauge:{verticalSplit:false,extendRange:true,percentageMode:false,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",colorSchema:"Green to Red",gaugeColorMode:"Labels",colorsRange:[{from:0,to:50},{from:50,to:75},{from:75,to:100}],invertColors:false,labels:{show:true,color:"black"},scale:{show:true,labels:false,color:"#333"},type:"meter",style:{bgWidth:.9,width:.9,mask:false,bgMask:false,maskBars:50,bgFill:"#eee",bgColor:true,subText:"",fontSize:60}}}},events:{brush:{disabled:true}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_gauge2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.gauge.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.gauge.groupTitle",{defaultMessage:"Split Group"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])},useCustomNoDataScreen:true})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=GoalVisType;var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _gauge=__webpack_require__(423);var _gauge2=_interopRequireDefault(_gauge);var _colormaps=__webpack_require__(81);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GoalVisType(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createVislibVisualization({name:"goal",title:i18n("kbnVislibVisTypes.goal.goalTitle",{defaultMessage:"Goal"}),icon:"visGoal",description:i18n("kbnVislibVisTypes.goal.goalDescription",{defaultMessage:"A goal chart indicates how close you are to your final goal."}),visConfig:{defaults:{addTooltip:true,addLegend:false,isDisplayWarning:false,type:"gauge",gauge:{verticalSplit:false,autoExtend:false,percentageMode:true,gaugeType:"Arc",gaugeStyle:"Full",backStyle:"Full",orientation:"vertical",useRanges:false,colorSchema:"Green to Red",gaugeColorMode:"None",colorsRange:[{from:0,to:1e4}],invertColors:false,labels:{show:true,color:"black"},scale:{show:false,labels:false,color:"#333",width:2},type:"meter",style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},events:{brush:{disabled:true}},editorConfig:{collections:{gaugeTypes:["Arc","Circle"],gaugeColorMode:["None","Labels","Background"],scales:["linear","log","square root"],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:_gauge2.default,schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("kbnVislibVisTypes.goal.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!percentiles","!percentile_ranks","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"group",title:i18n("kbnVislibVisTypes.goal.groupTitle",{defaultMessage:"Split Group"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])},useCustomNoDataScreen:true})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _markdown_vis_controller=__webpack_require__(934);var _vis_factory=__webpack_require__(25);var _markdown_vis_params=__webpack_require__(935);var _markdown_vis_params2=_interopRequireDefault(_markdown_vis_params);var _vis_types=__webpack_require__(30);var _editor_size=__webpack_require__(231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(MarkdownVisProvider);function MarkdownVisProvider(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createReactVisualization({name:"markdown",title:"Markdown",isAccessible:true,icon:"visText",description:i18n("markdownVis.markdownDescription",{defaultMessage:"Create a document using markdown syntax"}),visConfig:{component:_markdown_vis_controller.MarkdownVisWrapper,defaults:{fontSize:12,openLinksInNewTab:false}},editorConfig:{optionsTemplate:_markdown_vis_params2.default,enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.LARGE},options:{showTimePicker:false},requestHandler:"none",responseHandler:"none"})}exports.default=MarkdownVisProvider;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.MarkdownVisWrapper=MarkdownVisWrapper;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _markdown=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MarkdownVisComponent=function(_Component){_inherits(MarkdownVisComponent,_Component);function MarkdownVisComponent(){_classCallCheck(this,MarkdownVisComponent);return _possibleConstructorReturn(this,(MarkdownVisComponent.__proto__||Object.getPrototypeOf(MarkdownVisComponent)).apply(this,arguments))}_createClass(MarkdownVisComponent,[{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"mkdVis",style:{fontSize:this.props.fontSize+"pt"}},_react2.default.createElement(_markdown.Markdown,{"data-test-subj":"markdownBody",markdown:this.props.markdown,openLinksInNewTab:this.props.openLinksInNewTab}))}}]);return MarkdownVisComponent}(_react.Component);function MarkdownVisWrapper(props){return _react2.default.createElement(MarkdownVisComponent,{fontSize:props.vis.params.fontSize,markdown:props.vis.params.markdown,openLinksInNewTab:props.vis.params.openLinksInNewTab,renderComplete:props.renderComplete})}},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="clearfix form-group">\n      <label for="markdownVisInput">Markdown</label>\n      <small class="pull-right">\n        <a target="_window" href="https://help.github.com/articles/github-flavored-markdown/">\n          <icon aria-hidden="true" size="\'s\'" type="\'link\'"></icon>\n          <span\n            i18n-id="markdownVis.params.helpLinkLabel"\n            i18n-default-message="Help"\n          >\n          </span>\n        </a>\n      </small>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label class="kuiSideBarFormRow__label" for="markdownVisFontSize">\n        <span\n          i18n-id="markdownVis.params.fontSizeLabel"\n          i18n-default-message="Font Size ({fontSize}pt)"\n          i18n-values="{ fontSize: editorState.params.fontSize }"\n        >\n        </span>\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="markdownVisFontSize" type="range" ng-model="editorState.params.fontSize" class="form-control" min="8" max="36" />\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="markdownVisOpenLinksInNewTab"\n        i18n-id="markdownVis.params.openLinksLabel"\n        i18n-default-message="Open links in new tab"\n      >\n      </label>\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="markdownVisOpenLinksInNewTab"\n          type="checkbox"\n          ng-model="editorState.params.openLinksInNewTab"\n          class="kuiCheckBox"\n        />\n      </div>\n    </div>\n    <textarea\n      id="markdownVisInput"\n      ng-model="editorState.params.markdown"\n      class="form-control"\n      rows="20"\n      data-test-subj="markdownTextarea"\n    ></textarea>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});__webpack_require__(937);var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _vis_types=__webpack_require__(30);var _colormaps=__webpack_require__(81);var _metric_vis_controller=__webpack_require__(939);_vis_types.VisTypesRegistryProvider.register(MetricVisProvider);function MetricVisProvider(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createReactVisualization({name:"metric",title:i18n("metricVis.metricTitle",{defaultMessage:"Metric"}),icon:"visMetric",description:i18n("metricVis.metricDescription",{defaultMessage:"Display a calculation as a single number"}),visConfig:{component:_metric_vis_controller.MetricVisComponent,defaults:{addTooltip:true,addLegend:false,type:"metric",metric:{percentageMode:false,useRanges:false,colorSchema:"Green to Red",metricColorMode:"None",colorsRange:[{from:0,to:1e4}],labels:{show:true},invertColors:false,style:{bgFill:"#000",bgColor:false,labelColor:false,subText:"",fontSize:60}}}},editorConfig:{collections:{metricColorMode:[{id:"None",label:i18n("metricVis.colorModes.noneOptionLabel",{defaultMessage:"None"})},{id:"Labels",label:i18n("metricVis.colorModes.labelsOptionLabel",{defaultMessage:"Labels"})},{id:"Background",label:i18n("metricVis.colorModes.backgroundOptionLabel",{defaultMessage:"Background"})}],colorSchemas:Object.values(_colormaps.vislibColorMaps).map(function(value){return{id:value.id,label:value.label}})},optionsTemplate:"<metric-vis-params></metric-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("metricVis.schemas.metricTitle",{defaultMessage:"Metric"}),min:1,aggFilter:["!std_dev","!geo_centroid","!derivative","!serial_diff","!moving_avg","!cumulative_sum","!geo_bounds"],defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"group",title:i18n("metricVis.schemas.splitGroupTitle",{defaultMessage:"Split Group"}),min:0,max:1,aggFilter:["!geohash_grid","!filter"]}])}})}exports.default=MetricVisProvider;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _metric_vis_params=__webpack_require__(938);var _metric_vis_params2=_interopRequireDefault(_metric_vis_params);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("metricVisParams",function(i18n){return{restrict:"E",template:_metric_vis_params2.default,replace:true,link:function link($scope){$scope.collections=$scope.vis.type.editorConfig.collections;$scope.showColorRange=true;$scope.$watch("editorState.params.metric.metricColorMode",function(newValue){switch(newValue){case"Labels":$scope.editorState.params.metric.style.labelColor=true;$scope.editorState.params.metric.style.bgColor=false;break;case"Background":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=true;break;case"None":$scope.editorState.params.metric.style.labelColor=false;$scope.editorState.params.metric.style.bgColor=false;break}});$scope.resetColors=function(){$scope.uiState.set("vis.colors",null);$scope.customColors=false};$scope.getGreaterThan=function(index){if(index===0)return 0;return $scope.editorState.params.metric.colorsRange[index-1].to};$scope.addRange=function(){var previousRange=_lodash2.default.last($scope.editorState.params.metric.colorsRange);var from=previousRange?previousRange.to:0;var to=previousRange?from+(previousRange.to-previousRange.from):100;$scope.editorState.params.metric.colorsRange.push({from:from,to:to})};$scope.removeRange=function(index){$scope.editorState.params.metric.colorsRange.splice(index,1)};$scope.getColor=function(index){var defaultColors=this.uiState.get("vis.defaultColors");var overwriteColors=this.uiState.get("vis.colors");var colors=defaultColors?_lodash2.default.defaults({},overwriteColors,defaultColors):overwriteColors;return colors?Object.values(colors)[index]:"transparent"};$scope.uiState.on("colorChanged",function(){$scope.customColors=true});$scope.editorState.requiredDescription=i18n("metricVis.params.ranges.warning.requiredDescription",{defaultMessage:"Required:"})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarFormRow">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="percentageMode"\n      i18n-id="metricVis.params.percentageModeLabel"\n      i18n-default-message="Percentage Mode"\n    >\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="percentageMode" type="checkbox" ng-model="editorState.params.metric.percentageMode">\n    </div>\n  </div>\n\n  <div class="kuiSideBarFormRow">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="showLabels"\n      i18n-id="metricVis.params.showLabelsLabel"\n      i18n-default-message="Show Labels"\n    >\n    </label>\n    <div class="kuiSideBarFormRow__control">\n      <input class="kuiCheckBox" id="showLabels" type="checkbox" ng-model="editorState.params.metric.labels.show">\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorRange}}"\n        aria-controls="metricOptionsRanges"\n        aria-label="{{::\'metricVis.params.ranges.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle range options\' } }}"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorRange = !showColorRange"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{ \'fa-caret-down\': showColorRange, \'fa-caret-right\': !showColorRange }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span\n          class="kuiSideBarCollapsibleTitle__text"\n          i18n-id="metricVis.params.rangesTitle"\n          i18n-default-message="Ranges"\n        >\n      </span>\n      </div>\n    </div>\n\n    <div id="metricOptionsRanges" ng-show="showColorRange" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <table class="visEditorAgg__rangesTable form-group" ng-show="editorState.params.metric.colorsRange.length">\n          <tr>\n            <th scope="col">\n              <label\n                id="metricOptionsCustomRangeFrom"\n                i18n-id="metricVis.params.ranges.fromLabel"\n                i18n-default-message="From"\n              >\n              </label>\n            </th>\n            <th scope="col" colspan="2">\n              <label\n                id="metricOptionsCustomRangeTo"\n                i18n-id="metricVis.params.ranges.toLabel"\n                i18n-default-message="To"\n              >\n              </label>\n            </th>\n          </tr>\n\n          <tr ng-repeat="range in editorState.params.metric.colorsRange track by $index">\n            <td>\n              <input\n                aria-labelledby="metricOptionsCustomRangeFrom"\n                ng-model="range.from"\n                type="number"\n                class="form-control"\n                name="range.from"\n                greater-or-equal-than="{{getGreaterThan($index)}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <input\n                aria-labelledby="metricOptionsCustomRangeTo"\n                ng-model="range.to"\n                type="number"\n                class="form-control"\n                name="range.to"\n                greater-or-equal-than="{{range.from}}"\n                required\n                step="any" />\n            </td>\n            <td>\n              <button\n                type="button"\n                ng-click="removeRange($index)"\n                ng-show="editorState.params.metric.colorsRange.length > 1"\n                class="kuiButton kuiButton--danger kuiButton--small">\n                <i class="fa fa-times"></i>\n              </button>\n            </td>\n          </tr>\n        </table>\n\n        <div class="hintbox" ng-show="!editorState.params.metric.colorsRange.length">\n          <p>\n            <i class="fa fa-danger text-danger"></i>\n            <span\n              i18n-id="metricVis.params.ranges.warning.specifyRangeDescription"\n              i18n-default-message="{requiredDescription} You must specify at least one range."\n              i18n-values="{ html_requiredDescription: \'<strong>\' + editorState.requiredDescription + \'</strong>\' }"\n            >\n            </span>\n          </p>\n        </div>\n\n        <div\n          ng-click="addRange()"\n          class="kuiButton kuiButton--primary kuiButton--fullWidth"\n          i18n-id="metricVis.params.ranges.addRangeButtonLabel"\n          i18n-default-message="Add Range"\n        >\n        </div>\n      </div>\n    </div>\n  </div>\n  <div ng-show="editorState.params.metric.colorsRange.length > 1">\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showColorOptions}}"\n        aria-controls="metricOptionsColors"\n        aria-label="{{::\'metricVis.params.color.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle color options\' } }}"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showColorOptions = !showColorOptions"\n      >\n      <span\n        aria-hidden="true"\n        ng-class="{\n        \'fa-caret-down\': showColorOptions,\n        \'fa-caret-right\': !showColorOptions\n        }"\n        class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n      ></span>\n        <span\n          class="kuiSideBarCollapsibleTitle__text"\n          i18n-id="metricVis.params.color.colorOptionsTitle"\n          i18n-default-message="Color Options"\n        >\n      </span>\n      </div>\n    </div>\n    <div id="metricOptionsColors" ng-if="showColorOptions" class="kuiSideBarCollapsibleSection">\n      <div class="kuiSideBarSection">\n        <div class="kuiSideBarFormRow" ng-show="editorState.params.metric.colorsRange.length > 1">\n          <label\n            class="kuiSideBarFormRow__label"\n            for="metricColorMode"\n            i18n-id="metricVis.params.color.useForLabel"\n            i18n-default-message="Use Color For"\n          >\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="metricColorMode"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.metric.metricColorMode"\n              ng-options="mode.id as mode.label for mode in collections.metricColorMode"\n            ></select>\n          </div>\n        </div>\n        <div class="kuiSideBarFormRow" ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n          <label\n            class="kuiSideBarFormRow__label"\n            for="colorSchema"\n            i18n-id="metricVis.params.color.schemaLabel"\n            i18n-default-message="Color Schema"\n          >\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <select\n              id="colorSchema"\n              class="kuiSelect kuiSideBarSelect"\n              ng-model="editorState.params.metric.colorSchema"\n              ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n            ></select>\n          </div>\n          <div class="text-info text-center" ng-show="customColors" ng-click="resetColors()"\n            i18n-id="metricVis.params.color.resetColorDescription"\n            i18n-default-message="reset colors"\n          >\n          </div>\n        </div>\n\n        <div class="kuiSideBarFormRow"  ng-show="editorState.params.metric.metricColorMode !== \'None\'">\n          <label\n            class="kuiSideBarFormRow__label"\n            for="invertColors"\n            i18n-id="metricVis.params.color.reverseSchemaLabel"\n            i18n-default-message="Reverse Color Schema"\n          >\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input class="kuiCheckBox" id="invertColors" type="checkbox" ng-model="editorState.params.metric.invertColors">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div>\n    <div class="kuiSideBarCollapsibleTitle">\n      <div\n        kbn-accessible-click\n        aria-expanded="{{!!showStyle}}"\n        aria-controls="metricOptionsStyle"\n        aria-label="{{::\'metricVis.params.style.toggleOptionsAriaLabel\' | i18n: { defaultMessage: \'Toggle style options\' } }}"\n        class="kuiSideBarCollapsibleTitle__label"\n        ng-click="showStyle = !showStyle"\n      >\n        <span\n          aria-hidden="true"\n          ng-class="{\n          \'fa-caret-down\': showStyle,\n          \'fa-caret-right\': !showStyle\n          }"\n          class="fa fa-caret-right kuiSideBarCollapsibleTitle__caret"\n        ></span>\n        <span\n          class="kuiSideBarCollapsibleTitle__text"\n          i18n-id="metricVis.params.style.styleTitle"\n          i18n-default-message="Style"\n        >\n        </span>\n      </div>\n    </div>\n    <div id="metricOptionsStyle" ng-if="showStyle" class="kuiSideBarCollapsibleSection">\n\n      <div class="kuiSideBarSection">\n\n        <div class="kuiSideBarFormRow">\n          <label class="kuiSideBarFormRow__label" for="metricFontSize">\n            <span\n              i18n-id="metricVis.params.style.fontSizeLabel"\n              i18n-default-message="Font Size ({fontSize}pt)"\n              i18n-values="{ fontSize: editorState.params.metric.style.fontSize }"\n            >\n            </span>\n          </label>\n          <div class="kuiSideBarFormRow__control">\n            <input id="metricFontSize" type="range" ng-model="editorState.params.metric.style.fontSize" class="form-control" min="12" max="120" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _heatmap_color=__webpack_require__(284);var _eui=__webpack_require__(2);var _metric_vis_value=__webpack_require__(940);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MetricVisComponent=exports.MetricVisComponent=function(_Component){_inherits(MetricVisComponent,_Component);function MetricVisComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,MetricVisComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MetricVisComponent.__proto__||Object.getPrototypeOf(MetricVisComponent)).call.apply(_ref,[this].concat(args))),_this),_this._filterBucket=function(metric){if(!metric.filterKey||!metric.bucketAgg){return}var table=_this.props.visData;_this.props.vis.API.events.filter({table:table,column:metric.columnIndex,row:metric.rowIndex})},_this._renderMetric=function(metric,index){return _react2.default.createElement(_metric_vis_value.MetricVisValue,{key:index,metric:metric,fontSize:_this.props.vis.params.metric.style.fontSize,onFilter:metric.filterKey&&metric.bucketAgg?_this._filterBucket:null,showLabel:_this.props.vis.params.metric.labels.show})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(MetricVisComponent,[{key:"_getLabels",value:function _getLabels(){var config=this.props.vis.params.metric;var isPercentageMode=config.percentageMode;var colorsRange=config.colorsRange;var max=_lodash2.default.last(colorsRange).to;var labels=[];colorsRange.forEach(function(range){var from=isPercentageMode?Math.round(100*range.from/max):range.from;var to=isPercentageMode?Math.round(100*range.to/max):range.to;labels.push(from+" - "+to)});return labels}},{key:"_getColors",value:function _getColors(){var config=this.props.vis.params.metric;var invertColors=config.invertColors;var colorSchema=config.colorSchema;var colorsRange=config.colorsRange;var labels=this._getLabels();var colors={};for(var i=0;i<labels.length;i+=1){var divider=Math.max(colorsRange.length-1,1);var val=invertColors?1-i/divider:i/divider;colors[labels[i]]=(0,_heatmap_color.getHeatmapColors)(val,colorSchema)}return colors}},{key:"_getBucket",value:function _getBucket(val){var config=this.props.vis.params.metric;var bucket=_lodash2.default.findIndex(config.colorsRange,function(range){return range.from<=val&&range.to>val});if(bucket===-1){if(val<config.colorsRange[0].from)bucket=0;else bucket=config.colorsRange.length-1}return bucket}},{key:"_getColor",value:function _getColor(val,labels,colors){var bucket=this._getBucket(val);var label=labels[bucket];return colors[label]}},{key:"_needsLightText",value:function _needsLightText(bgColor){var color=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(bgColor);if(!color){return false}return(0,_eui.isColorDark)(parseInt(color[1]),parseInt(color[2]),parseInt(color[3]))}},{key:"_getFormattedValue",value:function _getFormattedValue(fieldFormatter,value){if(_lodash2.default.isNaN(value))return"-";return fieldFormatter(value)}},{key:"_processTableGroups",value:function _processTableGroups(table){var _this2=this;var config=this.props.vis.params.metric;var isPercentageMode=config.percentageMode;var min=config.colorsRange[0].from;var max=_lodash2.default.last(config.colorsRange).to;var colors=this._getColors();var labels=this._getLabels();var metrics=[];var bucketAgg=void 0;var bucketColumnId=void 0;var rowHeaderIndex=void 0;table.columns.forEach(function(column,columnIndex){var aggConfig=column.aggConfig;if(aggConfig&&aggConfig.type.type==="buckets"){bucketAgg=aggConfig;rowHeaderIndex=columnIndex;bucketColumnId=column.id;return}table.rows.forEach(function(row,rowIndex){var title=column.name;var value=row[column.id];var color=_this2._getColor(value,labels,colors);if(isPercentageMode){var percentage=Math.round(100*(value-min)/(max-min));value=percentage+"%"}if(aggConfig){if(!isPercentageMode)value=_this2._getFormattedValue(aggConfig.fieldFormatter("html"),value);if(bucketAgg){var bucketValue=bucketAgg.fieldFormatter("text")(row[bucketColumnId]);title=bucketValue+" - "+aggConfig.makeLabel()}else{title=aggConfig.makeLabel()}}var shouldColor=config.colorsRange.length>1;metrics.push({label:title,value:value,color:shouldColor&&config.style.labelColor?color:null,bgColor:shouldColor&&config.style.bgColor?color:null,lightText:shouldColor&&config.style.bgColor&&_this2._needsLightText(color),filterKey:bucketColumnId!==undefined?row[bucketColumnId]:null,rowIndex:rowIndex,columnIndex:rowHeaderIndex,bucketAgg:bucketAgg})})});return metrics}},{key:"render",value:function render(){var metricsHtml=void 0;if(this.props.visData){var metrics=this._processTableGroups(this.props.visData);metricsHtml=metrics.map(this._renderMetric)}return _react2.default.createElement("div",{className:"mtrVis"},metricsHtml)}},{key:"componentDidMount",value:function componentDidMount(){this.props.renderComplete()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.renderComplete()}}]);return MetricVisComponent}(_react.Component)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricVisValue=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MetricVisValue=function(_Component){_inherits(MetricVisValue,_Component);function MetricVisValue(){var _ref;var _temp,_this,_ret;_classCallCheck(this,MetricVisValue);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MetricVisValue.__proto__||Object.getPrototypeOf(MetricVisValue)).call.apply(_ref,[this].concat(args))),_this),_this.onClick=function(){_this.props.onFilter(_this.props.metric)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(MetricVisValue,[{key:"render",value:function render(){var _props=this.props,fontSize=_props.fontSize,metric=_props.metric,onFilter=_props.onFilter,showLabel=_props.showLabel;var hasFilter=!!onFilter;var metricValueStyle={fontSize:fontSize+"pt",color:metric.color};var containerClassName=(0,_classnames2.default)("mtrVis__container",{"mtrVis__container--light":metric.lightText,"mtrVis__container-isfilterable":hasFilter});var metricComponent=_react2.default.createElement("div",{className:containerClassName,style:{backgroundColor:metric.bgColor},onClick:hasFilter?this.onClick:null,tabIndex:hasFilter?0:null,role:hasFilter?"button":null},_react2.default.createElement("div",{className:"mtrVis__value",style:metricValueStyle,dangerouslySetInnerHTML:{__html:metric.value}}),showLabel&&_react2.default.createElement("div",null,metric.label));if(hasFilter){return _react2.default.createElement(_eui.EuiKeyboardAccessible,null,metricComponent)}return metricComponent}}]);return MetricVisValue}(_react.Component);MetricVisValue.propTypes={fontSize:_propTypes2.default.number.isRequired,metric:_propTypes2.default.object.isRequired,onFilter:_propTypes2.default.func,showLabel:_propTypes2.default.bool};exports.MetricVisValue=MetricVisValue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=MetricsVisProvider;var _request_handler=__webpack_require__(942);var _editor_controller=__webpack_require__(945);var _vis_factory=__webpack_require__(25);var _default_feedback_message=__webpack_require__(287);var _vis_types=__webpack_require__(30);_vis_types.VisTypesRegistryProvider.register(MetricsVisProvider);function MetricsVisProvider(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);var ReactEditorController=Private(_editor_controller.ReactEditorControllerProvider).handler;var metricsRequestHandler=Private(_request_handler.MetricsRequestHandlerProvider).handler;return VisFactory.createReactVisualization({name:"metrics",title:i18n("tsvb.kbnVisTypes.metricsTitle",{defaultMessage:"Visual Builder"}),description:i18n("tsvb.kbnVisTypes.metricsDescription",{defaultMessage:"Build time-series using a visual pipeline interface"}),icon:"visVisualBuilder",feedbackMessage:_default_feedback_message.defaultFeedbackMessage,visConfig:{defaults:{id:"61ca57f0-469d-11e7-af02-69e470af7417",type:"timeseries",series:[{id:"61ca57f1-469d-11e7-af02-69e470af7417",color:"#68BC00",split_mode:"everything",metrics:[{id:"61ca57f2-469d-11e7-af02-69e470af7417",type:"count"}],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"}],time_field:"@timestamp",index_pattern:"",interval:"auto",axis_position:"left",axis_formatter:"number",axis_scale:"normal",show_legend:1,show_grid:1},component:__webpack_require__(426)},editor:ReactEditorController,editorConfig:{component:__webpack_require__(426)},options:{showQueryBar:false,showFilterBar:false,showIndexSelection:false},requestHandler:metricsRequestHandler,responseHandler:"none"})}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsRequestHandlerProvider=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _validate_interval=__webpack_require__(943);var _timezone=__webpack_require__(289);var _timefilter=__webpack_require__(19);var MetricsRequestHandlerProvider=function MetricsRequestHandlerProvider(Private,Notifier,config,$http,i18n){var notify=new Notifier({location:i18n("tsvb.requestHandler.notifier.locationNameTitle",{defaultMessage:"Metrics"})});return{name:"metrics",handler:function handler(_ref){var uiState=_ref.uiState,timeRange=_ref.timeRange,filters=_ref.filters,query=_ref.query,visParams=_ref.visParams;var timezone=Private(_timezone.timezoneProvider)();return new Promise(function(resolve){var panel=visParams;var uiStateObj=uiState.get(panel.type,{});var parsedTimeRange=_timefilter.timefilter.calculateBounds(timeRange);var scaledDataFormat=config.get("dateFormat:scaled");var dateFormat=config.get("dateFormat");if(panel&&panel.id){var params={timerange:_extends({timezone:timezone},parsedTimeRange),query:Array.isArray(query)?query:[query],filters:filters,panels:[panel],state:uiStateObj};try{var maxBuckets=config.get("metrics:max_buckets");(0,_validate_interval.validateInterval)(parsedTimeRange,panel,maxBuckets);var httpResult=$http.post("../api/metrics/vis/data",params).then(function(resp){return _extends({dateFormat:dateFormat,scaledDataFormat:scaledDataFormat,timezone:timezone},resp.data)}).catch(function(resp){throw resp.data});return httpResult.then(resolve).catch(function(resp){resolve({});var err=new Error(resp.message);err.stack=resp.stack;notify.error(err)})}catch(e){notify.error(e);return resolve()}}})}}};exports.MetricsRequestHandlerProvider=MetricsRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateInterval=validateInterval;var _parse_interval=__webpack_require__(288);var _interval_regexp=__webpack_require__(944);var _i18n=__webpack_require__(8);function validateInterval(bounds,panel,maxBuckets){var interval=panel.interval;var min=bounds.min,max=bounds.max;if(!interval)return;if(interval==="auto")return;var greaterThanMatch=interval.match(_interval_regexp.GTE_INTERVAL_RE);if(greaterThanMatch)return;var duration=(0,_parse_interval.parseInterval)(interval);if(duration){var span=max.valueOf()-min.valueOf();var buckets=Math.floor(span/duration.asMilliseconds());if(buckets>maxBuckets){throw new Error(_i18n.i18n.translate("tsvb.validateInterval.notifier.maxBucketsExceededErrorMessage",{defaultMessage:"Max buckets exceeded: {buckets} is greater than {maxBuckets}, try a larger time interval in the panel options.",values:{buckets:buckets,maxBuckets:maxBuckets}}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.INTERVAL_STRING_RE=exports.GTE_INTERVAL_RE=undefined;var _datemath=__webpack_require__(40);var _datemath2=_interopRequireDefault(_datemath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GTE_INTERVAL_RE=exports.GTE_INTERVAL_RE=new RegExp("^>=([\\d\\.]*\\s*("+_datemath2.default.units.join("|")+"))$");var INTERVAL_STRING_RE=exports.INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath2.default.units.join("|")+")$")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReactEditorControllerProvider=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ReactEditorControllerProvider(Private,config){var ReactEditorController=function(){function ReactEditorController(el,savedObj){_classCallCheck(this,ReactEditorController);this.el=el;this.savedObj=savedObj;this.vis=savedObj.vis}_createClass(ReactEditorController,[{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(params){var Component;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Component=this.vis.type.editorConfig.component;(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(Component,{config:config,vis:this.vis,savedObj:this.savedObj,timeRange:params.timeRange,renderComplete:function renderComplete(){},isEditorMode:true,appState:params.appState})),this.el);case 2:case"end":return _context.stop()}}},_callee,this)}));function render(_x){return _ref.apply(this,arguments)}return render}()},{key:"resize",value:function resize(){if(this.visData){this.render(this.visData)}}},{key:"destroy",value:function destroy(){(0,_reactDom.unmountComponentAtNode)(this.el)}}]);return ReactEditorController}();return{name:"react_editor",handler:ReactEditorController}}exports.ReactEditorControllerProvider=ReactEditorControllerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _visualize_loader=__webpack_require__(232);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MIN_CHART_HEIGHT=250;var VisEditorVisualization=function(_Component){_inherits(VisEditorVisualization,_Component);function VisEditorVisualization(props){_classCallCheck(this,VisEditorVisualization);var _this=_possibleConstructorReturn(this,(VisEditorVisualization.__proto__||Object.getPrototypeOf(VisEditorVisualization)).call(this,props));_this.onUpdate=function(){_this._handler.update({timeRange:_this.props.timeRange})};_this.state={height:MIN_CHART_HEIGHT,dragging:false};_this.handleMouseUp=_this.handleMouseUp.bind(_this);_this.handleMouseDown=_this.handleMouseDown.bind(_this);_this.onSizeHandleKeyDown=_this.onSizeHandleKeyDown.bind(_this);_this._visEl=_react2.default.createRef();_this._subscription=null;return _this}_createClass(VisEditorVisualization,[{key:"handleMouseDown",value:function handleMouseDown(){this.setState({dragging:true})}},{key:"handleMouseUp",value:function handleMouseUp(){this.setState({dragging:false})}},{key:"componentWillMount",value:function componentWillMount(){var _this2=this;this.handleMouseMove=function(event){if(_this2.state.dragging){_this2.setState(function(prevState){return{height:Math.max(MIN_CHART_HEIGHT,prevState.height+event.movementY)}})}};window.addEventListener("mousemove",this.handleMouseMove);window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove);window.removeEventListener("mouseup",this.handleMouseUp);if(this._handler){this._handler.destroy()}if(this._subscription){this._subscription.unsubscribe()}}},{key:"_loadVisualization",value:function _loadVisualization(){var _this3=this;(0,_visualize_loader.getVisualizeLoader)().then(function(loader){if(!_this3._visEl.current){return}_this3._loader=loader;_this3._handler=_this3._loader.embedVisualizationWithSavedObject(_this3._visEl.current,_this3.props.savedObj,{uiState:_this3.props.uiState,listenOnChange:false,timeRange:_this3.props.timeRange,appState:_this3.props.appState});_this3._subscription=_this3._handler.data$.subscribe(function(data){_this3.props.onDataChange(data)});if(_this3._handlerUpdateHasAlreadyBeenTriggered){_this3.onUpdate()}})}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(!this._handler){this._handlerUpdateHasAlreadyBeenTriggered=true;return}this.onUpdate()}},{key:"componentDidMount",value:function componentDidMount(){this._loadVisualization()}},{key:"onSizeHandleKeyDown",value:function onSizeHandleKeyDown(ev){var keyCode=ev.keyCode;if(keyCode===_eui.keyCodes.UP||keyCode===_eui.keyCodes.DOWN){ev.preventDefault();this.setState(function(prevState){var newHeight=prevState.height+(keyCode===_eui.keyCodes.UP?-15:15);return{height:Math.max(MIN_CHART_HEIGHT,newHeight)}})}}},{key:"render",value:function render(){var _props=this.props,dirty=_props.dirty,autoApply=_props.autoApply;var style={height:this.state.height};if(this.state.dragging){style.userSelect="none"}var applyMessage=_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.visEditorVisualization.changesSuccessfullyAppliedMessage",defaultMessage:"The latest changes have been applied."});if(dirty){applyMessage=_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.visEditorVisualization.changesHaveNotBeenAppliedMessage",defaultMessage:"The changes to this visualization have not been applied."})}if(autoApply){applyMessage=_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.visEditorVisualization.changesWillBeAutomaticallyAppliedMessage",defaultMessage:"The changes will be automatically applied."})}var applyButton=_react2.default.createElement(_eui.EuiFlexGroup,{className:"tvbEditorVisualization__apply",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiSwitch,{id:"tsvbAutoApplyInput",label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.visEditorVisualization.autoApplyLabel",defaultMessage:"Auto apply"}),checked:autoApply,onChange:this.props.onToggleAutoApply})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,{color:dirty?"default":"subdued",size:"xs"},_react2.default.createElement("p",null,applyMessage))),!autoApply&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{iconType:"play",fill:true,size:"s",onClick:this.props.onCommit,disabled:!dirty},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.visEditorVisualization.applyChangesLabel",defaultMessage:"Apply changes"}))));return _react2.default.createElement("div",null,_react2.default.createElement("div",{style:style,className:"tvbEditorVisualization","data-shared-items-container":true,"data-shared-item":true,"data-title":this.props.title,"data-description":this.props.description,"data-render-complete":"disabled",ref:this._visEl}),_react2.default.createElement("div",{className:"tvbEditor--hideForReporting"},applyButton,_react2.default.createElement("button",{className:"tvbEditorVisualization__draghandle",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.onSizeHandleKeyDown,"aria-label":this.props.intl.formatMessage({id:"tsvb.colorRules.adjustChartSizeAriaLabel",defaultMessage:"Press up/down to adjust the chart size"})},_react2.default.createElement("i",{className:"fa fa-ellipsis-h"}))))}}]);return VisEditorVisualization}(_react.Component);VisEditorVisualization.propTypes={model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,onCommit:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,onToggleAutoApply:_propTypes2.default.func,savedObj:_propTypes2.default.object,timeRange:_propTypes2.default.object,dirty:_propTypes2.default.bool,autoApply:_propTypes2.default.bool,dateFormat:_propTypes2.default.string,appState:_propTypes2.default.object};exports.default=(0,_react3.injectI18n)(VisEditorVisualization);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddedVisualizeHandler=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _events=__webpack_require__(44);var _lodash=__webpack_require__(0);var _rxjs=__webpack_require__(32);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(38);var _inspector=__webpack_require__(83);var _render_complete=__webpack_require__(70);var _timefilter=__webpack_require__(19);var _visualization_loader=__webpack_require__(955);var _visualize_data_loader=__webpack_require__(962);var _adapters=__webpack_require__(105);var _utils=__webpack_require__(971);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var RENDER_COMPLETE_EVENT="render_complete";var LOADING_ATTRIBUTE="data-loading";var RENDERING_COUNT_ATTRIBUTE="data-rendering-count";var EmbeddedVisualizeHandler=function(){function EmbeddedVisualizeHandler(element,savedObject,params){var _this=this;this.element=element;this.inspectorAdapters={};this.loaded=false;this.destroyed=false;this.listeners=new _events.EventEmitter;this.shouldForceNextFetch=false;this.debouncedFetchAndRender=(0,_lodash.debounce)(function(){if(_this.destroyed){return}var forceFetch=_this.shouldForceNextFetch;_this.shouldForceNextFetch=false;_this.fetch(forceFetch).then(_this.render)},100);this.actions={};this.render=function(visData){if(visData===void 0){visData=null}return _visualization_loader.visualizationLoader.render(_this.element,_this.vis,visData,_this.uiState,{listenOnChange:false}).then(function(){if(!_this.loaded){_this.loaded=true;if(_this.autoFetch){_this.fetchAndRender()}}})};this.openInspector=function(){return _inspector.Inspector.open(_this.inspectorAdapters,{title:_this.vis.title})};this.hasInspector=function(){return _inspector.Inspector.isAvailable(_this.inspectorAdapters)};this.reload=function(){_this.fetchAndRender(true)};this.incrementRenderingCount=function(){var renderingCount=Number(_this.element.getAttribute(RENDERING_COUNT_ATTRIBUTE)||0);_this.element.setAttribute(RENDERING_COUNT_ATTRIBUTE,""+(renderingCount+1))};this.onRenderCompleteListener=function(){_this.listeners.emit(RENDER_COMPLETE_EVENT);_this.element.removeAttribute(LOADING_ATTRIBUTE);_this.incrementRenderingCount()};this.onUiStateChange=function(){_this.fetchAndRender()};this.getActiveInspectorAdapters=function(){var adapters={};var typeAdapters=_this.vis.type.inspectorAdapters;if(typeAdapters&&typeAdapters.requests||_this.vis.type.requestHandler==="courier"){adapters.requests=new _adapters.RequestAdapter}if(typeAdapters&&typeAdapters.data||_this.vis.type.requestHandler==="courier"){adapters.data=new _adapters.DataAdapter}if(typeAdapters&&typeAdapters.custom){Object.entries(typeAdapters.custom).forEach(function(_a){var _b=tslib_1.__read(_a,2),key=_b[0],Adapter=_b[1];adapters[key]=new Adapter})}return adapters};this.fetchAndRender=function(forceFetch){if(forceFetch===void 0){forceFetch=false}_this.shouldForceNextFetch=forceFetch||_this.shouldForceNextFetch;_this.element.setAttribute(LOADING_ATTRIBUTE,"");_this.debouncedFetchAndRender()};this.handleVisUpdate=function(){if(_this.appState){_this.appState.vis=_this.vis.getState();_this.appState.save()}_this.fetchAndRender()};this.fetch=function(forceFetch){if(forceFetch===void 0){forceFetch=false}_this.dataLoaderParams.aggs=_this.vis.getAggConfig();_this.dataLoaderParams.forceFetch=forceFetch;_this.dataLoaderParams.inspectorAdapters=_this.inspectorAdapters;return _this.dataLoader.fetch(_this.dataLoaderParams).then(function(data){_this.dataSubject.next(data);return data})};var searchSource=savedObject.searchSource,vis=savedObject.vis;var appState=params.appState,uiState=params.uiState,queryFilter=params.queryFilter,timeRange=params.timeRange,filters=params.filters,query=params.query,_a=params.autoFetch,autoFetch=_a===void 0?true:_a,Private=params.Private;this.dataLoaderParams={searchSource:searchSource,timeRange:timeRange,query:query,queryFilter:queryFilter,filters:filters,uiState:uiState,aggs:vis.getAggConfig(),forceFetch:false};this.firstRenderComplete=new Promise(function(resolve){_this.listeners.once(RENDER_COMPLETE_EVENT,resolve)});element.setAttribute(LOADING_ATTRIBUTE,"");element.setAttribute(RENDERING_COUNT_ATTRIBUTE,"0");element.addEventListener("renderComplete",this.onRenderCompleteListener);this.autoFetch=autoFetch;this.appState=appState;this.vis=vis;if(uiState){vis._setUiState(uiState)}this.uiState=this.vis.getUiState();this.vis.on("update",this.handleVisUpdate);this.vis.on("reload",this.reload);this.uiState.on("change",this.onUiStateChange);if(autoFetch){_timefilter.timefilter.on("autoRefreshFetch",this.reload)}this.vis.API.getGeohashBounds=function(){return(0,_utils.queryGeohashBounds)(_this.vis,{filters:_this.dataLoaderParams.filters,query:_this.dataLoaderParams.query})};this.dataLoader=new _visualize_data_loader.VisualizeDataLoader(vis,Private);this.renderCompleteHelper=new _render_complete.RenderCompleteHelper(element);this.inspectorAdapters=this.getActiveInspectorAdapters();this.vis.openInspector=this.openInspector;this.vis.hasInspector=this.hasInspector;(0,_lodash.forEach)(this.vis.type.events,function(event,eventName){if(event.disabled||!eventName){return}else{_this.actions[eventName]=event.defaultAction}});this.vis.eventsSubject=new Rx.Subject;this.events$=this.vis.eventsSubject.asObservable().pipe((0,_operators.share)());this.events$.subscribe(function(event){if(_this.actions[event.name]){_this.actions[event.name](event.data)}});this.dataSubject=new Rx.Subject;this.data$=this.dataSubject.asObservable().pipe((0,_operators.share)());this.render()}EmbeddedVisualizeHandler.prototype.update=function(params){var _this=this;if(params===void 0){params={}}var dataAttrs=params.dataAttrs;if(dataAttrs){Object.keys(dataAttrs).forEach(function(key){if(dataAttrs[key]===null){_this.element.removeAttribute("data-"+key);return}_this.element.setAttribute("data-"+key,dataAttrs[key])})}var fetchRequired=false;if(params.hasOwnProperty("timeRange")){fetchRequired=true;this.dataLoaderParams.timeRange=params.timeRange}if(params.hasOwnProperty("filters")){fetchRequired=true;this.dataLoaderParams.filters=params.filters}if(params.hasOwnProperty("query")){fetchRequired=true;this.dataLoaderParams.query=params.query}if(fetchRequired){this.fetchAndRender()}};EmbeddedVisualizeHandler.prototype.destroy=function(){this.destroyed=true;this.debouncedFetchAndRender.cancel();if(this.autoFetch){_timefilter.timefilter.off("autoRefreshFetch",this.reload)}this.vis.removeListener("reload",this.reload);this.vis.removeListener("update",this.handleVisUpdate);this.element.removeEventListener("renderComplete",this.onRenderCompleteListener);this.uiState.off("change",this.onUiStateChange);_visualization_loader.visualizationLoader.destroy(this.element);this.renderCompleteHelper.destroy()};EmbeddedVisualizeHandler.prototype.getElement=function(){return this.element};EmbeddedVisualizeHandler.prototype.whenFirstRenderComplete=function(){return this.firstRenderComplete};EmbeddedVisualizeHandler.prototype.addRenderCompleteListener=function(listener){this.listeners.addListener(RENDER_COMPLETE_EVENT,listener)};EmbeddedVisualizeHandler.prototype.removeRenderCompleteListener=function(listener){this.listeners.removeListener(RENDER_COMPLETE_EVENT,listener)};return EmbeddedVisualizeHandler}();exports.EmbeddedVisualizeHandler=EmbeddedVisualizeHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _inspector_view=__webpack_require__(949);Object.defineProperty(exports,"InspectorView",{enumerable:true,get:function get(){return _inspector_view.InspectorView}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorView=undefined;var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InspectorView=function InspectorView(_a){var useFlex=_a.useFlex,children=_a.children;var classes=(0,_classnames2.default)({"kbnInspectorView--flex":Boolean(useFlex)});return _react2.default.createElement(_eui.EuiFlyoutBody,{className:classes},children)};InspectorView.propTypes={useFlex:_propTypes2.default.bool};exports.InspectorView=InspectorView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Inspector=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18n=__webpack_require__(8);var _flyout=__webpack_require__(951);var _inspector_panel=__webpack_require__(953);var _view_registry=__webpack_require__(427);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var closeButtonLabel=_i18n.i18n.translate("common.ui.inspector.closeButton",{defaultMessage:"Close Inspector"});function isAvailable(adapters){return _view_registry.viewRegistry.getVisible(adapters).length>0}function open(adapters,options){if(options===void 0){options={}}var views=_view_registry.viewRegistry.getVisible(adapters);if(!views||views.length===0){throw new Error("Tried to open an inspector without views being available.\n      Make sure to call Inspector.isAvailable() with the same adapters before to check\n      if an inspector can be shown.")}return(0,_flyout.openFlyout)(_react2.default.createElement(_inspector_panel.InspectorPanel,{views:views,adapters:adapters,title:options.title}),{"data-test-subj":"inspectorPanel",closeButtonAriaLabel:closeButtonLabel})}var Inspector={isAvailable:isAvailable,open:open};exports.Inspector=Inspector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flyout_session=__webpack_require__(952);Object.keys(_flyout_session).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _flyout_session[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlyoutSession=undefined;exports.openFlyout=openFlyout;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _events=__webpack_require__(44);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var activeSession=null;var CONTAINER_ID="flyout-container";function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);if(!container){container=document.createElement("div");container.id=CONTAINER_ID;document.body.appendChild(container)}return container}var FlyoutSession=function(_super){tslib_1.__extends(FlyoutSession,_super);function FlyoutSession(){return _super!==null&&_super.apply(this,arguments)||this}FlyoutSession.prototype.bindToAngularScope=function(scope){var _this=this;var removeWatch=scope.$on("$destroy",function(){return _this.close()});this.on("closed",function(){return removeWatch()})};FlyoutSession.prototype.close=function(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){_reactDom2.default.unmountComponentAtNode(container);this.emit("closed")}}};return FlyoutSession}(_events.EventEmitter);function openFlyout(flyoutChildren,flyoutProps){if(flyoutProps===void 0){flyoutProps={}}if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new FlyoutSession;var onClose=function onClose(){if(flyoutProps.onClose){flyoutProps.onClose()}session.close()};_reactDom2.default.render(_react2.default.createElement(_eui.EuiFlyout,tslib_1.__assign({},flyoutProps,{onClose:onClose}),flyoutChildren),container);return session}exports.FlyoutSession=FlyoutSession},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _i18n=__webpack_require__(8);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _inspector_view_chooser=__webpack_require__(954);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some(function(key){return oldAdapters[key]!==newAdapters[key]})}var inspectorTitle=_i18n.i18n.translate("common.ui.inspector.title",{defaultMessage:"Inspector"});var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(props){_classCallCheck(this,InspectorPanel);var _this=_possibleConstructorReturn(this,(InspectorPanel.__proto__||Object.getPrototypeOf(InspectorPanel)).call(this,props));_this.onViewSelected=function(view){if(view!==_this.state.selectedView){_this.setState({selectedView:view})}};_this.state={selectedView:props.views[0],views:props.views,adapters:_extends({},props.adapters)};return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react2.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title})}},{key:"render",value:function render(){var _props=this.props,views=_props.views,title=_props.title;var selectedView=this.state.selectedView;return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h1",null,title))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),this.renderSelectedPanel())}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters)){throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.")}var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);InspectorPanel.defaultProps={title:inspectorTitle};InspectorPanel.propTypes={adapters:_propTypes2.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props[propName])||props[propName].length<1){throw new Error(propName+" prop must be an array of at least one element in "+componentName+".")}},title:_propTypes2.default.string};exports.InspectorPanel=InspectorPanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _ref;var _temp,_this,_ret;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=InspectorViewChooser.__proto__||Object.getPrototypeOf(InspectorViewChooser)).call.apply(_ref,[this].concat(args))),_this),_this.state={isSelectorOpen:false},_this.toggleSelector=function(){_this.setState(function(prev){return{isSelectorOpen:!prev.isSelectorOpen}})},_this.closeSelector=function(){_this.setState({isSelectorOpen:false})},_this.renderView=function(view,index){return _react3.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser"+view.title},view.title)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react3.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},_react3.default.createElement(_react.FormattedMessage,{id:"common.ui.inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"renderSingleView",value:function renderSingleView(){return _react3.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react3.default.createElement(_react.FormattedMessage,{id:"common.ui.inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2){return this.renderSingleView()}var triggerButton=this.renderViewButton();return _react3.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight",repositionOnScroll:true},_react3.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react2.Component);InspectorViewChooser.propTypes={views:_propTypes2.default.array.isRequired,onViewSelected:_propTypes2.default.func.isRequired,selectedView:_propTypes2.default.object.isRequired};exports.InspectorViewChooser=InspectorViewChooser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualizationLoader=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _visualization=__webpack_require__(956);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderVisualization(element,vis,visData,uiState,params){return new Promise(function(resolve){var listenOnChange=_lodash2.default.get(params,"listenOnChange",false);(0,_reactDom.render)(_react2.default.createElement(_visualization.Visualization,{vis:vis,visData:visData,uiState:uiState,listenOnChange:listenOnChange,onInit:resolve}),element)})}function destroy(element){if(element){(0,_reactDom.unmountComponentAtNode)(element)}}var visualizationLoader=exports.visualizationLoader={render:renderVisualization,destroy:destroy}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Visualization=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _memoize=__webpack_require__(428);var _visualization_chart=__webpack_require__(957);var _visualization_noresults=__webpack_require__(960);var _visualization_requesterror=__webpack_require__(961);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function shouldShowNoResultsMessage(vis,visData){var requiresSearch=(0,_lodash.get)(vis,"type.requiresSearch");var rows=(0,_lodash.get)(visData,"rows");var isZeroHits=(0,_lodash.get)(visData,"hits")===0||rows&&!rows.length;var shouldShowMessage=!(0,_lodash.get)(vis,"type.useCustomNoDataScreen");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}function shouldShowRequestErrorMessage(vis,visData){var requestError=(0,_lodash.get)(vis,"requestError");var showRequestError=(0,_lodash.get)(vis,"showRequestError");return Boolean(!visData&&requestError&&showRequestError)}var Visualization=function(_super){tslib_1.__extends(Visualization,_super);function Visualization(props){var _this=_super.call(this,props)||this;_this.showNoResultsMessage=(0,_memoize.memoizeLast)(shouldShowNoResultsMessage);var vis=props.vis,uiState=props.uiState,listenOnChange=props.listenOnChange;vis._setUiState(props.uiState);if(listenOnChange){uiState.on("change",_this.onUiStateChanged)}return _this}Visualization.prototype.render=function(){var _a=this.props,vis=_a.vis,visData=_a.visData,onInit=_a.onInit,uiState=_a.uiState;var noResults=this.showNoResultsMessage(vis,visData);var requestError=shouldShowRequestErrorMessage(vis,visData);return _react2.default.createElement("div",{className:"visualization"},requestError?_react2.default.createElement(_visualization_requesterror.VisualizationRequestError,{onInit:onInit,error:vis.requestError}):noResults?_react2.default.createElement(_visualization_noresults.VisualizationNoResults,{onInit:onInit}):_react2.default.createElement(_visualization_chart.VisualizationChart,{vis:vis,visData:visData,onInit:onInit,uiState:uiState}))};Visualization.prototype.shouldComponentUpdate=function(nextProps){if(nextProps.uiState!==this.props.uiState){throw new Error("Changing uiState on <Visualization/> is not supported!")}return true};Visualization.prototype.componentWillUnmount=function(){this.props.uiState.off("change",this.onUiStateChanged)};Visualization.prototype.componentDidUpdate=function(prevProps){var listenOnChange=this.props.listenOnChange;if(prevProps.listenOnChange!==listenOnChange){if(listenOnChange){this.props.uiState.on("change",this.onUiStateChanged)}else{this.props.uiState.off("change",this.onUiStateChanged)}}};Visualization.prototype.onUiStateChanged=function(){this.forceUpdate()};return Visualization}(_react2.default.Component);exports.Visualization=Visualization},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationChart=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _rxjs=__webpack_require__(32);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(38);var _render_complete=__webpack_require__(70);var _resize_checker=__webpack_require__(429);var _update_status=__webpack_require__(82);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizationChart=function(_super){tslib_1.__extends(VisualizationChart,_super);function VisualizationChart(props){var _this=_super.call(this,props)||this;_this.chartDiv=_react2.default.createRef();_this.containerDiv=_react2.default.createRef();_this.renderSubject=new Rx.Subject;var render$=_this.renderSubject.asObservable().pipe((0,_operators.share)());var success$=render$.pipe((0,_operators.tap)(function(){if(_this.chartDiv.current){(0,_render_complete.dispatchRenderStart)(_this.chartDiv.current)}}),(0,_operators.filter)(function(_a){var vis=_a.vis,visData=_a.visData,container=_a.container;return vis&&container&&(!vis.type.requiresSearch||visData)}),(0,_operators.debounceTime)(100),(0,_operators.switchMap)(function(_a){var vis=_a.vis,visData=_a.visData,container=_a.container;return tslib_1.__awaiter(_this,void 0,void 0,function(){var status;return tslib_1.__generator(this,function(_b){if(!this.visualization){throw new Error("Visualization implementation was not initialized on first render.")}vis.size=[container.clientWidth,container.clientHeight];status=(0,_update_status.getUpdateStatus)(vis.type.requiresUpdateStatus,this,this.props);return[2,this.visualization.render(visData,status)]})})}));var requestError$=render$.pipe((0,_operators.filter)(function(_a){var vis=_a.vis;return vis.requestError}));_this.renderSubscription=Rx.merge(success$,requestError$).subscribe(function(){if(_this.chartDiv.current!==null){(0,_render_complete.dispatchRenderComplete)(_this.chartDiv.current)}});return _this}VisualizationChart.prototype.render=function(){return _react2.default.createElement("div",{className:"visChart__container",tabIndex:0,ref:this.containerDiv},_react2.default.createElement("p",{className:"euiScreenReaderOnly"},this.props.vis.type.title," visualization, not yet accessible"),_react2.default.createElement("div",{"aria-hidden":!this.props.vis.type.isAccessible,className:"visChart",ref:this.chartDiv}))};VisualizationChart.prototype.componentDidMount=function(){var _this=this;if(!this.chartDiv.current||!this.containerDiv.current){throw new Error("chartDiv and currentDiv reference should always be present.")}var _a=this.props,vis=_a.vis,onInit=_a.onInit;var Visualization=vis.type.visualization;this.visualization=new Visualization(this.chartDiv.current,vis);if(onInit){var visLoaded=this.visualization.isLoaded&&this.visualization.isLoaded();Promise.resolve(visLoaded).then(onInit)}this.resizeChecker=new _resize_checker.ResizeChecker(this.containerDiv.current);this.resizeChecker.on("resize",function(){return _this.startRenderVisualization()});this.startRenderVisualization()};VisualizationChart.prototype.componentDidUpdate=function(){this.startRenderVisualization()};VisualizationChart.prototype.componentWillUnmount=function(){if(this.renderSubscription){this.renderSubscription.unsubscribe()}if(this.resizeChecker){this.resizeChecker.destroy()}if(this.visualization){this.visualization.destroy()}};VisualizationChart.prototype.startRenderVisualization=function(){if(this.containerDiv.current&&this.chartDiv.current){this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,container:this.containerDiv.current})}};return VisualizationChart}(_react2.default.Component);exports.VisualizationChart=VisualizationChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ResizeChecker=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _events=__webpack_require__(44);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _resizeObserverPolyfill=__webpack_require__(1022);var _resizeObserverPolyfill2=_interopRequireDefault(_resizeObserverPolyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function validateElArg(el){var $el=(0,_jquery2.default)(el);if($el.length!==1){throw new TypeError("ResizeChecker must be constructed with a single DOM element.")}return $el.get(0)}function getSize(el){return[el.clientWidth,el.clientHeight]}var ResizeChecker=function(_super){tslib_1.__extends(ResizeChecker,_super);function ResizeChecker(el,args){if(args===void 0){args={}}var _this=_super.call(this)||this;_this.destroyed=false;_this.expectedSize=null;_this.el=validateElArg(el);_this.observer=new _resizeObserverPolyfill2.default(function(){if(_this.expectedSize){var sameSize=(0,_lodash.isEqual)(getSize(el),_this.expectedSize);_this.expectedSize=null;if(sameSize){return}}_this.emit("resize")});if(!args.disabled){_this.enable()}return _this}ResizeChecker.prototype.enable=function(){if(this.destroyed){return}this.expectedSize=getSize(this.el);this.observer.observe(this.el)};ResizeChecker.prototype.modifySizeWithoutTriggeringResize=function(block){try{block()}finally{if(this.el){this.expectedSize=getSize(this.el)}}};ResizeChecker.prototype.destroy=function(){if(this.destroyed){return}this.destroyed=true;this.observer.disconnect();this.observer=null;this.expectedSize=null;this.el=null;this.removeAllListeners()};return ResizeChecker}(_events.EventEmitter);exports.ResizeChecker=ResizeChecker},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationNoResults=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _render_complete=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizationNoResults=function(_super){tslib_1.__extends(VisualizationNoResults,_super);function VisualizationNoResults(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.containerDiv=_react2.default.createRef();return _this}VisualizationNoResults.prototype.render=function(){return _react2.default.createElement("div",{className:"text-center visError visChart",ref:this.containerDiv},_react2.default.createElement("div",{className:"item top"}),_react2.default.createElement("div",{className:"item"},_react2.default.createElement("h2",{"aria-hidden":"true"},_react2.default.createElement("i",{"aria-hidden":"true",className:"fa fa-meh-o"})),_react2.default.createElement("h4",null,"No results found")),_react2.default.createElement("div",{className:"item bottom"}))};VisualizationNoResults.prototype.componentDidMount=function(){this.afterRender()};VisualizationNoResults.prototype.componentDidUpdate=function(){this.afterRender()};VisualizationNoResults.prototype.afterRender=function(){if(this.props.onInit){this.props.onInit()}if(this.containerDiv.current){(0,_render_complete.dispatchRenderComplete)(this.containerDiv.current)}};return VisualizationNoResults}(_react2.default.Component);exports.VisualizationNoResults=VisualizationNoResults},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationRequestError=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _eui=__webpack_require__(2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _render_complete=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizationRequestError=function(_super){tslib_1.__extends(VisualizationRequestError,_super);function VisualizationRequestError(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.containerDiv=_react2.default.createRef();return _this}VisualizationRequestError.prototype.render=function(){var error=this.props.error;var errorMessage=error&&error.message||error;return _react2.default.createElement("div",{className:"visError visChart",ref:this.containerDiv},_react2.default.createElement(_eui.EuiText,{className:"visError--request",color:"danger",size:"xs"},errorMessage))};VisualizationRequestError.prototype.componentDidMount=function(){this.afterRender()};VisualizationRequestError.prototype.componentDidUpdate=function(){this.afterRender()};VisualizationRequestError.prototype.afterRender=function(){if(this.props.onInit){this.props.onInit()}if(this.containerDiv.current){(0,_render_complete.dispatchRenderComplete)(this.containerDiv.current)}};return VisualizationRequestError}(_react2.default.Component);exports.VisualizationRequestError=VisualizationRequestError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeDataLoader=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _vis_request_handlers=__webpack_require__(290);var _vis_response_handlers=__webpack_require__(233);var _elasticsearch_errors=__webpack_require__(963);var _notify=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function getHandler(from,type){if(typeof type==="function"){return type}var handlerDesc=from.find(function(handler){return handler.name===type});if(!handlerDesc){throw new Error('Could not find handler "'+type+'".')}return handlerDesc.handler}var VisualizeDataLoader=function(){function VisualizeDataLoader(vis,Private){this.vis=vis;var _a=vis.type,requestHandler=_a.requestHandler,responseHandler=_a.responseHandler;var requestHandlers=Private(_vis_request_handlers.VisRequestHandlersRegistryProvider);var responseHandlers=Private(_vis_response_handlers.VisResponseHandlersRegistryProvider);this.requestHandler=getHandler(requestHandlers,requestHandler);this.responseHandler=getHandler(responseHandlers,responseHandler)}VisualizeDataLoader.prototype.fetch=function(params){return tslib_1.__awaiter(this,void 0,void 0,function(){var minimalColumns,filters,savedFilters,query,requestHandlerResponse,canSkipResponseHandler,_a,error_1;return tslib_1.__generator(this,function(_b){switch(_b.label){case 0:this.vis.filters={timeRange:params.timeRange};this.vis.requestError=undefined;this.vis.showRequestError=false;_b.label=1;case 1:_b.trys.push([1,5,,6]);minimalColumns=typeof this.vis.params.showMetricsAtAllLevels!=="undefined"?!this.vis.params.showMetricsAtAllLevels:!this.vis.isHierarchical();filters=params.filters||[];savedFilters=params.searchSource.getField("filter")||[];query=params.query||params.searchSource.getField("query");return[4,this.requestHandler(tslib_1.__assign({partialRows:this.vis.type.requiresPartialRows||this.vis.params.showPartialRows,minimalColumns:minimalColumns,metricsAtAllLevels:this.vis.isHierarchical(),visParams:this.vis.params},params,{query:query,filters:filters.concat(savedFilters).filter(function(f){return!f.meta.disabled})}))];case 2:requestHandlerResponse=_b.sent();canSkipResponseHandler=this.previousRequestHandlerResponse&&this.previousRequestHandlerResponse===requestHandlerResponse&&this.previousVisState&&(0,_lodash.isEqual)(this.previousVisState,this.vis.getState());this.previousVisState=this.vis.getState();this.previousRequestHandlerResponse=requestHandlerResponse;if(!!canSkipResponseHandler)return[3,4];_a=this;return[4,Promise.resolve(this.responseHandler(requestHandlerResponse))];case 3:_a.visData=_b.sent();_b.label=4;case 4:return[2,this.visData];case 5:error_1=_b.sent();params.searchSource.cancelQueued();this.vis.requestError=error_1;this.vis.showRequestError=error_1.type&&["NO_OP_SEARCH_STRATEGY","UNSUPPORTED_QUERY"].includes(error_1.type);console.error(error_1);if((0,_elasticsearch_errors.isTermSizeZeroError)(error_1)){return[2,_notify.toastNotifications.addDanger("Your visualization ('"+this.vis.title+"') has an error: it has a term "+"aggregation with a size of 0. Please set it to a number greater than 0 to resolve "+"the error.")]}_notify.toastNotifications.addDanger({title:"Error in visualization",text:error_1.message});return[3,6];case 6:return[2]}})})};return VisualizeDataLoader}();exports.VisualizeDataLoader=VisualizeDataLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _elasticsearch_error=__webpack_require__(430);Object.defineProperty(exports,"ElasticsearchError",{enumerable:true,get:function get(){return _elasticsearch_error.ElasticsearchError}});var _is_term_size_zero_error=__webpack_require__(964);Object.defineProperty(exports,"isTermSizeZeroError",{enumerable:true,get:function get(){return _is_term_size_zero_error.isTermSizeZeroError}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isTermSizeZeroError=isTermSizeZeroError;var _elasticsearch_error=__webpack_require__(430);function isTermSizeZeroError(error){return _elasticsearch_error.ElasticsearchError.hasRootCause(error,"size must be positive, got 0")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var FormattedData=function(){function FormattedData(raw,formatted){this.raw=raw;this.formatted=formatted}return FormattedData}();exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataAdapter=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _events=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var DataAdapter=function(_super){tslib_1.__extends(DataAdapter,_super);function DataAdapter(){return _super!==null&&_super.apply(this,arguments)||this}DataAdapter.prototype.setTabularLoader=function(callback,options){if(options===void 0){options={}}this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")};DataAdapter.prototype.getTabular=function(){if(!this.tabular||!this.tabularOptions){return Promise.resolve({data:null,options:{}})}var options=this.tabularOptions;return Promise.resolve(this.tabular()).then(function(data){return{data:data,options:options}})};return DataAdapter}(_events.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(291);Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _types.RequestStatus}});var _request_adapter=__webpack_require__(968);Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request_adapter.RequestAdapter}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestAdapter=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _events=__webpack_require__(44);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _v=__webpack_require__(1023);var _v2=_interopRequireDefault(_v);var _request_responder=__webpack_require__(970);var _types=__webpack_require__(291);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var RequestAdapter=function(_super){tslib_1.__extends(RequestAdapter,_super);function RequestAdapter(){var _this=_super.call(this)||this;_this.requests=new Map;return _this}RequestAdapter.prototype.start=function(name,params){var _this=this;if(params===void 0){params={}}var req=tslib_1.__assign({},params,{name:name,startTime:Date.now(),status:_types.RequestStatus.PENDING,id:_lodash2.default.get(params,"id",(0,_v2.default)())});this.requests.set(req.id,req);this._onChange();return new _request_responder.RequestResponder(req,function(){return _this._onChange()})};RequestAdapter.prototype.reset=function(){this.requests=new Map;this._onChange()};RequestAdapter.prototype.resetRequest=function(id){this.requests.delete(id);this._onChange()};RequestAdapter.prototype.getRequests=function(){return Array.from(this.requests.values())};RequestAdapter.prototype._onChange=function(){this.emit("change")};return RequestAdapter}(_events.EventEmitter);exports.RequestAdapter=RequestAdapter},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestResponder=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _i18n=__webpack_require__(8);var _types=__webpack_require__(291);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var RequestResponder=function(){function RequestResponder(request,onChange){this.request=request;this.onChange=onChange}RequestResponder.prototype.json=function(reqJson){this.request.json=reqJson;this.onChange();return this};RequestResponder.prototype.stats=function(stats){this.request.stats=tslib_1.__assign({},this.request.stats||{},stats);var startDate=new Date(this.request.startTime);this.request.stats.requestTimestamp={label:_i18n.i18n.translate("common.ui.inspector.reqTimestampKey",{defaultMessage:"Request timestamp"}),value:startDate.toISOString(),description:_i18n.i18n.translate("common.ui.inspector.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"})};this.onChange();return this};RequestResponder.prototype.finish=function(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()};RequestResponder.prototype.ok=function(response){this.finish(_types.RequestStatus.OK,response)};RequestResponder.prototype.error=function(response){this.finish(_types.RequestStatus.ERROR,response)};return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _query_geohash_bounds=__webpack_require__(972);Object.defineProperty(exports,"queryGeohashBounds",{enumerable:true,get:function get(){return _query_geohash_bounds.queryGeohashBounds}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.queryGeohashBounds=queryGeohashBounds;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _i18n=__webpack_require__(8);var _lodash=__webpack_require__(0);var _notify=__webpack_require__(10);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function queryGeohashBounds(vis,params){return tslib_1.__awaiter(this,void 0,void 0,function(){var agg,searchSource,filters_1,query,esResp,error_1;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:agg=vis.getAggConfig().find(function(a){return(0,_lodash.get)(a,"type.dslName")==="geohash_grid"});if(!agg)return[3,4];searchSource=vis.searchSource.createChild();searchSource.setField("size",0);searchSource.setField("aggs",function(){var geoBoundsAgg=vis.getAggConfig().createAggConfig({type:"geo_bounds",enabled:true,params:{field:agg.getField()},schema:"metric"},{addToAggConfigs:false});return{1:geoBoundsAgg.toDsl()}});filters_1=params.filters,query=params.query;if(filters_1){searchSource.setField("filter",function(){var activeFilters=tslib_1.__spread(filters_1);var indexPattern=agg.getIndexPattern();var useTimeFilter=!!indexPattern.timeFieldName;if(useTimeFilter){activeFilters.push(vis.API.timeFilter.createFilter(indexPattern))}return activeFilters})}if(query){searchSource.setField("query",query)}_a.label=1;case 1:_a.trys.push([1,3,,4]);return[4,searchSource.fetch()];case 2:esResp=_a.sent();return[2,(0,_lodash.get)(esResp,"aggregations.1.bounds")];case 3:error_1=_a.sent();_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("common.ui.visualize.queryGeohashBounds.unableToGetBoundErrorTitle",{defaultMessage:"Unable to get bounds"}),text:""+error_1.message});return[2];case 4:return[2]}})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _vis=__webpack_require__(974);var _vis2=_interopRequireDefault(_vis);var _vis3=__webpack_require__(1e3);var _vis4=_interopRequireDefault(_vis3);var _vis5=__webpack_require__(1004);var _vis6=_interopRequireDefault(_vis5);var _vis7=__webpack_require__(1006);var _vis8=_interopRequireDefault(_vis7);var _vis9=__webpack_require__(1008);var _vis10=_interopRequireDefault(_vis9);var _vis11=__webpack_require__(1012);var _vis12=_interopRequireDefault(_vis11);var _error=__webpack_require__(440);var _error2=_interopRequireDefault(_error);var _no_data=__webpack_require__(1013);var _no_data2=_interopRequireDefault(_no_data);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_vis2.default,metric:_vis4.default,top_n:_vis6.default,table:_vis8.default,gauge:_vis10.default,markdown:_vis12.default};function Visualization(props){var visData=props.visData,model=props.model;var error=_lodash2.default.get(visData,model.id+".error");if(error){return _react2.default.createElement("div",{className:props.className},_react2.default.createElement(_error2.default,{error:error}))}var path=visData.type==="table"?"series":model.id+".series";var noData=_lodash2.default.get(visData,path,[]).length===0;if(noData){return _react2.default.createElement("div",{className:props.className},_react2.default.createElement(_no_data2.default,null))}var component=types[model.type];if(component){return _react2.default.createElement(component,{dateFormat:props.dateFormat,reversed:props.reversed,backgroundColor:props.backgroundColor,model:props.model,onBrush:props.onBrush,onChange:props.onChange,onUiState:props.onUiState,uiState:props.uiState,visData:visData.type===model.type?visData:{},getConfig:props.getConfig})}return _react2.default.createElement("div",{className:props.className})}Visualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string,getConfig:_propTypes2.default.func};Visualization.defaultProps={className:"tvbVis"};exports.default=Visualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _notify=__webpack_require__(10);var _markdown=__webpack_require__(220);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _timeseries=__webpack_require__(975);var _timeseries2=_interopRequireDefault(_timeseries);var _color=__webpack_require__(95);var _color2=_interopRequireDefault(_color);var _replace_vars=__webpack_require__(234);var _replace_vars2=_interopRequireDefault(_replace_vars);var _get_axis_label_string=__webpack_require__(998);var _create_xaxis_formatter=__webpack_require__(999);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function hasSeparateAxis(row){return row.separate_axis}var TimeseriesVisualization=function(_Component){_inherits(TimeseriesVisualization,_Component);function TimeseriesVisualization(props){_classCallCheck(this,TimeseriesVisualization);var _this=_possibleConstructorReturn(this,(TimeseriesVisualization.__proto__||Object.getPrototypeOf(TimeseriesVisualization)).call(this,props));_this.getInterval=function(){var _this$props=_this.props,visData=_this$props.visData,model=_this$props.model;var series=_lodash2.default.get(visData,model.id+".series",[]);return series.reduce(function(currentInterval,item){if(item.data.length>1){var seriesInterval=item.data[1][0]-item.data[0][0];if(!currentInterval||seriesInterval<currentInterval)return seriesInterval}return currentInterval},0)};_this.xaxisFormatter=function(val){var _this$props$visData=_this.props.visData,scaledDataFormat=_this$props$visData.scaledDataFormat,dateFormat=_this$props$visData.dateFormat;if(!scaledDataFormat||!dateFormat)return val;var formatter=(0,_create_xaxis_formatter.createXaxisFormatter)(_this.getInterval(),scaledDataFormat,dateFormat);return formatter(val)};return _this}_createClass(TimeseriesVisualization,[{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.showToastNotification&&this.notificationReason!==this.showToastNotification.reason){if(this.notification){_notify.toastNotifications.remove(this.notification)}this.notificationReason=this.showToastNotification.reason;this.notification=_notify.toastNotifications.addDanger({title:this.showToastNotification.title,text:_react2.default.createElement(_markdown.MarkdownSimple,null,this.showToastNotification.reason)})}if(!this.showToastNotification&&this.notification){_notify.toastNotifications.remove(this.notification);this.notificationReason=null;this.notification=null}}},{key:"render",value:function render(){var _this2=this;var _props=this.props,backgroundColor=_props.backgroundColor,model=_props.model,visData=_props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var annotations=void 0;this.showToastNotification=null;if(model.annotations&&Array.isArray(model.annotations)){annotations=model.annotations.map(function(annotation){var data=_lodash2.default.get(visData,model.id+".annotations."+annotation.id,[]).map(function(item){return[item.key,item.docs]});return{id:annotation.id,color:annotation.color,icon:annotation.icon,series:data.map(function(s){return[s[0],s[1].map(function(doc){var vars=(0,_replace_vars2.default)(annotation.template,null,doc);if(vars instanceof Error){_this2.showToastNotification=vars.error.caused_by;return annotation.template}return vars})]})}})}var seriesModel=model.series.map(function(s){return _lodash2.default.cloneDeep(s)});var firstSeries=seriesModel.find(function(s){return s.formatter&&!s.separate_axis});var formatter=(0,_tick_formatter2.default)(_lodash2.default.get(firstSeries,"formatter"),_lodash2.default.get(firstSeries,"value_template"),this.props.getConfig);var mainAxis={position:model.axis_position,tickFormatter:formatter,axisFormatter:_lodash2.default.get(firstSeries,"formatter","number"),axisFormatterTemplate:_lodash2.default.get(firstSeries,"value_template")};if(model.axis_min)mainAxis.min=model.axis_min;if(model.axis_max)mainAxis.max=model.axis_max;if(model.axis_scale==="log"){mainAxis.mode="log";mainAxis.transform=function(value){return value>0?Math.log(value)/Math.LN10:null};mainAxis.inverseTransform=function(value){return Math.pow(10,value)}}var yaxes=[mainAxis];seriesModel.forEach(function(s){series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(r){return r.tickFormatter=(0,_tick_formatter2.default)(s.formatter,s.value_template,_this2.props.getConfig)});if(s.hide_in_legend){series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(r){return delete r.label})}if(s.stacked!=="none"){series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)}).forEach(function(row){row.data=row.data.map(function(point){if(!point[1])return[point[0],0];return point})})}if(s.stacked==="percent"){s.separate_axis=true;s.axisFormatter="percent";s.axis_min=0;s.axis_max=1;s.axis_position=model.axis_position;var seriesData=series.filter(function(r){return _lodash2.default.startsWith(r.id,s.id)});var first=seriesData[0];if(first){first.data.forEach(function(row,index){var rowSum=seriesData.reduce(function(acc,item){return item.data[index][1]+acc},0);seriesData.forEach(function(item){item.data[index][1]=rowSum&&item.data[index][1]/rowSum||0})})}}});var interval=this.getInterval();var axisCount=1;if(seriesModel.some(hasSeparateAxis)){seriesModel.forEach(function(row){if(row.separate_axis){axisCount++;var _formatter=(0,_tick_formatter2.default)(row.formatter,row.value_template,_this2.props.getConfig);var yaxis={alignTicksWithAxis:1,position:row.axis_position,tickFormatter:_formatter,axisFormatter:row.axis_formatter,axisFormatterTemplate:row.value_template};if(row.axis_min!=null)yaxis.min=row.axis_min;if(row.axis_max!=null)yaxis.max=row.axis_max;yaxes.push(yaxis);series.filter(function(r){return _lodash2.default.startsWith(r.id,row.id)}).forEach(function(r){r.yaxis=axisCount})}})}var params={dateFormat:this.props.dateFormat,crosshair:true,tickFormatter:formatter,legendPosition:model.legend_position||"right",series:series,annotations:annotations,yaxes:yaxes,reversed:this.props.reversed,showGrid:Boolean(model.show_grid),legend:Boolean(model.show_legend),xAxisFormatter:this.xaxisFormatter,onBrush:function onBrush(ranges){if(_this2.props.onBrush)_this2.props.onBrush(ranges)}};if(interval){params.xaxisLabel=(0,_get_axis_label_string.getAxisLabelString)(interval)}var style={};var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor){style.backgroundColor=panelBackgroundColor;params.reversed=(0,_color2.default)(panelBackgroundColor||backgroundColor).luminosity()<.45}return _react2.default.createElement("div",{className:"tvbVis",style:style},_react2.default.createElement(_timeseries2.default,params))}}]);return TimeseriesVisualization}(_react.Component);TimeseriesVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string,getConfig:_propTypes2.default.func};exports.default=TimeseriesVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _timeseries_chart=__webpack_require__(976);var _timeseries_chart2=_interopRequireDefault(_timeseries_chart);var _legend=__webpack_require__(995);var _legend2=_interopRequireDefault(_legend);var _events=__webpack_require__(434);var _events2=_interopRequireDefault(_events);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Timeseries=function(_Component){_inherits(Timeseries,_Component);function Timeseries(props){_classCallCheck(this,Timeseries);var _this=_possibleConstructorReturn(this,(Timeseries.__proto__||Object.getPrototypeOf(Timeseries)).call(this,props));var values=_this.getLastValues(props);_this.state={showLegend:props.legend!=null?props.legend:true,values:values||{},show:_lodash2.default.keys(values)||[],ignoreLegendUpdates:false,ignoreVisibilityUpdates:false};_this.toggleFilter=_this.toggleFilter.bind(_this);_this.handleHideClick=_this.handleHideClick.bind(_this);_this.plothover=_this.plothover.bind(_this);return _this}_createClass(Timeseries,[{key:"filterLegend",value:function filterLegend(id){if(!_lodash2.default.has(this.state.values,id))return[];var notAllShown=_lodash2.default.keys(this.state.values).length!==this.state.show.length;var isCurrentlyShown=_lodash2.default.includes(this.state.show,id);var show=[];if(notAllShown&&isCurrentlyShown){this.setState({ignoreVisibilityUpdates:false,show:Object.keys(this.state.values)})}else{show.push(id);this.setState({ignoreVisibilityUpdates:true,show:[id]})}return show}},{key:"toggleFilter",value:function toggleFilter(event,id){var show=this.filterLegend(id);if(_lodash2.default.isFunction(this.props.onFilter)){this.props.onFilter(show)}_events2.default.trigger("toggleFilter",id,this)}},{key:"getLastValues",value:function getLastValues(props){var values={};props.series.forEach(function(row){if(!row.id)row.id=row.label;values[row.id]=(0,_get_last_value2.default)(row.data)});return values}},{key:"updateLegend",value:function updateLegend(pos,item){var values={};if(pos){this.props.series.forEach(function(row){if(row.data&&Array.isArray(row.data)){if(item&&row.data[item.dataIndex]&&row.data[item.dataIndex][0]===item.datapoint[0]){values[row.id]=row.data[item.dataIndex][1]}else{var closest=void 0;for(var i=0;i<row.data.length;i++){closest=i;if(row.data[i]&&pos.x<row.data[i][0])break}if(!row.data[closest])return values[row.id]=null;var _row$data$closest=_slicedToArray(row.data[closest],2),value=_row$data$closest[1];values[row.id]=value!=null&&value||null}}})}else{_lodash2.default.assign(values,this.getLastValues(this.props))}this.setState({values:values})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(props){if(props.legend!==this.props.legend)this.setState({showLegend:props.legend});if(!this.state.ignoreLegendUpdates){var values=this.getLastValues(props);var currentKeys=_lodash2.default.keys(this.state.values);var keys=_lodash2.default.keys(values);var diff=_lodash2.default.difference(keys,currentKeys);var nextState={values:values};if(diff.length&&!this.state.ignoreVisibilityUpdates){nextState.show=keys}this.setState(nextState)}}},{key:"plothover",value:function plothover(event,pos,item){this.updateLegend(pos,item)}},{key:"handleHideClick",value:function handleHideClick(){this.setState({showLegend:!this.state.showLegend})}},{key:"render",value:function render(){var className="tvbVisTimeSeries";if(this.props.reversed){className+=" tvbVisTimeSeries--reversed"}var styles=(0,_reactcss2.default)({bottomLegend:{content:{flexDirection:"column"}}},{bottomLegend:this.props.legendPosition==="bottom"});return _react2.default.createElement("div",{className:className,"data-test-subj":"timeseriesChart"},_react2.default.createElement("div",{style:styles.content,className:"tvbVisTimeSeries__content"},_react2.default.createElement("div",{className:"tvbVisTimeSeries__visualization"},_react2.default.createElement(_timeseries_chart2.default,{dateFormat:this.props.dateFormat,crosshair:this.props.crosshair,onBrush:this.props.onBrush,plothover:this.plothover,reversed:this.props.reversed,series:this.props.series,annotations:this.props.annotations,show:this.state.show,showGrid:this.props.showGrid,tickFormatter:this.props.tickFormatter,options:this.props.options,xaxisLabel:this.props.xaxisLabel,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter})),_react2.default.createElement(_legend2.default,{legendPosition:this.props.legendPosition,onClick:this.handleHideClick,onToggle:this.toggleFilter,series:this.props.series,showLegend:this.state.showLegend,seriesValues:this.state.values,seriesFilter:this.state.show,tickFormatter:this.props.tickFormatter})))}}]);return Timeseries}(_react.Component);Timeseries.defaultProps={legend:true,showGrid:true};Timeseries.propTypes={legend:_propTypes2.default.bool,legendPosition:_propTypes2.default.string,onFilter:_propTypes2.default.func,series:_propTypes2.default.array,annotations:_propTypes2.default.array,reversed:_propTypes2.default.bool,options:_propTypes2.default.object,tickFormatter:_propTypes2.default.func,showGrid:_propTypes2.default.bool,xaxisLabel:_propTypes2.default.string,dateFormat:_propTypes2.default.string};exports.default=Timeseries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.scaleUp=scaleUp;exports.scaleDown=scaleDown;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _flot_chart=__webpack_require__(977);var _flot_chart2=_interopRequireDefault(_flot_chart);var _annotation=__webpack_require__(994);var _annotation2=_interopRequireDefault(_annotation);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function scaleUp(value){return window.devicePixelRatio*value}function scaleDown(value){return value/window.devicePixelRatio}var TimeseriesChart=function(_Component){_inherits(TimeseriesChart,_Component);function TimeseriesChart(props){_classCallCheck(this,TimeseriesChart);var _this=_possibleConstructorReturn(this,(TimeseriesChart.__proto__||Object.getPrototypeOf(TimeseriesChart)).call(this,props));_this.state={annotations:[],showTooltip:false,mouseHoverTimer:false};_this.handleMouseLeave=_this.handleMouseLeave.bind(_this);_this.handleMouseOver=_this.handleMouseOver.bind(_this);_this.renderAnnotations=_this.renderAnnotations.bind(_this);_this.handleDraw=_this.handleDraw.bind(_this);return _this}_createClass(TimeseriesChart,[{key:"calculateLeftRight",value:function calculateLeftRight(item,plot){var canvas=plot.getCanvas();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var edge=(scaleUp(point.left)+10)/canvas.width;var right=void 0;var left=void 0;if(edge>.5){right=scaleDown(canvas.width)-point.left;left=null}else{right=null;left=point.left}return[left,right]}},{key:"handleDraw",value:function handleDraw(plot){if(!plot||!this.props.annotations)return;var annotations=this.props.annotations.reduce(function(acc,anno){return acc.concat(anno.series.map(function(series){return{series:series,plot:plot,key:anno.id+"-"+series[0],icon:anno.icon,color:anno.color}}))},[]);this.setState({annotations:annotations})}},{key:"handleMouseOver",value:function handleMouseOver(e,pos,item,plot){if(typeof this.state.mouseHoverTimer==="number"){window.clearTimeout(this.state.mouseHoverTimer)}if(item){var plotOffset=plot.getPlotOffset();var point=plot.pointOffset({x:item.datapoint[0],y:item.datapoint[1]});var _calculateLeftRight=this.calculateLeftRight(item,plot),_calculateLeftRight2=_slicedToArray(_calculateLeftRight,2),left=_calculateLeftRight2[0],right=_calculateLeftRight2[1];var top=point.top;this.setState({showTooltip:true,item:item,left:left,right:right,top:top+10,bottom:plotOffset.bottom})}}},{key:"handleMouseLeave",value:function handleMouseLeave(){var _this2=this;this.state.mouseHoverTimer=window.setTimeout(function(){_this2.setState({showTooltip:false})},250)}},{key:"renderAnnotations",value:function renderAnnotations(annotation){return _react2.default.createElement(_annotation2.default,{series:annotation.series,plot:annotation.plot,key:annotation.key,icon:annotation.icon,reversed:this.props.reversed,color:annotation.color})}},{key:"render",value:function render(){var _this3=this;var _state=this.state,item=_state.item,right=_state.right,top=_state.top,left=_state.left;var series=this.props.series;var tooltip=void 0;var styles=(0,_reactcss2.default)({showTooltip:{tooltipContainer:{top:top-8,left:left,right:right}},hideTooltip:{tooltipContainer:{display:"none"}}},{showTooltip:this.state.showTooltip,hideTooltip:!this.state.showTooltip});if(item){var metric=series.find(function(r){return r.id===item.series.id});var formatter=metric&&metric.tickFormatter||this.props.tickFormatter||function(v){return v};var value=item.datapoint[2]?item.datapoint[1]-item.datapoint[2]:item.datapoint[1];tooltip=_react2.default.createElement("div",{className:"tvbTooltip__container tvbTooltip__container--"+(right?"right":"left"),style:styles.tooltipContainer},_react2.default.createElement("span",{className:"tvbTooltip__caret"}),_react2.default.createElement("div",{className:"tvbTooltip"},_react2.default.createElement("div",{className:"tvbTooltip__item"},_react2.default.createElement(_eui.EuiIcon,{className:"tvbTooltip__icon",type:"dot",color:item.series.color}),_react2.default.createElement("div",{className:"tvbTooltip__label"},item.series.label),_react2.default.createElement("div",{className:"tvbTooltip__value"},formatter(value))),_react2.default.createElement("div",{className:"tvbTooltip__timestamp"},(0,_moment2.default)(item.datapoint[0]).format(this.props.dateFormat))))}var params={crosshair:this.props.crosshair,onPlotCreate:this.handlePlotCreate,onBrush:this.props.onBrush,onMouseLeave:this.handleMouseLeave,onMouseOver:this.handleMouseOver,onDraw:this.handleDraw,options:this.props.options,plothover:this.props.plothover,reversed:this.props.reversed,series:this.props.series,annotations:this.props.annotations,showGrid:this.props.showGrid,show:this.props.show,tickFormatter:this.props.tickFormatter,yaxes:this.props.yaxes,xAxisFormatter:this.props.xAxisFormatter};var annotations=this.state.annotations.map(this.renderAnnotations);var axisLabelClass="tvbVisTimeSeries__axisLabel";if(this.props.reversed){axisLabelClass+=" tvbVisTimeSeries__axisLabel--reversed"}return _react2.default.createElement("div",{ref:function ref(el){return _this3.container=el},className:"tvbVisTimeSeries__container"},tooltip,annotations,_react2.default.createElement(_flot_chart2.default,params),_react2.default.createElement("div",{className:axisLabelClass},this.props.xaxisLabel))}}]);return TimeseriesChart}(_react.Component);TimeseriesChart.defaultProps={showGrid:true,dateFormat:"ll LTS"};TimeseriesChart.propTypes={crosshair:_propTypes2.default.bool,onBrush:_propTypes2.default.func,options:_propTypes2.default.object,plothover:_propTypes2.default.func,reversed:_propTypes2.default.bool,series:_propTypes2.default.array,annotations:_propTypes2.default.array,show:_propTypes2.default.array,tickFormatter:_propTypes2.default.func,yaxes:_propTypes2.default.array,showGrid:_propTypes2.default.bool,xaxisLabel:_propTypes2.default.string,dateFormat:_propTypes2.default.string};exports.default=TimeseriesChart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _reactDom=__webpack_require__(26);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _flotCharts=__webpack_require__(978);var _flotCharts2=_interopRequireDefault(_flotCharts);var _events=__webpack_require__(434);var _events2=_interopRequireDefault(_events);var _resize=__webpack_require__(990);var _resize2=_interopRequireDefault(_resize);var _calculate_bar_width=__webpack_require__(991);var _calculate_bar_width2=_interopRequireDefault(_calculate_bar_width);var _calculate_fill_color=__webpack_require__(992);var _calculate_fill_color2=_interopRequireDefault(_calculate_fill_color);var _colors=__webpack_require__(993);var _colors2=_interopRequireDefault(_colors);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FlotChart=function(_Component){_inherits(FlotChart,_Component);function FlotChart(props){_classCallCheck(this,FlotChart);var _this=_possibleConstructorReturn(this,(FlotChart.__proto__||Object.getPrototypeOf(FlotChart)).call(this,props));_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(FlotChart,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(props){var _this2=this;if(!this.plot)return true;if(props.reversed!==this.props.reversed){return true}if(props.showGrid!==this.props.showGrid)return true;if(props.yaxes&&this.props.yaxes){var valuesChanged=props.yaxes.some(function(axis,i){if(_this2.props.yaxes[i]){return axis.position!==_this2.props.yaxes[i].position||axis.max!==_this2.props.yaxes[i].max||axis.min!==_this2.props.yaxes[i].min||axis.axisFormatter!==_this2.props.yaxes[i].axisFormatter||axis.mode!==_this2.props.yaxes[i].mode||axis.axisFormatterTemplate!==_this2.props.yaxes[i].axisFormatterTemplate}});if(props.yaxes.length!==this.props.yaxes.length||valuesChanged){return true}}return false}},{key:"shutdownChart",value:function shutdownChart(){if(!this.plot)return;(0,_flotCharts2.default)(this.target).off("plothover",this.props.plothover);if(this.props.onMouseOver)(0,_flotCharts2.default)(this.target).off("plothover",this.handleMouseOver);if(this.props.onMouseLeave)(0,_flotCharts2.default)(this.target).off("mouseleave",this.handleMouseLeave);if(this.props.onBrush)(0,_flotCharts2.default)(this.target).off("plotselected",this.brushChart);this.plot.shutdown();if(this.props.crosshair){(0,_flotCharts2.default)(this.target).off("plothover",this.handlePlotover);_events2.default.off("thorPlotover",this.handleThorPlotover);_events2.default.off("thorPlotleave",this.handleThorPlotleave)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.shutdownChart()}},{key:"filterByShow",value:function filterByShow(show){if(show){return function(metric){return show.some(function(id){return _lodash2.default.startsWith(id,metric.id)})}}return function(){return true}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(this.plot){var series=newProps.series;var options=this.plot.getOptions();_lodash2.default.set(options,"series.bars.barWidth",(0,_calculate_bar_width2.default)(series));_lodash2.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.setData(this.calculateData(series,newProps.show));this.plot.setupGrid();this.plot.draw();if(!_lodash2.default.isEqual(this.props.series,newProps.series))this.handleDraw(this.plot)}else{this.renderChart()}}},{key:"componentDidMount",value:function componentDidMount(){this.renderChart()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.shutdownChart();this.renderChart()}},{key:"calculateData",value:function calculateData(data,show){var _this3=this;return(0,_lodash2.default)(data).filter(this.filterByShow(show)).map(function(set){if(_lodash2.default.isPlainObject(set)){return _extends({},set,{lines:_this3.computeColor(set.lines,set.color),bars:_this3.computeColor(set.bars,set.color)})}return{color:"#990000",data:set}}).reverse().value()}},{key:"computeColor",value:function computeColor(style,color){if(style&&style.show){var _calculateFillColor=(0,_calculate_fill_color2.default)(color,style.fill),fill=_calculateFillColor.fill,fillColor=_calculateFillColor.fillColor;return _extends({},style,{fill:fill,fillColor:fillColor})}return style}},{key:"handleDraw",value:function handleDraw(plot){if(this.props.onDraw)this.props.onDraw(plot)}},{key:"getOptions",value:function getOptions(props){var yaxes=props.yaxes||[{}];var lineColor=props.reversed?_colors2.default.lineColorReversed:_colors2.default.lineColor;var textColor=props.reversed?_colors2.default.textColorReversed:_colors2.default.textColor;var borderWidth={bottom:1,top:0,left:0,right:0};if(yaxes.some(function(y){return y.position==="left"}))borderWidth.left=1;if(yaxes.some(function(y){return y.position==="right"}))borderWidth.right=1;if(props.showGrid){borderWidth.top=1;borderWidth.left=1;borderWidth.right=1}var opts={legend:{show:false},yaxes:yaxes.map(function(axis){axis.tickLength=props.showGrid?null:0;return axis}),yaxis:{color:lineColor,font:{color:textColor},tickFormatter:props.tickFormatter},xaxis:{tickLength:props.showGrid?null:0,color:lineColor,timezone:"browser",mode:"time",font:{color:textColor},ticks:this.calculateTicks()},series:{shadowSize:0},grid:{margin:0,borderWidth:borderWidth,borderColor:lineColor,hoverable:true,mouseActiveRadius:200}};if(props.crosshair){_lodash2.default.set(opts,"crosshair",{mode:"x",color:props.reversed?"#FFF":"#000",lineWidth:1})}if(props.onBrush){_lodash2.default.set(opts,"selection",{mode:"x",color:textColor})}if(props.xAxisFormatter){_lodash2.default.set(opts,"xaxis.tickFormatter",props.xAxisFormatter)}_lodash2.default.set(opts,"series.bars.barWidth",(0,_calculate_bar_width2.default)(props.series));return _lodash2.default.assign(opts,props.options)}},{key:"calculateTicks",value:function calculateTicks(){var sample=this.props.xAxisFormatter(new Date);var tickLetterWidth=7;var tickPadding=45;var ticks=Math.floor(this.target.clientWidth/(sample.length*tickLetterWidth+tickPadding));return ticks}},{key:"handleResize",value:function handleResize(){var resize=(0,_reactDom.findDOMNode)(this.resize);if(!this.rendered){this.renderChart();return}if(resize&&resize.clientHeight>0&&resize.clientHeight>0){if(!this.plot)return;var options=this.plot.getOptions();_lodash2.default.set(options,"xaxes[0].ticks",this.calculateTicks());this.plot.resize();this.plot.setupGrid();this.plot.draw();this.handleDraw(this.plot)}}},{key:"renderChart",value:function renderChart(){var _this4=this;var resize=(0,_reactDom.findDOMNode)(this.resize);if(resize.clientWidth>0&&resize.clientHeight>0){this.rendered=true;var series=this.props.series;var data=this.calculateData(series,this.props.show);this.plot=_flotCharts2.default.plot(this.target,data,this.getOptions(this.props));this.handleDraw(this.plot);_lodash2.default.defer(function(){return _this4.handleResize()});this.handleMouseOver=function(){var _props;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(_this4.props.onMouseOver)(_props=_this4.props).onMouseOver.apply(_props,args.concat([_this4.plot]))};this.handleMouseLeave=function(){var _props2;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}if(_this4.props.onMouseLeave)(_props2=_this4.props).onMouseLeave.apply(_props2,args.concat([_this4.plot]))};(0,_flotCharts2.default)(this.target).on("plothover",this.handleMouseOver);(0,_flotCharts2.default)(this.target).on("mouseleave",this.handleMouseLeave);if(this.props.crosshair){this.handleThorPlotover=function(e,pos,item,originalPlot){if(_this4.plot!==originalPlot){_this4.plot.setCrosshair({x:_lodash2.default.get(pos,"x")});_this4.props.plothover(e,pos,item)}};this.handlePlotover=function(e,pos,item){return _events2.default.trigger("thorPlotover",[pos,item,_this4.plot])};this.handlePlotleave=function(){return _events2.default.trigger("thorPlotleave")};this.handleThorPlotleave=function(e){if(_this4.plot)_this4.plot.clearCrosshair();if(_this4.props.plothover)_this4.props.plothover(e)};(0,_flotCharts2.default)(this.target).on("plothover",this.handlePlotover);(0,_flotCharts2.default)(this.target).on("mouseleave",this.handlePlotleave);_events2.default.on("thorPlotover",this.handleThorPlotover);_events2.default.on("thorPlotleave",this.handleThorPlotleave)}if(_lodash2.default.isFunction(this.props.plothover)){(0,_flotCharts2.default)(this.target).bind("plothover",this.props.plothover)}(0,_flotCharts2.default)(this.target).on("mouseleave",function(){_events2.default.trigger("thorPlotleave")});if(_lodash2.default.isFunction(this.props.onBrush)){this.brushChart=function(e,ranges){_this4.props.onBrush(ranges);_this4.plot.clearSelection()};(0,_flotCharts2.default)(this.target).on("plotselected",this.brushChart)}}}},{key:"render",value:function render(){var _this5=this;return _react2.default.createElement(_resize2.default,{onResize:this.handleResize,ref:function ref(el){return _this5.resize=el},className:"tvbVisTimeSeries__container"},_react2.default.createElement("div",{ref:function ref(el){return _this5.target=el},className:"tvbVisTimeSeries__container"}))}}]);return FlotChart}(_react.Component);FlotChart.defaultProps={showGrid:true};FlotChart.propTypes={crosshair:_propTypes2.default.bool,onBrush:_propTypes2.default.func,onPlotCreate:_propTypes2.default.func,onMouseOver:_propTypes2.default.func,onMouseLeave:_propTypes2.default.func,options:_propTypes2.default.object,plothover:_propTypes2.default.func,reversed:_propTypes2.default.bool,series:_propTypes2.default.array,show:_propTypes2.default.array,tickFormatter:_propTypes2.default.func,showGrid:_propTypes2.default.bool,yaxes:_propTypes2.default.array};exports.default=FlotChart;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(window)window.jQuery=_jquery2.default;__webpack_require__(979);__webpack_require__(980);__webpack_require__(981);__webpack_require__(982);__webpack_require__(983);__webpack_require__(984);__webpack_require__(985);__webpack_require__(986);__webpack_require__(987);__webpack_require__(988);__webpack_require__(989);module.exports=_jquery2.default},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i){o[c.charAt(i)]+=d}return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i){o[c.charAt(i)]*=f}return o.normalize()};o.toString=function(){if(o.a>=1){return"rgb("+[o.r,o.g,o.b].join(",")+")"}else{return"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=""&&c!="transparent")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));if(c=="rgba(0, 0, 0, 0)")c="transparent";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name=="transparent")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function($){var hasOwnProperty=Object.prototype.hasOwnProperty;if(!$.fn.detach){$.fn.detach=function(){return this.each(function(){if(this.parentNode){this.parentNode.removeChild(this)}})}}function Canvas(cls,container){var element=container.children("."+cls)[0];if(element==null){element=document.createElement("canvas");element.className=cls;$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container);if(!element.getContext){if(window.G_vmlCanvasManager){element=window.G_vmlCanvasManager.initElement(element)}else{throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.")}}}this.element=element;var context=this.context=element.getContext("2d");var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio;this.resize(container.width(),container.height());this.textContainer=null;this.text={};this._textCache={}}Canvas.prototype.resize=function(width,height){if(width<=0||height<=0){throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height)}var element=this.element,context=this.context,pixelRatio=this.pixelRatio;if(this.width!=width){element.width=width*pixelRatio;element.style.width=width+"px";this.width=width}if(this.height!=height){element.height=height*pixelRatio;element.style.height=height+"px";this.height=height}context.restore();context.save();context.scale(pixelRatio,pixelRatio)};Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];layer.hide();for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){if(position.active){if(!position.rendered){layer.append(position.element);position.rendered=true}}else{positions.splice(i--,1);if(position.rendered){position.element.detach()}}}if(positions.length==0){delete styleCache[key]}}}}}layer.show()}}};Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];if(layer==null){if(this.textContainer==null){this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)}layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return layer};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;text=""+text;if((typeof font==="undefined"?"undefined":_typeof(font))==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));if((typeof font==="undefined"?"undefined":_typeof(font))==="object"){element.css({font:textStyle,color:font.color})}else if(typeof font==="string"){element.addClass(font)}info=styleCache[text]={width:element.outerWidth(true),height:element.outerHeight(true),element:element,positions:[]};element.detach()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;if(halign=="center"){x-=info.width/2}else if(halign=="right"){x-=info.width}if(valign=="middle"){y-=info.height/2}else if(valign=="bottom"){y-=info.height}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,rendered:false,element:positions.length?info.element.clone():info.element,x:x,y:y};positions.push(position);position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})};Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(text==null){var layerCache=this._textCache[layer];if(layerCache!=null){for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var positions=styleCache[key].positions;for(var i=0,position;position=positions[i];i++){position.active=false}}}}}}}else{var positions=this.getTextInfo(layer,text,font,angle).positions;for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=false}}}};function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false,zero:true},shadowSize:3,highlightColor:null},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;plot.setData=setData;plot.setupGrid=setupGrid;plot.draw=draw;plot.getPlaceholder=function(){return placeholder};plot.getCanvas=function(){return surface.element};plot.getPlotOffset=function(){return plotOffset};plot.width=function(){return plotWidth};plot.height=function(){return plotHeight};plot.offset=function(){var o=eventHolder.offset();o.left+=plotOffset.left;o.top+=plotOffset.top;return o};plot.getData=function(){return series};plot.getAxes=function(){var res={},i;$.each(xaxes.concat(yaxes),function(_,axis){if(axis)res[axis.direction+(axis.n!=1?axis.n:"")+"axis"]=axis});return res};plot.getXAxes=function(){return xaxes};plot.getYAxes=function(){return yaxes};plot.c2p=canvasToAxisCoords;plot.p2c=axisToCanvasCoords;plot.getOptions=function(){return options};plot.highlight=highlight;plot.unhighlight=unhighlight;plot.triggerRedrawOverlay=triggerRedrawOverlay;plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}};plot.shutdown=shutdown;plot.destroy=function(){shutdown();placeholder.removeData("plot").empty();series=[];options=null;surface=null;overlay=null;eventHolder=null;ctx=null;octx=null;xaxes=[];yaxes=[];hooks=null;highlights=[];plot=null};plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height);overlay.resize(width,height)};plot.hooks=hooks;initPlugins(plot);parseOptions(options_);setupCanvases();setData(data_);setupGrid();draw();bindEvents();function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i){hook[i].apply(this,args)}}function initPlugins(){var classes={Canvas:Canvas};for(var i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes);if(p.options)$.extend(true,options,p.options)}}function parseOptions(opts){$.extend(true,options,opts);if(opts&&opts.colors){options.colors=opts.colors}if(options.xaxis.color==null)options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.yaxis.color==null)options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString();if(options.xaxis.tickColor==null)options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color;if(options.yaxis.tickColor==null)options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color;if(options.grid.borderColor==null)options.grid.borderColor=options.grid.color;if(options.grid.tickColor==null)options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString();var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};axisCount=options.xaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.xaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.xaxis,axisOptions);options.xaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}axisCount=options.yaxes.length||1;for(i=0;i<axisCount;++i){axisOptions=options.yaxes[i];if(axisOptions&&!axisOptions.tickColor){axisOptions.tickColor=axisOptions.color}axisOptions=$.extend(true,{},options.yaxis,axisOptions);options.yaxes[i]=axisOptions;if(axisOptions.font){axisOptions.font=$.extend({},fontDefaults,axisOptions.font);if(!axisOptions.font.color){axisOptions.font.color=axisOptions.color}if(!axisOptions.font.lineHeight){axisOptions.font.lineHeight=Math.round(axisOptions.font.size*1.15)}}}if(options.xaxis.noTicks&&options.xaxis.ticks==null)options.xaxis.ticks=options.xaxis.noTicks;if(options.yaxis.noTicks&&options.yaxis.ticks==null)options.yaxis.ticks=options.yaxis.noTicks;if(options.x2axis){options.xaxes[1]=$.extend(true,{},options.xaxis,options.x2axis);options.xaxes[1].position="top";if(options.x2axis.min==null){options.xaxes[1].min=null}if(options.x2axis.max==null){options.xaxes[1].max=null}}if(options.y2axis){options.yaxes[1]=$.extend(true,{},options.yaxis,options.y2axis);options.yaxes[1].position="right";if(options.y2axis.min==null){options.yaxes[1].min=null}if(options.y2axis.max==null){options.yaxes[1].max=null}}if(options.grid.coloredAreas)options.grid.markings=options.grid.coloredAreas;if(options.grid.coloredAreasColor)options.grid.markingsColor=options.grid.coloredAreasColor;if(options.lines)$.extend(true,options.series.lines,options.lines);if(options.points)$.extend(true,options.series.points,options.points);if(options.bars)$.extend(true,options.series.bars,options.bars);if(options.shadowSize!=null)options.series.shadowSize=options.shadowSize;if(options.highlightColor!=null)options.series.highlightColor=options.highlightColor;for(i=0;i<options.xaxes.length;++i){getOrCreateAxis(xaxes,i+1).options=options.xaxes[i]}for(i=0;i<options.yaxes.length;++i){getOrCreateAxis(yaxes,i+1).options=options.yaxes[i]}for(var n in hooks){if(options.hooks[n]&&options.hooks[n].length)hooks[n]=hooks[n].concat(options.hooks[n])}executeHooks(hooks.processOptions,[options])}function setData(d){series=parseData(d);fillInSeriesOptions();processData()}function parseData(d){var res=[];for(var i=0;i<d.length;++i){var s=$.extend(true,{},options.series);if(d[i].data!=null){s.data=d[i].data;delete d[i].data;$.extend(true,s,d[i]);d[i].data=s.data}else s.data=d[i];res.push(s)}return res}function axisNumber(obj,coord){var a=obj[coord+"axis"];if((typeof a==="undefined"?"undefined":_typeof(a))=="object")a=a.n;if(typeof a!="number")a=1;return a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var res={},i,axis;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used)res["x"+axis.n]=axis.c2p(pos.left)}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used)res["y"+axis.n]=axis.c2p(pos.top)}if(res.x1!==undefined)res.x=res.x1;if(res.y1!==undefined)res.y=res.y1;return res}function axisToCanvasCoords(pos){var res={},i,axis,key;for(i=0;i<xaxes.length;++i){axis=xaxes[i];if(axis&&axis.used){key="x"+axis.n;if(pos[key]==null&&axis.n==1)key="x";if(pos[key]!=null){res.left=axis.p2c(pos[key]);break}}}for(i=0;i<yaxes.length;++i){axis=yaxes[i];if(axis&&axis.used){key="y"+axis.n;if(pos[key]==null&&axis.n==1)key="y";if(pos[key]!=null){res.top=axis.p2c(pos[key]);break}}}return res}function getOrCreateAxis(axes,number){if(!axes[number-1])axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(true,{},axes==xaxes?options.xaxis:options.yaxis)};return axes[number-1]}function fillInSeriesOptions(){var neededColors=series.length,maxIndex=-1,i;for(i=0;i<series.length;++i){var sc=series[i].color;if(sc!=null){neededColors--;if(typeof sc=="number"&&sc>maxIndex){maxIndex=sc}}}if(neededColors<=maxIndex){neededColors=maxIndex+1}var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");if(i%colorPoolSize==0&&i){if(variation>=0){if(variation<.5){variation=-variation-.2}else variation=0}else variation=-variation}colors[i]=c.scale("rgb",1+variation)}var colori=0,s;for(i=0;i<series.length;++i){s=series[i];if(s.color==null){s.color=colors[colori].toString();++colori}else if(typeof s.color=="number")s.color=colors[s.color].toString();if(s.lines.show==null){var v,show=true;for(v in s){if(s[v]&&s[v].show){show=false;break}}if(show)s.lines.show=true}if(s.lines.zero==null){s.lines.zero=!!s.lines.fill}s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x"));s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}function processData(){var topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE,i,j,k,m,length,s,points,ps,x,y,axis,val,f,p,data,format;function updateAxis(axis,min,max){if(min<axis.datamin&&min!=-fakeInfinity)axis.datamin=min;if(max>axis.datamax&&max!=fakeInfinity)axis.datamax=max}$.each(allAxes(),function(_,axis){axis.datamin=topSentry;axis.datamax=bottomSentry;axis.used=false});for(i=0;i<series.length;++i){s=series[i];s.datapoints={points:[]};executeHooks(hooks.processRawData,[s,s.data,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];data=s.data;format=s.datapoints.format;if(!format){format=[];format.push({x:true,number:true,required:true});format.push({y:true,number:true,required:true});if(s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:true,number:true,required:false,defaultValue:0,autoscale:autoscale});if(s.bars.horizontal){delete format[format.length-1].y;format[format.length-1].x=true}}s.datapoints.format=format}if(s.datapoints.pointsize!=null)continue;s.datapoints.pointsize=format.length;ps=s.datapoints.pointsize;points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=true;for(j=k=0;j<data.length;++j,k+=ps){p=data[j];var nullify=p==null;if(!nullify){for(m=0;m<ps;++m){val=p[m];f=format[m];if(f){if(f.number&&val!=null){val=+val;if(isNaN(val))val=null;else if(val==Infinity)val=fakeInfinity;else if(val==-Infinity)val=-fakeInfinity}if(val==null){if(f.required)nullify=true;if(f.defaultValue!=null)val=f.defaultValue}}points[k+m]=val}}if(nullify){for(m=0;m<ps;++m){val=points[k+m];if(val!=null){f=format[m];if(f.autoscale!==false){if(f.x){updateAxis(s.xaxis,val,val)}if(f.y){updateAxis(s.yaxis,val,val)}}}points[k+m]=null}}else{if(insertSteps&&k>0&&points[k-ps]!=null&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m){points[k+ps+m]=points[k+m]}points[k+1]=points[k-ps+1];k+=ps}}}}for(i=0;i<series.length;++i){s=series[i];executeHooks(hooks.processDatapoints,[s,s.datapoints])}for(i=0;i<series.length;++i){s=series[i];points=s.datapoints.points;ps=s.datapoints.pointsize;format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps){if(points[j]==null)continue;for(m=0;m<ps;++m){val=points[j+m];f=format[m];if(!f||f.autoscale===false||val==fakeInfinity||val==-fakeInfinity)continue;if(f.x){if(val<xmin)xmin=val;if(val>xmax)xmax=val}if(f.y){if(val<ymin)ymin=val;if(val>ymax)ymax=val}}}if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}if(s.bars.horizontal){ymin+=delta;ymax+=delta+s.bars.barWidth}else{xmin+=delta;xmax+=delta+s.bars.barWidth}}updateAxis(s.xaxis,xmin,xmax);updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){if(axis.datamin==topSentry)axis.datamin=null;if(axis.datamax==bottomSentry)axis.datamax=null})}function setupCanvases(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove();if(placeholder.css("position")=="static")placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder);overlay=new Canvas("flot-overlay",placeholder);ctx=surface.context;octx=overlay.context;eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");if(existing){existing.shutdown();overlay.clear()}placeholder.data("plot",plot)}function bindEvents(){if(options.grid.hoverable){eventHolder.mousemove(onMouseMove);eventHolder.bind("mouseleave",onMouseLeave)}if(options.grid.clickable)eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}function shutdown(){if(redrawTimeout)clearTimeout(redrawTimeout);eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mouseleave",onMouseLeave);eventHolder.unbind("click",onClick);executeHooks(hooks.shutdown,[eventHolder])}function setTransformationHelpers(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;if(axis.direction=="x"){s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min));m=Math.min(t(axis.max),t(axis.min))}else{s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min));s=-s;m=Math.max(t(axis.max),t(axis.min))}if(t==identity)axis.p2c=function(p){return(p-m)*s};else axis.p2c=function(p){return(t(p)-m)*s};if(!it)axis.c2p=function(c){return m+c/s};else axis.c2p=function(c){return it(m+c/s)}}function measureTickLabels(axis){var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||(axis.direction=="x"?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel";for(var i=0;i<ticks.length;++i){var t=ticks[i];if(!t.label)continue;var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width);labelHeight=Math.max(labelHeight,info.height)}axis.labelWidth=opts.labelWidth||labelWidth;axis.labelHeight=opts.labelHeight||labelHeight}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis=axis.direction==="x",tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=true,outermost=true,first=true,found=false;$.each(isXAxis?xaxes:yaxes,function(i,a){if(a&&(a.show||a.reserveSpace)){if(a===axis){found=true}else if(a.options.position===pos){if(found){outermost=false}else{innermost=false}}if(!found){first=false}}});if(outermost){axisMargin=0}if(tickLength==null){tickLength=first?"full":5}if(!isNaN(+tickLength))padding+=+tickLength;if(isXAxis){lh+=padding;if(pos=="bottom"){plotOffset.bottom+=lh+axisMargin;axis.box={top:surface.height-plotOffset.bottom,height:lh}}else{axis.box={top:plotOffset.top+axisMargin,height:lh};plotOffset.top+=lh+axisMargin}}else{lw+=padding;if(pos=="left"){axis.box={left:plotOffset.left+axisMargin,width:lw};plotOffset.left+=lw+axisMargin}else{plotOffset.right+=lw+axisMargin;axis.box={left:surface.width-plotOffset.right,width:lw}}}axis.position=pos;axis.tickLength=tickLength;axis.box.padding=padding;axis.innermost=innermost}function allocateAxisBoxSecondPhase(axis){if(axis.direction=="x"){axis.box.left=plotOffset.left-axis.labelWidth/2;axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth}else{axis.box.top=plotOffset.top-axis.labelHeight/2;axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight}}function adjustLayoutForThingsStickingOut(){var minMargin=options.grid.minBorderMargin,axis,i;if(minMargin==null){minMargin=0;for(i=0;i<series.length;++i){minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2))}}var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){if(axis.reserveSpace&&axis.ticks&&axis.ticks.length){if(axis.direction==="x"){margins.left=Math.max(margins.left,axis.labelWidth/2);margins.right=Math.max(margins.right,axis.labelWidth/2)}else{margins.bottom=Math.max(margins.bottom,axis.labelHeight/2);margins.top=Math.max(margins.top,axis.labelHeight/2)}}});plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left));plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right));plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top));plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]=typeof margin=="number"?margin:margin[a]||0}executeHooks(hooks.processOffset,[plotOffset]);for(var a in plotOffset){if(_typeof(options.grid.borderWidth)=="object"){plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0}else{plotOffset[a]+=showGrid?options.grid.borderWidth:0}}$.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=axisOpts.show==null?axis.used:axisOpts.show;axis.reserveSpace=axisOpts.reserveSpace==null?axis.show:axisOpts.reserveSpace;setRange(axis)});if(showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});$.each(allocatedAxes,function(_,axis){setupTickGeneration(axis);setTicks(axis);snapRangeToTicks(axis,axis.ticks);measureTickLabels(axis)});for(i=allocatedAxes.length-1;i>=0;--i){allocateAxisBoxFirstPhase(allocatedAxes[i])}adjustLayoutForThingsStickingOut();$.each(allocatedAxes,function(_,axis){allocateAxisBoxSecondPhase(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right;plotHeight=surface.height-plotOffset.bottom-plotOffset.top;$.each(axes,function(_,axis){setTransformationHelpers(axis)});if(showGrid){drawAxisLabels()}insertLegend()}function setRange(axis){var opts=axis.options,min=+(opts.min!=null?opts.min:axis.datamin),max=+(opts.max!=null?opts.max:axis.datamax),delta=max-min;if(delta==0){var widen=max==0?1:.01;if(opts.min==null)min-=widen;if(opts.max==null||opts.min!=null)max+=widen}else{var margin=opts.autoscaleMargin;if(margin!=null){if(opts.min==null){min-=delta*margin;if(min<0&&axis.datamin!=null&&axis.datamin>=0)min=0}if(opts.max==null){max+=delta*margin;if(max>0&&axis.datamax!=null&&axis.datamax<=0)max=0}}}axis.min=min;axis.max=max}function setupTickGeneration(axis){var opts=axis.options;var noTicks;if(typeof opts.ticks=="number"&&opts.ticks>0)noTicks=opts.ticks;else noTicks=.3*Math.sqrt(axis.direction=="x"?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;if(maxDec!=null&&dec>maxDec){dec=maxDec}var magn=Math.pow(10,-dec),norm=delta/magn,size;if(norm<1.5){size=1}else if(norm<3){size=2;if(norm>2.25&&(maxDec==null||dec+1<=maxDec)){size=2.5;++dec}}else if(norm<7.5){size=5}else{size=10}size*=magn;if(opts.minTickSize!=null&&size<opts.minTickSize){size=opts.minTickSize}axis.delta=delta;axis.tickDecimals=Math.max(0,maxDec!=null?maxDec:dec);axis.tickSize=opts.tickSize||size;if(opts.mode=="time"&&!axis.tickGenerator){throw new Error("Time mode requires the flot.time plugin.")}if(!axis.tickGenerator){axis.tickGenerator=function(axis){var ticks=[],start=floorInBase(axis.min,axis.tickSize),i=0,v=Number.NaN,prev;do{prev=v;v=start+i*axis.tickSize;ticks.push(v);++i}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;var formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!=null){var decimal=formatted.indexOf(".");var precision=decimal==-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}return formatted}}if($.isFunction(opts.tickFormatter))axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)};if(opts.alignTicksWithAxis!=null){var otherAxis=(axis.direction=="x"?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0){if(opts.min==null)axis.min=Math.min(axis.min,niceTicks[0]);if(opts.max==null&&niceTicks.length>1)axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1])}axis.tickGenerator=function(axis){var ticks=[],v,i;for(i=0;i<otherAxis.ticks.length;++i){v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min);v=axis.min+v*(axis.max-axis.min);ticks.push(v)}return ticks};if(!axis.mode&&opts.tickDecimals==null){var extraDec=Math.max(0,-Math.floor(Math.log(axis.delta)/Math.LN10)+1),ts=axis.tickGenerator(axis);if(!(ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))))axis.tickDecimals=extraDec}}}}function setTicks(axis){var oticks=axis.options.ticks,ticks=[];if(oticks==null||typeof oticks=="number"&&oticks>0)ticks=axis.tickGenerator(axis);else if(oticks){if($.isFunction(oticks))ticks=oticks(axis);else ticks=oticks}var i,v;axis.ticks=[];for(i=0;i<ticks.length;++i){var label=null;var t=ticks[i];if((typeof t==="undefined"?"undefined":_typeof(t))=="object"){v=+t[0];if(t.length>1)label=t[1]}else v=+t;if(label==null)label=axis.tickFormatter(v,axis);if(!isNaN(v))axis.ticks.push({v:v,label:label})}}function snapRangeToTicks(axis,ticks){if(axis.options.autoscaleMargin&&ticks.length>0){if(axis.options.min==null)axis.min=Math.min(axis.min,ticks[0].v);if(axis.options.max==null&&ticks.length>1)axis.max=Math.max(axis.max,ticks[ticks.length-1].v)}}function draw(){surface.clear();executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;if(grid.show&&grid.backgroundColor)drawBackground();if(grid.show&&!grid.aboveData){drawGrid()}for(var i=0;i<series.length;++i){executeHooks(hooks.drawSeries,[ctx,series[i]]);drawSeries(series[i])}executeHooks(hooks.draw,[ctx]);if(grid.show&&grid.aboveData){drawGrid()}surface.render();triggerRedrawOverlay()}function extractRange(ranges,coord){var axis,from,to,key,axes=allAxes();for(var i=0;i<axes.length;++i){axis=axes[i];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?xaxes[0]:yaxes[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function drawBackground(){ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)");ctx.fillRect(0,0,plotWidth,plotHeight);ctx.restore()}function drawGrid(){var i,axes,bw,bc;ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings){if($.isFunction(markings)){axes=plot.getAxes();axes.xmin=axes.xaxis.min;axes.xmax=axes.xaxis.max;axes.ymin=axes.yaxis.min;axes.ymax=axes.yaxis.max;markings=markings(axes)}for(i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(xrange.from==null)xrange.from=xrange.axis.min;if(xrange.to==null)xrange.to=xrange.axis.max;if(yrange.from==null)yrange.from=yrange.axis.min;if(yrange.to==null)yrange.to=yrange.axis.max;if(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)continue;xrange.from=Math.max(xrange.from,xrange.axis.min);xrange.to=Math.min(xrange.to,xrange.axis.max);yrange.from=Math.max(yrange.from,yrange.axis.min);yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(xequal&&yequal){continue}xrange.from=Math.floor(xrange.axis.p2c(xrange.from));xrange.to=Math.floor(xrange.axis.p2c(xrange.to));yrange.from=Math.floor(yrange.axis.p2c(yrange.from));yrange.to=Math.floor(yrange.axis.p2c(yrange.to));if(xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath();ctx.strokeStyle=m.color||options.grid.markingsColor;ctx.lineWidth=lineWidth;if(xequal){ctx.moveTo(xrange.to+subPixel,yrange.from);ctx.lineTo(xrange.to+subPixel,yrange.to)}else{ctx.moveTo(xrange.from,yrange.to+subPixel);ctx.lineTo(xrange.to,yrange.to+subPixel)}ctx.stroke()}else{ctx.fillStyle=m.color||options.grid.markingsColor;ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}}axes=allAxes();bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var axis=axes[j],box=axis.box,t=axis.tickLength,x,y,xoff,yoff;if(!axis.show||axis.ticks.length==0)continue;ctx.lineWidth=1;if(axis.direction=="x"){x=0;if(t=="full")y=axis.position=="top"?0:plotHeight;else y=box.top-plotOffset.top+(axis.position=="top"?box.height:0)}else{y=0;if(t=="full")x=axis.position=="left"?0:plotWidth;else x=box.left-plotOffset.left+(axis.position=="left"?box.width:0)}if(!axis.innermost){ctx.strokeStyle=axis.options.color;ctx.beginPath();xoff=yoff=0;if(axis.direction=="x")xoff=plotWidth+1;else yoff=plotHeight+1;if(ctx.lineWidth==1){if(axis.direction=="x"){y=Math.floor(y)+.5}else{x=Math.floor(x)+.5}}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff);ctx.stroke()}ctx.strokeStyle=axis.options.tickColor;ctx.beginPath();for(i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0;if(isNaN(v)||v<axis.min||v>axis.max||t=="full"&&((typeof bw==="undefined"?"undefined":_typeof(bw))=="object"&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max))continue;if(axis.direction=="x"){x=axis.p2c(v);yoff=t=="full"?-plotHeight:t;if(axis.position=="top")yoff=-yoff}else{y=axis.p2c(v);xoff=t=="full"?-plotWidth:t;if(axis.position=="left")xoff=-xoff}if(ctx.lineWidth==1){if(axis.direction=="x")x=Math.floor(x)+.5;else y=Math.floor(y)+.5}ctx.moveTo(x,y);ctx.lineTo(x+xoff,y+yoff)}ctx.stroke()}if(bw){bc=options.grid.borderColor;if((typeof bw==="undefined"?"undefined":_typeof(bw))=="object"||(typeof bc==="undefined"?"undefined":_typeof(bc))=="object"){if((typeof bw==="undefined"?"undefined":_typeof(bw))!=="object"){bw={top:bw,right:bw,bottom:bw,left:bw}}if((typeof bc==="undefined"?"undefined":_typeof(bc))!=="object"){bc={top:bc,right:bc,bottom:bc,left:bc}}if(bw.top>0){ctx.strokeStyle=bc.top;ctx.lineWidth=bw.top;ctx.beginPath();ctx.moveTo(0-bw.left,0-bw.top/2);ctx.lineTo(plotWidth,0-bw.top/2);ctx.stroke()}if(bw.right>0){ctx.strokeStyle=bc.right;ctx.lineWidth=bw.right;ctx.beginPath();ctx.moveTo(plotWidth+bw.right/2,0-bw.top);ctx.lineTo(plotWidth+bw.right/2,plotHeight);ctx.stroke()}if(bw.bottom>0){ctx.strokeStyle=bc.bottom;ctx.lineWidth=bw.bottom;ctx.beginPath();ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2);ctx.lineTo(0,plotHeight+bw.bottom/2);ctx.stroke()}if(bw.left>0){ctx.strokeStyle=bc.left;ctx.lineWidth=bw.left;ctx.beginPath();ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom);ctx.lineTo(0-bw.left/2,0);ctx.stroke()}}else{ctx.lineWidth=bw;ctx.strokeStyle=options.grid.borderColor;ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw)}}ctx.restore()}function drawAxisLabels(){$.each(allAxes(),function(_,axis){var box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel",tick,x,y,halign,valign;surface.removeText(layer);if(!axis.show||axis.ticks.length==0)return;for(var i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||tick.v<axis.min||tick.v>axis.max)continue;if(axis.direction=="x"){halign="center";x=plotOffset.left+axis.p2c(tick.v);if(axis.position=="bottom"){y=box.top+box.padding}else{y=box.top+box.height-box.padding;valign="bottom"}}else{valign="middle";y=plotOffset.top+axis.p2c(tick.v);if(axis.position=="left"){x=box.left+box.width-box.padding;halign="right"}else{x=box.left+box.padding}}surface.addText(layer,x,y,tick.label,font,null,null,halign,valign)}})}function drawSeries(series){if(series.lines.show)drawSeriesLines(series);if(series.bars.show)drawSeriesBars(series);if(series.points.show)drawSeriesPoints(series)}function drawSeriesLines(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(x1==null||x2==null)continue;if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(x1!=prevx||y1!=prevy)ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset);prevx=x2;prevy=y2;ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}ctx.stroke()}function plotLineArea(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,top,areaOpen=false,ypos=1,segmentStart=0,segmentEnd=0;while(true){if(ps>0&&i>points.length+ps)break;i+=ps;var x1=points[i-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&x1!=null&&x2==null){segmentEnd=i;ps=-ps;ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill();areaOpen=false;ps=-ps;ypos=1;i=segmentStart=segmentEnd+ps;continue}}if(x1==null||x2==null)continue;if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1;x2=axisx.max}if(!areaOpen){ctx.beginPath();ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom));areaOpen=true}if(y1>=axisy.max&&y2>=axisy.max){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));continue}else if(y1<=axisy.min&&y2<=axisy.min){ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min));ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));continue}var x1old=x1,x2old=x2;if(y1<=y2&&y1<axisy.min&&y2>=axisy.min){x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.min}else if(y2<=y1&&y2<axisy.min&&y1>=axisy.min){x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.min}if(y1>=y2&&y1>axisy.max&&y2<=axisy.max){x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y1=axisy.max}else if(y2>=y1&&y2>axisy.max&&y1<=axisy.max){x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1;y2=axisy.max}if(x1!=x1old){ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1))}ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1));ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));if(x2!=x2old){ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2));ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2))}}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw;ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis);ctx.lineWidth=sw/2;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);if(fillStyle){ctx.fillStyle=fillStyle;plotLineArea(series.datapoints,series.xaxis,series.yaxis)}if(lw>0)plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}function drawSeriesPoints(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];if(x==null||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)continue;ctx.beginPath();x=axisx.p2c(x);y=axisy.p2c(y)+offset;if(symbol=="circle")ctx.arc(x,y,radius,0,shadow?Math.PI:Math.PI*2,false);else symbol(ctx,x,y,radius,shadow);ctx.closePath();if(fillStyle){ctx.fillStyle=fillStyle;ctx.fill()}ctx.stroke()}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;if(lw==0)lw=1e-4;if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w;ctx.strokeStyle="rgba(0,0,0,0.1)";plotPoints(series.datapoints,radius,null,w+w/2,true,series.xaxis,series.yaxis,symbol);ctx.strokeStyle="rgba(0,0,0,0.2)";plotPoints(series.datapoints,radius,null,w/2,true,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw;ctx.strokeStyle=series.color;plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,false,series.xaxis,series.yaxis,symbol);ctx.restore()}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;if(horizontal){drawBottom=drawRight=drawTop=true;drawLeft=false;left=b;right=x;top=y+barLeft;bottom=y+barRight;if(right<left){tmp=right;right=left;left=tmp;drawLeft=true;drawRight=false}}else{drawLeft=drawRight=drawTop=true;drawBottom=false;left=x+barLeft;right=x+barRight;bottom=b;top=y;if(top<bottom){tmp=top;top=bottom;bottom=tmp;drawBottom=true;drawTop=false}}if(right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max)return;if(left<axisx.min){left=axisx.min;drawLeft=false}if(right>axisx.max){right=axisx.max;drawRight=false}if(bottom<axisy.min){bottom=axisy.min;drawBottom=false}if(top>axisy.max){top=axisy.max;drawTop=false}left=axisx.p2c(left);bottom=axisy.p2c(bottom);right=axisx.p2c(right);top=axisy.p2c(top);if(fillStyleCallback){c.fillStyle=fillStyleCallback(bottom,top);c.fillRect(left,top,right-left,bottom-top)}if(lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)){c.beginPath();c.moveTo(left,bottom);if(drawLeft)c.lineTo(left,top);else c.moveTo(left,top);if(drawTop)c.lineTo(right,top);else c.moveTo(right,top);if(drawRight)c.lineTo(right,bottom);else c.moveTo(right,bottom);if(drawBottom)c.lineTo(left,bottom);else c.moveTo(left,bottom);c.stroke()}}function drawSeriesBars(series){function plotBars(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize;for(var i=0;i<points.length;i+=ps){if(points[i]==null)continue;drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)}}ctx.save();ctx.translate(plotOffset.left,plotOffset.top);ctx.lineWidth=series.bars.lineWidth;ctx.strokeStyle=series.color;var barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;plotBars(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis);ctx.restore()}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);c.a=typeof fill=="number"?fill:.4;c.normalize();return c.toString()}function insertLegend(){if(options.legend.container!=null){$(options.legend.container).html("")}else{placeholder.find(".legend").remove()}if(!options.legend.show){return}var fragments=[],entries=[],rowStarted=false,lf=options.legend.labelFormatter,s,label;for(var i=0;i<series.length;++i){s=series[i];if(s.label){label=lf?lf(s.label,s):s.label;if(label){entries.push({label:label,color:s.color})}}}if(options.legend.sorted){if($.isFunction(options.legend.sorted)){entries.sort(options.legend.sorted)}else if(options.legend.sorted=="reverse"){entries.reverse()}else{var ascending=options.legend.sorted!="descending";entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}}for(var i=0;i<entries.length;++i){var entry=entries[i];if(i%options.legend.noColumns==0){if(rowStarted)fragments.push("</tr>");fragments.push("<tr>");rowStarted=true}fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel" data-test-subj="flotLegendLabel">'+entry.label+"</td>")}if(rowStarted)fragments.push("</tr>");if(fragments.length==0)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(options.legend.container!=null)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;if(m[0]==null)m=[m,m];if(p.charAt(0)=="n")pos+="top:"+(m[1]+plotOffset.top)+"px;";else if(p.charAt(0)=="s")pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;";if(p.charAt(1)=="e")pos+="right:"+(m[0]+plotOffset.right)+"px;";else if(p.charAt(1)=="w")pos+="left:"+(m[0]+plotOffset.left)+"px;";var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(options.legend.backgroundOpacity!=0){var c=options.legend.backgroundColor;if(c==null){c=options.grid.backgroundColor;if(c&&typeof c=="string")c=$.color.parse(c);else c=$.color.extract(legend,"background-color");c.a=1;c=c.toString()}var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}var highlights=[],redrawTimeout=null;function findNearbyItem(mouseX,mouseY,seriesFilter){var maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null,foundPoint=false,i,j,ps;for(i=series.length-1;i>=0;--i){if(!seriesFilter(series[i]))continue;var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;ps=s.datapoints.pointsize;if(axisx.options.inverseTransform)maxx=Number.MAX_VALUE;if(axisy.options.inverseTransform)maxy=Number.MAX_VALUE;if(s.lines.show||s.points.show){for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(x==null)continue;if(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)continue;var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}barRight=barLeft+s.bars.barWidth;for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1],b=points[j+2];if(x==null)continue;if(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))item=[i,j/ps]}}}if(item){i=item[0];j=item[1];ps=series[i].datapoints.pointsize;return{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}}return null}function onMouseMove(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return s["hoverable"]!=false})}function onMouseLeave(e){if(options.grid.hoverable)triggerClickHoverEvent("plothover",e,function(s){return false})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return s["clickable"]!=false})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX;pos.pageY=event.pageY;var item=findNearbyItem(canvasX,canvasY,seriesFilter);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)}if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]))unhighlight(h.series,h.point)}if(item)highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;if(t==-1){drawOverlay();return}if(!redrawTimeout)redrawTimeout=setTimeout(drawOverlay,t)}function drawOverlay(){redrawTimeout=null;octx.save();overlay.clear();octx.translate(plotOffset.left,plotOffset.top);var i,hi;for(i=0;i<highlights.length;++i){hi=highlights[i];if(hi.series.bars.show)drawBarHighlight(hi.series,hi.point);else drawPointHighlight(hi.series,hi.point)}octx.restore();executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i==-1){highlights.push({series:s,point:point,auto:auto});triggerRedrawOverlay()}else if(!auto)highlights[i].auto=false}function unhighlight(s,point){if(s==null&&point==null){highlights=[];triggerRedrawOverlay();return}if(typeof s=="number")s=series[s];if(typeof point=="number"){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);if(i!=-1){highlights.splice(i,1);triggerRedrawOverlay()}}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x);y=axisy.p2c(y);octx.beginPath();if(series.points.symbol=="circle")octx.arc(x,y,radius,0,2*Math.PI,false);else series.points.symbol(octx,x,y,radius,false);octx.closePath();octx.stroke()}function drawBarHighlight(series,point){var highlightColor=typeof series.highlightColor==="string"?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor,barLeft;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth;octx.strokeStyle=highlightColor;drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if(typeof spec=="string")return spec;else{var gradient=ctx.createLinearGradient(0,top,0,bottom);for(var i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if(typeof c!="string"){var co=$.color.parse(defaultColor);if(c.brightness!=null)co=co.scale("rgb",c.brightness);if(c.opacity!=null)co.a*=c.opacity;c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}}$.plot=function(placeholder,data,options){var plot=new Plot($(placeholder),data,options,$.plot.plugins);return plot};$.plot.version="0.8.3";$.plot.plugins=[];$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})};function floorInBase(n,base){return base*Math.floor(n/base)}})(jQuery)},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(8);(function($){var options={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if(typeof d.strftime=="function"){return d.strftime(fmt)}var leftPad=function leftPad(n,pad){n=""+n;pad=""+(pad==null?"0":pad);return n.length==1?pad+n:n};var r=[];var escape=false;var hours=d.getHours();var isAM=hours<12;if(monthNames==null){monthNames=[_i18n.i18n.translate("common.ui.flotCharts.janLabel",{defaultMessage:"Jan"}),_i18n.i18n.translate("common.ui.flotCharts.febLabel",{defaultMessage:"Feb"}),_i18n.i18n.translate("common.ui.flotCharts.marLabel",{defaultMessage:"Mar"}),_i18n.i18n.translate("common.ui.flotCharts.aprLabel",{defaultMessage:"Apr"}),_i18n.i18n.translate("common.ui.flotCharts.mayLabel",{defaultMessage:"May"}),_i18n.i18n.translate("common.ui.flotCharts.junLabel",{defaultMessage:"Jun"}),_i18n.i18n.translate("common.ui.flotCharts.julLabel",{defaultMessage:"Jul"}),_i18n.i18n.translate("common.ui.flotCharts.augLabel",{defaultMessage:"Aug"}),_i18n.i18n.translate("common.ui.flotCharts.sepLabel",{defaultMessage:"Sep"}),_i18n.i18n.translate("common.ui.flotCharts.octLabel",{defaultMessage:"Oct"}),_i18n.i18n.translate("common.ui.flotCharts.novLabel",{defaultMessage:"Nov"}),_i18n.i18n.translate("common.ui.flotCharts.decLabel",{defaultMessage:"Dec"})]}if(dayNames==null){dayNames=[_i18n.i18n.translate("common.ui.flotCharts.sunLabel",{defaultMessage:"Sun"}),_i18n.i18n.translate("common.ui.flotCharts.monLabel",{defaultMessage:"Mon"}),_i18n.i18n.translate("common.ui.flotCharts.tueLabel",{defaultMessage:"Tue"}),_i18n.i18n.translate("common.ui.flotCharts.wedLabel",{defaultMessage:"Wed"}),_i18n.i18n.translate("common.ui.flotCharts.thuLabel",{defaultMessage:"Thu"}),_i18n.i18n.translate("common.ui.flotCharts.friLabel",{defaultMessage:"Fri"}),_i18n.i18n.translate("common.ui.flotCharts.satLabel",{defaultMessage:"Sat"})]}var hours12;if(hours>12){hours12=hours-12}else if(hours==0){hours12=12}else{hours12=hours}for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?""+"am":""+"pm";break;case"P":c=isAM?""+"AM":""+"PM";break;case"w":c=""+d.getDay();break}r.push(c);escape=false}else{if(c=="%"){escape=true}else{r.push(c)}}}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};if(d.strftime!=undefined){addProxyMethod(utc,"strftime",d,"strftime")}addProxyMethod(utc,"getTime",d,"getTime");addProxyMethod(utc,"setTime",d,"setTime");var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var p=0;p<props.length;p++){addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]);addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p])}return utc}function dateGenerator(ts,opts){if(opts.timezone=="browser"){return new Date(ts)}else if(!opts.timezone||opts.timezone=="utc"){return makeUtcWrapper(new Date(ts))}else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var d=new timezoneJS.Date;d.setTimezone(opts.timezone);d.setTime(ts);return d}else{return makeUtcWrapper(new Date(ts))}}var timeUnitSize={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3};var baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]);var specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function init(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode=="time"){axis.tickGenerator=function(axis){var ticks=[];var d=dateGenerator(axis.min,opts);var minSize=0;var spec=opts.tickSize&&opts.tickSize[1]==="quarter"||opts.minTickSize&&opts.minTickSize[1]==="quarter"?specQuarters:specMonths;if(opts.minTickSize!=null){if(typeof opts.tickSize=="number"){minSize=opts.tickSize}else{minSize=opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]}}for(var i=0;i<spec.length-1;++i){if(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize){break}}var size=spec[i][0];var unit=spec[i][1];if(unit=="year"){if(opts.minTickSize!=null&&opts.minTickSize[1]=="year"){size=Math.floor(opts.minTickSize[0])}else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10));var norm=axis.delta/timeUnitSize.year/magn;if(norm<1.5){size=1}else if(norm<3){size=2}else if(norm<7.5){size=5}else{size=10}size*=magn}if(size<1){size=1}}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];if(unit=="second"){d.setSeconds(floorInBase(d.getSeconds(),tickSize))}else if(unit=="minute"){d.setMinutes(floorInBase(d.getMinutes(),tickSize))}else if(unit=="hour"){d.setHours(floorInBase(d.getHours(),tickSize))}else if(unit=="month"){d.setMonth(floorInBase(d.getMonth(),tickSize))}else if(unit=="quarter"){d.setMonth(3*floorInBase(d.getMonth()/3,tickSize))}else if(unit=="year"){d.setFullYear(floorInBase(d.getFullYear(),tickSize))}d.setMilliseconds(0);if(step>=timeUnitSize.minute){d.setSeconds(0)}if(step>=timeUnitSize.hour){d.setMinutes(0)}if(step>=timeUnitSize.day){d.setHours(0)}if(step>=timeUnitSize.day*4){d.setDate(1)}if(step>=timeUnitSize.month*2){d.setMonth(floorInBase(d.getMonth(),3))}if(step>=timeUnitSize.quarter*2){d.setMonth(floorInBase(d.getMonth(),6))}if(step>=timeUnitSize.year){d.setMonth(0)}var carry=0;var v=Number.NaN;var prev;do{prev=v;v=d.getTime();ticks.push(v);if(unit=="month"||unit=="quarter"){if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+(unit=="quarter"?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize);carry=d.getHours();d.setHours(0)}else{d.setMonth(d.getMonth()+tickSize*(unit=="quarter"?3:1))}}else if(unit=="year"){d.setFullYear(d.getFullYear()+tickSize)}else{d.setTime(v+step)}}while(v<axis.max&&v!=prev);return ticks};axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(opts.timeformat!=null){return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames)}var useQuarters=axis.options.tickSize&&axis.options.tickSize[1]=="quarter"||axis.options.minTickSize&&axis.options.minTickSize[1]=="quarter";var t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]];var span=axis.max-axis.min;var suffix=opts.twelveHourClock?" %p":"";var hourCode=opts.twelveHourClock?"%I":"%H";var fmt;if(t<timeUnitSize.minute){fmt=hourCode+":%M:%S"+suffix}else if(t<timeUnitSize.day){if(span<2*timeUnitSize.day){fmt=hourCode+":%M"+suffix}else{fmt="%b %d "+hourCode+":%M"+suffix}}else if(t<timeUnitSize.month){fmt="%b %d"}else if(useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="%b"}else{fmt="%b %Y"}}else if(useQuarters&&t<timeUnitSize.year){if(span<timeUnitSize.year){fmt="Q%q"}else{fmt="Q%q %Y"}}else{fmt="%Y"}var rt=formatDate(d,fmt,opts.monthNames,opts.dayNames);return rt}}})})}$.plot.plugins.push({init:init,options:options,name:"time",version:"1.0"});$.plot.formatDate=formatDate;$.plot.dateGenerator=dateGenerator})(jQuery)},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function($){var options={canvas:true};var render,getTextInfo,addText;var hasOwnProperty=Object.prototype.hasOwnProperty;function init(plot,classes){var Canvas=classes.Canvas;if(render==null){getTextInfo=Canvas.prototype.getTextInfo,addText=Canvas.prototype.addText,render=Canvas.prototype.render}Canvas.prototype.render=function(){if(!plot.getOptions().canvas){return render.call(this)}var context=this.context,cache=this._textCache;context.save();context.textBaseline="middle";for(var layerKey in cache){if(hasOwnProperty.call(cache,layerKey)){var layerCache=cache[layerKey];for(var styleKey in layerCache){if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey],updateStyles=true;for(var key in styleCache){if(hasOwnProperty.call(styleCache,key)){var info=styleCache[key],positions=info.positions,lines=info.lines;if(updateStyles){context.fillStyle=info.font.color;context.font=info.font.definition;updateStyles=false}for(var i=0,position;position=positions[i];i++){if(position.active){for(var j=0,line;line=position.lines[j];j++){context.fillText(lines[j].text,line[0],line[1])}}else{positions.splice(i--,1)}}if(positions.length==0){delete styleCache[key]}}}}}}}context.restore()};Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){if(!plot.getOptions().canvas){return getTextInfo.call(this,layer,text,font,angle,width)}var textStyle,layerCache,styleCache,info;text=""+text;if((typeof font==="undefined"?"undefined":_typeof(font))==="object"){textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family}else{textStyle=font}layerCache=this._textCache[layer];if(layerCache==null){layerCache=this._textCache[layer]={}}styleCache=layerCache[textStyle];if(styleCache==null){styleCache=layerCache[textStyle]={}}info=styleCache[text];if(info==null){var context=this.context;if((typeof font==="undefined"?"undefined":_typeof(font))!=="object"){var element=$("<div>&nbsp;</div>").css("position","absolute").addClass(typeof font==="string"?font:null).appendTo(this.getTextLayer(layer));font={lineHeight:element.height(),style:element.css("font-style"),variant:element.css("font-variant"),weight:element.css("font-weight"),family:element.css("font-family"),color:element.css("color")};font.size=element.css("line-height",1).height();element.remove()}textStyle=font.style+" "+font.variant+" "+font.weight+" "+font.size+"px "+font.family;info=styleCache[text]={width:0,height:0,positions:[],lines:[],font:{definition:textStyle,color:font.color}};context.save();context.font=textStyle;var lines=(text+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(var i=0;i<lines.length;++i){var lineText=lines[i],measured=context.measureText(lineText);info.width=Math.max(measured.width,info.width);info.height+=font.lineHeight;info.lines.push({text:lineText,width:measured.width,height:font.lineHeight})}context.restore()}return info};Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){if(!plot.getOptions().canvas){return addText.call(this,layer,x,y,text,font,angle,width,halign,valign)}var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions,lines=info.lines;y+=info.height/lines.length/2;if(valign=="middle"){y=Math.round(y-info.height/2)}else if(valign=="bottom"){y=Math.round(y-info.height)}else{y=Math.round(y)}if(!!(window.opera&&window.opera.version().split(".")[0]<12)){y-=2}for(var i=0,position;position=positions[i];i++){if(position.x==x&&position.y==y){position.active=true;return}}position={active:true,lines:[],x:x,y:y};positions.push(position);for(var i=0,line;line=lines[i];i++){if(halign=="center"){position.lines.push([Math.round(x-line.width/2),y])}else if(halign=="right"){position.lines.push([Math.round(x-line.width),y])}else{position.lines.push([Math.round(x),y])}y+=line.height}}}$.plot.plugins.push({init:init,options:options,name:"canvas",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function processRawData(plot,series,datapoints){var handlers={square:function square(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.rect(x-size,y-size,size+size,size+size)},diamond:function diamond(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI/2);ctx.moveTo(x-size,y);ctx.lineTo(x,y-size);ctx.lineTo(x+size,y);ctx.lineTo(x,y+size);ctx.lineTo(x-size,y)},triangle:function triangle(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var height=size*Math.sin(Math.PI/3);ctx.moveTo(x-size/2,y+height/2);ctx.lineTo(x+size/2,y+height/2);if(!shadow){ctx.lineTo(x,y-height/2);ctx.lineTo(x-size/2,y+height/2)}},cross:function cross(ctx,x,y,radius,shadow){var size=radius*Math.sqrt(Math.PI)/2;ctx.moveTo(x-size,y-size);ctx.lineTo(x+size,y+size);ctx.moveTo(x-size,y+size);ctx.lineTo(x+size,y-size)}};var s=series.points.symbol;if(handlers[s])series.points.symbol=handlers[s]}function init(plot){plot.hooks.processDatapoints.push(processRawData)}$.plot.plugins.push({init:init,name:"symbols",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function init(plot){var crosshair={x:-1,y:-1,locked:false};plot.setCrosshair=function setCrosshair(pos){if(!pos)crosshair.x=-1;else{var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width()));crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}plot.triggerRedrawOverlay()};plot.clearCrosshair=plot.setCrosshair;plot.lockCrosshair=function lockCrosshair(pos){if(pos)plot.setCrosshair(pos);crosshair.locked=true};plot.unlockCrosshair=function unlockCrosshair(){crosshair.locked=false};function onMouseOut(e){if(crosshair.locked)return;if(crosshair.x!=-1){crosshair.x=-1;plot.triggerRedrawOverlay()}}function onMouseMove(e){if(crosshair.locked)return;if(plot.getSelection&&plot.getSelection()){crosshair.x=-1;return}var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width()));crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height()));plot.triggerRedrawOverlay()}plot.hooks.bindEvents.push(function(plot,eventHolder){if(!plot.getOptions().crosshair.mode)return;eventHolder.mouseout(onMouseOut);eventHolder.mousemove(onMouseMove)});plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(!c.mode)return;var plotOffset=plot.getPlotOffset();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);if(crosshair.x!=-1){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;ctx.strokeStyle=c.color;ctx.lineWidth=c.lineWidth;ctx.lineJoin="round";ctx.beginPath();if(c.mode.indexOf("x")!=-1){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0);ctx.lineTo(drawX,plot.height())}if(c.mode.indexOf("y")!=-1){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY);ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut);eventHolder.unbind("mousemove",onMouseMove)})}$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function init(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var savedhandlers={};var mouseUpHandler=null;function onMouseMove(e){if(selection.active){updateSelection(e);plot.getPlaceholder().trigger("plotselecting",[getSelection()])}}function onMouseDown(e){if(e.which!=1)return;document.body.focus();if(document.onselectstart!==undefined&&savedhandlers.onselectstart==null){savedhandlers.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&savedhandlers.ondrag==null){savedhandlers.ondrag=document.ondrag;document.ondrag=function(){return false}}setSelectionPos(selection.first,e);selection.active=true;mouseUpHandler=function mouseUpHandler(e){onMouseUp(e)};$(document).one("mouseup",mouseUpHandler)}function onMouseUp(e){mouseUpHandler=null;if(document.onselectstart!==undefined)document.onselectstart=savedhandlers.onselectstart;if(document.ondrag!==undefined)document.ondrag=savedhandlers.ondrag;selection.active=false;updateSelection(e);if(selectionIsSane())triggerSelectedEvent();else{plot.getPlaceholder().trigger("plotunselected",[]);plot.getPlaceholder().trigger("plotselecting",[null])}return false}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;$.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}});return r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]);if(r.xaxis&&r.yaxis)plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions();var offset=plot.getPlaceholder().offset();var plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width());pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height());if(o.selection.mode=="y")pos.x=pos==selection.first?0:plot.width();if(o.selection.mode=="x")pos.y=pos==selection.first?0:plot.height()}function updateSelection(pos){if(pos.pageX==null)return;setSelectionPos(selection.second,pos);if(selectionIsSane()){selection.show=true;plot.triggerRedrawOverlay()}else clearSelection(true)}function clearSelection(preventEvent){if(selection.show){selection.show=false;plot.triggerRedrawOverlay();if(!preventEvent)plot.getPlaceholder().trigger("plotunselected",[])}}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes){axis=axes[k];if(axis.direction==coord){key=coord+axis.n+"axis";if(!ranges[key]&&axis.n==1)key=coord+"axis";if(ranges[key]){from=ranges[key].from;to=ranges[key].to;break}}}if(!ranges[key]){axis=coord=="x"?plot.getXAxes()[0]:plot.getYAxes()[0];from=ranges[coord+"1"];to=ranges[coord+"2"]}if(from!=null&&to!=null&&from>to){var tmp=from;from=to;to=tmp}return{from:from,to:to,axis:axis}}function setSelection(ranges,preventEvent){var axis,range,o=plot.getOptions();if(o.selection.mode=="y"){selection.first.x=0;selection.second.x=plot.width()}else{range=extractRange(ranges,"x");selection.first.x=range.axis.p2c(range.from);selection.second.x=range.axis.p2c(range.to)}if(o.selection.mode=="x"){selection.first.y=0;selection.second.y=plot.height()}else{range=extractRange(ranges,"y");selection.first.y=range.axis.p2c(range.from);selection.second.y=range.axis.p2c(range.to)}selection.show=true;plot.triggerRedrawOverlay();if(!preventEvent&&selectionIsSane())triggerSelectedEvent()}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection;plot.setSelection=setSelection;plot.getSelection=getSelection;plot.hooks.bindEvents.push(function(plot,eventHolder){var o=plot.getOptions();if(o.selection.mode!=null){eventHolder.mousemove(onMouseMove);eventHolder.mousedown(onMouseDown)}});plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset();var o=plot.getOptions();ctx.save();ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString();ctx.lineWidth=1;ctx.lineJoin=o.selection.shape;ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);ctx.restore()}});plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove);eventHolder.unbind("mousedown",onMouseDown);if(mouseUpHandler)$(document).unbind("mouseup",mouseUpHandler)})}$.plot.plugins.push({init:init,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(8);(function($){var REDRAW_ATTEMPTS=10;var REDRAW_SHRINK=.95;function init(plot){var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=false,ctx=null;var highlights=[];plot.hooks.processOptions.push(function(plot,options){if(options.series.pie.show){options.grid.show=false;if(options.series.pie.label.show=="auto"){if(options.legend.show){options.series.pie.label.show=false}else{options.series.pie.label.show=true}}if(options.series.pie.radius=="auto"){if(options.series.pie.label.show){options.series.pie.radius=3/4}else{options.series.pie.radius=1}}if(options.series.pie.tilt>1){options.series.pie.tilt=1}else if(options.series.pie.tilt<0){options.series.pie.tilt=0}}});plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();if(options.series.pie.show){if(options.grid.hoverable){eventHolder.unbind("mousemove").mousemove(onMouseMove)}if(options.grid.clickable){eventHolder.unbind("click").click(onClick)}}});plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){var options=plot.getOptions();if(options.series.pie.show){processDatapoints(plot,series,data,datapoints)}});plot.hooks.drawOverlay.push(function(plot,octx){var options=plot.getOptions();if(options.series.pie.show){drawOverlay(plot,octx)}});plot.hooks.draw.push(function(plot,newCtx){var options=plot.getOptions();if(options.series.pie.show){draw(plot,newCtx)}});function processDatapoints(plot,series,datapoints){if(!processed){processed=true;canvas=plot.getCanvas();target=$(canvas).parent();options=plot.getOptions();plot.setData(combine(plot.getData()))}}function combine(data){var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[];for(var i=0;i<data.length;++i){var value=data[i].data;if($.isArray(value)&&value.length==1){value=value[0]}if($.isArray(value)){if(!isNaN(parseFloat(value[1]))&&isFinite(value[1])){value[1]=+value[1]}else{value[1]=0}}else if(!isNaN(parseFloat(value))&&isFinite(value)){value=[1,+value]}else{value=[1,0]}data[i].data=[value]}for(var i=0;i<data.length;++i){total+=data[i].data[0][1]}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(value/total<=options.series.pie.combine.threshold){combined+=value;numCombined++;if(!color){color=data[i].color}}}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];if(numCombined<2||value/total>options.series.pie.combine.threshold){newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}}if(numCombined>1){newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)})}return newdata}function draw(plot,newCtx){if(!target){return}var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx;processed=false;maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2;centerTop=canvasHeight/2+options.series.pie.offset.top;centerLeft=canvasWidth/2;if(options.series.pie.offset.left=="auto"){if(options.legend.position.match("w")){centerLeft+=legendWidth/2}else{centerLeft-=legendWidth/2}if(centerLeft<maxRadius){centerLeft=maxRadius}else if(centerLeft>canvasWidth-maxRadius){centerLeft=canvasWidth-maxRadius}}else{centerLeft+=options.series.pie.offset.left}var slices=plot.getData(),attempts=0;do{if(attempts>0){maxRadius*=REDRAW_SHRINK}attempts+=1;clear();if(options.series.pie.tilt<=.8){drawShadow()}}while(!drawPie()&&attempts<REDRAW_ATTEMPTS);if(attempts>=REDRAW_ATTEMPTS){clear();var errorMessage=_i18n.i18n.translate("common.ui.flotCharts.pie.unableToDrawLabelsInsideCanvasErrorMessage",{defaultMessage:"Could not draw pie with labels contained inside canvas"});target.prepend("<div class='error'>"+errorMessage+"</div>")}if(plot.setSeries&&plot.insertLegend){plot.setSeries(slices);plot.insertLegend()}function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight);target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left;var shadowTop=options.series.pie.shadow.top;var edge=10;var alpha=options.series.pie.shadow.alpha;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||radius<=edge){return}ctx.save();ctx.translate(shadowLeft,shadowTop);ctx.globalAlpha=alpha;ctx.fillStyle="#000";ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=edge;i++){ctx.beginPath();ctx.arc(0,0,radius,0,Math.PI*2,false);ctx.fill();radius-=i}ctx.restore()}function drawPie(){var startAngle=Math.PI*options.series.pie.startAngle;var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save();ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);ctx.save();var currentAngle=startAngle;for(var i=0;i<slices.length;++i){slices[i].startAngle=currentAngle;drawSlice(slices[i].angle,slices[i].color,true)}ctx.restore();if(options.series.pie.stroke.width>0){ctx.save();ctx.lineWidth=options.series.pie.stroke.width;currentAngle=startAngle;for(var i=0;i<slices.length;++i){drawSlice(slices[i].angle,options.series.pie.stroke.color,false)}ctx.restore()}drawDonutHole(ctx);ctx.restore();if(options.series.pie.label.show){return drawLabels()}else return true;function drawSlice(angle,color,fill){if(angle<=0||isNaN(angle)){return}if(fill){ctx.fillStyle=color}else{ctx.strokeStyle=color;ctx.lineJoin="round"}ctx.beginPath();if(Math.abs(angle-Math.PI*2)>1e-9){ctx.moveTo(0,0)}ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,false);ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,false);ctx.closePath();currentAngle+=angle;if(fill){ctx.fill()}else{ctx.stroke()}}function drawLabels(){var currentAngle=startAngle;var radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius;for(var i=0;i<slices.length;++i){if(slices[i].percent>=options.series.pie.label.threshold*100){if(!drawLabel(slices[i],currentAngle,i)){return false}}currentAngle+=slices[i].angle}return true;function drawLabel(slice,startAngle,index){if(slice.data[0][1]==0){return true}var lf=options.legend.labelFormatter,text,plf=options.series.pie.label.formatter;if(lf){text=lf(slice.label,slice)}else{text=slice.label}if(plf){text=plf(text,slice)}var halfAngle=(startAngle+slice.angle+startAngle)/2;var x=centerLeft+Math.round(Math.cos(halfAngle)*radius);var y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt;var html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index);var labelTop=y-label.height()/2;var labelLeft=x-label.width()/2;label.css("top",labelTop);label.css("left",labelLeft);if(0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0){return false}if(options.series.pie.label.background.opacity!=0){var c=options.series.pie.label.background.color;if(c==null){c=slice.color}var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return true}}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out";layer.beginPath();layer.fillStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.fill();layer.closePath();layer.restore();layer.save();layer.beginPath();layer.strokeStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.stroke();layer.closePath();layer.restore()}}function isPointInPoly(poly,pt){for(var c=false,i=-1,l=poly.length,j=l-1;++i<l;j=i){(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c)}return c}function findNearbySlice(mouseX,mouseY){var slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius,x,y;for(var i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,false);ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,false);ctx.closePath();x=mouseX-centerLeft;y=mouseY-centerTop;if(ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}else{var p1X=radius*Math.cos(s.startAngle),p1Y=radius*Math.sin(s.startAngle),p2X=radius*Math.cos(s.startAngle+s.angle/4),p2Y=radius*Math.sin(s.startAngle+s.angle/4),p3X=radius*Math.cos(s.startAngle+s.angle/2),p3Y=radius*Math.sin(s.startAngle+s.angle/2),p4X=radius*Math.cos(s.startAngle+s.angle/1.5),p4Y=radius*Math.sin(s.startAngle+s.angle/1.5),p5X=radius*Math.cos(s.startAngle+s.angle),p5Y=radius*Math.sin(s.startAngle+s.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset();var canvasX=parseInt(e.pageX-offset.left);var canvasY=parseInt(e.pageY-offset.top);var item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series)){unhighlight(h.series)}}}if(item){highlight(item.series,eventname)}var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){var i=indexOfHighlight(s);if(i==-1){highlights.push({series:s,auto:auto});plot.triggerRedrawOverlay()}else if(!auto){highlights[i].auto=false}}function unhighlight(s){if(s==null){highlights=[];plot.triggerRedrawOverlay()}var i=indexOfHighlight(s);if(i!=-1){highlights.splice(i,1);plot.triggerRedrawOverlay()}}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){var options=plot.getOptions();var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save();octx.translate(centerLeft,centerTop);octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i){drawHighlight(highlights[i].series)}drawDonutHole(octx);octx.restore();function drawHighlight(series){if(series.angle<=0||isNaN(series.angle)){return}octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")";octx.beginPath();if(Math.abs(series.angle-Math.PI*2)>1e-9){octx.moveTo(0,0)}octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,false);octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,false);octx.closePath();octx.fill()}}}var options={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function formatter(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.1"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{stack:null}};function init(plot){function findMatchingSeries(s,allseries){var res=null;for(var i=0;i<allseries.length;++i){if(s==allseries[i])break;if(allseries[i].stack==s.stack)res=allseries[i]}return res}function stackData(plot,s,datapoints){if(s.stack==null||s.stack===false)return;var other=findMatchingSeries(s,plot.getData());if(!other)return;var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=true,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0,l,m;while(true){if(i>=points.length)break;l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i+keyOffset];py=points[i+accumulateOffset];qx=otherpoints[j+keyOffset];qy=otherpoints[j+accumulateOffset];bottom=0;if(px==qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}newpoints[l+accumulateOffset]+=qy;bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px);newpoints.push(qx);newpoints.push(intery+qy);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null)bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx);newpoints[l+accumulateOffset]+=bottom;i+=ps}fromgap=false;if(l!=newpoints.length&&withbottom)newpoints[l+2]+=bottom}if(withsteps&&l!=newpoints.length&&l>0&&newpoints[l]!=null&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(stackData)}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{threshold:null}};function init(plot){function thresholdData(plot,s,datapoints,below,color){var ps=datapoints.pointsize,i,x,y,p,prevp,thresholded=$.extend({},s);thresholded.datapoints={points:[],pointsize:ps,format:datapoints.format};thresholded.label=null;thresholded.color=color;thresholded.threshold=null;thresholded.originSeries=s;thresholded.data=[];var origpoints=datapoints.points,addCrossingPoints=s.lines.show;var threspoints=[];var newpoints=[];var m;for(i=0;i<origpoints.length;i+=ps){x=origpoints[i];y=origpoints[i+1];prevp=p;if(y<below)p=threspoints;else p=newpoints;if(addCrossingPoints&&prevp!=p&&x!=null&&i>0&&origpoints[i-ps]!=null){var interx=x+(below-y)*(x-origpoints[i-ps])/(y-origpoints[i-ps+1]);prevp.push(interx);prevp.push(below);for(m=2;m<ps;++m){prevp.push(origpoints[i+m])}p.push(null);p.push(null);for(m=2;m<ps;++m){p.push(origpoints[i+m])}p.push(interx);p.push(below);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}p.push(x);p.push(y);for(m=2;m<ps;++m){p.push(origpoints[i+m])}}datapoints.points=newpoints;thresholded.datapoints.points=threspoints;if(thresholded.datapoints.points.length>0){var origIndex=$.inArray(s,plot.getData());plot.getData().splice(origIndex+1,0,thresholded)}}function processThresholds(plot,s,datapoints){if(!s.threshold)return;if(s.threshold instanceof Array){s.threshold.sort(function(a,b){return a.below-b.below});$(s.threshold).each(function(i,th){thresholdData(plot,s,datapoints,th.below,th.color)})}else{thresholdData(plot,s,datapoints,s.threshold.below,s.threshold.color)}}plot.hooks.processDatapoints.push(processThresholds)}$.plot.plugins.push({init:init,options:options,name:"threshold",version:"1.2"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){var options={series:{fillBetween:null}};function init(plot){function findBottomSeries(s,allseries){var i;for(i=0;i<allseries.length;++i){if(allseries[i].id===s.fillBetween){return allseries[i]}}if(typeof s.fillBetween==="number"){if(s.fillBetween<0||s.fillBetween>=allseries.length){return null}return allseries[s.fillBetween]}return null}function computeFillBottoms(plot,s,datapoints){if(s.fillBetween==null){return}var other=findBottomSeries(s,plot.getData());if(!other){return}var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,bottom,withlines=s.lines.show,withbottom=ps>2&&datapoints.format[2].y,withsteps=withlines&&s.lines.steps,fromgap=true,i=0,j=0,l,m;while(true){if(i>=points.length){break}l=newpoints.length;if(points[i]==null){for(m=0;m<ps;++m){newpoints.push(points[i+m])}i+=ps}else if(j>=otherpoints.length){if(!withlines){for(m=0;m<ps;++m){newpoints.push(points[i+m])}}i+=ps}else if(otherpoints[j]==null){for(m=0;m<ps;++m){newpoints.push(null)}fromgap=true;j+=otherps}else{px=points[i];py=points[i+1];qx=otherpoints[j];qy=otherpoints[j+1];bottom=0;if(px===qx){for(m=0;m<ps;++m){newpoints.push(points[i+m])}bottom=qy;i+=ps;j+=otherps}else if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px);newpoints.push(qx);newpoints.push(intery);for(m=2;m<ps;++m){newpoints.push(points[i+m])}bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m){newpoints.push(points[i+m])}if(withlines&&j>0&&otherpoints[j-otherps]!=null){bottom=qy+(otherpoints[j-otherps+1]-qy)*(px-qx)/(otherpoints[j-otherps]-qx)}i+=ps}fromgap=false;if(l!==newpoints.length&&withbottom){newpoints[l+2]=bottom}}if(withsteps&&l!==newpoints.length&&l>0&&newpoints[l]!==null&&newpoints[l]!==newpoints[l-ps]&&newpoints[l+1]!==newpoints[l-ps+1]){for(m=0;m<ps;++m){newpoints[l+ps+m]=newpoints[l+m]}newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}plot.hooks.processDatapoints.push(computeFillBottoms)}$.plot.plugins.push({init:init,options:options,name:"fillbetween",version:"1.0"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";(function($){function log10(value){return Math.log(value)/Math.LN10}function floorAsLog10(value){return Math.floor(log10(value))}function ceilAsLog10(value){return Math.ceil(log10(value))}function floorInBase(n,base){return base*Math.floor(n/base)}function getUnicodePower(power){var superscripts=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹"],result="",str_power=""+power;for(var i=0;i<str_power.length;i++){if(str_power[i]==="+"){}else if(str_power[i]==="-"){result+="⁻"}else{result+=superscripts[str_power[i]]}}return result}function init(plot){plot.hooks.processOptions.push(function(plot){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;if(opts.mode==="log"){axis.tickGenerator=function(axis){var ticks=[],end=ceilAsLog10(axis.max),start=floorAsLog10(axis.min),tick=Number.NaN,i=0;if(axis.min===null||axis.min<=0){start=0;axis.min=.6}if(end<=start){ticks=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9]}else if(log10(axis.max)-log10(axis.datamin)<1){var prev;start=floorInBase(axis.min,axis.tickSize);do{prev=tick;tick=start+i*axis.tickSize;ticks.push(tick);++i}while(tick<axis.max&&tick!==prev)}else{for(;i<=end-start;i++){tick=Math.pow(10,start+i);ticks.push(tick)}var length=ticks.length;if(end-start<6){for(var j=1;j<length*2-1;j+=2){tick=ticks[j-1]*5;ticks.splice(j,0,tick)}}}return ticks};axis.tickFormatter=function(value,axis){var formatted;if(log10(axis.max)-log10(axis.datamin)<1){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1;formatted=""+Math.round(value*factor)/factor;if(axis.tickDecimals!==null){var decimal=formatted.indexOf(".");var precision=decimal===-1?0:formatted.length-decimal-1;if(precision<axis.tickDecimals){return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}}}else{var multiplier="",exponential=parseFloat(value).toExponential(0),power=getUnicodePower(exponential.slice(2));if(exponential[0]!=="1"){multiplier=exponential[0]+"x"}formatted=multiplier+"10"+power}return formatted}}})})}$.plot.plugins.push({init:init,name:"log",version:"0.9"})})(jQuery)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Resize=function(_Component){_inherits(Resize,_Component);function Resize(props){_classCallCheck(this,Resize);var _this=_possibleConstructorReturn(this,(Resize.__proto__||Object.getPrototypeOf(Resize)).call(this,props));_this.state={};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Resize,[{key:"checkSize",value:function checkSize(){var _this2=this;var el=(0,_reactDom.findDOMNode)(this.el);if(!el)return;this.timeout=setTimeout(function(){var _state=_this2.state,currentHeight=_state.currentHeight,currentWidth=_state.currentWidth;if(currentHeight!==el.parentNode.clientHeight||currentWidth!==el.parentNode.clientWidth){_this2.setState({currentWidth:el.parentNode.clientWidth,currentHeight:el.parentNode.clientHeight});_this2.handleResize()}clearTimeout(_this2.timeout);_this2.checkSize()},this.props.frequency)}},{key:"componentDidMount",value:function componentDidMount(){this.checkSize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"handleResize",value:function handleResize(){if(this.props.onResize)this.props.onResize()}},{key:"render",value:function render(){var _this3=this;var style=this.props.style||{};var className=this.props.className||"";return _react2.default.createElement("div",{style:style,className:className,ref:function ref(el){return _this3.el=el}},this.props.children)}}]);return Resize}(_react.Component);Resize.defaultProps={frequency:500};Resize.propTypes={frequency:_propTypes2.default.number,onResize:_propTypes2.default.func};exports.default=Resize;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(series){var multiplier=arguments.length>1&&arguments[1]!==undefined?arguments[1]:.7;var first=_lodash2.default.first(series);try{return(first.data[1][0]-first.data[0][0])*multiplier}catch(e){return 1e3}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _color=__webpack_require__(95);var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(color){var fill=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var initialColor=new _color2.default(color).rgb();var opacity=Math.min(Number(fill),1)*initialColor.valpha;var _initialColor$color=_slicedToArray(initialColor.color,3),r=_initialColor$color[0],g=_initialColor$color[1],b=_initialColor$color[2];return{fill:opacity>0,fillColor:new _color2.default([r,g,b,Number(opacity.toFixed(2))]).string()}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={lineColor:"rgba(0,0,0,0.2)",lineColorReversed:"rgba(255,255,255,0.4)",textColor:"rgba(0,0,0,0.4)",textColorReversed:"rgba(255,255,255,0.6)",valueColor:"rgba(0,0,0,0.7)",valueColorReversed:"rgba(255,255,255,0.8)"};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Annotation=function(_Component){_inherits(Annotation,_Component);function Annotation(props){_classCallCheck(this,Annotation);return _possibleConstructorReturn(this,(Annotation.__proto__||Object.getPrototypeOf(Annotation)).call(this,props))}_createClass(Annotation,[{key:"renderTooltip",value:function renderTooltip(){var _props$series=_slicedToArray(this.props.series,2),timestamp=_props$series[0],messageSource=_props$series[1];var messages=messageSource.map(function(message,i){return _react2.default.createElement("div",{key:message+"-"+i,className:"tvbVisAnnotation__message"},message)});return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"tvbVisAnnotation__timestamp"},(0,_moment2.default)(timestamp).format("lll")),messages)}},{key:"render",value:function render(){var _props=this.props,color=_props.color,plot=_props.plot,icon=_props.icon,series=_props.series;var offset=plot.pointOffset({x:series[0],y:0});var tooltip=this.renderTooltip();var style=(0,_reactcss2.default)({default:{container:{left:offset.left-6,bottom:0,top:5},line:{backgroundColor:color},icon:{color:color}}});return _react2.default.createElement("div",{className:"tvbVisAnnotation",style:style.container},_react2.default.createElement("div",{className:"tvbVisAnnotation__line",style:style.line}),_react2.default.createElement(_eui.EuiToolTip,{className:"tvbVisAnnotation__tooltip",content:tooltip,position:"top"},_react2.default.createElement("i",{className:"tvbVisAnnotation__icon fa "+icon,style:style.icon})))}}]);return Annotation}(_react.Component);Annotation.propTypes={series:_propTypes2.default.array,icon:_propTypes2.default.string,color:_propTypes2.default.string,plot:_propTypes2.default.object,reversed:_propTypes2.default.bool};exports.default=Annotation;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _vertical_legend=__webpack_require__(996);var _vertical_legend2=_interopRequireDefault(_vertical_legend);var _horizontal_legend=__webpack_require__(997);var _horizontal_legend2=_interopRequireDefault(_horizontal_legend);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Legend(props){if(props.legendPosition==="bottom"){return _react2.default.createElement(_horizontal_legend2.default,props)}return _react2.default.createElement(_vertical_legend2.default,props)}Legend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=Legend;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _create_legend_series=__webpack_require__(435);var _create_legend_series2=_interopRequireDefault(_create_legend_series);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VerticalLegend=(0,_react3.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series2.default)(props));var htmlId=(0,_eui.htmlIdGenerator)();var hideLegend=!props.showLegend;var leftLegend=props.legendPosition==="left";var styles=(0,_reactcss2.default)({default:{legend:{width:200}},leftLegend:{legend:{order:"-1"},control:{order:"2"}},hideLegend:{legend:{width:24},series:{display:"none"}}},{hideLegend:hideLegend,leftLegend:leftLegend});var openIcon=leftLegend?"arrowRight":"arrowLeft";var closeIcon=leftLegend?"arrowLeft":"arrowRight";var legendToggleIcon=hideLegend?""+openIcon:""+closeIcon;return _react2.default.createElement("div",{className:"tvbLegend",style:styles.legend},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",style:styles.control,iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.verticalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react2.default.createElement("div",{className:"tvbLegend__series",style:styles.series,id:htmlId("legend")},rows))});VerticalLegend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=VerticalLegend;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _create_legend_series=__webpack_require__(435);var _create_legend_series2=_interopRequireDefault(_create_legend_series);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HorizontalLegend=(0,_react3.injectI18n)(function(props){var rows=props.series.map((0,_create_legend_series2.default)(props));var htmlId=(0,_eui.htmlIdGenerator)();var styles=(0,_reactcss2.default)({hideLegend:{legend:{display:"none"}}},{hideLegend:!props.showLegend});var legendToggleIcon="arrowDown";if(!props.showLegend){legendToggleIcon="arrowUp"}return _react2.default.createElement("div",{className:"tvbLegend tvbLegend--horizontal"},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbLegend__toggle",iconType:legendToggleIcon,color:"text",iconSize:"s",onClick:props.onClick,"aria-label":props.intl.formatMessage({id:"tsvb.horizontalLegend.toggleChartAriaLabel",defaultMessage:"Toggle chart legend"}),"aria-expanded":!!props.showLegend,"aria-controls":htmlId("legend")}),_react2.default.createElement("div",{className:"tvbLegend__series",style:styles.legend,id:htmlId("legend")},rows))});HorizontalLegend.propTypes={legendPosition:_propTypes2.default.string,onClick:_propTypes2.default.func,onToggle:_propTypes2.default.func,series:_propTypes2.default.array,showLegend:_propTypes2.default.bool,seriesValues:_propTypes2.default.object,seriesFilter:_propTypes2.default.array,tickFormatter:_propTypes2.default.func};exports.default=HorizontalLegend;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAxisLabelString=getAxisLabelString;var _relative_options=__webpack_require__(292);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitLookup={s:_i18n.i18n.translate("tsvb.axisLabelOptions.secondsLabel",{defaultMessage:"seconds"}),m:_i18n.i18n.translate("tsvb.axisLabelOptions.minutesLabel",{defaultMessage:"minutes"}),h:_i18n.i18n.translate("tsvb.axisLabelOptions.hoursLabel",{defaultMessage:"hours"}),d:_i18n.i18n.translate("tsvb.axisLabelOptions.daysLabel",{defaultMessage:"days"}),w:_i18n.i18n.translate("tsvb.axisLabelOptions.weeksLabel",{defaultMessage:"weeks"}),M:_i18n.i18n.translate("tsvb.axisLabelOptions.monthsLabel",{defaultMessage:"months"}),y:_i18n.i18n.translate("tsvb.axisLabelOptions.yearsLabel",{defaultMessage:"years"})};function getAxisLabelString(interval){var units=_lodash2.default.pluck(_lodash2.default.clone(_relative_options.relativeOptions).reverse(),"value").filter(function(s){return/^[smhdwMy]$/.test(s)});var duration=_moment2.default.duration(interval,"ms");for(var i=0;i<units.length;i++){var as=duration.as(units[i]);if(Math.abs(as)>1){var unitValue=Math.round(Math.abs(as));var unitString=unitLookup[units[i]];return _i18n.i18n.translate("tsvb.axisLabelOptions.axisLabel",{defaultMessage:"per {unitValue} {unitString}",values:{unitValue:unitValue,unitString:unitString}})}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormat=getFormat;exports.createXaxisFormatter=createXaxisFormatter;var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormat(interval,rules,dateFormat){for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval>=_moment2.default.duration(rule[0])){return rule[1]}}return dateFormat}function createXaxisFormatter(interval,rules,dateFormat){return function(val){return(0,_moment2.default)(val).format(getFormat(interval,rules,dateFormat))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _vis_with_splits=__webpack_require__(436);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _metric=__webpack_require__(1002);var _metric2=_interopRequireDefault(_metric);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color=__webpack_require__(95);var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var color=void 0;var background=void 0;if(model.background_color_rules){model.background_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value2.default)(series[0].data)||0;if(_lodash2.default[rule.operator](value,rule.value)){background=rule.background_color;color=rule.color}}})}return{color:color,background:background}}function MetricVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=_lodash2.default.get(visData,model.id+".series",[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return _lodash2.default.includes(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter2.default)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.color)newProps.color=colors.color;return _lodash2.default.assign({},_lodash2.default.pick(row,["label","data"]),newProps)});var params={metric:series[0],reversed:props.reversed,additionalLabel:props.additionalLabel};if(series[1]){params.secondary=series[1]}var panelBackgroundColor=colors.background||backgroundColor;if(panelBackgroundColor&&panelBackgroundColor!=="inherit"){params.reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45}var style={backgroundColor:panelBackgroundColor};params.backgroundColor=panelBackgroundColor;return _react2.default.createElement("div",{className:"tvbVis",style:style},_react2.default.createElement(_metric2.default,params))}MetricVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,additionalLabel:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,getConfig:_propTypes2.default.func};exports.default=(0,_vis_with_splits.visWithSplits)(MetricVisualization);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayName=getDisplayName;function getDisplayName(Component){return Component.displayName||Component.name||"Component"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(294);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Metric=function(_Component){_inherits(Metric,_Component);function Metric(props){_classCallCheck(this,Metric);var _this=_possibleConstructorReturn(this,(Metric.__proto__||Object.getPrototypeOf(Metric)).call(this,props));_this.state={scale:1,left:0,top:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Metric,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,metric=_props.metric,secondary=_props.secondary;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var primaryFormatter=metric&&(metric.tickFormatter||metric.formatter)||function(n){return n};var primaryValue=primaryFormatter((0,_get_last_value2.default)(metric&&metric.data||0));var styles=(0,_reactcss2.default)({default:{container:{},inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"},primary_value:{},secondary_value:{}},reversed:{primary_value:{},secondary_value:{}}},this.props);if(this.props.backgroundColor)styles.container.backgroundColor=this.props.backgroundColor;if(metric&&metric.color)styles.primary_value.color=metric.color;var primaryLabel=void 0;if(metric&&metric.label){primaryLabel=_react2.default.createElement("div",{className:"tvbVisMetric__label--primary"},metric.label)}var secondarySnippet=void 0;if(secondary){var secondaryFormatter=secondary.formatter||function(n){return n};var secondaryValue=secondaryFormatter((0,_get_last_value2.default)(secondary.data));if(secondary.color)styles.secondary_value.color=secondary.color;var secondaryLabel=void 0;if(secondary.label){secondaryLabel=_react2.default.createElement("div",{className:"tvbVisMetric__label--secondary"},secondary.label)}secondarySnippet=_react2.default.createElement("div",{className:"tvbVisMetric__secondary"},secondaryLabel,_react2.default.createElement("div",{style:styles.secondary_value,className:"tvbVisMetric__value--secondary"},secondaryValue))}var additionalLabel=void 0;if(this.props.additionalLabel){additionalLabel=_react2.default.createElement("div",{className:"tvbVisMetric__label--additional"},this.props.additionalLabel)}var className="tvbVisMetric";if(!styles.container.backgroundColor){className+=" tvbVisMetric--noBackground"}if(this.props.reversed){className+=" tvbVisMetric--reversed"}return _react2.default.createElement("div",{className:className,style:styles.container},_react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisMetric__resize"},_react2.default.createElement("div",{ref:function ref(el){return _this3.inner=el},className:"tvbVisMetric__inner",style:styles.inner},_react2.default.createElement("div",{className:"tvbVisMetric__primary"},primaryLabel,_react2.default.createElement("div",{style:styles.primary_value,"data-test-subj":"tsvbMetricValue",className:"tvbVisMetric__value--primary"},primaryValue)),secondarySnippet,additionalLabel)))}}]);return Metric}(_react.Component);Metric.propTypes={backgroundColor:_propTypes2.default.string,metric:_propTypes2.default.object,secondary:_propTypes2.default.object,reversed:_propTypes2.default.bool,additionalLabel:_propTypes2.default.string};exports.default=Metric;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=calcDimensions;function calcDimensions(el,scale){var newWidth=Math.floor(el.clientWidth*scale);var newHeight=Math.floor(el.clientHeight*scale);return[newWidth,newHeight]}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _top_n=__webpack_require__(1005);var _top_n2=_interopRequireDefault(_top_n);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color2=__webpack_require__(95);var _color3=_interopRequireDefault(_color2);var _replace_vars=__webpack_require__(234);var _replace_vars2=_interopRequireDefault(_replace_vars);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OPERATORS={gt:_lodash.gt,gte:_lodash.gte,lt:_lodash.lt,lte:_lodash.lte};function sortByDirection(data,direction,fn){if(direction==="desc"){return(0,_lodash.sortBy)(data,fn).reverse()}return(0,_lodash.sortBy)(data,fn)}function sortSeries(visData,model){var series=(0,_lodash.get)(visData,model.id+".series",[]);return model.series.reduce(function(acc,item){var itemSeries=series.filter(function(s){var id=(0,_lodash.first)(s.id.split(/:/));return id===item.id});var direction=item.terms_direction||"desc";if(item.terms_order_by==="_term")return acc.concat(itemSeries);return acc.concat(sortByDirection(itemSeries,direction,function(s){return(0,_get_last_value2.default)(s.data)}))},[])}function TopNVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var series=sortSeries(visData,model).map(function(item){var id=(0,_lodash.first)(item.id.split(/:/));var seriesConfig=model.series.find(function(s){return s.id===id});if(seriesConfig){var formatter=(0,_tick_formatter2.default)(seriesConfig.formatter,seriesConfig.value_template,props.getConfig);var value=(0,_get_last_value2.default)(item.data);var _color=item.color||seriesConfig.color;if(model.bar_color_rules){model.bar_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null&&rule.bar_color){if(OPERATORS[rule.operator](value,rule.value)){_color=rule.bar_color}}})}return _extends({},item,{color:_color,tickFormatter:formatter})}return item});var params={series:series,reversed:props.reversed};var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor&&panelBackgroundColor!=="inherit"){params.reversed=(0,_color3.default)(panelBackgroundColor).luminosity()<.45}if(model.drilldown_url){params.onClick=function(item){window.location=(0,_replace_vars2.default)(model.drilldown_url,{},{key:item.label})}}var style={backgroundColor:panelBackgroundColor};return _react2.default.createElement("div",{className:"tvbVis",style:style},_react2.default.createElement(_top_n2.default,params))}TopNVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,getConfig:_propTypes2.default.func};exports.default=TopNVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TopN=function(_Component){_inherits(TopN,_Component);function TopN(){_classCallCheck(this,TopN);return _possibleConstructorReturn(this,(TopN.__proto__||Object.getPrototypeOf(TopN)).apply(this,arguments))}_createClass(TopN,[{key:"handleClick",value:function handleClick(item){var _this2=this;return function(){if(_this2.props.onClick){_this2.props.onClick(item)}}}},{key:"renderRow",value:function renderRow(maxValue){var _this3=this;return function(item){var key=""+(item.id||item.label);var lastValue=(0,_get_last_value2.default)(item.data);var formatter=item.tickFormatter||_this3.props.tickFormatter;var value=formatter(lastValue);var width=100*(lastValue/maxValue)+"%";var backgroundColor=item.color;var styles=(0,_reactcss2.default)({default:{innerBar:{width:width,backgroundColor:backgroundColor}},onClick:{row:{cursor:"pointer"}}},_this3.props);return _react2.default.createElement("tr",{key:key,onClick:_this3.handleClick(_extends({lastValue:lastValue},item)),style:styles.row},_react2.default.createElement("td",{width:"1*",className:"tvbVisTopN__label"},item.label),_react2.default.createElement("td",{width:"100%",className:"tvbVisTopN__bar"},_react2.default.createElement("div",{className:"tvbVisTopN__innerBar",style:styles.innerBar})),_react2.default.createElement("td",{width:"1*",className:"tvbVisTopN__value","data-test-subj":"tsvbTopNValue"},value))}}},{key:"render",value:function render(){if(!this.props.series)return null;var maxValue=this.props.series.reduce(function(max,series){var lastValue=(0,_get_last_value2.default)(series.data);return lastValue>max?lastValue:max},0);var rows=this.props.series.map(this.renderRow(maxValue));var className="tvbVisTopN";if(this.props.reversed){className+=" tvbVisTopN--reversed"}return _react2.default.createElement("div",{className:className},_react2.default.createElement("table",{className:"tvbVisTopN__table"},_react2.default.createElement("tbody",null,rows)))}}]);return TopN}(_react.Component);TopN.defaultProps={tickFormatter:function tickFormatter(n){return n},onClick:function onClick(i){return i},direction:"desc"};TopN.propTypes={tickFormatter:_propTypes2.default.func,onClick:_propTypes2.default.func,series:_propTypes2.default.array,reversed:_propTypes2.default.bool,direction:_propTypes2.default.string};exports.default=TopN;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _calculate_label=__webpack_require__(293);var _calculate_label2=_interopRequireDefault(_calculate_label);var _is_sortable=__webpack_require__(1007);var _eui=__webpack_require__(2);var _replace_vars=__webpack_require__(234);var _replace_vars2=_interopRequireDefault(_replace_vars);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function getColor(rules,colorKey,value){var color=void 0;if(rules){rules.forEach(function(rule){if(rule.operator&&rule.value!=null){if(_lodash2.default[rule.operator](value,rule.value)){color=rule[colorKey]}}})}return color}var TableVis=function(_Component){_inherits(TableVis,_Component);function TableVis(props){_classCallCheck(this,TableVis);var _this=_possibleConstructorReturn(this,(TableVis.__proto__||Object.getPrototypeOf(TableVis)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(TableVis,[{key:"renderRow",value:function renderRow(row){var _this2=this;var model=this.props.model;var rowId=row.key;var rowDisplay=rowId;if(model.drilldown_url){var url=(0,_replace_vars2.default)(model.drilldown_url,{},{key:row.key});rowDisplay=_react2.default.createElement("a",{href:url},rowDisplay)}var columns=row.series.filter(function(item){return item}).map(function(item){var column=model.series.find(function(c){return c.id===item.id});if(!column)return null;var formatter=(0,_tick_formatter2.default)(column.formatter,column.value_template,_this2.props.getConfig);var value=formatter(item.last);var trend=void 0;if(column.trend_arrows){var trendIcon=item.slope>0?"sortUp":"sortDown";trend=_react2.default.createElement("span",null,"  ",_react2.default.createElement(_eui.EuiIcon,{type:trendIcon,color:"subdued"}))}var style={color:getColor(column.color_rules,"text",item.last)};return _react2.default.createElement("td",{key:rowId+"-"+item.id,"data-test-subj":"tvbTableVis__value",className:"eui-textRight",style:style},_react2.default.createElement("span",null,value),trend)});return _react2.default.createElement("tr",{key:rowId},_react2.default.createElement("td",null,rowDisplay),columns)}},{key:"renderHeader",value:function renderHeader(){var _props=this.props,model=_props.model,uiState=_props.uiState,onUiState=_props.onUiState;var stateKey=model.type+".sort";var sort=uiState.get(stateKey,{column:"_default_",order:"asc"});var columns=model.series.map(function(item){var metric=_lodash2.default.last(item.metrics);var label=item.label||(0,_calculate_label2.default)(metric,item.metrics);var handleClick=function handleClick(){if(!(0,_is_sortable.isSortable)(metric))return;var order=void 0;if(sort.column===item.id){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:item.id,order:order})};var sortComponent=void 0;if((0,_is_sortable.isSortable)(metric)){var _sortIcon=void 0;if(sort.column===item.id){_sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{_sortIcon="empty"}sortComponent=_react2.default.createElement(_eui.EuiIcon,{type:_sortIcon})}var headerContent=_react2.default.createElement("span",null,label," ",sortComponent);if(!(0,_is_sortable.isSortable)(metric)){headerContent=_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.columnNotSortableTooltip",defaultMessage:"This column is not sortable"})},headerContent)}return _react2.default.createElement("th",{onClick:handleClick,key:item.id,scope:"col"},headerContent)});var label=model.pivot_label||model.pivot_field||model.pivot_id;var sortIcon=void 0;if(sort.column==="_default_"){sortIcon=sort.order==="asc"?"sortUp":"sortDown"}else{sortIcon="empty"}var sortComponent=_react2.default.createElement(_eui.EuiIcon,{type:sortIcon});var handleSortClick=function handleSortClick(){var order=void 0;if(sort.column==="_default_"){order=sort.order==="asc"?"desc":"asc"}else{order="asc"}onUiState(stateKey,{column:"_default_",order:order})};return _react2.default.createElement("tr",null,_react2.default.createElement("th",{className:"eui-textLeft",scope:"col",onClick:handleSortClick},label," ",sortComponent),columns)}},{key:"render",value:function render(){var _props2=this.props,visData=_props2.visData,model=_props2.model;var header=this.renderHeader();var rows=void 0;var reversedClass="";if(this.props.reversed){reversedClass="reversed"}if(_lodash2.default.isArray(visData.series)&&visData.series.length){rows=visData.series.map(this.renderRow)}else{var message=model.pivot_id?_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.noResultsAvailableMessage",defaultMessage:"No results available."}):_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.noResultsAvailableWithDescriptionMessage",defaultMessage:"No results available. You must choose a group by field for this visualization."});rows=_react2.default.createElement("tr",null,_react2.default.createElement("td",{colSpan:model.series.length+1},message))}return _react2.default.createElement("div",{className:"tvbVis "+reversedClass,"data-test-subj":"tableView"},_react2.default.createElement("table",{className:"table"},_react2.default.createElement("thead",null,header),_react2.default.createElement("tbody",null,rows)))}}]);return TableVis}(_react.Component);TableVis.defaultProps={sort:{}};TableVis.propTypes={visData:_propTypes2.default.object,model:_propTypes2.default.object,backgroundColor:_propTypes2.default.string,onPaginate:_propTypes2.default.func,onUiState:_propTypes2.default.func,uiState:_propTypes2.default.object,pageNumber:_propTypes2.default.number,reversed:_propTypes2.default.bool,getConfig:_propTypes2.default.func};exports.default=TableVis;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isSortable=isSortable;var _basic_aggs=__webpack_require__(438);var _basic_aggs2=_interopRequireDefault(_basic_aggs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isSortable(metric){return _basic_aggs2.default.includes(metric.type)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _vis_with_splits=__webpack_require__(436);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _gauge=__webpack_require__(1009);var _gauge2=_interopRequireDefault(_gauge);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _color=__webpack_require__(95);var _color2=_interopRequireDefault(_color);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getColors(props){var model=props.model,visData=props.visData;var series=_lodash2.default.get(visData,model.id+".series",[]);var text=void 0;var gauge=void 0;if(model.gauge_color_rules){model.gauge_color_rules.forEach(function(rule){if(rule.operator&&rule.value!=null){var value=series[0]&&(0,_get_last_value2.default)(series[0].data)||series[1]&&(0,_get_last_value2.default)(series[1].data)||0;if(_lodash2.default[rule.operator](value,rule.value)){gauge=rule.gauge;text=rule.text}}})}return{text:text,gauge:gauge}}function GaugeVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData;var colors=getColors(props);var series=_lodash2.default.get(visData,model.id+".series",[]).filter(function(row){return row}).map(function(row,i){var seriesDef=model.series.find(function(s){return _lodash2.default.includes(row.id,s.id)});var newProps={};if(seriesDef){newProps.formatter=(0,_tick_formatter2.default)(seriesDef.formatter,seriesDef.value_template,props.getConfig)}if(i===0&&colors.gauge)newProps.color=colors.gauge;return _lodash2.default.assign({},row,newProps)});var params={metric:series[0],type:model.gauge_style||"half",reversed:props.reversed,additionalLabel:props.additionalLabel};if(colors.text){params.valueColor=colors.text}if(model.gauge_width)params.gaugeLine=model.gauge_width;if(model.gauge_inner_color)params.innerColor=model.gauge_inner_color;if(model.gauge_inner_width)params.innerLine=model.gauge_inner_width;if(model.gauge_max!=null)params.max=model.gauge_max;var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor&&panelBackgroundColor!=="inherit"){params.reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45}var style={backgroundColor:panelBackgroundColor};return _react2.default.createElement("div",{className:"tvbVis",style:style},_react2.default.createElement(_gauge2.default,params))}GaugeVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,additionalLabel:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,getConfig:_propTypes2.default.func};exports.default=(0,_vis_with_splits.visWithSplits)(GaugeVisualization);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _get_last_value=__webpack_require__(62);var _get_last_value2=_interopRequireDefault(_get_last_value);var _get_value_by=__webpack_require__(1010);var _get_value_by2=_interopRequireDefault(_get_value_by);var _gauge_vis=__webpack_require__(1011);var _gauge_vis2=_interopRequireDefault(_gauge_vis);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(294);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Gauge=function(_Component){_inherits(Gauge,_Component);function Gauge(props){_classCallCheck(this,Gauge);var _this=_possibleConstructorReturn(this,(Gauge.__proto__||Object.getPrototypeOf(Gauge)).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(Gauge,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,metric=_props.metric,type=_props.type;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var value=metric&&(0,_get_last_value2.default)(metric.data)||0;var max=metric&&(0,_get_value_by2.default)("max",metric.data)||1;var formatter=metric&&(metric.tickFormatter||metric.formatter)||this.props.tickFormatter||function(v){return v};var title=metric&&metric.label||"";var styles=(0,_reactcss2.default)({default:{inner:{top:this.state.top||0,left:this.state.left||0,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"}},valueColor:{value:{color:this.props.valueColor}}},this.props);var gaugeProps={reversed:this.props.reversed,value:value,gaugeLine:this.props.gaugeLine,innerLine:this.props.innerLine,innerColor:this.props.innerColor,max:this.props.max||max,color:metric&&metric.color||"#8ac336",type:type};var metrics=void 0;var additionalLabel=void 0;if(this.props.additionalLabel){additionalLabel=_react2.default.createElement("div",{className:"tvbVisGauge__additionalLabel"},this.props.additionalLabel)}if(type==="half"){metrics=_react2.default.createElement("div",{className:"tvbVisHalfGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react2.default.createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),_react2.default.createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),additionalLabel)}else{metrics=_react2.default.createElement("div",{className:"tvbVisCircleGauge__metrics",ref:function ref(el){return _this3.inner=el},style:styles.inner},_react2.default.createElement("div",{className:"tvbVisGauge__value",style:styles.value,ref:"label"},formatter(value)),_react2.default.createElement("div",{className:"tvbVisGauge__label",ref:"title"},title),additionalLabel)}var className=type==="half"?"tvbVisHalfGauge":"tvbVisCircleGauge";if(this.props.reversed)className=className+" tvbVisGauge--reversed";return _react2.default.createElement("div",{className:className},_react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},className:"tvbVisGauge__resize"},metrics,_react2.default.createElement(_gauge_vis2.default,gaugeProps)))}}]);return Gauge}(_react.Component);Gauge.defaultProps={type:"half",innerLine:2,gaugeLine:10};Gauge.propTypes={gaugeLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerColor:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),max:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),metric:_propTypes2.default.object,reversed:_propTypes2.default.bool,type:_propTypes2.default.oneOf(["half","circle"]),valueColor:_propTypes2.default.string,additionalLabel:_propTypes2.default.string};exports.default=Gauge;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(fn,data){if(_lodash2.default.isNumber(data))return data;if(!Array.isArray(data))return 0;var values=data.map(function(v){return v[1]});return _lodash2.default[fn](values)};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _reactcss=__webpack_require__(56);var _reactcss2=_interopRequireDefault(_reactcss);var _calculate_coordinates=__webpack_require__(294);var _calculate_coordinates2=_interopRequireDefault(_calculate_coordinates);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GaugeVis=function(_Component){_inherits(GaugeVis,_Component);function GaugeVis(props){_classCallCheck(this,GaugeVis);var _this=_possibleConstructorReturn(this,(GaugeVis.__proto__||Object.getPrototypeOf(GaugeVis)).call(this,props));_this.state={scale:1,top:0,left:0,translateX:1,translateY:1};_this.handleResize=_this.handleResize.bind(_this);return _this}_createClass(GaugeVis,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var check=function check(){_this2.timeout=setTimeout(function(){var newState=(0,_calculate_coordinates2.default)(_this2.inner,_this2.resize,_this2.state);if(newState&&_this2.state&&!_lodash2.default.isEqual(newState,_this2.state)){_this2.handleResize()}check()},500)};check()}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"componentDidMount",value:function componentDidMount(){this.handleResize()}},{key:"handleResize",value:function handleResize(){var newState=(0,_calculate_coordinates2.default)(this.inner,this.resize,this.state);this.setState(newState)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,type=_props.type,value=_props.value,max=_props.max,color=_props.color;var _state=this.state,scale=_state.scale,translateX=_state.translateX,translateY=_state.translateY;var size=2*Math.PI*50;var sliceSize=type==="half"?.6:1;var percent=value<max?value/max:1;var styles=(0,_reactcss2.default)({default:{resize:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto",overflow:"hidden"},svg:{position:"absolute",top:this.state.top,left:this.state.left,transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"},innerLine:{strokeWidth:this.props.innerLine},gaugeLine:{strokeWidth:this.props.gaugeLine}},half:{svg:{transform:"matrix("+scale+", 0, 0, "+scale+", "+translateX+", "+translateY+")"}}},{half:type==="half"});var props={circle:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:color,strokeWidth:this.props.gaugeLine,strokeDasharray:percent*sliceSize*size+" "+size,transform:"rotate(-90 60 60)"},circleBackground:{r:50,cx:60,cy:60,fill:"rgba(0,0,0,0)",stroke:this.props.reversed?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)",strokeDasharray:sliceSize*size+" "+size,strokeWidth:this.props.innerLine}};if(type==="half"){props.circle.transform="rotate(-197.8 60 60)";props.circleBackground.transform="rotate(162 60 60)"}if(this.props.innerColor){props.circleBackground.stroke=this.props.innerColor}var svg=void 0;if(type==="half"){svg=_react2.default.createElement("svg",{width:120.72,height:78.72},_react2.default.createElement("circle",_extends({},props.circleBackground,{style:styles.innerLine})),_react2.default.createElement("circle",_extends({},props.circle,{style:styles.gaugeLine})))}else{svg=_react2.default.createElement("svg",{width:120.72,height:120.72},_react2.default.createElement("circle",props.circleBackground),_react2.default.createElement("circle",props.circle))}return _react2.default.createElement("div",{ref:function ref(el){return _this3.resize=el},style:styles.resize},_react2.default.createElement("div",{style:styles.svg,ref:function ref(el){return _this3.inner=el}},svg))}}]);return GaugeVis}(_react.Component);GaugeVis.defaultProps={innerLine:2,gaugeLine:10};GaugeVis.propTypes={color:_propTypes2.default.string,gaugeLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerColor:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),innerLine:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),max:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),metric:_propTypes2.default.object,reversed:_propTypes2.default.bool,value:_propTypes2.default.number,type:_propTypes2.default.oneOf(["half","circle"])};exports.default=GaugeVis;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _color=__webpack_require__(95);var _color2=_interopRequireDefault(_color);var _reactMarkdown=__webpack_require__(387);var _reactMarkdown2=_interopRequireDefault(_reactMarkdown);var _replace_vars=__webpack_require__(234);var _replace_vars2=_interopRequireDefault(_replace_vars);var _convert_series_to_vars=__webpack_require__(439);var _convert_series_to_vars2=_interopRequireDefault(_convert_series_to_vars);var _error=__webpack_require__(440);var _error2=_interopRequireDefault(_error);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getMarkdownId=function getMarkdownId(id){return"markdown-"+id};function MarkdownVisualization(props){var backgroundColor=props.backgroundColor,model=props.model,visData=props.visData,dateFormat=props.dateFormat;var series=_lodash2.default.get(visData,model.id+".series",[]);var variables=(0,_convert_series_to_vars2.default)(series,model,dateFormat,props.getConfig);var style={};var markdownElementId=getMarkdownId(_uuid2.default.v1());var reversed=props.reversed;var panelBackgroundColor=model.background_color||backgroundColor;if(panelBackgroundColor){style.backgroundColor=panelBackgroundColor;reversed=(0,_color2.default)(panelBackgroundColor).luminosity()<.45}var markdown=void 0;var markdownCss="";if(model.markdown){var markdownSource=(0,_replace_vars2.default)(model.markdown,{},_extends({_all:variables},variables));if(model.markdown_css){markdownCss=model.markdown_css.replace(new RegExp(getMarkdownId(model.id),"g"),markdownElementId)}var className="tvbMarkdown";var contentClassName="tvbMarkdown__content "+model.markdown_vertical_align;if(model.markdown_scrollbars)contentClassName+=" scrolling";if(reversed)className+=" reversed";var markdownError=markdownSource instanceof Error?markdownSource:null;markdown=_react2.default.createElement("div",{className:className,"data-test-subj":"tsvbMarkdown"},markdownError&&_react2.default.createElement(_error2.default,{error:markdownError}),_react2.default.createElement("style",{type:"text/css"},markdownCss),_react2.default.createElement("div",{className:contentClassName},_react2.default.createElement("div",{id:markdownElementId},!markdownError&&_react2.default.createElement(_reactMarkdown2.default,{escapeHtml:true,source:markdownSource}))))}return _react2.default.createElement("div",{className:"tvbVis",style:style},markdown)}MarkdownVisualization.propTypes={backgroundColor:_propTypes2.default.string,className:_propTypes2.default.string,model:_propTypes2.default.object,onBrush:_propTypes2.default.func,onChange:_propTypes2.default.func,reversed:_propTypes2.default.bool,visData:_propTypes2.default.object,dateFormat:_propTypes2.default.string,getConfig:_propTypes2.default.func};exports.default=MarkdownVisualization;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoDataComponent(){return _react2.default.createElement("div",{className:"tvbNoData","data-test-subj":"noTSVBDataMessage"},_react2.default.createElement("div",{className:"tvbNoData__title"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.noDataDescription",defaultMessage:"No data to display for the selected metrics"})))}exports.default=NoDataComponent;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function VisPickerItem(props){var label=props.label,type=props.type,selected=props.selected;var itemClassName="tvbVisPickerItem";return _react2.default.createElement(_eui.EuiTab,{className:itemClassName,isSelected:selected,onClick:function onClick(){return props.onClick(type)},"data-test-subj":type+"TsvbTypeBtn"},label)}VisPickerItem.propTypes={label:_propTypes2.default.string,onClick:_propTypes2.default.func,type:_propTypes2.default.string,selected:_propTypes2.default.bool};var VisPicker=(0,_react3.injectI18n)(function(props){var handleChange=function handleChange(type){props.onChange({type:type})};var model=props.model,intl=props.intl;var tabs=[{type:"timeseries",label:intl.formatMessage({id:"tsvb.visPicker.timeSeriesLabel",defaultMessage:"Time Series"})},{type:"metric",label:intl.formatMessage({id:"tsvb.visPicker.metricLabel",defaultMessage:"Metric"})},{type:"top_n",label:intl.formatMessage({id:"tsvb.visPicker.topNLabel",defaultMessage:"Top N"})},{type:"gauge",label:intl.formatMessage({id:"tsvb.visPicker.gaugeLabel",defaultMessage:"Gauge"})},{type:"markdown",label:"Markdown"},{type:"table",label:intl.formatMessage({id:"tsvb.visPicker.tableLabel",defaultMessage:"Table"})}].map(function(item){return _react2.default.createElement(VisPickerItem,_extends({key:item.type,onClick:handleChange,selected:item.type===model.type},item))});return _react2.default.createElement(_eui.EuiTabs,null,tabs)});VisPicker.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=VisPicker;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _timeseries=__webpack_require__(1016);var _timeseries2=_interopRequireDefault(_timeseries);var _metric=__webpack_require__(1065);var _metric2=_interopRequireDefault(_metric);var _top_n=__webpack_require__(1066);var _top_n2=_interopRequireDefault(_top_n);var _table=__webpack_require__(1067);var _table2=_interopRequireDefault(_table);var _gauge=__webpack_require__(1068);var _gauge2=_interopRequireDefault(_gauge);var _markdown=__webpack_require__(1069);var _markdown2=_interopRequireDefault(_markdown);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var types={timeseries:_timeseries2.default,table:_table2.default,metric:_metric2.default,top_n:_top_n2.default,gauge:_gauge2.default,markdown:_markdown2.default};function PanelConfig(props){var model=props.model;var component=types[model.type];if(component){return _react2.default.createElement(component,props)}return _react2.default.createElement("div",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.missingPanelConfigDescription",defaultMessage:"Missing panel config for “{modelType}”",values:{modelType:model.type}}))}PanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,dateFormat:_propTypes2.default.string,visData$:_propTypes2.default.object};exports.default=PanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _annotations_editor=__webpack_require__(1063);var _annotations_editor2=_interopRequireDefault(_annotations_editor);var _index_pattern=__webpack_require__(63);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TimeseriesPanelConfigUi=function(_Component){_inherits(TimeseriesPanelConfigUi,_Component);function TimeseriesPanelConfigUi(props){_classCallCheck(this,TimeseriesPanelConfigUi);var _this=_possibleConstructorReturn(this,(TimeseriesPanelConfigUi.__proto__||Object.getPrototypeOf(TimeseriesPanelConfigUi)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TimeseriesPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var defaults={filter:"",axis_max:"",axis_min:"",legend_position:"right",show_grid:1};var model=_extends({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.positionOptions.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedPositionOption=positionOptions.find(function(option){return model.axis_position===option.value});var scaleOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.normalLabel",defaultMessage:"Normal"}),value:"normal"},{label:intl.formatMessage({id:"tsvb.timeseries.scaleOptions.logLabel",defaultMessage:"Log"}),value:"log"}];var selectedAxisScaleOption=scaleOptions.find(function(option){return model.axis_scale===option.value});var legendPositionOptions=[{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.leftLabel",defaultMessage:"Left"}),value:"left"},{label:intl.formatMessage({id:"tsvb.timeseries.legendPositionOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedLegendPosOption=legendPositionOptions.find(function(option){return model.legend_position===option.value});var view=void 0;if(selectedTab==="data"){view=_react2.default.createElement(_series_editor2.default,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else if(selectedTab==="annotations"){view=_react2.default.createElement(_annotations_editor2.default,{fields:this.props.fields,model:this.props.model,name:"annotations",onChange:this.props.onChange})}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.styleLabel",defaultMessage:"Style"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMinLabel",defaultMessage:"Axis min"})},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisMaxLabel",defaultMessage:"Axis max"})},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisPositionLabel",defaultMessage:"Axis position"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:positionOptions,selectedOptions:selectedPositionOption?[selectedPositionOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisScale"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.axisScaleLabel",defaultMessage:"Axis scale"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:scaleOptions,selectedOptions:selectedAxisScaleOption?[selectedAxisScaleOption]:[],onChange:handleSelectChange("axis_scale"),singleSelection:{asPlainText:true}})))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.showLegendLabel",defaultMessage:"Show legend?"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_yes_no2.default,{value:model.show_legend,name:"show_legend",onChange:this.props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("legendPos")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.legendPositionLabel",defaultMessage:"Legend position"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("legendPos"),options:legendPositionOptions,selectedOptions:selectedLegendPosOption?[selectedLegendPosOption]:[],onChange:handleSelectChange("legend_position"),singleSelection:{asPlainText:true}})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.displayGridLabel",defaultMessage:"Display grid"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_yes_no2.default,{value:model.show_grid,name:"show_grid",onChange:this.props.onChange})))))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="annotations",onClick:function onClick(){return _this2.switchTab("annotations")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeseries.annotationsTab.annotationsButtonLabel",defaultMessage:"Annotations"}))),view)}}]);return TimeseriesPanelConfigUi}(_react.Component);TimeseriesPanelConfigUi.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};var TimeseriesPanelConfig=(0,_react3.injectI18n)(TimeseriesPanelConfigUi);exports.default=TimeseriesPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(source){var series=_lodash2.default.cloneDeep(source);series.id=_uuid2.default.v1();series.metrics.forEach(function(metric){var id=_uuid2.default.v1();var metricId=metric.id;metric.id=id;if(series.terms_order_by===metricId)series.terms_order_by=id;series.metrics.filter(function(r){return r.field===metricId}).forEach(function(r){return r.field=id});series.metrics.filter(function(r){return r.type==="calculation"&&r.variables.some(function(v){return v.field===metricId})}).forEach(function(r){r.variables.filter(function(v){return v.field===metricId}).forEach(function(v){v.id=_uuid2.default.v1();v.field=id})})});return series};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _series=__webpack_require__(1019);var _series2=_interopRequireDefault(_series);var _series3=__webpack_require__(1056);var _series4=_interopRequireDefault(_series3);var _series5=__webpack_require__(1057);var _series6=_interopRequireDefault(_series5);var _series7=__webpack_require__(1058);var _series8=_interopRequireDefault(_series7);var _series9=__webpack_require__(1060);var _series10=_interopRequireDefault(_series9);var _series11=__webpack_require__(1061);var _series12=_interopRequireDefault(_series11);var _reactAnythingSortable=__webpack_require__(57);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var lookup={top_n:_series6.default,table:_series8.default,metric:_series4.default,timeseries:_series2.default,gauge:_series10.default,markdown:_series12.default};var Series=function(_Component){_inherits(Series,_Component);function Series(props){_classCallCheck(this,Series);var _this=_possibleConstructorReturn(this,(Series.__proto__||Object.getPrototypeOf(Series)).call(this,props));_this.state={visible:true,selectedTab:"metrics"};_this.handleChange=_this.handleChange.bind(_this);_this.switchTab=_this.switchTab.bind(_this);_this.toggleVisible=_this.toggleVisible.bind(_this);return _this}_createClass(Series,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleChange",value:function handleChange(part){if(this.props.onChange){var model=this.props.model;var doc=_lodash2.default.assign({},model,part);this.props.onChange(doc)}}},{key:"toggleVisible",value:function toggleVisible(e){e.preventDefault();this.setState({visible:!this.state.visible})}},{key:"render",value:function render(){var panel=this.props.panel;var Component=lookup[panel.type];if(Component){var params={className:this.props.className,disableAdd:this.props.disableAdd,disableDelete:this.props.disableDelete,fields:this.props.fields,name:this.props.name,onAdd:this.props.onAdd,onChange:this.handleChange,onClone:this.props.onClone,onDelete:this.props.onDelete,onMouseDown:this.props.onMouseDown,onTouchStart:this.props.onTouchStart,onShouldSortItem:this.props.onShouldSortItem,onSortableItemMount:this.props.onSortableItemMount,onSortableItemReadyToMove:this.props.onSortableItemReadyToMove,model:this.props.model,panel:this.props.panel,selectedTab:this.state.selectedTab,sortData:this.props.sortData,style:this.props.style,switchTab:this.switchTab,toggleVisible:this.toggleVisible,visible:this.state.visible};return _react2.default.createElement(Component,params)}return _react2.default.createElement("div",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesConfig.missingSeriesComponentDescription",defaultMessage:"Missing Series component for panel type: {panelType}",values:{panelType:panel.type}}))}}]);return Series}(_react.Component);Series.defaultProps={name:"metrics"};Series.propTypes={className:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onShouldSortItem:_propTypes2.default.func.isRequired,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,sortData:_propTypes2.default.string};exports.default=(0,_reactAnythingSortable.sortable)(Series);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _config=__webpack_require__(1028);var _config2=_interopRequireDefault(_config);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _eui=__webpack_require__(2);var _split=__webpack_require__(106);var _split2=_interopRequireDefault(_split);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(107);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimeseriesSeries=(0,_react3.injectI18n)(function(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,onChange=props.onChange,visible=props.visible,intl=props.intl;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs),_react2.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model})))}else{seriesBody=_react2.default.createElement(_config2.default,{fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.tab.metricsLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.dragToSortLabel",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbSeries__sortHandle",iconType:"grab","aria-label":intl.formatMessage({id:"tsvb.timeSeries.dragToSortAriaLabel",defaultMessage:"Sort series by pressing up/down"}),onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)})))}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.timeSeries.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.timeSeries.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.timeSeries.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.timeSeries.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.timeSeries.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});TimeseriesSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onShouldSortItem:_propTypes2.default.func.isRequired,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=(0,_react3.injectI18n)(TimeseriesSeries);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomColorPicker=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _common=__webpack_require__(1024);var _ChromeFields=__webpack_require__(1025);var _ChromeFields2=_interopRequireDefault(_ChromeFields);var _ChromePointer=__webpack_require__(1026);var _ChromePointer2=_interopRequireDefault(_ChromePointer);var _ChromePointerCircle=__webpack_require__(1027);var _ChromePointerCircle2=_interopRequireDefault(_ChromePointerCircle);var _CompactColor=__webpack_require__(1070);var _CompactColor2=_interopRequireDefault(_CompactColor);var _color=__webpack_require__(1072);var _color2=_interopRequireDefault(_color);var _reactAddonsShallowCompare=__webpack_require__(1073);var _reactAddonsShallowCompare2=_interopRequireDefault(_reactAddonsShallowCompare);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CustomColorPicker=exports.CustomColorPicker=function(_Component){_inherits(CustomColorPicker,_Component);function CustomColorPicker(props){_classCallCheck(this,CustomColorPicker);var _this=_possibleConstructorReturn(this,(CustomColorPicker.__proto__||Object.getPrototypeOf(CustomColorPicker)).call(this,props));_this.handleChange=_this.handleChange.bind(_this);return _this}_createClass(CustomColorPicker,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return(0,_reactAddonsShallowCompare2.default)(nextProps,nextState)}},{key:"handleChange",value:function handleChange(data){this.props.onChange(data)}},{key:"render",value:function render(){var _this2=this;var rgb=this.props.rgb;var styles={active:{background:"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", "+rgb.a+")"},Saturation:{radius:"2px 2px 0 0 "},Hue:{radius:"2px"},Alpha:{radius:"2px"}};var handleSwatchChange=function handleSwatchChange(data){if(data.hex){_color2.default.isValidHex(data.hex)&&_this2.props.onChange({hex:data.hex,source:"hex"})}else{_this2.props.onChange(data)}};var swatches=this.props.colors.map(function(c){return _react2.default.createElement(_CompactColor2.default,{key:c,color:c,onClick:handleSwatchChange})});return _react2.default.createElement("div",{className:"tvbColorPickerPopUp"},_react2.default.createElement("div",{className:"tvbColorPickerPopUp__saturation"},_react2.default.createElement(_common.Saturation,_extends({style:styles.Saturation},this.props,{pointer:_ChromePointerCircle2.default,onChange:this.handleChange}))),_react2.default.createElement("div",{className:"tvbColorPickerPopUp__body"},_react2.default.createElement("div",{className:"tvbColorPickerPopUp__controls"},_react2.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__color-disableAlpha":"tvbColorPickerPopUp__color"},_react2.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__swatch-disableAlpha":"tvbColorPickerPopUp__swatch"},_react2.default.createElement("div",{className:"tvbColorPickerPopUp__active"}),_react2.default.createElement(_common.Checkboard,null))),_react2.default.createElement("div",{className:"tvbColorPickerPopUp__toggles"},_react2.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__hue-disableAlpha":"tvbColorPickerPopUp__hue"},_react2.default.createElement(_common.Hue,_extends({style:styles.Hue},this.props,{pointer:_ChromePointer2.default,onChange:this.handleChange}))),_react2.default.createElement("div",{className:this.props.disableAlpha?"tvbColorPickerPopUp__alpha-disableAlpha":"tvbColorPickerPopUp__alpha"},_react2.default.createElement(_common.Alpha,_extends({style:styles.Alpha},this.props,{pointer:_ChromePointer2.default,onChange:this.handleChange}))))),_react2.default.createElement(_ChromeFields2.default,_extends({},this.props,{onChange:this.handleChange,disableAlpha:this.props.disableAlpha})),_react2.default.createElement("div",{className:"tvbColorPickerPopUp__swatches"},swatches)))}}]);return CustomColorPicker}(_react.Component);CustomColorPicker.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#0F1419","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]};CustomColorPicker.propTypes={color:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),onChangeComplete:_propTypes2.default.func,onChange:_propTypes2.default.func};exports.default=(0,_common.ColorWrap)(CustomColorPicker)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2364)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(743)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(774)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(29)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(627)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(628)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(629)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _data_format_picker=__webpack_require__(295);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _index_pattern=__webpack_require__(63);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimeseriesConfig=(0,_react3.injectI18n)(function(props){var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var defaults={fill:"",line_width:"",point_size:"",value_template:"{{value}}",offset_time:"",split_color_mode:"gradient",axis_min:"",axis_max:"",stacked:"none",steps:0};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var intl=props.intl;var stackedOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.noneLabel",defaultMessage:"None"}),value:"none"},{label:intl.formatMessage({id:"tsvb.timeSeries.stackedLabel",defaultMessage:"Stacked"}),value:"stacked"},{label:intl.formatMessage({id:"tsvb.timeSeries.percentLabel",defaultMessage:"Percent"}),value:"percent"}];var selectedStackedOption=stackedOptions.find(function(option){return model.stacked===option.value});var positionOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.rightLabel",defaultMessage:"Right"}),value:"right"},{label:intl.formatMessage({id:"tsvb.timeSeries.leftLabel",defaultMessage:"Left"}),value:"left"}];var selectedAxisPosOption=positionOptions.find(function(option){return model.axis_position===option.value});var chartTypeOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.barLabel",defaultMessage:"Bar"}),value:"bar"},{label:intl.formatMessage({id:"tsvb.timeSeries.lineLabel",defaultMessage:"Line"}),value:"line"}];var selectedChartTypeOption=chartTypeOptions.find(function(option){return model.chart_type===option.value});var splitColorOptions=[{label:intl.formatMessage({id:"tsvb.timeSeries.gradientLabel",defaultMessage:"Gradient"}),value:"gradient"},{label:intl.formatMessage({id:"tsvb.timeSeries.rainbowLabel",defaultMessage:"Rainbow"}),value:"rainbow"}];var selectedSplitColorOption=splitColorOptions.find(function(option){return model.split_color_mode===option.value});var type=void 0;if(model.chart_type==="line"){type=_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.chartTypeLabel",defaultMessage:"Chart type"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stackedLabel",defaultMessage:"Stacked"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react2.default.createElement(_eui.EuiFieldNumber,{step:.1,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.lineWidthLabel",defaultMessage:"Line width"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("pointSize"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.pointSizeLabel",defaultMessage:"Point size"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("point_size"),value:Number(model.point_size)}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartLine.stepsLabel",defaultMessage:"Steps"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.steps,name:"steps",onChange:props.onChange})))}if(model.chart_type==="bar"){type=_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("chartType"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartBar.chartTypeLabel",defaultMessage:"Chart type"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:chartTypeOptions,selectedOptions:selectedChartTypeOption?[selectedChartTypeOption]:[],onChange:handleSelectChange("chart_type"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("stacked"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartBar.stackedLabel",defaultMessage:"Stacked"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:stackedOptions,selectedOptions:selectedStackedOption?[selectedStackedOption]:[],onChange:handleSelectChange("stacked"),singleSelection:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("fill"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartBar.fillLabel",defaultMessage:"Fill (0 to 1)"})},_react2.default.createElement(_eui.EuiFieldNumber,{step:.5,onChange:handleTextChange("fill"),value:Number(model.fill)}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("lineWidth"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.chartBar.lineWidthLabel",defaultMessage:"Line width"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("line_width"),value:Number(model.line_width)}))))}var disableSeparateYaxis=model.separate_axis?false:true;return _react2.default.createElement("div",{className:"tvbAggRow"},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.templateLabel",defaultMessage:"Template"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react2.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("series_filter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true})),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),type,_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("offset"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w, 1d are required values and must not be translated."})},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:handleTextChange("offset_time"),value:model.offset_time}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.hideInLegendLabel",defaultMessage:"Hide in legend"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.hide_in_legend,name:"hide_in_legend",onChange:props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("splitColor"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.splitColorThemeLabel",defaultMessage:"Split color theme"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:splitColorOptions,selectedOptions:selectedSplitColorOption?[selectedSplitColorOption]:[],onChange:handleSelectChange("split_color_mode"),singleSelection:true})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.separateAxisLabel",defaultMessage:"Separate axis?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.separate_axis,name:"separate_axis",onChange:props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMin"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.axisMinLabel",defaultMessage:"Axis min"})},_react2.default.createElement("input",{className:"tvbAgg__input",type:"number",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_min"),value:model.axis_min}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisMax"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.axisMaxLabel",defaultMessage:"Axis max"})},_react2.default.createElement("input",{className:"tvbAgg__input",disabled:disableSeparateYaxis,onChange:handleTextChange("axis_max"),value:model.axis_max}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("axisPos"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.axisPositionLabel",defaultMessage:"Axis position"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,isDisabled:disableSeparateYaxis,options:positionOptions,selectedOptions:selectedAxisPosOption?[selectedAxisPosOption]:[],onChange:handleSelectChange("axis_position"),singleSelection:true})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.timeSeries.overrideIndexPatternLabel",defaultMessage:"Override Index Pattern?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.override_index_pattern,name:"override_index_pattern",onChange:props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_index_pattern.IndexPattern,_extends({},props,{prefix:"series_",disabled:!model.override_index_pattern,"with-interval":true})))))});TimeseriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=TimeseriesConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=byType;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function byType(type){return function(field){switch(type){case"numeric":return _lodash2.default.includes(["number"],field.type);case"string":return _lodash2.default.includes(["string","keyword","text"],field.type);case"date":return _lodash2.default.includes(["date"],field.type);default:return true}}}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByTerms=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _group_by_select=__webpack_require__(235);var _group_by_select2=_interopRequireDefault(_group_by_select);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByTermsUi=function SplitByTermsUi(props){var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(props.onChange);var handleSelectChange=(0,_create_select_handler2.default)(props.onChange);var indexPattern=props.indexPattern,intl=props.intl;var defaults={terms_direction:"desc",terms_size:10,terms_order_by:"_count"};var model=_extends({},defaults,props.model);var metrics=model.metrics;var defaultCount={value:"_count",label:intl.formatMessage({id:"tsvb.splits.terms.defaultCountLabel",defaultMessage:"Doc Count (default)"})};var terms={value:"_term",label:intl.formatMessage({id:"tsvb.splits.terms.termsLabel",defaultMessage:"Terms"})};var dirOptions=[{value:"desc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.descendingLabel",defaultMessage:"Descending"})},{value:"asc",label:intl.formatMessage({id:"tsvb.splits.terms.dirOptions.ascendingLabel",defaultMessage:"Ascending"})}];var selectedDirectionOption=dirOptions.find(function(option){return model.terms_direction===option.value});return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.terms.groupByLabel",defaultMessage:"Group by"})},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("by"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.terms.byLabel",defaultMessage:"By"})},_react2.default.createElement(_field_select2.default,{indexPattern:indexPattern,onChange:handleSelectChange("terms_field"),value:model.terms_field,fields:props.fields})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("top"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.terms.topLabel",defaultMessage:"Top"})},_react2.default.createElement(_eui.EuiFieldNumber,{placeholder:intl.formatMessage({id:"tsvb.splits.terms.sizePlaceholder",defaultMessage:"Size"}),value:Number(model.terms_size),onChange:handleTextChange("terms_size")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.terms.orderByLabel",defaultMessage:"Order by"})},_react2.default.createElement(_metric_select2.default,{metrics:metrics,clearable:false,additionalOptions:[defaultCount,terms],onChange:handleSelectChange("terms_order_by"),restrict:"basic",value:model.terms_order_by}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("direction"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.terms.directionLabel",defaultMessage:"Direction"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:dirOptions,selectedOptions:selectedDirectionOption?[selectedDirectionOption]:[],onChange:handleSelectChange("terms_direction"),singleSelection:true})))))};SplitByTermsUi.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func,indexPattern:_propTypes2.default.string,fields:_propTypes2.default.object};var SplitByTerms=exports.SplitByTerms=(0,_react3.injectI18n)(SplitByTermsUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAncestors(siblings,item){var ancestors=item.id&&[item.id]||[];siblings.forEach(function(sib){if(_lodash2.default.includes(ancestors,sib.field)){ancestors.push(sib.id)}});return ancestors}exports.default=function(siblings,model){var ancestors=getAncestors(siblings,model);return siblings.filter(function(row){return!_lodash2.default.includes(ancestors,row.id)})};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SplitByFilter=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(235);var _group_by_select2=_interopRequireDefault(_group_by_select);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SplitByFilter=exports.SplitByFilter=function SplitByFilter(props){var onChange=props.onChange;var defaults={filter:""};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(onChange);var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.filter.groupByLabel",defaultMessage:"Group by"})},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("query"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.filter.queryStringLabel",defaultMessage:"Query string"})},_react2.default.createElement(_eui.EuiFieldText,{value:model.filter,onChange:handleTextChange("filter")}))))};SplitByFilter.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(235);var _group_by_select2=_interopRequireDefault(_group_by_select);var _filter_items=__webpack_require__(1034);var _filter_items2=_interopRequireDefault(_filter_items);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SplitByFilters(props){var onChange=props.onChange,model=props.model;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.filters.groupByLabel",defaultMessage:"Group by"})},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")})))),_react2.default.createElement(_filter_items2.default,{name:"split_filters",model:model,onChange:onChange}))}SplitByFilters.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=SplitByFilters;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _collection_actions=__webpack_require__(65);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FilterItemsUi=function(_Component){_inherits(FilterItemsUi,_Component);function FilterItemsUi(props){_classCallCheck(this,FilterItemsUi);var _this=_possibleConstructorReturn(this,(FilterItemsUi.__proto__||Object.getPrototypeOf(FilterItemsUi)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(FilterItemsUi,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);handleChange(_lodash2.default.assign({},item,_defineProperty({},name,_lodash2.default.get(e,"value",_lodash2.default.get(e,"target.value")))))}}},{key:"renderRow",value:function renderRow(row,i,items){var _this3=this;var defaults={filter:"",label:""};var model=_extends({},defaults,row);var handleChange=function handleChange(part){var fn=collectionActions.handleChange.bind(null,_this3.props);fn(_lodash2.default.assign({},model,part))};var newFilter=function newFilter(){return{color:_this3.props.model.color,id:_uuid2.default.v1()}};var handleAdd=collectionActions.handleAdd.bind(null,this.props,newFilter);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",className:"tvbAggRow",alignItems:"center",key:model.id},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"tsvb.splits.filterItems.filterPlaceholder",defaultMessage:"Filter"}),"aria-label":intl.formatMessage({id:"tsvb.splits.filterItems.filterAriaLabel",defaultMessage:"Filter"}),onChange:this.handleChange(model,"filter"),value:model.filter,fullWidth:true})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{placeholder:intl.formatMessage({id:"tsvb.splits.filterItems.labelPlaceholder",defaultMessage:"Label"}),"aria-label":intl.formatMessage({id:"tsvb.splits.filterItems.labelAriaLabel",defaultMessage:"Label"}),onChange:this.handleChange(model,"label"),value:model.label,fullWidth:true})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false})))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement("div",null,rows)}}]);return FilterItemsUi}(_react.Component);FilterItemsUi.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func};var FilterItems=(0,_react3.injectI18n)(FilterItemsUi);exports.default=FilterItems;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _group_by_select=__webpack_require__(235);var _group_by_select2=_interopRequireDefault(_group_by_select);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SplitByEverything(props){var onChange=props.onChange,model=props.model;var htmlId=(0,_eui.htmlIdGenerator)();var handleSelectChange=(0,_create_select_handler2.default)(onChange);return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("group"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.splits.everything.groupByLabel",defaultMessage:"Group by"})},_react2.default.createElement(_group_by_select2.default,{value:model.split_mode,onChange:handleSelectChange("split_mode")}))))}SplitByEverything.propTypes={model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=SplitByEverything;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _new_metric_agg_fn=__webpack_require__(296);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);var _agg_lookup=__webpack_require__(437);var _collection_actions=__webpack_require__(65);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(props,items){return function(doc){if(items.length===1&&!(0,_agg_lookup.isBasicAgg)(doc)){_collection_actions.handleAdd.call(null,props,function(){var metric=(0,_new_metric_agg_fn2.default)();metric.type=doc.type;var incompatPipelines=["calculation","series_agg"];if(!_lodash2.default.contains(incompatPipelines,doc.type))metric.field=doc.id;return metric})}else{_collection_actions.handleChange.call(null,props,doc)}}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_to_component=__webpack_require__(1038);var _agg_to_component2=_interopRequireDefault(_agg_to_component);var _reactAnythingSortable=__webpack_require__(57);var _unsupported_agg=__webpack_require__(1055);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Agg(props){var model=props.model;var Component=_agg_to_component2.default[model.type];if(!Component){Component=_unsupported_agg.UnsupportedAgg}var style=_extends({cursor:"default"},props.style);return _react2.default.createElement("div",{className:props.className,style:style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(Component,{fields:props.fields,disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onChange:props.onChange,onDelete:props.onDelete,panel:props.panel,series:props.series,siblings:props.siblings}))}Agg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array,sortData:_propTypes2.default.string};exports.default=(0,_reactAnythingSortable.sortable)(Agg);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _moving_average=__webpack_require__(1039);var _derivative=__webpack_require__(1040);var _calculation=__webpack_require__(1041);var _calculation2=_interopRequireDefault(_calculation);var _std_agg=__webpack_require__(1042);var _std_agg2=_interopRequireDefault(_std_agg);var _percentile=__webpack_require__(1043);var _percentile2=_interopRequireDefault(_percentile);var _cumulative_sum=__webpack_require__(1044);var _cumulative_sum2=_interopRequireDefault(_cumulative_sum);var _std_deviation=__webpack_require__(1045);var _std_sibling=__webpack_require__(1046);var _series_agg=__webpack_require__(1047);var _series_agg2=_interopRequireDefault(_series_agg);var _serial_diff=__webpack_require__(1048);var _positive_only=__webpack_require__(1049);var _filter_ratio=__webpack_require__(1050);var _percentile_rank=__webpack_require__(1051);var _static=__webpack_require__(1052);var _math=__webpack_require__(1053);var _math2=_interopRequireDefault(_math);var _top_hit=__webpack_require__(1054);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={count:_std_agg2.default,avg:_std_agg2.default,max:_std_agg2.default,min:_std_agg2.default,sum:_std_agg2.default,std_deviation:_std_deviation.StandardDeviationAgg,sum_of_squares:_std_agg2.default,variance:_std_agg2.default,avg_bucket:_std_sibling.StandardSiblingAgg,max_bucket:_std_sibling.StandardSiblingAgg,min_bucket:_std_sibling.StandardSiblingAgg,sum_bucket:_std_sibling.StandardSiblingAgg,variance_bucket:_std_sibling.StandardSiblingAgg,sum_of_squares_bucket:_std_sibling.StandardSiblingAgg,std_deviation_bucket:_std_sibling.StandardSiblingAgg,percentile:_percentile2.default,percentile_rank:_percentile_rank.PercentileRankAgg,cardinality:_std_agg2.default,value_count:_std_agg2.default,calculation:_calculation2.default,cumulative_sum:_cumulative_sum2.default,moving_average:_moving_average.MovingAverageAgg,derivative:_derivative.DerivativeAgg,series_agg:_series_agg2.default,serial_diff:_serial_diff.SerialDiffAgg,filter_ratio:_filter_ratio.FilterRatioAgg,positive_only:_positive_only.PositiveOnlyAgg,static:_static.Static,math:_math2.default,top_hit:_top_hit.TopHitAgg};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MovingAverageAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_number_handler=__webpack_require__(442);var _create_number_handler2=_interopRequireDefault(_create_number_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MovingAverageAggUi=function MovingAverageAggUi(props){var siblings=props.siblings,intl=props.intl;var defaults={settings:"",minimize:0,window:"",model:"simple"};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var handleNumberChange=(0,_create_number_handler2.default)(handleChange);var modelOptions=[{label:intl.formatMessage({id:"tsvb.movingAverage.modelOptions.simpleLabel",defaultMessage:"Simple"}),value:"simple"},{label:intl.formatMessage({id:"tsvb.movingAverage.modelOptions.linearLabel",defaultMessage:"Linear"}),value:"linear"},{label:intl.formatMessage({id:"tsvb.movingAverage.modelOptions.exponentiallyWeightedLabel",defaultMessage:"Exponentially Weighted"}),value:"ewma"},{label:intl.formatMessage({id:"tsvb.movingAverage.modelOptions.holtLinearLabel",defaultMessage:"Holt-Linear"}),value:"holt"},{label:intl.formatMessage({id:"tsvb.movingAverage.modelOptions.holtWintersLabel",defaultMessage:"Holt-Winters"}),value:"holt_winters"}];var minimizeOptions=[{label:"True",value:1},{label:"False",value:0}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedModelOption=modelOptions.find(function(option){return model.model===option.value});var selectedMinimizeOption=minimizeOptions.find(function(option){return model.minimize===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.metricLabel",defaultMessage:"Metric"})},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("model"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.modelLabel",defaultMessage:"Model"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:intl.formatMessage({id:"tsvb.movingAverage.model.selectPlaceholder",defaultMessage:"Select"}),options:modelOptions,selectedOptions:selectedModelOption?[selectedModelOption]:[],onChange:handleSelectChange("model"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("windowSize"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.windowSizeLabel",defaultMessage:"Window Size"})},_react2.default.createElement("input",{className:"tvbAgg__input",type:"text",onChange:handleNumberChange("window"),value:model.window}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("minimize"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.minimizeLabel",defaultMessage:"Minimize"})},_react2.default.createElement(_eui.EuiComboBox,{placeholder:intl.formatMessage({id:"tsvb.movingAverage.minimize.selectPlaceholder",defaultMessage:"Select"}),options:minimizeOptions,selectedOptions:selectedMinimizeOption?[selectedMinimizeOption]:[],onChange:handleSelectChange("minimize"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("predict"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.predictLabel",defaultMessage:"Predict"})},_react2.default.createElement("input",{className:"tvbAgg__input",type:"text",onChange:handleNumberChange("predict"),value:model.predict})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,id:htmlId("settings"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.settingsLabel",defaultMessage:"Settings"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.movingAverage.settingsDescription",defaultMessage:"{keyValue} space-delimited",values:{keyValue:_react2.default.createElement(_eui.EuiCode,null,"Key=Value")}}))},_react2.default.createElement(_eui.EuiTextArea,{onChange:handleTextChange("settings"),value:model.settings,fullWidth:true}))))};MovingAverageAggUi.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};var MovingAverageAgg=exports.MovingAverageAgg=(0,_react3.injectI18n)(MovingAverageAggUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DerivativeAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DerivativeAgg=exports.DerivativeAgg=function DerivativeAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.derivative.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type"),fullWidth:true})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.derivative.metricLabel",defaultMessage:"Metric"}),fullWidth:true},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("units"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.derivative.unitsLabel",defaultMessage:"Units (1s, 1m, etc)",description:"1s and 1m are required values and must not be translated."}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("unit"),value:model.unit,fullWidth:true})))))};DerivativeAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _vars=__webpack_require__(443);var _vars2=_interopRequireDefault(_vars);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CalculationAgg=function(_Component){_inherits(CalculationAgg,_Component);function CalculationAgg(){_classCallCheck(this,CalculationAgg);return _possibleConstructorReturn(this,(CalculationAgg.__proto__||Object.getPrototypeOf(CalculationAgg)).apply(this,arguments))}_createClass(CalculationAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash2.default.assign({},this.props.model,{variables:[{id:_uuid2.default.v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var defaults={script:""};var model=_extends({},defaults,this.props.model);var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.calculation.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.calculation.variablesLabel",defaultMessage:"Variables"})),_react2.default.createElement(_vars2.default,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("painless"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.calculation.painlessScriptLabel",defaultMessage:"Painless Script"}),fullWidth:true,helpText:_react2.default.createElement("div",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.calculation.painlessScriptDescription",defaultMessage:"Variables are keys on the {params} object, i.e. {paramsName}. To access the bucket interval (in milliseconds) use {paramsInterval}.",values:{params:_react2.default.createElement(_eui.EuiCode,null,"params"),paramsName:_react2.default.createElement(_eui.EuiCode,null,"params.<name>"),paramsInterval:_react2.default.createElement(_eui.EuiCode,null,"params._interval")}}))},_react2.default.createElement(_eui.EuiTextArea,{onChange:handleTextChange("script"),value:model.script,fullWidth:true})))))}}]);return CalculationAgg}(_react.Component);CalculationAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=CalculationAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StandardAgg(props){var model=props.model,panel=props.panel,series=props.series,fields=props.fields;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var restrict="numeric";if(model.type==="cardinality"){restrict="none"}var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type"),fullWidth:true})),model.type!=="count"?_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdAgg.fieldLabel",defaultMessage:"Field"}),fullWidth:true},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:restrict,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field"),fullWidth:true}))):null))}StandardAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=StandardAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _collection_actions=__webpack_require__(65);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var newPercentile=function newPercentile(opts){return _lodash2.default.assign({id:_uuid2.default.v1(),mode:"line",shade:.2},opts)};var PercentilesUi=function(_Component){_inherits(PercentilesUi,_Component);function PercentilesUi(props){_classCallCheck(this,PercentilesUi);var _this=_possibleConstructorReturn(this,(PercentilesUi.__proto__||Object.getPrototypeOf(PercentilesUi)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(PercentilesUi,[{key:"handleTextChange",value:function handleTextChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row,i,items){var defaults={value:"",percentile:"",shade:""};var model=_extends({},defaults,row);var handleAdd=collectionActions.handleAdd.bind(null,this.props,newPercentile);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);var intl=this.props.intl;var modeOptions=[{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.lineLabel",defaultMessage:"Line"}),value:"line"},{label:intl.formatMessage({id:"tsvb.percentile.modeOptions.bandLabel",defaultMessage:"Band"}),value:"band"}];var optionsStyle={};if(model.mode==="line"){optionsStyle.display="none"}var labelStyle={marginBottom:0};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react2.default.createElement(_eui.EuiFlexItem,{key:model.id},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFieldNumber,{"aria-label":intl.formatMessage({id:"tsvb.percentile.percentileAriaLabel",defaultMessage:"Percentile"}),placeholder:intl.formatMessage({id:"tsvb.percentile.percentilePlaceholder",defaultMessage:"Percentile"}),step:1,onChange:this.handleTextChange(model,"value"),value:Number(model.value)})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("mode")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentile.modeLabel",defaultMessage:"Mode:"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:htmlId("mode"),options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:this.handleTextChange(model,"mode"),singleSelection:{asPlainText:true}})),_react2.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("fillTo")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentile.fillToLabel",defaultMessage:"Fill to:"}))),_react2.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react2.default.createElement(_eui.EuiFieldNumber,{id:htmlId("fillTo"),step:1,onChange:this.handleTextChange(model,"percentile"),value:Number(model.percentile)})),_react2.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:labelStyle,htmlFor:htmlId("shade")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentile.shadeLabel",defaultMessage:"Shade (0 to 1):"}))),_react2.default.createElement(_eui.EuiFlexItem,{style:optionsStyle,grow:false},_react2.default.createElement(_eui.EuiFieldNumber,{id:htmlId("shade"),style:optionsStyle,step:.1,onChange:this.handleTextChange(model,"shade"),value:Number(model.shade)})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete,disableDelete:items.length<2,responsive:false}))))}},{key:"render",value:function render(){var _props=this.props,model=_props.model,name=_props.name;if(!model[name])return _react2.default.createElement("div",null);var rows=model[name].map(this.renderRow);return _react2.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},rows)}}]);return PercentilesUi}(_react.Component);PercentilesUi.defaultProps={name:"percentile"};PercentilesUi.propTypes={name:_propTypes2.default.string,model:_propTypes2.default.object,onChange:_propTypes2.default.func};var Percentiles=(0,_react3.injectI18n)(PercentilesUi);var PercentileAgg=function(_Component2){_inherits(PercentileAgg,_Component2);function PercentileAgg(){_classCallCheck(this,PercentileAgg);return _possibleConstructorReturn(this,(PercentileAgg.__proto__||Object.getPrototypeOf(PercentileAgg)).apply(this,arguments))}_createClass(PercentileAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.percentiles){this.props.onChange(_lodash2.default.assign({},this.props.model,{percentiles:[newPercentile({value:50})]}))}}},{key:"render",value:function render(){var _props2=this.props,series=_props2.series,model=_props2.model,panel=_props2.panel,fields=_props2.fields;var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentile.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:this.props.panel.type,siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentile.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(Percentiles,{onChange:handleChange,name:"percentiles",model:model}))}}]);return PercentileAgg}(_react.Component);PercentileAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=PercentileAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CumulativeSumAgg(props){var model=props.model,siblings=props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.cumulativeSum.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.cumulativeSum.metricLabel",defaultMessage:"Metric"})},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))}CumulativeSumAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=CumulativeSumAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardDeviationAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StandardDeviationAggUi=function StandardDeviationAggUi(props){var series=props.series,panel=props.panel,fields=props.fields,intl=props.intl;var defaults={sigma:""};var model=_extends({},defaults,props.model);var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"}];if(panel.type!=="table"){modeOptions.push({label:intl.formatMessage({id:"tsvb.stdDeviation.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"})}var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdDeviation.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdDeviation.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdDeviation.sigmaLabel",defaultMessage:"Sigma"})},_react2.default.createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdDeviation.modeLabel",defaultMessage:"Mode"})},_react2.default.createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))))};StandardDeviationAggUi.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};var StandardDeviationAgg=exports.StandardDeviationAgg=(0,_react3.injectI18n)(StandardDeviationAggUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StandardSiblingAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StandardSiblingAggUi=function StandardSiblingAggUi(props){var siblings=props.siblings,intl=props.intl;var defaults={sigma:""};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var stdDev={};if(model.type==="std_deviation_bucket"){stdDev.sigma=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("sigma"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdSibling.sigmaLabel",defaultMessage:"Sigma"})},_react2.default.createElement(_eui.EuiFieldText,{value:model.sigma,onChange:handleTextChange("sigma")})));var modeOptions=[{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"},{label:intl.formatMessage({id:"tsvb.stdSibling.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"}];var selectedModeOption=modeOptions.find(function(option){return model.mode===option.value});stdDev.mode=_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("mode"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdSibling.modeLabel",defaultMessage:"Mode"})},_react2.default.createElement(_eui.EuiComboBox,{options:modeOptions,selectedOptions:selectedModeOption?[selectedModeOption]:[],onChange:handleSelectChange("mode"),singleSelection:{asPlainText:true}})))}return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdSibling.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.stdSibling.metricLabel",defaultMessage:"Metric"})},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),exclude:["percentile"],metrics:siblings,metric:model,value:model.field}))),stdDev.sigma,stdDev.mode))};StandardSiblingAggUi.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};var StandardSiblingAgg=exports.StandardSiblingAgg=(0,_react3.injectI18n)(StandardSiblingAggUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SeriesAggUi(props){var panel=props.panel,model=props.model,intl=props.intl;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();var functionOptions=[{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.seriesAgg.functionOptions.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedFunctionOption=functionOptions.find(function(option){return model.function===option.value});if(panel.type==="table"){return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesAgg.seriesAggIsNotCompatibleLabel",defaultMessage:"Series Agg is not compatible with the table visualization."}))))}return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesAgg.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("function"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.seriesAgg.functionLabel",defaultMessage:"Function"})},_react2.default.createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedFunctionOption?[selectedFunctionOption]:[],onChange:handleSelectChange("function"),singleSelection:{asPlainText:true}})))))}SeriesAggUi.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};var SeriesAgg=(0,_react3.injectI18n)(SeriesAggUi);exports.default=SeriesAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SerialDiffAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_number_handler=__webpack_require__(442);var _create_number_handler2=_interopRequireDefault(_create_number_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SerialDiffAgg=exports.SerialDiffAgg=function SerialDiffAgg(props){var siblings=props.siblings;var defaults={lag:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleNumberChange=(0,_create_number_handler2.default)(handleChange);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.serialDiff.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.serialDiff.metricLabel",defaultMessage:"Metric"})},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("lag"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.serialDiff.lagLabel",defaultMessage:"Lag"})},_react2.default.createElement("input",{className:"tvbAgg__input",onChange:handleNumberChange("lag"),value:model.lag,type:"text"})))))};SerialDiffAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PositiveOnlyAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _metric_select=__webpack_require__(64);var _metric_select2=_interopRequireDefault(_metric_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PositiveOnlyAgg=exports.PositiveOnlyAgg=function PositiveOnlyAgg(props){var siblings=props.siblings;var defaults={unit:""};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.positiveOnly.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("metric"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.positiveOnly.metricLabel",defaultMessage:"Metric"})},_react2.default.createElement(_metric_select2.default,{onChange:handleSelectChange("field"),metrics:siblings,metric:model,value:model.field})))))};PositiveOnlyAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterRatioAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FilterRatioAgg=exports.FilterRatioAgg=function FilterRatioAgg(props){var series=props.series,fields=props.fields,panel=props.panel;var handleChange=(0,_create_change_handler2.default)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();var restrictMode=model.metric_agg==="cardinality"?"none":"numeric";return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.filterRatio.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("numerator"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.filterRatio.numeratorLabel",defaultMessage:"Numerator"})},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("numerator"),value:model.numerator}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("denominator"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.filterRatio.denominatorLabel",defaultMessage:"Denominator"})},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("denominator"),value:model.denominator})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("metric")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.filterRatio.metricAggregationLabel",defaultMessage:"Metric Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("metric"),siblings:props.siblings,panelType:"metrics",value:model.metric_agg,onChange:handleSelectChange("metric_agg")})),model.metric_agg!=="count"?_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("aggField"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.filterRatio.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.metric_agg,restrict:restrictMode,indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))):null))};FilterRatioAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentileRankAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PercentileRankAgg=exports.PercentileRankAgg=function PercentileRankAgg(props){var series=props.series,panel=props.panel,fields=props.fields;var defaults={value:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentileRank.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentileRank.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("value"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.percentileRank.valueLabel",defaultMessage:"Value"})},_react2.default.createElement(_eui.EuiFieldText,{value:model.value,onChange:handleTextChange("value")})))))};PercentileRankAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Static=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Static=exports.Static=function Static(props){var handleChange=(0,_create_change_handler2.default)(props.onChange,props.model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var defaults={numerator:"*",denominator:"*",metric_agg:"count"};var model=_extends({},defaults,props.model);var htmlId=(0,_eui.htmlIdGenerator)();return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.static.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("staticValue"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.static.staticValuesLabel",defaultMessage:"Static Value"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("value"),value:Number(model.value),step:.1})))))};Static.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _vars=__webpack_require__(443);var _vars2=_interopRequireDefault(_vars);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MathAgg=function(_Component){_inherits(MathAgg,_Component);function MathAgg(){_classCallCheck(this,MathAgg);return _possibleConstructorReturn(this,(MathAgg.__proto__||Object.getPrototypeOf(MathAgg)).apply(this,arguments))}_createClass(MathAgg,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.model.variables){this.props.onChange(_lodash2.default.assign({},this.props.model,{variables:[{id:_uuid2.default.v1()}]}))}}},{key:"render",value:function render(){var siblings=this.props.siblings;var htmlId=(0,_eui.htmlIdGenerator)();var defaults={script:""};var model=_extends({},defaults,this.props.model);var handleChange=(0,_create_change_handler2.default)(this.props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);return _react2.default.createElement(_agg_row2.default,{disableDelete:this.props.disableDelete,model:this.props.model,onAdd:this.props.onAdd,onDelete:this.props.onDelete,siblings:this.props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"l"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.math.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),siblings:this.props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("variables")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.math.variablesLabel",defaultMessage:"Variables"})),_react2.default.createElement(_vars2.default,{id:htmlId("variables"),metrics:siblings,onChange:handleChange,name:"variables",model:model,includeSiblings:true})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:"mathExpressionInput",label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.math.expressionLabel",defaultMessage:"Expression"}),fullWidth:true,helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.math.expressionDescription",defaultMessage:"This field uses basic math expressions (see {link}) - Variables are keys on the {params} object, i.e. {paramsName} To access all the data use {paramsValues} for an array of the values and {paramsTimestamps} for an array of the timestamps. {paramsTimestamp} is available for the current bucket's timestamp, {paramsIndex} is available for the current bucket's index, and {paramsInterval}s available for the interval in milliseconds.",values:{link:_react2.default.createElement(_eui.EuiLink,{href:"https://github.com/elastic/tinymath/blob/master/docs/functions.md",target:"_blank"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.math.expressionDescription.tinyMathLinkText",defaultMessage:"TinyMath"})),params:_react2.default.createElement(_eui.EuiCode,null,"params"),paramsName:_react2.default.createElement(_eui.EuiCode,null,"params.<name>"),paramsValues:_react2.default.createElement(_eui.EuiCode,null,"params._all.<name>.values"),paramsTimestamps:_react2.default.createElement(_eui.EuiCode,null,"params._all.<name>.timestamps"),paramsTimestamp:_react2.default.createElement(_eui.EuiCode,null,"params._timestamp"),paramsIndex:_react2.default.createElement(_eui.EuiCode,null,"params._index"),paramsInterval:_react2.default.createElement(_eui.EuiCode,null,"params._interval")}})},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"mathExpression",onChange:handleTextChange("script"),fullWidth:true,value:model.script})))))}}]);return MathAgg}(_react.Component);MathAgg.propTypes={disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,model:_propTypes2.default.object,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onDelete:_propTypes2.default.func,panel:_propTypes2.default.object,series:_propTypes2.default.object,siblings:_propTypes2.default.array};exports.default=MathAgg;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TopHitAgg=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _agg_select=__webpack_require__(33);var _agg_select2=_interopRequireDefault(_agg_select);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _create_change_handler=__webpack_require__(34);var _create_change_handler2=_interopRequireDefault(_create_change_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TopHitAggUi=function TopHitAggUi(props){var fields=props.fields,series=props.series,panel=props.panel,intl=props.intl;var defaults={agg_with:"avg",size:1,order:"desc"};var model=_extends({},defaults,props.model);var indexPattern=series.override_index_pattern&&series.series_index_pattern||panel.index_pattern;var handleChange=(0,_create_change_handler2.default)(props.onChange,model);var handleSelectChange=(0,_create_select_handler2.default)(handleChange);var handleTextChange=(0,_create_text_handler2.default)(handleChange);var aggWithOptions=[{label:intl.formatMessage({id:"tsvb.topHit.aggWithOptions.averageLabel",defaultMessage:"Avg"}),value:"avg"},{label:intl.formatMessage({id:"tsvb.topHit.aggWithOptions.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.topHit.aggWithOptions.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.topHit.aggWithOptions.sumLabel",defaultMessage:"Sum"}),value:"sum"}];var orderOptions=[{label:intl.formatMessage({id:"tsvb.topHit.orderOptions.ascLabel",defaultMessage:"Asc"}),value:"asc"},{label:intl.formatMessage({id:"tsvb.topHit.orderOptions.descLabel",defaultMessage:"Desc"}),value:"desc"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedAggWithOption=aggWithOptions.find(function(option){return model.agg_with===option.value});var selectedOrderOption=orderOptions.find(function(option){return model.order===option.value});return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("aggregation")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.aggregationLabel",defaultMessage:"Aggregation"})),_react2.default.createElement(_agg_select2.default,{id:htmlId("aggregation"),panelType:props.panel.type,siblings:props.siblings,value:model.type,onChange:handleSelectChange("type")})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:fields,type:model.type,restrict:"numeric",indexPattern:indexPattern,value:model.field,onChange:handleSelectChange("field")})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("size"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.sizeLabel",defaultMessage:"Size"})},_react2.default.createElement("input",{className:"tvbAgg__input",value:model.size,onChange:handleTextChange("size")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("agg_with"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.aggregateWithLabel",defaultMessage:"Aggregate with"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:intl.formatMessage({id:"tsvb.topHit.aggregateWith.selectPlaceholder",defaultMessage:"Select…"}),options:aggWithOptions,selectedOptions:selectedAggWithOption?[selectedAggWithOption]:[],onChange:handleSelectChange("agg_with"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("order_by"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.orderByLabel",defaultMessage:"Order by"})},_react2.default.createElement(_field_select2.default,{restrict:"date",value:model.order_by,onChange:handleSelectChange("order_by"),indexPattern:indexPattern,fields:fields}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("order"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topHit.orderLabel",defaultMessage:"Order"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,placeholder:intl.formatMessage({id:"tsvb.topHit.order.selectPlaceholder",defaultMessage:"Select…"}),options:orderOptions,selectedOptions:selectedOrderOption?[selectedOrderOption]:[],onChange:handleSelectChange("order"),singleSelection:{asPlainText:true}})))))};var TopHitAgg=exports.TopHitAgg=(0,_react3.injectI18n)(TopHitAggUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnsupportedAgg=UnsupportedAgg;var _agg_row=__webpack_require__(29);var _agg_row2=_interopRequireDefault(_agg_row);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function UnsupportedAgg(props){return _react2.default.createElement(_agg_row2.default,{disableDelete:props.disableDelete,model:props.model,onAdd:props.onAdd,onDelete:props.onDelete,siblings:props.siblings},_react2.default.createElement(_eui.EuiTitle,{className:"tvbAggRow__unavailable",size:"xxxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.unsupportedAgg.aggIsNotSupportedDescription",defaultMessage:"The {modelType} aggregation is no longer supported.",values:{modelType:_react2.default.createElement(_eui.EuiCode,null,props.model.type)}}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(236);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(106);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(2);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(107);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MetricSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs),_react2.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model})))}else{seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=void 0;if(props.colorPicker){colorPicker=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color}))}var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.sort.dragToSortTooltip",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbSeries__sortHandle",iconType:"grab","aria-label":intl.formatMessage({id:"tsvb.metric.sort.sortAriaLabel",defaultMessage:"Sort series by pressing up/down"}),onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)})))}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.metric.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),colorPicker,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.metric.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.metric.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.metric.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.metric.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MetricSeriesUi.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};var MetricSeries=(0,_react3.injectI18n)(MetricSeriesUi);exports.default=MetricSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(236);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(106);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _sort_keyhandler=__webpack_require__(107);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TopNSeries=(0,_react3.injectI18n)(function(props){var panel=props.panel,model=props.model,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl;var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs),_react2.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model})))}else{seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.tab.metricsLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.dragToSortTooltip",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbSeries__sortHandle",iconType:"grab","aria-label":intl.formatMessage({id:"tsvb.topN.dragToSortAriaLabel",defaultMessage:"Sort series by pressing up/down"}),onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)})))}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.topN.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.topN.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.topN.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.topN.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.topN.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)});TopNSeries.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=TopNSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _config=__webpack_require__(1059);var _config2=_interopRequireDefault(_config);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _eui=__webpack_require__(2);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _sort_keyhandler=__webpack_require__(107);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TopNSeries(props){var model=props.model,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl;var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs))}else{seriesBody=_react2.default.createElement(_config2.default,{panel:props.panel,fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.tab.metricsLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.tab.optionsLabel",defaultMessage:"Options"}))),seriesBody)}var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dragToSortTooltip",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbSeries__sortHandle",iconType:"grab","aria-label":intl.formatMessage({id:"tsvb.table.dragToSortAriaLabel",defaultMessage:"Sort series by pressing up/down"}),onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)})))}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.table.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,"aria-label":intl.formatMessage({id:"tsvb.table.labelAriaLabel",defaultMessage:"Label"}),onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.table.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.table.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.table.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.table.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}TopNSeries.propTypes={className:_propTypes2.default.string,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};exports.default=(0,_react3.injectI18n)(TopNSeries);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _data_format_picker=__webpack_require__(295);var _data_format_picker2=_interopRequireDefault(_data_format_picker);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _color_rules=__webpack_require__(237);var _color_rules2=_interopRequireDefault(_color_rules);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TableSeriesConfig=function(_Component){_inherits(TableSeriesConfig,_Component);function TableSeriesConfig(){_classCallCheck(this,TableSeriesConfig);return _possibleConstructorReturn(this,(TableSeriesConfig.__proto__||Object.getPrototypeOf(TableSeriesConfig)).apply(this,arguments))}_createClass(TableSeriesConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.color_rules||model.color_rules&&model.color_rules.length===0){this.props.onChange({color_rules:[{id:_uuid2.default.v1()}]})}}},{key:"render",value:function render(){var defaults={offset_time:"",value_template:""};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var intl=this.props.intl;var functionOptions=[{label:intl.formatMessage({id:"tsvb.table.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:intl.formatMessage({id:"tsvb.table.maxLabel",defaultMessage:"Max"}),value:"max"},{label:intl.formatMessage({id:"tsvb.table.minLabel",defaultMessage:"Min"}),value:"min"},{label:intl.formatMessage({id:"tsvb.table.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:intl.formatMessage({id:"tsvb.table.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:intl.formatMessage({id:"tsvb.table.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:intl.formatMessage({id:"tsvb.table.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:intl.formatMessage({id:"tsvb.table.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:intl.formatMessage({id:"tsvb.table.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}];var selectedAggFuncOption=functionOptions.find(function(option){return model.aggregate_function===option.value});return _react2.default.createElement("div",{className:"tvbAggRow"},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_data_format_picker2.default,{onChange:handleSelectChange("formatter"),value:model.formatter})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("template"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.templateLabel",defaultMessage:"Template"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:_react2.default.createElement(_eui.EuiCode,null,"{{value}}/s")}})),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("value_template"),value:model.value_template,fullWidth:true})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("filterInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.filterLabel",defaultMessage:"Filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.showTrendArrowsLabel",defaultMessage:"Show trend arrows?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.trend_arrows,name:"trend_arrows",onChange:this.props.onChange}))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.fieldLabel",defaultMessage:"Field"})},_react2.default.createElement(_field_select2.default,{fields:this.props.fields,indexPattern:this.props.panel.index_pattern,value:model.aggregate_by,onChange:handleSelectChange("aggregate_by"),fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("aggregateFunctionInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.aggregateFunctionLabel",defaultMessage:"Aggregate function"}),fullWidth:true},_react2.default.createElement(_eui.EuiComboBox,{options:functionOptions,selectedOptions:selectedAggFuncOption?[selectedAggFuncOption]:[],onChange:handleSelectChange("aggregate_function"),singleSelection:true,fullWidth:true})))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"s"}),_react2.default.createElement(_eui.EuiTitle,{size:"xxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.colorRulesLabel",defaultMessage:"Color rules"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_color_rules2.default,{primaryName:"text",primaryVarName:"text",hideSecondary:true,model:model,onChange:this.props.onChange,name:"color_rules"}))}}]);return TableSeriesConfig}(_react.Component);TableSeriesConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=(0,_react3.injectI18n)(TableSeriesConfig);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(236);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(106);var _split2=_interopRequireDefault(_split);var _eui=__webpack_require__(2);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _sort_keyhandler=__webpack_require__(107);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function GaugeSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl;var defaults={label:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs),_react2.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model})))}else{seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}var colorPicker=_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:props.onChange,name:"color",value:model.color});var dragHandle=void 0;if(!props.disableDelete){dragHandle=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.sort.dragToSortTooltip",defaultMessage:"Drag to sort"})},_react2.default.createElement(_eui.EuiButtonIcon,{className:"tvbSeries__sortHandle",iconType:"grab","aria-label":intl.formatMessage({id:"tsvb.gauge.sort.sortAriaLabel",defaultMessage:"Sort series by pressing up/down"}),onKeyDown:(0,_sort_keyhandler.createUpDownHandler)(props.onShouldSortItem)})))}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.gauge.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},colorPicker),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.gauge.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),dragHandle,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.gauge.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:intl.formatMessage({id:"tsvb.gauge.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:intl.formatMessage({id:"tsvb.gauge.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}GaugeSeriesUi.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};var GaugeSeries=(0,_react3.injectI18n)(GaugeSeriesUi);exports.default=GaugeSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _series_config=__webpack_require__(236);var _reactAnythingSortable=__webpack_require__(57);var _reactAnythingSortable2=_interopRequireDefault(_reactAnythingSortable);var _split=__webpack_require__(106);var _split2=_interopRequireDefault(_split);var _create_agg_row_render=__webpack_require__(86);var _create_agg_row_render2=_interopRequireDefault(_create_agg_row_render);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MarkdownSeriesUi(props){var panel=props.panel,fields=props.fields,onAdd=props.onAdd,onChange=props.onChange,onDelete=props.onDelete,disableDelete=props.disableDelete,disableAdd=props.disableAdd,selectedTab=props.selectedTab,visible=props.visible,intl=props.intl;var defaults={label:"",var_name:""};var model=_extends({},defaults,props.model);var handleChange=(0,_create_text_handler2.default)(onChange);var aggs=model.metrics.map((0,_create_agg_row_render2.default)(props));var caretIcon="arrowDown";if(!visible)caretIcon="arrowRight";var body=null;if(visible){var seriesBody=void 0;if(selectedTab==="metrics"){var handleSort=function handleSort(data){var metrics=data.map(function(id){return model.metrics.find(function(m){return m.id===id})});props.onChange({metrics:metrics})};seriesBody=_react2.default.createElement("div",null,_react2.default.createElement(_reactAnythingSortable2.default,{style:{cursor:"default"},dynamic:true,direction:"vertical",onSort:handleSort,sortHandle:"tvbAggRow__sortHandle"},aggs),_react2.default.createElement("div",{className:"tvbAggRow tvbAggRow--split"},_react2.default.createElement(_split2.default,{onChange:props.onChange,fields:fields,panel:panel,model:model})))}else{seriesBody=_react2.default.createElement(_series_config.SeriesConfig,{fields:props.fields,model:props.model,onChange:props.onChange})}body=_react2.default.createElement("div",{className:"tvbSeries__body"},_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="metrics",onClick:function onClick(){return props.switchTab("metrics")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"seriesOptions",isSelected:selectedTab==="options",onClick:function onClick(){return props.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),seriesBody)}return _react2.default.createElement("div",{className:""+props.className,style:props.style,onMouseDown:props.onMouseDown,onTouchStart:props.onTouchStart},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:caretIcon,color:"text",onClick:props.toggleVisible,"aria-label":intl.formatMessage({id:"tsvb.markdown.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":props.visible})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("label"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.labelPlaceholder",defaultMessage:"Label"}),value:model.label})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,onChange:handleChange("var_name"),placeholder:intl.formatMessage({id:"tsvb.markdown.editor.variableNamePlaceholder",defaultMessage:"Variable name"}),value:model.var_name})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{addTooltip:intl.formatMessage({id:"tsvb.markdown.editor.addSeriesTooltip",defaultMessage:"Add series"}),deleteTooltip:intl.formatMessage({id:"tsvb.markdown.editor.deleteSeriesTooltip",defaultMessage:"Delete series"}),cloneTooltip:intl.formatMessage({id:"tsvb.markdown.editor.cloneSeriesTooltip",defaultMessage:"Clone series"}),onDelete:onDelete,onClone:props.onClone,onAdd:onAdd,disableDelete:disableDelete,disableAdd:disableAdd,responsive:false}))),body)}MarkdownSeriesUi.propTypes={className:_propTypes2.default.string,colorPicker:_propTypes2.default.bool,disableAdd:_propTypes2.default.bool,disableDelete:_propTypes2.default.bool,fields:_propTypes2.default.object,name:_propTypes2.default.string,onAdd:_propTypes2.default.func,onChange:_propTypes2.default.func,onClone:_propTypes2.default.func,onDelete:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onSortableItemMount:_propTypes2.default.func,onSortableItemReadyToMove:_propTypes2.default.func,onTouchStart:_propTypes2.default.func,model:_propTypes2.default.object,panel:_propTypes2.default.object,selectedTab:_propTypes2.default.string,sortData:_propTypes2.default.string,style:_propTypes2.default.object,switchTab:_propTypes2.default.func,toggleVisible:_propTypes2.default.func,visible:_propTypes2.default.bool};var MarkdownSeries=(0,_react3.injectI18n)(MarkdownSeriesUi);exports.default=MarkdownSeries;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _new_metric_agg_fn=__webpack_require__(296);var _new_metric_agg_fn2=_interopRequireDefault(_new_metric_agg_fn);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _lodash2.default.assign({id:_uuid2.default.v1(),color:"#68BC00",split_mode:"everything",metrics:[(0,_new_metric_agg_fn2.default)()],separate_axis:0,axis_position:"right",formatter:"number",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:"none"},obj)};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _collection_actions=__webpack_require__(65);var collectionActions=_interopRequireWildcard(_collection_actions);var _add_delete_buttons=__webpack_require__(41);var _add_delete_buttons2=_interopRequireDefault(_add_delete_buttons);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _icon_select=__webpack_require__(1064);var _icon_select2=_interopRequireDefault(_icon_select);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function newAnnotation(){return{id:_uuid2.default.v1(),color:"#F00",index_pattern:"*",time_field:"@timestamp",icon:"fa-tag",ignore_global_filters:1,ignore_panel_filters:1}}var AnnotationsEditor=function(_Component){_inherits(AnnotationsEditor,_Component);function AnnotationsEditor(props){_classCallCheck(this,AnnotationsEditor);var _this=_possibleConstructorReturn(this,(AnnotationsEditor.__proto__||Object.getPrototypeOf(AnnotationsEditor)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);return _this}_createClass(AnnotationsEditor,[{key:"handleChange",value:function handleChange(item,name){var _this2=this;return function(e){var handleChange=collectionActions.handleChange.bind(null,_this2.props);var part={};part[name]=_lodash2.default.get(e,"[0].value",_lodash2.default.get(e,"target.value"));handleChange(_lodash2.default.assign({},item,part))}}},{key:"renderRow",value:function renderRow(row){var _this3=this;var defaults={fields:"",template:"",index_pattern:"*",query_string:""};var model=_extends({},defaults,row);var handleChange=function handleChange(part){var fn=collectionActions.handleChange.bind(null,_this3.props);fn(_lodash2.default.assign({},model,part))};var htmlId=(0,_eui.htmlIdGenerator)(model.id);var handleAdd=collectionActions.handleAdd.bind(null,this.props,newAnnotation);var handleDelete=collectionActions.handleDelete.bind(null,this.props,model);return _react2.default.createElement("div",{className:"tvbAnnotationsEditor",key:model.id},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{disableTrash:true,onChange:handleChange,name:"color",value:model.color})),_react2.default.createElement(_eui.EuiFlexItem,{className:"tvbAggRow__children"},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("indexPattern"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.indexPatternLabel",defaultMessage:"Index pattern (required)"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"index_pattern"),value:model.index_pattern,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("timeField"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.timeFieldLabel",defaultMessage:"Time field (required)"}),fullWidth:true},_react2.default.createElement(_field_select2.default,{restrict:"date",value:model.time_field,onChange:this.handleChange(model,"time_field"),indexPattern:model.index_pattern,fields:this.props.fields,fullWidth:true})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("queryString"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.queryStringLabel",defaultMessage:"Query string"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"query_string"),value:model.query_string,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.ignoreGlobalFiltersLabel",defaultMessage:"Ignore global filters?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filters,name:"ignore_global_filters",onChange:handleChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.ignorePanelFiltersLabel",defaultMessage:"Ignore panel filters?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_panel_filters,name:"ignore_panel_filters",onChange:handleChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,gutterSize:"m"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("icon"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.iconLabel",defaultMessage:"Icon (required)"})},_react2.default.createElement(_icon_select2.default,{value:model.icon,onChange:this.handleChange(model,"icon")}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("fields"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.fieldsLabel",defaultMessage:"Fields (required - comma separated paths)"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"fields"),value:model.fields,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("rowTemplate"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateLabel",defaultMessage:"Row template (required)"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.rowTemplateHelpText",defaultMessage:"eg.{rowTemplateExample}",values:{rowTemplateExample:_react2.default.createElement(_eui.EuiCode,null,"{{field}}")}})),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:this.handleChange(model,"template"),value:model.template,fullWidth:true}))))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_add_delete_buttons2.default,{onAdd:handleAdd,onDelete:handleDelete}))))}},{key:"render",value:function render(){var model=this.props.model;var content=void 0;if(!model.annotations||!model.annotations.length){var handleAdd=collectionActions.handleAdd.bind(null,this.props,newAnnotation);content=_react2.default.createElement(_eui.EuiText,{textAlign:"center"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.howToCreateAnnotationDataSourceDescription",defaultMessage:"Click the button below to create an annotation data source."})),_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:handleAdd},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.addDataSourceButtonLabel",defaultMessage:"Add data source"})))}else{var annotations=model.annotations.map(this.renderRow);content=_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.annotationsEditor.dataSourcesLabel",defaultMessage:"Data sources"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),annotations)}return _react2.default.createElement("div",{className:"tvbAnnotationsEditor__container"},content)}}]);return AnnotationsEditor}(_react.Component);AnnotationsEditor.defaultProps={name:"annotations"};AnnotationsEditor.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,name:_propTypes2.default.string,onChange:_propTypes2.default.func};exports.default=AnnotationsEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOption(option){var icon=option.value;var label=option.label;return _react2.default.createElement("span",null,_react2.default.createElement("span",{className:"kuiIcon "+icon,"aria-hidden":"true"})," "+label)}function IconSelect(props){var selectedIcon=props.icons.find(function(option){return props.value===option.value});return _react2.default.createElement(_eui.EuiComboBox,{isClearable:false,id:props.id,options:props.icons,selectedOptions:selectedIcon?[selectedIcon]:[],onChange:props.onChange,singleSelection:true,renderOption:renderOption})}IconSelect.defaultProps={icons:[{value:"fa-asterisk",label:_i18n.i18n.translate("tsvb.iconSelect.asteriskLabel",{defaultMessage:"Asterisk"})},{value:"fa-bell",label:_i18n.i18n.translate("tsvb.iconSelect.bellLabel",{defaultMessage:"Bell"})},{value:"fa-bolt",label:_i18n.i18n.translate("tsvb.iconSelect.boltLabel",{defaultMessage:"Bolt"})},{value:"fa-bomb",label:_i18n.i18n.translate("tsvb.iconSelect.bombLabel",{defaultMessage:"Bomb"})},{value:"fa-bug",label:_i18n.i18n.translate("tsvb.iconSelect.bugLabel",{defaultMessage:"Bug"})},{value:"fa-comment",label:_i18n.i18n.translate("tsvb.iconSelect.commentLabel",{defaultMessage:"Comment"})},{value:"fa-exclamation-circle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationCircleLabel",{defaultMessage:"Exclamation Circle"})},{value:"fa-exclamation-triangle",label:_i18n.i18n.translate("tsvb.iconSelect.exclamationTriangleLabel",{defaultMessage:"Exclamation Triangle"})},{value:"fa-fire",label:_i18n.i18n.translate("tsvb.iconSelect.fireLabel",{defaultMessage:"Fire"})},{value:"fa-flag",label:_i18n.i18n.translate("tsvb.iconSelect.flagLabel",{defaultMessage:"Flag"})},{value:"fa-heart",label:_i18n.i18n.translate("tsvb.iconSelect.heartLabel",{defaultMessage:"Heart"})},{value:"fa-map-marker",label:_i18n.i18n.translate("tsvb.iconSelect.mapMarkerLabel",{defaultMessage:"Map Marker"})},{value:"fa-map-pin",label:_i18n.i18n.translate("tsvb.iconSelect.mapPinLabel",{defaultMessage:"Map Pin"})},{value:"fa-star",label:_i18n.i18n.translate("tsvb.iconSelect.starLabel",{defaultMessage:"Star"})},{value:"fa-tag",label:_i18n.i18n.translate("tsvb.iconSelect.tagLabel",{defaultMessage:"Tag"})}]};IconSelect.propTypes={icons:_propTypes2.default.array,id:_propTypes2.default.string,onChange:_propTypes2.default.func,value:_propTypes2.default.string.isRequired};exports.default=IconSelect;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(63);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(237);var _color_rules2=_interopRequireDefault(_color_rules);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MetricPanelConfig=function(_Component){_inherits(MetricPanelConfig,_Component);function MetricPanelConfig(props){_classCallCheck(this,MetricPanelConfig);var _this=_possibleConstructorReturn(this,(MetricPanelConfig.__proto__||Object.getPrototypeOf(MetricPanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(MetricPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;if(!model.background_color_rules||model.background_color_rules&&model.background_color_rules.length===0){this.props.onChange({background_color_rules:[{id:_uuid2.default.v1()}]})}}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={filter:""};var model=_extends({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var view=void 0;if(selectedTab==="data"){view=_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,limit:2,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_color_rules2.default,{model:model,onChange:this.props.onChange,name:"background_color_rules"})))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")},"data-test-subj":"metricEditorPanelOptionsBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.metric.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MetricPanelConfig}(_react.Component);MetricPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=MetricPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(63);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(237);var _color_rules2=_interopRequireDefault(_color_rules);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TopNPanelConfig=function(_Component){_inherits(TopNPanelConfig,_Component);function TopNPanelConfig(props){_classCallCheck(this,TopNPanelConfig);var _this=_possibleConstructorReturn(this,(TopNPanelConfig.__proto__||Object.getPrototypeOf(TopNPanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TopNPanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid2.default.v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:""};var model=_extends({},defaults,this.props.model);var htmlId=(0,_eui.htmlIdGenerator)();var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var view=void 0;if(selectedTab==="data"){view=_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("itemUrl"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.itemUrlDescription",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react2.default.createElement(_eui.EuiCode,null,"{{key}}")}}))},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.styleLabel",defaultMessage:"Style"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color}))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiTitle,{size:"xxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_color_rules2.default,{model:model,primaryVarName:"bar_color",primaryName:"bar",hideSecondary:true,onChange:this.props.onChange,name:"bar_color_rules"})))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.topN.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TopNPanelConfig}(_react.Component);TopNPanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=TopNPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _field_select=__webpack_require__(47);var _field_select2=_interopRequireDefault(_field_select);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(63);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TablePanelConfig=function(_Component){_inherits(TablePanelConfig,_Component);function TablePanelConfig(props){_classCallCheck(this,TablePanelConfig);var _this=_possibleConstructorReturn(this,(TablePanelConfig.__proto__||Object.getPrototypeOf(TablePanelConfig)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(TablePanelConfig,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.bar_color_rules||model.bar_color_rules&&model.bar_color_rules.length===0){parts.bar_color_rules=[{id:_uuid2.default.v1()}]}this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var defaults={drilldown_url:"",filter:"",pivot_label:"",pivot_rows:10};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var htmlId=(0,_eui.htmlIdGenerator)();var view=void 0;if(selectedTab==="data"){view=_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dataTab.defineFieldDescription",defaultMessage:"For the table visualization you need to define a field to group by using a terms aggregation."}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{"data-test-subj":"groupByField"},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("field"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dataTab.groupByFieldLabel",defaultMessage:"Group by field"})},_react2.default.createElement(_field_select2.default,{fields:this.props.fields,value:model.pivot_id,indexPattern:model.index_pattern,onChange:handleSelectChange("pivot_id"),fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("pivotLabelInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dataTab.columnLabel",defaultMessage:"Column label"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"columnLabelName",onChange:handleTextChange("pivot_label"),value:model.pivot_label,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("pivotRowsInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dataTab.rowsLabel",defaultMessage:"Rows"})},_react2.default.createElement("input",{className:"tvbAgg__input",type:"number",onChange:handleTextChange("pivot_rows"),value:model.pivot_rows})))))),_react2.default.createElement(_series_editor2.default,{fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange}))}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("drilldownInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.itemUrlHelpText",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:_react2.default.createElement(_eui.EuiCode,null,"{{key}}")}}))},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("drilldown_url"),value:model.drilldown_url})),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilterInput"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{htmlFor:htmlId("globalFilterOption")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{id:htmlId("globalFilterOption"),value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.dataTab.columnsButtonLabel",defaultMessage:"Columns"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.table.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return TablePanelConfig}(_react.Component);TablePanelConfig.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};exports.default=TablePanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(63);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_rules=__webpack_require__(237);var _color_rules2=_interopRequireDefault(_color_rules);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _uuid=__webpack_require__(37);var _uuid2=_interopRequireDefault(_uuid);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GaugePanelConfigUi=function(_Component){_inherits(GaugePanelConfigUi,_Component);function GaugePanelConfigUi(props){_classCallCheck(this,GaugePanelConfigUi);var _this=_possibleConstructorReturn(this,(GaugePanelConfigUi.__proto__||Object.getPrototypeOf(GaugePanelConfigUi)).call(this,props));_this.state={selectedTab:"data"};return _this}_createClass(GaugePanelConfigUi,[{key:"componentWillMount",value:function componentWillMount(){var model=this.props.model;var parts={};if(!model.gauge_color_rules||model.gauge_color_rules&&model.gauge_color_rules.length===0){parts.gauge_color_rules=[{id:_uuid2.default.v1()}]}if(model.gauge_width==null)parts.gauge_width=10;if(model.gauge_inner_width==null)parts.gauge_inner_width=10;if(model.gauge_style==null)parts.gauge_style="half";this.props.onChange(parts)}},{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"render",value:function render(){var _this2=this;var selectedTab=this.state.selectedTab;var intl=this.props.intl;var defaults={gauge_max:"",filter:"",gauge_style:"circle",gauge_inner_width:"",gauge_width:""};var model=_extends({},defaults,this.props.model);var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var styleOptions=[{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.circleLabel",defaultMessage:"Circle"}),value:"circle"},{label:intl.formatMessage({id:"tsvb.gauge.styleOptions.halfCircleLabel",defaultMessage:"Half Circle"}),value:"half"}];var htmlId=(0,_eui.htmlIdGenerator)();var selectedGaugeStyleOption=styleOptions.find(function(option){return model.gauge_style===option.value});var view=void 0;if(selectedTab==="data"){view=_react2.default.createElement(_series_editor2.default,{colorPicker:true,fields:this.props.fields,limit:1,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.styleLabel",defaultMessage:"Style"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeMax"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeMaxLabel",defaultMessage:"Gauge max (empty for auto)"})},_react2.default.createElement("input",{id:htmlId("gaugeMax"),className:"tvbAgg__input",type:"number",onChange:handleTextChange("gauge_max"),value:model.gauge_max}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeStyle"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeStyleLabel",defaultMessage:"Gauge style"})},_react2.default.createElement(_eui.EuiComboBox,{isClearable:false,options:styleOptions,selectedOptions:selectedGaugeStyleOption?[selectedGaugeStyleOption]:[],onChange:handleSelectChange("gauge_style"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("innerLine"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerLineWidthLabel",defaultMessage:"Inner line width"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_inner_width"),value:Number(model.gauge_inner_width)}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("gaugeLine"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.gaugeLineWidthLabel",defaultMessage:"Gauge line width"})},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:handleTextChange("gauge_width"),value:Number(model.gauge_width)})))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.innerColorLabel",defaultMessage:"Inner color:"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"gauge_inner_color",value:model.gauge_inner_color}))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiTitle,{size:"xxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_color_rules2.default,{primaryName:"gauge color",primaryVarName:"gauge",secondaryName:"text color",secondaryVarName:"text",model:model,onChange:this.props.onChange,name:"gauge_color_rules"})))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="data",onClick:function onClick(){return _this2.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this2.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.gauge.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return GaugePanelConfigUi}(_react.Component);GaugePanelConfigUi.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func};var GaugePanelConfig=(0,_react3.injectI18n)(GaugePanelConfigUi);exports.default=GaugePanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _series_editor=__webpack_require__(85);var _series_editor2=_interopRequireDefault(_series_editor);var _index_pattern=__webpack_require__(63);__webpack_require__(1087);var _create_select_handler=__webpack_require__(17);var _create_select_handler2=_interopRequireDefault(_create_select_handler);var _create_text_handler=__webpack_require__(18);var _create_text_handler2=_interopRequireDefault(_create_text_handler);var _color_picker=__webpack_require__(45);var _color_picker2=_interopRequireDefault(_color_picker);var _yes_no=__webpack_require__(46);var _yes_no2=_interopRequireDefault(_yes_no);var _markdown_editor=__webpack_require__(1071);var _markdown_editor2=_interopRequireDefault(_markdown_editor);var _lessBrowser=__webpack_require__(1108);var _lessBrowser2=_interopRequireDefault(_lessBrowser);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var lessC=(0,_lessBrowser2.default)(window,{env:"production"});var MarkdownPanelConfigUi=function(_Component){_inherits(MarkdownPanelConfigUi,_Component);function MarkdownPanelConfigUi(props){_classCallCheck(this,MarkdownPanelConfigUi);var _this=_possibleConstructorReturn(this,(MarkdownPanelConfigUi.__proto__||Object.getPrototypeOf(MarkdownPanelConfigUi)).call(this,props));_this.state={selectedTab:"markdown"};_this.handleCSSChange=_this.handleCSSChange.bind(_this);return _this}_createClass(MarkdownPanelConfigUi,[{key:"switchTab",value:function switchTab(selectedTab){this.setState({selectedTab:selectedTab})}},{key:"handleCSSChange",value:function handleCSSChange(value){var _this2=this;var model=this.props.model;var lessSrc="#markdown-"+model.id+" {\n  "+value+"\n}";lessC.render(lessSrc,{compress:true},function(e,output){var parts={markdown_less:value};if(output){parts.markdown_css=output.css}_this2.props.onChange(parts)})}},{key:"render",value:function render(){var _this3=this;var defaults={filter:""};var model=_extends({},defaults,this.props.model);var selectedTab=this.state.selectedTab;var handleSelectChange=(0,_create_select_handler2.default)(this.props.onChange);var handleTextChange=(0,_create_text_handler2.default)(this.props.onChange);var intl=this.props.intl;var htmlId=(0,_eui.htmlIdGenerator)();var alignOptions=[{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.topLabel",defaultMessage:"Top"}),value:"top"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.middleLabel",defaultMessage:"Middle"}),value:"middle"},{label:intl.formatMessage({id:"tsvb.markdown.alignOptions.bottomLabel",defaultMessage:"Bottom"}),value:"bottom"}];var selectedAlignOption=alignOptions.find(function(option){return model.markdown_vertical_align===option.value});var view=void 0;if(selectedTab==="markdown"){view=_react2.default.createElement(_markdown_editor2.default,this.props)}else if(selectedTab==="data"){view=_react2.default.createElement(_series_editor2.default,{colorPicker:false,fields:this.props.fields,model:this.props.model,name:this.props.name,onChange:this.props.onChange})}else{view=_react2.default.createElement("div",{className:"tvbPanelConfig__container"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.dataLabel",defaultMessage:"Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_index_pattern.IndexPattern,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{id:htmlId("panelFilter"),label:_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:true},_react2.default.createElement(_eui.EuiFieldText,{onChange:handleTextChange("filter"),value:model.filter,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_yes_no2.default,{value:model.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.styleLabel",defaultMessage:"Style"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_color_picker2.default,{onChange:this.props.onChange,name:"background_color",value:model.background_color})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.showScrollbarsLabel",defaultMessage:"Show scrollbars?"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_yes_no2.default,{value:model.markdown_scrollbars,name:"markdown_scrollbars",onChange:this.props.onChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormLabel,{style:{marginBottom:0},htmlFor:htmlId("valign")},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.verticalAlignmentLabel",defaultMessage:"Vertical alignment:"}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiComboBox,{id:htmlId("valign"),isClearable:false,options:alignOptions,selectedOptions:selectedAlignOption?[selectedAlignOption]:[],onChange:handleSelectChange("markdown_vertical_align"),singleSelection:{asPlainText:true}}))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiTitle,{size:"xxs"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.customCSSLabel",defaultMessage:"Custom CSS (supports Less)"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiCodeEditor,{mode:"less",theme:"github",width:"100%",name:"ace-css-"+model.id,setOptions:{fontSize:"14px"},value:model.markdown_less,onChange:this.handleCSSChange})))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="markdown",onClick:function onClick(){return _this3.switchTab("markdown")}},"Markdown"),_react2.default.createElement(_eui.EuiTab,{"data-test-subj":"markdownDataBtn",isSelected:selectedTab==="data",onClick:function onClick(){return _this3.switchTab("data")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.dataTab.dataButtonLabel",defaultMessage:"Data"})),_react2.default.createElement(_eui.EuiTab,{isSelected:selectedTab==="options",onClick:function onClick(){return _this3.switchTab("options")}},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdown.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),view)}}]);return MarkdownPanelConfigUi}(_react.Component);MarkdownPanelConfigUi.propTypes={fields:_propTypes2.default.object,model:_propTypes2.default.object,onChange:_propTypes2.default.func,dateFormat:_propTypes2.default.string};var MarkdownPanelConfig=(0,_react3.injectI18n)(MarkdownPanelConfigUi);exports.default=MarkdownPanelConfig;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(630)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _tick_formatter=__webpack_require__(71);var _tick_formatter2=_interopRequireDefault(_tick_formatter);var _convert_series_to_vars=__webpack_require__(439);var _convert_series_to_vars2=_interopRequireDefault(_convert_series_to_vars);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(452);__webpack_require__(1089);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var MarkdownEditor=function(_Component){_inherits(MarkdownEditor,_Component);function MarkdownEditor(){var _ref;var _temp,_this,_ret;_classCallCheck(this,MarkdownEditor);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MarkdownEditor.__proto__||Object.getPrototypeOf(MarkdownEditor)).call.apply(_ref,[this].concat(args))),_this),_this.state={visData:null},_this.subscription=null,_this.handleChange=function(value){_this.props.onChange({markdown:value})},_this.handleOnLoad=function(ace){_this.ace=ace},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(MarkdownEditor,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(this.props.visData$){this.subscription=this.props.visData$.subscribe(function(data){_this2.setState({visData:data})})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.subscription){this.subscription.unsubscribe()}}},{key:"handleVarClick",value:function handleVarClick(snippet){var _this3=this;return function(){if(_this3.ace)_this3.ace.insert(snippet)}}},{key:"render",value:function render(){var _this4=this;var visData=this.state.visData;if(!visData){return null}var _props=this.props,model=_props.model,dateFormat=_props.dateFormat;var series=_lodash2.default.get(visData,model.id+".series",[]);var variables=(0,_convert_series_to_vars2.default)(series,model,dateFormat,this.props.getConfig);var rows=[];var rawFormatter=(0,_tick_formatter2.default)("0.[0000]",null,this.props.getConfig);var createPrimitiveRow=function createPrimitiveRow(key){var snippet="{{ "+key+" }}";var value=_lodash2.default.get(variables,key);if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react2.default.createElement("tr",{key:key},_react2.default.createElement("td",null,_react2.default.createElement("a",{onClick:_this4.handleVarClick(snippet)},snippet)),_react2.default.createElement("td",null,_react2.default.createElement("code",null,"“",value,"”"))))};var createArrayRow=function createArrayRow(key){var snippet="{{# "+key+" }}{{/ "+key+" }}";var date=_lodash2.default.get(variables,key+"[0][0]");var value=_lodash2.default.get(variables,key+"[0][1]");if(/raw$/.test(key))value=rawFormatter(value);rows.push(_react2.default.createElement("tr",{key:key},_react2.default.createElement("td",null,_react2.default.createElement("a",{onClick:_this4.handleVarClick(snippet)},"{{ "+key+" }}")),_react2.default.createElement("td",null,_react2.default.createElement("code",null,"[ [ “",date,"”, “",value,"” ], ... ]"))))};function walk(obj){var path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];for(var name in obj){if(Array.isArray(obj[name])){createArrayRow(path.concat(name).join("."))}else if(_lodash2.default.isObject(obj[name])){walk(obj[name],path.concat(name))}else{createPrimitiveRow(path.concat(name).join("."))}}}walk(variables);return _react2.default.createElement("div",{className:"tvbMarkdownEditor"},_react2.default.createElement("div",{className:"tvbMarkdownEditor__editor"},_react2.default.createElement(_eui.EuiCodeEditor,{onLoad:this.handleOnLoad,mode:"markdown",theme:"github",width:"100%",height:"100%",name:"ace-"+model.id,setOptions:{wrap:true,fontSize:"14px"},value:model.markdown,onChange:this.handleChange})),_react2.default.createElement("div",{className:"tvbMarkdownEditor__variables"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.howToUseVariablesInMarkdownDescription",defaultMessage:"The following variables can be used in the Markdown by using the Handlebar (mustache) syntax. {handlebarLink} on the available expressions.",values:{handlebarLink:_react2.default.createElement("a",{href:"http://handlebarsjs.com/expressions.html",target:"_BLANK"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.howUseVariablesInMarkdownDescription.documentationLinkText",defaultMessage:"Click here for documentation"}))}}))),_react2.default.createElement("table",{className:"table"},_react2.default.createElement("thead",null,_react2.default.createElement("tr",null,_react2.default.createElement("th",{scope:"col"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.nameLabel",defaultMessage:"Name"})),_react2.default.createElement("th",{scope:"col"},_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.valueLabel",defaultMessage:"Value"})))),_react2.default.createElement("tbody",null,rows)),rows.length===0&&_react2.default.createElement(_eui.EuiTitle,{size:"xxs",className:"tvbMarkdownEditor__noVariables"},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.noVariablesAvailableDescription",defaultMessage:"No variables available for the selected data metrics."}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"tsvb.markdownEditor.howToAccessEntireTreeDescription",defaultMessage:"There is also a special variable named {all} which you can use to access the entire tree. This is useful for creating lists with data from a group by…",values:{all:_react2.default.createElement("code",null,"_all")}}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiCodeBlock,null,"# All servers:\n\n    {{#each _all}}\n    - {{ label }} {{ last.formatted }}\n    {{/each}}")))}}]);return MarkdownEditor}(_react.Component);MarkdownEditor.propTypes={onChange:_propTypes2.default.func,model:_propTypes2.default.object,dateFormat:_propTypes2.default.string,visData$:_propTypes2.default.object};exports.default=MarkdownEditor;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(74)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2350)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(timefilter){return function(ranges){timefilter.setTime({from:(0,_moment2.default)(ranges.xaxis.from).toISOString(),to:(0,_moment2.default)(ranges.xaxis.to).toISOString(),mode:"absolute"})}};module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractIndexPatterns=extractIndexPatterns;var _lodash=__webpack_require__(0);function extractIndexPatterns(params,fetchedFields){var patternsToFetch=[];if(!fetchedFields[params.index_pattern]){patternsToFetch.push(params.index_pattern)}params.series.forEach(function(series){var indexPattern=series.series_index_pattern;if(series.override_index_pattern&&!fetchedFields[indexPattern]){patternsToFetch.push(indexPattern)}});if(params.annotations){params.annotations.forEach(function(item){var indexPattern=item.index_pattern;if(indexPattern&&!fetchedFields[indexPattern]){patternsToFetch.push(indexPattern)}})}return(0,_lodash.uniq)(patternsToFetch)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchFields=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var fetchFields=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPatterns=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["*"];var patterns,indexFields,fields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:patterns=Array.isArray(indexPatterns)?indexPatterns:[indexPatterns];_context.prev=1;_context.next=4;return Promise.all(patterns.map(function(pattern){return(0,_kfetch.kfetch)({method:"GET",pathname:"/api/metrics/fields",query:{index:pattern}})}));case 4:indexFields=_context.sent;fields=patterns.reduce(function(cumulatedFields,currentPattern,index){return _extends({},cumulatedFields,_defineProperty({},currentPattern,indexFields[index]))},{});return _context.abrupt("return",fields);case 9:_context.prev=9;_context.t0=_context["catch"](1);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("tsvb.fetchFields.loadIndexPatternFieldsErrorMessage",{defaultMessage:"Unable to load index_pattern fields"}),text:_context.t0.message});case 12:case"end":return _context.stop()}}},_callee,this,[[1,9]])}));return function fetchFields(){return _ref.apply(this,arguments)}}();var _kfetch=__webpack_require__(79);var _notify=__webpack_require__(10);var _i18n=__webpack_require__(8);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}exports.fetchFields=fetchFields},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1078);var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _vis_types=__webpack_require__(30);var _truncated_colormaps=__webpack_require__(108);var _util=__webpack_require__(445);var _region_map_visualization=__webpack_require__(1081);var _update_status=__webpack_require__(82);var _origin=__webpack_require__(87);_vis_types.VisTypesRegistryProvider.register(function RegionMapProvider(Private,regionmapsConfig,config,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);var RegionMapsVisualization=Private(_region_map_visualization.RegionMapsVisualizationProvider);var vectorLayers=regionmapsConfig.layers.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.KIBANA_YML));var selectedLayer=vectorLayers[0];var selectedJoinField=selectedLayer?vectorLayers[0].fields[0]:null;return VisFactory.createBaseVisualization({name:"region_map",title:i18n("regionMap.mapVis.regionMapTitle",{defaultMessage:"Region Map"}),description:i18n("regionMap.mapVis.regionMapDescription",{defaultMessage:"Show metrics on a thematic map. Use one of the provided base maps, or add your own. Darker colors represent higher values."}),icon:"visMapRegion",visConfig:{defaults:{legendPosition:"bottomright",addTooltip:true,colorSchema:"Yellow to Red",selectedLayer:selectedLayer,emsHotLink:"",selectedJoinField:selectedJoinField,isDisplayWarning:true,wms:config.get("visualization:tileMap:WMSdefaults"),mapZoom:2,mapCenter:[0,0],outlineWeight:1,showAllShapes:true}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA,_update_status.Status.UI_STATE],visualization:RegionMapsVisualization,editorConfig:{optionsTemplate:"<region_map-vis-params></region_map-vis-params>",collections:{legendPositions:[{value:"bottomleft",text:i18n("regionMap.mapVis.regionMapEditorConfig.bottomLeftText",{defaultMessage:"bottom left"})},{value:"bottomright",text:i18n("regionMap.mapVis.regionMapEditorConfig.bottomRightText",{defaultMessage:"bottom right"})},{value:"topleft",text:i18n("regionMap.mapVis.regionMapEditorConfig.topLeftText",{defaultMessage:"top left"})},{value:"topright",text:i18n("regionMap.mapVis.regionMapEditorConfig.topRightText",{defaultMessage:"top right"})}],colorSchemas:Object.values(_truncated_colormaps.truncatedColorMaps).map(function(value){return{id:value.id,label:value.label}}),vectorLayers:vectorLayers,tmsLayers:[]},schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("regionMap.mapVis.regionMapEditorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits","sum_bucket","min_bucket","max_bucket","avg_bucket"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-globe",title:i18n("regionMap.mapVis.regionMapEditorConfig.schemas.segmentTitle",{defaultMessage:"shape field"}),min:1,max:1,aggFilter:["terms"]}])}})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _notify=__webpack_require__(10);var _region_map_vis_params=__webpack_require__(1079);var _region_map_vis_params2=_interopRequireDefault(_region_map_vis_params);var _util=__webpack_require__(445);__webpack_require__(446);var _origin=__webpack_require__(87);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}_modules.uiModules.get("kibana/region_map").directive("regionMapVisParams",function(serviceSettings,regionmapsConfig){return{restrict:"E",template:_region_map_vis_params2.default,link:function link($scope){var onLayerChange=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if($scope.editorState.params.selectedLayer){_context.next=2;break}return _context.abrupt("return");case 2:$scope.editorState.params.selectedJoinField=$scope.editorState.params.selectedLayer.fields[0];if(!$scope.editorState.params.selectedLayer.isEMS){_context.next=11;break}$scope.editorState.params.emsHotLink=null;_context.next=7;return serviceSettings.getEMSHotLink($scope.editorState.params.selectedLayer);case 7:$scope.editorState.params.emsHotLink=_context.sent;$scope.$digest();_context.next=12;break;case 11:$scope.editorState.params.emsHotLink=null;case 12:case"end":return _context.stop()}}},_callee,this)}));return function onLayerChange(){return _ref.apply(this,arguments)}}();$scope.collections=$scope.vis.type.editorConfig.collections;$scope.onLayerChange=onLayerChange;if(regionmapsConfig.includeElasticMapsService){serviceSettings.getFileLayers().then(function(layersFromService){layersFromService=layersFromService.map(_util.mapToLayerWithId.bind(null,_origin.ORIGIN.EMS));var newVectorLayers=$scope.collections.vectorLayers.slice();var _loop=function _loop(i){var layerFromService=layersFromService[i];var alreadyAdded=newVectorLayers.some(function(layer){return layerFromService.layerId===layer.layerId});if(!alreadyAdded){if(layerFromService.format==="geojson"){layerFromService.format={type:"geojson"}}newVectorLayers.push(layerFromService)}};for(var i=0;i<layersFromService.length;i+=1){_loop(i)}$scope.collections.vectorLayers=newVectorLayers;if($scope.collections.vectorLayers[0]&&!$scope.editorState.params.selectedLayer){$scope.editorState.params.selectedLayer=$scope.collections.vectorLayers[0];onLayerChange()}setTimeout(function(){$scope.dirty=false},0);$scope.collections.vectorLayers=newVectorLayers;if($scope.collections.vectorLayers[0]&&!$scope.editorState.params.selectedLayer){$scope.editorState.params.selectedLayer=$scope.collections.vectorLayers[0];onLayerChange()}setTimeout(function(){$scope.dirty=false},0)}).catch(function(error){_notify.toastNotifications.addWarning(error.message)})}onLayerChange()}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="kuiSideBarSectionTitle">\n      <div\n        class="kuiSideBarSectionTitle__text"\n        i18n-id="regionMap.visParams.layerSettingsTitle"\n        i18n-default-message="Layer Settings"\n      ></div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="regionMap"\n        i18n-id="regionMap.visParams.vectorMapLabel"\n        i18n-default-message="Vector map"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="regionMap"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.selectedLayer"\n          ng-options="layer.name for layer in collections.vectorLayers track by layer.layerId"\n          ng-change="onLayerChange()"\n        ></select>\n      </div>\n    </div>\n\n    <div class="form-group clearfix" ng-hide="!editorState.params.emsHotLink">\n      <a\n        class="rgmEMSLink pull-right"\n        target="_blank"\n        rel="noopener"\n        ng-href="{{editorState.params.emsHotLink}}"\n        target="_blank"\n        title="{{\'regionMap.visParams.previewOnEMSLinkTitle\' | i18n: {\n          defaultMessage: \'Preview {selectedLayerName} on the Elastic Maps Service\',\n          values: { selectedLayerName: editorState.params.selectedLayer.name }\n        } }}"\n      >\n        <icon aria-hidden size="\'s\'" type="\'link\'" />\n        <span\n          i18n-id="regionMap.visParams.previewOnEMSLinkText"\n          i18n-default-message="Preview on EMS"\n        ></span>\n      </a>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="joinField"\n        i18n-id="regionMap.visParams.joinFieldLabel"\n        i18n-default-message="Join field"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <select id="joinField"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="editorState.params.selectedJoinField"\n          ng-options="field.description for field in editorState.params.selectedLayer.fields track by field.name"\n        >\n          <option\n            value=\'\'\n            i18n-id="regionMap.visParams.selectOptionLabel"\n            i18n-default-message="Select"\n          ></option>\n        </select>\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="displayWarnings"\n        i18n-id="regionMap.visParams.displayWarningsLabel"\n        i18n-default-message="Display warnings"\n      ></label>\n\n      <div class="kuiSideBarFormRow__control">\n        <input id="displayWarnings" type="checkbox" ng-model="editorState.params.isDisplayWarning">\n        &nbsp;\n        <icon-tip\n          content="::\'regionMap.visParams.switchWarningsTipText\' | i18n: {\n            defaultMessage: \'Turns on/off warnings. When turned on, warning will be shown for each term that cannot be matched to a shape in the vector layer based on the join field. When turned off, these warnings will be turned off.\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="onlyShowMatchingShapes"\n        i18n-id="regionMap.visParams.showAllShapesLabel"\n        i18n-default-message="Show all shapes"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <input id="onlyShowMatchingShapes" type="checkbox" ng-model="editorState.params.showAllShapes">\n        &nbsp;\n        <icon-tip\n          content="::\'regionMap.visParams.turnOffShowingAllShapesTipText\' | i18n: {\n            defaultMessage: \'Turning this off only shows the shapes that were matched with a corresponding term\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="kuiSideBarSection">\n\n  <div class="kuiSideBarSectionTitle">\n    <div\n      class="kuiSideBarSectionTitle__text"\n      i18n-id="regionMap.visParams.styleSettingsLabel"\n      i18n-default-message="Style settings"\n    ></div>\n  </div>\n  <div class="kuiSideBarFormRow" >\n    <label\n      class="kuiSideBarFormRow__label"\n      for="colorSchema"\n      i18n-id="regionMap.visParams.colorSchemaLabel"\n      i18n-default-message="Color Schema"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="colorSchema"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode.id as mode.label for mode in collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n  <div class="kuiSideBarFormRow" >\n    <label\n      class="kuiSideBarFormRow__label"\n      for="outlineWeight"\n      i18n-id="regionMap.visParams.outlineWeightLabel"\n      i18n-default-message="Outline weight"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <input\n        id="outlineWeight"\n        class="kuiInput kuiSideBarInput"\n        type="number"\n        ng-model="editorState.params.outlineWeight"\n      >\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms" collections="collections"></wms-options>'},function(module,exports){module.exports='<div>\n\n\n  <div class="kuiSideBarSection">\n    <div class="kuiSideBarSectionTitle">\n      <div\n        class="kuiSideBarSectionTitle__text"\n        i18n-id="tileMap.wmsOptions.baseLayerSettingsTitle"\n        i18n-default-message="Base Layer Settings"\n      ></div>\n    </div>\n\n\n    <div class="kuiSideBarFormRow" ng-show="!options.enabled">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="tmsLayers"\n        i18n-id="tileMap.wmsOptions.layersLabel"\n        i18n-default-message="Layers"\n      ></label>\n      <div class="kuiSideBarFormRow__control">\n        <select\n          id="tmsLayers"\n          class="kuiSelect kuiSideBarSelect"\n          ng-model="options.selectedTmsLayer"\n          ng-options="layer.id for layer in collections.tmsLayers track by layer.id"\n        ></select>\n      </div>\n    </div>\n\n    <div class="kuiSideBarFormRow">\n      <label\n        class="kuiSideBarFormRow__label"\n        for="wmsCompliantMapServer"\n        i18n-id="tileMap.wmsOptions.wmsMapServerLabel"\n        i18n-default-message="WMS map server"\n      ></label>\n\n      <div class="kuiSideBarFormRow__control">\n        <input\n          id="wmsCompliantMapServer"\n          type="checkbox"\n          name="wms.enabled"\n          ng-model="options.enabled"\n        >\n        &nbsp;\n        <icon-tip\n          content="::\'tileMap.wmsOptions.useWMSCompliantMapTileServerTip\' | i18n: {\n            defaultMessage: \'Use WMS compliant map tile server. For advanced users only.\'\n          }"\n          position="\'right\'"\n        ></icon-tip>\n      </div>\n    </div>\n\n    <div ng-show="options.enabled">\n      <div class="form-group">\n        <p\n          i18n-id="tileMap.wmsOptions.wmsDescription"\n          i18n-default-message="WMS is an OGC standard for map image services. For more information, go {wmsLink}."\n          i18n-values="{\n            html_wmsLink:  \'<a href=\\\'http://www.opengeospatial.org/standards/wms\\\'>\' + wmsLinkText + \'</a>\'\n          }"\n        ></p>\n\t\t<br>\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsUrlLabel"\n            i18n-default-message="WMS url*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.urlOfWMSWebServiceTip\' | i18n: {\n              defaultMessage: \'The URL of the WMS web service\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.url"\n               ng-model="options.url">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsLayersLabel"\n            i18n-default-message="WMS layers*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.listOfLayersToUseTip\' | i18n: {\n              defaultMessage: \'A comma separated list of layers to use\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               ng-require="options.enabled"\n               name="wms.options.layers"\n               ng-model="options.options.layers">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsVersionLabel"\n            i18n-default-message="WMS version*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.versionOfWMSserverSupportsTip\' | i18n: {\n              defaultMessage: \'The version of WMS the server supports\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.version"\n               ng-model="options.options.version">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsFormatLabel"\n            i18n-default-message="WMS format*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.imageFormatToUseTip\' | i18n: {\n              defaultMessage: \'Usually image/png or image/jpeg. Use png if the server will return transparent layers.\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.format"\n               ng-model="options.options.format">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsAttributionLabel"\n            i18n-default-message="WMS attribution"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.attributionStringTip\' | i18n: {\n              defaultMessage: \'Attribution string for the lower right corner\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.attribution"\n               ng-model="options.options.attribution">\n      </div>\n\n      <div class="form-group">\n        <label>\n          <span\n            i18n-id="tileMap.wmsOptions.wmsStylesLabel"\n            i18n-default-message="WMS styles*"\n          ></span>\n          <icon-tip\n            content="::\'tileMap.wmsOptions.wmsServerSupportedStylesListTip\' | i18n: {\n              defaultMessage: \'A comma separated list of WMS server supported styles to use. Blank in most cases.\'\n            }"\n            position="\'right\'"\n          ></icon-tip>\n        </label>\n        <input type="text" class="form-control"\n               name="wms.options.styles"\n               ng-model="options.options.styles">\n      </div>\n\n      <p\n        i18n-id="tileMap.wmsOptions.mapLoadFailDescription"\n        i18n-default-message="* if this parameter is incorrect, maps will fail to load."\n      ></p>\n\n\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};exports.RegionMapsVisualizationProvider=RegionMapsVisualizationProvider;__webpack_require__(271);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _base_maps_visualization=__webpack_require__(447);var _choropleth_layer=__webpack_require__(1088);var _choropleth_layer2=_interopRequireDefault(_choropleth_layer);var _truncated_colormaps=__webpack_require__(108);var _tooltip_formatter=__webpack_require__(1090);var _tooltip_formatter2=_interopRequireDefault(_tooltip_formatter);__webpack_require__(449);var _notify=__webpack_require__(10);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function RegionMapsVisualizationProvider(Private,config,i18n){var tooltipFormatter=Private(_tooltip_formatter2.default);var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);return function(_BaseMapsVisualizatio){_inherits(RegionMapsVisualization,_BaseMapsVisualizatio);function RegionMapsVisualization(container,vis){_classCallCheck(this,RegionMapsVisualization);var _this=_possibleConstructorReturn(this,(RegionMapsVisualization.__proto__||Object.getPrototypeOf(RegionMapsVisualization)).call(this,container,vis));_this._vis=_this.vis;_this._choroplethLayer=null;return _this}_createClass(RegionMapsVisualization,[{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(esResponse,status){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(RegionMapsVisualization.prototype.__proto__||Object.getPrototypeOf(RegionMapsVisualization.prototype),"render",this).call(this,esResponse,status);case 2:if(!this._choroplethLayer){_context.next=5;break}_context.next=5;return this._choroplethLayer.whenDataLoaded();case 5:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"_updateData",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(table){var results,termColumn,valueColumn,metricsAgg;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._chartData=table;results=void 0;if(!table||!table.rows.length||table.columns.length!==2){results=[]}else{termColumn=table.columns[0].id;valueColumn=table.columns[1].id;results=table.rows.map(function(row){var term=row[termColumn];var value=row[valueColumn];return{term:term,value:value}})}if(!this._vis.params.selectedJoinField&&this._vis.params.selectedLayer){this._vis.params.selectedJoinField=this._vis.params.selectedLayer.fields[0]}if(this._vis.params.selectedLayer){_context2.next=6;break}return _context2.abrupt("return");case 6:this._updateChoroplethLayerForNewMetrics(this._vis.params.selectedLayer.name,this._vis.params.selectedLayer.attribution,this._vis.params.showAllShapes,results);metricsAgg=_lodash2.default.first(this._vis.getAggConfig().bySchemaName.metric);this._choroplethLayer.setMetrics(results,metricsAgg);this._setTooltipFormatter();this._kibanaMap.useUiStateFromVisualization(this._vis);case 11:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x3){return _ref2.apply(this,arguments)}return _updateData}()},{key:"_updateParams",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var visParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(RegionMapsVisualization.prototype.__proto__||Object.getPrototypeOf(RegionMapsVisualization.prototype),"_updateParams",this).call(this);case 2:visParams=this.vis.params;if(!visParams.selectedJoinField&&visParams.selectedLayer){visParams.selectedJoinField=visParams.selectedLayer.fields[0]}if(!(!visParams.selectedJoinField||!visParams.selectedLayer)){_context3.next=6;break}return _context3.abrupt("return");case 6:this._updateChoroplethLayerForNewProperties(visParams.selectedLayer.name,visParams.selectedLayer.attribution,this._vis.params.showAllShapes);this._choroplethLayer.setJoinField(visParams.selectedJoinField.name);this._choroplethLayer.setColorRamp(_truncated_colormaps.truncatedColorMaps[visParams.colorSchema].value);this._choroplethLayer.setLineWeight(visParams.outlineWeight);this._setTooltipFormatter();case 11:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _ref3.apply(this,arguments)}return _updateParams}()},{key:"_updateChoroplethLayerForNewMetrics",value:function _updateChoroplethLayerForNewMetrics(name,attribution,showAllData,newMetrics){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstanceForNewMetrics(name,showAllData,newMetrics)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_updateChoroplethLayerForNewProperties",value:function _updateChoroplethLayerForNewProperties(name,attribution,showAllData){if(this._choroplethLayer&&this._choroplethLayer.canReuseInstance(name,showAllData)){return}return this._recreateChoroplethLayer(name,attribution,showAllData)}},{key:"_recreateChoroplethLayer",value:function _recreateChoroplethLayer(name,attribution,showAllData){var _this2=this;this._kibanaMap.removeLayer(this._choroplethLayer);if(this._choroplethLayer){this._choroplethLayer=this._choroplethLayer.cloneChoroplethLayerForNewData(name,attribution,this.vis.params.selectedLayer.format,showAllData,this.vis.params.selectedLayer.meta,this.vis.params.selectedLayer)}else{this._choroplethLayer=new _choropleth_layer2.default(name,attribution,this.vis.params.selectedLayer.format,showAllData,this.vis.params.selectedLayer.meta,this.vis.params.selectedLayer)}this._choroplethLayer.on("select",function(event){if(!_this2._isAggReady()){return}var rowIndex=_this2._chartData.rows.findIndex(function(row){return row[0]===event});_this2._vis.API.events.filter({table:_this2._chartData,column:0,row:rowIndex,value:event})});this._choroplethLayer.on("styleChanged",function(event){var shouldShowWarning=_this2._vis.params.isDisplayWarning&&config.get("visualization:regionmap:showWarnings");if(event.mismatches.length>0&&shouldShowWarning){_notify.toastNotifications.addWarning({title:i18n("regionMap.visualization.unableToShowMismatchesWarningTitle",{defaultMessage:"Unable to show {mismatchesLength} {oneMismatch, plural, one {result} other {results}} on map",values:{mismatchesLength:event.mismatches.length,oneMismatch:event.mismatches.length>1?0:1}}),text:i18n("regionMap.visualization.unableToShowMismatchesWarningText",{defaultMessage:"Ensure that each of these term matches a shape on that shape's join field: {mismatches}",values:{mismatches:event.mismatches?event.mismatches.join(", "):""}})})}});this._kibanaMap.addLayer(this._choroplethLayer)}},{key:"_isAggReady",value:function _isAggReady(){return this._vis.getAggConfig().bySchemaName.segment&&this._vis.getAggConfig().bySchemaName.segment[0]}},{key:"_setTooltipFormatter",value:function _setTooltipFormatter(){var metricsAgg=_lodash2.default.first(this._vis.getAggConfig().bySchemaName.metric);if(this._isAggReady()){var fieldName=this._vis.getAggConfig().bySchemaName.segment[0].makeLabel();this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricsAgg,fieldName)}else{this._choroplethLayer.setTooltipFormatter(tooltipFormatter,metricsAgg,null)}}}]);return RegionMapsVisualization}(BaseMapsVisualization)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createZoomWarningMsg=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _notify=__webpack_require__(10);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var createZoomWarningMsg=exports.createZoomWarningMsg=function(){var disableZoomMsg=false;var setZoomMsg=function setZoomMsg(boolDisableMsg){return disableZoomMsg=boolDisableMsg};var ZoomWarning=function(_React$Component){_inherits(ZoomWarning,_React$Component);function ZoomWarning(props){_classCallCheck(this,ZoomWarning);var _this=_possibleConstructorReturn(this,(ZoomWarning.__proto__||Object.getPrototypeOf(ZoomWarning)).call(this,props));_this.state={disabled:false};return _this}_createClass(ZoomWarning,[{key:"render",value:function render(){var _this2=this;return _react2.default.createElement("div",null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.vis.kibanaMap.zoomWarning",defaultMessage:"You've reached the maximum number of zoom levels. To zoom all the way in, upgrade to the {defaultDistribution} of Elasticsearch and Kibana. You'll get access to additional zoom levels for free through the {ems}. Or, you can configure your own map server. Please go to { wms } or { configSettings} for more information.",values:{defaultDistribution:_react2.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/downloads/kibana"},"default distribution "),ems:_react2.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/elastic-maps-service"},"Elastic Maps Service"),wms:_react2.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/tilemap.html"},"Custom WMS Configuration"),configSettings:_react2.default.createElement("a",{target:"_blank",href:"https://www.elastic.co/guide/en/kibana/current/settings.html"},"Custom TMS Using Config Settings")}})),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",isDisabled:this.state.disabled,onClick:function onClick(){_this2.setState({disabled:true},function(){return _this2.props.onChange(_this2.state.disabled)})},"data-test-subj":"suppressZoomWarnings"},"Don't show again"))}}]);return ZoomWarning}(_react2.default.Component);var zoomToast={title:"No additional zoom levels",text:_react2.default.createElement(ZoomWarning,{onChange:setZoomMsg}),"data-test-subj":"maxZoomWarning"};return function(getZoomLevel,getMaxZoomLevel){return function(){var zoomLevel=getZoomLevel();var maxMapZoom=getMaxZoomLevel();if(!disableZoomMsg&&zoomLevel===maxMapZoom){_notify.toastNotifications.addDanger(zoomToast)}}}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zoomToPrecision=zoomToPrecision;var _decode_geo_hash=__webpack_require__(297);var maxPrecision=12;var zoomPrecisionMap={};var minGeohashPixels=16;function calculateZoomToPrecisionMap(maxZoom){for(var zoom=0;zoom<=maxZoom;zoom+=1){if(typeof zoomPrecisionMap[zoom]==="number"){continue}var worldPixels=256*Math.pow(2,zoom);zoomPrecisionMap[zoom]=1;for(var precision=2;precision<=maxPrecision;precision+=1){var columns=(0,_decode_geo_hash.geohashColumns)(precision);if(worldPixels/columns>=minGeohashPixels){zoomPrecisionMap[zoom]=precision}else{break}}}}function zoomToPrecision(mapZoom,maxPrecision,maxZoom){calculateZoomToPrecisionMap(typeof maxZoom==="number"?maxZoom:21);return Math.min(zoomPrecisionMap[mapZoom],maxPrecision)}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.EMSClientV66=undefined;var _markdownIt=__webpack_require__(101);var _markdownIt2=_interopRequireDefault(_markdownIt);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _tms_service=__webpack_require__(1085);var _file_layer=__webpack_require__(1086);var _nodeFetch=__webpack_require__(1114);var _nodeFetch2=_interopRequireDefault(_nodeFetch);var _url=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var extendUrl=function extendUrl(url,props){return modifyUrlLocal(url,function(parsed){return _lodash2.default.merge(parsed,props)})};var markdownIt=new _markdownIt2.default({html:false,linkify:true});function modifyUrlLocal(url,block){var parsed=(0,_url.parse)(url,true);var meaningfulParts={protocol:parsed.protocol,slashes:parsed.slashes,auth:parsed.auth,hostname:parsed.hostname,port:parsed.port,pathname:parsed.pathname,query:parsed.query||{},hash:parsed.hash};var modifiedParts=block(meaningfulParts)||meaningfulParts;return(0,_url.format)({protocol:modifiedParts.protocol,slashes:modifiedParts.slashes,auth:modifiedParts.auth,hostname:modifiedParts.hostname,port:modifiedParts.port,pathname:modifiedParts.pathname,query:modifiedParts.query,hash:modifiedParts.hash})}var unescapeTemplateVars=function unescapeTemplateVars(url){var ENCODED_TEMPLATE_VARS_RE=/%7B(\w+?)%7D/g;return url.replace(ENCODED_TEMPLATE_VARS_RE,function(total,varName){return"{"+varName+"}"})};var DEFAULT_LANGUAGE="en";var EMSClientV66=function(){function EMSClientV66(_ref){var kbnVersion=_ref.kbnVersion,manifestServiceUrl=_ref.manifestServiceUrl,htmlSanitizer=_ref.htmlSanitizer,language=_ref.language,landingPageUrl=_ref.landingPageUrl;_classCallCheck(this,EMSClientV66);this.EMS_LOAD_TIMEOUT=32e3;this._queryParams={my_app_version:kbnVersion};this._sanitizer=htmlSanitizer?htmlSanitizer:function(x){return x};this._manifestServiceUrl=manifestServiceUrl;this._loadFileLayers=null;this._loadTMSServices=null;this._emsLandingPageUrl=typeof landingPageUrl==="string"?landingPageUrl:"";this._language=typeof language==="string"?language:DEFAULT_LANGUAGE;this._invalidateSettings()}_createClass(EMSClientV66,[{key:"getLocale",value:function getLocale(){return this._language}},{key:"getValueInLanguage",value:function getValueInLanguage(i18nObject){if(!i18nObject){return""}return i18nObject[this._language]?i18nObject[this._language]:i18nObject[DEFAULT_LANGUAGE]}},{key:"_getManifest",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(manifestUrl){var result,url;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result=void 0;_context.prev=1;url=extendUrl(manifestUrl,{query:this._queryParams});_context.next=5;return this._fetchWithTimeout(url);case 5:result=_context.sent;_context.next=13;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);if(!_context.t0){_context.t0=new Error("Unknown error")}if(!(_context.t0 instanceof Error)){_context.t0=new Error(_context.t0.data||"status "+(_context.t0.statusText||_context.t0.status))}throw new Error("Unable to retrieve manifest from "+manifestUrl+": "+_context.t0.message);case 13:_context.prev=13;if(!result){_context.next=20;break}_context.next=17;return result.json();case 17:_context.t1=_context.sent;_context.next=21;break;case 20:_context.t1=null;case 21:return _context.abrupt("return",_context.t1);case 23:case"end":return _context.stop()}}},_callee,this,[[1,8,13,23]])}));function _getManifest(_x){return _ref2.apply(this,arguments)}return _getManifest}()},{key:"_fetchWithTimeout",value:function _fetchWithTimeout(url){var _this=this;return new Promise(function(resolve,reject){var timer=setTimeout(function(){return reject(new Error("Request to "+url+" timed out"))},_this.EMS_LOAD_TIMEOUT);(0,_nodeFetch2.default)(url).then(function(response){clearTimeout(timer);resolve(response)},function(err){clearTimeout(timer);reject(err)})})}},{key:"addQueryParams",value:function addQueryParams(additionalQueryParams){for(var key in additionalQueryParams){if(additionalQueryParams.hasOwnProperty(key)){if(additionalQueryParams[key]!==this._queryParams[key]){this._queryParams=_lodash2.default.assign({},this._queryParams,additionalQueryParams);this._invalidateSettings();break}}}}},{key:"_invalidateSettings",value:function _invalidateSettings(){var _this2=this;this._getManifestWithParams=_lodash2.default.once(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(url){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",_this2._getManifest(_this2.extendUrlWithParams(url)));case 1:case"end":return _context2.stop()}}},_callee2,_this2)}));return function(_x2){return _ref3.apply(this,arguments)}}());this._getCatalogueService=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(serviceType){var catalogueManifest,service;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2._getManifestWithParams(_this2._manifestServiceUrl);case 2:catalogueManifest=_context3.sent;service=void 0;if(_lodash2.default.has(catalogueManifest,"services")){service=catalogueManifest.services.find(function(s){return s.type===serviceType})}return _context3.abrupt("return",service||{});case 6:case"end":return _context3.stop()}}},_callee3,_this2)}));return function(_x3){return _ref4.apply(this,arguments)}}();this._wrapServiceAttribute=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(manifestUrl,attr,WrapperClass){var manifest;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _this2._getManifest(manifestUrl);case 2:manifest=_context4.sent;if(!_lodash2.default.has(manifest,attr)){_context4.next=5;break}return _context4.abrupt("return",manifest[attr].map(function(config){return new WrapperClass(config,_this2)}));case 5:return _context4.abrupt("return",[]);case 6:case"end":return _context4.stop()}}},_callee4,_this2)}));return function(_x4,_x5,_x6){return _ref5.apply(this,arguments)}}();this._loadFileLayers=_lodash2.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var fileService;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _this2._getCatalogueService("file");case 2:fileService=_context5.sent;return _context5.abrupt("return",_lodash2.default.isEmpty(fileService)?[]:_this2._wrapServiceAttribute(fileService.manifest,"layers",_file_layer.FileLayer));case 4:case"end":return _context5.stop()}}},_callee5,_this2)})));this._loadTMSServices=_lodash2.default.once(_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var tmsService;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this2._getCatalogueService("tms");case 2:tmsService=_context6.sent;if(!_lodash2.default.isEmpty(tmsService)){_context6.next=7;break}_context6.t0=[];_context6.next=10;break;case 7:_context6.next=9;return _this2._wrapServiceAttribute(tmsService.manifest,"services",_tms_service.TMSService);case 9:_context6.t0=_context6.sent;case 10:return _context6.abrupt("return",_context6.t0);case 11:case"end":return _context6.stop()}}},_callee6,_this2)})))}},{key:"getLandingPageUrl",value:function getLandingPageUrl(){return this._emsLandingPageUrl}},{key:"sanitizeMarkdown",value:function sanitizeMarkdown(markdown){return this._sanitizer(markdownIt.render(markdown))}},{key:"sanitizeHtml",value:function sanitizeHtml(html){return this._sanitizer(html)}},{key:"extendUrlWithParams",value:function extendUrlWithParams(url){return unescapeTemplateVars(extendUrl(url,{query:this._queryParams}))}},{key:"getFileLayers",value:function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this._loadFileLayers();case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop()}}},_callee7,this)}));function getFileLayers(){return _ref8.apply(this,arguments)}return getFileLayers}()},{key:"getTMSServices",value:function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this._loadTMSServices();case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}},_callee8,this)}));function getTMSServices(){return _ref9.apply(this,arguments)}return getTMSServices}()},{key:"findFileLayerById",value:function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(id){var fileLayers,i;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.getFileLayers();case 2:fileLayers=_context9.sent;i=0;case 4:if(!(i<fileLayers.length)){_context9.next=10;break}if(!fileLayers[i].hasId(id)){_context9.next=7;break}return _context9.abrupt("return",fileLayers[i]);case 7:i++;_context9.next=4;break;case 10:case"end":return _context9.stop()}}},_callee9,this)}));function findFileLayerById(_x7){return _ref10.apply(this,arguments)}return findFileLayerById}()},{key:"findTMSServiceById",value:function(){var _ref11=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(id){var tmsServices,i;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.getTMSServices();case 2:tmsServices=_context10.sent;i=0;case 4:if(!(i<tmsServices.length)){_context10.next=10;break}if(!tmsServices[i].hasId(id)){_context10.next=7;break}return _context10.abrupt("return",tmsServices[i]);case 7:i++;_context10.next=4;break;case 10:case"end":return _context10.stop()}}},_callee10,this)}));function findTMSServiceById(_x8){return _ref11.apply(this,arguments)}return findTMSServiceById}()}]);return EMSClientV66}();exports.EMSClientV66=EMSClientV66},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.TMSService=undefined;var _origin=__webpack_require__(87);var TMSService=function(){function TMSService(config,emsClient){_classCallCheck(this,TMSService);this._config=config;this._emsClient=emsClient}_createClass(TMSService,[{key:"getUrlTemplate",value:function getUrlTemplate(){return this._emsClient.extendUrlWithParams(this._config.url)}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){return this._emsClient.sanitizeMarkdown(this._config.attribution)}},{key:"getMarkdownAttribution",value:function getMarkdownAttribution(){return this._config.attribution}},{key:"getMinZoom",value:function getMinZoom(){return this._config.minZoom}},{key:"getMaxZoom",value:function getMaxZoom(){return this._config.maxZoom}},{key:"getId",value:function getId(){return this._config.id}},{key:"hasId",value:function hasId(id){return this._config.id===id}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return TMSService}();exports.TMSService=TMSService},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.FileLayer=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _origin=__webpack_require__(87);var _url=__webpack_require__(28);var _url2=_interopRequireDefault(_url);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileLayer=function(){function FileLayer(config,emsClient){_classCallCheck(this,FileLayer);this._config=config;this._emsClient=emsClient}_createClass(FileLayer,[{key:"getAttributions",value:function getAttributions(){var _this=this;var attributions=this._config.attribution.map(function(attribution){var url=_this._emsClient.getValueInLanguage(attribution.url);var label=_this._emsClient.getValueInLanguage(attribution.label);return{url:url,label:label}});return attributions}},{key:"getHTMLAttribution",value:function getHTMLAttribution(){var _this2=this;var attributions=this._config.attribution.map(function(attribution){var url=_this2._emsClient.getValueInLanguage(attribution.url);var label=_this2._emsClient.getValueInLanguage(attribution.label);var html=url?"<a href="+url+">"+label+"</a>":label;return _this2._emsClient.sanitizeHtml(html)});return attributions.join(" | ");//!!!this is the current convention used in Kibana
}},{key:"getFieldsInLanguage",value:function getFieldsInLanguage(){var _this3=this;return this._config.fields.map(function(field){return{type:field.type,name:field.id,description:_this3._emsClient.getValueInLanguage(field.label)}})}},{key:"getDisplayName",value:function getDisplayName(){var layerName=this._emsClient.getValueInLanguage(this._config.layer_name);return layerName?layerName:""}},{key:"getId",value:function getId(){return this._config.layer_id}},{key:"hasId",value:function hasId(id){var matchesLegacyId=this._config.legacy_ids.indexOf(id)>=0;return this._config.layer_id===id||matchesLegacyId}},{key:"_getDefaultFormat",value:function _getDefaultFormat(){var defaultFormat=this._config.formats.find(function(format){return format.legacy_default});if(defaultFormat){return defaultFormat}return this._config.formats[0]}},{key:"getEMSHotLink",value:function getEMSHotLink(){var landingPageString=this._emsClient.getLandingPageUrl();var urlObject=_url2.default.parse(landingPageString);urlObject.hash="file/"+this.getId();urlObject.query=_extends({},urlObject.query,{locale:this._emsClient.getLocale()});return _url2.default.format(urlObject)}},{key:"getDefaultFormatType",value:function getDefaultFormatType(){var format=this._getDefaultFormat();return format.type}},{key:"getDefaultFormatMeta",value:function getDefaultFormatMeta(){var format=this._getDefaultFormat();return format.meta}},{key:"getDefaultFormatUrl",value:function getDefaultFormatUrl(){var format=this._getDefaultFormat();return this._emsClient.extendUrlWithParams(format.url)}},{key:"getCreatedAt",value:function getCreatedAt(){return this._config.created_at}},{key:"getOrigin",value:function getOrigin(){return _origin.ORIGIN.EMS}}]);return FileLayer}();exports.FileLayer=FileLayer},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2010)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(13);var _d2=_interopRequireDefault(_d);var _i18n=__webpack_require__(8);var _kibana_map_layer=__webpack_require__(298);var _truncated_colormaps=__webpack_require__(108);var _modules=__webpack_require__(3);var _topojsonClient=__webpack_require__(1134);var topojson=_interopRequireWildcard(_topojsonClient);var _notify=__webpack_require__(10);var _color_util=__webpack_require__(450);var colorUtil=_interopRequireWildcard(_color_util);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EMPTY_STYLE={weight:1,opacity:.6,color:"rgb(200,200,200)",fillOpacity:0};var emsServiceSettings=new Promise(function(resolve){_modules.uiModules.get("kibana").run(function($injector){var serviceSttings=$injector.get("serviceSettings");resolve(serviceSttings)})});var ChoroplethLayer=function(_KibanaMapLayer){_inherits(ChoroplethLayer,_KibanaMapLayer);_createClass(ChoroplethLayer,null,[{key:"_doInnerJoin",value:function _doInnerJoin(sortedMetrics,sortedGeojsonFeatures,joinField){var j=0;for(var i=0;i<sortedGeojsonFeatures.length;i++){var property=sortedGeojsonFeatures[i].properties[joinField];sortedGeojsonFeatures[i].__kbnJoinedMetric=null;var position=sortedMetrics.length?compareLexicographically(property,sortedMetrics[j].term):-1;if(position===-1){}else if(position===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j]}else if(position===1){while(j<sortedMetrics.length){var newTerm=sortedMetrics[j].term;var newPosition=compareLexicographically(newTerm,property);if(newPosition===-1){}else if(newPosition===0){sortedGeojsonFeatures[i].__kbnJoinedMetric=sortedMetrics[j];break}else if(newPosition===1){break}if(j===sortedMetrics.length-1){break}else{j++}}}}}}]);function ChoroplethLayer(name,attribution,format,showAllShapes,meta,layerConfig){var _this2=this;_classCallCheck(this,ChoroplethLayer);var _this=_possibleConstructorReturn(this,(ChoroplethLayer.__proto__||Object.getPrototypeOf(ChoroplethLayer)).call(this));_this._metrics=null;_this._joinField=null;_this._colorRamp=_truncated_colormaps.truncatedColorMaps[Object.keys(_truncated_colormaps.truncatedColorMaps)[0]].value;_this._lineWeight=1;_this._tooltipFormatter=function(){return""};_this._attribution=attribution;_this._boundsOfData=null;_this._showAllShapes=showAllShapes;_this._layerName=name;_this._layerConfig=layerConfig;_this._leafletLayer=_leaflet2.default.geoJson(null,{onEachFeature:function onEachFeature(feature,layer){layer.on("click",function(){_this.emit("select",feature.properties[_this._joinField])});var location=null;layer.on({mouseover:function mouseover(){var tooltipContents=_this._tooltipFormatter(feature);if(!location){var leafletGeojson=_leaflet2.default.geoJson(feature);location=leafletGeojson.getBounds().getCenter()}_this.emit("showTooltip",{content:tooltipContents,position:location})},mouseout:function mouseout(){_this.emit("hideTooltip")}})},style:_this._makeEmptyStyleFunction()});_this._loaded=false;_this._error=false;_this._isJoinValid=false;_this._whenDataLoaded=new Promise(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve){var data,featureCollection,formatType,features,errorMessage;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this._makeJsonAjaxCall();case 3:data=_context.sent;featureCollection=void 0;formatType=void 0;if(typeof format==="string"){formatType=format}else if(format&&format.type){formatType=format.type}else{formatType="geojson"}if(!(formatType==="geojson")){_context.next=11;break}featureCollection=data;_context.next=17;break;case 11:if(!(formatType==="topojson")){_context.next=16;break}features=_lodash2.default.get(data,"objects."+meta.feature_collection_path);featureCollection=topojson.feature(data,features);_context.next=17;break;case 16:throw new Error(_i18n.i18n.translate("regionMap.choroplethLayer.unrecognizedFormatErrorMessage",{defaultMessage:"Unrecognized format {formatType}",values:{formatType:formatType}}));case 17:_this._sortedFeatures=featureCollection.features.slice();_this._sortFeatures();if(showAllShapes){_this._leafletLayer.addData(featureCollection)}else{}_this._loaded=true;_this._setStyle();resolve();_context.next=33;break;case 25:_context.prev=25;_context.t0=_context["catch"](0);_this._loaded=true;_this._error=true;errorMessage=void 0;if(_context.t0.status===404){errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorData404ErrorMessage",{defaultMessage:"Server responding with '404' when attempting to fetch {name}. Make sure the file exists at that location.",values:{name:name}})}else{errorMessage=_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessage",{defaultMessage:"Cannot download {name} file. Please ensure the CORS configuration of the server permits requests from the Kibana application on this host.",values:{name:name}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("regionMap.choroplethLayer.downloadingVectorDataErrorMessageTitle",{defaultMessage:"Error downloading vector data"}),text:errorMessage});resolve();case 33:case"end":return _context.stop()}}},_callee,_this2,[[0,25]])}));return function(_x){return _ref.apply(this,arguments)}}());return _this}_createClass(ChoroplethLayer,[{key:"_makeJsonAjaxCall",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var serviceSettings;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return emsServiceSettings;case 2:serviceSettings=_context2.sent;return _context2.abrupt("return",serviceSettings.getJsonForRegionLayer(this._layerConfig));case 4:case"end":return _context2.stop()}}},_callee2,this)}));function _makeJsonAjaxCall(){return _ref2.apply(this,arguments)}return _makeJsonAjaxCall}()},{key:"_invalidateJoin",value:function _invalidateJoin(){this._isJoinValid=false}},{key:"_doInnerJoin",value:function _doInnerJoin(){ChoroplethLayer._doInnerJoin(this._metrics,this._sortedFeatures,this._joinField);this._isJoinValid=true}},{key:"_setStyle",value:function _setStyle(){if(this._error||!this._loaded||!this._metrics||!this._joinField){return}if(!this._isJoinValid){this._doInnerJoin();if(!this._showAllShapes){var featureCollection={type:"FeatureCollection",features:this._sortedFeatures.filter(function(feature){return feature.__kbnJoinedMetric})};this._leafletLayer.addData(featureCollection)}}var styler=this._makeChoroplethStyler();this._leafletLayer.setStyle(styler.leafletStyleFunction);if(this._metrics&&this._metrics.length>0){var _getMinMax=getMinMax(this._metrics),min=_getMinMax.min,max=_getMinMax.max;this._legendColors=colorUtil.getLegendColors(this._colorRamp);var quantizeDomain=min!==max?[min,max]:_d2.default.scale.quantize().domain();this._legendQuantizer=_d2.default.scale.quantize().domain(quantizeDomain).range(this._legendColors)}this._boundsOfData=styler.getLeafletBounds();this.emit("styleChanged",{mismatches:styler.getMismatches()})}},{key:"getUrl",value:function getUrl(){return this._layerName}},{key:"setTooltipFormatter",value:function setTooltipFormatter(tooltipFormatter,metricsAgg,fieldName){var _this3=this;this._tooltipFormatter=function(geojsonFeature){if(!_this3._metrics){return""}var match=_this3._metrics.find(function(bucket){return compareLexicographically(bucket.term,geojsonFeature.properties[_this3._joinField])===0});return tooltipFormatter(metricsAgg,match,fieldName)}}},{key:"setJoinField",value:function setJoinField(joinfield){if(joinfield===this._joinField){return}this._joinField=joinfield;this._sortFeatures();this._setStyle()}},{key:"cloneChoroplethLayerForNewData",value:function cloneChoroplethLayerForNewData(name,attribution,format,showAllData,meta,layerConfig){var clonedLayer=new ChoroplethLayer(name,attribution,format,showAllData,meta,layerConfig);clonedLayer.setJoinField(this._joinField);clonedLayer.setColorRamp(this._colorRamp);clonedLayer.setLineWeight(this._lineWeight);clonedLayer.setTooltipFormatter(this._tooltipFormatter);if(this._metrics&&this._metricsAgg){clonedLayer.setMetrics(this._metrics,this._metricsAgg)}return clonedLayer}},{key:"_sortFeatures",value:function _sortFeatures(){var _this4=this;if(this._sortedFeatures&&this._joinField){this._sortedFeatures.sort(function(a,b){var termA=a.properties[_this4._joinField];var termB=b.properties[_this4._joinField];return compareLexicographically(termA,termB)});this._invalidateJoin()}}},{key:"whenDataLoaded",value:function whenDataLoaded(){return this._whenDataLoaded}},{key:"setMetrics",value:function setMetrics(metrics,metricsAgg){this._metrics=metrics.slice();this._metricsAgg=metricsAgg;this._valueFormatter=this._metricsAgg.fieldFormatter();this._metrics.sort(function(a,b){return compareLexicographically(a.term,b.term)});this._invalidateJoin();this._setStyle()}},{key:"setColorRamp",value:function setColorRamp(colorRamp){if(_lodash2.default.isEqual(colorRamp,this._colorRamp)){return}this._colorRamp=colorRamp;this._setStyle()}},{key:"setLineWeight",value:function setLineWeight(lineWeight){if(this._lineWeight===lineWeight){return}this._lineWeight=lineWeight;this._setStyle()}},{key:"canReuseInstance",value:function canReuseInstance(name,showAllShapes){return this._layerName===name&&this._showAllShapes===showAllShapes}},{key:"canReuseInstanceForNewMetrics",value:function canReuseInstanceForNewMetrics(name,showAllShapes,newMetrics){if(this._layerName!==name){return false}if(showAllShapes){return this._showAllShapes===showAllShapes}if(!this._metrics){return}var currentKeys=Object.keys(this._metrics);var newKeys=Object.keys(newMetrics);return _lodash2.default.isEqual(currentKeys,newKeys)}},{key:"getBounds",value:function getBounds(){var bounds=_get(ChoroplethLayer.prototype.__proto__||Object.getPrototypeOf(ChoroplethLayer.prototype),"getBounds",this).call(this);return this._boundsOfData?this._boundsOfData:bounds}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){var _this5=this;if(!this._legendColors||!this._legendQuantizer||!this._metricsAgg){return}var titleText=this._metricsAgg.makeLabel();var $title=(0,_jquery2.default)("<div>").addClass("visMapLegend__title").text(titleText);jqueryDiv.append($title);this._legendColors.forEach(function(color){var labelText=_this5._legendQuantizer.invertExtent(color).map(_this5._valueFormatter).join(" – ");var label=(0,_jquery2.default)("<div>");var icon=(0,_jquery2.default)("<i>").css({background:color,"border-color":makeColorDarker(color)});var text=(0,_jquery2.default)("<span>").text(labelText);label.append(icon);label.append(text);jqueryDiv.append(label)})}},{key:"_makeEmptyStyleFunction",value:function _makeEmptyStyleFunction(){var emptyStyle=_lodash2.default.assign({},EMPTY_STYLE,{weight:this._lineWeight});return function(){return emptyStyle}}},{key:"_makeChoroplethStyler",value:function _makeChoroplethStyler(){var _this6=this;var emptyStyle=this._makeEmptyStyleFunction();if(this._metrics.length===0){return{leafletStyleFunction:function leafletStyleFunction(){return emptyStyle()},getMismatches:function getMismatches(){return[]},getLeafletBounds:function getLeafletBounds(){return null}}}var _getMinMax2=getMinMax(this._metrics),min=_getMinMax2.min,max=_getMinMax2.max;var boundsOfAllFeatures=new _leaflet2.default.LatLngBounds;return{leafletStyleFunction:function leafletStyleFunction(geojsonFeature){var match=geojsonFeature.__kbnJoinedMetric;if(!match){return emptyStyle()}var boundsOfFeature=_leaflet2.default.geoJson(geojsonFeature).getBounds();boundsOfAllFeatures.extend(boundsOfFeature);return{fillColor:getChoroplethColor(match.value,min,max,_this6._colorRamp),weight:_this6._lineWeight,opacity:1,color:"white",fillOpacity:.7}},getMismatches:function getMismatches(){var mismatches=_this6._metrics.slice();_this6._sortedFeatures.forEach(function(feature){var index=mismatches.indexOf(feature.__kbnJoinedMetric);if(index>=0){mismatches.splice(index,1)}});return mismatches.map(function(b){return b.term})},getLeafletBounds:function getLeafletBounds(){return boundsOfAllFeatures.isValid()?boundsOfAllFeatures:null}}}}]);return ChoroplethLayer}(_kibana_map_layer.KibanaMapLayer);exports.default=ChoroplethLayer;function compareLexicographically(termA,termB){termA=typeof termA==="string"?termA:termA.toString();termB=typeof termB==="string"?termB:termB.toString();return termA.localeCompare(termB)}function makeColorDarker(color){var amount=1.3;return _d2.default.hcl(color).darker(amount).toString()}function getMinMax(data){var min=data[0].value;var max=data[0].value;for(var i=1;i<data.length;i+=1){min=Math.min(data[i].value,min);max=Math.max(data[i].value,max)}return{min:min,max:max}}function getChoroplethColor(value,min,max,colorRamp){if(min===max){return colorUtil.getColor(colorRamp,colorRamp.length-1)}var fraction=(value-min)/(max-min);var index=Math.round(colorRamp.length*fraction)-1;var i=Math.max(Math.min(colorRamp.length-1,index),0);return colorUtil.getColor(colorRamp,i)}module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2016)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=TileMapTooltipFormatter;var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatter($compile,$rootScope){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery2.default)("<div>").html(__webpack_require__(1091));$compile($el)($tooltipScope);return function tooltipFormatter(metricAgg,metric,fieldName){if(!metric){return""}$tooltipScope.details=[];if(fieldName&&metric){$tooltipScope.details.push({label:fieldName,value:metric.term})}if(metric){$tooltipScope.details.push({label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(metric.value)})}$tooltipScope.$apply();return $el.html()}}module.exports=exports["default"]},function(module,exports){module.exports='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label"><b>{{detail.label}}</b></td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _i18n=__webpack_require__(8);__webpack_require__(1093);__webpack_require__(1094);__webpack_require__(451);__webpack_require__(1101);var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _table_vis=__webpack_require__(1103);var _table_vis2=_interopRequireDefault(_table_vis);var _vis_types=__webpack_require__(30);var _legacy_response_handler=__webpack_require__(1104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(TableVisTypeProvider);function TableVisTypeProvider(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createAngularVisualization({type:"table",name:"table",title:_i18n.i18n.translate("tableVis.tableVisTitle",{defaultMessage:"Data Table"}),icon:"visTable",description:_i18n.i18n.translate("tableVis.tableVisDescription",{defaultMessage:"Display values in a table"}),visConfig:{defaults:{perPage:10,showPartialRows:false,showMetricsAtAllLevels:false,sort:{columnIndex:null,direction:null},showTotal:false,totalFunc:"sum"},template:_table_vis2.default},editorConfig:{optionsTemplate:"<table-vis-params></table-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.metricTitle",{defaultMessage:"Metric"}),aggFilter:["!geo_centroid","!geo_bounds"],min:1,defaults:[{type:"count",schema:"metric"}]},{group:"buckets",name:"bucket",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.bucketTitle",{defaultMessage:"Split Rows"}),aggFilter:["!filter"]},{group:"buckets",name:"split",title:_i18n.i18n.translate("tableVis.tableVisEditorConfig.schemas.splitTitle",{defaultMessage:"Split Table"}),aggFilter:["!filter"]}])},responseHandler:_legacy_response_handler.legacyTableResponseHandler,responseHandlerConfig:{asAggConfigResults:true},hierarchicalData:function hierarchicalData(vis){return Boolean(vis.params.showPartialRows||vis.params.showMetricsAtAllLevels)}})}exports.default=TableVisTypeProvider;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _lodash=__webpack_require__(0);var _module=_modules.uiModules.get("kibana/table_vis",["kibana"]);_module.controller("KbnTableVisController",function($scope){var uiStateSort=$scope.uiState?$scope.uiState.get("vis.params.sort"):{};(0,_lodash.assign)($scope.vis.params.sort,uiStateSort);$scope.sort=$scope.vis.params.sort;$scope.$watchCollection("sort",function(newSort){$scope.uiState.set("vis.params.sort",newSort)});$scope.$watch("renderComplete",function(){var tableGroups=$scope.tableGroups=null;var hasSomeRows=$scope.hasSomeRows=null;if($scope.esResponse){tableGroups=$scope.esResponse;hasSomeRows=tableGroups.tables.some(function haveRows(table){if(table.tables)return table.tables.some(haveRows);return table.rows.length>0})}$scope.hasSomeRows=hasSomeRows;if(hasSomeRows){$scope.tableGroups=tableGroups}$scope.renderComplete()})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _table_vis_params=__webpack_require__(1095);var _table_vis_params2=_interopRequireDefault(_table_vis_params);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tableVisParams",function(){return{restrict:"E",template:_table_vis_params2.default,link:function link($scope){$scope.totalAggregations=["sum","avg","min","max","count"];$scope.$watchMulti(["editorState.params.showPartialRows","editorState.params.showMetricsAtAllLevels"],function(){if(!$scope.vis)return;var params=$scope.editorState.params;if(params.showPartialRows||params.showMetricsAtAllLevels){$scope.metricsAtAllLevels=true}else{$scope.metricsAtAllLevels=false}})}}})},function(module,exports){module.exports='\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <label\n      for="datatableVisualizationPerPage"\n      i18n-id="tableVis.params.perPageLabel"\n      i18n-default-message="Per Page"\n    ></label>\n    <input type="number" ng-model="editorState.params.perPage" class="form-control" id="datatableVisualizationPerPage">\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showMetricsAtAllLevels" data-test-subj="showMetricsAtAllLevels">\n      <span\n        i18n-id="tableVis.params.showMetricsLabel"\n        i18n-default-message="Show metrics for every bucket/level"\n      ></span>\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showPartialRows" data-test-subj="showPartialRows">\n      <span\n        i18n-id="tableVis.params.showPartialRowsLabel"\n        i18n-default-message="Show partial rows"\n      ></span>\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="metricsAtAllLevels" disabled>\n      <span\n        i18n-id="tableVis.params.calculateMetricsLabel"\n        i18n-default-message="Calculate metrics for every bucket/level"\n      ></span>\n    </label>\n  </div>\n\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="editorState.params.showTotal">\n      <span\n        i18n-id="tableVis.params.showTotalLabel"\n        i18n-default-message="Show total"\n      ></span>\n    </label>\n  </div>\n\n  <div>\n    <label\n      for="datatableVisualizationTotalFunction"\n      i18n-id="tableVis.params.totalFunctionLabel"\n      i18n-default-message="Total function"\n    ></label>\n    <select ng-disabled="!editorState.params.showTotal"\n            class="form-control"\n            ng-model="editorState.params.totalFunc"\n            ng-options="x for x in totalAggregations" id="datatableVisualizationTotalFunction">\n    </select>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(15);__webpack_require__(456);__webpack_require__(1097);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(3);var _agg_table=__webpack_require__(1100);var _agg_table2=_interopRequireDefault(_agg_table);var _field_formats=__webpack_require__(35);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTable",function($filter,config,Private,RecursionHelper){var numberFormatter=_field_formats.fieldFormats.getDefaultInstance("number").getConverterFor("text");return{restrict:"E",template:_agg_table2.default,scope:{table:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"="},controllerAs:"aggTable",compile:function compile($el){return RecursionHelper.compile($el)},controller:function controller($scope){var self=this;self._saveAs=__webpack_require__(326).saveAs;self.csv={separator:config.get("csv:separator"),quoteValues:config.get("csv:quoteValues")};self.exportAsCsv=function(formatted){var csv=new Blob([self.toCsv(formatted)],{type:"text/plain;charset=utf-8"});self._saveAs(csv,self.csv.filename)};self.toCsv=function(formatted){var rows=$scope.table.rows;var columns=formatted?$scope.formattedColumns:$scope.table.columns;var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){if(!formatted&&_lodash2.default.isObject(val))val=val.valueOf();val=String(val);if(self.csv.quoteValues&&nonAlphaNumRE.test(val)){val='"'+val.replace(allDoubleQuoteRE,'""')+'"'}return val}var csvRows=rows.map(function(row){return row.map(escape)});csvRows.unshift(columns.map(function(col){return escape(col.title)}));return csvRows.map(function(row){return row.join(self.csv.separator)+"\r\n"}).join("")};$scope.$watch("table",function(){var table=$scope.table;if(!table){$scope.rows=null;$scope.formattedColumns=null;return}self.csv.filename=($scope.exportTitle||table.title||"table")+".csv";$scope.rows=table.rows;$scope.formattedColumns=table.columns.map(function(col,i){var agg=col.aggConfig;var field=agg.getField();var formattedColumn={title:col.title,filterable:field&&field.filterable&&agg.schema.group==="buckets"};var last=i===table.columns.length-1;if(last||agg.schema.group==="metrics"){formattedColumn.class="visualize-table-right"}var isFieldNumeric=false;var isFieldDate=false;var aggType=agg.type;if(aggType&&aggType.type==="metrics"){if(aggType.name==="top_hits"){if(agg._opts.params.aggregate!=="concat"){isFieldNumeric=true}}else if(aggType.name==="cardinality"){isFieldNumeric=true}else if(field){isFieldNumeric=field.type==="number";isFieldDate=field.type==="date"}else{isFieldNumeric=true}}else if(field){isFieldNumeric=field.type==="number";isFieldDate=field.type==="date"}if(isFieldNumeric||isFieldDate||$scope.totalFunc==="count"){var sum=function sum(tableRows){return _lodash2.default.reduce(tableRows,function(prev,curr){if(curr[i].value===undefined)return prev;return prev+curr[i].value},0)};var formatter=agg.fieldFormatter("text");switch($scope.totalFunc){case"sum":if(!isFieldDate){formattedColumn.total=formatter(sum(table.rows))}break;case"avg":if(!isFieldDate){formattedColumn.total=formatter(sum(table.rows)/table.rows.length)}break;case"min":formattedColumn.total=formatter(_lodash2.default.chain(table.rows).map(i).map("value").min().value());break;case"max":formattedColumn.total=formatter(_lodash2.default.chain(table.rows).map(i).map("value").max().value());break;case"count":formattedColumn.total=numberFormatter(table.rows.length);break;default:break}}return formattedColumn})})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1098)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _agg_config_result=__webpack_require__(238);var _agg_config_result2=_interopRequireDefault(_agg_config_result);var _modules=__webpack_require__(3);var _paginated_table=__webpack_require__(1099);var _paginated_table2=_interopRequireDefault(_paginated_table);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("paginatedTable",function($filter){var orderBy=$filter("orderBy");return{restrict:"E",template:_paginated_table2.default,transclude:true,scope:{rows:"=",columns:"=",linkToTop:"=",perPage:"=?",showBlankRows:"=?",sortHandler:"=?",sort:"=?",showSelector:"=?",showTotal:"=",totalFunc:"="},controllerAs:"paginatedTable",controller:function controller($scope){var self=this;self.sort={columnIndex:null,direction:null};self.sortColumn=function(colIndex){var sortDirection=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"asc";var col=$scope.columns[colIndex];if(!col)return;if(col.sortable===false)return;if(self.sort.columnIndex===colIndex){var directions={null:"asc",asc:"desc",desc:null};sortDirection=directions[self.sort.direction]}self.sort.columnIndex=colIndex;self.sort.direction=sortDirection;if($scope.sort){_lodash2.default.assign($scope.sort,self.sort)}};self.rowsToShow=function(numRowsPerPage,actualNumRowsOnThisPage){if($scope.showBlankRows===false){return actualNumRowsOnThisPage}else{return numRowsPerPage}};function valueGetter(row){var value=row[self.sort.columnIndex];if(value&&value.value!=null)value=value.value;if(typeof value==="boolean")value=value?0:1;if(value instanceof _agg_config_result2.default&&value.valueOf()===null)value=false;return value}if($scope.sort&&$scope.sort.columnIndex!==null){self.sortColumn($scope.sort.columnIndex,$scope.sort.direction)}function resortRows(){var newSort=$scope.sort;if(newSort&&!_lodash2.default.isEqual(newSort,self.sort)){self.sortColumn(newSort.columnIndex,newSort.direction)}if(!$scope.rows||!$scope.columns){$scope.sortedRows=false;return}var sort=self.sort;if(sort.direction==null){$scope.sortedRows=$scope.rows.slice(0)}else{$scope.sortedRows=orderBy($scope.rows,valueGetter,sort.direction==="desc")}}$scope.$watchMulti(["rows","columns","[]sort","[]paginatedTable.sort"],resortRows)}}})},function(module,exports){module.exports='<paginate\n  ng-if="sortedRows.length"\n  list="sortedRows"\n  per-page-prop="perPage"\n  class="kbnAggTable">\n  <div class="kbnAggTable__paginated">\n    <table class="table table-condensed">\n      <thead data-test-subj="paginated-table-header">\n        <tr>\n          <th\n            scope="col"\n            ng-repeat="col in columns"\n            ng-click="paginatedTable.sortColumn($index)"\n            kbn-accessible-click\n            tabindex="0"\n            class="{{ col.class }}">\n            <span ng-bind="::col.title"></span>\n\n            <icon-tip\n              ng-if="col.info"\n              content="\'{{ col.info }}\'"\n            ></icon-tip>\n\n            <i\n              ng-if="col.sortable !== false"\n              class="fa"\n              ng-class="{\n                \'fa-sort-asc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'asc\',\n                \'fa-sort-desc\': paginatedTable.sort.columnIndex === $index && paginatedTable.sort.direction === \'desc\',\n                \'fa-sort\': paginatedTable.sort.columnIndex !== $index || paginatedTable.sort.direction === null\n              }">\n            </i>\n          </th>\n        </tr>\n      </thead>\n      <tbody\n        data-test-subj="paginated-table-body"\n        kbn-rows="page"\n        kbn-rows-min="paginatedTable.rowsToShow(perPage, page.length)"\n      >\n      </tbody>\n      <tfoot ng-if="showTotal">\n        <tr>\n          <th scope="col" ng-repeat="col in columns" class="numeric-value">{{col.total}}</th>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n\n  \x3c!-- auto-inserted by the paginate directive... --\x3e\n  \x3c!-- <paginate-controls></paginate-controls> --\x3e\n  <div class="pagination-container" ng-transclude></div>\n</paginate>\n'},function(module,exports){module.exports='<paginated-table\n  ng-if="rows.length"\n  rows="rows"\n  columns="formattedColumns"\n  per-page="perPage"\n  sort="sort"\n  show-total="showTotal"\n  totalFunc="totalFunc">\n\n  <div class="kbnAggTable__controls">\n    <small\n      i18n-id="common.ui.aggTable.exportLabel"\n      i18n-default-message="Export:"\n    ></small>&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(false)">\n      <span\n        i18n-id="common.ui.aggTable.rawLabel"\n        i18n-default-message="Raw"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>&nbsp;&nbsp;&nbsp;\n    <a class="small" ng-click="aggTable.exportAsCsv(true)">\n      <span\n        i18n-id="common.ui.aggTable.formattedLabel"\n        i18n-default-message="Formatted"\n       ></span>\n       <i aria-hidden="true" class="fa fa-download"></i>\n    </a>\n    <paginate-controls></paginate-controls>\n  </div>\n</paginated-table>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(15);__webpack_require__(456);__webpack_require__(451);var _modules=__webpack_require__(3);var _agg_table_group=__webpack_require__(1102);var _agg_table_group2=_interopRequireDefault(_agg_table_group);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana",["RecursionHelper"]).directive("kbnAggTableGroup",function(RecursionHelper){return{restrict:"E",template:_agg_table_group2.default,scope:{group:"=",perPage:"=?",sort:"=?",exportTitle:"=?",showTotal:"=",totalFunc:"="},compile:function compile($el){return RecursionHelper.compile($el,{post:function post($scope){$scope.$watch("group",function(group){$scope.rows=$scope.columns=false;if(!group||!group.tables.length)return;var firstTable=group.tables[0];var params=firstTable.aggConfig&&firstTable.aggConfig.params;var childLayout=params&&!params.row?"columns":"rows";$scope[childLayout]=group.tables})}})}}})},function(module,exports){module.exports='<table ng-if="rows" class="table kbnAggTable__group" ng-repeat="table in rows">\n  <thead>\n    <tr>\n      <th ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          table="table"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table ng-if="columns" class="table kbnAggTable__group">\n  <thead>\n    <tr>\n      <th ng-repeat="table in columns" ng-if="table.tables" scope="col">\n        <span class="kbnAggTable__groupHeader">{{ table.title }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td ng-repeat="table in columns">\n        <kbn-agg-table-group\n          ng-if="table.tables"\n          group="table"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc"></kbn-agg-table-group>\n        <kbn-agg-table\n          ng-if="table.rows"\n          table="table"\n          export-title="exportTitle"\n          per-page="perPage"\n          sort="sort"\n          show-total="showTotal"\n          total-func="totalFunc">\n        </kbn-agg-table>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports){module.exports='<div ng-controller="KbnTableVisController" class="table-vis">\n  <div ng-if="!hasSomeRows && hasSomeRows !== null" class="kbnDocTable__error">\n    <h2 aria-hidden="true"><i aria-hidden="true" class="fa fa-meh-o"></i></h2>\n    <h4\n      i18n-id="tableVis.vis.noResultsFoundTitle"\n      i18n-default-message="No results found"\n    ></h4>\n  </div>\n\n  <div ng-if="tableGroups" class="table-vis-container" data-test-subj="tableVis">\n    <kbn-agg-table-group\n      group="tableGroups"\n      export-title="visState.title"\n      per-page="visState.params.perPage"\n      sort="sort"\n      show-total="visState.params.showTotal"\n      total-func="visState.params.totalFunc">\n    </kbn-agg-table-group>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.legacyTableResponseHandler=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var legacyTableResponseHandler=exports.legacyTableResponseHandler=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(table){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{tables:splitTable(table.columns,table.rows,null)});case 1:case"end":return _context.stop()}}},_callee,this)}));return function legacyTableResponseHandler(_x){return _ref.apply(this,arguments)}}();exports.splitRowsOnColumn=splitRowsOnColumn;exports.splitTable=splitTable;var _lodash=__webpack_require__(0);var _agg_config_result=__webpack_require__(238);var _agg_config_result2=_interopRequireDefault(_agg_config_result);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function splitRowsOnColumn(rows,columnId){var resultsMap={};return{rowsGroupedByResult:rows.reduce(function(acc,row){var splitValue=row[columnId],rest=_objectWithoutProperties(row,[columnId]);resultsMap[splitValue]=splitValue;acc[splitValue]=[].concat(_toConsumableArray(acc[splitValue]||[]),[rest]);return acc},{}),results:Object.values(resultsMap)}}function splitTable(columns,rows,$parent){var splitColumn=columns.find(function(column){return(0,_lodash.get)(column,"aggConfig.schema.name")==="split"});if(!splitColumn){return[{$parent:$parent,columns:columns.map(function(column){return _extends({title:column.name},column)}),rows:rows.map(function(row,rowIndex){return columns.map(function(column){var aggConfigResult=new _agg_config_result2.default(column.aggConfig,$parent,row[column.id],row[column.id]);aggConfigResult.rawData={table:{columns:columns,rows:rows},column:columns.findIndex(function(c){return c.id===column.id}),row:rowIndex};return aggConfigResult})})}]}var splitColumnIndex=columns.findIndex(function(column){return column.id===splitColumn.id});var splitRows=splitRowsOnColumn(rows,splitColumn.id);var firstMetricsColumnIndex=columns.findIndex(function(column){return(0,_lodash.get)(column,"aggConfig.type.type")==="metrics"});var lastBucketsColumnIndex=(0,_lodash.findLastIndex)(columns,function(column){return(0,_lodash.get)(column,"aggConfig.type.type")==="buckets"});var metricsAtAllLevels=firstMetricsColumnIndex<lastBucketsColumnIndex;var numberOfMetrics=columns.filter(function(column){return(0,_lodash.get)(column,"aggConfig.type.type")==="metrics"}).length;var numberOfBuckets=columns.filter(function(column){return(0,_lodash.get)(column,"aggConfig.type.type")==="buckets"}).length;var metricsPerBucket=numberOfMetrics/numberOfBuckets;var filteredColumns=columns.filter(function(column,i){var isSplitColumn=i===splitColumnIndex;var isSplitMetric=metricsAtAllLevels&&i>splitColumnIndex&&i<=splitColumnIndex+metricsPerBucket;return!isSplitColumn&&!isSplitMetric}).map(function(column){return _extends({title:column.name},column)});return splitRows.results.map(function(splitValue){var $newParent=new _agg_config_result2.default(splitColumn.aggConfig,$parent,splitValue,splitValue);$newParent.rawData={table:{columns:columns,rows:rows},column:splitColumnIndex,row:-1};return{$parent:$newParent,aggConfig:splitColumn.aggConfig,title:splitColumn.aggConfig.fieldFormatter()(splitValue)+": "+splitColumn.aggConfig.makeLabel(),key:splitValue,tables:splitTable(filteredColumns,splitRows.rowsGroupedByResult[splitValue],$newParent)}})}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1106);var _vis_factory=__webpack_require__(25);var _schemas=__webpack_require__(31);var _tag_cloud_visualization=__webpack_require__(1112);var _vis_types=__webpack_require__(30);var _update_status=__webpack_require__(82);_vis_types.VisTypesRegistryProvider.register(function(Private,i18n){var VisFactory=Private(_vis_factory.VisFactoryProvider);return VisFactory.createBaseVisualization({name:"tagcloud",title:i18n("tagCloud.vis.tagCloudTitle",{defaultMessage:"Tag Cloud"}),icon:"visTagCloud",description:i18n("tagCloud.vis.tagCloudDescription",{defaultMessage:"A group of words, sized according to their importance"}),visConfig:{defaults:{scale:"linear",orientation:"single",minFontSize:18,maxFontSize:72,showLabel:true}},requiresUpdateStatus:[_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.DATA],visualization:_tag_cloud_visualization.TagCloudVisualization,editorConfig:{collections:{scales:["linear","log","square root"],orientations:["single","right angled","multiple"]},optionsTemplate:"<tagcloud-vis-params></tagcloud-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:i18n("tagCloud.vis.schemas.metricTitle",{defaultMessage:"Tag Size"}),min:1,max:1,aggFilter:["!std_dev","!percentiles","!percentile_ranks","!derivative","!geo_bounds","!geo_centroid"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",icon:"fa fa-cloud",title:i18n("tagCloud.vis.schemas.segmentTitle",{defaultMessage:"Tags"}),min:1,max:1,aggFilter:["terms","significant_terms"]}])},useCustomNoDataScreen:true})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _tag_cloud_vis_params=__webpack_require__(1107);var _tag_cloud_vis_params2=_interopRequireDefault(_tag_cloud_vis_params);var _noUiSlider=__webpack_require__(1146);var _noUiSlider2=_interopRequireDefault(_noUiSlider);__webpack_require__(1109);__webpack_require__(1110);__webpack_require__(1111);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana/table_vis").directive("tagcloudVisParams",function(){return{restrict:"E",template:_tag_cloud_vis_params2.default,link:function link($scope,$element){var sliderContainer=$element[0];var slider=sliderContainer.querySelector(".tgcFontSizeSlider");$scope.config=$scope.vis.type.editorConfig;_noUiSlider2.default.create(slider,{start:[$scope.editorState.params.minFontSize,$scope.editorState.params.maxFontSize],connect:true,step:1,range:{min:1,max:100},format:{to:function to(value){return parseInt(value)},from:function from(value){return parseInt(value)}}});slider.noUiSlider.on("slide",function(){var fontSize=slider.noUiSlider.get();$scope.$apply(function(){$scope.editorState.params.minFontSize=fontSize[0];$scope.editorState.params.maxFontSize=fontSize[1]})});$scope.$watch("editorState.params.minFontSize",function(val){val=parseInt(val);if(slider.noUiSlider.get()[0]!==val){slider.noUiSlider.set([val,null])}});$scope.$watch("editorState.params.maxFontSize",function(val){val=parseInt(val);if(slider.noUiSlider.get()[1]!==val){slider.noUiSlider.set([null,val])}})}}})},function(module,exports){module.exports='<div class="kuiSideBarSection">\n  <div class="form-group">\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.textScaleLabel" i18n-default-message="Text Scale"></label>\n      <select class="form-control" ng-model="editorState.params.scale" ng-options="mode for mode in config.collections.scales"></select>\n    </div>\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.orientationsLabel" i18n-default-message="Orientations"></label>\n      <select class="form-control" ng-model="editorState.params.orientation" ng-options="mode for mode in config.collections.orientations"></select>\n    </div>\n    <div class="form-group">\n      <label i18n-id="tagCloud.visParams.fontSizeLabel" i18n-default-message="Font Size"></label>\n      <div class="tgcFontSizeSlider"></div>\n      <div class="kuiBar">\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="1"\n            max="{{editorState.params.maxFontSize}}"\n            class="kuiTextInput tgcFontSizeSlider__input"\n            ng-model="editorState.params.minFontSize"\n            aria-label="{{ ::\'tagCloud.visParams.minFontSizeAriaLabel\' | i18n: { defaultMessage: \'Minimum tag font size\' } }}"\n            aria-describedby="tagCloudFontSliderMinUnit"\n          >\n          <span id="tagCloudFontSliderMinUnit" aria-label="{{ ::\'tagCloud.visParams.minPixelsAriaLabel\' | i18n: { defaultMessage: \'pixels\' } }}">px</span>\n        </div>\n        <div class="kuiBarSection">\n          <input\n            type="number"\n            min="{{editorState.params.minFontSize}}"\n            max="100"\n            class="kuiTextInput tgcFontSizeSlider__input"\n            ng-model="editorState.params.maxFontSize"\n            aria-label="{{ ::\'tagCloud.visParams.maxFontSizeAriaLabel\' | i18n: { defaultMessage: \'Maximum tag font size\' } }}"\n            aria-describedby="tagCloudFontSliderMaxUnit"\n          >\n          <span id="tagCloudFontSliderMaxUnit" aria-label="{{ ::\'tagCloud.visParams.maxPixelsAriaLabel\' | i18n: { defaultMessage: \'pixels\' } }}">px</span>\n        </div>\n      </div>\n    </div>\n    <div>\n      <label>\n        <input type="checkbox" value="{{hideLabel}}" ng-model="editorState.params.showLabel" name="showLabel"\n               ng-checked="editorState.params.showLabel">\n        <span i18n-id="tagCloud.visParams.showLabelToggleLabel" i18n-default-message="Show Label"></span>\n      </label>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2165)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TagCloudVisualization=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _tag_cloud=__webpack_require__(1113);var _tag_cloud2=_interopRequireDefault(_tag_cloud);var _rxjs=__webpack_require__(32);var Rx=_interopRequireWildcard(_rxjs);var _operators=__webpack_require__(38);var _reactDom=__webpack_require__(26);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18n=__webpack_require__(14);var _label=__webpack_require__(1115);var _feedback_message=__webpack_require__(1116);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var MAX_TAG_COUNT=200;var TagCloudVisualization=exports.TagCloudVisualization=function(){function TagCloudVisualization(node,vis){var _this=this;_classCallCheck(this,TagCloudVisualization);this._containerNode=node;var cloudContainer=document.createElement("div");cloudContainer.classList.add("tgcVis");cloudContainer.setAttribute("data-test-subj","tagCloudVisualization");this._containerNode.appendChild(cloudContainer);this._vis=vis;this._bucketAgg=null;this._truncated=false;this._tagCloud=new _tag_cloud2.default(cloudContainer);this._tagCloud.on("select",function(event){if(!_this._bucketAgg){return}_this._vis.API.events.filter({table:event.meta.data,column:0,row:event.meta.rowIndex})});this._renderComplete$=Rx.fromEvent(this._tagCloud,"renderComplete");this._feedbackNode=document.createElement("div");this._containerNode.appendChild(this._feedbackNode);this._feedbackMessage=_react2.default.createRef();(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_feedback_message.FeedbackMessage,{ref:this._feedbackMessage})),this._feedbackNode);this._labelNode=document.createElement("div");this._containerNode.appendChild(this._labelNode);this._label=_react2.default.createRef();(0,_reactDom.render)(_react2.default.createElement(_label.Label,{ref:this._label}),this._labelNode)}_createClass(TagCloudVisualization,[{key:"render",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(data,status){var hasAggDefined;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(status.resize||status.data||status.params){_context.next=2;break}return _context.abrupt("return");case 2:if(status.params||status.aggs){this._updateParams()}if(status.data){this._updateData(data)}if(status.resize){this._resize()}_context.next=7;return this._renderComplete$.pipe((0,_operators.take)(1)).toPromise();case 7:hasAggDefined=this._vis.aggs[0]&&this._vis.aggs[1];if(hasAggDefined){_context.next=11;break}this._feedbackMessage.current.setState({shouldShowTruncate:false,shouldShowIncomplete:false});return _context.abrupt("return");case 11:this._label.current.setState({label:this._vis.aggs[0].makeLabel()+" - "+this._vis.aggs[1].makeLabel(),shouldShowLabel:this._vis.params.showLabel});this._feedbackMessage.current.setState({shouldShowTruncate:this._truncated,shouldShowIncomplete:this._tagCloud.getStatus()===_tag_cloud2.default.STATUS.INCOMPLETE});case 13:case"end":return _context.stop()}}},_callee,this)}));function render(_x,_x2){return _ref.apply(this,arguments)}return render}()},{key:"destroy",value:function destroy(){this._tagCloud.destroy();(0,_reactDom.unmountComponentAtNode)(this._feedbackNode);(0,_reactDom.unmountComponentAtNode)(this._labelNode)}},{key:"_updateData",value:function _updateData(data){var _this2=this;if(!data||!data.rows.length){this._tagCloud.setData([]);return}var segmentAggs=this._vis.aggs.bySchemaName.segment;if(segmentAggs&&segmentAggs.length>0){this._bucketAgg=segmentAggs[0]}else{this._bucketAgg=null}var hasTags=data.columns.length===2;var tagColumn=hasTags?data.columns[0].id:-1;var metricColumn=data.columns[hasTags?1:0].id;var tags=data.rows.map(function(row,rowIndex){var tag=row[tagColumn]||"all";var metric=row[metricColumn];return{displayText:_this2._bucketAgg?_this2._bucketAgg.fieldFormatter()(tag):tag,rawText:tag,value:metric,meta:{data:data,rowIndex:rowIndex}}});if(tags.length>MAX_TAG_COUNT){tags.length=MAX_TAG_COUNT;this._truncated=true}else{this._truncated=false}this._tagCloud.setData(tags)}},{key:"_updateParams",value:function _updateParams(){this._tagCloud.setOptions(this._vis.params)}},{key:"_resize",value:function _resize(){this._tagCloud.resize()}}]);return TagCloudVisualization}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _d=__webpack_require__(13);var _d2=_interopRequireDefault(_d);var _d3Cloud=__webpack_require__(1160);var _d3Cloud2=_interopRequireDefault(_d3Cloud);var _seed_colors=__webpack_require__(400);var _events=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ORIENTATIONS={single:function single(){return 0},"right angled":function rightAngled(tag){return hashWithinRange(tag.text,2)*90},multiple:function multiple(tag){return hashWithinRange(tag.text,12)*15-90}};var D3_SCALING_FUNCTIONS={linear:function linear(){return _d2.default.scale.linear()},log:function log(){return _d2.default.scale.log()},"square root":function squareRoot(){return _d2.default.scale.sqrt()}};var TagCloud=function(_EventEmitter){_inherits(TagCloud,_EventEmitter);function TagCloud(domNode){_classCallCheck(this,TagCloud);var _this=_possibleConstructorReturn(this,(TagCloud.__proto__||Object.getPrototypeOf(TagCloud)).call(this));_this._element=domNode;_this._d3SvgContainer=_d2.default.select(_this._element).append("svg");_this._svgGroup=_this._d3SvgContainer.append("g");_this._size=[1,1];_this.resize();_this._fontFamily="Open Sans, sans-serif";_this._fontStyle="normal";_this._fontWeight="normal";_this._spiral="archimedean";_this._timeInterval=1e3;_this._padding=5;_this._orientation="single";_this._minFontSize=10;_this._maxFontSize=36;_this._textScale="linear";_this._optionsAsString=null;_this._words=null;_this._setTimeoutId=null;_this._pendingJob=null;_this._layoutIsUpdating=null;_this._allInViewBox=false;_this._DOMisUpdating=false;return _this}_createClass(TagCloud,[{key:"setOptions",value:function setOptions(options){if(JSON.stringify(options)===this._optionsAsString){return}this._optionsAsString=JSON.stringify(options);this._orientation=options.orientation;this._minFontSize=Math.min(options.minFontSize,options.maxFontSize);this._maxFontSize=Math.max(options.minFontSize,options.maxFontSize);this._textScale=options.scale;this._invalidate(false)}},{key:"resize",value:function resize(){var newWidth=this._element.offsetWidth;var newHeight=this._element.offsetHeight;if(newWidth===this._size[0]&&newHeight===this._size[1]){return}var wasInside=this._size[0]>=this._cloudWidth&&this._size[1]>=this._cloudHeight;var willBeInside=this._cloudWidth<=newWidth&&this._cloudHeight<=newHeight;this._size[0]=newWidth;this._size[1]=newHeight;if(wasInside&&willBeInside&&this._allInViewBox){this._invalidate(true)}else{this._invalidate(false)}}},{key:"setData",value:function setData(data){this._words=data;this._invalidate(false)}},{key:"destroy",value:function destroy(){clearTimeout(this._setTimeoutId);this._element.innerHTML=""}},{key:"getStatus",value:function getStatus(){return this._allInViewBox?TagCloud.STATUS.COMPLETE:TagCloud.STATUS.INCOMPLETE}},{key:"_updateContainerSize",value:function _updateContainerSize(){this._d3SvgContainer.attr("width",this._size[0]);this._d3SvgContainer.attr("height",this._size[1]);this._svgGroup.attr("width",this._size[0]);this._svgGroup.attr("height",this._size[1])}},{key:"_isJobRunning",value:function _isJobRunning(){return this._setTimeoutId||this._layoutIsUpdating||this._DOMisUpdating}},{key:"_processPendingJob",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var job,cloudBBox;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._pendingJob){_context.next=2;break}return _context.abrupt("return");case 2:if(!this._isJobRunning()){_context.next=4;break}return _context.abrupt("return");case 4:this._completedJob=null;_context.next=7;return this._pickPendingJob();case 7:job=_context.sent;if(!job.words.length){_context.next=20;break}if(!job.refreshLayout){_context.next=12;break}_context.next=12;return this._updateLayout(job);case 12:_context.next=14;return this._updateDOM(job);case 14:cloudBBox=this._svgGroup[0][0].getBBox();this._cloudWidth=cloudBBox.width;this._cloudHeight=cloudBBox.height;this._allInViewBox=cloudBBox.x>=0&&cloudBBox.y>=0&&cloudBBox.x+cloudBBox.width<=this._element.offsetWidth&&cloudBBox.y+cloudBBox.height<=this._element.offsetHeight;_context.next=21;break;case 20:this._emptyDOM(job);case 21:if(this._pendingJob){this._processPendingJob()}else{this._completedJob=job;this.emit("renderComplete")}case 22:case"end":return _context.stop()}}},_callee,this)}));function _processPendingJob(){return _ref.apply(this,arguments)}return _processPendingJob}()},{key:"_pickPendingJob",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return new Promise(function(resolve){_this2._setTimeoutId=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var job;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:job=_this2._pendingJob;_this2._pendingJob=null;_this2._setTimeoutId=null;resolve(job);case 4:case"end":return _context2.stop()}}},_callee2,_this2)})),0)});case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}},_callee3,this)}));function _pickPendingJob(){return _ref2.apply(this,arguments)}return _pickPendingJob}()},{key:"_emptyDOM",value:function _emptyDOM(){this._svgGroup.selectAll("text").remove();this._cloudWidth=0;this._cloudHeight=0;this._allInViewBox=true;this._DOMisUpdating=false}},{key:"_updateDOM",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(job){var _this3=this;var canSkipDomUpdate,affineTransform,svgTextNodes,stage;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:canSkipDomUpdate=this._pendingJob||this._setTimeoutId;if(!canSkipDomUpdate){_context4.next=4;break}this._DOMisUpdating=false;return _context4.abrupt("return");case 4:this._DOMisUpdating=true;affineTransform=positionWord.bind(null,this._element.offsetWidth/2,this._element.offsetHeight/2);svgTextNodes=this._svgGroup.selectAll("text");stage=svgTextNodes.data(job.words,getText);_context4.next=10;return new Promise(function(resolve){var enterSelection=stage.enter();var enteringTags=enterSelection.append("text");enteringTags.style("font-size",getSizeInPixels);enteringTags.style("font-style",_this3._fontStyle);enteringTags.style("font-weight",function(){return _this3._fontWeight});enteringTags.style("font-family",function(){return _this3._fontFamily});enteringTags.style("fill",getFill);enteringTags.attr("text-anchor",function(){return"middle"});enteringTags.attr("transform",affineTransform);enteringTags.attr("data-test-subj",getDisplayText);enteringTags.text(getDisplayText);var self=_this3;enteringTags.on({click:function click(event){self.emit("select",event)},mouseover:function mouseover(){_d2.default.select(this).style("cursor","pointer")},mouseout:function mouseout(){_d2.default.select(this).style("cursor","default")}});var movingTags=stage.transition();movingTags.duration(600);movingTags.style("font-size",getSizeInPixels);movingTags.style("font-style",_this3._fontStyle);movingTags.style("font-weight",function(){return _this3._fontWeight});movingTags.style("font-family",function(){return _this3._fontFamily});movingTags.attr("transform",affineTransform);var exitingTags=stage.exit();var exitTransition=exitingTags.transition();exitTransition.duration(200);exitingTags.style("fill-opacity",1e-6);exitingTags.attr("font-size",1);exitingTags.remove();var exits=0;var moves=0;var resolveWhenDone=function resolveWhenDone(){if(exits===0&&moves===0){_this3._DOMisUpdating=false;resolve(true)}};exitTransition.each(function(){return exits++});exitTransition.each("end",function(){exits--;resolveWhenDone()});movingTags.each(function(){return moves++});movingTags.each("end",function(){moves--;resolveWhenDone()})});case 10:case"end":return _context4.stop()}}},_callee4,this)}));function _updateDOM(_x){return _ref4.apply(this,arguments)}return _updateDOM}()},{key:"_makeTextSizeMapper",value:function _makeTextSizeMapper(){var mapSizeToFontSize=D3_SCALING_FUNCTIONS[this._textScale]();var range=this._words.length===1?[this._maxFontSize,this._maxFontSize]:[this._minFontSize,this._maxFontSize];mapSizeToFontSize.range(range);if(this._words){mapSizeToFontSize.domain(_d2.default.extent(this._words,getValue))}return mapSizeToFontSize}},{key:"_makeNewJob",value:function _makeNewJob(){return{refreshLayout:true,size:this._size.slice(),words:this._words}}},{key:"_makeJobPreservingLayout",value:function _makeJobPreservingLayout(){return{refreshLayout:false,size:this._size.slice(),words:this._completedJob.words.map(function(tag){return{x:tag.x,y:tag.y,rotate:tag.rotate,size:tag.size,rawText:tag.rawText||tag.text,displayText:tag.displayText,meta:tag.meta}})}}},{key:"_invalidate",value:function _invalidate(keepLayout){if(!this._words){return}this._updateContainerSize();var canReuseLayout=keepLayout&&!this._isJobRunning()&&this._completedJob;this._pendingJob=canReuseLayout?this._makeJobPreservingLayout():this._makeNewJob();this._processPendingJob()}},{key:"_updateLayout",value:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(job){var _this4=this;var mapSizeToFontSize,tagCloudLayoutGenerator;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(job.size[0]<=0||job.size[1]<=0)){_context5.next=2;break}return _context5.abrupt("return");case 2:mapSizeToFontSize=this._makeTextSizeMapper();tagCloudLayoutGenerator=(0,_d3Cloud2.default)();tagCloudLayoutGenerator.size(job.size);tagCloudLayoutGenerator.padding(this._padding);tagCloudLayoutGenerator.rotate(ORIENTATIONS[this._orientation]);tagCloudLayoutGenerator.font(this._fontFamily);tagCloudLayoutGenerator.fontStyle(this._fontStyle);tagCloudLayoutGenerator.fontWeight(this._fontWeight);tagCloudLayoutGenerator.fontSize(function(tag){return mapSizeToFontSize(tag.value)});tagCloudLayoutGenerator.random(seed);tagCloudLayoutGenerator.spiral(this._spiral);tagCloudLayoutGenerator.words(job.words);tagCloudLayoutGenerator.text(getDisplayText);tagCloudLayoutGenerator.timeInterval(this._timeInterval);this._layoutIsUpdating=true;_context5.next=19;return new Promise(function(resolve){tagCloudLayoutGenerator.on("end",function(){_this4._layoutIsUpdating=false;resolve(true)});tagCloudLayoutGenerator.start()});case 19:case"end":return _context5.stop()}}},_callee5,this)}));function _updateLayout(_x2){return _ref5.apply(this,arguments)}return _updateLayout}()},{key:"getDebugInfo",value:function getDebugInfo(){var debug={};debug.positions=this._completedJob?this._completedJob.words.map(function(tag){return{displayText:tag.displayText,rawText:tag.rawText||tag.text,x:tag.x,y:tag.y,rotate:tag.rotate}}):[];debug.size={width:this._size[0],height:this._size[1]};return debug}}]);return TagCloud}(_events.EventEmitter);TagCloud.STATUS={COMPLETE:0,INCOMPLETE:1};function seed(){return.5}function getText(word){return word.rawText}function getDisplayText(word){return word.displayText}function positionWord(xTranslate,yTranslate,word){if(isNaN(word.x)||isNaN(word.y)||isNaN(word.rotate)){return"translate("+xTranslate*3+", "+yTranslate*3+")rotate(0)"}return"translate("+(word.x+xTranslate)+", "+(word.y+yTranslate)+")rotate("+word.rotate+")"}function getValue(tag){return tag.value}function getSizeInPixels(tag){return tag.size+"px"}var colorScale=_d2.default.scale.ordinal().range(_seed_colors.seedColors);function getFill(tag){return colorScale(tag.text)}function hashWithinRange(str,max){str=JSON.stringify(str);var hash=0;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=str[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var ch=_step.value;hash=(hash*31+ch.charCodeAt(0))%max}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return Math.abs(hash)%max}exports.default=TagCloud;module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2291)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Label=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Label=exports.Label=function(_Component){_inherits(Label,_Component);function Label(){_classCallCheck(this,Label);var _this=_possibleConstructorReturn(this,(Label.__proto__||Object.getPrototypeOf(Label)).call(this));_this.state={label:"",shouldShowLabel:true};return _this}_createClass(Label,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"tgcVisLabel",style:{display:this.state.shouldShowLabel?"block":"none"}},this.state.label)}}]);return Label}(_react.Component)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeedbackMessage=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FeedbackMessage=exports.FeedbackMessage=function(_Component){_inherits(FeedbackMessage,_Component);function FeedbackMessage(){_classCallCheck(this,FeedbackMessage);var _this=_possibleConstructorReturn(this,(FeedbackMessage.__proto__||Object.getPrototypeOf(FeedbackMessage)).call(this));_this.state={shouldShowTruncate:false,shouldShowIncomplete:false};return _this}_createClass(FeedbackMessage,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"tgcVisFeedback"},_react2.default.createElement("div",{className:"tgcVisFeedback__message",style:{display:this.state.shouldShowTruncate?"block":"none"}},_react2.default.createElement(_react3.FormattedMessage,{id:"tagCloud.feedbackMessage.truncatedTagsDescription",defaultMessage:"The number of tags has been truncated to avoid long draw times."})),_react2.default.createElement("div",{className:"tgcVisFeedback__message",style:{display:this.state.shouldShowIncomplete?"block":"none"}},_react2.default.createElement(_react3.FormattedMessage,{id:"tagCloud.feedbackMessage.tooSmallContainerDescription",defaultMessage:"The container is too small to display the entire cloud. Tags might be cropped or omitted."})))}}]);return FeedbackMessage}(_react.Component)},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(8);__webpack_require__(271);__webpack_require__(1118);var _supports=__webpack_require__(1120);var _vis_factory=__webpack_require__(25);var _coordinate_maps_visualization=__webpack_require__(1121);var _schemas=__webpack_require__(31);var _vis_types=__webpack_require__(30);var _update_status=__webpack_require__(82);var _coordinatemap_response_handler=__webpack_require__(1128);var _truncated_colormaps=__webpack_require__(108);_vis_types.VisTypesRegistryProvider.register(function TileMapVisType(Private,getAppState,courier,config){var VisFactory=Private(_vis_factory.VisFactoryProvider);var CoordinateMapsVisualization=Private(_coordinate_maps_visualization.CoordinateMapsVisualizationProvider);return VisFactory.createBaseVisualization({name:"tile_map",title:_i18n.i18n.translate("tileMap.vis.mapTitle",{defaultMessage:"Coordinate Map"}),icon:"visMapCoordinate",description:_i18n.i18n.translate("tileMap.vis.mapDescription",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),visConfig:{canDesaturate:!!_supports.supports.cssFilters,defaults:{colorSchema:"Yellow to Red",mapType:"Scaled Circle Markers",isDesaturated:true,addTooltip:true,heatClusterSize:1.5,legendPosition:"bottomright",mapZoom:2,mapCenter:[0,0],wms:config.get("visualization:tileMap:WMSdefaults")}},requiresUpdateStatus:[_update_status.Status.AGGS,_update_status.Status.PARAMS,_update_status.Status.RESIZE,_update_status.Status.UI_STATE],responseHandler:(0,_coordinatemap_response_handler.makeGeoJsonResponseHandler)(),requiresPartialRows:true,visualization:CoordinateMapsVisualization,editorConfig:{collections:{colorSchemas:Object.values(_truncated_colormaps.truncatedColorMaps).map(function(value){return{id:value.id,label:value.label}}),legendPositions:[{value:"bottomleft",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.bottomLeftText",{defaultMessage:"bottom left"})},{value:"bottomright",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.bottomRightText",{defaultMessage:"bottom right"})},{value:"topleft",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.topLeftText",{defaultMessage:"top left"})},{value:"topright",text:_i18n.i18n.translate("tileMap.vis.map.editorConfig.legendPositions.topRightText",{defaultMessage:"top right"})}],mapTypes:["Scaled Circle Markers","Shaded Circle Markers","Shaded Geohash Grid","Heatmap"],tmsLayers:[]},optionsTemplate:"<tile-map-vis-params></tile-map-vis-params>",schemas:new _schemas.Schemas([{group:"metrics",name:"metric",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","sum","min","max","cardinality","top_hits"],defaults:[{schema:"metric",type:"count"}]},{group:"buckets",name:"segment",title:_i18n.i18n.translate("tileMap.vis.map.editorConfig.schemas.geoCoordinatesTitle",{defaultMessage:"Geo Coordinates"}),aggFilter:"geohash_grid",min:1,max:1}])}})})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _tile_map_vis_params=__webpack_require__(1119);var _tile_map_vis_params2=_interopRequireDefault(_tile_map_vis_params);__webpack_require__(446);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("kibana");_module.directive("tileMapVisParams",function(){return{restrict:"E",template:_tile_map_vis_params2.default}})},function(module,exports){module.exports='\x3c!-- vis type specific options --\x3e\n<div class="kuiSideBarSection">\n  <div class="form-group">\n    <label\n      for="coordinateMapOptionsMapType"\n      i18n-id="tileMap.visParams.mapTypeLabel"\n      i18n-default-message="Map type"\n    ></label>\n      <select\n        id="coordinateMapOptionsMapType"\n        name="agg"\n      class="form-control"\n      ng-model="editorState.params.mapType"\n      ng-init="editorState.params.mapType || vis.type.editorConfig.collections.mapTypes[0]"\n      ng-options="mapType as mapType for mapType in vis.type.editorConfig.collections.mapTypes"\n      >\n    </select>\n  </div>\n\n\n  <div class="kuiSideBarFormRow" >\n    <label\n      class="kuiSideBarFormRow__label"\n      for="colorSchema"\n      i18n-id="tileMap.visParams.colorSchemaLabel"\n      i18n-default-message="Color Schema"\n    ></label>\n    <div class="kuiSideBarFormRow__control">\n      <select\n        id="colorSchema"\n        class="kuiSelect kuiSideBarSelect"\n        ng-model="editorState.params.colorSchema"\n        ng-options="mode.id as mode.label for mode in vis.type.editorConfig.collections.colorSchemas"\n      ></select>\n    </div>\n  </div>\n\n  <div ng-if="editorState.params.mapType === \'Heatmap\'" class="form-group">\n    <div>\n      <label\n        i18n-id="tileMap.visParams.clusterSizeLabel"\n        i18n-default-message="Cluster size"\n      ></label>\n      <div class="visEditorAgg__formRow--flex">\n        <input\n          name="heatClusterSize"\n          ng-model="editorState.params.heatClusterSize"\n          required\n          class="form-control"\n          type="range"\n          min="1.0"\n          max="3.0"\n          step="0.1"\n          >\n        <div class="visEditorAgg__sliderValue">\n          {{editorState.params.heatClusterSize}}\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <vislib-basic-options></vislib-basic-options>\n\n  <div class="kuiSideBarFormRow">\n    <label\n      class="kuiSideBarFormRow__label"\n      for="desaturateMapTiles"\n      i18n-id="tileMap.visParams.desaturateTilesLabel"\n      i18n-default-message="Desaturate tiles"\n    ></label>\n\n    <div class="kuiSideBarFormRow__control">\n      <input\n        type="checkbox"\n        id="desaturateMapTiles"\n        name="isDesaturated"\n        ng-disabled="!vis.type.visConfig.canDesaturate"\n        ng-model="editorState.params.isDesaturated"\n      >\n      &nbsp;\n      <icon-tip\n        content="::\'tileMap.visParams.reduceVibrancyOfTileColorsTip\' | i18n: {\n          defaultMessage: \'Reduce the vibrancy of tile colors. This does not work in any version of Internet Explorer.\'\n        }"\n        position="\'right\'"\n      ></icon-tip>\n    </div>\n  </div>\n</div>\n\n<wms-options options="editorState.params.wms" collections="vis.type.editorConfig.collections"></wms-options>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.supports=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var supports=exports.supports={cssFilters:function(){var e=document.createElement("img");var rules=["webkitFilter","mozFilter","msFilter","filter"];var test="grayscale(1)";rules.forEach(function(rule){e.style[rule]=test});document.body.appendChild(e);var styles=window.getComputedStyle(e);var can=(0,_lodash2.default)(styles).pick(rules).includes(test);document.body.removeChild(e);return can}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};exports.CoordinateMapsVisualizationProvider=CoordinateMapsVisualizationProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _geohash_layer=__webpack_require__(1122);var _base_maps_visualization=__webpack_require__(447);var _tooltip_formatter=__webpack_require__(1126);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function CoordinateMapsVisualizationProvider(Notifier,Private){var BaseMapsVisualization=Private(_base_maps_visualization.BaseMapsVisualizationProvider);var tooltipFormatter=Private(_tooltip_formatter.TileMapTooltipFormatterProvider);var CoordinateMapsVisualization=function(_BaseMapsVisualizatio){_inherits(CoordinateMapsVisualization,_BaseMapsVisualizatio);function CoordinateMapsVisualization(element,vis){_classCallCheck(this,CoordinateMapsVisualization);var _this=_possibleConstructorReturn(this,(CoordinateMapsVisualization.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization)).call(this,element,vis));_this._geohashLayer=null;_this._notify=new Notifier({location:"Coordinate Map"});return _this}_createClass(CoordinateMapsVisualization,[{key:"_makeKibanaMap",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var updateGeohashAgg,uiState,previousPrecision,precisionChange;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _get(CoordinateMapsVisualization.prototype.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization.prototype),"_makeKibanaMap",this).call(this);case 2:updateGeohashAgg=function updateGeohashAgg(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg)return;geohashAgg.params.mapBounds=_this2._kibanaMap.getBounds();geohashAgg.params.mapZoom=_this2._kibanaMap.getZoomLevel();geohashAgg.params.mapCenter=_this2._kibanaMap.getCenter()};updateGeohashAgg();uiState=this.vis.getUiState();uiState.on("change",function(prop){if(prop==="mapZoom"||prop==="mapCenter"){updateGeohashAgg()}});previousPrecision=this._kibanaMap.getGeohashPrecision();precisionChange=false;this._kibanaMap.on("zoomchange",function(){var geohashAgg=_this2._getGeoHashAgg();precisionChange=previousPrecision!==_this2._kibanaMap.getGeohashPrecision();previousPrecision=_this2._kibanaMap.getGeohashPrecision();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(isAutoPrecision){geohashAgg.params.precision=previousPrecision}});this._kibanaMap.on("zoomend",function(){var geohashAgg=_this2._getGeoHashAgg();if(!geohashAgg){return}var isAutoPrecision=typeof geohashAgg.params.autoPrecision==="boolean"?geohashAgg.params.autoPrecision:true;if(!isAutoPrecision){return}if(precisionChange){_this2.vis.updateState()}else{_this2._updateData(_this2._geoJsonFeatureCollectionAndMeta)}});this._kibanaMap.addDrawControl();this._kibanaMap.on("drawCreated:rectangle",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_bounding_box",event.bounds)});this._kibanaMap.on("drawCreated:polygon",function(event){var geohashAgg=_this2._getGeoHashAgg();_this2.addSpatialFilter(geohashAgg,"geo_polygon",{points:event.points})});case 13:case"end":return _context.stop()}}},_callee,this)}));function _makeKibanaMap(){return _ref.apply(this,arguments)}return _makeKibanaMap}()},{key:"_updateData",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(geojsonFeatureCollectionAndMeta){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this._getMapsParams().mapType!=="Heatmap"&&geojsonFeatureCollectionAndMeta===this._geoJsonFeatureCollectionAndMeta)){_context2.next=2;break}return _context2.abrupt("return");case 2:if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}if(geojsonFeatureCollectionAndMeta){_context2.next=8;break}this._geoJsonFeatureCollectionAndMeta=null;this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null;return _context2.abrupt("return");case 8:this._geoJsonFeatureCollectionAndMeta=geojsonFeatureCollectionAndMeta;this._recreateGeohashLayer();case 10:case"end":return _context2.stop()}}},_callee2,this)}));function _updateData(_x){return _ref2.apply(this,arguments)}return _updateData}()},{key:"_recreateGeohashLayer",value:function _recreateGeohashLayer(){if(this._geohashLayer){this._kibanaMap.removeLayer(this._geohashLayer);this._geohashLayer=null}var geohashOptions=this._getGeohashOptions();this._geohashLayer=new _geohash_layer.GeohashLayer(this._geoJsonFeatureCollectionAndMeta.featureCollection,this._geoJsonFeatureCollectionAndMeta.meta,geohashOptions,this._kibanaMap.getZoomLevel(),this._kibanaMap);this._kibanaMap.addLayer(this._geohashLayer)}},{key:"_updateParams",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var geohashOptions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _get(CoordinateMapsVisualization.prototype.__proto__||Object.getPrototypeOf(CoordinateMapsVisualization.prototype),"_updateParams",this).call(this);case 2:this._kibanaMap.setDesaturateBaseLayer(this.vis.params.isDesaturated);geohashOptions=this._getGeohashOptions();if(!this._geohashLayer||!this._geohashLayer.isReusable(geohashOptions)){if(this._geoJsonFeatureCollectionAndMeta){this._recreateGeohashLayer()}this._updateData(this._geoJsonFeatureCollectionAndMeta)}case 5:case"end":return _context3.stop()}}},_callee3,this)}));function _updateParams(){return _ref3.apply(this,arguments)}return _updateParams}()},{key:"_getGeohashOptions",value:function _getGeohashOptions(){var _this3=this;var newParams=this._getMapsParams();var metricAgg=this._getMetricAgg();var boundTooltipFormatter=tooltipFormatter.bind(null,this.vis.getAggConfig(),metricAgg);return{label:metricAgg?metricAgg.makeLabel():"",valueFormatter:this._geoJsonFeatureCollectionAndMeta?metricAgg&&metricAgg.fieldFormatter():null,tooltipFormatter:this._geoJsonFeatureCollectionAndMeta?boundTooltipFormatter:null,mapType:newParams.mapType,isFilteredByCollar:this._isFilteredByCollar(),fetchBounds:function fetchBounds(){return _this3.vis.API.getGeohashBounds()},colorRamp:newParams.colorSchema,heatmap:{heatClusterSize:newParams.heatClusterSize}}}},{key:"addSpatialFilter",value:function addSpatialFilter(agg,filterName,filterData){if(!agg){return}var indexPatternName=agg.getIndexPattern().id;var field=agg.fieldName();var filter={meta:{negate:false,index:indexPatternName}};filter[filterName]={ignore_unmapped:true};filter[filterName][field]=filterData;this.vis.API.queryFilter.addFilters([filter]);this.vis.updateState()}},{key:"_getGeoHashAgg",value:function _getGeoHashAgg(){return this.vis.getAggConfig().find(function(agg){return _lodash2.default.get(agg,"type.dslName")==="geohash_grid"})}},{key:"_getMetricAgg",value:function _getMetricAgg(){return this.vis.getAggConfig().find(function(agg){return agg.type.type==="metrics"})}},{key:"_isFilteredByCollar",value:function _isFilteredByCollar(){var DEFAULT=false;var agg=this._getGeoHashAgg();if(agg){return _lodash2.default.get(agg,"params.isFilteredByCollar",DEFAULT)}else{return DEFAULT}}}]);return CoordinateMapsVisualization}(BaseMapsVisualization);return CoordinateMapsVisualization}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashLayer=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);var _kibana_map_layer=__webpack_require__(298);var _heatmap=__webpack_require__(1123);var _scaled_circles=__webpack_require__(300);var _shaded_circles=__webpack_require__(1124);var _geohash_grid=__webpack_require__(1125);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GeohashLayer=exports.GeohashLayer=function(_KibanaMapLayer){_inherits(GeohashLayer,_KibanaMapLayer);function GeohashLayer(featureCollection,featureCollectionMetaData,options,zoom,kibanaMap){_classCallCheck(this,GeohashLayer);var _this=_possibleConstructorReturn(this,(GeohashLayer.__proto__||Object.getPrototypeOf(GeohashLayer)).call(this));_this._featureCollection=featureCollection;_this._featureCollectionMetaData=featureCollectionMetaData;_this._geohashOptions=options;_this._zoom=zoom;_this._kibanaMap=kibanaMap;var geojson=_leaflet2.default.geoJson(_this._featureCollection);_this._bounds=geojson.getBounds();_this._createGeohashMarkers();_this._lastBounds=null;return _this}_createClass(GeohashLayer,[{key:"_createGeohashMarkers",value:function _createGeohashMarkers(){var _this2=this;var markerOptions={isFilteredByCollar:this._geohashOptions.isFilteredByCollar,valueFormatter:this._geohashOptions.valueFormatter,tooltipFormatter:this._geohashOptions.tooltipFormatter,label:this._geohashOptions.label,colorRamp:this._geohashOptions.colorRamp};switch(this._geohashOptions.mapType){case"Scaled Circle Markers":this._geohashMarkers=new _scaled_circles.ScaledCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Circle Markers":this._geohashMarkers=new _shaded_circles.ShadedCirclesMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Shaded Geohash Grid":this._geohashMarkers=new _geohash_grid.GeohashGridMarkers(this._featureCollection,this._featureCollectionMetaData,markerOptions,this._zoom,this._kibanaMap);break;case"Heatmap":var radius=15;if(this._featureCollectionMetaData.geohashGridDimensionsAtEquator){var minGridLength=_lodash2.default.min(this._featureCollectionMetaData.geohashGridDimensionsAtEquator);var metersPerPixel=this._kibanaMap.getMetersPerPixel();radius=minGridLength/metersPerPixel/2}radius=radius*parseFloat(this._geohashOptions.heatmap.heatClusterSize);this._geohashMarkers=new _heatmap.HeatmapMarkers(this._featureCollection,{radius:radius,blur:radius,maxZoom:this._kibanaMap.getZoomLevel(),minOpacity:.1,tooltipFormatter:this._geohashOptions.tooltipFormatter},this._zoom,this._featureCollectionMetaData.max);break;default:throw new Error(_i18n.i18n.translate("tileMap.geohashLayer.mapTitle",{defaultMessage:"{mapType} mapType not recognized",values:{mapType:this._geohashOptions.mapType}}))}this._geohashMarkers.on("showTooltip",function(event){return _this2.emit("showTooltip",event)});this._geohashMarkers.on("hideTooltip",function(event){return _this2.emit("hideTooltip",event)});this._leafletLayer=this._geohashMarkers.getLeafletLayer()}},{key:"appendLegendContents",value:function appendLegendContents(jqueryDiv){return this._geohashMarkers.appendLegendContents(jqueryDiv)}},{key:"movePointer",value:function movePointer(){var _geohashMarkers;(_geohashMarkers=this._geohashMarkers).movePointer.apply(_geohashMarkers,arguments)}},{key:"getBounds",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var geoHashBounds,northEast,southWest;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this._geohashOptions.fetchBounds){_context.next=8;break}_context.next=3;return this._geohashOptions.fetchBounds();case 3:geoHashBounds=_context.sent;if(!geoHashBounds){_context.next=8;break}northEast=_leaflet2.default.latLng(geoHashBounds.top_left.lat,geoHashBounds.bottom_right.lon);southWest=_leaflet2.default.latLng(geoHashBounds.bottom_right.lat,geoHashBounds.top_left.lon);return _context.abrupt("return",_leaflet2.default.latLngBounds(southWest,northEast));case 8:return _context.abrupt("return",this._bounds);case 9:case"end":return _context.stop()}}},_callee,this)}));function getBounds(){return _ref.apply(this,arguments)}return getBounds}()},{key:"updateExtent",value:function updateExtent(){if(!this._geohashOptions.isFilteredByCollar){var bounds=this._kibanaMap.getLeafletBounds();if(!this._lastBounds||!this._lastBounds.equals(bounds)){this._kibanaMap.removeLayer(this);this._createGeohashMarkers();this._kibanaMap.addLayer(this)}this._lastBounds=bounds}}},{key:"isReusable",value:function isReusable(options){if(_lodash2.default.isEqual(this._geohashOptions,options)){return true}if(this._geohashOptions.colorRamp!==options.colorRamp){return false}else if(this._geohashOptions.mapType!==options.mapType){return false}else if(this._geohashOptions.mapType==="Heatmap"&&!_lodash2.default.isEqual(this._geohashOptions.heatmap,options)){return false}else{return true}}}]);return GeohashLayer}(_kibana_map_layer.KibanaMapLayer)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeatmapMarkers=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _d=__webpack_require__(13);var _d2=_interopRequireDefault(_d);var _events=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var HeatmapMarkers=exports.HeatmapMarkers=function(_EventEmitter){_inherits(HeatmapMarkers,_EventEmitter);function HeatmapMarkers(featureCollection,options,zoom,max){_classCallCheck(this,HeatmapMarkers);var _this=_possibleConstructorReturn(this,(HeatmapMarkers.__proto__||Object.getPrototypeOf(HeatmapMarkers)).call(this));_this._geojsonFeatureCollection=featureCollection;var points=dataToHeatArray(featureCollection,max);_this._leafletLayer=_leaflet2.default.heatLayer(points,options);_this._tooltipFormatter=options.tooltipFormatter;_this._zoom=zoom;_this._disableTooltips=false;_this._getLatLng=_lodash2.default.memoize(function(feature){return _leaflet2.default.latLng(feature.geometry.coordinates[1],feature.geometry.coordinates[0])},function(feature){return[feature.geometry.coordinates[1],feature.geometry.coordinates[0]].join(",")});_this._addTooltips();return _this}_createClass(HeatmapMarkers,[{key:"getBounds",value:function getBounds(){return this._leafletLayer.getBounds()}},{key:"getLeafletLayer",value:function getLeafletLayer(){return this._leafletLayer}},{key:"appendLegendContents",value:function appendLegendContents(){}},{key:"movePointer",value:function movePointer(type,event){if(type==="mousemove"){this._debounceMoveMoveLocation(event)}else if(type==="mouseout"){this.emit("hideTooltip")}else if(type==="mousedown"){this._disableTooltips=true;this.emit("hideTooltip")}else if(type==="mouseup"){this._disableTooltips=false}}},{key:"_addTooltips",value:function _addTooltips(){var _this2=this;var mouseMoveLocation=function mouseMoveLocation(e){if(!_this2._geojsonFeatureCollection.features.length||_this2._disableTooltips){_this2.emit("hideTooltip");return}var feature=_this2._nearestFeature(e.latlng);if(_this2._tooltipProximity(e.latlng,feature)){var content=_this2._tooltipFormatter(feature);if(!content){return}_this2.emit("showTooltip",{content:content,position:e.latlng})}else{_this2.emit("hideTooltip")}};this._debounceMoveMoveLocation=_lodash2.default.debounce(mouseMoveLocation.bind(this),15,{leading:true,trailing:false})}},{key:"_nearestFeature",value:function _nearestFeature(latLng){var self=this;var nearest=void 0;if(latLng.lng<-180||latLng.lng>180){return}_lodash2.default.reduce(this._geojsonFeatureCollection.features,function(distance,feature){var featureLatLng=self._getLatLng(feature);var dist=latLng.distanceTo(featureLatLng);if(dist<distance){nearest=feature;return dist}return distance},Infinity);return nearest}},{key:"_tooltipProximity",value:function _tooltipProximity(latlng,feature){if(!feature)return;var showTip=false;var featureLatLng=this._getLatLng(feature);var zoomScale=_d2.default.scale.linear().domain([1,4,7,10,13,16,18]).range([1e6,3e5,1e5,15e3,2e3,150,50]);var proximity=zoomScale(this._zoom);var distance=latlng.distanceTo(featureLatLng);var maxLngDif=40;var lngDif=Math.abs(latlng.lng-featureLatLng.lng);if(distance<proximity&&lngDif<maxLngDif){showTip=true}_d2.default.scale.pow().exponent(.2).domain([1,18]).range([15e5,50]);return showTip}}]);return HeatmapMarkers}(_events.EventEmitter);function dataToHeatArray(featureCollection,max){return featureCollection.features.map(function(feature){var lat=feature.geometry.coordinates[1];var lng=feature.geometry.coordinates[0];var heatIntensity=feature.properties.value/max;return[lat,lng,heatIntensity]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShadedCirclesMarkers=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _scaled_circles=__webpack_require__(300);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ShadedCirclesMarkers=exports.ShadedCirclesMarkers=function(_ScaledCirclesMarkers){_inherits(ShadedCirclesMarkers,_ScaledCirclesMarkers);function ShadedCirclesMarkers(){_classCallCheck(this,ShadedCirclesMarkers);return _possibleConstructorReturn(this,(ShadedCirclesMarkers.__proto__||Object.getPrototypeOf(ShadedCirclesMarkers)).apply(this,arguments))}_createClass(ShadedCirclesMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){var _this2=this;var scaleFactor=.8;return function(feature,latlng){var radius=_this2._geohashMinDistance(feature)*scaleFactor;return _leaflet2.default.circle(latlng,radius)}}},{key:"_geohashMinDistance",value:function _geohashMinDistance(feature){var centerPoint=feature.properties.geohash_meta.center;var geohashRect=feature.properties.geohash_meta.rectangle;var east=_leaflet2.default.latLng([centerPoint[0],geohashRect[2][1]]);var north=_leaflet2.default.latLng([geohashRect[3][0],centerPoint[1]]);var center=_leaflet2.default.latLng([centerPoint[0],centerPoint[1]]);var eastRadius=Math.floor(center.distanceTo(east));var northRadius=Math.floor(center.distanceTo(north));return _lodash2.default.min([eastRadius,northRadius])}}]);return ShadedCirclesMarkers}(_scaled_circles.ScaledCirclesMarkers)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GeohashGridMarkers=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);var _scaled_circles=__webpack_require__(300);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GeohashGridMarkers=exports.GeohashGridMarkers=function(_ScaledCirclesMarkers){_inherits(GeohashGridMarkers,_ScaledCirclesMarkers);function GeohashGridMarkers(){_classCallCheck(this,GeohashGridMarkers);return _possibleConstructorReturn(this,(GeohashGridMarkers.__proto__||Object.getPrototypeOf(GeohashGridMarkers)).apply(this,arguments))}_createClass(GeohashGridMarkers,[{key:"getMarkerFunction",value:function getMarkerFunction(){return function(feature){var geohashRect=feature.properties.geohash_meta.rectangle;var corners=[[geohashRect[3][0],geohashRect[3][1]],[geohashRect[1][0],geohashRect[1][1]]];return _leaflet2.default.rectangle(corners)}}}]);return GeohashGridMarkers}(_scaled_circles.ScaledCirclesMarkers)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TileMapTooltipFormatterProvider=TileMapTooltipFormatterProvider;var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TileMapTooltipFormatterProvider($compile,$rootScope,i18n){var $tooltipScope=$rootScope.$new();var $el=(0,_jquery2.default)("<div>").html(__webpack_require__(1127));$compile($el)($tooltipScope);return function tooltipFormatter(aggConfig,metricAgg,feature){if(!feature){return""}$tooltipScope.details=[{label:metricAgg.makeLabel(),value:metricAgg.fieldFormatter()(feature.properties.value)},{label:i18n("tileMap.tooltipFormatter.latitudeLabel",{defaultMessage:"Latitude"}),value:feature.geometry.coordinates[1]},{label:i18n("tileMap.tooltipFormatter.longitudeLabel",{defaultMessage:"Longitude"}),value:feature.geometry.coordinates[0]}];$tooltipScope.$apply();return $el.html()}}},function(module,exports){module.exports='<table>\n  <tbody>\n    <tr ng-repeat="detail in details" >\n      <td class="visTooltip__label">{{detail.label}}</td>\n      <td class="visTooltip__value">{{detail.value}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeGeoJsonResponseHandler=makeGeoJsonResponseHandler;var _convert_to_geojson=__webpack_require__(1129);function makeGeoJsonResponseHandler(){return _convert_to_geojson.convertToGeoJson}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertToGeoJson=convertToGeoJson;var _decode_geo_hash=__webpack_require__(297);var _grid_dimensions=__webpack_require__(1130);function convertToGeoJson(tabifiedResponse){var features=void 0;var min=Infinity;var max=-Infinity;var geoAgg=void 0;if(tabifiedResponse&&tabifiedResponse.rows){var table=tabifiedResponse;var geohashColumn=table.columns.find(function(column){return column.aggConfig.type.dslName==="geohash_grid"});if(!geohashColumn){features=[]}else{geoAgg=geohashColumn.aggConfig;var metricColumn=table.columns.find(function(column){return column.aggConfig.type.type==="metrics"});var geocentroidColumn=table.columns.find(function(column){return column.aggConfig.type.dslName==="geo_centroid"});features=table.rows.map(function(row){var geohash=row[geohashColumn.id];if(!geohash)return false;var geohashLocation=(0,_decode_geo_hash.decodeGeoHash)(geohash);var pointCoordinates=void 0;if(geocentroidColumn){var location=row[geocentroidColumn.id];pointCoordinates=[location.lon,location.lat]}else{pointCoordinates=[geohashLocation.longitude[2],geohashLocation.latitude[2]]}var rectangle=[[geohashLocation.latitude[0],geohashLocation.longitude[0]],[geohashLocation.latitude[0],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[1]],[geohashLocation.latitude[1],geohashLocation.longitude[0]]];var centerLatLng=[geohashLocation.latitude[2],geohashLocation.longitude[2]];if(geoAgg.params.useGeocentroid){pointCoordinates[0]=clampGrid(pointCoordinates[0],geohashLocation.longitude[0],geohashLocation.longitude[1]);pointCoordinates[1]=clampGrid(pointCoordinates[1],geohashLocation.latitude[0],geohashLocation.latitude[1])}var value=row[metricColumn.id];min=Math.min(min,value);max=Math.max(max,value);return{type:"Feature",geometry:{type:"Point",coordinates:pointCoordinates},properties:{geohash:geohash,geohash_meta:{center:centerLatLng,rectangle:rectangle},value:value}}}).filter(function(row){return row})}}else{features=[]}var featureCollection={type:"FeatureCollection",features:features};return{featureCollection:featureCollection,meta:{min:min,max:max,geohashPrecision:geoAgg&&geoAgg.params.precision,geohashGridDimensionsAtEquator:geoAgg&&(0,_grid_dimensions.gridDimensions)(geoAgg.params.precision)}}}function clampGrid(val,min,max){if(val>max)val=max;else if(val<min)val=min;return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.gridDimensions=gridDimensions;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var gridAtEquator={1:[5009400,4992600],2:[1252300,624100],3:[156500,156e3],4:[39100,19500],5:[4900,4900],6:[1200,609.4],7:[152.9,152.4],8:[38.2,19],9:[4.8,4.8],10:[1.2,.595],11:[.149,.149],12:[.037,.019]};function gridDimensions(precision){return _lodash2.default.get(gridAtEquator,precision)}},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2694)},,,,,,,,,function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(8);var _vis_types=__webpack_require__(30);var _vis_factory=__webpack_require__(25);var _editor_size=__webpack_require__(231);var _update_status=__webpack_require__(82);var _default_feedback_message=__webpack_require__(287);var _vega_request_handler=__webpack_require__(1144);var _vega_visualization=__webpack_require__(1156);__webpack_require__(1403);__webpack_require__(595);__webpack_require__(1162);var _vega_editor_template=__webpack_require__(1163);var _vega_editor_template2=_interopRequireDefault(_vega_editor_template);var _defaultSpec=__webpack_require__(1164);var _defaultSpec2=_interopRequireDefault(_defaultSpec);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_vis_types.VisTypesRegistryProvider.register(function(Private){var VisFactory=Private(_vis_factory.VisFactoryProvider);var vegaRequestHandler=Private(_vega_request_handler.VegaRequestHandlerProvider).handler;var VegaVisualization=Private(_vega_visualization.VegaVisualizationProvider);return VisFactory.createBaseVisualization({name:"vega",title:"Vega",description:_i18n.i18n.translate("vega.type.vegaDescription",{defaultMessage:"Create custom visualizations using Vega and Vega-Lite",description:"Vega and Vega-Lite are product names and should not be translated"}),icon:"visVega",visConfig:{defaults:{spec:_defaultSpec2.default}},editorConfig:{optionsTemplate:_vega_editor_template2.default,enableAutoApply:true,defaultSize:_editor_size.DefaultEditorSize.MEDIUM},visualization:VegaVisualization,requiresUpdateStatus:[_update_status.Status.DATA,_update_status.Status.RESIZE],requestHandler:vegaRequestHandler,responseHandler:"none",options:{showIndexSelection:false,showQueryBar:true,showFilterBar:true},stage:"experimental",feedbackMessage:_default_feedback_message.defaultFeedbackMessage})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaRequestHandlerProvider=VegaRequestHandlerProvider;var _vega_parser=__webpack_require__(1145);var _search_cache=__webpack_require__(1153);var _time_cache=__webpack_require__(1155);var _timefilter=__webpack_require__(19);var _esQuery=__webpack_require__(27);function VegaRequestHandlerProvider(es,serviceSettings,config){var searchCache=new _search_cache.SearchCache(es,{max:10,maxAge:4*1e3});var timeCache=new _time_cache.TimeCache(_timefilter.timefilter,3*1e3);return{name:"vega",handler:function handler(_ref){var timeRange=_ref.timeRange,filters=_ref.filters,query=_ref.query,visParams=_ref.visParams;timeCache.setTimeRange(timeRange);var esQueryConfigs=(0,_esQuery.getEsQueryConfig)(config);var filtersDsl=(0,_esQuery.buildEsQuery)(undefined,[query],filters,esQueryConfigs);var vp=new _vega_parser.VegaParser(visParams.spec,searchCache,timeCache,filtersDsl,serviceSettings);return vp.parseAsync()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaParser=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _vegaLib=__webpack_require__(252);var vega=_interopRequireWildcard(_vegaLib);var _vegaLite=__webpack_require__(457);var vegaLite=_interopRequireWildcard(_vegaLite);var _vegaSchemaUrlParser=__webpack_require__(1299);var _vegaSchemaUrlParser2=_interopRequireDefault(_vegaSchemaUrlParser);var _compareVersions=__webpack_require__(1324);var _compareVersions2=_interopRequireDefault(_compareVersions);var _es_query_parser=__webpack_require__(1148);var _hjson=__webpack_require__(459);var _hjson2=_interopRequireDefault(_hjson);var _utils=__webpack_require__(458);var _ems_file_parser=__webpack_require__(1149);var _url_parser=__webpack_require__(1152);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var defaultColor=_eui.VISUALIZATION_COLORS[0];var DEFAULT_SCHEMA="https://vega.github.io/schema/vega/v3.0.json";var locToDirMap={left:"row-reverse",right:"row",top:"column-reverse",bottom:"column"};var DEFAULT_PARSER="elasticsearch";var VegaParser=exports.VegaParser=function(){function VegaParser(spec,searchCache,timeCache,filters,serviceSettings){_classCallCheck(this,VegaParser);this.spec=spec;this.hideWarnings=false;this.error=undefined;this.warnings=[];var onWarn=this._onWarning.bind(this);this._urlParsers={elasticsearch:new _es_query_parser.EsQueryParser(timeCache,searchCache,filters,onWarn),emsfile:new _ems_file_parser.EmsFileParser(serviceSettings),url:new _url_parser.UrlParser(onWarn)}}_createClass(VegaParser,[{key:"parseAsync",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this._parseAsync();case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context["catch"](0);this.error=_utils.Utils.formatErrorToStr(_context.t0);case 8:return _context.abrupt("return",this);case 9:case"end":return _context.stop()}}},_callee,this,[[0,5]])}));function parseAsync(){return _ref.apply(this,arguments)}return parseAsync}()},{key:"_parseAsync",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.isVegaLite!==undefined)){_context2.next=2;break}throw new Error;case 2:if(typeof this.spec==="string"){this.spec=_hjson2.default.parse(this.spec,{legacyRoot:false})}if(_lodash2.default.isPlainObject(this.spec)){_context2.next=5;break}throw new Error(_i18n.i18n.translate("vega.vegaParser.invalidVegaSpecErrorMessage",{defaultMessage:"Invalid Vega specification"}));case 5:this.isVegaLite=this._parseSchema();this.useHover=!this.isVegaLite;this._config=this._parseConfig();this.hideWarnings=!!this._config.hideWarnings;this.useMap=this._config.type==="map";this.renderer=this._config.renderer==="svg"?"svg":"canvas";this.tooltips=this._parseTooltips();this._setDefaultColors();this._parseControlPlacement(this._config);if(this.useMap){this.mapConfig=this._parseMapConfig()}else if(this.spec.autosize===undefined){this.spec.autosize={type:"fit",contains:"padding"}}_context2.next=17;return this._resolveDataUrls();case 17:if(this.isVegaLite){this._compileVegaLite()}this._calcSizing();case 19:case"end":return _context2.stop()}}},_callee2,this)}));function _parseAsync(){return _ref2.apply(this,arguments)}return _parseAsync}()},{key:"_compileVegaLite",value:function _compileVegaLite(){this.vlspec=this.spec;var logger=vega.logger(vega.Warn);logger.warn=this._onWarning.bind(this);this.spec=vegaLite.compile(this.vlspec,logger).spec;if(this.useMap){var hasConfig=_lodash2.default.isPlainObject(this.vlspec.config);if(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.projection){if(!Array.isArray(this.spec.projections)||this.spec.projections.length!==1||this.spec.projections[0].name!=="projection"){throw new Error(_i18n.i18n.translate("vega.vegaParser.VLCompilerShouldHaveGeneratedSingleProtectionObjectErrorMessage",{defaultMessage:"Internal error: Vega-Lite compiler should have generated a single projection object"}))}delete this.spec.projections}if(!this.vlspec.width)delete this.spec.width;if(!this.vlspec.height)delete this.spec.height;if(!this.vlspec.padding&&(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.padding)){delete this.spec.padding}if(!this.vlspec.autosize&&(this.vlspec.config===undefined||hasConfig&&!this.vlspec.config.autosize)){delete this.spec.autosize}}}},{key:"_calcSizing",value:function _calcSizing(){this.useResize=false;if(!this.useMap){var autosize=this.spec.autosize.type||this.spec.autosize;if(autosize==="fit"||autosize==="none"&&!this.spec.width&&!this.spec.height){this.useResize=true}}this.paddingWidth=0;this.paddingHeight=0;if(this.useResize&&this.spec.padding&&this.spec.autosize.contains!=="padding"){if(_typeof(this.spec.padding)==="object"){this.paddingWidth+=(+this.spec.padding.left||0)+(+this.spec.padding.right||0);this.paddingHeight+=(+this.spec.padding.top||0)+(+this.spec.padding.bottom||0)}else{this.paddingWidth+=2*(+this.spec.padding||0);this.paddingHeight+=2*(+this.spec.padding||0)}}if(this.useResize&&(this.spec.width||this.spec.height)){if(this.isVegaLite){delete this.spec.width;delete this.spec.height}else{this._onWarning(_i18n.i18n.translate("vega.vegaParser.widthAndHeightParamsAreIgnoredWithAutosizeFitWarningMessage",{defaultMessage:"The {widthParam} and {heightParam} params are ignored with {autosizeParam}",values:{autosizeParam:"autosize=fit",widthParam:'"width"',heightParam:'"height"'}}))}}}},{key:"_parseControlPlacement",value:function _parseControlPlacement(){this.containerDir=locToDirMap[this._config.controlsLocation];if(this.containerDir===undefined){if(this._config.controlsLocation===undefined){this.containerDir="column"}else{throw new Error(_i18n.i18n.translate("vega.vegaParser.unrecognizedControlsLocationValueErrorMessage",{defaultMessage:"Unrecognized {controlsLocationParam} value. Expecting one of [{locToDirMap}]",values:{locToDirMap:'"'+locToDirMap.keys().join('", "')+'"',controlsLocationParam:"controlsLocation"}}))}}var dir=this._config.controlsDirection;if(dir!==undefined&&dir!=="horizontal"&&dir!=="vertical"){throw new Error(_i18n.i18n.translate("vega.vegaParser.unrecognizedDirValueErrorMessage",{defaultMessage:"Unrecognized {dirParam} value. Expecting one of [{expectedValues}]",values:{expectedValues:'"horizontal", "vertical"',dirParam:"dir"}}))}this.controlsDir=dir==="horizontal"?"row":"column"}},{key:"_parseConfig",value:function _parseConfig(){var result=void 0;if(this.spec._hostConfig!==undefined){result=this.spec._hostConfig;delete this.spec._hostConfig;if(!_lodash2.default.isPlainObject(result)){throw new Error(_i18n.i18n.translate("vega.vegaParser.hostConfigValueTypeErrorMessage",{defaultMessage:"If present, {configName} must be an object",values:{configName:'"_hostConfig"'}}))}this._onWarning(_i18n.i18n.translate("vega.vegaParser.hostConfigIsDeprecatedWarningMessage",{defaultMessage:"{deprecatedConfigName} has been deprecated. Use {newConfigName} instead.",values:{deprecatedConfigName:'"_hostConfig"',newConfigName:"config.kibana"}}))}if(_lodash2.default.isPlainObject(this.spec.config)&&this.spec.config.kibana!==undefined){result=this.spec.config.kibana;delete this.spec.config.kibana;if(!_lodash2.default.isPlainObject(result)){throw new Error(_i18n.i18n.translate("vega.vegaParser.kibanaConfigValueTypeErrorMessage",{defaultMessage:"If present, {configName} must be an object",values:{configName:"config.kibana"}}))}}return result||{}}},{key:"_parseTooltips",value:function _parseTooltips(){if(this._config.tooltips===false){return false}var result=this._config.tooltips||{};if(result.position===undefined){result.position="top"}else if(["top","right","bottom","left"].indexOf(result.position)===-1){throw new Error(_i18n.i18n.translate("vega.vegaParser.unexpectedValueForPositionConfigurationErrorMessage",{defaultMessage:"Unexpected value for the {configurationName} configuration",values:{configurationName:"result.position"}}))}if(result.padding===undefined){result.padding=16}else if(typeof result.padding!=="number"){throw new Error(_i18n.i18n.translate("vega.vegaParser.paddingConfigValueTypeErrorMessage",{defaultMessage:"{configName} is expected to be a number",values:{configName:"config.kibana.result.padding"}}))}if(result.centerOnMark===undefined){result.centerOnMark=50}else if(typeof result.centerOnMark==="boolean"){result.centerOnMark=result.centerOnMark?Number.MAX_VALUE:-1}else if(typeof result.centerOnMark!=="number"){throw new Error(_i18n.i18n.translate("vega.vegaParser.centerOnMarkConfigValueTypeErrorMessage",{defaultMessage:"{configName} is expected to be {trueValue}, {falseValue}, or a number",values:{configName:"config.kibana.result.centerOnMark",trueValue:"true",falseValue:"false"}}))}return result}},{key:"_parseMapConfig",value:function _parseMapConfig(){var _this=this;var res={delayRepaint:this._config.delayRepaint===undefined?true:this._config.delayRepaint};var validate=function validate(name,isZoom){var val=_this._config[name];if(val!==undefined){var parsed=parseFloat(val);if(Number.isFinite(parsed)&&(!isZoom||parsed>=0&&parsed<=30)){res[name]=parsed;return}_this._onWarning(_i18n.i18n.translate("vega.vegaParser.someKibanaConfigurationIsNoValidWarningMessage",{defaultMessage:"{configName} is not valid",values:{configName:"config.kibana."+name}}))}if(!isZoom)res[name]=0};validate("latitude",false);validate("longitude",false);validate("zoom",true);validate("minZoom",true);validate("maxZoom",true);res.mapStyle=this._config.mapStyle===undefined?"default":this._config.mapStyle;if(res.mapStyle!=="default"&&res.mapStyle!==false){this._onWarning(_i18n.i18n.translate("vega.vegaParser.mapStyleValueTypeWarningMessage",{defaultMessage:"{mapStyleConfigName} may either be {mapStyleConfigFirstAllowedValue} or {mapStyleConfigSecondAllowedValue}",values:{mapStyleConfigName:"config.kibana.mapStyle",mapStyleConfigFirstAllowedValue:"false",mapStyleConfigSecondAllowedValue:'"default"'}}));res.mapStyle="default"}this._parseBool("zoomControl",res,true);this._parseBool("scrollWheelZoom",res,false);var maxBounds=this._config.maxBounds;if(maxBounds!==undefined){if(!Array.isArray(maxBounds)||maxBounds.length!==4||!maxBounds.every(function(v){return typeof v==="number"&&Number.isFinite(v)})){this._onWarning(_i18n.i18n.translate("vega.vegaParser.maxBoundsValueTypeWarningMessage",{defaultMessage:"{maxBoundsConfigName} must be an array with four numbers",values:{maxBoundsConfigName:"config.kibana.maxBounds"}}))}else{res.maxBounds=maxBounds}}return res}},{key:"_parseBool",value:function _parseBool(paramName,dstObj,dflt){var val=this._config[paramName];if(val===undefined){dstObj[paramName]=dflt}else if(typeof val!=="boolean"){this._onWarning(_i18n.i18n.translate("vega.vegaParser.someKibanaParamValueTypeWarningMessage",{defaultMessage:"{configName} must be a boolean value",values:{configName:"config.kibana."+paramName}}));dstObj[paramName]=dflt}else{dstObj[paramName]=val}}},{key:"_parseSchema",value:function _parseSchema(){if(!this.spec.$schema){this._onWarning(_i18n.i18n.translate("vega.vegaParser.inputSpecDoesNotSpecifySchemaWarningMessage",{defaultMessage:"The input spec does not specify a {schemaParam}, defaulting to {defaultSchema}",values:{defaultSchema:'"'+DEFAULT_SCHEMA+'"',schemaParam:'"$schema"'}}));this.spec.$schema=DEFAULT_SCHEMA}var schema=(0,_vegaSchemaUrlParser2.default)(this.spec.$schema);var isVegaLite=schema.library==="vega-lite";var libVersion=isVegaLite?vegaLite.version:vega.version;if((0,_compareVersions2.default)(schema.version,libVersion)>0){this._onWarning(_i18n.i18n.translate("vega.vegaParser.notValidLibraryVersionForInputSpecWarningMessage",{defaultMessage:"The input spec uses {schemaLibrary} {schemaVersion}, but current version of {schemaLibrary} is {libraryVersion}.",values:{schemaLibrary:schema.library,schemaVersion:schema.version,libraryVersion:libVersion}}))}return isVegaLite}},{key:"_resolveDataUrls",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this2=this;var pending,pendingParsers;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:pending={};this._findObjectDataUrls(this.spec,function(obj){var url=obj.url;delete obj.url;var type=url["%type%"];delete url["%type%"];if(type===undefined){type=DEFAULT_PARSER}var parser=_this2._urlParsers[type];if(parser===undefined){throw new Error(_i18n.i18n.translate("vega.vegaParser.notSupportedUrlTypeErrorMessage",{defaultMessage:"{urlObject} is not supported",values:{urlObject:'url: {"%type%": "${type}"}'}}))}var pendingArr=pending[type];if(pendingArr===undefined){pending[type]=pendingArr=[]}pendingArr.push(parser.parseUrl(obj,url))});pendingParsers=Object.keys(pending);if(!(pendingParsers.length>0)){_context3.next=6;break}_context3.next=6;return Promise.all(pendingParsers.map(function(type){return _this2._urlParsers[type].populateData(pending[type])}));case 6:case"end":return _context3.stop()}}},_callee3,this)}));function _resolveDataUrls(){return _ref3.apply(this,arguments)}return _resolveDataUrls}()},{key:"_findObjectDataUrls",value:function _findObjectDataUrls(obj,onFind,key){if(Array.isArray(obj)){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=obj[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var elem=_step.value;this._findObjectDataUrls(elem,onFind,key)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}else if(_lodash2.default.isPlainObject(obj)){if(key==="data"&&_lodash2.default.isPlainObject(obj.url)){if(obj.values!==undefined||obj.source!==undefined){throw new Error(_i18n.i18n.translate("vega.vegaParser.dataExceedsSomeParamsUseTimesLimitErrorMessage",{defaultMessage:"Data must not have more than one of {urlParam}, {valuesParam}, and {sourceParam}",values:{urlParam:'"url"',valuesParam:'"values"',sourceParam:'"source"'}}))}onFind(obj)}else{var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=Object.keys(obj)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var k=_step2.value;this._findObjectDataUrls(obj[k],onFind,k)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}}},{key:"_setDefaultColors",value:function _setDefaultColors(){this._setDefaultValue({scheme:"elastic"},"config","range","category");if(this.isVegaLite){this._setDefaultValue(defaultColor,"config","mark","color")}else{if(!this.spec.config.mark||this.spec.config.mark.color===undefined&&this.spec.config.mark.fill===undefined){this._setDefaultValue(defaultColor,"config","arc","fill");this._setDefaultValue(defaultColor,"config","area","fill");this._setDefaultValue(defaultColor,"config","line","stroke");this._setDefaultValue(defaultColor,"config","path","stroke");this._setDefaultValue(defaultColor,"config","rect","fill");this._setDefaultValue(defaultColor,"config","rule","stroke");this._setDefaultValue(defaultColor,"config","shape","stroke");this._setDefaultValue(defaultColor,"config","symbol","fill");this._setDefaultValue(defaultColor,"config","trail","fill")}}}},{key:"_setDefaultValue",value:function _setDefaultValue(value){var o=this.spec;for(var _len=arguments.length,fields=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){fields[_key-1]=arguments[_key]}for(var i=0;i<fields.length-1;i++){var field=fields[i];var subObj=o[field];if(subObj===undefined){o[field]={}}else if(!_lodash2.default.isPlainObject(subObj)){return}o=o[field]}var lastField=fields[fields.length-1];if(o[lastField]===undefined){o[lastField]=value}}},{key:"_onWarning",value:function _onWarning(){if(!this.hideWarnings){this.warnings.push(_utils.Utils.formatWarningToStr.apply(_utils.Utils,arguments))}}}]);return VegaParser}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2289)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EsQueryParser=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var TIMEFILTER="%timefilter%";var AUTOINTERVAL="%autointerval%";var MUST_CLAUSE="%dashboard_context-must_clause%";var MUST_NOT_CLAUSE="%dashboard_context-must_not_clause%";var LEGACY_CONTEXT="%context_query%";var CONTEXT="%context%";var TIMEFIELD="%timefield%";var EsQueryParser=exports.EsQueryParser=function(){function EsQueryParser(timeCache,searchCache,filters,onWarning){_classCallCheck(this,EsQueryParser);this._timeCache=timeCache;this._searchCache=searchCache;this._filters=filters;this._onWarning=onWarning}_createClass(EsQueryParser,[{key:"parseUrl",value:function parseUrl(dataObject,url){var body=url.body;var context=url[CONTEXT];delete url[CONTEXT];var timefield=url[TIMEFIELD];delete url[TIMEFIELD];var usesContext=context!==undefined||timefield!==undefined;if(body===undefined){url.body=body={}}else if(!_lodash2.default.isPlainObject(body)){throw new Error(_i18n.i18n.translate("vega.esQueryParser.urlBodyValueTypeErrorMessage",{defaultMessage:"{configName} must be an object",values:{configName:"url.body"}}))}var legacyContext=url[LEGACY_CONTEXT];delete url[LEGACY_CONTEXT];if(legacyContext!==undefined){if(body.query!==undefined){throw new Error(_i18n.i18n.translate("vega.esQueryParser.dataUrlMustNotHaveLegacyAndBodyQueryValuesAtTheSameTimeErrorMessage",{defaultMessage:"{dataUrlParam} must not have legacy {legacyContext} and {bodyQueryConfigName} values at the same time",values:{legacyContext:'"'+LEGACY_CONTEXT+'"',bodyQueryConfigName:'"body.query"',dataUrlParam:'"data.url"'}}))}else if(usesContext){throw new Error(_i18n.i18n.translate("vega.esQueryParser.dataUrlMustNotHaveLegacyContextTogetherWithContextOrTimefieldErrorMessage",{defaultMessage:"{dataUrlParam} must not have {legacyContext} together with {context} or {timefield}",values:{legacyContext:'"'+LEGACY_CONTEXT+'"',context:'"'+CONTEXT+'"',timefield:'"'+TIMEFIELD+'"',dataUrlParam:'"data.url"'}}))}else if(legacyContext!==true&&(typeof legacyContext!=="string"||legacyContext.length===0)){throw new Error(_i18n.i18n.translate("vega.esQueryParser.legacyContextCanBeTrueErrorMessage",{defaultMessage:"Legacy {legacyContext} can either be {trueValue} (ignores time range picker), or it can be the name of the time field, e.g. {timestampParam}",values:{legacyContext:'"'+LEGACY_CONTEXT+'"',trueValue:"true",timestampParam:'"@timestamp"'}}))}usesContext=true;context=true;var result='"url": {"'+CONTEXT+'": true';if(typeof legacyContext==="string"){timefield=legacyContext;result+=', "'+TIMEFIELD+'": '+JSON.stringify(timefield)}result+="}";this._onWarning(_i18n.i18n.translate("vega.esQueryParser.legacyUrlShouldChangeToWarningMessage",{defaultMessage:"Legacy {urlParam}: {legacyUrl} should change to {result}",values:{legacyUrl:'"'+LEGACY_CONTEXT+'": '+JSON.stringify(legacyContext),result:result,urlParam:'"url"'}}))}if(body.query!==undefined){if(usesContext){throw new Error(_i18n.i18n.translate("vega.esQueryParser.urlContextAndUrlTimefieldMustNotBeUsedErrorMessage",{defaultMessage:"{urlContext} and {timefield} must not be used when {queryParam} is set",values:{timefield:"url."+TIMEFIELD,urlContext:"url."+CONTEXT,queryParam:"url.body.query"}}))}this._injectContextVars(body.query,true)}else if(usesContext){if(timefield){body.query={range:_defineProperty({},timefield,this._createRangeFilter(_defineProperty({},TIMEFILTER,true)))}}if(context){var newQuery=_lodash2.default.cloneDeep(this._filters);if(timefield){newQuery.bool.must.push(body.query)}body.query=newQuery}}this._injectContextVars(body.aggs,false);return{dataObject:dataObject,url:url}}},{key:"populateData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var esSearches,results,i;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:esSearches=requests.map(function(r){return r.url});_context.next=3;return this._searchCache.search(esSearches);case 3:results=_context.sent;for(i=0;i<requests.length;i++){requests[i].dataObject.values=results[i]}case 5:case"end":return _context.stop()}}},_callee,this)}));function populateData(_x){return _ref.apply(this,arguments)}return populateData}()},{key:"_injectContextVars",value:function _injectContextVars(obj,isQuery){if(obj&&(typeof obj==="undefined"?"undefined":_typeof(obj))==="object"){if(Array.isArray(obj)){for(var pos=0;pos<obj.length;){var item=obj[pos];if(isQuery&&(item===MUST_CLAUSE||item===MUST_NOT_CLAUSE)){var ctxTag=item===MUST_CLAUSE?"must":"must_not";var ctx=_lodash2.default.cloneDeep(this._filters);if(ctx&&ctx.bool&&ctx.bool[ctxTag]){if(Array.isArray(ctx.bool[ctxTag])){obj.splice.apply(obj,[pos,1].concat(_toConsumableArray(ctx.bool[ctxTag])));pos+=ctx.bool[ctxTag].length}else{obj[pos++]=ctx.bool[ctxTag]}}else{obj.splice(pos,1)}}else{this._injectContextVars(item,isQuery);pos++}}}else{var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(obj)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var prop=_step.value;var subObj=obj[prop];if(!subObj||(typeof obj==="undefined"?"undefined":_typeof(obj))!=="object")continue;if(prop==="interval"&&subObj[AUTOINTERVAL]){var size=subObj[AUTOINTERVAL];if(size===true){size=50}else if(typeof size!=="number"){throw new Error(_i18n.i18n.translate("vega.esQueryParser.autointervalValueTypeErrorMessage",{defaultMessage:"{autointerval} must be either {trueValue} or a number",values:{autointerval:'"'+AUTOINTERVAL+'"',trueValue:"true"}}))}var bounds=this._timeCache.getTimeBounds();obj.interval=EsQueryParser._roundInterval((bounds.max-bounds.min)/size);continue}switch(subObj[TIMEFILTER]){case"min":case"max":obj[prop]=this._getTimeBound(subObj,subObj[TIMEFILTER]);continue;case true:this._createRangeFilter(subObj);continue;case undefined:this._injectContextVars(subObj,isQuery);continue;default:throw new Error(_i18n.i18n.translate("vega.esQueryParser.timefilterValueErrorMessage",{defaultMessage:"{timefilter} property must be set to {trueValue}, {minValue}, or {maxValue}",values:{timefilter:'"'+TIMEFILTER+'"',trueValue:"true",minValue:'"min"',maxValue:'"max"'}}))}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}}},{key:"_createRangeFilter",value:function _createRangeFilter(obj){obj.gte=this._getTimeBound(obj,"min");obj.lte=this._getTimeBound(obj,"max");obj.format="epoch_millis";delete obj[TIMEFILTER];delete obj.shift;delete obj.unit;return obj}},{key:"_getTimeBound",value:function _getTimeBound(opts,type){var bounds=this._timeCache.getTimeBounds();var result=bounds[type];if(opts.shift){var shift=opts.shift;if(typeof shift!=="number"){throw new Error(_i18n.i18n.translate("vega.esQueryParser.shiftMustValueTypeErrorMessage",{defaultMessage:"{shiftParam} must be a numeric value",values:{shiftParam:'"shift"'}}))}var multiplier=void 0;switch(opts.unit||"d"){case"w":case"week":multiplier=1e3*60*60*24*7;break;case"d":case"day":multiplier=1e3*60*60*24;break;case"h":case"hour":multiplier=1e3*60*60;break;case"m":case"minute":multiplier=1e3*60;break;case"s":case"second":multiplier=1e3;break;default:throw new Error(_i18n.i18n.translate("vega.esQueryParser.unknownUnitValueErrorMessage",{defaultMessage:"Unknown {unitParamName} value. Must be one of: [{unitParamValues}]",values:{unitParamName:'"unit"',unitParamValues:'"week", "day", "hour", "minute", "second"'}}))}result+=shift*multiplier}return result}}],[{key:"_roundInterval",value:function _roundInterval(interval){switch(true){case interval<=500:return"100ms";case interval<=5e3:return"1s";case interval<=7500:return"5s";case interval<=15e3:return"10s";case interval<=45e3:return"30s";case interval<=18e4:return"1m";case interval<=45e4:return"5m";case interval<=12e5:return"10m";case interval<=27e5:return"30m";case interval<=72e5:return"1h";case interval<=216e5:return"3h";case interval<=864e5:return"12h";case interval<=6048e5:return"24h";case interval<=18144e5:return"1w";case interval<36288e5:return"30d";default:return"1y"}}}]);return EsQueryParser}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmsFileParser=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _i18n=__webpack_require__(8);var _vega_base_view=__webpack_require__(302);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var EmsFileParser=exports.EmsFileParser=function(){function EmsFileParser(serviceSettings){_classCallCheck(this,EmsFileParser);this._serviceSettings=serviceSettings}_createClass(EmsFileParser,[{key:"parseUrl",value:function parseUrl(obj,url){if(typeof url.name!=="string"){throw new Error(_i18n.i18n.translate("vega.emsFileParser.missingNameOfFileErrorMessage",{defaultMessage:"{dataUrlParam} with {dataUrlParamValue} requires {nameParam} parameter (name of the file)",values:{dataUrlParam:'"data.url"',dataUrlParamValue:'{"%type%": "emsfile"}',nameParam:'"name"'}}))}if(!this._fileLayersP){this._fileLayersP=this._serviceSettings.getFileLayers()}return{obj:obj,name:url.name}}},{key:"populateData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(requests){var _this=this;var layers,_loop,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_ref2;return regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(requests.length===0)){_context2.next=2;break}return _context2.abrupt("return");case 2:_context2.next=4;return this._fileLayersP;case 4:layers=_context2.sent;_loop=regeneratorRuntime.mark(function _loop(_ref2){var obj,name,foundLayer,url;return regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:obj=_ref2.obj,name=_ref2.name;foundLayer=layers.find(function(v){return v.name===name});if(foundLayer){_context.next=4;break}throw new Error(_i18n.i18n.translate("vega.emsFileParser.emsFileNameDoesNotExistErrorMessage",{defaultMessage:"{emsfile} {emsfileName} does not exist",values:{emsfileName:JSON.stringify(name),emsfile:"emsfile"}}));case 4:_context.next=6;return _this._serviceSettings.getUrlForRegionLayer(foundLayer);case 6:url=_context.sent;obj.url=(0,_vega_base_view.bypassExternalUrlCheck)(url);case 8:case"end":return _context.stop()}}},_loop,_this)});_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context2.prev=9;_iterator=requests[Symbol.iterator]();case 11:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context2.next=17;break}_ref2=_step.value;return _context2.delegateYield(_loop(_ref2),"t0",14);case 14:_iteratorNormalCompletion=true;_context2.next=11;break;case 17:_context2.next=23;break;case 19:_context2.prev=19;_context2.t1=_context2["catch"](9);_didIteratorError=true;_iteratorError=_context2.t1;case 23:_context2.prev=23;_context2.prev=24;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}case 26:_context2.prev=26;if(!_didIteratorError){_context2.next=29;break}throw _iteratorError;case 29:return _context2.finish(26);case 30:return _context2.finish(23);case 31:case"end":return _context2.stop()}}},_callee,this,[[9,19,23,31],[24,,26,30]])}));function populateData(_x){return _ref.apply(this,arguments)}return populateData}()}]);return EmsFileParser}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TooltipHandler=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _eui=__webpack_require__(2);var _vegaTooltip=__webpack_require__(1325);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var tooltipId="vega-kibana-tooltip";function createRect(left,top,width,height){return{left:left,top:top,width:width,height:height,x:left,y:top,right:left+width,bottom:top+height}}var TooltipHandler=exports.TooltipHandler=function(){function TooltipHandler(container,view,opts){_classCallCheck(this,TooltipHandler);this.container=container;this.position=opts.position;this.padding=opts.padding;this.centerOnMark=opts.centerOnMark;view.tooltip(this.handler.bind(this))}_createClass(TooltipHandler,[{key:"handler",value:function handler(view,event,item,value){this.hideTooltip();if(value==null||value===""){return}var el=document.createElement("div");el.setAttribute("id",tooltipId);["vgaVis__tooltip","euiToolTipPopover","euiToolTip","euiToolTip--"+this.position].forEach(function(className){el.classList.add(className)});el.innerHTML=(0,_vegaTooltip.formatValue)(value,_lodash2.default.escape);document.body.appendChild(el);var anchorBounds=void 0;if(item.bounds.width()>this.centerOnMark||item.bounds.height()>this.centerOnMark){anchorBounds=createRect(event.pageX,event.pageY,0,0)}else{var containerBox=this.container.getBoundingClientRect();anchorBounds=createRect(containerBox.left+view._origin[0]+item.bounds.x1+window.pageXOffset,containerBox.top+view._origin[1]+item.bounds.y1+window.pageYOffset,item.bounds.width(),item.bounds.height())}var pos=(0,_eui.calculatePopoverPosition)(anchorBounds,el.getBoundingClientRect(),this.position,this.padding);el.setAttribute("style","top: "+pos.top+"px; left: "+pos.left+"px")}},{key:"hideTooltip",value:function hideTooltip(){var el=document.getElementById(tooltipId);if(el)el.remove()}}]);return TooltipHandler}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlParser=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var UrlParser=exports.UrlParser=function(){function UrlParser(onWarning){_classCallCheck(this,UrlParser);this._onWarning=onWarning}_createClass(UrlParser,[{key:"parseUrl",value:function parseUrl(obj,urlObj){var url=urlObj.url;if(!url){throw new Error(_i18n.i18n.translate("vega.urlParser.dataUrlRequiresUrlParameterInFormErrorMessage",{defaultMessage:'{dataUrlParam} requires a {urlParam} parameter in a form "{formLink}"',values:{dataUrlParam:'"data.url"',urlParam:'"url"',formLink:"https://example.org/path/subpath"}}))}var query=urlObj.query;if(!query){this._onWarning(_i18n.i18n.translate("vega.urlParser.urlShouldHaveQuerySubObjectWarningMessage",{defaultMessage:"Using a {urlObject} should have a {subObjectName} sub-object",values:{urlObject:'"url": {"%type%": "url", "url": ...}',subObjectName:'"query"'}}))}else{url+=(url.includes("?")?"&":"?")+_jquery2.default.param(query)}obj.url=url}},{key:"populateData",value:function populateData(){}}]);return UrlParser}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchCache=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lruCache=__webpack_require__(1378);var _lruCache2=_interopRequireDefault(_lruCache);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SearchCache=exports.SearchCache=function(){function SearchCache(es,cacheOpts){_classCallCheck(this,SearchCache);this._es=es;this._cache=new _lruCache2.default(cacheOpts)}_createClass(SearchCache,[{key:"search",value:function search(requests){var promises=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=requests[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var request=_step.value;var key=JSON.stringify(request);var pending=this._cache.get(key);if(pending===undefined){pending=this._es.search(request);this._cache.set(key,pending)}promises.push(pending)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return Promise.all(promises)}}]);return SearchCache}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var AlwaysCacheMaxAge=40;var TimeCache=exports.TimeCache=function(){function TimeCache(timefilter,maxAge){_classCallCheck(this,TimeCache);this._timefilter=timefilter;this._maxAge=maxAge;this._cachedBounds=null;this._cacheTS=0}_createClass(TimeCache,[{key:"_now",value:function _now(){return Date.now()}},{key:"getTimeBounds",value:function getTimeBounds(){var ts=this._now();var bounds=void 0;if(this._cachedBounds){var diff=ts-this._cacheTS;if(diff<AlwaysCacheMaxAge){return this._cachedBounds}if(diff<this._maxAge){bounds=this._getBounds();if(Math.abs(bounds.min-this._cachedBounds.min)<this._maxAge&&Math.abs(bounds.max-this._cachedBounds.max)<this._maxAge){return this._cachedBounds}}}this._cacheTS=ts;this._cachedBounds=bounds||this._getBounds();return this._cachedBounds}},{key:"setTimeRange",value:function setTimeRange(timeRange){this._timeRange=timeRange}},{key:"_getBounds",value:function _getBounds(){var bounds=this._timefilter.calculateBounds(this._timeRange);return{min:bounds.min.valueOf(),max:bounds.max.valueOf()}}}]);return TimeCache}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.VegaVisualizationProvider=VegaVisualizationProvider;var _i18n=__webpack_require__(8);var _notify=__webpack_require__(10);var _vega_view=__webpack_require__(1157);var _vega_map_view=__webpack_require__(1158);var _saved_objects=__webpack_require__(24);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function VegaVisualizationProvider(Private,vegaConfig,serviceSettings,$rootScope){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var notify=new _notify.Notifier({location:"Vega"});return function(){function VegaVisualization(el,vis){_classCallCheck(this,VegaVisualization);this._el=el;this._vis=vis}_createClass(VegaVisualization,[{key:"findIndex",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(index){var idxObj;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:idxObj=void 0;if(!index){_context.next=9;break}_context.next=4;return(0,_saved_objects.findObjectByTitle)(savedObjectsClient,"index-pattern",index);case 4:idxObj=_context.sent;if(idxObj){_context.next=7;break}throw new Error(_i18n.i18n.translate("vega.visualization.indexNotFoundErrorMessage",{defaultMessage:"Index {index} not found",values:{index:'"'+index+'"'}}));case 7:_context.next=14;break;case 9:_context.next=11;return this._vis.API.indexPatterns.getDefault();case 11:idxObj=_context.sent;if(idxObj){_context.next=14;break}throw new Error(_i18n.i18n.translate("vega.visualization.unableToFindDefaultIndexErrorMessage",{defaultMessage:"Unable to find default index"}));case 14:return _context.abrupt("return",idxObj.id);case 15:case"end":return _context.stop()}}},_callee,this)}));function findIndex(_x){return _ref.apply(this,arguments)}return findIndex}()},{key:"render",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(visData,status){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!visData&&!this._vegaView)){_context2.next=3;break}_notify.toastNotifications.addWarning(_i18n.i18n.translate("vega.visualization.unableToRenderWithoutDataWarningMessage",{defaultMessage:"Unable to render without data"}));return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return this._render(visData,status);case 6:_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);if(this._vegaView){this._vegaView.onError(_context2.t0)}else{notify.error(_context2.t0)}case 11:case"end":return _context2.stop()}}},_callee2,this,[[3,8]])}));function render(_x2,_x3){return _ref2.apply(this,arguments)}return render}()},{key:"_render",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(vegaParser,status){var vegaViewParams;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(vegaParser&&(status.data||!this._vegaView))){_context3.next=11;break}if(!this._vegaView){_context3.next=5;break}_context3.next=4;return this._vegaView.destroy();case 4:this._vegaView=null;case 5:vegaViewParams={vegaConfig:vegaConfig,parentEl:this._el,vegaParser:vegaParser,serviceSettings:serviceSettings,queryfilter:this._vis.API.queryFilter,timefilter:this._vis.API.timeFilter,findIndex:this.findIndex.bind(this),$rootScope:$rootScope};if(vegaParser.useMap){this._vegaView=new _vega_map_view.VegaMapView(vegaViewParams)}else{this._vegaView=new _vega_view.VegaView(vegaViewParams)}_context3.next=9;return this._vegaView.init();case 9:_context3.next=14;break;case 11:if(!status.resize){_context3.next=14;break}_context3.next=14;return this._vegaView.resize();case 14:case"end":return _context3.stop()}}},_callee3,this)}));function _render(_x4,_x5){return _ref3.apply(this,arguments)}return _render}()},{key:"destroy",value:function destroy(){return this._vegaView&&this._vegaView.destroy()}}]);return VegaVisualization}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaView=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _vegaLib=__webpack_require__(252);var vega=_interopRequireWildcard(_vegaLib);var _vega_base_view=__webpack_require__(302);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VegaView=exports.VegaView=function(_VegaBaseView){_inherits(VegaView,_VegaBaseView);function VegaView(){_classCallCheck(this,VegaView);return _possibleConstructorReturn(this,(VegaView.__proto__||Object.getPrototypeOf(VegaView)).apply(this,arguments))}_createClass(VegaView,[{key:"_initViewCustomizations",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var view;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this._$container){_context.next=2;break}return _context.abrupt("return");case 2:view=new vega.View(vega.parse(this._parser.spec),this._vegaViewConfig);this.setDebugValues(view,this._parser.spec,this._parser.vlspec);view.warn=this.onWarn.bind(this);view.error=this.onError.bind(this);if(this._parser.useResize)this.updateVegaSize(view);view.initialize(this._$container.get(0),this._$controls.get(0));if(this._parser.useHover)view.hover();_context.next=11;return this.setView(view);case 11:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _ref.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaView}(_vega_base_view.VegaBaseView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapView=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _kibana_map=__webpack_require__(448);var _vegaLib=__webpack_require__(252);var vega=_interopRequireWildcard(_vegaLib);var _vega_base_view=__webpack_require__(302);var _vega_map_layer=__webpack_require__(1159);var _i18n=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VegaMapView=exports.VegaMapView=function(_VegaBaseView){_inherits(VegaMapView,_VegaBaseView);function VegaMapView(){_classCallCheck(this,VegaMapView);return _possibleConstructorReturn(this,(VegaMapView.__proto__||Object.getPrototypeOf(VegaMapView)).apply(this,arguments))}_createClass(VegaMapView,[{key:"_initViewCustomizations",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var mapConfig,baseMapOpts,limitMinZ,limitMaxZ,tmsServices,mapStyle,validate,minZoom,maxZoom,_ref2,zoom,vegaMapLayer,vegaView;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapConfig=this._parser.mapConfig;baseMapOpts=void 0;limitMinZ=0;limitMaxZ=25;if(!(mapConfig.mapStyle!==false)){_context.next=20;break}_context.next=7;return this._serviceSettings.getTMSServices();case 7:tmsServices=_context.sent;if(this._$container){_context.next=10;break}return _context.abrupt("return");case 10:mapStyle=mapConfig.mapStyle==="default"?"road_map":mapConfig.mapStyle;baseMapOpts=tmsServices.find(function(s){return s.id===mapStyle});_context.t0=_extends;_context.next=15;return this._serviceSettings.getUrlTemplateForTMSLayer(baseMapOpts);case 15:_context.t1=_context.sent;_context.t2={url:_context.t1};_context.t3=baseMapOpts;baseMapOpts=(0,_context.t0)(_context.t2,_context.t3);if(!baseMapOpts){this.onWarn(_i18n.i18n.translate("vega.mapView.mapStyleNotFoundWarningMessage",{defaultMessage:"{mapStyleParam} was not found",values:{mapStyleParam:'"mapStyle": '+JSON.stringify(mapStyle)}}))}else{limitMinZ=baseMapOpts.minZoom;limitMaxZ=baseMapOpts.maxZoom}case 20:validate=function validate(name,value,dflt,min,max){if(value===undefined){value=dflt}else if(value<min){_this2.onWarn(_i18n.i18n.translate("vega.mapView.resettingPropertyToMinValueWarningMessage",{defaultMessage:"Resetting {name} to {min}",values:{name:'"'+name+'"',min:min}}));value=min}else if(value>max){_this2.onWarn(_i18n.i18n.translate("vega.mapView.resettingPropertyToMaxValueWarningMessage",{defaultMessage:"Resetting {name} to {max}",values:{name:'"'+name+'"',max:max}}));value=max}return value};minZoom=validate("minZoom",mapConfig.minZoom,limitMinZ,limitMinZ,limitMaxZ);maxZoom=validate("maxZoom",mapConfig.maxZoom,limitMaxZ,limitMinZ,limitMaxZ);if(minZoom>maxZoom){this.onWarn(_i18n.i18n.translate("vega.mapView.minZoomAndMaxZoomHaveBeenSwappedWarningMessage",{defaultMessage:"{minZoomPropertyName} and {maxZoomPropertyName} have been swapped",values:{minZoomPropertyName:'"minZoom"',maxZoomPropertyName:'"maxZoom"'}}));_ref2=[maxZoom,minZoom];minZoom=_ref2[0];maxZoom=_ref2[1]}zoom=validate("zoom",mapConfig.zoom,2,minZoom,maxZoom);this._kibanaMap=new _kibana_map.KibanaMap(this._$container.get(0),{zoom:zoom,minZoom:minZoom,maxZoom:maxZoom,center:[mapConfig.latitude,mapConfig.longitude],zoomControl:mapConfig.zoomControl,scrollWheelZoom:mapConfig.scrollWheelZoom});if(baseMapOpts){this._kibanaMap.setBaseLayer({baseLayerType:"tms",options:baseMapOpts})}vegaMapLayer=new _vega_map_layer.VegaMapLayer(this._parser.spec,{vega:vega,bindingsContainer:this._$controls.get(0),delayRepaint:mapConfig.delayRepaint,viewConfig:this._vegaViewConfig,onWarning:this.onWarn.bind(this),onError:this.onError.bind(this)});this._kibanaMap.addLayer(vegaMapLayer);this._addDestroyHandler(function(){_this2._kibanaMap.removeLayer(vegaMapLayer);if(baseMapOpts){_this2._kibanaMap.setBaseLayer(null)}_this2._kibanaMap.destroy()});vegaView=vegaMapLayer.getVegaView();this.setDebugValues(vegaView,this._parser.spec,this._parser.vlspec);_context.next=34;return this.setView(vegaView);case 34:case"end":return _context.stop()}}},_callee,this)}));function _initViewCustomizations(){return _ref.apply(this,arguments)}return _initViewCustomizations}()}]);return VegaMapView}(_vega_base_view.VegaBaseView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VegaMapLayer=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _leaflet=__webpack_require__(84);var _leaflet2=_interopRequireDefault(_leaflet);__webpack_require__(1381);var _kibana_map_layer=__webpack_require__(298);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VegaMapLayer=exports.VegaMapLayer=function(_KibanaMapLayer){_inherits(VegaMapLayer,_KibanaMapLayer);function VegaMapLayer(spec,options){_classCallCheck(this,VegaMapLayer);var _this=_possibleConstructorReturn(this,(VegaMapLayer.__proto__||Object.getPrototypeOf(VegaMapLayer)).call(this));_this._attribution=options.attribution;delete options.attribution;_this._leafletLayer=_leaflet2.default.vega(spec,options);return _this}_createClass(VegaMapLayer,[{key:"getVegaView",value:function getVegaView(){return this._leafletLayer._view}},{key:"getVegaSpec",value:function getVegaSpec(){return this._leafletLayer._spec}}]);return VegaMapLayer}(_kibana_map_layer.KibanaMapLayer)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2137)},,function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _jsonStringifyPrettyCompact=__webpack_require__(460);var _jsonStringifyPrettyCompact2=_interopRequireDefault(_jsonStringifyPrettyCompact);var _hjson=__webpack_require__(459);var _hjson2=_interopRequireDefault(_hjson);var _notify=__webpack_require__(10);var _modules=__webpack_require__(3);__webpack_require__(303);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _module=_modules.uiModules.get("kibana/vega",["kibana"]);_module.controller("VegaEditorController",function($scope){var notify=new _notify.Notifier({location:"Vega"});return new(function(){function VegaEditorController(){var _this=this;_classCallCheck(this,VegaEditorController);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity;var session=editor.getSession();session.setTabSize(2);session.setUseSoftTabs(true);_this.aceEditor=editor};$scope.formatJson=function(event){_this._format(event,_jsonStringifyPrettyCompact2.default,{maxLength:_this._getCodeWidth()})};$scope.formatHJson=function(event){_this._format(event,_hjson2.default.stringify,{condense:_this._getCodeWidth(),bracesSameLine:true,keepWsc:true})}}_createClass(VegaEditorController,[{key:"_getCodeWidth",value:function _getCodeWidth(){return this.aceEditor.getSession().getWrapLimit()}},{key:"_format",value:function _format(event,stringify,opts){var _this2=this;event.preventDefault();var newSpec=void 0;try{var spec=_hjson2.default.parse(this.aceEditor.getSession().doc.getValue(),{legacyRoot:false,keepWsc:true});newSpec=stringify(spec,opts)}catch(err){notify.error(err);return}$scope.$$postDigest(function(){_this2.aceEditor.getSession().doc.setValue(newSpec)})}}]);return VegaEditorController}())})},function(module,exports){module.exports='<div class="vgaEditor" ng-controller="VegaEditorController">\n  <div\n    kbn-ui-ace-keyboard-mode\n    ui-ace="{\n      onLoad: aceLoaded,\n      useWrapMode: true,\n      advanced: {\n        highlightActiveLine: false\n      },\n      rendererOptions: {\n        showPrintMargin: false\n      },\n      mode: \'hjson\'\n    }"\n    id="vegaAceEditor"\n    ng-model="editorState.params.spec"\n    data-test-subj="vega-editor"\n    class="vgaEditor__aceEditor"\n  ></div>\n\n  <div class="vgaEditor__aceEditorActions">\n    <span dropdown>\n      <button\n        id="vegaHelp"\n        class="editor_action"\n        dropdown-toggle\n        aria-label="{{::\'vega.editor.vegaHelpButtonAriaLabel\' | i18n: {defaultMessage: \'Vega help\'} }}"\n      >\n        <span class="kuiIcon fa-question-circle"></span>\n      </button>\n      <ul\n        class="dropdown-menu"\n        role="menu"\n        aria-labelledby="vegaHelp"\n      >\n        <li role="menuitem">\n          <a\n            target="_blank"\n            rel="noopener"\n            href="https://www.elastic.co/guide/en/kibana/master/vega-graph.html"\n            i18n-id="vega.editor.vegaHelpLinkText"\n            i18n-default-message="Kibana Vega Help"\n          ></a>\n        </li>\n        <li role="menuitem">\n          <a\n            target="_blank"\n            rel="noopener noreferrer"\n            href="https://vega.github.io/vega-lite/docs/"\n            i18n-id="vega.editor.vegaLiteDocumentationLinkText"\n            i18n-default-message="Vega-Lite Documentation"\n          ></a>\n        </li>\n        <li role="menuitem">\n          <a\n            target="_blank"\n            rel="noopener noreferrer"\n            href="https://vega.github.io/vega/docs/"\n            i18n-id="vega.editor.vegaDocumentationLinkText"\n            i18n-default-message="Vega Documentation"\n          ></a>\n        </li>\n      </ul>\n    </span>\n    <span dropdown>\n      <button\n        id="vegaOptions"\n        class="editor_action"\n        dropdown-toggle\n        aria-label="{{::\'vega.editor.vegaEditorOptionsButtonAriaLabel\' | i18n: {defaultMessage: \'Vega editor options\'} }}"\n      >\n        <span class="kuiIcon fa-wrench"></span>\n      </button>\n      <ul\n        class="dropdown-menu"\n        role="menu"\n        aria-labelledby="vegaOptions"\n      >\n        <li role="menuitem">\n          <button\n            ng-click="formatHJson($event)"\n            i18n-id="vega.editor.reformatAsHJSONButtonLabel"\n            i18n-default-message="Reformat as HJSON"\n          ></button>\n        </li>\n        <li role="menuitem">\n          <button\n            ng-click="formatJson($event)"\n            i18n-id="vega.editor.reformatAsJSONButtonLabel"\n            i18n-default-message="Reformat as JSON, delete comments"\n          ></button>\n        </li>\n      </ul>\n    </span>\n  </div>\n\n</div>\n'},function(module,exports){module.exports='{\n/*\n\nWelcome to Vega visualizations.  Here you can design your own dataviz from scratch using a declarative language called Vega, or its simpler form Vega-Lite.  In Vega, you have the full control of what data is loaded, even from multiple sources, how that data is transformed, and what visual elements are used to show it.  Use help icon to view Vega examples, tutorials, and other docs.  Use the wrench icon to reformat this text, or to remove comments.\n\nThis example graph shows the document count in all indexes in the current time range.  You might need to adjust the time filter in the upper right corner.\n*/\n\n  $schema: https://vega.github.io/schema/vega-lite/v2.json\n  title: Event counts from all indexes\n\n  // Define the data source\n  data: {\n    url: {\n/*\nAn object instead of a string for the "url" param is treated as an Elasticsearch query. Anything inside this object is not part of the Vega language, but only understood by Kibana and Elasticsearch server. This query counts the number of documents per time interval, assuming you have a @timestamp field in your data.\n\nKibana has a special handling for the fields surrounded by "%".  They are processed before the the query is sent to Elasticsearch. This way the query becomes context aware, and can use the time range and the dashboard filters.\n*/\n\n      // Apply dashboard context filters when set\n      %context%: true\n      // Filter the time picker (upper right corner) with this field\n      %timefield%: @timestamp\n\n/*\nSee .search() documentation for :  https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-search\n*/\n\n      // Which index to search\n      index: _all\n      // Aggregate data by the time field into time buckets, counting the number of documents in each bucket.\n      body: {\n        aggs: {\n          time_buckets: {\n            date_histogram: {\n              // Use date histogram aggregation on @timestamp field\n              field: @timestamp\n              // The interval value will depend on the daterange picker (true), or use an integer to set an approximate bucket count\n              interval: {%autointerval%: true}\n              // Make sure we get an entire range, even if it has no data\n              extended_bounds: {\n                // Use the current time range\'s start and end\n                min: {%timefilter%: "min"}\n                max: {%timefilter%: "max"}\n              }\n              // Use this for linear (e.g. line, area) graphs.  Without it, empty buckets will not show up\n              min_doc_count: 0\n            }\n          }\n        }\n        // Speed up the response by only including aggregation results\n        size: 0\n      }\n    }\n/*\nElasticsearch will return results in this format:\n\naggregations: {\n  time_buckets: {\n    buckets: [\n      {\n        key_as_string: 2015-11-30T22:00:00.000Z\n        key: 1448920800000\n        doc_count: 0\n      },\n      {\n        key_as_string: 2015-11-30T23:00:00.000Z\n        key: 1448924400000\n        doc_count: 0\n      }\n      ...\n    ]\n  }\n}\n\nFor our graph, we only need the list of bucket values.  Use the format.property to discard everything else.\n*/\n    format: {property: "aggregations.time_buckets.buckets"}\n  }\n\n  // "mark" is the graphics element used to show our data.  Other mark values are: area, bar, circle, line, point, rect, rule, square, text, and tick.  See https://vega.github.io/vega-lite/docs/mark.html\n  mark: line\n\n  // "encoding" tells the "mark" what data to use and in what way.  See https://vega.github.io/vega-lite/docs/encoding.html\n  encoding: {\n    x: {\n      // The "key" value is the timestamp in milliseconds.  Use it for X axis.\n      field: key\n      type: temporal\n      axis: {title: false} // Customize X axis format\n    }\n    y: {\n      // The "doc_count" is the count per bucket.  Use it for Y axis.\n      field: doc_count\n      type: quantitative\n      axis: {title: "Document count"}\n    }\n  }\n}\n'},function(module,exports,__webpack_require__){__webpack_require__(461);__webpack_require__(1166);__webpack_require__(462)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneResponseHandler=undefined;var _vis_response_handlers=__webpack_require__(233);var noneResponseHandler=function noneResponseHandler(){return{name:"none",handler:function handler(response){return new Promise(function(resolve){resolve(response)})}}};_vis_response_handlers.VisResponseHandlersRegistryProvider.register(noneResponseHandler);exports.noneResponseHandler=noneResponseHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HierarchicalTooltipFormatterProvider=HierarchicalTooltipFormatterProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _collect_branch=__webpack_require__(1168);var _collect_branch2=_interopRequireDefault(_collect_branch);var _numeral=__webpack_require__(299);var _numeral2=_interopRequireDefault(_numeral);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HierarchicalTooltipFormatterProvider($rootScope,$compile,$sce){var $tooltip=(0,_jquery2.default)(__webpack_require__(1169));var $tooltipScope=$rootScope.$new();$compile($tooltip)($tooltipScope);return function(columns){return function(event){var datum=event.datum;$tooltipScope.rows=(0,_collect_branch2.default)(datum);var metricCol=$tooltipScope.metricCol=columns.find(function(column){return column.aggConfig.type.type==="metrics"});_lodash2.default.forEachRight($tooltipScope.rows,function(row){row.spacer=$sce.trustAsHtml(_lodash2.default.repeat("&nbsp;",row.depth));var percent=void 0;if(row.item.percentOfGroup!=null){percent=row.item.percentOfGroup}row.metric=metricCol.aggConfig.fieldFormatter()(row.metric);if(percent!=null){row.metric+=" ("+(0,_numeral2.default)(percent).format("0.[00]%")+")"}return row});$tooltipScope.$apply();return $tooltip[0].outerHTML}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(leaf){function walk(item,memo){var depth=item.depth-1;var aggConfig=item.aggConfig;var field=aggConfig&&aggConfig.makeLabel()||aggConfig&&aggConfig.label||"level "+item.depth;memo.unshift({aggConfig:aggConfig,depth:depth,field:field,bucket:item.name,metric:item.size,item:item});if(item.parent&&item.parent.parent){return walk(item.parent,memo)}else{return memo}}return walk(leaf,[])};module.exports=exports["default"]},function(module,exports){module.exports='<table class="visTooltip__table">\n  <thead>\n    <tr class="eui-textLeft visTooltip__label">\n      <th\n        scope="col"\n        i18n-id="common.ui.aggResponse.fieldLabel"\n        i18n-default-message="field"\n      ></th>\n      <th\n        scope="col"\n        i18n-id="common.ui.aggResponse.valueLabel"\n        i18n-default-message="value"\n      ></th>\n      <th scope="col">{{metricCol.label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="visTooltip__value" ng-repeat="row in rows track by $index">\n      <td><span ng-bind-html="row.spacer"></span>{{row.field}}</td>\n      <td>{{row.bucket}}</td>\n      <td>{{row.metric}}</td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){__webpack_require__(1171);__webpack_require__(1176)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CourierRequestHandlerProvider=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _lodash=__webpack_require__(0);var _i18n=__webpack_require__(8);var _vis_request_handlers=__webpack_require__(290);var _calculate_object_hash=__webpack_require__(422);var _courier_inspector_utils=__webpack_require__(240);var _tabify=__webpack_require__(304);var _build_tabular_inspector_data=__webpack_require__(1175);var _get_time=__webpack_require__(268);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var CourierRequestHandlerProvider=function CourierRequestHandlerProvider(){return{name:"courier",handler:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var searchSource=_ref.searchSource,aggs=_ref.aggs,timeRange=_ref.timeRange,query=_ref.query,filters=_ref.filters,forceFetch=_ref.forceFetch,partialRows=_ref.partialRows,metricsAtAllLevels=_ref.metricsAtAllLevels,inspectorAdapters=_ref.inspectorAdapters,minimalColumns=_ref.minimalColumns,queryFilter=_ref.queryFilter;var timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",function(){return aggs.toDsl(metricsAtAllLevels)});requestSearchSource.onRequestStart(function(searchSource,searchRequest){return aggs.onSearchRequestStart(searchSource,searchRequest)});if(timeRange){timeFilterSearchSource.setField("filter",function(){return(0,_get_time.getTime)(searchSource.getField("index"),timeRange)})}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=11;return requestSearchSource.getSearchRequestBody();case 11:reqBody=_context.sent;queryHash=(0,_calculate_object_hash.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=34;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("common.ui.vis.courier.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("common.ui.vis.courier.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_courier_inspector_utils.getRequestInspectorStats)(requestSearchSource));_context.prev=18;_context.next=21;return requestSearchSource.fetch();case 21:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_courier_inspector_utils.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=31;break;case 27:_context.prev=27;_context.t0=_context["catch"](18);request.error({json:_context.t0});throw _context.t0;case 31:_context.prev=31;requestSearchSource.getSearchRequestBody().then(function(req){request.json(req)});return _context.finish(31);case 34:resp=(0,_lodash.cloneDeep)(searchSource.rawResponse);_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=38;_iterator=aggs[Symbol.iterator]();case 40:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=49;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=46;break}_context.next=45;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters);case 45:resp=_context.sent;case 46:_iteratorNormalCompletion=true;_context.next=40;break;case 49:_context.next=55;break;case 51:_context.prev=51;_context.t1=_context["catch"](38);_didIteratorError=true;_iteratorError=_context.t1;case 55:_context.prev=55;_context.prev=56;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}case 58:_context.prev=58;if(!_didIteratorError){_context.next=61;break}throw _iteratorError;case 61:return _context.finish(58);case 62:return _context.finish(55);case 63:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_get_time.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={minimalColumns:minimalColumns,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_calculate_object_hash.calculateObjectHash)(_extends({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader(function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,queryFilter)},{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 71:case"end":return _context.stop()}}},_callee,this,[[18,27,31,34],[38,51,55,63],[56,,58,62]])}));function handler(_x){return _ref2.apply(this,arguments)}return handler}()}};_vis_request_handlers.VisRequestHandlersRegistryProvider.register(CourierRequestHandlerProvider);exports.CourierRequestHandlerProvider=CourierRequestHandlerProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=undefined;var _lodash=__webpack_require__(0);var _get_columns=__webpack_require__(1173);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function TabbedAggResponseWriter(aggs){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$minimalColumns=_ref.minimalColumns,minimalColumns=_ref$minimalColumns===undefined?true:_ref$minimalColumns,_ref$partialRows=_ref.partialRows,partialRows=_ref$partialRows===undefined?false:_ref$partialRows,timeRange=_ref.timeRange;this._removePartialRows=!partialRows;this.rowBuffer={};this.bucketBuffer=[];this.metricBuffer=[];this.aggs=aggs;this.partialRows=partialRows;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),minimalColumns);this.aggStack=[].concat(_toConsumableArray(this.columns));this.rows=[];if(timeRange){var timeRangeKey=Object.keys(timeRange)[0];this.timeRange=timeRange[timeRangeKey];if(this.timeRange){this.timeRange.name=timeRangeKey}}}TabbedAggResponseWriter.prototype.isPartialRow=function(row){return!this.columns.map(function(column){return row.hasOwnProperty(column.id)}).every(function(c){return c===true})};TabbedAggResponseWriter.prototype.row=function(){var _this=this;this.bucketBuffer.forEach(function(bucket){_this.rowBuffer[bucket.id]=bucket.value});this.metricBuffer.forEach(function(metric){_this.rowBuffer[metric.id]=metric.value});if(!(0,_lodash.toArray)(this.rowBuffer).length||this._removePartialRows&&this.isPartialRow(this.rowBuffer)){return}this.rows.push(this.rowBuffer);this.rowBuffer={}};TabbedAggResponseWriter.prototype.response=function(){return{columns:this.columns,rows:this.rows}};exports.TabbedAggResponseWriter=TabbedAggResponseWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getColumn=function getColumn(agg,i){return{aggConfig:agg,id:"col-"+i+"-"+agg.id,name:agg.makeLabel()}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns){return aggs.map(function(agg,i){return getColumn(agg,i)})}var columns=[];var grouped=_lodash2.default.groupBy(aggs,function(agg){return agg.type.type});if(!grouped.buckets){return grouped.metrics.map(function(agg,i){return getColumn(agg,i)})}var columnIndex=0;grouped.buckets.forEach(function(agg){columns.push(getColumn(agg,columnIndex++));grouped.metrics.forEach(function(metric){columns.push(getColumn(metric,columnIndex++))})});return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TabifyBuckets(aggResp,aggParams,timeRange){if(_lodash2.default.has(aggResp,"buckets")){this.buckets=aggResp.buckets}else if(aggResp){this.buckets=[aggResp]}else{this.buckets=[]}this.objectMode=_lodash2.default.isPlainObject(this.buckets);if(this.objectMode){this._keys=_lodash2.default.keys(this.buckets);this.length=this._keys.length}else{this.length=this.buckets.length}if(this.length&&aggParams){this._orderBucketsAccordingToParams(aggParams);if(aggParams.drop_partials){this._dropPartials(aggParams,timeRange)}}}TabifyBuckets.prototype.forEach=function(fn){var buckets=this.buckets;if(this.objectMode){this._keys.forEach(function(key){fn(buckets[key],key)})}else{buckets.forEach(function(bucket){fn(bucket,bucket.key)})}};TabifyBuckets.prototype._isRangeEqual=function(range1,range2){return _lodash2.default.get(range1,"from",null)===_lodash2.default.get(range2,"from",null)&&_lodash2.default.get(range1,"to",null)===_lodash2.default.get(range2,"to",null)};TabifyBuckets.prototype._orderBucketsAccordingToParams=function(params){var _this=this;if(params.filters&&this.objectMode){this._keys=params.filters.map(function(filter){var query=_lodash2.default.get(filter,"input.query.query_string.query",filter.input.query);var queryString=typeof query==="string"?query:JSON.stringify(query);return filter.label||queryString||"*"})}else if(params.ranges&&this.objectMode){this._keys=params.ranges.map(function(range){return _lodash2.default.findKey(_this.buckets,function(el){return _this._isRangeEqual(el,range)})})}else if(params.ranges&&params.field.type!=="date"){var ranges=params.ranges;if(params.ipRangeType){ranges=params.ipRangeType==="mask"?ranges.mask:ranges.fromTo}this.buckets=ranges.map(function(range){if(range.mask){return _this.buckets.find(function(el){return el.key===range.mask})}return _this.buckets.find(function(el){return _this._isRangeEqual(el,range)})})}};TabifyBuckets.prototype._dropPartials=function(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||params.field.name!==timeRange.name){return}var interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter(function(bucket){if(bucket.key<timeRange.gte){return false}if(bucket.key+interval>timeRange.lte){return false}return true});this.length=this.buckets.length};exports.TabifyBuckets=TabifyBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=undefined;var buildTabularInspectorData=exports.buildTabularInspectorData=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(table,queryFilter){var rows,columns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rows=table.rows.map(function(row){return table.columns.reduce(function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-"+colIndex+"-"+cur.aggConfig.id]=new _data.FormattedData(value,fieldFormatter(value));return prev},{})});columns=table.columns.map(function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-"+colIndex+"-"+col.aggConfig.id,filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex(function(row){return row["col-"+colIndex+"-"+col.aggConfig.id].raw===value.raw});var filter=(0,_vis_filters.createFilter)(table,colIndex,rowIndex,value.raw);queryFilter.addFilters(filter)},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex(function(row){return row["col-"+colIndex+"-"+col.aggConfig.id].raw===value.raw});var filter=(0,_vis_filters.createFilter)(table,colIndex,rowIndex,value.raw);var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach(function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)})}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}});return _context.abrupt("return",{columns:columns,rows:rows});case 3:case"end":return _context.stop()}}},_callee,this)}));return function buildTabularInspectorData(_x,_x2){return _ref.apply(this,arguments)}}();var _lodash=__webpack_require__(0);var _vis_filters=__webpack_require__(104);var _data=__webpack_require__(431);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.noneRequestHandlerProvider=undefined;var _vis_request_handlers=__webpack_require__(290);var noneRequestHandlerProvider=function noneRequestHandlerProvider(){return{name:"none",handler:function handler(){return new Promise(function(resolve){resolve()})}}};_vis_request_handlers.VisRequestHandlersRegistryProvider.register(noneRequestHandlerProvider);exports.noneRequestHandlerProvider=noneRequestHandlerProvider},function(module,exports,__webpack_require__){__webpack_require__(1178)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(464);__webpack_require__(486);__webpack_require__(1267);__webpack_require__(1268);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _default=__webpack_require__(1269);var _default2=_interopRequireDefault(_default);var _eui=__webpack_require__(2);var _editor_size=__webpack_require__(231);var _vis_editor_types=__webpack_require__(487);var _visualize_loader=__webpack_require__(232);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var defaultEditor=function defaultEditor($rootScope,$compile,i18n){var _class,_temp;return _temp=_class=function(){function DefaultEditor(el,savedObj){_classCallCheck(this,DefaultEditor);this.el=(0,_jquery2.default)(el);this.savedObj=savedObj;this.vis=savedObj.vis;if(!this.vis.type.editorConfig.optionTabs&&this.vis.type.editorConfig.optionsTemplate){this.vis.type.editorConfig.optionTabs=[{name:"options",title:i18n("common.ui.vis.editors.sidebar.tabs.optionsLabel",{defaultMessage:"Options"}),editor:this.vis.type.editorConfig.optionsTemplate}]}}_createClass(DefaultEditor,[{key:"render",value:function render(_ref){var _this=this;var uiState=_ref.uiState,timeRange=_ref.timeRange,filters=_ref.filters,appState=_ref.appState;var $scope=void 0;var updateScope=function updateScope(){$scope.vis=_this.vis;$scope.uiState=uiState};return new Promise(function(resolve){if(!_this.$scope){_this.$scope=$scope=$rootScope.$new();updateScope();$scope.state=$scope.vis.copyCurrentState(true);$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.toggleSidebar=function(){$scope.$broadcast("render")};_this.el.one("renderComplete",resolve);$scope.stageEditableVis=function(){$scope.oldState=$scope.vis.getSerializableState($scope.state);$scope.vis.setCurrentState($scope.state);$scope.vis.updateState();$scope.vis.dirty=false};$scope.resetEditableVis=function(){$scope.state=$scope.vis.copyCurrentState(true);$scope.vis.dirty=false};$scope.autoApplyEnabled=false;if($scope.vis.type.editorConfig.enableAutoApply){$scope.toggleAutoApply=function(){$scope.autoApplyEnabled=!$scope.autoApplyEnabled};$scope.$watch("vis.dirty",_lodash2.default.debounce(function(){if(!$scope.autoApplyEnabled||!$scope.vis.dirty)return;$scope.stageEditableVis()},800))}$scope.submitEditorWithKeyboard=function(event){if(event.ctrlKey&&event.keyCode===_eui.keyCodes.ENTER){event.preventDefault();event.stopPropagation();$scope.stageEditableVis()}};$scope.getSidebarClass=function(){if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.SMALL){return"visEditor__collapsibleSidebar--small"}else if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.MEDIUM){return"visEditor__collapsibleSidebar--medium"}else if($scope.vis.type.editorConfig.defaultSize===_editor_size.DefaultEditorSize.LARGE){return"visEditor__collapsibleSidebar--large"}};$scope.$watch(function(){return $scope.vis.getSerializableState($scope.state)},function(newState){$scope.vis.dirty=!_angular2.default.equals(newState,$scope.oldState);$scope.responseValueAggs=null;try{$scope.responseValueAggs=$scope.state.aggs.getResponseAggs().filter(function(agg){return _lodash2.default.get(agg,"schema.group")==="metrics"})}catch(e){}},true);$scope.$watch(function(){return $scope.vis.getCurrentState(false)},function(newState){if(!_lodash2.default.isEqual(newState,$scope.oldState)){$scope.state=$scope.vis.copyCurrentState(true);$scope.oldState=newState}},true);var template=(0,_jquery2.default)(_default2.default);_this.el.html(template);$compile(template)($scope)}else{$scope=_this.$scope;updateScope()}if(!_this._handler){var visualizationEl=_this.el.find(".visEditor__canvas")[0];(0,_visualize_loader.getVisualizeLoader)().then(function(loader){if(!visualizationEl){return}_this._loader=loader;_this._handler=_this._loader.embedVisualizationWithSavedObject(visualizationEl,_this.savedObj,{uiState:uiState,listenOnChange:false,timeRange:timeRange,filters:filters,appState:appState})})}else{_this._handler.update({timeRange:timeRange,filters:filters})}})}},{key:"resize",value:function resize(){}},{key:"destroy",value:function destroy(){if(this.$scope){this.$scope.$destroy();this.$scope=null}if(this._handler){this._handler.destroy()}}}]);return DefaultEditor}(),_class.key="default",_temp};_vis_editor_types.VisEditorTypesRegistryProvider.register(defaultEditor);exports.defaultEditor=defaultEditor},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(1180);__webpack_require__(485);var _modules=__webpack_require__(3);var _agg_group=__webpack_require__(1263);var _agg_group2=_interopRequireDefault(_agg_group);var _collection=__webpack_require__(77);var _agg_group_names=__webpack_require__(1264);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAggGroup",function(){return{restrict:"E",template:_agg_group2.default,scope:true,link:function link($scope,$el,attr){$scope.groupName=attr.groupName;$scope.groupNameLabel=(0,_agg_group_names.aggGroupNameMaps)()[$scope.groupName];$scope.$bind("group",'state.aggs.bySchemaGroup["'+$scope.groupName+'"]');$scope.$bind("schemas",'vis.type.schemas["'+$scope.groupName+'"]');$scope.$bind("editorState","state");$scope.$watchMulti(["schemas","[]group"],function(){var stats=$scope.stats={min:0,max:0,count:$scope.group?$scope.group.length:0};if(!$scope.schemas)return;$scope.schemas.forEach(function(schema){stats.min+=schema.min;stats.max+=schema.max;stats.deprecate=schema.deprecate});$scope.availableSchema=$scope.schemas.filter(function(schema){var count=_lodash2.default.where($scope.group,{schema:schema}).length;if(count<schema.max)return true})});function reorderFinished(){var indexOffset=$scope.state.aggs.indexOf($scope.group[0]);_lodash2.default.forEach($scope.group,function(agg,index){(0,_collection.move)($scope.state.aggs,agg,indexOffset+index)})}$scope.$on("agg-reorder",reorderFinished);$scope.$on("agg-drag-start",function(){return $scope.dragging=true});$scope.$on("agg-drag-end",function(){$scope.dragging=false;reorderFinished()})}}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1181);__webpack_require__(485);var _keyboard_move=__webpack_require__(1261);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(3);var _agg=__webpack_require__(1262);var _agg2=_interopRequireDefault(_agg);var _collection=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAgg",function(){return{restrict:"A",template:_agg2.default,require:"form",link:function link($scope,$el,attrs,kbnForm){$scope.editorOpen=!!$scope.agg.brandNew;$scope.$watch("editorOpen",function(open){if(!open)kbnForm.$setTouched()});$scope.$watchMulti(["$index","group.length"],function(){$scope.aggIsTooLow=calcAggIsTooLow()});$scope.describe=function(){if(!$scope.agg.type.makeLabel)return"";var label=$scope.agg.type.makeLabel($scope.agg);return label?label:""};$scope.$on("drag-start",function(){$scope.editorWasOpen=$scope.editorOpen;$scope.editorOpen=false;$scope.$emit("agg-drag-start",$scope.agg)});$scope.$on("drag-end",function(){$scope.editorOpen=$scope.editorWasOpen;$scope.$emit("agg-drag-end",$scope.agg)});$scope.onPriorityReorder=function(direction){var positionOffset=direction===_keyboard_move.Direction.down?1:-1;var currentPosition=$scope.group.indexOf($scope.agg);var newPosition=Math.max(0,Math.min(currentPosition+positionOffset,$scope.group.length-1));(0,_collection.move)($scope.group,currentPosition,newPosition);$scope.$emit("agg-reorder")};$scope.remove=function(agg){var aggs=$scope.state.aggs;var index=aggs.indexOf(agg);if(index===-1){return}aggs.splice(index,1)};$scope.canRemove=function(aggregation){var metricCount=_lodash2.default.reduce($scope.group,function(count,agg){return agg.schema.name===aggregation.schema.name?++count:count},0);return metricCount>aggregation.schema.min};function calcAggIsTooLow(){if(!$scope.agg.schema.mustBeFirst){return false}var firstDifferentSchema=_lodash2.default.findIndex($scope.group,function(agg){return agg.schema!==$scope.agg.schema});if(firstDifferentSchema===-1){return false}return $scope.$index>firstDifferentSchema}}}})},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _agg_select=__webpack_require__(1182);var _agg_select2=_interopRequireDefault(_agg_select);var _advanced_toggle=__webpack_require__(1183);var _advanced_toggle2=_interopRequireDefault(_advanced_toggle);__webpack_require__(465);__webpack_require__(1184);var _agg_types=__webpack_require__(305);var _modules=__webpack_require__(3);var _documentation_links=__webpack_require__(103);var _agg_params=__webpack_require__(1257);var _agg_params2=_interopRequireDefault(_agg_params);var _filter=__webpack_require__(484);var _editor_config_providers=__webpack_require__(1259);var _filter2=__webpack_require__(470);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visEditorAggParams",function($compile){return{restrict:"E",template:_agg_params2.default,scope:true,link:function link($scope,$el,attr){$scope.$bind("agg",attr.agg);$scope.$bind("groupName",attr.groupName);$scope.$bind("indexPattern",attr.indexPattern);$scope.aggTypeOptions=_filter.aggTypeFilters.filter(_agg_types.aggTypes.byType[$scope.groupName],$scope.indexPattern,$scope.agg);$scope.advancedToggled=false;$scope.$watch("agg.type",function(){updateAggParamEditor();updateEditorConfig("default")});function updateEditorConfig(){var property=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"fixedValue";$scope.editorConfig=_editor_config_providers.editorConfigProviders.getConfigForAgg(_agg_types.aggTypes.byType[$scope.groupName],$scope.indexPattern,$scope.agg);Object.keys($scope.editorConfig).forEach(function(param){var config=$scope.editorConfig[param];var paramOptions=$scope.agg.type.params.find(function(paramOption){return paramOption.name===param});if(config.hasOwnProperty(property)){if(paramOptions&&paramOptions.deserialize){$scope.agg.params[param]=paramOptions.deserialize(config[property])}else{$scope.agg.params[param]=config[property]}}})}updateEditorConfig();$scope.$watchCollection("agg.params",updateEditorConfig);addSchemaEditor();addAggSelector();function addSchemaEditor(){var $schemaEditor=(0,_jquery2.default)("<div>").addClass("schemaEditors").appendTo($el);if($scope.agg.schema.editor){$schemaEditor.append($scope.agg.schema.editor);$compile($schemaEditor)($scope.$new())}}function addAggSelector(){var $aggSelect=(0,_jquery2.default)(_agg_select2.default).appendTo($el);$compile($aggSelect)($scope)}var $aggParamEditors=void 0;var $aggParamEditorsScope=void 0;function updateAggParamEditor(){updateEditorConfig();$scope.aggHelpLink=null;if((0,_lodash.has)($scope,"agg.type.name")){$scope.aggHelpLink=(0,_lodash.get)(_documentation_links.documentationLinks,["aggs",$scope.agg.type.name])}if($aggParamEditors){$aggParamEditors.remove();$aggParamEditors=null}if($aggParamEditorsScope){$aggParamEditorsScope.$destroy();$aggParamEditorsScope=null}if(!$scope.agg||!$scope.agg.type){return}$aggParamEditorsScope=$scope.$new();var aggParamHTML={basic:[],advanced:[]};$scope.agg.type.params.filter(function(param){return!(0,_lodash.get)($scope,["editorConfig",param.name,"hidden"],false)}).forEach(function(param,i){var aggParam=void 0;var fields=void 0;if($scope.agg.schema.hideCustomLabel&&param.name==="customLabel"){return}if(param.type==="field"){var availableFields=param.getAvailableFields($scope.agg.getIndexPattern().fields);fields=$scope.indexedFields=$aggParamEditorsScope[param.name+"Options"]=_filter2.aggTypeFieldFilters.filter(availableFields,param.type,$scope.agg,$scope.vis)}if(fields){var hasIndexedFields=fields.length>0;var isExtraParam=i>0;if(!hasIndexedFields&&isExtraParam){return}}var type="basic";if(param.advanced)type="advanced";if(aggParam=getAggParamHTML(param,i)){aggParamHTML[type].push(aggParam)}});var paramEditors=aggParamHTML.basic;if(aggParamHTML.advanced.length){paramEditors.push((0,_jquery2.default)(_advanced_toggle2.default).get(0));paramEditors=paramEditors.concat(aggParamHTML.advanced)}$aggParamEditors=(0,_jquery2.default)(paramEditors).appendTo($el);$compile($aggParamEditors)($aggParamEditorsScope)}function getAggParamHTML(param,idx){if(!param.editor){return}var attrs={"agg-param":"agg.type.params["+idx+"]"};if(param.advanced){attrs["ng-show"]="advancedToggled"}return(0,_jquery2.default)("<vis-agg-param-editor>").attr(attrs).append(param.editor).get(0)}}}})},function(module,exports){module.exports='<div class="form-group">\n  <div>\n    <label\n      ng-if="$index < 1 || groupName !== \'buckets\'"\n      class="eui-displayInline"\n      i18n-id="common.ui.vis.editors.aggSelect.aggregationLabel"\n      i18n-default-message="Aggregation"\n    >\n    </label>\n    <label\n      ng-if="$index >= 1 && groupName === \'buckets\'"\n      class="eui-displayInline"\n      i18n-id="common.ui.vis.editors.aggSelect.subAggregationLabel"\n      i18n-default-message="Sub Aggregation"\n    >\n    </label>\n    <a\n      ng-if="aggHelpLink"\n      href="{{aggHelpLink}}"\n      class="pull-right"\n      target="_blank"\n      rel="noopener noreferrer"\n      i18n-id="common.ui.vis.editors.aggSelect.helpLinkLabel"\n      i18n-default-message="{aggTitle} help"\n      i18n-values="{ aggTitle: agg.type.title }"\n    >\n    </a>\n  </div>\n  <div class="euiSpacer euiSpacer--s"></div>\n  <ui-select\n    required\n    name="agg"\n    class="visEditorAggSelect__select agg-select"\n    data-test-subj="visEditorAggSelect"\n    ng-model="agg.type"\n  >\n    <ui-select-match placeholder="{{ ::\'common.ui.vis.editors.aggSelect.selectAggPlaceholder\' | i18n: { defaultMessage: \'Select an aggregation\' } }}">\n      {{$select.selected.title}}\n    </ui-select-match>\n    <ui-select-choices\n      repeat="agg in aggTypeOptions\n        | filter: { title: $select.search }\n        | orderBy:\'title\'\n        | sortPrefixFirst:$select.search:\'title\'"\n      group-by="\'subtype\'"\n    >\n      <div data-test-subj="{{agg.title}}" ng-bind-html="agg.title | highlight: $select.search"></div>\n    </ui-select-choices>\n  </ui-select>\n</div>\n'},function(module,exports){module.exports='<div class="eui-textRight">\n  <a ng-click="advancedToggled = !advancedToggled">\n    <i aria-hidden="true" class="fa fa-caret-down" ng-class="{\'fa-caret-down\': advancedToggled, \'fa-caret-left\': !advancedToggled}"></i>\n    <span\n      i18n-id="common.ui.vis.editors.advancedToggle.advancedLinkLabel"\n      i18n-default-message="Advanced"\n    >\n    </span>\n  </a>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("app/visualize").directive("visAggParamEditor",function(config){return{restrict:"E",scope:true,template:function template($el){return $el.html()},link:{pre:function pre($scope,$el,attr){$scope.$bind("aggParam",attr.aggParam)},post:function post($scope){$scope.config=config;$scope.optionEnabled=function(option){if(option&&_lodash2.default.isFunction(option.enabled)){return option.enabled($scope.agg)}return true}}}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports='<div ng-if="aggIsTooLow" class="form-group">\n  <p class="visEditorAggParam__error"\n    i18n-id="common.ui.vis.editors.aggParams.errors.aggWrongRunOrderErrorMessage"\n    i18n-default-message="&quot;{schema}&quot; aggs must run before all other buckets!"\n    i18n-values="{ schema: agg.schema.title }"\n  >\n  </p>\n  <input\n    type="number"\n    name="order"\n    ng-model="$index"\n    max="{{aggIsTooLow ? $index - 1 : $index}}"\n    style="display: none;">\n</div>\n\n<div ng-if="agg.error" class="form-group">\n  <p class="visEditorAggParam__error ng-binding">\n    {{agg.error}}\n  </p>\n</div>\n\n<div ng-if="agg.schema.deprecate" class="form-group">\n  <p ng-show="agg.schema.deprecateMessage" class="visEditorAggParam__error">\n    {{ agg.schema.deprecateMessage }}\n  </p>\n  <p\n    ng-show="!agg.schema.deprecateMessage"\n    class="visEditorAggParam__error"\n    i18n-id="common.ui.vis.editors.aggParams.errors.schemaIsDeprecatedErrorMessage"\n    i18n-default-message="&quot;{schema}&quot; has been deprecated."\n    i18n-values="{ schema: agg.schema.title }"\n  >\n  </p>\n</div>\n\n\x3c!-- schema editors get added down here: aggSelect.html, agg_types/controls/*.html --\x3e\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AggTypeFilters=function(){function AggTypeFilters(){this.filters=new Set}AggTypeFilters.prototype.addFilter=function(filter){this.filters.add(filter)};AggTypeFilters.prototype.filter=function(aggTypes,indexPattern,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter(function(aggType){var isAggTypeAllowed=allFilters.every(function(filter){return filter(aggType,indexPattern,aggConfig)});return isAggTypeAllowed});return allowedAggTypes};return AggTypeFilters}();var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters;exports.AggTypeFilters=AggTypeFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditorConfigProviderRegistry=exports.editorConfigProviders=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _math=__webpack_require__(474);var _parse_es_interval=__webpack_require__(309);var _least_common_interval=__webpack_require__(473);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var EditorConfigProviderRegistry=function(){function EditorConfigProviderRegistry(){this.providers=new Set}EditorConfigProviderRegistry.prototype.register=function(configProvider){this.providers.add(configProvider)};EditorConfigProviderRegistry.prototype.getConfigForAgg=function(aggType,indexPattern,aggConfig){var configs=Array.from(this.providers).map(function(provider){return provider(aggType,indexPattern,aggConfig)});return this.mergeConfigs(configs)};EditorConfigProviderRegistry.prototype.isTimeBaseParam=function(config){return config.hasOwnProperty("default")&&config.hasOwnProperty("timeBase")};EditorConfigProviderRegistry.prototype.isBaseParam=function(config){return config.hasOwnProperty("base")};EditorConfigProviderRegistry.prototype.isFixedParam=function(config){return config.hasOwnProperty("fixedValue")};EditorConfigProviderRegistry.prototype.mergeHidden=function(current,merged){return Boolean(current.hidden||merged.hidden)};EditorConfigProviderRegistry.prototype.mergeHelp=function(current,merged){if(!current.help){return merged.help}return merged.help?merged.help+"\n\n"+current.help:current.help};EditorConfigProviderRegistry.prototype.mergeFixedAndBase=function(current,merged,paramName){if(this.isFixedParam(current)&&this.isFixedParam(merged)&&current.fixedValue!==merged.fixedValue){throw new Error("Two EditorConfigProviders provided different fixed values for field "+paramName+":\n          "+merged.fixedValue+" !== "+current.fixedValue)}if(this.isFixedParam(current)&&this.isBaseParam(merged)||this.isBaseParam(current)&&this.isFixedParam(merged)){throw new Error("Tried to provide a fixedValue and a base for param "+paramName+".")}if(this.isBaseParam(current)&&this.isBaseParam(merged)){return{base:(0,_math.leastCommonMultiple)(current.base,merged.base)}}if(this.isFixedParam(current)){return{fixedValue:current.fixedValue}}if(this.isBaseParam(current)){return{base:current.base}}return{}};EditorConfigProviderRegistry.prototype.mergeTimeBase=function(current,merged,paramName){if(current.default!==current.timeBase){throw new Error("Tried to provide differing default and timeBase values for "+paramName+".")}if(this.isTimeBaseParam(current)&&this.isTimeBaseParam(merged)){try{var timeBase=(0,_least_common_interval.leastCommonInterval)(current.timeBase,merged.timeBase);return{default:timeBase,timeBase:timeBase}}catch(e){throw e}}if(this.isTimeBaseParam(current)){try{(0,_parse_es_interval.parseEsInterval)(current.timeBase);return{default:current.timeBase,timeBase:current.timeBase}}catch(e){throw e}}return{}};EditorConfigProviderRegistry.prototype.mergeConfigs=function(configs){var _this=this;return configs.reduce(function(output,conf){Object.entries(conf).forEach(function(_a){var _b=tslib_1.__read(_a,2),paramName=_b[0],paramConfig=_b[1];if(!output[paramName]){output[paramName]={}}output[paramName]=tslib_1.__assign({hidden:_this.mergeHidden(paramConfig,output[paramName]),help:_this.mergeHelp(paramConfig,output[paramName])},_this.isTimeBaseParam(paramConfig)?_this.mergeTimeBase(paramConfig,output[paramName],paramName):_this.mergeFixedAndBase(paramConfig,output[paramName],paramName))});return output},{})};return EditorConfigProviderRegistry}();var editorConfigProviders=new EditorConfigProviderRegistry;exports.editorConfigProviders=editorConfigProviders;exports.EditorConfigProviderRegistry=EditorConfigProviderRegistry},function(module,exports){module.exports='<div ng-show="add.form">\n  <label\n    i18n-id="common.ui.vis.editors.aggAdd.selectGroupTypeLabel"\n    i18n-default-message="Select {groupNameLabel} type"\n    i18n-values="{ groupNameLabel }"\n  >\n  </label>\n  <ul class="form-group list-group list-group-menu">\n    <li\n      tabindex="0"\n      id="aggSchemaListItem-{{$index}}"\n      ng-hide="schema.deprecate"\n      ng-repeat="schema in availableSchema"\n      ng-click="add.submit(schema)"\n      class="list-group-item list-group-menu-item"\n      data-test-subj="{{schema.title}}">\n      <i ng-show="schema.icon" ng-class="schema.icon"></i>\n      {{schema.title}}\n    </li>\n  </ul>\n</div>\n\n<div class="euiSpacer euiSpacer--s"></div>\n\n<div\n  ng-if="stats.max > stats.count"\n  ng-init="add.form = stats.count < 1 ? !add.form : add.form"\n  ng-click="add.form = !add.form"\n  class="eui-textCenter">\n\n  <div ng-if="!add.form">\n    <button\n      data-test-subj="visualizeEditorAddAggregationButton"\n      class="kuiButton kuiButton--secondary kuiButton--small"\n      ng-if="groupName !== \'buckets\' || !stats.count && !stats.deprecate"\n      i18n-id="common.ui.vis.editors.aggAdd.addGroupButtonLabel"\n      i18n-default-message="Add {groupNameLabel}"\n      i18n-values="{ groupNameLabel }"\n    >\n    </button>\n\n    <button\n      data-test-subj="visualizeEditorAddAggregationButton"\n      class="kuiButton kuiButton--secondary kuiButton--small"\n      ng-if="groupName === \'buckets\' && stats.count > 0 && !stats.deprecate"\n      i18n-id="common.ui.vis.editors.aggAdd.addSubGroupButtonLabel"\n      i18n-default-message="Add sub-{groupNameLabel}"\n      i18n-values="{ groupNameLabel }"\n    >\n    </button>\n  </div>\n\n  <button\n    class="kuiButton kuiButton--danger kuiButton--small"\n    ng-if="add.form"\n    i18n-id="common.ui.vis.editors.aggAdd.cancelButtonLabel"\n    i18n-default-message="Cancel"\n  >\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Direction=undefined;var _directionMapping;var _modules=__webpack_require__(3);var _eui=__webpack_require__(2);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Direction=exports.Direction={up:"up",down:"down"};var directionMapping=(_directionMapping={},_defineProperty(_directionMapping,_eui.keyCodes.UP,Direction.up),_defineProperty(_directionMapping,_eui.keyCodes.DOWN,Direction.down),_directionMapping);_modules.uiModules.get("kibana").directive("keyboardMove",function($parse,$timeout){return{restrict:"A",link:function link(scope,el,attr){var callbackFn=$parse(attr.keyboardMove);el.keydown(function(ev){if(ev.which in directionMapping){ev.preventDefault();var direction=directionMapping[ev.which];scope.$apply(function(){return callbackFn(scope,{direction:direction})});$timeout(function(){return el.focus()})}});scope.$on("$destroy",function(){el.off("keydown")})}}})},function(module,exports){module.exports='\x3c!-- header --\x3e\n<div class="visEditorAggHeader">\n\n  \x3c!-- open/close editor --\x3e\n  <button\n    aria-label="{{::\'common.ui.vis.editors.agg.toggleEditorButtonAriaLabel\' | i18n: { defaultMessage: \'Toggle {schema} editor\', values: { schema: agg.schema.title } } }}"\n    ng-click="editorOpen = !editorOpen"\n    aria-expanded="{{ !!editorOpen }}"\n    aria-controls="visAggEditorParams{{agg.id}}"\n    type="button"\n    data-test-subj="toggleEditor"\n    class="visEditorAggHeader__toggle kuiButton kuiButton--primary kuiButton--small">\n    <i aria-hidden="true" ng-class="{ \'fa-caret-down\': editorOpen, \'fa-caret-right\': !editorOpen }" class="fa"></i>\n  </button>\n\n  \x3c!-- title --\x3e\n  <span class="visEditorAggHeader__title" ng-class="{\'visEditorAggHeader__title--grow\': editorOpen}">\n    {{ agg.schema.title }}\n  </span>\n\n  \x3c!-- description --\x3e\n  <span ng-if="!editorOpen && aggForm.$valid" class="visEditorAggHeader__description" title="{{describe()}}">\n    {{ describe() }}\n  </span>\n\n  \x3c!-- error --\x3e\n  <span ng-if="!editorOpen && aggForm.$invalid" class="visEditorAggHeader__description visEditorAggHeader__description--danger" title="{{aggForm.describeErrors()}}">\n    {{ aggForm.describeErrors() }}\n  </span>\n\n  \x3c!-- controls !!!actually disabling buttons will break tooltips¡¡¡ --\x3e\n  <div class="visEditorAggHeader__controls kuiButtonGroup kuiButtonGroup--united">\n    \x3c!-- disable aggregation --\x3e\n    <button\n      ng-if="agg.enabled && canRemove(agg)"\n      ng-click="agg.enabled = false"\n      aria-label="{{::\'common.ui.vis.editors.agg.disableAggButtonAriaLabel\' | i18n: { defaultMessage: \'Disable aggregation\' } }}"\n      tooltip="{{::\'common.ui.vis.editors.agg.disableAggButtonTooltip\' | i18n: { defaultMessage: \'Disable aggregation\' } }}"\n      tooltip-append-to-body="true"\n      data-test-subj="disableAggregationBtn"\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-toggle-on"></i>\n    </button>\n\n    \x3c!-- enable aggregation --\x3e\n    <button\n      ng-if="!agg.enabled"\n      ng-click="agg.enabled = true"\n      aria-label="{{::\'common.ui.vis.editors.agg.enableAggButtonAriaLabel\' | i18n: { defaultMessage: \'Enable aggregation\' } }}"\n      tooltip="{{::\'common.ui.vis.editors.agg.enableAggButtonTooltip\' | i18n: { defaultMessage: \'Enable aggregation\' } }}"\n      tooltip-append-to-body="true"\n      data-test-subj="disableAggregationBtn"\n      type="button"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-toggle-off"></i>\n    </button>\n\n    \x3c!-- drag handle --\x3e\n    <button\n      draggable-handle\n      ng-if="stats.count > 1"\n      tooltip="{{::\'common.ui.vis.editors.agg.modifyPriorityButtonTooltip\' | i18n: { defaultMessage: \'Modify Priority by Dragging\' } }}"\n      tooltip-append-to-body="true"\n      type="button"\n      keyboard-move="onPriorityReorder(direction)"\n      class="kuiButton kuiButton--basic kuiButton--small">\n      <i aria-hidden="true" class="fa fa-arrows-v"></i>\n      <span class="euiScreenReaderOnly"\n        i18n-id="common.ui.vis.editors.howToModifyScreenReaderPriorityDescription"\n        i18n-default-message="Use up and down key on this button to move this aggregation up and down in the priority order."\n      >\n      </span>\n    </button>\n\n    \x3c!-- remove button --\x3e\n    <button\n      ng-if="canRemove(agg)"\n      aria-label="{{::\'common.ui.vis.editors.agg.removeDimensionButtonAriaLabel\' | i18n: { defaultMessage: \'Remove Dimension\' } }}"\n      ng-if="stats.count > stats.min"\n      ng-click="remove(agg)"\n      tooltip="{{::\'common.ui.vis.editors.agg.removeDimensionButtonTooltip\' | i18n: { defaultMessage: \'Remove Dimension\' } }}"\n      tooltip-append-to-body="true"\n      type="button"\n      class="kuiButton kuiButton--danger kuiButton--small">\n      <i aria-hidden="true" class="fa fa-times"></i>\n    </button>\n\n  </div>\n\n</div>\n\n<vis-editor-agg-params\n  id="visAggEditorParams{{agg.id}}"\n  agg="agg"\n  group-name="groupName"\n  ng-show="editorOpen"\n  index-pattern="vis.indexPattern">\n</vis-editor-agg-params>\n\n<vis-editor-agg-add\n  ng-if="$index + 1 === stats.count"\n  ng-hide="dragging">\n</vis-editor-agg-add>\n'},function(module,exports){module.exports='<div class="sidebar-item visEditorAggGroup__wrapper">\n  <div class="sidebar-item-title visEditorAggGroup__title">\n    {{ groupNameLabel }}\n  </div>\n\n  <div ng-class="groupName" draggable-container="group" class="visEditorAggGroup">\n    <div ng-repeat="agg in group track by agg.id" data-test-subj="aggregationEditor{{agg.id}}" draggable-item="agg">\n      \x3c!-- agg.html - controls for aggregation --\x3e\n      <ng-form vis-editor-agg name="aggForm" class="visEditorAgg"></ng-form>\n    </div>\n\n    <vis-editor-agg-add ng-if="stats.count === 0" data-test-subj="addAggregationButton"></vis-editor-agg-add>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNameMaps=undefined;var _i18n=__webpack_require__(8);var aggGroupNameMaps=exports.aggGroupNameMaps=function aggGroupNameMaps(){return{metrics:_i18n.i18n.translate("common.ui.vis.editors.aggGroups.metricsText",{defaultMessage:"metrics"}),buckets:_i18n.i18n.translate("common.ui.vis.editors.aggGroups.bucketsText",{defaultMessage:"buckets"})}}},function(module,exports){module.exports="  \x3c!-- Visualization and other editing UI gets inserted in here. --\x3e\n  <div\n    data-visualization-options\n  ></div>\n"},function(module,exports){module.exports='<div class="sidebar-container visEditorSidebar__container">\n  <form\n    class="sidebar-list visEditorSidebar__form"\n    ng-submit="visualizeEditor.$invalid ? stageEditableVis(false) : stageEditableVis()"\n    name="visualizeEditor"\n    novalidate\n    ng-keydown="submitEditorWithKeyboard($event)"\n  >\x3c!-- see http://goo.gl/9kgz5w --\x3e\n\n    <div\n      css-truncate\n      aria-label="{{\n        ::\'common.ui.vis.editors.sidebar.indexPatternAriaLabel\' | i18n:\n        {\n          defaultMessage: \'Index pattern: {title}\',\n          values: { title: vis.indexPattern.title }\n        }\n      }}"\n      ng-if="vis.type.requiresSearch && vis.type.options.showIndexSelection"\n      class="index-pattern visEditorSidebar__indexPattern"\n      tabindex="0"\n      id="sidebarIndexPatternTitle"\n    >\n      {{ vis.indexPattern.title }}\n    </div>\n\n    <nav class="navbar navbar-default subnav visEditorSidebar__nav">\n      <div class="container-fluid">\n\n        \x3c!-- tabs --\x3e\n        <ul class="nav navbar-nav" role="tablist">\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === \'data\'}}"\n            ng-class="{active: sidebar.section == \'data\'}"\n            ng-show="sidebar.showData"\n          >\n            <a\n              class="visEditorSidebar__navLink"\n              ng-class="{\'visEditorSidebar__navLink-isSelected\': sidebar.section == \'data\'}"\n              ng-click="sidebar.section=\'data\'"\n              kbn-accessible-click\n              data-test-subj="visualizeEditDataLink"\n              i18n-id="common.ui.vis.editors.sidebar.tabs.dataLabel"\n              i18n-default-message="Data"\n            >\n            </a>\n          </li>\n\n          <li\n            role="tab"\n            aria-selected="{{sidebar.section === tab.name}}"\n            ng-repeat="tab in vis.type.editorConfig.optionTabs"\n            ng-class="{active: sidebar.section == tab.name}"\n            ng-if="vis.type.editorConfig.optionTabs.length > 1 || sidebar.showData"\n          >\n            <a\n              class="visEditorSidebar__navLink"\n              ng-class="{\'visEditorSidebar__navLink-isSelected\': sidebar.section == tab.name}"\n              ng-click="sidebar.section=tab.name"\n              kbn-accessible-click\n              data-test-subj="{{ \'visEditorTab\' + tab.name }}"\n            >\n              {{tab.title}}\n            </a>\n          </li>\n        </ul>\n\n        \x3c!-- controls --\x3e\n        <ul class="nav navbar-nav navbar-right">\n          <li\n            ng-if="visualizeEditor.softErrorCount() > 0"\n            disabled\n            tooltip="{{ visualizeEditor.describeErrors() }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n          >\n            <div\n              class="kuiButton kuiButton--danger navbar-btn-link visEditorSidebar__navButtonLink"\n              aria-label="{{ visualizeEditor.describeErrors() }}"\n            >\n              <icon aria-hidden="true" type="\'alert\'" color="\'danger\'"></icon>\n            </div>\n          </li>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.autoApplyChangesTooltip\' | i18n: { defaultMessage: \'Auto apply changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-if="vis.type.editorConfig.enableAutoApply"\n          >\n            <button\n              data-test-subj="visualizeEditorAutoButton"\n              class="kuiButton kuiButton--basic navbar-btn-link visEditorSidebar__navButtonLink"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.autoApplyChangesAriaLabel\' | i18n: { defaultMessage: \'Auto update the visualization on every change\' } }}"\n              ng-click="toggleAutoApply()"\n              ng-class="{\n                \'kuiButton--primary\': autoApplyEnabled,\n                \'kuiButton--basic\': !autoApplyEnabled\n              }"\n            >\n              <icon aria-hidden="true" type="\'refresh\'"></icon>\n            </button>\n          </li>\n              <span\n                ng-show="autoApplyEnabled"\n                i18n-id="common.ui.vis.editors.sidebar.autoApplyChangesLabel"\n                i18n-default-message="Auto Apply"\n              >\n            </span>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.applyChangesTooltip\' | i18n: { defaultMessage: \'Apply changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400" tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled"\n          >\n            <button\n              data-test-subj="visualizeEditorRenderButton"\n              class="kuiButton kuiButton--primary navbar-btn-link visEditorSidebar__navButtonLink"\n              type="submit"\n              ng-disabled="!vis.dirty || visualizeEditor.errorCount() > 0 || autoApplyEnabled"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.applyChangesAriaLabel\' | i18n: { defaultMessage: \'Update the visualization with your changes\' } }}"\n            >\n              <icon aria-hidden="true" type="\'play\'"></icon>\n            </button>\n          </li>\n\n          <li\n            tooltip="{{::\'common.ui.vis.editors.sidebar.discardChangesTooltip\' | i18n: { defaultMessage: \'Discard changes\' } }}"\n            tooltip-placement="bottom"\n            tooltip-popup-delay="400"\n            tooltip-append-to-body="1"\n            ng-hide="autoApplyEnabled"\n          >\n            <button\n              data-test-subj="visualizeEditorResetButton"\n              class="kuiButton navbar-btn-link visEditorSidebar__navButtonLink"\n              ng-disabled="!vis.dirty"\n              ng-click="resetEditableVis()"\n              aria-label="{{::\'common.ui.vis.editors.sidebar.discardChangesAriaLabel\' | i18n: { defaultMessage: \'Reset the visualization\' } }}"\n            >\n              <icon type="\'cross\'"></icon>\n            </button>\n          </li>\n        </ul>\n      </div>\n    </nav>\n\n    <div class="visEditorSidebar__config" ng-show="sidebar.section == \'data\'">\n      \x3c!-- metrics --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.metrics" data-test-subj="metricsAggGroup" group-name="metrics"></vis-editor-agg-group>\n\n      \x3c!-- buckets --\x3e\n      <vis-editor-agg-group ng-if="vis.type.schemas.buckets" data-test-subj="bucketsAggGroup" group-name="buckets"></vis-editor-agg-group>\n    </div>\n\n    <div class="visEditorSidebar__config" ng-repeat="tab in vis.type.editorConfig.optionTabs" ng-show="sidebar.section == tab.name">\n      <vis-editor-vis-options\n        class="visEditorSidebar__options"\n        editor-state="state"\n        vis="vis"\n        vis-data="visData"\n        ui-state="uiState"\n        visualize-editor="visualizeEditor"\n        editor="tab.editor"\n      ></vis-editor-vis-options>\n    </div>\n\n  </form>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(3);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("visEditorResizer",function(){return{restrict:"E",link:function link($scope,$el){var $left=$el.parent();$el.on("mousedown",function(event){$el.addClass("active");var startWidth=$left.width();var startX=event.pageX;function onMove(event){var newWidth=startWidth+event.pageX-startX;$left.width(newWidth)}(0,_jquery2.default)(document.body).on("mousemove",onMove).one("mouseup",function(){$el.removeClass("active");(0,_jquery2.default)(document.body).off("mousemove",onMove);$scope.$broadcast("render")})});$el.on("keydown",function(event){var keyCode=event.keyCode;if(keyCode===_eui.keyCodes.LEFT||keyCode===_eui.keyCodes.RIGHT){event.preventDefault();var startWidth=$left.width();var newWidth=startWidth+(keyCode===_eui.keyCodes.LEFT?-15:15);$left.width(newWidth);$scope.$broadcast("render")}})}}})},function(module,exports,__webpack_require__){"use strict";var _filter=__webpack_require__(484);var _prop_filter=__webpack_require__(278);var filterByName=(0,_prop_filter.propFilter)("name");_filter.aggTypeFilters.addFilter(function(aggType,indexPatterns,aggConfig){var doesSchemaAllowAggType=filterByName([aggType],aggConfig.schema.aggFilter).length!==0;return doesSchemaAllowAggType})},function(module,exports){module.exports='<div class="visEditor--default">\n  <div class="collapsible-sidebar visEditor__collapsibleSidebar" ng-class="::getSidebarClass()">\n    <vis-editor-sidebar class="visEditor__sidebar" />\n    <vis-editor-resizer\n      class="visEditor__resizer"\n      tabindex="0"\n      aria-label="{{::\'common.ui.vis.editors.resizeAriaLabels\' | i18n: { defaultMessage: \'Press left/right to resize the editor\' } }}"\n      data-test-subj="visualizeEditorResizer"\n    >&#xFE19;</vis-editor-resizer>\n  </div>\n\n  <div\n    class="visEditor__canvas"\n    data-shared-item\n    data-shared-items-container\n    render-complete\n    data-title="{{vis.title}}"\n    data-description="{{vis.description}}"\n  />\n\n</div>\n'},function(module,exports){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2711)},,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2026)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2712)},,,,,,,,,,,,,function(module,exports,__webpack_require__){__webpack_require__(1339)},function(module,exports,__webpack_require__){"use strict";var _field_format_editors=__webpack_require__(513);var _bytes=__webpack_require__(1340);var _color=__webpack_require__(1345);var _date=__webpack_require__(1347);var _duration=__webpack_require__(1349);var _number=__webpack_require__(318);var _percent=__webpack_require__(1351);var _static_lookup=__webpack_require__(1353);var _string=__webpack_require__(1355);var _truncate=__webpack_require__(1357);var _url=__webpack_require__(1360);_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _bytes.BytesFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _color.ColorFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _date.DateFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _duration.DurationFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _number.NumberFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _percent.PercentFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _static_lookup.StaticLookupFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _string.StringFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _truncate.TruncateFormatEditor});_field_format_editors.RegistryFieldFormatEditorsProvider.register(function(){return _url.UrlFormatEditor})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _bytes=__webpack_require__(1341);Object.defineProperty(exports,"BytesFormatEditor",{enumerable:true,get:function get(){return _bytes.BytesFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BytesFormatEditor=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _number=__webpack_require__(318);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var BytesFormatEditor=exports.BytesFormatEditor=function(_NumberFormatEditor){_inherits(BytesFormatEditor,_NumberFormatEditor);function BytesFormatEditor(props){_classCallCheck(this,BytesFormatEditor);var _this=_possibleConstructorReturn(this,(BytesFormatEditor.__proto__||Object.getPrototypeOf(BytesFormatEditor)).call(this,props));_this.state=_extends({},_this.state,{sampleInputs:[256,1024,515e4,199e7]});return _this}return BytesFormatEditor}(_number.NumberFormatEditor);BytesFormatEditor.formatId="bytes"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberFormatEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NumberFormatEditor=exports.NumberFormatEditor=function(_DefaultFormatEditor){_inherits(NumberFormatEditor,_DefaultFormatEditor);function NumberFormatEditor(props){_classCallCheck(this,NumberFormatEditor);var _this=_possibleConstructorReturn(this,(NumberFormatEditor.__proto__||Object.getPrototypeOf(NumberFormatEditor)).call(this,props));_this.state.sampleInputs=[1e4,12.345678,-1,-999,.52];return _this}_createClass(NumberFormatEditor,[{key:"render",value:function render(){var _this2=this;var _props=this.props,format=_props.format,formatParams=_props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples;var defaultPattern=format.getParamDefaults().pattern;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.number.numeralLabel",defaultMessage:"Numeral.js format pattern (Default: {defaultPattern})",values:{defaultPattern:_react2.default.createElement(_eui.EuiCode,null,defaultPattern)}}),helpText:_react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiLink,{target:"_window",href:"https://adamwdraper.github.io/Numeral-js/"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.number.documentationLabel",defaultMessage:"Documentation"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"}))),isInvalid:!!error,error:error},_react2.default.createElement(_eui.EuiFieldText,{value:formatParams.pattern,placeholder:defaultPattern,onChange:function onChange(e){_this2.onChange({pattern:e.target.value})},isInvalid:!!error})),_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return NumberFormatEditor}(_default.DefaultFormatEditor);NumberFormatEditor.formatId="number"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DefaultFormatEditor=exports.convertSampleInput=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var convertSampleInput=exports.convertSampleInput=function convertSampleInput(converter,inputs){var error=null;var samples=[];try{samples=inputs.map(function(input){return{input:input,output:converter(input)}})}catch(e){error=_i18n.i18n.translate("common.ui.fieldEditor.defaultErrorMessage",{defaultMessage:"An error occurred while trying to use this format configuration: {message}",values:{message:e.message}})}return{error:error,samples:samples}};var DefaultFormatEditor=exports.DefaultFormatEditor=function(_PureComponent){_inherits(DefaultFormatEditor,_PureComponent);function DefaultFormatEditor(props){_classCallCheck(this,DefaultFormatEditor);var _this=_possibleConstructorReturn(this,(DefaultFormatEditor.__proto__||Object.getPrototypeOf(DefaultFormatEditor)).call(this,props));_this.onChange=function(){var newParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _this$props=_this.props,onChange=_this$props.onChange,formatParams=_this$props.formatParams;onChange(_extends({},formatParams,newParams))};_this.state={sampleInputs:[],sampleConverterType:"text",error:null,samples:[]};return _this}_createClass(DefaultFormatEditor,[{key:"render",value:function render(){return null}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){var format=nextProps.format,formatParams=nextProps.formatParams,onError=nextProps.onError;var sampleInputsByType=state.sampleInputsByType,sampleInputs=state.sampleInputs,sampleConverterType=state.sampleConverterType;var converter=format.getConverterFor(sampleConverterType);var type=(typeof sampleInputsByType==="undefined"?"undefined":_typeof(sampleInputsByType))==="object"&&formatParams.type;var inputs=type?sampleInputsByType[formatParams.type]||[]:sampleInputs;var output=convertSampleInput(converter,inputs);onError(output.error);return output}}]);return DefaultFormatEditor}(_react.PureComponent);DefaultFormatEditor.propTypes={fieldType:_propTypes2.default.string.isRequired,format:_propTypes2.default.object.isRequired,formatParams:_propTypes2.default.object.isRequired,onChange:_propTypes2.default.func.isRequired,onError:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormatEditorSamples=exports.FormatEditorSamplesComponent=undefined;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FormatEditorSamplesComponent=exports.FormatEditorSamplesComponent=function(_PureComponent){_inherits(FormatEditorSamplesComponent,_PureComponent);function FormatEditorSamplesComponent(){_classCallCheck(this,FormatEditorSamplesComponent);return _possibleConstructorReturn(this,(FormatEditorSamplesComponent.__proto__||Object.getPrototypeOf(FormatEditorSamplesComponent)).apply(this,arguments))}_createClass(FormatEditorSamplesComponent,[{key:"render",value:function render(){var _props=this.props,samples=_props.samples,intl=_props.intl,sampleType=_props.sampleType;var columns=[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.samples.inputHeader",defaultMessage:"Input"}),render:function render(input){return(typeof input==="undefined"?"undefined":_typeof(input))==="object"?JSON.stringify(input):input}},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.samples.outputHeader",defaultMessage:"Output"}),render:function render(output){return sampleType==="html"?_react2.default.createElement("div",{dangerouslySetInnerHTML:{__html:output}}):_react2.default.createElement("div",null,output)}}];return samples.length?_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.samplesHeader",defaultMessage:"Samples"})},_react2.default.createElement(_eui.EuiBasicTable,{className:"kbnFieldFormatEditor__samples",compressed:true,items:samples,columns:columns})):null}}]);return FormatEditorSamplesComponent}(_react.PureComponent);FormatEditorSamplesComponent.defaultProps={sampleType:"text"};FormatEditorSamplesComponent.propTypes={samples:_propTypes2.default.arrayOf(_propTypes2.default.shape({input:_propTypes2.default.any.isRequired,output:_propTypes2.default.any.isRequired})).isRequired,sampleType:_propTypes2.default.oneOf(["html","text"])};var FormatEditorSamples=exports.FormatEditorSamples=(0,_react3.injectI18n)(FormatEditorSamplesComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _color=__webpack_require__(1346);Object.defineProperty(exports,"ColorFormatEditor",{enumerable:true,get:function get(){return _color.ColorFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorFormatEditor=exports.ColorFormatEditorComponent=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _color_default=__webpack_require__(512);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ColorFormatEditorComponent=exports.ColorFormatEditorComponent=function(_DefaultFormatEditor){_inherits(ColorFormatEditorComponent,_DefaultFormatEditor);function ColorFormatEditorComponent(props){_classCallCheck(this,ColorFormatEditorComponent);var _this=_possibleConstructorReturn(this,(ColorFormatEditorComponent.__proto__||Object.getPrototypeOf(ColorFormatEditorComponent)).call(this,props));_this.onColorChange=function(newColorParams,index){var colors=[].concat(_toConsumableArray(_this.props.formatParams.colors));colors[index]=_extends({},colors[index],newColorParams);_this.onChange({colors:colors})};_this.addColor=function(){var colors=[].concat(_toConsumableArray(_this.props.formatParams.colors));_this.onChange({colors:[].concat(_toConsumableArray(colors),[_extends({},_color_default.DEFAULT_COLOR)])})};_this.removeColor=function(index){var colors=[].concat(_toConsumableArray(_this.props.formatParams.colors));colors.splice(index,1);_this.onChange({colors:colors})};_this.onChange({fieldType:props.fieldType});return _this}_createClass(ColorFormatEditorComponent,[{key:"render",value:function render(){var _this2=this;var _props=this.props,formatParams=_props.formatParams,fieldType=_props.fieldType,intl=_props.intl;var items=formatParams.colors&&formatParams.colors.length&&formatParams.colors.map(function(color,index){return _extends({},color,{index:index})})||[];var columns=[fieldType==="string"?{field:"regex",name:intl.formatMessage({id:"common.ui.fieldEditor.color.patternLabel",defaultMessage:"Pattern (regular expression)"}),render:function render(value,item){return _react2.default.createElement(_eui.EuiFieldText,{value:value,onChange:function onChange(e){_this2.onColorChange({regex:e.target.value},item.index)}})}}:{field:"range",name:intl.formatMessage({id:"common.ui.fieldEditor.color.rangeLabel",defaultMessage:"Range (min:max)"}),render:function render(value,item){return _react2.default.createElement(_eui.EuiFieldText,{value:value,onChange:function onChange(e){_this2.onColorChange({range:e.target.value},item.index)}})}},{field:"text",name:intl.formatMessage({id:"common.ui.fieldEditor.color.textColorLabel",defaultMessage:"Text color"}),render:function render(color,item){return _react2.default.createElement(_eui.EuiColorPicker,{color:color,onChange:function onChange(newColor){_this2.onColorChange({text:newColor},item.index)}})}},{field:"background",name:intl.formatMessage({id:"common.ui.fieldEditor.color.backgroundLabel",defaultMessage:"Background color"}),render:function render(color,item){return _react2.default.createElement(_eui.EuiColorPicker,{color:color,onChange:function onChange(newColor){_this2.onColorChange({background:newColor},item.index)}})}},{name:intl.formatMessage({id:"common.ui.fieldEditor.color.exampleLabel",defaultMessage:"Example"}),render:function render(item){return _react2.default.createElement("div",{style:{background:item.background,color:item.text}},"123456")}},{actions:[{name:intl.formatMessage({id:"common.ui.fieldEditor.color.deleteAria",defaultMessage:"Delete"}),description:intl.formatMessage({id:"common.ui.fieldEditor.color.deleteTitle",defaultMessage:"Delete color format"}),onClick:function onClick(item){_this2.removeColor(item.index)},type:"icon",icon:"trash",color:"danger",available:function available(){return items.length>1}}]}];return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiBasicTable,{items:items,columns:columns}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addColor},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.color.addColorButton",defaultMessage:"Add color"})),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}))}}]);return ColorFormatEditorComponent}(_default.DefaultFormatEditor);var ColorFormatEditor=exports.ColorFormatEditor=(0,_react3.injectI18n)(ColorFormatEditorComponent);ColorFormatEditor.formatId="color"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date=__webpack_require__(1348);Object.defineProperty(exports,"DateFormatEditor",{enumerable:true,get:function get(){return _date.DateFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DateFormatEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DateFormatEditor=exports.DateFormatEditor=function(_DefaultFormatEditor){_inherits(DateFormatEditor,_DefaultFormatEditor);function DateFormatEditor(props){_classCallCheck(this,DateFormatEditor);var _this=_possibleConstructorReturn(this,(DateFormatEditor.__proto__||Object.getPrototypeOf(DateFormatEditor)).call(this,props));_this.state.sampleInputs=[Date.now(),(0,_moment2.default)().startOf("year").valueOf(),(0,_moment2.default)().endOf("year").valueOf()];return _this}_createClass(DateFormatEditor,[{key:"render",value:function render(){var _this2=this;var _props=this.props,format=_props.format,formatParams=_props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples;var defaultPattern=format.getParamDefaults().pattern;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.date.momentLabel",defaultMessage:"Moment.js format pattern (Default: {defaultPattern})",values:{defaultPattern:_react2.default.createElement(_eui.EuiCode,null,defaultPattern)}}),isInvalid:!!error,error:error,helpText:_react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiLink,{target:"_window",href:"http://momentjs.com/"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.date.documentationLabel",defaultMessage:"Documentation"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"})))},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"dateEditorPattern",value:formatParams.pattern,placeholder:defaultPattern,onChange:function onChange(e){_this2.onChange({pattern:e.target.value})},isInvalid:!!error})),_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return DateFormatEditor}(_default.DefaultFormatEditor);DateFormatEditor.formatId="date"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _duration=__webpack_require__(1350);Object.defineProperty(exports,"DurationFormatEditor",{enumerable:true,get:function get(){return _duration.DurationFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationFormatEditor=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DurationFormatEditor=exports.DurationFormatEditor=function(_DefaultFormatEditor){_inherits(DurationFormatEditor,_DefaultFormatEditor);function DurationFormatEditor(props){_classCallCheck(this,DurationFormatEditor);var _this=_possibleConstructorReturn(this,(DurationFormatEditor.__proto__||Object.getPrototypeOf(DurationFormatEditor)).call(this,props));_this.state.sampleInputs=[-123,1,12,123,658,1988,3857,123292,923528271];_this.state.hasDecimalError=false;return _this}_createClass(DurationFormatEditor,[{key:"render",value:function render(){var _this2=this;var _props=this.props,format=_props.format,formatParams=_props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples,hasDecimalError=_state.hasDecimalError;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.duration.inputFormatLabel",defaultMessage:"Input format"}),isInvalid:!!error,error:hasDecimalError?null:error},_react2.default.createElement(_eui.EuiSelect,{value:formatParams.inputFormat,options:format.type.inputFormats.map(function(format){return{value:format.kind,text:format.text}}),onChange:function onChange(e){_this2.onChange({inputFormat:e.target.value})},isInvalid:!!error})),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.duration.outputFormatLabel",defaultMessage:"Output format"}),isInvalid:!!error},_react2.default.createElement(_eui.EuiSelect,{value:formatParams.outputFormat,options:format.type.outputFormats.map(function(format){return{value:format.method,text:format.text}}),onChange:function onChange(e){_this2.onChange({outputFormat:e.target.value})},isInvalid:!!error})),!format.isHuman()?_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.duration.decimalPlacesLabel",defaultMessage:"Decimal places"}),isInvalid:!!error,error:hasDecimalError?error:null},_react2.default.createElement(_eui.EuiFieldNumber,{value:formatParams.outputPrecision,min:0,max:20,onChange:function onChange(e){_this2.onChange({outputPrecision:e.target.value?Number(e.target.value):null})},isInvalid:!!error})):null,_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){var output=_get(DurationFormatEditor.__proto__||Object.getPrototypeOf(DurationFormatEditor),"getDerivedStateFromProps",this).call(this,nextProps,state);var error=null;if(!nextProps.format.isHuman()&&nextProps.formatParams.outputPrecision>20){error=_i18n.i18n.translate("common.ui.fieldEditor.durationErrorMessage",{defaultMessage:"Decimal places must be between 0 and 20"});nextProps.onError(error);return _extends({},output,{error:error,hasDecimalError:true})}return _extends({},output,{hasDecimalError:false})}}]);return DurationFormatEditor}(_default.DefaultFormatEditor);DurationFormatEditor.formatId="duration"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _percent=__webpack_require__(1352);Object.defineProperty(exports,"PercentFormatEditor",{enumerable:true,get:function get(){return _percent.PercentFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentFormatEditor=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _number=__webpack_require__(318);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PercentFormatEditor=exports.PercentFormatEditor=function(_NumberFormatEditor){_inherits(PercentFormatEditor,_NumberFormatEditor);function PercentFormatEditor(props){_classCallCheck(this,PercentFormatEditor);var _this=_possibleConstructorReturn(this,(PercentFormatEditor.__proto__||Object.getPrototypeOf(PercentFormatEditor)).call(this,props));_this.state=_extends({},_this.state,{sampleInputs:[.1,.99999,1,100,1e3]});return _this}return PercentFormatEditor}(_number.NumberFormatEditor);PercentFormatEditor.formatId="percent"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _static_lookup=__webpack_require__(1354);Object.defineProperty(exports,"StaticLookupFormatEditor",{enumerable:true,get:function get(){return _static_lookup.StaticLookupFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StaticLookupFormatEditor=exports.StaticLookupFormatEditorComponent=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var StaticLookupFormatEditorComponent=exports.StaticLookupFormatEditorComponent=function(_DefaultFormatEditor){_inherits(StaticLookupFormatEditorComponent,_DefaultFormatEditor);function StaticLookupFormatEditorComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,StaticLookupFormatEditorComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=StaticLookupFormatEditorComponent.__proto__||Object.getPrototypeOf(StaticLookupFormatEditorComponent)).call.apply(_ref,[this].concat(args))),_this),_this.onLookupChange=function(newLookupParams,index){var lookupEntries=[].concat(_toConsumableArray(_this.props.formatParams.lookupEntries));lookupEntries[index]=_extends({},lookupEntries[index],newLookupParams);_this.onChange({lookupEntries:lookupEntries})},_this.addLookup=function(){var lookupEntries=[].concat(_toConsumableArray(_this.props.formatParams.lookupEntries));_this.onChange({lookupEntries:[].concat(_toConsumableArray(lookupEntries),[{}])})},_this.removeLookup=function(index){var lookupEntries=[].concat(_toConsumableArray(_this.props.formatParams.lookupEntries));lookupEntries.splice(index,1);_this.onChange({lookupEntries:lookupEntries})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(StaticLookupFormatEditorComponent,[{key:"render",value:function render(){var _this2=this;var _props=this.props,formatParams=_props.formatParams,intl=_props.intl;var items=formatParams.lookupEntries&&formatParams.lookupEntries.length&&formatParams.lookupEntries.map(function(lookup,index){return _extends({},lookup,{index:index})})||[];var columns=[{field:"key",name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.keyLabel",defaultMessage:"Key"}),render:function render(value,item){return _react2.default.createElement(_eui.EuiFieldText,{value:value||"",onChange:function onChange(e){_this2.onLookupChange({key:e.target.value},item.index)}})}},{field:"value",name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.valueLabel",defaultMessage:"Value"}),render:function render(value,item){return _react2.default.createElement(_eui.EuiFieldText,{value:value||"",onChange:function onChange(e){_this2.onLookupChange({value:e.target.value},item.index)}})}},{actions:[{name:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.deleteAria",defaultMessage:"Delete"}),description:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.deleteTitle",defaultMessage:"Delete entry"}),onClick:function onClick(item){_this2.removeLookup(item.index)},type:"icon",icon:"trash",color:"danger",available:function available(){return items.length>1}}],width:"30px"}];return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiBasicTable,{items:items,columns:columns,style:{maxWidth:"400px"}}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiButton,{iconType:"plusInCircle",size:"s",onClick:this.addLookup},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.staticLookup.addEntryButton",defaultMessage:"Add entry"})),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.staticLookup.unknownKeyLabel",defaultMessage:"Value for unknown key"})},_react2.default.createElement(_eui.EuiFieldText,{value:formatParams.unknownKeyValue||"",placeholder:intl.formatMessage({id:"common.ui.fieldEditor.staticLookup.leaveBlankPlaceholder",defaultMessage:"Leave blank to keep value as-is"}),onChange:function onChange(e){_this2.onChange({unknownKeyValue:e.target.value})}})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))}}]);return StaticLookupFormatEditorComponent}(_default.DefaultFormatEditor);var StaticLookupFormatEditor=exports.StaticLookupFormatEditor=(0,_react3.injectI18n)(StaticLookupFormatEditorComponent);StaticLookupFormatEditor.formatId="static_lookup"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _string=__webpack_require__(1356);Object.defineProperty(exports,"StringFormatEditor",{enumerable:true,get:function get(){return _string.StringFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringFormatEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var StringFormatEditor=exports.StringFormatEditor=function(_DefaultFormatEditor){_inherits(StringFormatEditor,_DefaultFormatEditor);function StringFormatEditor(props){_classCallCheck(this,StringFormatEditor);var _this=_possibleConstructorReturn(this,(StringFormatEditor.__proto__||Object.getPrototypeOf(StringFormatEditor)).call(this,props));_this.state.sampleInputs=["A Quick Brown Fox.","STAY CALM!","com.organizations.project.ClassName","hostname.net","SGVsbG8gd29ybGQ="];return _this}_createClass(StringFormatEditor,[{key:"render",value:function render(){var _this2=this;var _props=this.props,format=_props.format,formatParams=_props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.string.transformLabel",defaultMessage:"Transform"}),isInvalid:!!error,error:error},_react2.default.createElement(_eui.EuiSelect,{"data-test-subj":"stringEditorTransform",defaultValue:formatParams.transform,options:format.type.transformOptions.map(function(option){return{value:option.kind,text:option.text}}),onChange:function onChange(e){_this2.onChange({transform:e.target.value})},isInvalid:!!error})),_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return StringFormatEditor}(_default.DefaultFormatEditor);StringFormatEditor.formatId="string"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _truncate=__webpack_require__(1358);Object.defineProperty(exports,"TruncateFormatEditor",{enumerable:true,get:function get(){return _truncate.TruncateFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateFormatEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _sample=__webpack_require__(1359);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TruncateFormatEditor=exports.TruncateFormatEditor=function(_DefaultFormatEditor){_inherits(TruncateFormatEditor,_DefaultFormatEditor);function TruncateFormatEditor(props){_classCallCheck(this,TruncateFormatEditor);var _this=_possibleConstructorReturn(this,(TruncateFormatEditor.__proto__||Object.getPrototypeOf(TruncateFormatEditor)).call(this,props));_this.state.sampleInputs=[_sample.sample];return _this}_createClass(TruncateFormatEditor,[{key:"render",value:function render(){var _this2=this;var formatParams=this.props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.truncate.lengthLabel",defaultMessage:"Field length"}),isInvalid:!!error,error:error},_react2.default.createElement(_eui.EuiFieldNumber,{defaultValue:formatParams.fieldLength,onChange:function onChange(e){_this2.onChange({fieldLength:e.target.value?Number(e.target.value):null})},isInvalid:!!error})),_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples}))}}]);return TruncateFormatEditor}(_default.DefaultFormatEditor);TruncateFormatEditor.formatId="truncate"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var sample=exports.sample="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae sem consequat, sollicitudin enim a, feugiat mi. Curabitur congue laoreet elit, eu dictum nisi commodo ut. Nullam congue sem a blandit commodo. Suspendisse eleifend sodales leo ac hendrerit. Nam fringilla tempor fermentum. Ut tristique pharetra sapien sit amet pharetra. Ut turpis massa, viverra id erat quis, fringilla vehicula risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus tincidunt gravida gravida. Praesent et ligula viverra, semper lacus in, tristique elit. Cras ac eleifend diam. Nulla facilisi. Morbi id sagittis magna. Sed fringilla, magna in suscipit aliquet."},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlFormatEditor=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _default=__webpack_require__(67);var _samples=__webpack_require__(90);var _label_template_flyout=__webpack_require__(1361);var _url_template_flyout=__webpack_require__(1362);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);__webpack_require__(1363);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var UrlFormatEditor=exports.UrlFormatEditor=function(_DefaultFormatEditor){_inherits(UrlFormatEditor,_DefaultFormatEditor);function UrlFormatEditor(props){_classCallCheck(this,UrlFormatEditor);var _this=_possibleConstructorReturn(this,(UrlFormatEditor.__proto__||Object.getPrototypeOf(UrlFormatEditor)).call(this,props));_this.onTypeChange=function(newType){var urlTemplate=_this.props.formatParams.urlTemplate;if(newType==="img"&&!urlTemplate){_this.onChange({type:newType,urlTemplate:_this.iconPattern})}else if(newType!=="img"&&urlTemplate===_this.iconPattern){_this.onChange({type:newType,urlTemplate:null})}else{_this.onChange({type:newType})}};_this.showUrlTemplateHelp=function(){_this.setState({showLabelTemplateHelp:false,showUrlTemplateHelp:true})};_this.hideUrlTemplateHelp=function(){_this.setState({showUrlTemplateHelp:false})};_this.showLabelTemplateHelp=function(){_this.setState({showLabelTemplateHelp:true,showUrlTemplateHelp:false})};_this.hideLabelTemplateHelp=function(){_this.setState({showLabelTemplateHelp:false})};var bp=_chrome2.default.getBasePath();_this.iconPattern=bp+"/bundles/src/ui/public/field_editor/components/field_format_editor/editors/url/icons/{{value}}.png";_this.state=_extends({},_this.state,{sampleInputsByType:{a:["john","/some/pathname/asset.png",1234],img:["go","stop",["de","ne","us","ni"],"cv"],audio:["hello.mp3"]},sampleConverterType:"html",showUrlTemplateHelp:false,showLabelTemplateHelp:false});return _this}_createClass(UrlFormatEditor,[{key:"render",value:function render(){var _this2=this;var _props=this.props,format=_props.format,formatParams=_props.formatParams;var _state=this.state,error=_state.error,samples=_state.samples,sampleConverterType=_state.sampleConverterType;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_label_template_flyout.LabelTemplateFlyout,{isVisible:this.state.showLabelTemplateHelp,onClose:this.hideLabelTemplateHelp}),_react2.default.createElement(_url_template_flyout.UrlTemplateFlyout,{isVisible:this.state.showUrlTemplateHelp,onClose:this.hideUrlTemplateHelp}),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.typeLabel",defaultMessage:"Type"})},_react2.default.createElement(_eui.EuiSelect,{"data-test-subj":"urlEditorType",value:formatParams.type,options:format.type.urlTypes.map(function(type){return{value:type.kind,text:type.text}}),onChange:function onChange(e){_this2.onTypeChange(e.target.value)}})),formatParams.type==="a"?_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.openTabLabel",defaultMessage:"Open in a new tab"})},_react2.default.createElement(_eui.EuiSwitch,{label:formatParams.openLinkInCurrentTab?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.offLabel",defaultMessage:"Off"}):_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.onLabel",defaultMessage:"On"}),checked:!formatParams.openLinkInCurrentTab,onChange:function onChange(e){_this2.onChange({openLinkInCurrentTab:!e.target.checked})}})):null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.urlTemplateLabel",defaultMessage:"URL template"}),helpText:_react2.default.createElement(_eui.EuiLink,{onClick:this.showUrlTemplateHelp},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.template.helpLinkText",defaultMessage:"URL template help"})),isInvalid:!!error,error:error},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"urlEditorUrlTemplate",value:formatParams.urlTemplate||"",onChange:function onChange(e){_this2.onChange({urlTemplate:e.target.value})}})),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.labelTemplateLabel",defaultMessage:"Label template"}),helpText:_react2.default.createElement(_eui.EuiLink,{onClick:this.showLabelTemplateHelp},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.url.labelTemplateHelpText",defaultMessage:"Label template help"})),isInvalid:!!error,error:error},_react2.default.createElement(_eui.EuiFieldText,{"data-test-subj":"urlEditorLabelTemplate",value:formatParams.labelTemplate||"",onChange:function onChange(e){_this2.onChange({labelTemplate:e.target.value})}})),_react2.default.createElement(_samples.FormatEditorSamples,{samples:samples,sampleType:sampleConverterType}))}}]);return UrlFormatEditor}(_default.DefaultFormatEditor);UrlFormatEditor.formatId="url"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LabelTemplateFlyout=exports.LabelTemplateFlyoutComponent=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LabelTemplateFlyoutComponent=exports.LabelTemplateFlyoutComponent=function LabelTemplateFlyoutComponent(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===undefined?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===undefined?function(){}:_ref$onClose,intl=_ref.intl;return isVisible?_react2.default.createElement(_eui.EuiFlyout,{onClose:onClose},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplateHeader",defaultMessage:"Label Template"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplateLabel",defaultMessage:"If the URL in this field is large, it might be useful to provide an alternate template for the text version of the URL. This will be displayed instead of the url, but will still link to the URL. The format is a string which uses double curly brace notation {doubleCurlyBraces} to inject values. The following values can be accessed:",values:{doubleCurlyBraces:_react2.default.createElement(_eui.EuiCode,null,"{{ }}")}})),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement(_eui.EuiCode,null,"value")," — ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.valueLabel",defaultMessage:"The fields value"})),_react2.default.createElement("li",null,_react2.default.createElement(_eui.EuiCode,null,"url")," — ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.urlLabel",defaultMessage:"The formatted URL"}))),_react2.default.createElement("h4",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.labelTemplate.examplesHeader",defaultMessage:"Examples"})),_react2.default.createElement(_eui.EuiBasicTable,{items:[{input:1234,urlTemplate:"http://company.net/profiles?user_id={{value}}",labelTemplate:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.idLabel",defaultMessage:"User #{value}"},{value:"{{value}}"}),output:'<a href="http://company.net/profiles?user_id=1234">'+intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.output.idLabel",defaultMessage:"User"})+" #1234</a>"},{input:"/assets/main.css",urlTemplate:"http://site.com{{rawValue}}",labelTemplate:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.pathLabel",defaultMessage:"View Asset"}),output:'<a href="http://site.com/assets/main.css">'+intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.example.output.pathLabel",defaultMessage:"View Asset"})+"</a>"}],columns:[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.inputHeader",defaultMessage:"Input"}),width:"160px"},{field:"urlTemplate",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.urlHeader",defaultMessage:"URL Template"})},{field:"labelTemplate",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.labelHeader",defaultMessage:"Label Template"})},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.labelTemplate.outputHeader",defaultMessage:"Output"}),render:function render(value){return _react2.default.createElement("span",{dangerouslySetInnerHTML:{__html:value}})}}]})))):null};LabelTemplateFlyoutComponent.displayName="LabelTemplateFlyout";var LabelTemplateFlyout=exports.LabelTemplateFlyout=(0,_react3.injectI18n)(LabelTemplateFlyoutComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlTemplateFlyout=exports.UrlTemplateFlyoutComponent=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UrlTemplateFlyoutComponent=exports.UrlTemplateFlyoutComponent=function UrlTemplateFlyoutComponent(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===undefined?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===undefined?function(){}:_ref$onClose,intl=_ref.intl;return isVisible?_react2.default.createElement(_eui.EuiFlyout,{onClose:onClose},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateHeader",defaultMessage:"Url Template"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateLabel.fieldDetail",defaultMessage:"If a field only contains part of a URL then a {strongUrlTemplate} can be used to format the value as a complete URL. The format is a string which uses double curly brace notation {doubleCurlyBraces} to inject values. The following values can be accessed:",values:{doubleCurlyBraces:_react2.default.createElement(_eui.EuiCode,null,"{{ }}"),strongUrlTemplate:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplateLabel.strongUrlTemplateLabel",defaultMessage:"Url Template"}))}})),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement(_eui.EuiCode,null,"value")," — ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.valueLabel",defaultMessage:"The URI-escaped value"})),_react2.default.createElement("li",null,_react2.default.createElement(_eui.EuiCode,null,"rawValue")," — ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.rawValueLabel",defaultMessage:"The unescaped value"}))),_react2.default.createElement("h4",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.urlTemplate.examplesHeader",defaultMessage:"Examples"})),_react2.default.createElement(_eui.EuiBasicTable,{items:[{input:1234,template:"http://company.net/profiles?user_id={{value}}",output:"http://company.net/profiles?user_id=1234"},{input:"users/admin",template:"http://company.net/groups?id={{value}}",output:"http://company.net/groups?id=users%2Fadmin"},{input:"/images/favicon.ico",template:"http://www.site.com{{rawValue}}",output:"http://www.site.com/images/favicon.ico"}],columns:[{field:"input",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.inputHeader",defaultMessage:"Input"}),width:"160px"},{field:"template",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.templateHeader",defaultMessage:"Template"})},{field:"output",name:intl.formatMessage({id:"common.ui.fieldEditor.urlTemplate.outputHeader",defaultMessage:"Output"})}]})))):null};UrlTemplateFlyoutComponent.displayName="UrlTemplateFlyout";var UrlTemplateFlyout=exports.UrlTemplateFlyout=(0,_react3.injectI18n)(UrlTemplateFlyoutComponent)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1364);__webpack_require__(1365);__webpack_require__(1366);__webpack_require__(1367);__webpack_require__(1368);__webpack_require__(1369);__webpack_require__(1370)},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/go.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/stop.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/de.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/ne.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/us.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/ni.png"},function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"src/ui/public/field_editor/components/field_format_editor/editors/url/icons/cv.png"},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){__webpack_require__(1376)},function(module,exports,__webpack_require__){"use strict";var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _index=__webpack_require__(1377);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(49);__webpack_require__(1627);__webpack_require__(3).get("kibana",["sense.ui.bootstrap"]);__webpack_require__(514);__webpack_require__(248);__webpack_require__(1392);__webpack_require__(1425);__webpack_require__(1428);__webpack_require__(1430);__webpack_require__(1433);_routes2.default.when("/dev_tools/console",{controller:"SenseController",template:_index2.default})},function(module,exports){module.exports='<kbn-dev-tools-app data-test-subj="console" top-nav-config="topNavController">\n  <div class="conApp">\n    <div class="conApp__editor">\n      <ul class="conApp__autoComplete" id="autocomplete"></ul>\n      <div class="conApp__editorActions" id="ConAppEditorActions">\n        <kbn-tooltip text="{{:: \'console.sendRequestButtonTooltip\' | i18n: { defaultMessage: \'click to send request\' } }}">\n          <button\n            class="conApp__editorActionButton conApp__editorActionButton--success"\n            ng-click="sendSelected()"\n            data-test-subj="send-request-button">\n            <i class="fa fa-play"></i>\n          </button>\n        </kbn-tooltip>\n        <span dropdown>\n          <button\n            id="consoleRequestOptions"\n            class="conApp__editorActionButton"\n            dropdown-toggle\n            ng-click="getDocumentation()"\n            aria-label="{{:: \'console.requestOptionsButtonAriaLabel\' | i18n: { defaultMessage: \'Request options\' } }}"\n          >\n            <span class="kuiIcon fa-wrench"></span>\n          </button>\n\n          <ul\n            class="dropdown-menu"\n            role="menu"\n            aria-labelledby="consoleRequestOptions"\n          >\n            <li role="menuitem">\n              <button\n                id="ConCopyAsCurl"\n                i18n-id="console.requestOptions.copyAsUrlButtonLabel"\n                i18n-default-message="Copy as cURL"></button>\n            </li>\n            <li role="menuitem" ng-if="documentation">\n              <button\n                ng-click="openDocumentation(documentation)"\n                i18n-id="console.requestOptions.openDocumentationButtonLabel"\n                i18n-default-message="Open documentation"></button>\n            </li>\n            <li role="menuitem">\n              <button\n                ng-click="autoIndent($event)"\n                i18n-id="console.requestOptions.autoIndentButtonLabel"\n                i18n-default-message="Auto indent"></button>\n            </li>\n          </ul>\n        </span>\n      </div>\n\n      <div class="conApp__editorContent" id="ConAppEditor" data-test-subj="request-editor">GET _search\n  {\n    "query": { "match_all": {} }\n  }</div>\n\n    </div>\n    <div class="conApp__resizer" id="ConAppResizer">&#xFE19;</div>\n    <div class="conApp__output" data-test-subj="response-editor">\n      <div class="conApp__outputContent" id="ConAppOutput">{}</div>\n    </div>\n  </div>\n</kbn-dev-tools-app>\n'},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2224)},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2160)},,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(91);var _sense_editor_resize=__webpack_require__(319);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _input=__webpack_require__(517);var _output=__webpack_require__(520);var _app=__webpack_require__(1421);var _app2=_interopRequireDefault(_app);var _sense_top_nav_controller=__webpack_require__(1422);var _autocomplete=__webpack_require__(518);var _documentation_links=__webpack_require__(50);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var _module=__webpack_require__(3).get("app/sense");_module.run(function(Private,$rootScope){_module.setupResizeCheckerForRootEditors=function($el){for(var _len=arguments.length,editors=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){editors[_key-1]=arguments[_key]}return _sense_editor_resize.useResizeChecker.apply(undefined,[$rootScope,$el].concat(editors))}});_module.controller("SenseController",function SenseController(Private,$scope,$timeout,$location,docTitle,kbnUiAceKeyboardModeService){var _this=this;docTitle.change("Console");$scope.topNavController=Private(_sense_top_nav_controller.SenseTopNavController);var input=void 0;var output=void 0;$timeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var urlParams,session;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:output=(0,_output.initializeOutput)((0,_jquery2.default)("#ConAppOutput"));input=(0,_input.initializeInput)((0,_jquery2.default)("#ConAppEditor"),(0,_jquery2.default)("#ConAppEditorActions"),(0,_jquery2.default)("#ConCopyAsCurl"),output,$scope.openDocumentation);urlParams=$location.search();if(urlParams.load_from){(0,_app2.default)(input,output,"http",urlParams.load_from)}else if(urlParams.command){(0,_app2.default)(input,output,"text",urlParams.command)}else{(0,_app2.default)(input,output)}kbnUiAceKeyboardModeService.initialize($scope,(0,_jquery2.default)("#ConAppEditor"));session=input.getSession();session.getSelection().on("changeCursor",function(){$scope.getDocumentation()});$scope.getDocumentation();case 8:case"end":return _context.stop()}}},_callee,_this)})));$scope.getDocumentation=function(){input.getRequestsInRange(function(requests){if(!requests||requests.length===0){$scope.documentation=null;$scope.$apply();return}var position=requests[0].range.end;position.column=position.column-1;var endpoint=(0,_autocomplete.getEndpointFromPosition)(input,position);if(endpoint&&endpoint.documentation&&endpoint.documentation.indexOf("http")!==-1){$scope.documentation=endpoint.documentation.replace("/master/","/"+_documentation_links.DOC_LINK_VERSION+"/");$scope.documentation=$scope.documentation.replace("/current/","/"+_documentation_links.DOC_LINK_VERSION+"/");$scope.$apply()}else{$scope.documentation=null;$scope.$apply()}})};$scope.openDocumentation=function(){if(!$scope.documentation){return}window.open($scope.documentation,"_blank")};$scope.sendSelected=function(){input.focus();input.sendCurrentRequestToES();return false};$scope.autoIndent=function(event){input.autoIndent();event.preventDefault();input.focus()}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports._test=undefined;exports.getUnmatchedEndpointComponents=getUnmatchedEndpointComponents;exports.getEndpointDescriptionByEndpoint=getEndpointDescriptionByEndpoint;exports.getEndpointBodyCompleteComponents=getEndpointBodyCompleteComponents;exports.getTopLevelUrlCompleteComponents=getTopLevelUrlCompleteComponents;exports.getGlobalAutocompleteComponents=getGlobalAutocompleteComponents;exports.setActiveApi=setActiveApi;var _components=__webpack_require__(73);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _api=__webpack_require__(1409);var _api2=_interopRequireDefault(_api);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ACTIVE_API=new _api2.default;var isNotAnIndexName=function isNotAnIndexName(name){return name[0]==="_"&&name!=="_all"};var idAutocompleteComponentFactory=function idAutocompleteComponentFactory(name,parent){return new _components.IdAutocompleteComponent(name,parent)};var parametrizedComponentFactories={getComponent:function getComponent(name,parent,provideDefault){if(this[name]){return this[name]}else if(provideDefault){return idAutocompleteComponentFactory}},index:function index(name,parent){if(isNotAnIndexName(name))return;return new _components.IndexAutocompleteComponent(name,parent,false)},indices:function indices(name,parent){if(isNotAnIndexName(name))return;return new _components.IndexAutocompleteComponent(name,parent,true)},type:function type(name,parent){return new _components.TypeAutocompleteComponent(name,parent,false)},types:function types(name,parent){return new _components.TypeAutocompleteComponent(name,parent,true)},id:function id(name,parent){return idAutocompleteComponentFactory(name,parent)},username:function username(name,parent){return new _components.UsernameAutocompleteComponent(name,parent)},user:function user(name,parent){return new _components.UsernameAutocompleteComponent(name,parent)},template:function template(name,parent){return new _components.TemplateAutocompleteComponent(name,parent)},task_id:function task_id(name,parent){return idAutocompleteComponentFactory(name,parent)},ids:function ids(name,parent){return idAutocompleteComponentFactory(name,parent,true)},fields:function fields(name,parent){return new _components.FieldAutocompleteComponent(name,parent,true)},field:function field(name,parent){return new _components.FieldAutocompleteComponent(name,parent,false)},nodes:function nodes(name,parent){return new _components.ListComponent(name,["_local","_master","data:true","data:false","master:true","master:false"],parent)},node:function node(name,parent){return new _components.ListComponent(name,[],parent,false)}};function getUnmatchedEndpointComponents(){return ACTIVE_API.getUnmatchedEndpointComponents()}function getEndpointDescriptionByEndpoint(endpoint){return ACTIVE_API.getEndpointDescriptionByEndpoint(endpoint)}function getEndpointBodyCompleteComponents(endpoint){var desc=getEndpointDescriptionByEndpoint(endpoint);if(!desc){throw new Error("failed to resolve endpoint ['"+endpoint+"']")}return desc.bodyAutocompleteRootComponents}function getTopLevelUrlCompleteComponents(method){return ACTIVE_API.getTopLevelUrlCompleteComponents(method)}function getGlobalAutocompleteComponents(term,throwOnMissing){return ACTIVE_API.getGlobalAutocompleteComponents(term,throwOnMissing)}function loadApisFromJson(json,urlParametrizedComponentFactories,bodyParametrizedComponentFactories){urlParametrizedComponentFactories=urlParametrizedComponentFactories||parametrizedComponentFactories;bodyParametrizedComponentFactories=bodyParametrizedComponentFactories||urlParametrizedComponentFactories;var api=new _api2.default(urlParametrizedComponentFactories,bodyParametrizedComponentFactories);var names=[];_lodash2.default.each(json,function(apiJson,name){names.unshift(name);_lodash2.default.each(apiJson.globals||{},function(globalJson,globalName){api.addGlobalAutocompleteRules(globalName,globalJson)});_lodash2.default.each(apiJson.endpoints||{},function(endpointJson,endpointName){api.addEndpointDescription(endpointName,endpointJson)})});api.name=names.join(",");return api}function setActiveApi(api){if(_lodash2.default.isString(api)){_jquery2.default.ajax({url:"../api/console/api_server?sense_version="+encodeURIComponent("@@SENSE_VERSION")+"&apis="+encodeURIComponent(api),dataType:"json"}).then(function(data){setActiveApi(loadApisFromJson(data))},function(jqXHR){console.log("failed to load API '"+api+"': "+jqXHR.responseText)});return}ACTIVE_API=api}setActiveApi("es_6_0");var _test=exports._test={loadApisFromJson:loadApisFromJson}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConstantComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _shared_component=__webpack_require__(68);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ConstantComponent=exports.ConstantComponent=function(_SharedComponent){_inherits(ConstantComponent,_SharedComponent);function ConstantComponent(name,parent,options){_classCallCheck(this,ConstantComponent);var _this=_possibleConstructorReturn(this,(ConstantComponent.__proto__||Object.getPrototypeOf(ConstantComponent)).call(this,name,parent));if(_lodash2.default.isString(options)){options=[options]}_this.options=options||[name];return _this}_createClass(ConstantComponent,[{key:"getTerms",value:function getTerms(){return this.options}},{key:"addOption",value:function addOption(options){if(!Array.isArray(options)){options=[options]}[].push.apply(this.options,options);this.options=_lodash2.default.uniq(this.options)}},{key:"match",value:function match(token,context,editor){if(token!==this.name){return null}return _get(ConstantComponent.prototype.__proto__||Object.getPrototypeOf(ConstantComponent.prototype),"match",this).call(this,token,context,editor)}}]);return ConstantComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleParamComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _shared_component=__webpack_require__(68);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SimpleParamComponent=exports.SimpleParamComponent=function(_SharedComponent){_inherits(SimpleParamComponent,_SharedComponent);function SimpleParamComponent(name,parent){_classCallCheck(this,SimpleParamComponent);return _possibleConstructorReturn(this,(SimpleParamComponent.__proto__||Object.getPrototypeOf(SimpleParamComponent)).call(this,name,parent))}_createClass(SimpleParamComponent,[{key:"match",value:function match(token,context,editor){var result=_get(SimpleParamComponent.prototype.__proto__||Object.getPrototypeOf(SimpleParamComponent.prototype),"match",this).call(this,token,context,editor);result.context_values=result.context_values||{};result.context_values[this.name]=token;return result}}]);return SimpleParamComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConditionalProxy=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _shared_component=__webpack_require__(68);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ConditionalProxy=exports.ConditionalProxy=function(_SharedComponent){_inherits(ConditionalProxy,_SharedComponent);function ConditionalProxy(predicate,delegate){_classCallCheck(this,ConditionalProxy);var _this=_possibleConstructorReturn(this,(ConditionalProxy.__proto__||Object.getPrototypeOf(ConditionalProxy)).call(this,"__condition"));_this.predicate=predicate;_this.delegate=delegate;return _this}_createClass(ConditionalProxy,[{key:"getTerms",value:function getTerms(context,editor){if(this.predicate(context,editor)){return this.delegate.getTerms(context,editor)}else{return null}}},{key:"match",value:function match(token,context,editor){if(this.predicate(context,editor)){return this.delegate.match(token,context,editor)}else{return false}}}]);return ConditionalProxy}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalOnlyComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _shared_component=__webpack_require__(68);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GlobalOnlyComponent=exports.GlobalOnlyComponent=function(_SharedComponent){_inherits(GlobalOnlyComponent,_SharedComponent);function GlobalOnlyComponent(){_classCallCheck(this,GlobalOnlyComponent);return _possibleConstructorReturn(this,(GlobalOnlyComponent.__proto__||Object.getPrototypeOf(GlobalOnlyComponent)).apply(this,arguments))}_createClass(GlobalOnlyComponent,[{key:"getTerms",value:function getTerms(){return null}},{key:"match",value:function match(token,context){var result={next:[]};var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}result.next=[this];return result}}]);return GlobalOnlyComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _2=__webpack_require__(73);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ObjectComponent=exports.ObjectComponent=function(_SharedComponent){_inherits(ObjectComponent,_SharedComponent);function ObjectComponent(name,constants,patternsAndWildCards){_classCallCheck(this,ObjectComponent);var _this=_possibleConstructorReturn(this,(ObjectComponent.__proto__||Object.getPrototypeOf(ObjectComponent)).call(this,name));_this.constants=constants;_this.patternsAndWildCards=patternsAndWildCards;return _this}_createClass(ObjectComponent,[{key:"getTerms",value:function getTerms(context,editor){var options=[];_lodash2.default.each(this.constants,function(component){options.push.apply(options,component.getTerms(context,editor))});_lodash2.default.each(this.patternsAndWildCards,function(component){options.push.apply(options,component.getTerms(context,editor))});return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};_lodash2.default.each(this.constants,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});var globalRules=context.globalComponentResolver(token,false);if(globalRules){result.next.push.apply(result.next,globalRules)}if(result.next.length){return result}_lodash2.default.each(this.patternsAndWildCards,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});return result}}]);return ObjectComponent}(_2.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AcceptEndpointComponent=exports.URL_PATH_END_MARKER=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _shared_component=__webpack_require__(68);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var URL_PATH_END_MARKER=exports.URL_PATH_END_MARKER="__url_path_end__";var AcceptEndpointComponent=exports.AcceptEndpointComponent=function(_SharedComponent){_inherits(AcceptEndpointComponent,_SharedComponent);function AcceptEndpointComponent(endpoint,parent){_classCallCheck(this,AcceptEndpointComponent);var _this=_possibleConstructorReturn(this,(AcceptEndpointComponent.__proto__||Object.getPrototypeOf(AcceptEndpointComponent)).call(this,endpoint.id,parent));_this.endpoint=endpoint;return _this}_createClass(AcceptEndpointComponent,[{key:"match",value:function match(token,context,editor){if(token!==URL_PATH_END_MARKER){return null}if(this.endpoint.methods&&-1===_lodash2.default.indexOf(this.endpoint.methods,context.method)){return null}var r=_get(AcceptEndpointComponent.prototype.__proto__||Object.getPrototypeOf(AcceptEndpointComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.endpoint=this.endpoint;if(_lodash2.default.isNumber(this.endpoint.priority)){r.priority=this.endpoint.priority}return r}}]);return AcceptEndpointComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPatternMatcher=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _2=__webpack_require__(73);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var UrlPatternMatcher=exports.UrlPatternMatcher=function(){function UrlPatternMatcher(parametrizedComponentFactories){var _this=this;_classCallCheck(this,UrlPatternMatcher);this.getTopLevelComponents=function(method){var methodRoot=this[method];if(!methodRoot){return[]}return methodRoot.rootComponent.next};["HEAD","GET","PUT","POST","DELETE"].forEach(function(method){_this[method]={rootComponent:new _2.SharedComponent("ROOT"),parametrizedComponentFactories:parametrizedComponentFactories||{getComponent:function getComponent(){}}}})}_createClass(UrlPatternMatcher,[{key:"addEndpoint",value:function addEndpoint(pattern,endpoint){var _this2=this;endpoint.methods.forEach(function(method){var c=void 0;var activeComponent=_this2[method].rootComponent;var endpointComponents=endpoint.url_components||{};var partList=pattern.split("/");_lodash2.default.each(partList,function(part,partIndex){if(part.search(/^{.+}$/)>=0){part=part.substr(1,part.length-2);if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);return}if(c=endpointComponents[part]){if(Array.isArray(c)){c=new _2.ListComponent(part,c,activeComponent)}else if(_lodash2.default.isObject(c)&&c.type==="list"){c=new _2.ListComponent(part,c.list,activeComponent,c.multiValued,c.allow_non_valid)}else{console.warn("incorrectly configured url component ",part," in endpoint",endpoint);c=new _2.SharedComponent(part)}}else if(c=this[method].parametrizedComponentFactories.getComponent(part)){c=c(part,activeComponent)}else{c=new _2.SimpleParamComponent(part,activeComponent)}activeComponent=c}else{var lookAhead=part;var s=void 0;for(partIndex++;partIndex<partList.length;partIndex++){s=partList[partIndex];if(s.indexOf("{")>=0){break}lookAhead+="/"+s}if(activeComponent.getComponent(part)){activeComponent=activeComponent.getComponent(part);activeComponent.addOption(lookAhead)}else{c=new _2.ConstantComponent(part,activeComponent,lookAhead);activeComponent=c}}},_this2);new _2.AcceptEndpointComponent(endpoint,activeComponent)})}}]);return UrlPatternMatcher}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _mappings=__webpack_require__(93);var _mappings2=_interopRequireDefault(_mappings);var _list_component=__webpack_require__(92);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var IndexAutocompleteComponent=exports.IndexAutocompleteComponent=function(_ListComponent){_inherits(IndexAutocompleteComponent,_ListComponent);function IndexAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,IndexAutocompleteComponent);return _possibleConstructorReturn(this,(IndexAutocompleteComponent.__proto__||Object.getPrototypeOf(IndexAutocompleteComponent)).call(this,name,_mappings2.default.getIndices,parent,multiValued))}_createClass(IndexAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash2.default.find(tokens,nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"index"}},{key:"getContextKey",value:function getContextKey(){return"indices"}}]);return IndexAutocompleteComponent}(_list_component.ListComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mode=Mode;var ace=__webpack_require__(49);__webpack_require__(521);var oop=ace.acequire("ace/lib/oop");var JSONMode=ace.acequire("ace/mode/json").Mode;var HighlightRules=__webpack_require__(521).OutputJsonHighlightRules;var MatchingBraceOutdent=ace.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=ace.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=ace.acequire("ace/mode/folding/cstyle").FoldMode;ace.acequire("ace/worker/worker_client");var AceTokenizer=ace.acequire("ace/tokenizer").Tokenizer;function Mode(){this.$tokenizer=new AceTokenizer((new HighlightRules).getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(Mode,JSONMode);(function(){this.createWorker=function(){return null};this.$id="sense/mode/input"}).call(Mode.prototype)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2008)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _mappings=__webpack_require__(93);var _mappings2=_interopRequireDefault(_mappings);var _list_component=__webpack_require__(92);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function FieldGenerator(context){return _lodash2.default.map(_mappings2.default.getFields(context.indices,context.types),function(field){return{name:field.name,meta:field.type}})}var FieldAutocompleteComponent=exports.FieldAutocompleteComponent=function(_ListComponent){_inherits(FieldAutocompleteComponent,_ListComponent);function FieldAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,FieldAutocompleteComponent);return _possibleConstructorReturn(this,(FieldAutocompleteComponent.__proto__||Object.getPrototypeOf(FieldAutocompleteComponent)).call(this,name,FieldGenerator,parent,multiValued))}_createClass(FieldAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash2.default.find(tokens,function(token){return token.match(/[^\w.?*]/)})}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"field"}},{key:"getContextKey",value:function getContextKey(){return"fields"}}]);return FieldAutocompleteComponent}(_list_component.ListComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _list_component=__webpack_require__(92);var _mappings=__webpack_require__(93);var _mappings2=_interopRequireDefault(_mappings);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function TypeGenerator(context){return _mappings2.default.getTypes(context.indices)}function nonValidIndexType(token){return!(token==="_all"||token[0]!=="_")}var TypeAutocompleteComponent=exports.TypeAutocompleteComponent=function(_ListComponent){_inherits(TypeAutocompleteComponent,_ListComponent);function TypeAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,TypeAutocompleteComponent);return _possibleConstructorReturn(this,(TypeAutocompleteComponent.__proto__||Object.getPrototypeOf(TypeAutocompleteComponent)).call(this,name,TypeGenerator,parent,multiValued))}_createClass(TypeAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash2.default.find(tokens,nonValidIndexType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"type"}},{key:"getContextKey",value:function getContextKey(){return"types"}}]);return TypeAutocompleteComponent}(_list_component.ListComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IdAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _shared_component=__webpack_require__(68);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var IdAutocompleteComponent=exports.IdAutocompleteComponent=function(_SharedComponent){_inherits(IdAutocompleteComponent,_SharedComponent);function IdAutocompleteComponent(name,parent,multi){_classCallCheck(this,IdAutocompleteComponent);var _this=_possibleConstructorReturn(this,(IdAutocompleteComponent.__proto__||Object.getPrototypeOf(IdAutocompleteComponent)).call(this,name,parent));_this.multi_match=multi;return _this}_createClass(IdAutocompleteComponent,[{key:"match",value:function match(token,context,editor){if(!token){return null}if(!this.multi_match&&Array.isArray(token)){return null}token=Array.isArray(token)?token:[token];if(_lodash2.default.find(token,function(t){return t.match(/[\/,]/)})){return null}var r=_get(IdAutocompleteComponent.prototype.__proto__||Object.getPrototypeOf(IdAutocompleteComponent.prototype),"match",this).call(this,token,context,editor);r.context_values=r.context_values||{};r.context_values.id=token;return r}}]);return IdAutocompleteComponent}(_shared_component.SharedComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TemplateAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _mappings=__webpack_require__(93);var _mappings2=_interopRequireDefault(_mappings);var _list_component=__webpack_require__(92);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TemplateAutocompleteComponent=exports.TemplateAutocompleteComponent=function(_ListComponent){_inherits(TemplateAutocompleteComponent,_ListComponent);function TemplateAutocompleteComponent(name,parent){_classCallCheck(this,TemplateAutocompleteComponent);return _possibleConstructorReturn(this,(TemplateAutocompleteComponent.__proto__||Object.getPrototypeOf(TemplateAutocompleteComponent)).call(this,name,_mappings2.default.getTemplates,parent))}_createClass(TemplateAutocompleteComponent,[{key:"getContextKey",value:function getContextKey(){return"template"}}]);return TemplateAutocompleteComponent}(_list_component.ListComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UsernameAutocompleteComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _mappings=__webpack_require__(93);var _mappings2=_interopRequireDefault(_mappings);var _list_component=__webpack_require__(92);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function nonValidUsernameType(token){return token[0]==="_"}var UsernameAutocompleteComponent=exports.UsernameAutocompleteComponent=function(_ListComponent){_inherits(UsernameAutocompleteComponent,_ListComponent);function UsernameAutocompleteComponent(name,parent,multiValued){_classCallCheck(this,UsernameAutocompleteComponent);return _possibleConstructorReturn(this,(UsernameAutocompleteComponent.__proto__||Object.getPrototypeOf(UsernameAutocompleteComponent)).call(this,name,_mappings2.default.getIndices,parent,multiValued))}_createClass(UsernameAutocompleteComponent,[{key:"validateTokens",value:function validateTokens(tokens){if(!this.multiValued&&tokens.length>1){return false}return!_lodash2.default.find(tokens,nonValidUsernameType)}},{key:"getDefaultTermMeta",value:function getDefaultTermMeta(){return"username"}},{key:"getContextKey",value:function getContextKey(){return"username"}}]);return UsernameAutocompleteComponent}(_list_component.ListComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _components=__webpack_require__(73);var _url_params=__webpack_require__(1410);var _body_completer=__webpack_require__(1411);var _=__webpack_require__(0);function Api(urlParametrizedComponentFactories,bodyParametrizedComponentFactories){this.globalRules={};this.endpoints={};this.urlPatternMatcher=new _components.UrlPatternMatcher(urlParametrizedComponentFactories);this.globalBodyComponentFactories=bodyParametrizedComponentFactories;this.name=""}(function(cls){cls.addGlobalAutocompleteRules=function(parentNode,rules){this.globalRules[parentNode]=(0,_body_completer.compileBodyDescription)("GLOBAL."+parentNode,rules,this.globalBodyComponentFactories)};cls.getGlobalAutocompleteComponents=function(term,throwOnMissing){var result=this.globalRules[term];if(_.isUndefined(result)&&(throwOnMissing||_.isUndefined(throwOnMissing))){throw new Error("failed to resolve global components for  ['"+term+"']")}return result};cls.addEndpointDescription=function(endpoint,description){var copiedDescription={};_.extend(copiedDescription,description||{});_.defaults(copiedDescription,{id:endpoint,patterns:[endpoint],methods:["GET"]});_.each(copiedDescription.patterns,function(p){this.urlPatternMatcher.addEndpoint(p,copiedDescription)},this);copiedDescription.paramsAutocomplete=new _url_params.UrlParams(copiedDescription.url_params);copiedDescription.bodyAutocompleteRootComponents=(0,_body_completer.compileBodyDescription)(copiedDescription.id,copiedDescription.data_autocomplete_rules,this.globalBodyComponentFactories);this.endpoints[endpoint]=copiedDescription};cls.getEndpointDescriptionByEndpoint=function(endpoint){return this.endpoints[endpoint]};cls.getTopLevelUrlCompleteComponents=function(method){return this.urlPatternMatcher.getTopLevelComponents(method)};cls.getUnmatchedEndpointComponents=function(){return(0,_body_completer.globalsOnlyAutocompleteComponents)()};cls.clear=function(){this.endpoints={};this.globalRules={}}})(Api.prototype);exports.default=Api;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlParams=exports.ParamComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _components=__webpack_require__(73);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _=__webpack_require__(0);var ParamComponent=exports.ParamComponent=function(_ConstantComponent){_inherits(ParamComponent,_ConstantComponent);function ParamComponent(name,parent,description){_classCallCheck(this,ParamComponent);var _this=_possibleConstructorReturn(this,(ParamComponent.__proto__||Object.getPrototypeOf(ParamComponent)).call(this,name,parent));_this.description=description;return _this}_createClass(ParamComponent,[{key:"getTerms",value:function getTerms(){var t={name:this.name};if(this.description==="__flag__"){t.meta="flag"}else{t.meta="param";t.insertValue=this.name+"="}return[t]}}]);return ParamComponent}(_components.ConstantComponent);var UrlParams=exports.UrlParams=function(){function UrlParams(description,defaults){_classCallCheck(this,UrlParams);this.rootComponent=new _components.SharedComponent("ROOT");if(_.isUndefined(defaults)){defaults={pretty:"__flag__",format:["json","yaml"],filter_path:""}}description=_.clone(description||{});_.defaults(description,defaults);_.each(description,function(pDescription,param){var component=new ParamComponent(param,this.rootComponent,pDescription);if(Array.isArray(pDescription)){new _components.ListComponent(param,pDescription,component)}else if(pDescription==="__flag__"){new _components.ListComponent(param,["true","false"],component)}},this)}_createClass(UrlParams,[{key:"getTopLevelComponents",value:function getTopLevelComponents(){return this.rootComponent.next}}]);return UrlParams}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.globalsOnlyAutocompleteComponents=globalsOnlyAutocompleteComponents;exports.compileBodyDescription=compileBodyDescription;var _engine=__webpack_require__(525);var _components=__webpack_require__(73);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _=__webpack_require__(0);function CompilingContext(endpointId,parametrizedComponentFactories){this.parametrizedComponentFactories=parametrizedComponentFactories;this.endpointId=endpointId}function resolvePathToComponents(tokenPath,context,editor,components){var walkStates=(0,_engine.walkTokenPath)(tokenPath,[new _engine.WalkingState("ROOT",components,[])],context,editor);var result=[].concat.apply([],_.pluck(walkStates,"components"));return result}var ScopeResolver=function(_SharedComponent){_inherits(ScopeResolver,_SharedComponent);function ScopeResolver(link,compilingContext){_classCallCheck(this,ScopeResolver);var _this=_possibleConstructorReturn(this,(ScopeResolver.__proto__||Object.getPrototypeOf(ScopeResolver)).call(this,"__scope_link"));if(_.isString(link)&&link[0]==="."){if(link==="."){link=compilingContext.endpointId}else{link=compilingContext.endpointId+link}}_this.link=link;_this.compilingContext=compilingContext;return _this}_createClass(ScopeResolver,[{key:"resolveLinkToComponents",value:function resolveLinkToComponents(context,editor){if(_.isFunction(this.link)){var desc=this.link(context,editor);return compileDescription(desc,this.compilingContext)}if(!_.isString(this.link)){throw new Error("unsupported link format",this.link)}var path=this.link.replace(/\./g,"{").split(/(\{)/);var endpoint=path[0];var components=void 0;try{if(endpoint==="GLOBAL"){if(path.length<3){throw new Error("missing term in global link: "+this.link)}var term=path[2];components=context.globalComponentResolver(term);path=path.slice(3)}else{path=path.slice(1);components=context.endpointComponentResolver(endpoint)}}catch(e){throw new Error("failed to resolve link ["+this.link+"]: "+e)}return resolvePathToComponents(path,context,editor,components)}},{key:"getTerms",value:function getTerms(context,editor){var options=[];var components=this.resolveLinkToComponents(context,editor);_.each(components,function(component){options.push.apply(options,component.getTerms(context,editor))});return options}},{key:"match",value:function match(token,context,editor){var result={next:[]};var components=this.resolveLinkToComponents(context,editor);_.each(components,function(component){var componentResult=component.match(token,context,editor);if(componentResult&&componentResult.next){result.next.push.apply(result.next,componentResult.next)}});return result}}]);return ScopeResolver}(_components.SharedComponent);function getTemplate(description){if(description.__template){return description.__template}else if(description.__one_of){return getTemplate(description.__one_of[0])}else if(description.__any_of){return[]}else if(description.__scope_link){return{}}else if(Array.isArray(description)){if(description.length===1){if(_.isObject(description[0])){var innerTemplate=getTemplate(description[0]);return innerTemplate!=null?[innerTemplate]:[]}}return[]}else if(_.isObject(description)){return{}}else if(_.isString(description)&&!/^\{.*\}$/.test(description)){return description}else{return description}}function getOptions(description){var options={};var template=getTemplate(description);if(!_.isUndefined(template)){options.template=template}return options}function compileDescription(description,compilingContext){if(Array.isArray(description)){return[compileList(description,compilingContext)]}else if(_.isObject(description)){if(description.__scope_link){return[new ScopeResolver(description.__scope_link,compilingContext)]}if(description.__any_of){return[compileList(description.__any_of,compilingContext)]}if(description.__one_of){return _.flatten(_.map(description.__one_of,function(d){return compileDescription(d,compilingContext)}))}var obj=compileObject(description,compilingContext);if(description.__condition){return[compileCondition(description.__condition,obj,compilingContext)]}else{return[obj]}}else if(_.isString(description)&&/^\{.*\}$/.test(description)){return[compileParametrizedValue(description,compilingContext)]}else{return[new _components.ConstantComponent(description)]}}function compileParametrizedValue(value,compilingContext,template){value=value.substr(1,value.length-2).toLowerCase();var component=compilingContext.parametrizedComponentFactories.getComponent(value,true);if(!component){throw new Error("no factory found for '"+value+"'")}component=component(value,null,template);if(!_.isUndefined(template)){component=(0,_engine.wrapComponentWithDefaults)(component,{template:template})}return component}function compileObject(objDescription,compilingContext){var objectC=new _components.ConstantComponent("{");var constants=[];var patterns=[];_.each(objDescription,function(desc,key){if(key.indexOf("__")===0){return}var options=getOptions(desc);var component=void 0;if(/^\{.*\}$/.test(key)){component=compileParametrizedValue(key,compilingContext,options.template);patterns.push(component)}else if(key==="*"){component=new _components.SharedComponent(key);patterns.push(component)}else{options.name=key;component=new _components.ConstantComponent(key,null,[options]);constants.push(component)}_.map(compileDescription(desc,compilingContext),function(subComponent){component.addComponent(subComponent)})});objectC.addComponent(new _components.ObjectComponent("inner",constants,patterns));return objectC}function compileList(listRule,compilingContext){var listC=new _components.ConstantComponent("[");_.each(listRule,function(desc){_.each(compileDescription(desc,compilingContext),function(component){listC.addComponent(component)})});return listC}function compileCondition(description,compiledObject){if(description.lines_regex){return new _components.ConditionalProxy(function(context,editor){var lines=editor.getSession().getLines(context.requestStartRow,editor.getCursorPosition().row).join("\n");return new RegExp(description.lines_regex,"m").test(lines)},compiledObject)}else{throw"unknown condition type - got: "+JSON.stringify(description)}}function globalsOnlyAutocompleteComponents(){return[new _components.GlobalOnlyComponent("__global__")]}function compileBodyDescription(endpointId,description,parametrizedComponentFactories){return compileDescription(description,new CompilingContext(endpointId,parametrizedComponentFactories))}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.detectCURL=detectCURL;exports.parseCURL=parseCURL;function detectCURLinLine(line){return line.match(/^\s*?curl\s+(-X[A-Z]+)?\s*['"]?.*?['"]?(\s*$|\s+?-d\s*?['"])/)}function detectCURL(text){if(!text)return false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=text.split("\n")[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var line=_step.value;if(detectCURLinLine(line)){return true}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return false}function parseCURL(text){var state="NONE";var out=[];var body=[];var line="";var lines=text.trim().split("\n");var matches=void 0;var EmptyLine=/^\s*$/;var Comment=/^\s*(?:#|\/{2,})(.*)\n?$/;var ExecutionComment=/^\s*#!/;var ClosingSingleQuote=/^([^']*)'/;var ClosingDoubleQuote=/^((?:[^\\"]|\\.)*)"/;var EscapedQuotes=/^((?:[^\\"']|\\.)+)/;var LooksLikeCurl=/^\s*curl\s+/;var CurlVerb=/-X ?(GET|HEAD|POST|PUT|DELETE)/;var HasProtocol=/[\s"']https?:\/\//;var CurlRequestWithProto=/[\s"']https?:\/\/[^\/ ]+\/+([^\s"']+)/;var CurlRequestWithoutProto=/[\s"'][^\/ ]+\/+([^\s"']+)/;var CurlData=/^.+\s(--data|-d)\s*/;var SenseLine=/^\s*(GET|HEAD|POST|PUT|DELETE)\s+\/?(.+)/;if(lines.length>0&&ExecutionComment.test(lines[0])){lines.shift()}function nextLine(){if(line.length>0){return true}if(lines.length===0){return false}line=lines.shift().replace(/[\r\n]+/g,"\n")+"\n";return true}function unescapeLastBodyEl(){var str=body.pop().replace(/\\([\\"'])/g,"$1");body.push(str)}function detectQuote(){if(line.substr(0,1)==="'"){line=line.substr(1);state="SINGLE_QUOTE"}else if(line.substr(0,1)==='"'){line=line.substr(1);state="DOUBLE_QUOTE"}else{state="UNQUOTED"}}function addBodyToOut(){if(body.length>0){out.push(body.join(""));body=[]}state="LF";out.push("\n")}function consumeMatching(pattern){var matches=line.match(pattern);if(matches){body.push(matches[1]);line=line.substr(matches[0].length);detectQuote()}else{body.push(line);line=""}}function parseCurlLine(){var verb="GET";var request="";var matches=void 0;if(matches=line.match(CurlVerb)){verb=matches[1]}var pattern=HasProtocol.test(line)?CurlRequestWithProto:CurlRequestWithoutProto;if(matches=line.match(pattern)){request=matches[1]}out.push(verb+" /"+request+"\n");if(matches=line.match(CurlData)){line=line.substr(matches[0].length);detectQuote();if(EmptyLine.test(line)){line=""}}else{state="NONE";line="";out.push("")}}while(nextLine()){if(state==="SINGLE_QUOTE"){consumeMatching(ClosingSingleQuote)}else if(state==="DOUBLE_QUOTE"){consumeMatching(ClosingDoubleQuote);unescapeLastBodyEl()}else if(state==="UNQUOTED"){consumeMatching(EscapedQuotes);if(body.length){unescapeLastBodyEl()}if(state==="UNQUOTED"){addBodyToOut();line=""}}else if(state==="BODY"){if(Comment.test(line)||EmptyLine.test(line)){addBodyToOut()}else{body.push(line);line=""}}else if(EmptyLine.test(line)){if(state!=="LF"){out.push("\n");state="LF"}line=""}else if(matches=line.match(Comment)){out.push("#"+matches[1]+"\n");state="NONE";line=""}else if(LooksLikeCurl.test(line)){parseCurlLine()}else if(matches=line.match(SenseLine)){out.push(matches[1]+" /"+matches[2]+"\n");line="";state="BODY"}else{out.push("### "+line);line=""}}addBodyToOut();return out.join("").trim()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MODE={REQUEST_START:2,IN_REQUEST:4,MULTI_DOC_CUR_DOC_END:8,REQUEST_END:16,BETWEEN_REQUESTS:32};function RowParser(editor){var defaultEditor=editor;this.getRowParseMode=function(row){if(row===null||typeof row==="undefined"){row=editor.getCursorPosition().row}var session=editor.getSession();if(row>=session.getLength()||row<0){return MODE.BETWEEN_REQUESTS}var mode=session.getState(row);if(!mode){return MODE.BETWEEN_REQUESTS}if(mode!=="start"){return MODE.IN_REQUEST}var line=(session.getLine(row)||"").trim();if(!line||line[0]==="#"){return MODE.BETWEEN_REQUESTS}if(line.indexOf("}",line.length-1)>=0){row++;if(row<session.getLength()){line=(session.getLine(row)||"").trim();if(line.indexOf("{")===0){return MODE.MULTI_DOC_CUR_DOC_END|MODE.IN_REQUEST}}return MODE.REQUEST_END|MODE.MULTI_DOC_CUR_DOC_END}row++;if(row>=session.getLength()){return MODE.REQUEST_START|MODE.REQUEST_END}line=(session.getLine(row)||"").trim();if(line.indexOf("{")!==0){return MODE.REQUEST_START|MODE.REQUEST_END}return MODE.REQUEST_START};this.rowPredicate=function(row,editor,value){var mode=this.getRowParseMode(row,editor);return(mode&value)>0};this.isEndRequestRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_END)};this.isRequestEdge=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_END|MODE.REQUEST_START)};this.isStartRequestRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.REQUEST_START)};this.isInBetweenRequestsRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.BETWEEN_REQUESTS)};this.isInRequestsRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.IN_REQUEST)};this.isMultiDocDocEndRow=function(row,_e){var editor=_e||defaultEditor;return this.rowPredicate(row,editor,MODE.MULTI_DOC_CUR_DOC_END)};this.isEmptyToken=function(tokenOrTokenIter){var token=tokenOrTokenIter&&tokenOrTokenIter.getCurrentToken?tokenOrTokenIter.getCurrentToken():tokenOrTokenIter;return!token||token.type==="whitespace"};this.isUrlOrMethodToken=function(tokenOrTokenIter){var t=tokenOrTokenIter.getCurrentToken?tokenOrTokenIter.getCurrentToken():tokenOrTokenIter;return t&&t.type&&(t.type==="method"||t.type.indexOf("url")===0)};this.nextNonEmptyToken=function(tokenIter){var t=tokenIter.stepForward();while(t&&this.isEmptyToken(t)){t=tokenIter.stepForward()}return t};this.prevNonEmptyToken=function(tokenIter){var t=tokenIter.stepBackward();while((t||tokenIter.getCurrentTokenRow()>0)&&this.isEmptyToken(t)){t=tokenIter.stepBackward()}return t}}RowParser.prototype.MODE=MODE;exports.default=RowParser;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mode=Mode;var _brace=__webpack_require__(49);var _brace2=_interopRequireDefault(_brace);var _worker=__webpack_require__(1416);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace2.default.acequire("ace/lib/oop");var TextMode=_brace2.default.acequire("ace/mode/text").Mode;var ScriptMode=__webpack_require__(1418).ScriptMode;var MatchingBraceOutdent=_brace2.default.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=_brace2.default.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=_brace2.default.acequire("ace/mode/folding/cstyle").FoldMode;var WorkerClient=_brace2.default.acequire("ace/worker/worker_client").WorkerClient;var AceTokenizer=_brace2.default.acequire("ace/tokenizer").Tokenizer;var HighlightRules=__webpack_require__(1419).InputHighlightRules;function Mode(){this.$tokenizer=new AceTokenizer((new HighlightRules).getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode;this.createModeDelegates({"script-":ScriptMode})}oop.inherits(Mode,TextMode);(function(){this.getCompletions=function(){return[]};this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);if(state!=="string_literal"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match){indent+=tab}}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace","sense_editor"],_worker.workerModule,"SenseWorker");worker.attachToDocument(session.getDocument());worker.on("error",function(e){session.setAnnotations([e.data])});worker.on("ok",function(anno){session.setAnnotations(anno.data)});return worker}}).call(Mode.prototype)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var workerModule=exports.workerModule={id:"sense_editor/mode/worker",src:__webpack_require__(1417)}},function(module,exports){module.exports="/* eslint-disable */\n/* \n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the javascript\n  mode from the brace distro.\n*/\n\n(function (window) {\n  function resolveModuleId(id, paths) {\n    for (let testPath = id, tail = ''; testPath;) {\n      let alias = paths[testPath];\n      if ('string' === typeof alias) return alias + tail;\n      if (alias)\n        {return (\n          alias.location.replace(/\\/*$/, '/') +\n          (tail || alias.main || alias.name)\n        );}\n      if (alias === !1) return '';\n      let i = testPath.lastIndexOf('/');\n      if (-1 === i) break;\n      (tail = testPath.substr(i) + tail), (testPath = testPath.slice(0, i));\n    }\n    return id;\n  }\n  if (\n    !(\n      (void 0 !== window.window && window.document) ||\n      (window.acequire && window.define)\n    )\n  ) {\n    window.console ||\n      ((window.console = function () {\n        let msgs = Array.prototype.slice.call(arguments, 0);\n        postMessage({ type: 'log', data: msgs });\n      }),\n        (window.console.error = window.console.warn = window.console.log = window.console.trace =\n        window.console)),\n    (window.window = window),\n    (window.ace = window),\n    (window.onerror = function (message, file, line, col, err) {\n      postMessage({\n        type: 'error',\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack,\n        },\n      });\n    }),\n    (window.normalizeModule = function (parentId, moduleName) {\n      if (-1 !== moduleName.indexOf('!')) {\n        let chunks = moduleName.split('!');\n        return (\n          window.normalizeModule(parentId, chunks[0]) +\n            '!' +\n            window.normalizeModule(parentId, chunks[1])\n        );\n      }\n      if ('.' == moduleName.charAt(0)) {\n        let base = parentId\n          .split('/')\n          .slice(0, -1)\n          .join('/');\n        for (\n          moduleName = (base ? base + '/' : '') + moduleName;\n          -1 !== moduleName.indexOf('.') && previous != moduleName;\n\n        ) {\n          var previous = moduleName;\n          moduleName = moduleName\n            .replace(/^\\.\\//, '')\n            .replace(/\\/\\.\\//, '/')\n            .replace(/[^\\/]+\\/\\.\\.\\//, '');\n        }\n      }\n      return moduleName;\n    }),\n    (window.acequire = function acequire(parentId, id) {\n      if ((id || ((id = parentId), (parentId = null)), !id.charAt))\n        {throw Error(\n            'worker.js acequire() accepts only (parentId, id) as arguments'\n          );}\n      id = window.normalizeModule(parentId, id);\n      let module = window.acequire.modules[id];\n      if (module)\n        {return (\n            module.initialized ||\n              ((module.initialized = !0),\n              (module.exports = module.factory().exports)),\n            module.exports\n          );}\n      if (!window.acequire.tlns) return console.log('unable to load ' + id);\n      let path = resolveModuleId(id, window.acequire.tlns);\n      return (\n        '.js' != path.slice(-3) && (path += '.js'),\n        (window.acequire.id = id),\n        (window.acequire.modules[id] = {}),\n        importScripts(path),\n        window.acequire(parentId, id)\n      );\n    }),\n    (window.acequire.modules = {}),\n    (window.acequire.tlns = {}),\n    (window.define = function (id, deps, factory) {\n      if (\n        (2 == arguments.length\n          ? ((factory = deps),\n            'string' !== typeof id && ((deps = id), (id = window.acequire.id)))\n          : 1 == arguments.length &&\n              ((factory = id), (deps = []), (id = window.acequire.id)),\n          'function' !== typeof factory)\n      )\n        {return (\n            (window.acequire.modules[id] = {\n              exports: factory,\n              initialized: !0,\n            }),\n            void 0\n          );}\n      deps.length || (deps = ['require', 'exports', 'module']);\n      let req = function (childId) {\n        return window.acequire(id, childId);\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function () {\n          let module = this,\n            returnExports = factory.apply(\n              this,\n              deps.map(function (dep) {\n                switch (dep) {\n                  case 'require':\n                    return req;\n                  case 'exports':\n                    return module.exports;\n                  case 'module':\n                    return module;\n                  default:\n                    return req(dep);\n                }\n              })\n            );\n          return returnExports && (module.exports = returnExports), module;\n        },\n      };\n    }),\n    (window.define.amd = {}),\n    (acequire.tlns = {}),\n    (window.initBaseUrls = function (topLevelNamespaces) {\n      for (let i in topLevelNamespaces)\n        {acequire.tlns[i] = topLevelNamespaces[i];}\n    }),\n    (window.initSender = function () {\n      let EventEmitter = window.acequire('ace/lib/event_emitter')\n          .EventEmitter,\n        oop = window.acequire('ace/lib/oop'),\n        Sender = function () {};\n      return (\n        function () {\n          oop.implement(this, EventEmitter),\n          (this.callback = function (data, callbackId) {\n            postMessage({ type: 'call', id: callbackId, data: data });\n          }),\n          (this.emit = function (name, data) {\n            postMessage({ type: 'event', name: name, data: data });\n          });\n        }.call(Sender.prototype),\n        new Sender()\n      );\n    });\n    let main = (window.main = null),\n      sender = (window.sender = null);\n    window.onmessage = function (e) {\n      let msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        {if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command])\n            throw Error('Unknown command:' + msg.command);\n          window[msg.command].apply(window, msg.args);\n        }}\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns),\n        acequire('ace/lib/es5-shim'),\n        (sender = window.sender = window.initSender());\n        let clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender);\n      }\n    };\n  }\n}(this)),\nace.define('ace/lib/oop', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  (exports.inherits = function (ctor, superCtor) {\n    (ctor.super_ = superCtor),\n    (ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0,\n      },\n    }));\n  }),\n  (exports.mixin = function (obj, mixin) {\n    for (let key in mixin) obj[key] = mixin[key];\n    return obj;\n  }),\n  (exports.implement = function (proto, mixin) {\n    exports.mixin(proto, mixin);\n  });\n}),\nace.define('ace/range', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  let comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    },\n    Range = function (startRow, startColumn, endRow, endColumn) {\n      (this.start = { row: startRow, column: startColumn }),\n      (this.end = { row: endRow, column: endColumn });\n    };\n  (function () {\n    (this.isEqual = function (range) {\n      return (\n        this.start.row === range.start.row &&\n          this.end.row === range.end.row &&\n          this.start.column === range.start.column &&\n          this.end.column === range.end.column\n      );\n    }),\n    (this.toString = function () {\n      return (\n        'Range: [' +\n            this.start.row +\n            '/' +\n            this.start.column +\n            '] -> [' +\n            this.end.row +\n            '/' +\n            this.end.column +\n            ']'\n      );\n    }),\n    (this.contains = function (row, column) {\n      return 0 == this.compare(row, column);\n    }),\n    (this.compareRange = function (range) {\n      let cmp,\n        end = range.end,\n        start = range.start;\n      return (\n        (cmp = this.compare(end.row, end.column)),\n        1 == cmp\n          ? ((cmp = this.compare(start.row, start.column)),\n            1 == cmp ? 2 : 0 == cmp ? 1 : 0)\n          : -1 == cmp\n            ? -2\n            : ((cmp = this.compare(start.row, start.column)),\n              -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n      );\n    }),\n    (this.comparePoint = function (p) {\n      return this.compare(p.row, p.column);\n    }),\n    (this.containsRange = function (range) {\n      return (\n        0 == this.comparePoint(range.start) &&\n            0 == this.comparePoint(range.end)\n      );\n    }),\n    (this.intersects = function (range) {\n      let cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp;\n    }),\n    (this.isEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column;\n    }),\n    (this.isStart = function (row, column) {\n      return this.start.row == row && this.start.column == column;\n    }),\n    (this.setStart = function (row, column) {\n      'object' === typeof row\n        ? ((this.start.column = row.column), (this.start.row = row.row))\n        : ((this.start.row = row), (this.start.column = column));\n    }),\n    (this.setEnd = function (row, column) {\n      'object' === typeof row\n        ? ((this.end.column = row.column), (this.end.row = row.row))\n        : ((this.end.row = row), (this.end.column = column));\n    }),\n    (this.inside = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column) || this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideStart = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isEnd(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.insideEnd = function (row, column) {\n      return 0 == this.compare(row, column)\n        ? this.isStart(row, column)\n          ? !1\n          : !0\n        : !1;\n    }),\n    (this.compare = function (row, column) {\n      return this.isMultiLine() || row !== this.start.row\n        ? this.start.row > row\n          ? -1\n          : row > this.end.row\n            ? 1\n            : this.start.row === row\n              ? column >= this.start.column\n                ? 0\n                : -1\n              : this.end.row === row\n                ? this.end.column >= column\n                  ? 0\n                  : 1\n                : 0\n        : this.start.column > column\n          ? -1\n          : column > this.end.column\n            ? 1\n            : 0;\n    }),\n    (this.compareStart = function (row, column) {\n      return this.start.row == row && this.start.column == column\n        ? -1\n        : this.compare(row, column);\n    }),\n    (this.compareEnd = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.compare(row, column);\n    }),\n    (this.compareInside = function (row, column) {\n      return this.end.row == row && this.end.column == column\n        ? 1\n        : this.start.row == row && this.start.column == column\n          ? -1\n          : this.compare(row, column);\n    }),\n    (this.clipRows = function (firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = { row: lastRow + 1, column: 0 };\n      else if (firstRow > this.end.row)\n        {var end = { row: firstRow, column: 0 };}\n      if (this.start.row > lastRow)\n        {var start = { row: lastRow + 1, column: 0 };}\n      else if (firstRow > this.start.row)\n        {var start = { row: firstRow, column: 0 };}\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.extend = function (row, column) {\n      let cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = { row: row, column: column };\n      else var end = { row: row, column: column };\n      return Range.fromPoints(start || this.start, end || this.end);\n    }),\n    (this.isEmpty = function () {\n      return (\n        this.start.row === this.end.row &&\n            this.start.column === this.end.column\n      );\n    }),\n    (this.isMultiLine = function () {\n      return this.start.row !== this.end.row;\n    }),\n    (this.clone = function () {\n      return Range.fromPoints(this.start, this.end);\n    }),\n    (this.collapseRows = function () {\n      return 0 == this.end.column\n        ? new Range(\n          this.start.row,\n          0,\n          Math.max(this.start.row, this.end.row - 1),\n          0\n        )\n        : new Range(this.start.row, 0, this.end.row, 0);\n    }),\n    (this.toScreenRange = function (session) {\n      let screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(\n        screenPosStart.row,\n        screenPosStart.column,\n        screenPosEnd.row,\n        screenPosEnd.column\n      );\n    }),\n    (this.moveBy = function (row, column) {\n      (this.start.row += row),\n      (this.start.column += column),\n      (this.end.row += row),\n      (this.end.column += column);\n    });\n  }.call(Range.prototype),\n    (Range.fromPoints = function (start, end) {\n      return new Range(start.row, start.column, end.row, end.column);\n    }),\n    (Range.comparePoints = comparePoints),\n    (Range.comparePoints = function (p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column;\n    }),\n    (exports.Range = Range));\n}),\nace.define('ace/apply_delta', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  exports.applyDelta = function (docLines, delta) {\n    let row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || '';\n    switch (delta.action) {\n      case 'insert':\n        var lines = delta.lines;\n        if (1 === lines.length)\n          {docLines[row] =\n              line.substring(0, startColumn) +\n              delta.lines[0] +\n              line.substring(startColumn);}\n        else {\n          let args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args),\n          (docLines[row] = line.substring(0, startColumn) + docLines[row]),\n          (docLines[row + delta.lines.length - 1] += line.substring(\n            startColumn\n          ));\n        }\n        break;\n      case 'remove':\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow\n          ? (docLines[row] =\n                line.substring(0, startColumn) + line.substring(endColumn))\n          : docLines.splice(\n            row,\n            endRow - row + 1,\n            line.substring(0, startColumn) +\n                  docLines[endRow].substring(endColumn)\n          );\n    }\n  };\n}),\nace.define(\n  'ace/lib/event_emitter',\n  ['require', 'exports', 'module'],\n  function (acequire, exports) {\n    \n    let EventEmitter = {},\n      stopPropagation = function () {\n        this.propagationStopped = !0;\n      },\n      preventDefault = function () {\n        this.defaultPrevented = !0;\n      };\n    (EventEmitter._emit = EventEmitter._dispatchEvent = function (\n      eventName,\n      e\n    ) {\n      this._eventRegistry || (this._eventRegistry = {}),\n      this._defaultHandlers || (this._defaultHandlers = {});\n      let listeners = this._eventRegistry[eventName] || [],\n        defaultHandler = this._defaultHandlers[eventName];\n      if (listeners.length || defaultHandler) {\n        ('object' === typeof e && e) || (e = {}),\n        e.type || (e.type = eventName),\n        e.stopPropagation || (e.stopPropagation = stopPropagation),\n        e.preventDefault || (e.preventDefault = preventDefault),\n        (listeners = listeners.slice());\n        for (\n          let i = 0;\n          listeners.length > i &&\n            (listeners[i](e, this), !e.propagationStopped);\n          i++\n        );\n        return defaultHandler && !e.defaultPrevented\n          ? defaultHandler(e, this)\n          : void 0;\n      }\n    }),\n    (EventEmitter._signal = function (eventName, e) {\n      let listeners = (this._eventRegistry || {})[eventName];\n      if (listeners) {\n        listeners = listeners.slice();\n        for (let i = 0; listeners.length > i; i++) listeners[i](e, this);\n      }\n    }),\n    (EventEmitter.once = function (eventName, callback) {\n      let _self = this;\n      callback &&\n            this.addEventListener(eventName, function newCallback() {\n              _self.removeEventListener(eventName, newCallback),\n              callback.apply(null, arguments);\n            });\n    }),\n    (EventEmitter.setDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (\n        (handlers ||\n              (handlers = this._defaultHandlers = { _disabled_: {} }),\n          handlers[eventName])\n      ) {\n        let old = handlers[eventName],\n          disabled = handlers._disabled_[eventName];\n        disabled || (handlers._disabled_[eventName] = disabled = []),\n        disabled.push(old);\n        let i = disabled.indexOf(callback);\n        -1 != i && disabled.splice(i, 1);\n      }\n      handlers[eventName] = callback;\n    }),\n    (EventEmitter.removeDefaultHandler = function (eventName, callback) {\n      let handlers = this._defaultHandlers;\n      if (handlers) {\n        let disabled = handlers._disabled_[eventName];\n        if (handlers[eventName] == callback)\n          {handlers[eventName],\n                disabled && this.setDefaultHandler(eventName, disabled.pop());}\n        else if (disabled) {\n          let i = disabled.indexOf(callback);\n          -1 != i && disabled.splice(i, 1);\n        }\n      }\n    }),\n    (EventEmitter.on = EventEmitter.addEventListener = function (\n      eventName,\n      callback,\n      capturing\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      return (\n        listeners || (listeners = this._eventRegistry[eventName] = []),\n        -1 == listeners.indexOf(callback) &&\n              listeners[capturing ? 'unshift' : 'push'](callback),\n        callback\n      );\n    }),\n    (EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function (\n      eventName,\n      callback\n    ) {\n      this._eventRegistry = this._eventRegistry || {};\n      let listeners = this._eventRegistry[eventName];\n      if (listeners) {\n        let index = listeners.indexOf(callback);\n        -1 !== index && listeners.splice(index, 1);\n      }\n    }),\n    (EventEmitter.removeAllListeners = function (eventName) {\n      this._eventRegistry && (this._eventRegistry[eventName] = []);\n    }),\n    (exports.EventEmitter = EventEmitter);\n  }\n),\nace.define(\n  'ace/anchor',\n  ['require', 'exports', 'module', 'ace/lib/oop', 'ace/lib/event_emitter'],\n  function (acequire, exports) {\n    \n    let oop = acequire('./lib/oop'),\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Anchor = (exports.Anchor = function (doc, row, column) {\n        (this.$onChange = this.onChange.bind(this)),\n        this.attach(doc),\n        column === void 0\n          ? this.setPosition(row.row, row.column)\n          : this.setPosition(row, column);\n      });\n    (function () {\n      function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        let bColIsAfter = equalPointsInOrder\n          ? point1.column <= point2.column\n          : point1.column < point2.column;\n        return (\n          point1.row < point2.row || (point1.row == point2.row && bColIsAfter)\n        );\n      }\n      function $getTransformedPoint(delta, point, moveIfEqual) {\n        let deltaIsInsert = 'insert' == delta.action,\n          deltaRowShift =\n              (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n          deltaColShift =\n              (deltaIsInsert ? 1 : -1) *\n              (delta.end.column - delta.start.column),\n          deltaStart = delta.start,\n          deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n        return $pointsInOrder(point, deltaStart, moveIfEqual)\n          ? { row: point.row, column: point.column }\n          : $pointsInOrder(deltaEnd, point, !moveIfEqual)\n            ? {\n              row: point.row + deltaRowShift,\n              column:\n                    point.column +\n                    (point.row == deltaEnd.row ? deltaColShift : 0),\n            }\n            : { row: deltaStart.row, column: deltaStart.column };\n      }\n      oop.implement(this, EventEmitter),\n      (this.getPosition = function () {\n        return this.$clipPositionToDocument(this.row, this.column);\n      }),\n      (this.getDocument = function () {\n        return this.document;\n      }),\n      (this.$insertRight = !1),\n      (this.onChange = function (delta) {\n        if (\n          !(\n            (delta.start.row == delta.end.row &&\n                  delta.start.row != this.row) ||\n                delta.start.row > this.row\n          )\n        ) {\n          let point = $getTransformedPoint(\n            delta,\n            { row: this.row, column: this.column },\n            this.$insertRight\n          );\n          this.setPosition(point.row, point.column, !0);\n        }\n      }),\n      (this.setPosition = function (row, column, noClip) {\n        let pos;\n        if (\n          ((pos = noClip\n            ? { row: row, column: column }\n            : this.$clipPositionToDocument(row, column)),\n            this.row != pos.row || this.column != pos.column)\n        ) {\n          let old = { row: this.row, column: this.column };\n          (this.row = pos.row),\n          (this.column = pos.column),\n          this._signal('change', { old: old, value: pos });\n        }\n      }),\n      (this.detach = function () {\n        this.document.removeEventListener('change', this.$onChange);\n      }),\n      (this.attach = function (doc) {\n        (this.document = doc || this.document),\n        this.document.on('change', this.$onChange);\n      }),\n      (this.$clipPositionToDocument = function (row, column) {\n        let pos = {};\n        return (\n          row >= this.document.getLength()\n            ? ((pos.row = Math.max(0, this.document.getLength() - 1)),\n              (pos.column = this.document.getLine(pos.row).length))\n            : 0 > row\n              ? ((pos.row = 0), (pos.column = 0))\n              : ((pos.row = row),\n                (pos.column = Math.min(\n                  this.document.getLine(pos.row).length,\n                  Math.max(0, column)\n                ))),\n          0 > column && (pos.column = 0),\n          pos\n        );\n      });\n    }.call(Anchor.prototype));\n  }\n),\nace.define(\n  'ace/document',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/apply_delta',\n    'ace/lib/event_emitter',\n    'ace/range',\n    'ace/anchor',\n  ],\n  function (acequire, exports) {\n    \n    let oop = acequire('./lib/oop'),\n      applyDelta = acequire('./apply_delta').applyDelta,\n      EventEmitter = acequire('./lib/event_emitter').EventEmitter,\n      Range = acequire('./range').Range,\n      Anchor = acequire('./anchor').Anchor,\n      Document = function (textOrLines) {\n        (this.$lines = ['']),\n        0 === textOrLines.length\n          ? (this.$lines = [''])\n          : Array.isArray(textOrLines)\n            ? this.insertMergedLines({ row: 0, column: 0 }, textOrLines)\n            : this.insert({ row: 0, column: 0 }, textOrLines);\n      };\n    (function () {\n      oop.implement(this, EventEmitter),\n      (this.setValue = function (text) {\n        let len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length)),\n        this.insert({ row: 0, column: 0 }, text);\n      }),\n      (this.getValue = function () {\n        return this.getAllLines().join(this.getNewLineCharacter());\n      }),\n      (this.createAnchor = function (row, column) {\n        return new Anchor(this, row, column);\n      }),\n      (this.$split =\n            0 === 'aaa'.split(/a/).length\n              ? function (text) {\n                return text.replace(/\\r\\n|\\r/g, '\\n').split('\\n');\n              }\n              : function (text) {\n                return text.split(/\\r\\n|\\r|\\n/);\n              }),\n      (this.$detectNewLine = function (text) {\n        let match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        (this.$autoNewLine = match ? match[1] : '\\n'),\n        this._signal('changeNewLineMode');\n      }),\n      (this.getNewLineCharacter = function () {\n        switch (this.$newLineMode) {\n          case 'windows':\n            return '\\r\\n';\n          case 'unix':\n            return '\\n';\n          default:\n            return this.$autoNewLine || '\\n';\n        }\n      }),\n      (this.$autoNewLine = ''),\n      (this.$newLineMode = 'auto'),\n      (this.setNewLineMode = function (newLineMode) {\n        this.$newLineMode !== newLineMode &&\n              ((this.$newLineMode = newLineMode),\n                this._signal('changeNewLineMode'));\n      }),\n      (this.getNewLineMode = function () {\n        return this.$newLineMode;\n      }),\n      (this.isNewLine = function (text) {\n        return '\\r\\n' == text || '\\r' == text || '\\n' == text;\n      }),\n      (this.getLine = function (row) {\n        return this.$lines[row] || '';\n      }),\n      (this.getLines = function (firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n      }),\n      (this.getAllLines = function () {\n        return this.getLines(0, this.getLength());\n      }),\n      (this.getLength = function () {\n        return this.$lines.length;\n      }),\n      (this.getTextRange = function (range) {\n        return this.getLinesForRange(range).join(\n          this.getNewLineCharacter()\n        );\n      }),\n      (this.getLinesForRange = function (range) {\n        let lines;\n        if (range.start.row === range.end.row)\n          {lines = [\n                this.getLine(range.start.row).substring(\n                  range.start.column,\n                  range.end.column\n                ),\n              ];}\n        else {\n          (lines = this.getLines(range.start.row, range.end.row)),\n          (lines[0] = (lines[0] || '').substring(range.start.column));\n          let l = lines.length - 1;\n          range.end.row - range.start.row == l &&\n                (lines[l] = lines[l].substring(0, range.end.column));\n        }\n        return lines;\n      }),\n      (this.insertLines = function (row, lines) {\n        return (\n          console.warn(\n            'Use of document.insertLines is deprecated. Use the insertFullLines method instead.'\n          ),\n          this.insertFullLines(row, lines)\n        );\n      }),\n      (this.removeLines = function (firstRow, lastRow) {\n        return (\n          console.warn(\n            'Use of document.removeLines is deprecated. Use the removeFullLines method instead.'\n          ),\n          this.removeFullLines(firstRow, lastRow)\n        );\n      }),\n      (this.insertNewLine = function (position) {\n        return (\n          console.warn(\n            'Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\\'\\', \\'\\']) instead.'\n          ),\n          this.insertMergedLines(position, ['', ''])\n        );\n      }),\n      (this.insert = function (position, text) {\n        return (\n          1 >= this.getLength() && this.$detectNewLine(text),\n          this.insertMergedLines(position, this.$split(text))\n        );\n      }),\n      (this.insertInLine = function (position, text) {\n        let start = this.clippedPos(position.row, position.column),\n          end = this.pos(position.row, position.column + text.length);\n        return (\n          this.applyDelta(\n            { start: start, end: end, action: 'insert', lines: [text] },\n            !0\n          ),\n          this.clonePos(end)\n        );\n      }),\n      (this.clippedPos = function (row, column) {\n        let length = this.getLength();\n        void 0 === row\n          ? (row = length)\n          : 0 > row\n            ? (row = 0)\n            : row >= length && ((row = length - 1), (column = void 0));\n        let line = this.getLine(row);\n        return (\n          void 0 == column && (column = line.length),\n          (column = Math.min(Math.max(column, 0), line.length)),\n          { row: row, column: column }\n        );\n      }),\n      (this.clonePos = function (pos) {\n        return { row: pos.row, column: pos.column };\n      }),\n      (this.pos = function (row, column) {\n        return { row: row, column: column };\n      }),\n      (this.$clipPosition = function (position) {\n        let length = this.getLength();\n        return (\n          position.row >= length\n            ? ((position.row = Math.max(0, length - 1)),\n              (position.column = this.getLine(length - 1).length))\n            : ((position.row = Math.max(0, position.row)),\n              (position.column = Math.min(\n                Math.max(position.column, 0),\n                this.getLine(position.row).length\n              ))),\n          position\n        );\n      }),\n      (this.insertFullLines = function (row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        let column = 0;\n        this.getLength() > row\n          ? ((lines = lines.concat([''])), (column = 0))\n          : ((lines = [''].concat(lines)),\n            row--,\n            (column = this.$lines[row].length)),\n        this.insertMergedLines({ row: row, column: column }, lines);\n      }),\n      (this.insertMergedLines = function (position, lines) {\n        let start = this.clippedPos(position.row, position.column),\n          end = {\n            row: start.row + lines.length - 1,\n            column:\n                  (1 == lines.length ? start.column : 0) +\n                  lines[lines.length - 1].length,\n          };\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'insert',\n            lines: lines,\n          }),\n          this.clonePos(end)\n        );\n      }),\n      (this.remove = function (range) {\n        let start = this.clippedPos(range.start.row, range.start.column),\n          end = this.clippedPos(range.end.row, range.end.column);\n        return (\n          this.applyDelta({\n            start: start,\n            end: end,\n            action: 'remove',\n            lines: this.getLinesForRange({ start: start, end: end }),\n          }),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeInLine = function (row, startColumn, endColumn) {\n        let start = this.clippedPos(row, startColumn),\n          end = this.clippedPos(row, endColumn);\n        return (\n          this.applyDelta(\n            {\n              start: start,\n              end: end,\n              action: 'remove',\n              lines: this.getLinesForRange({ start: start, end: end }),\n            },\n            !0\n          ),\n          this.clonePos(start)\n        );\n      }),\n      (this.removeFullLines = function (firstRow, lastRow) {\n        (firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1)),\n        (lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1));\n        let deleteFirstNewLine =\n                lastRow == this.getLength() - 1 && firstRow > 0,\n          deleteLastNewLine = this.getLength() - 1 > lastRow,\n          startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n          startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n          endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n          endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n          range = new Range(startRow, startCol, endRow, endCol),\n          deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        return (\n          this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: 'remove',\n            lines: this.getLinesForRange(range),\n          }),\n          deletedLines\n        );\n      }),\n      (this.removeNewLine = function (row) {\n        this.getLength() - 1 > row &&\n              row >= 0 &&\n              this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: 'remove',\n                lines: ['', ''],\n              });\n      }),\n      (this.replace = function (range, text) {\n        if (\n          (range instanceof Range ||\n                (range = Range.fromPoints(range.start, range.end)),\n            0 === text.length && range.isEmpty())\n        )\n          {return range.start;}\n        if (text == this.getTextRange(range)) return range.end;\n        this.remove(range);\n        let end;\n        return (end = text ? this.insert(range.start, text) : range.start);\n      }),\n      (this.applyDeltas = function (deltas) {\n        for (let i = 0; deltas.length > i; i++) this.applyDelta(deltas[i]);\n      }),\n      (this.revertDeltas = function (deltas) {\n        for (let i = deltas.length - 1; i >= 0; i--)\n          {this.revertDelta(deltas[i]);}\n      }),\n      (this.applyDelta = function (delta, doNotValidate) {\n        let isInsert = 'insert' == delta.action;\n        (isInsert\n          ? 1 >= delta.lines.length && !delta.lines[0]\n          : !Range.comparePoints(delta.start, delta.end)) ||\n              (isInsert &&\n                delta.lines.length > 2e4 &&\n                this.$splitAndapplyLargeDelta(delta, 2e4),\n                applyDelta(this.$lines, delta, doNotValidate),\n                this._signal('change', delta));\n      }),\n      (this.$splitAndapplyLargeDelta = function (delta, MAX) {\n        for (\n          let lines = delta.lines,\n            l = lines.length,\n            row = delta.start.row,\n            column = delta.start.column,\n            from = 0,\n            to = 0;\n          ;\n\n        ) {\n          (from = to), (to += MAX - 1);\n          let chunk = lines.slice(from, to);\n          if (to > l) {\n            (delta.lines = chunk),\n            (delta.start.row = row + from),\n            (delta.start.column = column);\n            break;\n          }\n          chunk.push(''),\n          this.applyDelta(\n            {\n              start: this.pos(row + from, column),\n              end: this.pos(row + to, (column = 0)),\n              action: delta.action,\n              lines: chunk,\n            },\n            !0\n          );\n        }\n      }),\n      (this.revertDelta = function (delta) {\n        this.applyDelta({\n          start: this.clonePos(delta.start),\n          end: this.clonePos(delta.end),\n          action: 'insert' == delta.action ? 'remove' : 'insert',\n          lines: delta.lines.slice(),\n        });\n      }),\n      (this.indexToPosition = function (index, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            i = startRow || 0,\n            l = lines.length;\n          l > i;\n          i++\n        )\n          {if (((index -= lines[i].length + newlineLength), 0 > index))\n                return {\n                  row: i,\n                  column: index + lines[i].length + newlineLength,\n                };}\n        return { row: l - 1, column: lines[l - 1].length };\n      }),\n      (this.positionToIndex = function (pos, startRow) {\n        for (\n          var lines = this.$lines || this.getAllLines(),\n            newlineLength = this.getNewLineCharacter().length,\n            index = 0,\n            row = Math.min(pos.row, lines.length),\n            i = startRow || 0;\n          row > i;\n          ++i\n        )\n          {index += lines[i].length + newlineLength;}\n        return index + pos.column;\n      });\n    }.call(Document.prototype),\n      (exports.Document = Document));\n  }\n),\nace.define('ace/lib/lang', ['require', 'exports', 'module'], function (\n  acequire,\n  exports\n) {\n  \n  (exports.last = function (a) {\n    return a[a.length - 1];\n  }),\n  (exports.stringReverse = function (string) {\n    return string\n      .split('')\n      .reverse()\n      .join('');\n  }),\n  (exports.stringRepeat = function (string, count) {\n    for (var result = ''; count > 0;)\n      {1 & count && (result += string), (count >>= 1) && (string += string);}\n    return result;\n  });\n  let trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  (exports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n  }),\n  (exports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n  }),\n  (exports.copyObject = function (obj) {\n    let copy = {};\n    for (let key in obj) copy[key] = obj[key];\n    return copy;\n  }),\n  (exports.copyArray = function (array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++)\n      {copy[i] =\n            array[i] && 'object' == typeof array[i]\n              ? this.copyObject(array[i])\n              : array[i];}\n    return copy;\n  }),\n  (exports.deepCopy = function deepCopy(obj) {\n    if ('object' !== typeof obj || !obj) return obj;\n    let copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++)\n        {copy[key] = deepCopy(obj[key]);}\n      return copy;\n    }\n    if ('[object Object]' !== Object.prototype.toString.call(obj))\n      {return obj;}\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy;\n  }),\n  (exports.arrayToMap = function (arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map;\n  }),\n  (exports.createMap = function (props) {\n    let map = Object.create(null);\n    for (let i in props) map[i] = props[i];\n    return map;\n  }),\n  (exports.arrayRemove = function (array, value) {\n    for (let i = 0; array.length >= i; i++)\n      {value === array[i] && array.splice(i, 1);}\n  }),\n  (exports.escapeRegExp = function (str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }),\n  (exports.escapeHTML = function (str) {\n    return str\n      .replace(/&/g, '&#38;')\n      .replace(/\"/g, '&#34;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&#60;');\n  }),\n  (exports.getMatchOffsets = function (string, regExp) {\n    let matches = [];\n    return (\n      string.replace(regExp, function (str) {\n        matches.push({\n          offset: arguments[arguments.length - 2],\n          length: str.length,\n        });\n      }),\n      matches\n    );\n  }),\n  (exports.deferredCall = function (fcn) {\n    var timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      deferred = function (timeout) {\n        return (\n          deferred.cancel(),\n          (timer = setTimeout(callback, timeout || 0)),\n          deferred\n        );\n      };\n    return (\n      (deferred.schedule = deferred),\n      (deferred.call = function () {\n        return this.cancel(), fcn(), deferred;\n      }),\n      (deferred.cancel = function () {\n        return clearTimeout(timer), (timer = null), deferred;\n      }),\n      (deferred.isPending = function () {\n        return timer;\n      }),\n      deferred\n    );\n  }),\n  (exports.delayedCall = function (fcn, defaultTimeout) {\n    let timer = null,\n      callback = function () {\n        (timer = null), fcn();\n      },\n      _self = function (timeout) {\n        null == timer &&\n              (timer = setTimeout(callback, timeout || defaultTimeout));\n      };\n    return (\n      (_self.delay = function (timeout) {\n        timer && clearTimeout(timer),\n        (timer = setTimeout(callback, timeout || defaultTimeout));\n      }),\n      (_self.schedule = _self),\n      (_self.call = function () {\n        this.cancel(), fcn();\n      }),\n      (_self.cancel = function () {\n        timer && clearTimeout(timer), (timer = null);\n      }),\n      (_self.isPending = function () {\n        return timer;\n      }),\n      _self\n    );\n  });\n}),\nace.define(\n  'ace/worker/mirror',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/range',\n    'ace/document',\n    'ace/lib/lang',\n  ],\n  function (acequire, exports) {\n    \n    acequire('../range').Range;\n    let Document = acequire('../document').Document,\n      lang = acequire('../lib/lang'),\n      Mirror = (exports.Mirror = function (sender) {\n        this.sender = sender;\n        let doc = (this.doc = new Document('')),\n          deferredUpdate = (this.deferredUpdate = lang.delayedCall(\n            this.onUpdate.bind(this)\n          )),\n          _self = this;\n        sender.on('change', function (e) {\n          let data = e.data;\n          if (data[0].start) doc.applyDeltas(data);\n          else\n            {for (var i = 0; data.length > i; i += 2) {\n                if (Array.isArray(data[i + 1]))\n                  var d = {\n                    action: 'insert',\n                    start: data[i],\n                    lines: data[i + 1],\n                  };\n                else\n                  var d = {\n                    action: 'remove',\n                    start: data[i],\n                    end: data[i + 1],\n                  };\n                doc.applyDelta(d, !0);\n              }}\n          return _self.$timeout\n            ? deferredUpdate.schedule(_self.$timeout)\n            : (_self.onUpdate(), void 0);\n        });\n      });\n    (function () {\n      (this.$timeout = 500),\n      (this.setTimeout = function (timeout) {\n        this.$timeout = timeout;\n      }),\n      (this.setValue = function (value) {\n        this.doc.setValue(value),\n        this.deferredUpdate.schedule(this.$timeout);\n      }),\n      (this.getValue = function (callbackId) {\n        this.sender.callback(this.doc.getValue(), callbackId);\n      }),\n      (this.onUpdate = function () {}),\n      (this.isPending = function () {\n        return this.deferredUpdate.isPending();\n      });\n    }.call(Mirror.prototype));\n  }\n),\nace.define('ace/lib/es5-shim', ['require', 'exports', 'module'], function () {\n  function Empty() {}\n  function doesDefinePropertyWork(object) {\n    try {\n      return (\n        Object.defineProperty(object, 'sentinel', {}), 'sentinel' in object\n      );\n    } catch (exception) {}\n  }\n  function toInteger(n) {\n    return (\n      (n = +n),\n      n !== n\n        ? (n = 0)\n        : 0 !== n &&\n            n !== 1 / 0 &&\n            n !== -(1 / 0) &&\n            (n = (n > 0 || -1) * Math.floor(Math.abs(n))),\n      n\n    );\n  }\n  Function.prototype.bind ||\n      (Function.prototype.bind = function (that) {\n        let target = this;\n        if ('function' !== typeof target)\n          {throw new TypeError(\n            'Function.prototype.bind called on incompatible ' + target\n          );}\n        var args = slice.call(arguments, 1),\n          bound = function () {\n            if (this instanceof bound) {\n              let result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n              );\n              return Object(result) === result ? result : this;\n            }\n            return target.apply(that, args.concat(slice.call(arguments)));\n          };\n        return (\n          target.prototype &&\n            ((Empty.prototype = target.prototype),\n              (bound.prototype = new Empty()),\n              (Empty.prototype = null)),\n          bound\n        );\n      });\n  var defineGetter,\n    defineSetter,\n    lookupGetter,\n    lookupSetter,\n    supportsAccessors,\n    call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if (\n    ((supportsAccessors = owns(prototypeOfObject, '__defineGetter__')) &&\n        ((defineGetter = call.bind(prototypeOfObject.__defineGetter__)),\n          (defineSetter = call.bind(prototypeOfObject.__defineSetter__)),\n          (lookupGetter = call.bind(prototypeOfObject.__lookupGetter__)),\n          (lookupSetter = call.bind(prototypeOfObject.__lookupSetter__))),\n      2 != [1, 2].splice(0).length)\n  )\n    {if (\n        (function() {\n          function makeArray(l) {\n            var a = Array(l + 2);\n            return (a[0] = a[1] = 0), a;\n          }\n          var lengthBefore,\n            array = [];\n          return (\n            array.splice.apply(array, makeArray(20)),\n            array.splice.apply(array, makeArray(26)),\n            (lengthBefore = array.length),\n            array.splice(5, 0, 'XXX'),\n            lengthBefore + 1 == array.length,\n            lengthBefore + 1 == array.length ? !0 : void 0\n          );\n        })()\n      ) {\n        var array_splice = Array.prototype.splice;\n        Array.prototype.splice = function(start, deleteCount) {\n          return arguments.length\n            ? array_splice.apply(\n                this,\n                [\n                  void 0 === start ? 0 : start,\n                  void 0 === deleteCount ? this.length - start : deleteCount,\n                ].concat(slice.call(arguments, 2))\n              )\n            : [];\n        };\n      } else\n        Array.prototype.splice = function(pos, removeCount) {\n          var length = this.length;\n          pos > 0\n            ? pos > length && (pos = length)\n            : void 0 == pos\n              ? (pos = 0)\n              : 0 > pos && (pos = Math.max(length + pos, 0)),\n            length > pos + removeCount || (removeCount = length - pos);\n          var removed = this.slice(pos, pos + removeCount),\n            insert = slice.call(arguments, 2),\n            add = insert.length;\n          if (pos === length) add && this.push.apply(this, insert);\n          else {\n            var remove = Math.min(removeCount, length - pos),\n              tailOldPos = pos + remove,\n              tailNewPos = tailOldPos + add - remove,\n              tailCount = length - tailOldPos,\n              lengthAfterRemove = length - remove;\n            if (tailOldPos > tailNewPos)\n              for (var i = 0; tailCount > i; ++i)\n                this[tailNewPos + i] = this[tailOldPos + i];\n            else if (tailNewPos > tailOldPos)\n              for (i = tailCount; i--; )\n                this[tailNewPos + i] = this[tailOldPos + i];\n            if (add && pos === lengthAfterRemove)\n              (this.length = lengthAfterRemove), this.push.apply(this, insert);\n            else\n              for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i)\n                this[pos + i] = insert[i];\n          }\n          return removed;\n        };}\n  Array.isArray ||\n      (Array.isArray = function (obj) {\n        return '[object Array]' == _toString(obj);\n      });\n  let boxedString = Object('a'),\n    splitString = 'a' != boxedString[0] || !(0 in boxedString);\n  if (\n    (Array.prototype.forEach ||\n        (Array.prototype.forEach = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun)) throw new TypeError();\n          for (; length > ++i;)\n            {i in self && fun.call(thisp, self[i], i, object);}\n        }),\n      Array.prototype.map ||\n        (Array.prototype.map = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self && (result[i] = fun.call(thisp, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.filter ||\n        (Array.prototype.filter = function (fun) {\n          let value,\n            object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            result = [],\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {i in self &&\n              ((value = self[i]),\n              fun.call(thisp, value, i, object) && result.push(value));}\n          return result;\n        }),\n      Array.prototype.every ||\n        (Array.prototype.every = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && !fun.call(thisp, self[i], i, object)) return !1;}\n          return !0;\n        }),\n      Array.prototype.some ||\n        (Array.prototype.some = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          for (let i = 0; length > i; i++)\n            {if (i in self && fun.call(thisp, self[i], i, object)) return !0;}\n          return !1;\n        }),\n      Array.prototype.reduce ||\n        (Array.prototype.reduce = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError('reduce of empty array with no initial value');}\n          let result,\n            i = 0;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i++];\n                break;\n              }\n              if (++i >= length)\n                throw new TypeError(\n                  'reduce of empty array with no initial value'\n                );\n            }}\n          for (; length > i; i++)\n            {i in self &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          return result;\n        }),\n      Array.prototype.reduceRight ||\n        (Array.prototype.reduceRight = function (fun) {\n          let object = toObject(this),\n            self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : object,\n            length = self.length >>> 0;\n          if ('[object Function]' != _toString(fun))\n            {throw new TypeError(fun + ' is not a function');}\n          if (!length && 1 == arguments.length)\n            {throw new TypeError(\n              'reduceRight of empty array with no initial value'\n            );}\n          let result,\n            i = length - 1;\n          if (arguments.length >= 2) result = arguments[1];\n          else\n            {for (;;) {\n              if (i in self) {\n                result = self[i--];\n                break;\n              }\n              if (0 > --i)\n                throw new TypeError(\n                  'reduceRight of empty array with no initial value'\n                );\n            }}\n          do\n            {i in this &&\n              (result = fun.call(void 0, result, self[i], i, object));}\n          while (i--);\n          return result;\n        }),\n      (Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2)) ||\n        (Array.prototype.indexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = 0;\n          for (\n            arguments.length > 1 && (i = toInteger(arguments[1])),\n            i = i >= 0 ? i : Math.max(0, length + i);\n            length > i;\n            i++\n          )\n            {if (i in self && self[i] === sought) return i;}\n          return -1;\n        }),\n      (Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3)) ||\n        (Array.prototype.lastIndexOf = function (sought) {\n          let self =\n              splitString && '[object String]' == _toString(this)\n                ? this.split('')\n                : toObject(this),\n            length = self.length >>> 0;\n          if (!length) return -1;\n          let i = length - 1;\n          for (\n            arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))),\n            i = i >= 0 ? i : length - Math.abs(i);\n            i >= 0;\n            i--\n          )\n            {if (i in self && sought === self[i]) return i;}\n          return -1;\n        }),\n      Object.getPrototypeOf ||\n        (Object.getPrototypeOf = function (object) {\n          return (\n            object.__proto__ ||\n            (object.constructor\n              ? object.constructor.prototype\n              : prototypeOfObject)\n          );\n        }),\n      !Object.getOwnPropertyDescriptor)\n  ) {\n    let ERR_NON_OBJECT =\n        'Object.getOwnPropertyDescriptor called on a non-object: ';\n    Object.getOwnPropertyDescriptor = function (object, property) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT + object);}\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (\n          ((descriptor = { enumerable: !0, configurable: !0 }),\n            supportsAccessors)\n        ) {\n          let prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (((object.__proto__ = prototype), getter || setter))\n            {return (\n                getter && (descriptor.get = getter),\n                setter && (descriptor.set = setter),\n                descriptor\n              );}\n        }\n        return (descriptor.value = object[property]), descriptor;\n      }\n    };\n  }\n  if (\n    (Object.getOwnPropertyNames ||\n        (Object.getOwnPropertyNames = function (object) {\n          return Object.keys(object);\n        }),\n      !Object.create)\n  ) {\n    let createEmpty;\n    (createEmpty =\n        null === Object.prototype.__proto__\n          ? function () {\n            return { __proto__: null };\n          }\n          : function () {\n            let empty = {};\n            for (let i in empty) empty[i] = null;\n            return (\n              (empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null),\n              empty\n            );\n          }),\n    (Object.create = function (prototype, properties) {\n      let object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ('object' !== typeof prototype)\n          {throw new TypeError(\n                'typeof prototype[' + typeof prototype + \"] != 'object'\"\n              );}\n        let Type = function () {};\n        (Type.prototype = prototype),\n        (object = new Type()),\n        (object.__proto__ = prototype);\n      }\n      return (\n        void 0 !== properties &&\n              Object.defineProperties(object, properties),\n        object\n      );\n    });\n  }\n  if (Object.defineProperty) {\n    let definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom =\n          'undefined' === typeof document ||\n          doesDefinePropertyWork(document.createElement('div'));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom)\n      {var definePropertyFallback = Object.defineProperty;}\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    let ERR_NON_OBJECT_DESCRIPTOR =\n          'Property description must be an object: ',\n      ERR_NON_OBJECT_TARGET = 'Object.defineProperty called on non-object: ',\n      ERR_ACCESSORS_NOT_SUPPORTED =\n          'getters & setters can not be defined on this javascript engine';\n    Object.defineProperty = function (object, property, descriptor) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError(ERR_NON_OBJECT_TARGET + object);}\n      if (\n        ('object' !== typeof descriptor && 'function' !== typeof descriptor) ||\n          null === descriptor\n      )\n        {throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);}\n      if (definePropertyFallback)\n        {try {\n            return definePropertyFallback.call(\n              Object,\n              object,\n              property,\n              descriptor\n            );\n          } catch (exception) {}}\n      if (owns(descriptor, 'value'))\n        {if (\n            supportsAccessors &&\n            (lookupGetter(object, property) || lookupSetter(object, property))\n          ) {\n            var prototype = object.__proto__;\n            (object.__proto__ = prototypeOfObject),\n              delete object[property],\n              (object[property] = descriptor.value),\n              (object.__proto__ = prototype);\n          } else object[property] = descriptor.value;}\n      else {\n        if (!supportsAccessors)\n          {throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);}\n        owns(descriptor, 'get') &&\n            defineGetter(object, property, descriptor.get),\n        owns(descriptor, 'set') &&\n              defineSetter(object, property, descriptor.set);\n      }\n      return object;\n    };\n  }\n  Object.defineProperties ||\n      (Object.defineProperties = function (object, properties) {\n        for (let property in properties)\n          {owns(properties, property) &&\n            Object.defineProperty(object, property, properties[property]);}\n        return object;\n      }),\n  Object.seal ||\n        (Object.seal = function (object) {\n          return object;\n        }),\n  Object.freeze ||\n        (Object.freeze = function (object) {\n          return object;\n        });\n  try {\n    Object.freeze(function () {});\n  } catch (exception) {\n    Object.freeze = (function (freezeObject) {\n      return function (object) {\n        return 'function' === typeof object ? object : freezeObject(object);\n      };\n    }(Object.freeze));\n  }\n  if (\n    (Object.preventExtensions ||\n        (Object.preventExtensions = function (object) {\n          return object;\n        }),\n      Object.isSealed ||\n        (Object.isSealed = function () {\n          return !1;\n        }),\n      Object.isFrozen ||\n        (Object.isFrozen = function () {\n          return !1;\n        }),\n      Object.isExtensible ||\n        (Object.isExtensible = function (object) {\n          if (Object(object) === object) throw new TypeError();\n          for (var name = ''; owns(object, name);) name += '?';\n          object[name] = !0;\n          let returnValue = owns(object, name);\n          return delete object[name], returnValue;\n        }),\n      !Object.keys)\n  ) {\n    let hasDontEnumBug = !0,\n      dontEnums = [\n        'toString',\n        'toLocaleString',\n        'valueOf',\n        'hasOwnProperty',\n        'isPrototypeOf',\n        'propertyIsEnumerable',\n        'constructor',\n      ],\n      dontEnumsLength = dontEnums.length;\n    for (let key in { toString: null }) hasDontEnumBug = !1;\n    Object.keys = function (object) {\n      if (\n        ('object' !== typeof object && 'function' !== typeof object) ||\n          null === object\n      )\n        {throw new TypeError('Object.keys called on a non-object');}\n      let keys = [];\n      for (let name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        {for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n            var dontEnum = dontEnums[i];\n            owns(object, dontEnum) && keys.push(dontEnum);\n          }}\n      return keys;\n    };\n  }\n  Date.now ||\n      (Date.now = function () {\n        return new Date().getTime();\n      });\n  let ws = '\t\\nv\\f\\r   ᠎             　\\u2028\\u2029\ufeff';\n  if (!String.prototype.trim || ws.trim()) {\n    ws = '[' + ws + ']';\n    let trimBeginRegexp = RegExp('^' + ws + ws + '*'),\n      trimEndRegexp = RegExp(ws + ws + '*$');\n    String.prototype.trim = function () {\n      return (this + '')\n        .replace(trimBeginRegexp, '')\n        .replace(trimEndRegexp, '');\n    };\n  }\n  var toObject = function (o) {\n    if (null == o) throw new TypeError('can\\'t convert ' + o + ' to object');\n    return Object(o);\n  };\n});\nace.define(\n  'sense_editor/mode/worker_parser',\n  ['require', 'exports', 'module'],\n  function () {\n    let at, // The index of the current character\n      ch, // The current character\n      annos, // annotations\n      escapee = {\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t',\n      },\n      text,\n      annotate = function (type, text) {\n        annos.push({ type: type, text: text, at: at });\n      },\n      error = function (m) {\n        throw {\n          name: 'SyntaxError',\n          message: m,\n          at: at,\n          text: text,\n        };\n      },\n      reset = function (newAt) {\n        ch = text.charAt(newAt);\n        at = newAt + 1;\n      },\n      next = function (c) {\n        if (c && c !== ch) {\n          error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n        }\n\n        ch = text.charAt(at);\n        at += 1;\n        return ch;\n      },\n      nextUpTo = function (upTo, errorMessage) {\n        let currentAt = at,\n          i = text.indexOf(upTo, currentAt);\n        if (i < 0) {\n          error(errorMessage || 'Expected \\'' + upTo + '\\'');\n        }\n        reset(i + upTo.length);\n        return text.substring(currentAt, i);\n      },\n      peek = function (c) {\n        return text.substr(at, c.length) === c; // nocommit - double check\n      },\n      number = function () {\n        let number,\n          string = '';\n\n        if (ch === '-') {\n          string = '-';\n          next('-');\n        }\n        while (ch >= '0' && ch <= '9') {\n          string += ch;\n          next();\n        }\n        if (ch === '.') {\n          string += '.';\n          while (next() && ch >= '0' && ch <= '9') {\n            string += ch;\n          }\n        }\n        if (ch === 'e' || ch === 'E') {\n          string += ch;\n          next();\n          if (ch === '-' || ch === '+') {\n            string += ch;\n            next();\n          }\n          while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n          }\n        }\n        number = +string;\n        if (isNaN(number)) {\n          error('Bad number');\n        } else {\n          return number;\n        }\n      },\n      string = function () {\n        let hex,\n          i,\n          string = '',\n          uffff;\n\n        if (ch === '\"') {\n          if (peek('\"\"')) {\n            // literal\n            next('\"');\n            next('\"');\n            return nextUpTo('\"\"\"', 'failed to find closing \\'\"\"\"\\'');\n          } else {\n            while (next()) {\n              if (ch === '\"') {\n                next();\n                return string;\n              } else if (ch === '\\\\') {\n                next();\n                if (ch === 'u') {\n                  uffff = 0;\n                  for (i = 0; i < 4; i += 1) {\n                    hex = parseInt(next(), 16);\n                    if (!isFinite(hex)) {\n                      break;\n                    }\n                    uffff = uffff * 16 + hex;\n                  }\n                  string += String.fromCharCode(uffff);\n                } else if (typeof escapee[ch] === 'string') {\n                  string += escapee[ch];\n                } else {\n                  break;\n                }\n              } else {\n                string += ch;\n              }\n            }\n          }\n        }\n        error('Bad string');\n      },\n      white = function () {\n        while (ch && ch <= ' ') {\n          next();\n        }\n      },\n      strictWhite = function () {\n        while (ch && (ch == ' ' || ch == '\\t')) {\n          next();\n        }\n      },\n      newLine = function () {\n        if (ch == '\\n') next();\n      },\n      word = function () {\n        switch (ch) {\n          case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n          case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n          case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n        }\n        error('Unexpected \\'' + ch + '\\'');\n      },\n      // parses and returns the method\n      method = function () {\n        switch (ch) {\n          case 'G':\n            next('G');\n            next('E');\n            next('T');\n            return 'GET';\n          case 'H':\n            next('H');\n            next('E');\n            next('A');\n            next('D');\n            return 'HEAD';\n          case 'D':\n            next('D');\n            next('E');\n            next('L');\n            next('E');\n            next('T');\n            next('E');\n            return 'DELETE';\n          case 'P':\n            next('P');\n            switch (ch) {\n              case 'U':\n                next('U');\n                next('T');\n                return 'PUT';\n              case 'O':\n                next('O');\n                next('S');\n                next('T');\n                return 'POST';\n              default:\n                error('Unexpected \\'' + ch + '\\'');\n            }\n            break;\n          default:\n            error('Expected one of GET/POST/PUT/DELETE/HEAD');\n        }\n      },\n      value, // Place holder for the value function.\n      array = function () {\n        const array = [];\n\n        if (ch === '[') {\n          next('[');\n          white();\n          if (ch === ']') {\n            next(']');\n            return array; // empty array\n          }\n          while (ch) {\n            array.push(value());\n            white();\n            if (ch === ']') {\n              next(']');\n              return array;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad array');\n      },\n      object = function () {\n        let key,\n          object = {};\n\n        if (ch === '{') {\n          next('{');\n          white();\n          if (ch === '}') {\n            next('}');\n            return object; // empty object\n          }\n          while (ch) {\n            key = string();\n            white();\n            next(':');\n            if (Object.hasOwnProperty.call(object, key)) {\n              error('Duplicate key \"' + key + '\"');\n            }\n            object[key] = value();\n            white();\n            if (ch === '}') {\n              next('}');\n              return object;\n            }\n            next(',');\n            white();\n          }\n        }\n        error('Bad object');\n      };\n\n    value = function () {\n      white();\n      switch (ch) {\n        case '{':\n          return object();\n        case '[':\n          return array();\n        case '\"':\n          return string();\n        case '-':\n          return number();\n        default:\n          return ch >= '0' && ch <= '9' ? number() : word();\n      }\n    };\n\n    let url = function () {\n        let url = '';\n        while (ch && ch != '\\n') {\n          url += ch;\n          next();\n        }\n        if (url == '') {\n          error('Missing url');\n        }\n        return url;\n      },\n      request = function () {\n        white();\n        method();\n        strictWhite();\n        url();\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        if (ch == '{') {\n          object();\n        }\n        // multi doc request\n        strictWhite(); // advance to one new line\n        newLine();\n        strictWhite();\n        while (ch == '{') {\n          // another object\n          object();\n          strictWhite();\n          newLine();\n          strictWhite();\n        }\n      },\n      comment = function () {\n        while (ch == '#') {\n          while (ch && ch !== '\\n') {\n            next();\n          }\n          white();\n        }\n      },\n      multi_request = function () {\n        while (ch && ch != '') {\n          white();\n          if (!ch) {\n            continue;\n          }\n          try {\n            comment();\n            white();\n            if (!ch) {\n              continue;\n            }\n            request();\n            white();\n          } catch (e) {\n            annotate('error', e.message);\n            // snap\n            const substring = text.substr(at);\n            const nextMatch = substring.search(/^POST|HEAD|GET|PUT|DELETE/m);\n            if (nextMatch < 1) return;\n            reset(at + nextMatch);\n          }\n        }\n      };\n\n    return function (source, reviver) {\n      let result;\n\n      text = source;\n      at = 0;\n      annos = [];\n      next();\n      multi_request();\n      white();\n      if (ch) {\n        annotate('error', 'Syntax error');\n      }\n\n      result = { annotations: annos };\n\n      return typeof reviver === 'function'\n        ? (function walk(holder, key) {\n          let k,\n            v,\n            value = holder[key];\n          if (value && typeof value === 'object') {\n            for (k in value) {\n              if (Object.hasOwnProperty.call(value, k)) {\n                v = walk(value, k);\n                if (v !== undefined) {\n                  value[k] = v;\n                } else {\n                  delete value[k];\n                }\n              }\n            }\n          }\n          return reviver.call(holder, key, value);\n        }({ '': result }, ''))\n        : result;\n    };\n  }\n);\n\nace.define(\n  'sense_editor/mode/worker',\n  [\n    'require',\n    'exports',\n    'module',\n    'ace/lib/oop',\n    'ace/worker/mirror',\n    'sense_editor/mode/worker_parser',\n  ],\n  function (require, exports) {\n    const oop = require('ace/lib/oop');\n    const Mirror = require('ace/worker/mirror').Mirror;\n    const parse = require('sense_editor/mode/worker_parser');\n\n    const SenseWorker = (exports.SenseWorker = function (sender) {\n      Mirror.call(this, sender);\n      this.setTimeout(200);\n    });\n\n    oop.inherits(SenseWorker, Mirror);\n\n    (function () {\n      this.id = 'senseWorker';\n      this.onUpdate = function () {\n        const value = this.doc.getValue();\n        let pos, result;\n        try {\n          result = parse(value);\n        } catch (e) {\n          pos = this.charToDocumentPosition(e.at - 1);\n          this.sender.emit('error', {\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: 'error',\n          });\n          return;\n        }\n        for (let i = 0; i < result.annotations.length; i++) {\n          pos = this.charToDocumentPosition(result.annotations[i].at - 1);\n          result.annotations[i].row = pos.row;\n          result.annotations[i].column = pos.column;\n        }\n        this.sender.emit('ok', result.annotations);\n      };\n\n      this.charToDocumentPosition = function (charPos) {\n        let i = 0;\n        const len = this.doc.getLength();\n        const nl = this.doc.getNewLineCharacter().length;\n\n        if (!len) {\n          return { row: 0, column: 0 };\n        }\n\n        let lineStart = 0,\n          line;\n        while (i < len) {\n          line = this.doc.getLine(i);\n          const lineLength = line.length + nl;\n          if (lineStart + lineLength > charPos) {\n            return {\n              row: i,\n              column: charPos - lineStart,\n            };\n          }\n\n          lineStart += lineLength;\n          i += 1;\n        }\n\n        return {\n          row: i - 1,\n          column: line.length,\n        };\n      };\n    }.call(SenseWorker.prototype));\n  }\n);\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptMode=ScriptMode;var _brace=__webpack_require__(49);var _brace2=_interopRequireDefault(_brace);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace2.default.acequire("ace/lib/oop");var TextMode=_brace2.default.acequire("ace/mode/text").Mode;var MatchingBraceOutdent=_brace2.default.acequire("ace/mode/matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=_brace2.default.acequire("ace/mode/behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=_brace2.default.acequire("ace/mode/folding/cstyle").FoldMode;_brace2.default.acequire("ace/tokenizer");var ScriptHighlightRules=__webpack_require__(523).ScriptHighlightRules;function ScriptMode(){this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(ScriptMode,TextMode);(function(){this.HighlightRules=ScriptHighlightRules;this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);var match=line.match(/^.*[\{\[]\s*$/);if(match){indent+=tab}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)}}).call(ScriptMode.prototype)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.InputHighlightRules=InputHighlightRules;var _x_json_highlight_rules=__webpack_require__(522);var ace=__webpack_require__(49);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;function InputHighlightRules(){function mergeTokens(){return[].concat.apply([],arguments)}function addEOL(tokens,reg,nextIfEOL,normalNext){if((typeof reg==="undefined"?"undefined":_typeof(reg))==="object"){reg=reg.source}return[{token:tokens.concat(["whitespace"]),regex:reg+"(\\s*)$",next:nextIfEOL},{token:tokens,regex:reg,next:normalNext}]}this.$rules={start:mergeTokens([{token:"warning",regex:"#!.*$"},{token:"comment",regex:/^#.*$/},{token:"paren.lparen",regex:"{",next:"json",push:true}],addEOL(["method"],/([a-zA-Z]+)/,"start","method_sep"),[{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}]),method_sep:mergeTokens(addEOL(["whitespace","url.protocol_host","url.slash"],/(\s+)(https?:\/\/[^?\/,]+)(\/)/,"start","url"),addEOL(["whitespace","url.protocol_host"],/(\s+)(https?:\/\/[^?\/,]+)/,"start","url"),addEOL(["whitespace","url.slash"],/(\s+)(\/)/,"start","url"),addEOL(["whitespace"],/(\s+)/,"start","url")),url:mergeTokens(addEOL(["url.part"],/([^?\/,\s]+)/,"start"),addEOL(["url.comma"],/(,)/,"start"),addEOL(["url.slash"],/(\/)/,"start"),addEOL(["url.questionmark"],/(\?)/,"start","urlParams")),urlParams:mergeTokens(addEOL(["url.param","url.equal","url.value"],/([^&=]+)(=)([^&]*)/,"start"),addEOL(["url.param"],/([^&=]+)/,"start"),addEOL(["url.amp"],/(&)/,"start"))};(0,_x_json_highlight_rules.addToRules)(this);if(this.constructor===InputHighlightRules){this.normalizeRules()}}oop.inherits(InputHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(input,output){var $left=input.$el.parent();function readStoredEditorWidth(){return storage.get("editorWidth")}function storeEditorWidth(editorWidth){storage.set("editorWidth",editorWidth)}function setEditorWidth(editorWidth){storeEditorWidth(editorWidth);$left.width(editorWidth)}var $resizer=$("#ConAppResizer");$resizer.on("mousedown",function(event){$resizer.addClass("active");var startWidth=$left.width();var startX=event.pageX;input.resize.topRow=input.renderer.layerConfig.firstRow;output.resize.topRow=output.renderer.layerConfig.firstRow;function onMove(event){setEditorWidth(startWidth+event.pageX-startX)}$(document.body).on("mousemove",onMove).one("mouseup",function(){$resizer.removeClass("active");$(this).off("mousemove",onMove);input.resize();output.resize()})});var initialEditorWidth=readStoredEditorWidth();if(initialEditorWidth!=null){setEditorWidth(initialEditorWidth)}};var $=__webpack_require__(11);var storage=__webpack_require__(114);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;var $=__webpack_require__(11);var history=__webpack_require__(323);var mappings=__webpack_require__(93);function init(input,output){var sourceLocation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"stored";var source=arguments[3];$(document.body).removeClass("fouc");function resetToValues(content){if(content!=null){input.update(content)}output.update("")}function setupAutosave(){var timer=void 0;var saveDelay=500;input.getSession().on("change",function onChange(){if(timer){timer=clearTimeout(timer)}timer=setTimeout(saveCurrentState,saveDelay)})}function saveCurrentState(){try{var content=input.getValue();history.updateCurrentState(content)}catch(e){console.log("Ignoring saving error: "+e)}}function loadSavedState(){var previousSaveState=history.getSavedEditorState();if(sourceLocation==="stored"){if(previousSaveState){resetToValues(previousSaveState.content)}else{resetToValues();input.autoIndent()}}else if(sourceLocation==="http"){var loadFrom={url:source,dataType:"text",kbnXsrfToken:false};if(/https?:\/\/api.github.com/.test(source)){loadFrom.headers={Accept:"application/vnd.github.v3.raw"}}$.ajax(loadFrom).done(function(data){resetToValues(data);input.moveToNextRequestEdge(true);input.highlightCurrentRequestsAndUpdateActionBar();input.updateActionsBar()})}else if(sourceLocation==="text"){resetToValues(source);input.autoIndent();input.moveToNextRequestEdge(true);input.highlightCurrentRequestsAndUpdateActionBar();input.updateActionsBar()}else{resetToValues()}input.moveToNextRequestEdge(true)}history.restoreFromHistory=function applyHistoryElem(req){var session=input.getSession();var pos=input.getCursorPosition();var prefix="";var suffix="\n";if(input.parser.isStartRequestRow(pos.row)){pos.column=0;suffix+="\n"}else if(input.parser.isEndRequestRow(pos.row)){var line=session.getLine(pos.row);pos.column=line.length;prefix="\n\n"}else if(input.parser.isInBetweenRequestsRow(pos.row)){pos.column=0}else{pos=input.nextRequestEnd(pos);prefix="\n\n"}var s=prefix+req.method+" "+req.endpoint;if(req.data){s+="\n"+req.data}s+=suffix;session.insert(pos,s);input.clearSelection();input.moveCursorTo(pos.row+prefix.length,0);input.focus()};setupAutosave();loadSavedState();mappings.startRetrievingAutoCompleteInfo()}module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SenseTopNavController=SenseTopNavController;var _kbn_top_nav_controller=__webpack_require__(526);var _storage=__webpack_require__(114);var _storage2=_interopRequireDefault(_storage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SenseTopNavController(Private,i18n){var KbnTopNavController=Private(_kbn_top_nav_controller.KbnTopNavControllerProvider);var controller=new KbnTopNavController([{key:"welcome",label:i18n("console.topNav.welcomeTabLabel",{defaultMessage:"Welcome"}),hideButton:true,template:"<sense-welcome></sense-welcome>",testId:"consoleWelcomeButton"},{key:"history",label:i18n("console.topNav.historyTabLabel",{defaultMessage:"History"}),description:i18n("console.topNav.historyTabDescription",{defaultMessage:"History"}),template:"<sense-history></sense-history>",testId:"consoleHistoryButton"},{key:"settings",label:i18n("console.topNav.settingsTabLabel",{defaultMessage:"Settings"}),description:i18n("console.topNav.settingsTabDescription",{defaultMessage:"Settings"}),template:"<sense-settings></sense-settings>",testId:"consoleSettingsButton"},{key:"help",label:i18n("console.topNav.helpTabLabel",{defaultMessage:"Help"}),description:i18n("console.topNav.helpTabDescription",{defaultMessage:"Help"}),template:"<sense-help></sense-help>",testId:"consoleHelpButton"}]);if(_storage2.default.get("version_welcome_shown")!=="@@SENSE_REVISION"){controller.open("welcome")}return controller}},,,function(module,exports,__webpack_require__){"use strict";var _eui=__webpack_require__(2);var _require=__webpack_require__(0),memoize=_require.memoize;var moment=__webpack_require__(12);var history=__webpack_require__(323);__webpack_require__(1426);__webpack_require__(3).get("app/sense").directive("senseHistory",function(){return{restrict:"E",template:__webpack_require__(1427),controllerAs:"history",controller:function controller($scope,$element){var _this=this;this.reqs=history.getHistory();this.selectedIndex=0;this.selectedReq=this.reqs[this.selectedIndex];this.viewingReq=this.selectedReq;this.describeReq=memoize(function(req){var endpoint=req.endpoint;var date=moment(req.time);var formattedDate=date.format("MMM D");if(date.diff(moment(),"days")>-7){formattedDate=date.fromNow()}return endpoint+" ("+formattedDate+")"});this.describeReq.cache=new WeakMap;this.clear=function(){history.clearHistory($element);$scope.kbnTopNav.close()};this.restore=function(){var req=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.selectedReq;history.restoreFromHistory(req);$scope.kbnTopNav.close()};this.onKeyDown=function(ev){if(ev.keyCode===_eui.keyCodes.ENTER){_this.restore();return}if(ev.keyCode===_eui.keyCodes.UP){ev.preventDefault();_this.selectedIndex--}else if(ev.keyCode===_eui.keyCodes.DOWN){ev.preventDefault();_this.selectedIndex++}_this.selectedIndex=Math.min(Math.max(0,_this.selectedIndex),_this.reqs.length-1);_this.selectedReq=_this.reqs[_this.selectedIndex];_this.viewingReq=_this.reqs[_this.selectedIndex]}}}})},function(module,exports,__webpack_require__){"use strict";var _sense_editor_resize=__webpack_require__(319);var SenseEditor=__webpack_require__(322);__webpack_require__(3).get("app/sense").directive("senseHistoryViewer",function(i18n){return{restrict:"E",scope:{req:"="},link:function link($scope,$el){var viewer=new SenseEditor($el);viewer.setReadOnly(true);viewer.renderer.setShowPrintMargin(false);(0,_sense_editor_resize.useResizeChecker)($scope,$el,viewer);__webpack_require__(113).applyCurrentSettings(viewer);$scope.$watch("req",function(req){if(req){var s=req.method+" "+req.endpoint+"\n"+(req.data||"");viewer.setValue(s);viewer.clearSelection()}else{viewer.getSession().setValue(i18n("console.historyPage.noHistoryTextMessage",{defaultMessage:"No history available"}))}});$scope.$on("$destroy",function(){viewer.destroy()})}}})},function(module,exports){module.exports='<h2\n  class="kuiLocalDropdownTitle"\n  i18n-id="console.historyPage.pageTitle"\n  i18n-default-message="History"\n></h2>\n\n<div class="conHistory__body">\n  <ul\n    class="list-group conHistory__reqs"\n    tabindex="0"\n    role="listbox"\n    aria-activedescendant="historyReq{{ history.selectedIndex }}"\n    scrollto-activedescendant\n    ng-keydown="history.onKeyDown($event)"\n    aria-label="{{:: \'console.historyPage.requestListAriaLabel\' | i18n: { defaultMessage: \'History of sent requests\' } }}"\n  >\n    <li\n      class="list-group-item conHistory__req"\n      role="option"\n      ng-repeat="req in history.reqs"\n      id="historyReq{{$index}}"\n      ng-class="{ \'conHistory__req-selected\': history.viewingReq === req }"\n      ng-click="history.selectedReq = req; history.viewingReq = req; history.selectedIndex = $index"\n      ng-mouseenter="history.viewingReq = req"\n      ng-mouseleave="history.viewingReq = history.selectedReq"\n      ng-dblclick="history.restore(req)"\n      aria-label="{{:: \'console.historyPage.itemOfRequestListAriaLabel\' | i18n: { defaultMessage: \'Request: {historyItem}\', values: { historyItem: history.describeReq(req) },} }}"\n      aria-selected="{{ history.selectedReq === req }}"\n    >\n      {{ history.describeReq(req) }}\n      <span class="conHistory__reqIcon"><i class="fa fa-chevron-right"></i></span>\n    </li>\n  </ul>\n\n  <sense-history-viewer class="conHistory__viewer" req="history.viewingReq" />\n</div>\n\n<div class="conHistory__footer">\n  <button\n    class="kuiButton kuiButton--danger"\n    ng-click="history.clear()"\n    i18n-id="console.historyPage.clearHistoryButtonLabel"\n    i18n-default-message="Clear"\n  ></button>\n  <button\n    class="kuiButton kuiButton--primary"\n    ng-disabled="!history.selectedReq"\n    ng-click="history.restore()"\n    i18n-id="console.historyPage.applyHistoryButtonLabel"\n    i18n-default-message="Apply"\n  >\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(324);__webpack_require__(3).get("app/sense").directive("senseSettings",function(){return{restrict:"E",template:__webpack_require__(1429),controllerAs:"settings",controller:function controller($scope,$element){var _this=this;var settings=__webpack_require__(113);this.vals=settings.getCurrentSettings();this.apply=function(){_this.vals=settings.updateSettings(_this.vals);$scope.kbnTopNav.close()};var self=this;function onEnter(event){if(event.which===13){self.apply()}}var boundElement=$element.bind("keydown",onEnter);$scope.$on("$destroy",function(){return boundElement.unbind("keydown",onEnter)})}}})},function(module,exports){module.exports='<h2\n  class="kuiLocalDropdownTitle"\n  i18n-id="console.settingsPage.pageTitle"\n  i18n-default-message="Settings"\n></h2>\n\n<form class="form" name="settingsForm" ng-submit="settingsForm.$valid && settings.apply()">\n  <fieldset\n    class="kuiVerticalRhythm"\n    role="group"\n  >\n    <div class="kuiLocalDropdownHeader">\n      <legend\n        id="consoleFontSize"\n        class="kuiLocalDropdownHeader__label"\n        i18n-id="console.settingsPage.fontSizeLabel"\n        i18n-default-message="Font Size"\n      ></legend>\n    </div>\n\n    <input\n      input-focus\n      ng-model="settings.vals.fontSize"\n      name="fontSize"\n      type="number"\n      required\n      class="kuiLocalDropdownInput kuiVerticalRhythmSmall"\n      aria-labelledby="consoleFontSize"\n      data-test-subj="setting-font-size-input"\n    >\n\n    <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n      <input\n        class="kuiCheckBox"\n        type="checkbox"\n        ng-model="settings.vals.wrapMode"\n        aria-describedby="consoleFontSize"\n      >\n      <span\n        class="kuiCheckBoxLabel__text"\n        i18n-id="console.settingsPage.wrapLongLinesLabelText"\n        i18n-default-message="Wrap long lines"\n      ></span>\n    </label>\n  </fieldset>\n\n  <fieldset\n    class="kuiVerticalRhythm"\n    role="group"\n  >\n    <div class="kuiLocalDropdownHeader">\n      <legend\n        id="consoleAutocomplete"\n        class="kuiLocalDropdownHeader__label"\n        i18n-id="console.settingsPage.autocompleteLabel"\n        i18n-default-message="Autocomplete"\n      ></legend>\n    </div>\n\n    <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n      <input\n        class="kuiCheckBox"\n        name="autocompleteFields"\n        type="checkbox"\n        ng-model="settings.vals.autocomplete.fields"\n        aria-describedby="consoleAutocomplete"\n      >\n      <span\n        class="kuiCheckBoxLabel__text"\n        i18n-id="console.settingsPage.fieldsLabelText"\n        i18n-default-message="Fields"\n      ></span>\n    </label>\n\n    <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n      <input\n        class="kuiCheckBox"\n        name="autocompleteIndices"\n        type="checkbox"\n        ng-model="settings.vals.autocomplete.indices"\n        aria-describedby="consoleAutocomplete"\n      >\n      <span\n        class="kuiCheckBoxLabel__text"\n        i18n-id="console.settingsPage.indicesAndAliasesLabelText"\n        i18n-default-message="Indices &amp; Aliases"\n      ></span>\n    </label>\n\n    <label class="kuiCheckBoxLabel kuiVerticalRhythmSmall">\n      <input\n        class="kuiCheckBox"\n        name="autocompleteTemplates"\n        type="checkbox"\n        ng-model="settings.vals.autocomplete.templates"\n        aria-describedby="consoleAutocomplete"\n      >\n      <span\n        class="kuiCheckBoxLabel__text"\n        i18n-id="console.settingsPage.templatesLabelText"\n        i18n-default-message="Templates"\n      ></span>\n    </label>\n  </fieldset>\n\n  <div class="kuiVerticalRhythm">\n    <button\n      ng-click="kbnTopNav.close()"\n      class="kuiButton kuiButton--hollow"\n      i18n-id="console.settingsPage.cancelButtonLabel"\n      i18n-default-message="Cancel"\n    ></button>\n\n    <button\n      type="submit"\n      ng-disabled="settingsForm.$invalid"\n      class="kuiButton kuiButton--primary"\n      data-test-subj="settings-save-button"\n      i18n-id="console.settingsPage.saveButtonLabel"\n      i18n-default-message="Save"\n    ></button>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(527);__webpack_require__(3).get("app/sense").directive("senseHelp",function(){return{restrict:"E",template:__webpack_require__(1432)}})},function(module,exports){module.exports='# index a doc\nPUT index/type/1\n{\n  "body": "here"\n}\n\n# and get it ...\nGET index/type/1\n'},function(module,exports){module.exports='<h2\n  class="euiTitle euiTitle--small"\n  i18n-id="console.helpPage.pageTitle"\n  i18n-default-message="Help"\n></h2>\n\n<div class="euiSpacer euiSpacer--m"></div>\n\n<div class="euiPanel euiPanel--paddingLarge">\n  <div class="euiFlexGroup euiFlexGroup--gutterExtraLarge">\n    <div class="euiFlexItem">\n      <h3\n        class="euiTitle euiTitle--xsmall"\n        i18n-id="console.helpPage.requestFormatTitle"\n        i18n-default-message="Request format"\n      ></h3>\n      <div class="euiSpacer euiSpacer--l"></div>\n      <span\n        i18n-id="console.helpPage.requestFormatDescription"\n        i18n-default-message="You can type one or more requests in the white editor. Console understands requests in a compact format:"\n      ></span>\n      <sense-help-example class="conHelp__example"></sense-help-example>\n    </div>\n    <div class="euiFlexItem">\n      <h3\n        i18n-id="console.helpPage.keyboardCommandsTitle"\n        i18n-default-message="Keyboard commands"\n        class="euiTitle euiTitle--xsmall"\n      ></h3>\n      <div class="euiSpacer euiSpacer--l"></div>\n      <dl class="euiDescriptionList euiDescriptionList--row euiDescriptionList--compressed">\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + I</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.autoIndentDescription"\n          i18n-default-message="Auto indent current request"\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + /</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.openDocumentationDescription"\n          i18n-default-message="Open documentation for current request"\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl + Space</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.openAutoCompleteDescription"\n          i18n-default-message="Open Auto complete (even if not typing)"\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + Enter</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.submitRequestDescription"\n          i18n-default-message="Submit request"\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + Up/Down</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.jumpToPreviousNextRequestDescription"\n          i18n-default-message="Jump to the previous/next request start or end."\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + Alt + L</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.collapseExpandCurrentScopeDescription"\n          i18n-default-message="Collapse/expand current scope."\n        ></dd>\n        <dt class="euiDescriptionList__title">Ctrl/Cmd + Option + 0</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.collapseAllScopesDescription"\n          i18n-default-message="Collapse all scopes but the current one. Expand by adding a shift."\n        ></dd>\n        <dt class="euiDescriptionList__title">Down arrow</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.switchFocusToAutoCompleteMenuDescription"\n          i18n-default-message="Switch focus to auto-complete menu. Use arrows to further select a term"\n        ></dd>\n        <dt class="euiDescriptionList__title">Enter/Tab</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.selectCurrentlySelectedInAutoCompleteMenuDescription"\n          i18n-default-message="Select the currently selected or the top most term in auto-complete menu"\n        ></dd>\n        <dt class="euiDescriptionList__title">Esc</dt>\n        <dd\n          class="euiDescriptionList__description"\n          i18n-id="console.helpPage.keyboardCommands.closeAutoCompleteMenuDescription"\n          i18n-default-message="Close auto-complete menu"\n        ></dd>\n      </dl>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(527);var storage=__webpack_require__(114);__webpack_require__(3).get("app/sense").directive("senseWelcome",function(i18n){return{restrict:"E",template:__webpack_require__(1434),link:function link($scope){$scope.$on("$destroy",function(){storage.set("version_welcome_shown","@@SENSE_REVISION")});$scope.asWellAsFragmentText=i18n("console.welcomePage.supportedRequestFormatDescription.asWellAsFragmentText",{defaultMessage:"as well as"})}}})},function(module,exports){module.exports='<div class="euiText">\n\n  <h2\n    i18n-id="console.welcomePage.pageTitle"\n    i18n-default-message="Welcome to Console"\n  ></h2>\n\n  <p>\n    <strong\n      i18n-id="console.welcomePage.quickIntroTitle"\n      i18n-default-message="Quick intro to the UI"\n    ></strong>\n  </p>\n\n  <p\n    i18n-id="console.welcomePage.quickIntroDescription"\n    i18n-default-message="The Console UI is split into two panes: an editor pane (left) and a response pane (right).\n    Use the editor to type requests and submit them to Elasticsearch. The results will be displayed in\n    the response pane on the right side."\n  ></p>\n\n  <p\n    i18n-id="console.welcomePage.supportedRequestFormatTitle"\n    i18n-default-message="Console understands requests in a compact format, similar to cURL:"\n  ></p>\n  <sense-help-example></sense-help-example>\n\n  <p\n    i18n-id="console.welcomePage.supportedRequestFormatDescription"\n    i18n-default-message="While typing a request, Console will make suggestions which you can then accept by hitting Enter/Tab.\n    These suggestions are made based on the request structure {asWellAs} your indices and types."\n    i18n-values="{ html_asWellAs: \'<i>\' + asWellAsFragmentText + \'</i>\' }"\n  >\n  </p>\n\n  <p>\n    <strong\n      i18n-id="console.welcomePage.quickTipsTitle"\n      i18n-default-message="A few quick tips, while I have your attention"\n    >\n    </strong>\n  </p>\n  <ul>\n    <li\n      i18n-id="console.welcomePage.quickTips.submitRequestDescription"\n      i18n-default-message="Submit requests to ES using the green triangle button."\n    ></li>\n    <li\n      i18n-id="console.welcomePage.quickTips.useWrenchMenuDescription"\n      i18n-default-message="Use the wrench menu for other useful things."\n    ></li>\n    <li\n      i18n-id="console.welcomePage.quickTips.cUrlFormatForRequestsDescription"\n      i18n-default-message="You can paste requests in cURL format and they will be translated to the Console syntax."\n    ></li>\n    <li\n      i18n-id="console.welcomePage.quickTips.resizeEditorDescription"\n      i18n-default-message="You can resize the editor and output panes by dragging the separator between them."\n    ></li>\n    <li\n      i18n-id="console.welcomePage.quickTips.keyboardShortcutsDescription"\n      i18n-default-message="Study the keyboard shortcuts under the Help button. Good stuff in there!"\n    ></li>\n  </ul>\n\n  <button\n    type="button"\n    class="kuiButton kuiButton--primary"\n    data-test-subj="help-close-button"\n    ng-click="kbnTopNav.close()"\n    i18n-id="console.welcomePage.closeButtonLabel"\n    i18n-default-message="Get to work"\n  >\n  </button>\n\n</div>\n'},function(module,exports,__webpack_require__){__webpack_require__(1436)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1437);__webpack_require__(1439)},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _doc_views=__webpack_require__(325);var _table=__webpack_require__(1438);var _table2=_interopRequireDefault(_table);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_doc_views.DocViewsRegistryProvider.register(function(){return{title:_i18n.i18n.translate("kbnDocViews.table.tableTitle",{defaultMessage:"Table"}),order:10,directive:{template:_table2.default,scope:{hit:"=",indexPattern:"=",filter:"=",columns:"=",onAddColumn:"=",onRemoveColumn:"="},controller:function controller($scope){$scope.mapping=$scope.indexPattern.fields.byName;$scope.flattened=$scope.indexPattern.flattenHit($scope.hit);$scope.formatted=$scope.indexPattern.formatHit($scope.hit);$scope.fields=_lodash2.default.keys($scope.flattened).sort();$scope.canToggleColumns=function canToggleColumn(){return _lodash2.default.isFunction($scope.onAddColumn)&&_lodash2.default.isFunction($scope.onRemoveColumn)};$scope.toggleColumn=function toggleColumn(columnName){if($scope.columns.includes(columnName)){$scope.onRemoveColumn(columnName)}else{$scope.onAddColumn(columnName)}};$scope.isColumnActive=function isColumnActive(columnName){return $scope.columns.includes(columnName)};$scope.showArrayInObjectsWarning=function(row,field){var value=$scope.flattened[field];return Array.isArray(value)&&_typeof(value[0])==="object"}}}}})},function(module,exports){module.exports='<table class="table table-condensed">\n  <tbody>\n    <tr ng-repeat="field in fields" data-test-subj="tableDocViewRow-{{ field }}">\n      <td field-name="field"\n          field-type="mapping[field].type"\n          width="1%"\n          class="kbnDocViewer__field">\n      </td>\n      <td width="1%" class="kbnDocViewer__buttons" ng-if="filter">\n        <span ng-if="mapping[field].filterable">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterForValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter for value\' } }}"\n            ng-click="filter(mapping[field], flattened[field], \'+\')"\n            data-test-subj="addInclusiveFilterButton"\n            tooltip="{{ ::\'kbnDocViews.table.filterForValueButtonTooltip\' | i18n: { defaultMessage: \'Filter for value\' } }}"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-search-plus"></i>\n          </button>\n\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterOutValueButtonAriaLabel\' | i18n: { defaultMessage: \'Filter out value\' } }}"\n            ng-click="filter(mapping[field], flattened[field],\'-\')"\n            tooltip="{{ ::\'kbnDocViews.table.filterOutValueButtonTooltip\' | i18n: { defaultMessage: \'Filter out value\' } }}"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-search-minus"></i>\n          </button>\n        </span>\n        <span\n          ng-if="!mapping[field].filterable"\n          tooltip="{{ ::\'kbnDocViews.table.unindexedFieldsCanNotBeSearchedTooltip\' | i18n: { defaultMessage: \'Unindexed fields can not be searched\' } }}"\n        >\n          <i class="fa fa-search-plus text-muted"></i>\n          <i class="fa fa-search-minus text-muted"></i>\n        </span>\n        <span ng-if="canToggleColumns()">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.toggleColumnInTableButtonAriaLabel\' | i18n: { defaultMessage: \'Toggle column in table\' } }}"\n            aria-pressed="{{isColumnActive(field)}}"\n            ng-click="toggleColumn(field)"\n            tooltip-append-to-body="1"\n            tooltip="{{ ::\'kbnDocViews.table.toggleColumnInTableButtonTooltip\' | i18n: { defaultMessage: \'Toggle column in table\' } }}"\n          >\n            <i\n              class="fa fa-columns"\n            ></i>\n          </button>\n        </span>\n        <span ng-if="!indexPattern.metaFields.includes(field) && !mapping[field].scripted">\n          <button\n            aria-label="{{ ::\'kbnDocViews.table.filterForFieldPresentButtonAriaLabel\' | i18n: { defaultMessage: \'Filter for field present\' } }}"\n            ng-click="filter(\'_exists_\', field, \'+\')"\n            tooltip="{{ ::\'kbnDocViews.table.filterForFieldPresentButtonTooltip\' | i18n: { defaultMessage: \'Filter for field present\' } }}"\n            tooltip-append-to-body="1"\n          >\n            <i\n              class="fa fa-asterisk"></i>\n          </button>\n        </span>\n        <span\n          ng-if="indexPattern.metaFields.includes(field)"\n          tooltip="{{ ::\'kbnDocViews.table.unableToFilterForPresenceOfMetaFieldsTooltip\' | i18n: { defaultMessage: \'Unable to filter for presence of meta fields\' } }}"\n        >\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n        <span\n          ng-if="mapping[field].scripted"\n          tooltip="{{ ::\'kbnDocViews.table.unableToFilterForPresenceOfScriptedFieldsTooltip\' | i18n: { defaultMessage: \'Unable to filter for presence of scripted fields\' } }}"\n        >\n          <i class="fa fa-asterisk text-muted"></i>\n        </span>\n      </td>\n\n      <td>\n        <i ng-if="!mapping[field] && field[0] === \'_\'"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.fieldNamesBeginningWithUnderscoreUnsupportedTooltip\' | i18n: {\n            defaultMessage: \'Field names beginning with {underscoreSign} are not supported\',\n            values: { underscoreSign: \'_\' }\n          } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__underscore"></i>\n        <i ng-if="!mapping[field] && field[0] !== \'_\' && !showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.noCachedMappingForThisFieldTooltip\' | i18n: { defaultMessage: \'No cached mapping for this field. Refresh field list from the Management > Index Patterns page\' } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__noMapping"></i>\n        <i ng-if="showArrayInObjectsWarning(doc, field)"\n          tooltip-placement="top"\n          tooltip="{{ ::\'kbnDocViews.table.objectsInArraysAreNotWellSupportedTooltip\' | i18n: { defaultMessage: \'Objects in arrays are not well supported.\' } }}"\n          class="fa fa-warning text-color-warning kbnDocViewer__objectArray"></i>\n        <div class="kbnDocViewer__value" ng-bind-html="typeof(formatted[field]) === \'undefined\' ? hit[field] : formatted[field] | trustAsHtml"></div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(module,exports,__webpack_require__){"use strict";var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);__webpack_require__(345);var _doc_views=__webpack_require__(325);var _json=__webpack_require__(1440);var _json2=_interopRequireDefault(_json);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_doc_views.DocViewsRegistryProvider.register(function(){return{title:"JSON",order:20,directive:{template:_json2.default,scope:{hit:"="},controller:function controller($scope){$scope.hitJson=_angular2.default.toJson($scope.hit,true);$scope.aceLoaded=function(editor){editor.$blockScrolling=Infinity}}}}})},function(module,exports){module.exports='<div\n  id="json-ace"\n  ng-model="hitJson"\n  readonly\n  ui-ace="{\n    useWrapMode: true,\n    onLoad: aceLoaded,\n    advanced: {\n      highlightActiveLine: false\n    },\n    rendererOptions: {\n      showPrintMargin: false,\n      maxLines: 4294967296\n    },\n    mode: \'json\'\n  }"></div>\n'},function(module,exports,__webpack_require__){__webpack_require__(1442);__webpack_require__(1493)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.searchEmbeddableFactoryProvider=searchEmbeddableFactoryProvider;var _search_embeddable_factory=__webpack_require__(1443);var _embeddable_factories_registry=__webpack_require__(250);function searchEmbeddableFactoryProvider(Private){var SearchEmbeddableFactoryProvider=function SearchEmbeddableFactoryProvider($compile,$rootScope,savedSearches,Promise,courier){return new _search_embeddable_factory.SearchEmbeddableFactory($compile,$rootScope,savedSearches,Promise,courier)};return Private(SearchEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(searchEmbeddableFactoryProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddableFactory=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();__webpack_require__(528);var _embeddable=__webpack_require__(42);var _search_embeddable=__webpack_require__(1491);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SearchEmbeddableFactory=exports.SearchEmbeddableFactory=function(_EmbeddableFactory){_inherits(SearchEmbeddableFactory,_EmbeddableFactory);function SearchEmbeddableFactory($compile,$rootScope,searchLoader){_classCallCheck(this,SearchEmbeddableFactory);var _this=_possibleConstructorReturn(this,(SearchEmbeddableFactory.__proto__||Object.getPrototypeOf(SearchEmbeddableFactory)).call(this,{name:"search"}));_this.$compile=$compile;_this.searchLoader=searchLoader;_this.$rootScope=$rootScope;return _this}_createClass(SearchEmbeddableFactory,[{key:"getEditPath",value:function getEditPath(panelId){return this.searchLoader.urlFor(panelId)}},{key:"create",value:function create(panelMetadata,onEmbeddableStateChanged){var _this2=this;var searchId=panelMetadata.id;var editUrl=this.getEditPath(searchId);return this.searchLoader.get(searchId).then(function(savedObject){return new _search_embeddable.SearchEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedSearch:savedObject,editUrl:editUrl,$rootScope:_this2.$rootScope,$compile:_this2.$compile})})}}]);return SearchEmbeddableFactory}(_embeddable.EmbeddableFactory)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _doc_table=__webpack_require__(1445);var _doc_table2=_interopRequireDefault(_doc_table);var _get_sort=__webpack_require__(529);__webpack_require__(262);__webpack_require__(530);__webpack_require__(1446);__webpack_require__(531);var _render_complete=__webpack_require__(70);var _modules=__webpack_require__(3);var _courier_inspector_utils=__webpack_require__(240);var _doc_table_strings=__webpack_require__(1483);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("docTable",function(config,Notifier,getAppState,pagerFactory,$filter,courier,i18n){return{restrict:"E",template:_doc_table2.default,scope:{sorting:"=",columns:"=",hits:"=?",indexPattern:"=?",searchSource:"=?",infiniteScroll:"=?",filter:"=?",filters:"=?",minimumVisibleRows:"=?",onAddColumn:"=?",onChangeSortOrder:"=?",onMoveColumn:"=?",onRemoveColumn:"=?",inspectorAdapters:"=?"},link:function link($scope,$el){var notify=new Notifier;$scope.$watch("minimumVisibleRows",function(minimumVisibleRows){$scope.limit=Math.max(minimumVisibleRows||50,$scope.limit||50)});$scope.persist={sorting:$scope.sorting,columns:$scope.columns};var limitTo=$filter("limitTo");var calculateItemsOnPage=function calculateItemsOnPage(){$scope.pager.setTotalItems($scope.hits.length);$scope.pageOfItems=limitTo($scope.hits,$scope.pager.pageSize,$scope.pager.startIndex)};$scope.limitedResultsWarning=(0,_doc_table_strings.getLimitedSearchResultsMessage)(config.get("discover:sampleSize"));$scope.addRows=function(){$scope.limit+=50};$scope.$watch("columns",function(columns){if(columns.length!==0)return;var $state=getAppState();$scope.columns.push("_source");if($state)$state.replace()});$scope.$watchCollection("columns",function(columns,oldColumns){if(oldColumns.length===1&&oldColumns[0]==="_source"&&$scope.columns.length>1){_lodash2.default.pull($scope.columns,"_source")}if($scope.columns.length===0)$scope.columns.push("_source")});$scope.$watch("searchSource",function(){if(!$scope.searchSource)return;$scope.indexPattern=$scope.searchSource.getField("index");$scope.searchSource.setField("size",config.get("discover:sampleSize"));$scope.searchSource.setField("sort",(0,_get_sort.getSort)($scope.sorting,$scope.indexPattern));$scope.$watchCollection("sorting",function(newSort,oldSort){if(newSort===oldSort)return;$scope.searchSource.setField("sort",(0,_get_sort.getSort)(newSort,$scope.indexPattern));$scope.searchSource.fetchQueued()});$scope.$on("$destroy",function(){if($scope.searchSource)$scope.searchSource.destroy()});function onResults(resp){$scope.limit=50;if($scope.searchSource!==$scope.searchSource)return;$scope.hits=resp.hits.hits;if($scope.hits.length===0){(0,_render_complete.dispatchRenderComplete)($el[0])}$scope.totalHitCount=resp.hits.total;$scope.pager=pagerFactory.create($scope.hits.length,50,1);calculateItemsOnPage();return $scope.searchSource.onResults().then(onResults)}function startSearching(){var inspectorRequest=undefined;if(_lodash2.default.has($scope,"inspectorAdapters.requests")){$scope.inspectorAdapters.requests.reset();var title=i18n("common.ui.docTable.inspectorRequestDataTitle",{defaultMessage:"Data"});var description=i18n("common.ui.docTable.inspectorRequestDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."});inspectorRequest=$scope.inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats((0,_courier_inspector_utils.getRequestInspectorStats)($scope.searchSource));$scope.searchSource.getSearchRequestBody().then(function(body){inspectorRequest.json(body)})}$scope.searchSource.onResults().then(function(resp){if(inspectorRequest){inspectorRequest.stats((0,_courier_inspector_utils.getResponseInspectorStats)($scope.searchSource,resp)).ok({json:resp})}return resp}).then(onResults).catch(function(error){notify.error(error);startSearching()})}startSearching();courier.fetch()});$scope.pageOfItems=[];$scope.onPageNext=function(){$scope.pager.nextPage();calculateItemsOnPage()};$scope.onPagePrevious=function(){$scope.pager.previousPage();calculateItemsOnPage()};$scope.shouldShowLimitedResultsWarning=function(){return!$scope.pager.hasNextPage&&$scope.pager.totalItems<$scope.totalHitCount}}}})},function(module,exports){module.exports='<div\n  class="kbnDocTable__container"\n  ng-if="hits.length"\n  ng-class="{ loading: searchSource.activeFetchCount > 0 }"\n>\n  <div ng-if="!infiniteScroll">\n    <div class="kuiBar kbnDocTable__bar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n    <table class="kbnDocTable table" ng-if="indexPattern">\n      <thead\n        kbn-table-header\n        columns="columns"\n        index-pattern="indexPattern"\n        sort-order="sorting"\n        on-change-sort-order="onChangeSortOrder"\n        on-move-column="onMoveColumn"\n        on-remove-column="onRemoveColumn"\n      ></thead>\n      <tbody>\n        <tr ng-repeat="row in pageOfItems|limitTo:limit track by row._index+row._type+row._id+row._score+row._version"\n          kbn-table-row="row"\n          columns="columns"\n          sorting="sorting"\n          index-pattern="indexPattern"\n          filter="filter"\n          filters="filters"\n          class="kbnDocTable__row"\n          on-add-column="onAddColumn"\n          on-change-sort-order="onChangeSortOrder"\n          on-remove-column="onRemoveColumn"\n        ></tr>\n      </tbody>\n    </table>\n    \x3c!-- ToolBarFooter --\x3e\n    <div class="kuiBar kbnDocTable__bar">\n      <div class="kuiBarSection">\n        <div\n          ng-if="shouldShowLimitedResultsWarning()"\n          class="kuiToolBarText kuiSubduedText"\n        >\n          {{ limitedResultsWarning }}\n        </div>\n        \x3c!-- Pagination --\x3e\n        <tool-bar-pager-text\n          start-item="pager.startItem"\n          end-item="pager.endItem"\n          total-items="totalHitCount"\n        ></tool-bar-pager-text>\n        <tool-bar-pager-buttons\n          has-previous-page="pager.hasPreviousPage"\n          has-next-page="pager.hasNextPage"\n          on-page-next="onPageNext"\n          on-page-previous="onPagePrevious"\n        ></tool-bar-pager-buttons>\n      </div>\n    </div>\n  </div>\n\n  <table ng-if="infiniteScroll" class="kbn-table table" ng-if="indexPattern" data-test-subj="docTable">\n    <thead\n      kbn-table-header\n      columns="columns"\n      index-pattern="indexPattern"\n      sort-order="sorting"\n      on-change-sort-order="onChangeSortOrder"\n      on-move-column="onMoveColumn"\n      on-remove-column="onRemoveColumn"\n    ></thead>\n    <tbody>\n      <tr ng-repeat="row in hits|limitTo:limit track by row._index+row._type+row._id+row._score+row._version"\n        kbn-table-row="row"\n        columns="columns"\n        sorting="sorting"\n        index-pattern="indexPattern"\n        filter="filter"\n        filters="filters"\n        class="kbnDocTable__row"\n        ng-class="{\'kbnDocTable__row--highlight\': row[\'$$_isAnchor\']}"\n        data-test-subj="docTableRow{{ row[\'$$_isAnchor\'] ? \' docTableAnchorRow\' : \'\'}}"\n        on-add-column="onAddColumn"\n        on-change-sort-order="onChangeSortOrder"\n        on-remove-column="onRemoveColumn"\n      ></tr>\n    </tbody>\n  </table>\n  <kbn-infinite-scroll ng-if="infiniteScroll" more="addRows"></kbn-infinite-scroll>\n</div>\n\n<div ng-if="hits != null && !hits.length" class="kbnDocTable__error">\n  <h2><i class="fa fa-meh-o"></i></h2>\n  <h4 i18n-id="common.ui.docTable.noResultsTitle"\n    i18n-default-message="No results found"\n  ></h4>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(249);var _table_header=__webpack_require__(1447);var _table_header2=_interopRequireDefault(_table_header);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/discover");_module.directive("kbnTableHeader",function(shortDotsFilter,i18n){return{restrict:"A",scope:{columns:"=",sortOrder:"=",indexPattern:"=",onChangeSortOrder:"=?",onRemoveColumn:"=?",onMoveColumn:"=?"},template:_table_header2.default,controller:function controller($scope,config){$scope.hideTimeColumn=config.get("doc_table:hideTimeColumn");$scope.isSortableColumn=function isSortableColumn(columnName){return!!$scope.indexPattern&&_lodash2.default.isFunction($scope.onChangeSortOrder)&&_lodash2.default.get($scope,["indexPattern","fields","byName",columnName,"sortable"],false)};$scope.tooltip=function(column){if(!$scope.isSortableColumn(column))return"";return i18n("common.ui.docTable.tableHeader.sortByColumnTooltip",{defaultMessage:"Sort by {columnName}",values:{columnName:shortDotsFilter(column)}})};$scope.canMoveColumnLeft=function canMoveColumn(columnName){return _lodash2.default.isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)>0};$scope.canMoveColumnRight=function canMoveColumn(columnName){return _lodash2.default.isFunction($scope.onMoveColumn)&&$scope.columns.indexOf(columnName)<$scope.columns.length-1};$scope.canRemoveColumn=function canRemoveColumn(columnName){return _lodash2.default.isFunction($scope.onRemoveColumn)&&(columnName!=="_source"||$scope.columns.length>1)};$scope.headerClass=function(column){if(!$scope.isSortableColumn(column))return;var sortOrder=$scope.sortOrder;var defaultClass=["fa","fa-sort-up","kbnDocTableHeader__sortChange"];if(!sortOrder||column!==sortOrder[0])return defaultClass;return["fa",sortOrder[1]==="asc"?"fa-sort-up":"fa-sort-down"]};$scope.moveColumnLeft=function moveLeft(columnName){var newIndex=$scope.columns.indexOf(columnName)-1;if(newIndex<0){return}$scope.onMoveColumn(columnName,newIndex)};$scope.moveColumnRight=function moveRight(columnName){var newIndex=$scope.columns.indexOf(columnName)+1;if(newIndex>=$scope.columns.length){return}$scope.onMoveColumn(columnName,newIndex)};$scope.cycleSortOrder=function cycleSortOrder(columnName){if(!$scope.isSortableColumn(columnName)){return}var _$scope$sortOrder=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder[0],_$scope$sortOrder$=_$scope$sortOrder[1],currentDirection=_$scope$sortOrder$===undefined?"asc":_$scope$sortOrder$;var newDirection=columnName===currentColumnName&&currentDirection==="asc"?"desc":"asc";$scope.onChangeSortOrder(columnName,newDirection)};$scope.getAriaLabelForColumn=function getAriaLabelForColumn(name){if(!$scope.isSortableColumn(name))return null;var _$scope$sortOrder2=_slicedToArray($scope.sortOrder,2),currentColumnName=_$scope$sortOrder2[0],_$scope$sortOrder2$=_$scope$sortOrder2[1],currentDirection=_$scope$sortOrder2$===undefined?"asc":_$scope$sortOrder2$;if(name===currentColumnName&&currentDirection==="asc"){return i18n("common.ui.docTable.tableHeader.sortByColumnDescendingAriaLabel",{defaultMessage:"Sort {columnName} descending",values:{columnName:name}})}return i18n("common.ui.docTable.tableHeader.sortByColumnAscendingAriaLabel",{defaultMessage:"Sort {columnName} ascending",values:{columnName:name}})}}}})},function(module,exports){module.exports='<tr>\n  <td width="1%"></td>\n  <th\n    ng-if="indexPattern.timeFieldName && !hideTimeColumn"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span>\n      <span\n        i18n-id="common.ui.docTable.tableHeader.timeHeaderCellTitle"\n        i18n-default-message="Time"\n      ></span>\n      <button\n      id="docTableHeaderFieldSort{{indexPattern.timeFieldName}}"\n      tabindex="0"\n      aria-label="{{ getAriaLabelForColumn(indexPattern.timeFieldName) }}"\n      ng-class="headerClass(indexPattern.timeFieldName)"\n      role="button"\n      ng-click="cycleSortOrder(indexPattern.timeFieldName)"\n      tooltip="{{ ::\'common.ui.docTable.tableHeader.sortByTimeTooltip\' | i18n: {defaultMessage: \'Sort by time\'} }}"\n    ></button>\n    </span>\n  </th>\n  <th\n    ng-repeat="name in columns"\n    data-test-subj="docTableHeaderField"\n    scope="col"\n  >\n    <span\n      data-test-subj="docTableHeader-{{name}}"\n    >\n      {{name | shortDots}}\n      <button\n        data-test-subj="docTableHeaderFieldSort_{{name}}"\n        id="docTableHeaderFieldSort{{name}}"\n        ng-if="isSortableColumn(name)"\n        aria-label="{{ getAriaLabelForColumn(name) }}"\n        ng-class="headerClass(name)"\n        ng-click="cycleSortOrder(name)"\n        tooltip="{{tooltip(name)}}"\n        tooltip-append-to-body="1"\n      ></button>\n    </span>\n    <button\n      class="fa fa-remove kbnDocTableHeader__move"\n      ng-click="onRemoveColumn(name)"\n      ng-if="canRemoveColumn(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'common.ui.docTable.tableHeader.removeColumnButtonTooltip\' | i18n: {defaultMessage: \'Remove column\'} }}"\n      aria-label="{{ \'common.ui.docTable.tableHeader.removeColumnButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Remove {columnName} column\',\n        values: {columnName: name}\n      } }}"\n      data-test-subj="docTableRemoveHeader-{{name}}"\n    ></button>\n    <button\n      class="fa fa-angle-double-left kbnDocTableHeader__move"\n      ng-click="moveColumnLeft(name)"\n      ng-if="canMoveColumnLeft(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'common.ui.docTable.tableHeader.moveColumnLeftButtonTooltip\' | i18n: {defaultMessage: \'Move column to the left\'} }}"\n      aria-label="{{ \'common.ui.docTable.tableHeader.moveColumnLeftButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Move {columnName} column to the left\',\n        values: {columnName: name}\n      } }}"\n    ></button>\n    <button\n      class="fa fa-angle-double-right kbnDocTableHeader__move"\n      ng-click="moveColumnRight(name)"\n      ng-if="canMoveColumnRight(name)"\n      tooltip-append-to-body="1"\n      tooltip="{{ ::\'common.ui.docTable.tableHeader.moveColumnRightButtonTooltip\' | i18n: {defaultMessage: \'Move column to the right\'} }}"\n      aria-label="{{ \'common.ui.docTable.tableHeader.moveColumnRightButtonAriaLabel\' | i18n: {\n        defaultMessage: \'Move {columnName} column to the right\',\n        values: {columnName: name}\n      } }}"\n    ></button>\n  </th>\n</tr>\n'},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(3);var _doc_views=__webpack_require__(325);__webpack_require__(372);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("docViewer",function(config,Private){var docViews=Private(_doc_views.DocViewsRegistryProvider);return{restrict:"E",scope:{hit:"=",indexPattern:"=",filter:"=?",columns:"=?",onAddColumn:"=?",onRemoveColumn:"=?"},template:function template($el){var $viewer=(0,_jquery2.default)('<div class="kbnDocViewer">');$el.append($viewer);var $tabs=(0,_jquery2.default)('<ul class="nav nav-tabs" role="tablist">');var $content=(0,_jquery2.default)('<div class="kbnDocViewer__content" role="tabpanel">');$viewer.append($tabs);$viewer.append($content);docViews.inOrder.forEach(function(view){var $tab=(0,_jquery2.default)("<li\n            ng-show=\"docViews['"+view.name+"'].shouldShow(hit)\"\n            ng-class=\"{active: mode == '"+view.name+'\'}"\n            role="tab"\n            aria-selected="{{mode === \''+view.name+"'}}\"\n          >\n            <a\n              ng-click=\"mode='"+view.name+"'\"\n              kbn-accessible-click\n            >\n              "+view.title+"\n            </a>\n          </li>");$tabs.append($tab);var $viewAttrs='\n          hit="hit"\n          index-pattern="indexPattern"\n          filter="filter"\n          columns="columns"\n          on-add-column="onAddColumn"\n          on-remove-column="onRemoveColumn"\n        ';var $ext=(0,_jquery2.default)("<render-directive "+$viewAttrs+" ng-if=\"mode == '"+view.name+"'\" definition=\"docViews['"+view.name+"'].directive\">\n          </render-directive>");$ext.html(view.directive.template);$content.append($ext)});return $el.html()},controller:function controller($scope){$scope.mode=docViews.inOrder[0].name;$scope.docViews=docViews.byName}}})},function(module,exports){module.exports='<td ng-click="toggleRow()" data-test-subj="docTableExpandToggleColumn">\n  <button\n    class="kbnDocTableOpen__button"\n    aria-expanded="{{!!open}}"\n    aria-label="{{ ::\'common.ui.docTable.tableRow.toggleRowDetailsButtonAriaLabel\' | i18n: {defaultMessage: \'Toggle row details\'} }}"\n  >\n    <span\n      class="kuiIcon"\n      ng-class="{ \'fa-caret-down\': open, \'fa-caret-right\': !open }"\n    ></span>\n  </button>\n</td>\n'},function(module,exports){module.exports='<td colspan="{{ columns.length + 2 }}">\n  <div class="kbnDocTableDetails__actions">\n    <a\n      class="kuiButton kuiButton--small kuiButton--secondary"\n      data-test-subj="docTableRowAction"\n      ng-href="{{ getContextAppHref() }}"\n      ng-if="indexPattern.isTimeBased()"\n      i18n-id="common.ui.docTable.tableRow.viewSurroundingDocumentsLinkText"\n      i18n-default-message="View surrounding documents"\n    ></a>\n    <a\n      class="kuiButton kuiButton--small kuiButton--secondary"\n      data-test-subj="docTableRowAction"\n      ng-href="#/doc/{{indexPattern.id}}/{{row._index}}/{{row._type}}/?id={{row._id | uriescape}}"\n      i18n-id="common.ui.docTable.tableRow.viewSingleDocumentLinkText"\n      i18n-default-message="View single document"\n    ></a>\n  </div>\n  <doc-viewer\n    columns="columns"\n    filter="filter"\n    hit="row"\n    index-pattern="indexPattern"\n    on-add-column="onAddColumn"\n    on-remove-column="onRemoveColumn"\n    data-test-subj="docViewer"\n  ></doc-viewer>\n</td>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports){module.exports='<%\nvar attributes = \'\';\nif (timefield) {\n  attributes=\'class="eui-textNoWrap" width="1%"\';\n} else if (sourcefield) {\n  attributes=\'class="eui-textBreakAll eui-textBreakWord"\';\n} else {\n  attributes=\'class="kbnDocTableCell__dataField eui-textBreakAll eui-textBreakWord"\';\n}\n%>\n<td <%= attributes %> data-test-subj="docTableField">\n  <%= formatted %>\n  <span class="kbnDocTableCell__filter">\n    <% if (filterable) { %>\n      <button\n        ng-click="inlineFilter($event, \'+\')"\n        class="fa fa-search-plus kbnDocTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip-append-to-body="1"\n        tooltip="{{ ::\'common.ui.docTable.tableRow.filterForValueButtonTooltip\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n        aria-label="{{ ::\'common.ui.docTable.tableRow.filterForValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter for value\'} }}"\n      ></button>\n\n      <button\n        ng-click="inlineFilter($event, \'-\')"\n        class="fa fa-search-minus kbnDocTableRowFilterButton"\n        data-column="<%- column %>"\n        tooltip="{{ ::\'common.ui.docTable.tableRow.filterOutValueButtonTooltip\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        aria-label="{{ ::\'common.ui.docTable.tableRow.filterOutValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter out value\'} }}"\n        tooltip-append-to-body="1"\n      ></button>\n    <% } %>\n  </span>\n</td>\n'},function(module,exports){module.exports='<div class="truncate-by-height">\n  <%= body %>\n</div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLimitedSearchResultsMessage=getLimitedSearchResultsMessage;var _i18n=__webpack_require__(8);function getLimitedSearchResultsMessage(resultCount){return _i18n.i18n.translate("common.ui.docTable.limitedSearchResultLabel",{defaultMessage:"Limited to {resultCount} results. Refine your search.",values:{resultCount:resultCount}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var EmbeddableFactory=function(){function EmbeddableFactory(_a){var name=_a.name;this.name=name}return EmbeddableFactory}();exports.EmbeddableFactory=EmbeddableFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Embeddable=function(){function Embeddable(metadata){if(metadata===void 0){metadata={}}this.metadata={};this.metadata=metadata||{}}Embeddable.prototype.onContainerStateChanged=function(containerState){return};Embeddable.prototype.getInspectorAdapters=function(){return undefined};Embeddable.prototype.destroy=function(){return};Embeddable.prototype.reload=function(){return};return Embeddable}();exports.Embeddable=Embeddable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _context_menu_panel=__webpack_require__(1487);Object.defineProperty(exports,"ContextMenuPanel",{enumerable:true,get:function get(){return _context_menu_panel.ContextMenuPanel}});var _context_menu_action=__webpack_require__(1488);Object.defineProperty(exports,"ContextMenuAction",{enumerable:true,get:function get(){return _context_menu_action.ContextMenuAction}});var _context_menu_actions_registry=__webpack_require__(1489);Object.defineProperty(exports,"ContextMenuActionsRegistryProvider",{enumerable:true,get:function get(){return _context_menu_actions_registry.ContextMenuActionsRegistryProvider}});var _build_eui_context_menu_panels=__webpack_require__(1490);Object.defineProperty(exports,"buildEuiContextMenuPanels",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildEuiContextMenuPanels}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ContextMenuPanel=function(){function ContextMenuPanel(config,options){if(options===void 0){options={}}this.id=config.id;this.title=config.title;if(options.getContent){this.getContent=options.getContent}}ContextMenuPanel.prototype.getContent=function(panelActionAPI){return};return ContextMenuPanel}();exports.ContextMenuPanel=ContextMenuPanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ContextMenuAction=function(){function ContextMenuAction(config,options){if(options===void 0){options={}}this.id=config.id;this.displayName=config.displayName;this.parentPanelId=config.parentPanelId;this.icon=options.icon;this.childContextMenuPanel=options.childContextMenuPanel;if("onClick"in options){this.onClick=options.onClick}if(options.isDisabled){this.isDisabled=options.isDisabled}if(options.isVisible){this.isVisible=options.isVisible}if("getHref"in options){this.getHref=options.getHref}}ContextMenuAction.prototype.isVisible=function(panelActionAPI){return true};ContextMenuAction.prototype.isDisabled=function(panelActionAPI){return false};return ContextMenuAction}();exports.ContextMenuAction=ContextMenuAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ContextMenuActionsRegistryProvider=undefined;var _registry=__webpack_require__(23);var ContextMenuActionsRegistryProvider=exports.ContextMenuActionsRegistryProvider=(0,_registry.uiRegistry)({index:["name"],name:"ContextMenuActions"})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildEuiContextMenuPanels=buildEuiContextMenuPanels;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function getActionsForPanel(contextMenuPanelId,allActions){return allActions.filter(function(action){return action.parentPanelId===contextMenuPanelId})}function buildEuiContextMenuPanelItemsAndChildPanels(_a){var contextMenuPanelId=_a.contextMenuPanelId,actions=_a.actions,embeddable=_a.embeddable,containerState=_a.containerState;var items=[];var childPanels=[];var actionsForPanel=getActionsForPanel(contextMenuPanelId,actions);actionsForPanel.forEach(function(action){var isVisible=action.isVisible({embeddable:embeddable,containerState:containerState});if(!isVisible){return}if(action.childContextMenuPanel){childPanels.push.apply(childPanels,tslib_1.__spread(buildEuiContextMenuPanels({contextMenuPanel:action.childContextMenuPanel,actions:actions,embeddable:embeddable,containerState:containerState})))}items.push(convertPanelActionToContextMenuItem({action:action,containerState:containerState,embeddable:embeddable}))});return{items:items,childPanels:childPanels}}function buildEuiContextMenuPanels(_a){var contextMenuPanel=_a.contextMenuPanel,actions=_a.actions,embeddable=_a.embeddable,containerState=_a.containerState;var euiContextMenuPanel={id:contextMenuPanel.id,title:contextMenuPanel.title,items:[],content:contextMenuPanel.getContent({embeddable:embeddable,containerState:containerState})};var contextMenuPanels=[euiContextMenuPanel];var _b=buildEuiContextMenuPanelItemsAndChildPanels({contextMenuPanelId:contextMenuPanel.id,actions:actions,embeddable:embeddable,containerState:containerState}),items=_b.items,childPanels=_b.childPanels;euiContextMenuPanel.items=items;return contextMenuPanels.concat(childPanels)}function convertPanelActionToContextMenuItem(_a){var action=_a.action,containerState=_a.containerState,embeddable=_a.embeddable;var menuPanelItem={name:action.displayName,icon:action.icon,panel:_lodash2.default.get(action,"childContextMenuPanel.id"),disabled:action.isDisabled({embeddable:embeddable,containerState:containerState}),"data-test-subj":"dashboardPanelAction-"+action.id};if(action.onClick){menuPanelItem.onClick=function(){if(action.onClick){action.onClick({embeddable:embeddable,containerState:containerState})}}}if(action.getHref){menuPanelItem.href=action.getHref({embeddable:embeddable,containerState:containerState})}return menuPanelItem}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchEmbeddable=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _columns=__webpack_require__(541);var columnActions=_interopRequireWildcard(_columns);var _embeddable=__webpack_require__(42);var _adapters=__webpack_require__(105);var _get_time=__webpack_require__(268);var _search_template=__webpack_require__(1492);var _search_template2=_interopRequireDefault(_search_template);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var SearchEmbeddable=function(_super){tslib_1.__extends(SearchEmbeddable,_super);function SearchEmbeddable(_a){var onEmbeddableStateChanged=_a.onEmbeddableStateChanged,savedSearch=_a.savedSearch,editUrl=_a.editUrl,$rootScope=_a.$rootScope,$compile=_a.$compile;var _this=_super.call(this,{title:savedSearch.title,editUrl:editUrl,indexPattern:savedSearch.searchSource.getField("index")})||this;_this.panelTitle="";_this.onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedSearch=savedSearch;_this.$rootScope=$rootScope;_this.$compile=$compile;_this.customization={};_this.inspectorAdaptors={requests:new _adapters.RequestAdapter};return _this}SearchEmbeddable.prototype.getInspectorAdapters=function(){return this.inspectorAdaptors};SearchEmbeddable.prototype.onContainerStateChanged=function(containerState){this.customization=containerState.embeddableCustomization||{};this.filters=containerState.filters;this.query=containerState.query;this.timeRange=containerState.timeRange;this.panelTitle="";if(!containerState.hidePanelTitles){this.panelTitle=containerState.customTitle!==undefined?containerState.customTitle:this.savedSearch.title}if(this.searchScope){this.pushContainerStateParamsToScope(this.searchScope)}};SearchEmbeddable.prototype.render=function(domNode,containerState){this.onContainerStateChanged(containerState);this.initializeSearchScope();if(!this.searchScope){throw new Error("Search scope not defined");return}this.searchInstance=this.$compile(_search_template2.default)(this.searchScope);var rootNode=_angular2.default.element(domNode);rootNode.append(this.searchInstance)};SearchEmbeddable.prototype.destroy=function(){this.savedSearch.destroy();if(this.searchInstance){this.searchInstance.remove()}if(this.searchScope){this.searchScope.$destroy();delete this.searchScope}};SearchEmbeddable.prototype.initializeSearchScope=function(){var _this=this;var searchScope=this.$rootScope.$new();searchScope.description=this.savedSearch.description;searchScope.searchSource=this.savedSearch.searchSource;searchScope.inspectorAdapters=this.inspectorAdaptors;var timeRangeSearchSource=searchScope.searchSource.create();timeRangeSearchSource.setField("filter",function(){if(!_this.searchScope||!_this.timeRange){return}return(0,_get_time.getTime)(_this.searchScope.searchSource.getField("index"),_this.timeRange)});this.filtersSearchSource=searchScope.searchSource.create();this.filtersSearchSource.setParent(timeRangeSearchSource);searchScope.searchSource.setParent(this.filtersSearchSource);this.pushContainerStateParamsToScope(searchScope);searchScope.setSortOrder=function(columnName,direction){searchScope.sort=_this.customization.sort=[columnName,direction];_this.emitEmbeddableStateChange(_this.getEmbeddableState())};searchScope.addColumn=function(columnName){if(!searchScope.columns){return}_this.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.addColumn(searchScope.columns,columnName);searchScope.columns=_this.customization.columns=searchScope.columns;_this.emitEmbeddableStateChange(_this.getEmbeddableState())};searchScope.removeColumn=function(columnName){if(!searchScope.columns){return}_this.savedSearch.searchSource.getField("index").popularizeField(columnName,1);columnActions.removeColumn(searchScope.columns,columnName);_this.customization.columns=searchScope.columns;_this.emitEmbeddableStateChange(_this.getEmbeddableState())};searchScope.moveColumn=function(columnName,newIndex){if(!searchScope.columns){return}columnActions.moveColumn(searchScope.columns,columnName,newIndex);_this.customization.columns=searchScope.columns;_this.emitEmbeddableStateChange(_this.getEmbeddableState())};searchScope.filter=function(field,value,operator){var index=_this.savedSearch.searchSource.getField("index").id;var stagedFilter={field:field,value:value,operator:operator,index:index};_this.emitEmbeddableStateChange(tslib_1.__assign({},_this.getEmbeddableState(),{stagedFilter:stagedFilter}))};this.searchScope=searchScope};SearchEmbeddable.prototype.emitEmbeddableStateChange=function(embeddableState){this.onEmbeddableStateChanged(embeddableState)};SearchEmbeddable.prototype.getEmbeddableState=function(){return{customization:this.customization}};SearchEmbeddable.prototype.pushContainerStateParamsToScope=function(searchScope){searchScope.columns=this.customization.columns||this.savedSearch.columns;searchScope.sort=this.customization.sort||this.savedSearch.sort;searchScope.sharedItemTitle=this.panelTitle;this.filtersSearchSource.setField("filter",this.filters);this.filtersSearchSource.setField("query",this.query)};return SearchEmbeddable}(_embeddable.Embeddable);exports.SearchEmbeddable=SearchEmbeddable},function(module,exports){module.exports='<doc-table\n  search-source="searchSource"\n  sorting="sort"\n  columns="columns"\n  data-shared-item\n  data-title="{{sharedItemTitle}}"\n  data-description="{{description}}"\n  render-complete\n  class="panel-content"\n  filter="filter"\n  on-add-column="addColumn"\n  on-change-sort-order="setSortOrder"\n  on-move-column="moveColumn"\n  on-remove-column="removeColumn"\n  data-test-subj="embeddedSavedSearchDocTable"\n  inspector-adapters="inspectorAdapters"\n>\n</doc-table>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualizeEmbeddableFactoryProvider=visualizeEmbeddableFactoryProvider;var _embeddable_factories_registry=__webpack_require__(250);var _visualize_embeddable_factory=__webpack_require__(1494);function visualizeEmbeddableFactoryProvider(Private){var VisualizeEmbeddableFactoryProvider=function VisualizeEmbeddableFactoryProvider(savedVisualizations,config){return new _visualize_embeddable_factory.VisualizeEmbeddableFactory(savedVisualizations,config)};return Private(VisualizeEmbeddableFactoryProvider)}_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider.register(visualizeEmbeddableFactoryProvider)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddableFactory=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _embeddable=__webpack_require__(42);var _loader=__webpack_require__(331);var _visualize_embeddable=__webpack_require__(1495);var _disabled_lab_embeddable=__webpack_require__(1496);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizeEmbeddableFactory=function(_super){tslib_1.__extends(VisualizeEmbeddableFactory,_super);function VisualizeEmbeddableFactory(savedVisualizations,config){var _this=_super.call(this,{name:"visualization"})||this;_this.config=config;_this.savedVisualizations=savedVisualizations;return _this}VisualizeEmbeddableFactory.prototype.getEditPath=function(panelId){return this.savedVisualizations.urlFor(panelId)};VisualizeEmbeddableFactory.prototype.create=function(panelMetadata,onEmbeddableStateChanged){var _this=this;var visId=panelMetadata.id;var editUrl=this.getEditPath(visId);var waitFor=[(0,_loader.getVisualizeLoader)(),this.savedVisualizations.get(visId)];return Promise.all(waitFor).then(function(_a){var _b=tslib_1.__read(_a,2),loader=_b[0],savedObject=_b[1];var isLabsEnabled=_this.config.get("visualize:enableLabs");if(!isLabsEnabled&&savedObject.vis.type.stage==="experimental"){return new _disabled_lab_embeddable.DisabledLabEmbeddable(savedObject.title)}else{return new _visualize_embeddable.VisualizeEmbeddable({onEmbeddableStateChanged:onEmbeddableStateChanged,savedVisualization:savedObject,editUrl:editUrl,loader:loader})}})};return VisualizeEmbeddableFactory}(_embeddable.EmbeddableFactory);exports.VisualizeEmbeddableFactory=VisualizeEmbeddableFactory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeEmbeddable=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _embeddable=__webpack_require__(42);var _persisted_state=__webpack_require__(266);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var VisualizeEmbeddable=function(_super){tslib_1.__extends(VisualizeEmbeddable,_super);function VisualizeEmbeddable(_a){var onEmbeddableStateChanged=_a.onEmbeddableStateChanged,savedVisualization=_a.savedVisualization,editUrl=_a.editUrl,loader=_a.loader;var _this=_super.call(this,{title:savedVisualization.title,editUrl:editUrl,indexPattern:savedVisualization.vis.indexPattern})||this;_this.uiStateChangeHandler=function(){_this.customization=_this.uiState.toJSON();_this.onEmbeddableStateChanged(_this.getEmbeddableState())};_this.onEmbeddableStateChanged=onEmbeddableStateChanged;_this.savedVisualization=savedVisualization;_this.loader=loader;var parsedUiState=savedVisualization.uiStateJSON?JSON.parse(savedVisualization.uiStateJSON):{};_this.uiState=new _persisted_state.PersistedState(parsedUiState);_this.uiState.on("change",_this.uiStateChangeHandler);return _this}VisualizeEmbeddable.prototype.getInspectorAdapters=function(){if(!this.handler){return undefined}return this.handler.inspectorAdapters};VisualizeEmbeddable.prototype.getEmbeddableState=function(){return{customization:this.customization}};VisualizeEmbeddable.prototype.transferCustomizationsToUiState=function(containerState){var _this=this;var customization=containerState.embeddableCustomization;if(customization&&!_lodash2.default.isEqual(this.customization,customization)){this.uiState.off("change",this.uiStateChangeHandler);this.uiState.clearAllKeys();Object.getOwnPropertyNames(customization).forEach(function(key){_this.uiState.set(key,customization[key])});this.customization=customization;this.uiState.on("change",this.uiStateChangeHandler)}};VisualizeEmbeddable.prototype.onContainerStateChanged=function(containerState){this.transferCustomizationsToUiState(containerState);var updatedParams={};if(containerState.timeRange!==this.timeRange){updatedParams.timeRange=containerState.timeRange;this.timeRange=containerState.timeRange}if(containerState.filters!==this.filters){updatedParams.filters=containerState.filters;this.filters=containerState.filters}if(containerState.query!==this.query){updatedParams.query=containerState.query;this.query=containerState.query}var derivedPanelTitle=this.getPanelTitle(containerState);if(this.panelTitle!==derivedPanelTitle){updatedParams.dataAttrs={title:derivedPanelTitle};this.panelTitle=derivedPanelTitle}if(this.handler&&!_lodash2.default.isEmpty(updatedParams)){this.handler.update(updatedParams)}};VisualizeEmbeddable.prototype.render=function(domNode,containerState){this.panelTitle=this.getPanelTitle(containerState);this.timeRange=containerState.timeRange;this.query=containerState.query;this.filters=containerState.filters;this.transferCustomizationsToUiState(containerState);var dataAttrs={"shared-item":"",title:this.panelTitle};if(this.savedVisualization.description){dataAttrs.description=this.savedVisualization.description}var handlerParams={uiState:this.uiState,append:true,timeRange:containerState.timeRange,query:containerState.query,filters:containerState.filters,cssClass:"panel-content panel-content--fullWidth",dataAttrs:dataAttrs};this.handler=this.loader.embedVisualizationWithSavedObject(domNode,this.savedVisualization,handlerParams)};VisualizeEmbeddable.prototype.destroy=function(){this.uiState.off("change",this.uiStateChangeHandler);this.savedVisualization.destroy();if(this.handler){this.handler.destroy();this.handler.getElement().remove()}};VisualizeEmbeddable.prototype.reload=function(){if(this.handler){this.handler.reload()}};VisualizeEmbeddable.prototype.getPanelTitle=function(containerState){var derivedPanelTitle="";if(!containerState.hidePanelTitles){derivedPanelTitle=containerState.customTitle!==undefined?containerState.customTitle:this.savedVisualization.title}return derivedPanelTitle};return VisualizeEmbeddable}(_embeddable.Embeddable);exports.VisualizeEmbeddable=VisualizeEmbeddable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DisabledLabEmbeddable=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _embeddable=__webpack_require__(42);var _i18n=__webpack_require__(14);var _disabled_lab_visualization=__webpack_require__(1497);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var DisabledLabEmbeddable=function(_super){tslib_1.__extends(DisabledLabEmbeddable,_super);function DisabledLabEmbeddable(title){return _super.call(this,{title:title})||this}DisabledLabEmbeddable.prototype.render=function(domNode){if(this.metadata.title){this.domNode=domNode;_reactDom2.default.render(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_disabled_lab_visualization.DisabledLabVisualization,{title:this.metadata.title})),domNode)}};DisabledLabEmbeddable.prototype.destroy=function(){if(this.domNode){_reactDom2.default.unmountComponentAtNode(this.domNode)}};return DisabledLabEmbeddable}(_embeddable.Embeddable);exports.DisabledLabEmbeddable=DisabledLabEmbeddable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DisabledLabVisualization=DisabledLabVisualization;var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DisabledLabVisualization(_a){var title=_a.title;return _react3.default.createElement("div",{className:"visDisabledLabVisualization"},_react3.default.createElement("div",{className:"kuiVerticalRhythm visDisabledLabVisualization__icon kuiIcon fa-flask","aria-hidden":"true"}),_react3.default.createElement("div",{className:"kuiVerticalRhythm"},_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.disabledLabVisualizationTitle",defaultMessage:"{title} is a lab visualization.",values:{title:_react3.default.createElement("em",{className:"visDisabledLabVisualization__title"},title)}})),_react3.default.createElement("div",{className:"kuiVerticalRhythm"},_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.disabledLabVisualizationMessage",defaultMessage:"Please turn on lab-mode in the advanced settings to see lab visualizations."})))}},function(module,exports,__webpack_require__){__webpack_require__(1499)},function(module,exports,__webpack_require__){"use strict";var _data_view=__webpack_require__(1500);var _requests_view=__webpack_require__(1504);var _inspector=__webpack_require__(83);_inspector.viewRegistry.register(_data_view.DataView);_inspector.viewRegistry.register(_requests_view.RequestsView)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataView=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _inspector=__webpack_require__(83);var _data_table=__webpack_require__(1501);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataViewComponent.__proto__||Object.getPrototypeOf(DataViewComponent)).call.apply(_ref,[this].concat(args))),_this),_this._isMounted=false,_this.state={tabularData:null,tabularOptions:{},tabularLoader:null},_this.onUpdateData=function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function finishLoadingData(){var _this2=this;if(this.state.tabularPromise){this.state.tabularPromise.then(function(_ref2){var data=_ref2.data,options=_ref2.options;if(_this2._isMounted){_this2.setState({tabularData:data,tabularOptions:options,tabularPromise:null})}})}}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"renderNoData",value:function renderNoData(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiEmptyPrompt,{title:_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))}))}},{key:"renderLoading",value:function renderLoading(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react2.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.gatheringDataLabel",defaultMessage:"Gathering data"})))))))}},{key:"render",value:function render(){if(this.state.tabularPromise){return this.renderLoading()}else if(!this.state.tabularData){return this.renderNoData()}return _react2.default.createElement(_inspector.InspectorView,null,_react2.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}}]);return DataViewComponent}(_react.Component);var DataView={title:_i18n.i18n.translate("inspectorViews.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspectorViews.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:DataViewComponent};exports.DataView=DataView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);var _download_options=__webpack_require__(1502);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataTableFormat.__proto__||Object.getPrototypeOf(DataTableFormat)).call.apply(_ref,[this].concat(args))),_this),_this.state={},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataTableFormat,[{key:"render",value:function render(){var _state=this.state,columns=_state.columns,rows=_state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:true}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_download_options.DataDownloadOptions,{columns:this.state.columns,rows:this.state.rows,isFormatted:this.props.isFormatted,title:this.props.exportTitle}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiInMemoryTable,{responsive:false,className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination,compressed:true}))}}],[{key:"renderCell",value:function renderCell(col,value,isFormatted){return _react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},col.filter&&_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspectorViews.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return col.filter(value)}})),col.filterOut&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspectorViews.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return col.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref2){var data=_ref2.data,isFormatted=_ref2.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map(function(col){return{name:col.name,field:col.field,sortable:isFormatted?function(row){return row[col.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(col,value,isFormatted)}}});return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);DataTableFormat.propTypes={data:_propTypes2.default.object.isRequired,exportTitle:_propTypes2.default.string.isRequired,isFormatted:_propTypes2.default.bool};exports.DataTableFormat=DataTableFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _export_csv=__webpack_require__(1503);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DataDownloadOptions.__proto__||Object.getPrototypeOf(DataDownloadOptions)).call.apply(_ref,[this].concat(args))),_this),_this.state={isPopoverOpen:false},_this.onTogglePopover=function(){_this.setState(function(state){return{isPopoverOpen:!state.isPopoverOpen}})},_this.closePopover=function(){_this.setState({isPopoverOpen:false})},_this.exportCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows)},_this.exportFormattedCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows,function(item){return item.formatted})},_this.exportFormattedAsRawCsv=function(){(0,_export_csv.exportAsCsv)(_this.props.title+".csv",_this.props.columns,_this.props.rows,function(item){return item.raw})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react2.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react2.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react2.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react2.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){if(!this.props.isFormatted){return this.renderUnformattedDownload()}return this.renderFormattedDownloads()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _filesaver=__webpack_require__(326);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function buildCsv(columns,rows,valueFormatter){var settings=_chrome2.default.getUiSettingsClient();var csvSeparator=settings.get("csv:separator",",");var quoteValues=settings.get("csv:quoteValues",true);var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val){if(_lodash2.default.isObject(val))val=val.valueOf();val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'+val.replace(allDoubleQuoteRE,'""')+'"'}return val}var header=columns.map(function(col){return escape(col.name)});var orderedFieldNames=columns.map(function(col){return col.field});var csvRows=rows.map(function(row){return orderedFieldNames.map(function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field])})});return[header].concat(_toConsumableArray(csvRows)).map(function(row){return row.join(csvSeparator)}).join("\r\n")+"\r\n"}function exportAsCsv(filename,columns,rows,valueFormatter){var csv=new Blob([buildCsv(columns,rows,valueFormatter)],{type:"text/plain;charset=utf-8"});(0,_filesaver.saveAs)(csv,filename)}exports.exportAsCsv=exportAsCsv},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsView=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _inspector=__webpack_require__(83);var _adapters=__webpack_require__(105);var _request_selector=__webpack_require__(1505);var _request_details=__webpack_require__(1506);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){_classCallCheck(this,RequestsViewComponent);var _this=_possibleConstructorReturn(this,(RequestsViewComponent.__proto__||Object.getPrototypeOf(RequestsViewComponent)).call(this,props));_initialiseProps.call(_this);props.adapters.requests.on("change",_this._onRequestsChange);var requests=props.adapters.requests.getRequests();_this.state={requests:requests,request:requests.length?requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react2.default.createElement(_inspector.InspectorView,{useFlex:true},_react2.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))}))}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return this.renderEmptyRequests()}var failedCount=this.state.requests.filter(function(req){return req.status===_adapters.RequestStatus.ERROR}).length;return _react2.default.createElement(_inspector.InspectorView,null,_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react2.default.createElement(_eui.EuiTextColor,{color:"danger"},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement("p",null,this.state.request.description)),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react2.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}]);return RequestsViewComponent}(_react.Component);var _initialiseProps=function _initialiseProps(){var _this2=this;this._onRequestsChange=function(){var requests=_this2.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this2.state.request)){newState.request=requests.length?requests[0]:null}_this2.setState(newState)};this.selectRequest=function(request){if(request!==_this2.state.request){_this2.setState({request:request})}}};RequestsViewComponent.propTypes={adapters:_propTypes2.default.object.isRequired};var RequestsView={title:_i18n.i18n.translate("inspectorViews.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspectorViews.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:RequestsViewComponent};exports.RequestsView=RequestsView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);var _adapters=__webpack_require__(105);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestSelector.__proto__||Object.getPrototypeOf(RequestSelector)).call.apply(_ref,[this].concat(args))),_this),_this.state={isPopoverOpen:false},_this.togglePopover=function(){_this.setState(function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}})},_this.closePopover=function(){_this.setState({isPopoverOpen:false})},_this.renderRequestDropdownItem=function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser"+request.name},_react2.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspectorViews.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react2.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem)}))}},{key:"render",value:function render(){var _props=this.props,selectedRequest=_props.selectedRequest,requests=_props.requests;return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestLabel",defaultMessage:"Request:"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react2.default.createElement("div",{className:"insRequestSelector__singleRequest"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react2.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react2.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react2.default.createElement(_react3.FormattedMessage,{id:"inspectorViews.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspectorViews.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);RequestSelector.propTypes={requests:_propTypes2.default.array.isRequired,selectedRequest:_propTypes2.default.object.isRequired};exports.RequestSelector=RequestSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _details=__webpack_require__(1507);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspectorViews.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspectorViews.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspectorViews.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestDetails.__proto__||Object.getPrototypeOf(RequestDetails)).call.apply(_ref,[this].concat(args))),_this),_this.state={availableDetails:[],selectedDetail:null},_this.selectDetailsTab=function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}},_this.renderDetailTab=function(detail){return _react2.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail"+detail.name},detail.label)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestDetails,[{key:"render",value:function render(){if(this.state.availableDetails.length===0){return null}var DetailComponent=this.state.selectedDetail.component;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react2.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter(function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)});if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}}]);return RequestDetails}(_react.Component);RequestDetails.propTypes={request:_propTypes2.default.object.isRequired};exports.RequestDetails=RequestDetails},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _req_details_request=__webpack_require__(1508);Object.keys(_req_details_request).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_request[key]}})});var _req_details_response=__webpack_require__(1509);Object.keys(_req_details_response).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_response[key]}})});var _req_details_stats=__webpack_require__(1510);Object.keys(_req_details_stats).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _req_details_stats[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsRequest(props){return _react2.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s","data-test-subj":"inspectorRequestBody"},JSON.stringify(props.request.json,null,2))}RequestDetailsRequest.shouldShow=function(request){return!!request.json};exports.RequestDetailsRequest=RequestDetailsRequest},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RequestDetailsResponse(props){return _react2.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s","data-test-subj":"inspectorResponseBody"},JSON.stringify(props.request.response.json,null,2))}RequestDetailsResponse.shouldShow=function(request){return request.response&&request.response.json};exports.RequestDetailsResponse=RequestDetailsResponse},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RequestDetailsStats.__proto__||Object.getPrototypeOf(RequestDetailsStats)).call.apply(_ref,[this].concat(args))),_this),_this.renderStatRow=function(stat){return[_react2.default.createElement(_eui.EuiTableRow,{key:stat.id},_react2.default.createElement(_eui.EuiTableRowCell,null,_react2.default.createElement("span",{className:"insRequestDetailsStats__icon"},stat.description&&_react2.default.createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspectorViews.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}),!stat.description&&_react2.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react2.default.createElement(_eui.EuiTableRowCell,null,stat.value))]},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;var sortedStats=Object.keys(stats).sort().map(function(id){return _extends({id:id},stats[id])});return _react2.default.createElement(_eui.EuiTable,{responsive:false},_react2.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);RequestDetailsStats.shouldShow=function(request){return!!request.stats&&Object.keys(request.stats).length};RequestDetailsStats.propTypes={request:_propTypes2.default.object.isRequired};exports.RequestDetailsStats=RequestDetailsStats},function(module,exports,__webpack_require__){__webpack_require__(1512)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=undefined;var serializeAllFetchParams=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(fetchParams,searchRequests,serializeFetchParams){var searchRequestsWithFetchParams,failedSearchRequests;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchRequestsWithFetchParams=[];failedSearchRequests=[];fetchParams.forEach(function(result,index){if(result.resolved){searchRequestsWithFetchParams.push(result.resolved)}else{var searchRequest=searchRequests[index];searchRequest.handleFailure(result.rejected);failedSearchRequests.push(searchRequest)}});_context.next=5;return serializeFetchParams(searchRequestsWithFetchParams);case 5:_context.t0=_context.sent;_context.t1=failedSearchRequests;return _context.abrupt("return",{serializedFetchParams:_context.t0,failedSearchRequests:_context.t1});case 8:case"end":return _context.stop()}}},_callee,this)}));return function serializeAllFetchParams(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var _search_strategy_registry=__webpack_require__(494);var _is_default_type_index_pattern=__webpack_require__(495);var _search_error=__webpack_require__(243);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function getAllFetchParams(searchRequests,Promise){return Promise.map(searchRequests,function(searchRequest){return Promise.try(searchRequest.getFetchParams,void 0,searchRequest).then(function(fetchParams){return searchRequest.fetchParams=fetchParams}).then(function(value){return{resolved:value}}).catch(function(error){return{rejected:error}})})}var defaultSearchStrategy=exports.defaultSearchStrategy={id:"default",search:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref2){var searchRequests=_ref2.searchRequests,es=_ref2.es,Promise=_ref2.Promise,serializeFetchParams=_ref2.serializeFetchParams,_ref2$includeFrozen=_ref2.includeFrozen,includeFrozen=_ref2$includeFrozen===undefined?false:_ref2$includeFrozen,_ref2$maxConcurrentSh=_ref2.maxConcurrentShardRequests,maxConcurrentShardRequests=_ref2$maxConcurrentSh===undefined?0:_ref2$maxConcurrentSh;var allFetchParams,_ref4,serializedFetchParams,failedSearchRequests,msearchParams,searching;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAllFetchParams(searchRequests,Promise);case 2:allFetchParams=_context2.sent;_context2.next=5;return serializeAllFetchParams(allFetchParams,searchRequests,serializeFetchParams);case 5:_ref4=_context2.sent;serializedFetchParams=_ref4.serializedFetchParams;failedSearchRequests=_ref4.failedSearchRequests;msearchParams={rest_total_hits_as_int:true,ignore_throttled:!includeFrozen,body:serializedFetchParams};if(maxConcurrentShardRequests!==0){msearchParams.max_concurrent_shard_requests=maxConcurrentShardRequests}searching=es.msearch(msearchParams);return _context2.abrupt("return",{searching:new Promise(function(resolve,reject){searching.then(function(_ref5){var responses=_ref5.responses;resolve(responses)}).catch(function(error){var statusCode=error.statusCode,displayName=error.displayName,message=error.message,path=error.path;var searchError=new _search_error.SearchError({status:statusCode,title:displayName,message:message,path:path});reject(searchError)})}),abort:searching.abort,failedSearchRequests:failedSearchRequests});case 12:case"end":return _context2.stop()}}},_callee2,undefined)}));function search(_x4){return _ref3.apply(this,arguments)}return search}(),isViable:function isViable(indexPattern){if(!indexPattern){return false}return(0,_is_default_type_index_pattern.isDefaultTypeIndexPattern)(indexPattern)}};(0,_search_strategy_registry.addSearchStrategy)(defaultSearchStrategy)},function(module,exports){},function(module,exports){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1603);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _home_ng_wrapper=__webpack_require__(1604);var _home_ng_wrapper2=_interopRequireDefault(_home_ng_wrapper);var _feature_catalogue=__webpack_require__(39);var _i18n=__webpack_require__(14);var _modules=__webpack_require__(3);var _home_app=__webpack_require__(1605);var _persisted_log=__webpack_require__(51);var _i18n2=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/home",[]);app.directive("homeApp",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_home_app.HomeApp))});var homeTitle=_i18n2.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});function getRoute(){return{template:_home_ng_wrapper2.default,controller:function controller($scope,config,indexPatterns,Private){$scope.directories=Private(_feature_catalogue.FeatureCatalogueRegistryProvider).inTitleOrder;$scope.recentlyAccessed=_persisted_log.recentlyAccessed.get().map(function(item){item.link=_chrome2.default.addBasePath(item.link);return item})},k7Breadcrumbs:function k7Breadcrumbs(){return[{text:homeTitle}]}}}_routes2.default.when("/home",getRoute());_routes2.default.when("/home/feature_directory",getRoute());_routes2.default.when("/home/tutorial_directory/:tab?",getRoute());_routes2.default.when("/home/tutorial/:id",getRoute())},function(module,exports,__webpack_require__){},function(module,exports){module.exports='<home-app\n  directories="directories"\n  recently-accessed="recentlyAccessed"\n/>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomeApp=HomeApp;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _home=__webpack_require__(1606);var _feature_directory=__webpack_require__(1609);var _tutorial_directory=__webpack_require__(1610);var _tutorial=__webpack_require__(1615);var _reactRouterDom=__webpack_require__(1950);var _load_tutorials=__webpack_require__(563);var _replace_template_strings=__webpack_require__(1626);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _recently_accessed=__webpack_require__(562);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HomeApp(_ref){var directories=_ref.directories,recentlyAccessed=_ref.recentlyAccessed;var isCloudEnabled=_chrome2.default.getInjected("isCloudEnabled",false);var apmUiEnabled=_chrome2.default.getInjected("apmUiEnabled",true);var mlEnabled=_chrome2.default.getInjected("mlEnabled",false);var savedObjectsClient=_chrome2.default.getSavedObjectsClient();var isK7Design=_chrome2.default.getUiSettingsClient().get("k7design",false);var renderTutorialDirectory=function renderTutorialDirectory(props){return _react2.default.createElement(_tutorial_directory.TutorialDirectory,{addBasePath:_chrome2.default.addBasePath,openTab:props.match.params.tab,isCloudEnabled:isCloudEnabled,isK7Design:isK7Design})};var renderTutorial=function renderTutorial(props){return _react2.default.createElement(_tutorial.Tutorial,{addBasePath:_chrome2.default.addBasePath,isCloudEnabled:isCloudEnabled,getTutorial:_load_tutorials.getTutorial,replaceTemplateStrings:_replace_template_strings.replaceTemplateStrings,tutorialId:props.match.params.id,bulkCreate:savedObjectsClient.bulkCreate,isK7Design:isK7Design})};return _react2.default.createElement(_reactRouterDom.HashRouter,null,_react2.default.createElement(_reactRouterDom.Switch,null,_react2.default.createElement(_reactRouterDom.Route,{path:"/home/tutorial/:id",render:renderTutorial}),_react2.default.createElement(_reactRouterDom.Route,{path:"/home/tutorial_directory/:tab?",render:renderTutorialDirectory}),_react2.default.createElement(_reactRouterDom.Route,{path:"/home/feature_directory"},_react2.default.createElement(_feature_directory.FeatureDirectory,{addBasePath:_chrome2.default.addBasePath,directories:directories})),_react2.default.createElement(_reactRouterDom.Route,{path:"/home"},_react2.default.createElement(_home.Home,{addBasePath:_chrome2.default.addBasePath,directories:directories,apmUiEnabled:apmUiEnabled,mlEnabled:mlEnabled,recentlyAccessed:recentlyAccessed,find:savedObjectsClient.find,localStorage:localStorage,urlBasePath:_chrome2.default.getBasePath()}))))}HomeApp.propTypes={directories:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,title:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,icon:_propTypes2.default.string.isRequired,path:_propTypes2.default.string.isRequired,showOnHomePage:_propTypes2.default.bool.isRequired,category:_propTypes2.default.string.isRequired})),recentlyAccessed:_propTypes2.default.arrayOf(_recently_accessed.recentlyAccessedShape).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Home=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _synopsis=__webpack_require__(336);var _add_data=__webpack_require__(1607);var _recently_accessed=__webpack_require__(562);var _react3=__webpack_require__(5);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _eui=__webpack_require__(2);var _welcome=__webpack_require__(1608);var _feature_catalogue=__webpack_require__(39);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KEY_ENABLE_WELCOME="home:welcome:show";var Home=exports.Home=function(_Component){_inherits(Home,_Component);function Home(props){var _this2=this;_classCallCheck(this,Home);var _this=_possibleConstructorReturn(this,(Home.__proto__||Object.getPrototypeOf(Home)).call(this,props));_this.fetchIsNewKibanaInstance=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var resp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setTimeout(function(){if(_this.state.isLoading){_this.setState({isWelcomeEnabled:false})}},500);_context.next=4;return _this.props.find({type:"index-pattern",fields:["title"],search:"*",search_fields:["title"],perPage:1});case 4:resp=_context.sent;_this.endLoading({isNewKibanaInstance:resp.total===0});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);_this.endLoading();case 11:case"end":return _context.stop()}}},_callee,_this2,[[0,8]])}));_this.endLoading=function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(_this._isMounted){_this.setState(_extends({},state,{isLoading:false}))}};_this.skipWelcome=function(){_this.props.localStorage.setItem(KEY_ENABLE_WELCOME,"false");_this._isMounted&&_this.setState({isWelcomeEnabled:false})};_this.renderDirectories=function(category){var _this$props=_this.props,addBasePath=_this$props.addBasePath,directories=_this$props.directories;return directories.filter(function(directory){return directory.showOnHomePage&&directory.category===category}).map(function(directory){return _react2.default.createElement(_eui.EuiFlexItem,{style:{minHeight:64},key:directory.id},_react2.default.createElement(_synopsis.Synopsis,{description:directory.description,iconType:directory.icon,title:directory.title,url:addBasePath(directory.path)}))})};var isWelcomeEnabled=!(_chrome2.default.getInjected("disableWelcomeScreen")||props.localStorage.getItem(KEY_ENABLE_WELCOME)==="false");_this.state={isLoading:isWelcomeEnabled,isNewKibanaInstance:false,isWelcomeEnabled:isWelcomeEnabled};return _this}_createClass(Home,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchIsNewKibanaInstance()}},{key:"renderNormal",value:function renderNormal(){var _props=this.props,apmUiEnabled=_props.apmUiEnabled,recentlyAccessed=_props.recentlyAccessed,mlEnabled=_props.mlEnabled;var recentlyAccessedPanel=void 0;if(recentlyAccessed.length>0){recentlyAccessedPanel=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_recently_accessed.RecentlyAccessed,{recentlyAccessed:recentlyAccessed}),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}))}return _react2.default.createElement(_eui.EuiPage,{className:"homPage"},_react2.default.createElement(_eui.EuiPageBody,null,recentlyAccessedPanel,_react2.default.createElement(_add_data.AddData,{apmUiEnabled:apmUiEnabled,mlEnabled:mlEnabled,isNewKibanaInstance:this.state.isNewKibanaInstance}),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.directories.visualize.nameTitle",defaultMessage:"Visualize and Explore Data"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGrid,{columns:2},this.renderDirectories(_feature_catalogue.FeatureCatalogueCategory.DATA)))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.directories.manage.nameTitle",defaultMessage:"Manage and Administer the Elastic Stack"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGrid,{columns:2},this.renderDirectories(_feature_catalogue.FeatureCatalogueCategory.ADMIN))))),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.directories.notFound.description",defaultMessage:"Didn’t find what you were looking for?"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiButton,{href:"#/home/feature_directory"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.directories.notFound.viewFullButtonLabel",defaultMessage:"View full directory of Kibana plugins"}))))))}},{key:"renderLoading",value:function renderLoading(){return""}},{key:"renderWelcome",value:function renderWelcome(){return _react2.default.createElement(_welcome.Welcome,{onSkip:this.skipWelcome,urlBasePath:this.props.urlBasePath})}},{key:"render",value:function render(){var _state=this.state,isLoading=_state.isLoading,isWelcomeEnabled=_state.isWelcomeEnabled,isNewKibanaInstance=_state.isNewKibanaInstance;if(isWelcomeEnabled){if(isLoading){return this.renderLoading()}if(isNewKibanaInstance){return this.renderWelcome()}}return this.renderNormal()}}]);return Home}(_react.Component);Home.propTypes={addBasePath:_propTypes2.default.func.isRequired,directories:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,title:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,icon:_propTypes2.default.string.isRequired,path:_propTypes2.default.string.isRequired,showOnHomePage:_propTypes2.default.bool.isRequired,category:_propTypes2.default.string.isRequired})),apmUiEnabled:_propTypes2.default.bool.isRequired,recentlyAccessed:_propTypes2.default.arrayOf(_recently_accessed.recentlyAccessedShape).isRequired,find:_propTypes2.default.func.isRequired,localStorage:_propTypes2.default.object.isRequired,urlBasePath:_propTypes2.default.string.isRequired,mlEnabled:_propTypes2.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddData=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _react3=__webpack_require__(5);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var basePath=_chrome2.default.getBasePath();var AddDataUi=function AddDataUi(_ref){var apmUiEnabled=_ref.apmUiEnabled,isNewKibanaInstance=_ref.isNewKibanaInstance,intl=_ref.intl,mlEnabled=_ref.mlEnabled;var renderCards=function renderCards(){var apmTitle=intl.formatMessage({id:"kbn.home.addData.apm.nameTitle",defaultMessage:"APM"});var apmDescription=intl.formatMessage({id:"kbn.home.addData.apm.nameDescription",defaultMessage:"APM automatically collects in-depth performance metrics and errors from inside your applications."});var loggingTitle=intl.formatMessage({id:"kbn.home.addData.logging.nameTitle",defaultMessage:"Logging"});var loggingDescription=intl.formatMessage({id:"kbn.home.addData.logging.nameDescription",defaultMessage:"Ingest logs from popular data sources and easily visualize in preconfigured dashboards."});var metricsTitle=intl.formatMessage({id:"kbn.home.addData.metrics.nameTitle",defaultMessage:"Metrics"});var metricsDescription=intl.formatMessage({id:"kbn.home.addData.metrics.nameDescription",defaultMessage:"Collect metrics from the operating system and services running on your servers."});var securityTitle=intl.formatMessage({id:"kbn.home.addData.security.nameTitle",defaultMessage:"Security analytics"});var securityDescription=intl.formatMessage({id:"kbn.home.addData.security.nameDescription",defaultMessage:"Centralize security events for interactive investigation in ready-to-go visualizations."});var getApmCard=function getApmCard(){return _react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react2.default.createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"apmApp"}),title:apmTitle,description:apmDescription,footer:_react2.default.createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial/apm"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.apm.addApmButtonLabel",defaultMessage:"Add APM"}))}))};return _react2.default.createElement(_eui.EuiFlexGroup,{wrap:true,gutterSize:"none"},apmUiEnabled!==false&&getApmCard(),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react2.default.createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"loggingApp"}),title:loggingTitle,description:loggingDescription,footer:_react2.default.createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/logging"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.logging.addLogDataButtonLabel",defaultMessage:"Add log data"}))})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react2.default.createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"monitoringApp"}),title:metricsTitle,description:metricsDescription,footer:_react2.default.createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/metrics"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.metrics.addMetricsDataButtonLabel",defaultMessage:"Add metric data"}))})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiCard,{className:"homAddData__card",icon:_react2.default.createElement(_eui.EuiIcon,{className:"homAddData__icon",type:"securityApp"}),title:securityTitle,description:securityDescription,footer:_react2.default.createElement(_eui.EuiButton,{className:"homAddData__button",href:"#/home/tutorial_directory/security"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.security.addSecurityEventsButtonLabel",defaultMessage:"Add security events"}))})))};var footerItemClasses=(0,_classnames2.default)("homAddData__footerItem",{"homAddData__footerItem--highlight":isNewKibanaInstance});return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.addDataToKibanaTitle",defaultMessage:"Add Data to Kibana"}))),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.addDataToKibanaDescription",defaultMessage:"Use these solutions to quickly turn your data into pre-built dashboards and monitoring systems."}))))),_react2.default.createElement(_eui.EuiSpacer,null),renderCards(),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGrid,{columns:mlEnabled!==false?3:2},_react2.default.createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",{style:{height:38}},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.sampleDataTitle",defaultMessage:"Add sample data"})),_react2.default.createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:"#/home/tutorial_directory/sampleData"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.sampleDataLink",defaultMessage:"Load a data set and a Kibana dashboard"})))),mlEnabled!==false?_react2.default.createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",{style:{height:38}},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.uploadFileTitle",defaultMessage:"Upload data from log file"})),_react2.default.createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:basePath+"/app/ml#/filedatavisualizer"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.uploadFileLink",defaultMessage:"Import a CSV, NDJSON, or log file"})))):null,_react2.default.createElement(_eui.EuiFlexItem,{className:footerItemClasses},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",{style:{height:38}},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.yourDataTitle",defaultMessage:"Use Elasticsearch data"})),_react2.default.createElement(_eui.EuiLink,{style:{display:"block",textAlign:"center"},href:"#/management/kibana/index"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.addData.yourDataLink",defaultMessage:"Connect to your Elasticsearch index"}))))))};AddDataUi.propTypes={apmUiEnabled:_propTypes2.default.bool.isRequired,mlEnabled:_propTypes2.default.bool.isRequired,isNewKibanaInstance:_propTypes2.default.bool.isRequired};var AddData=exports.AddData=(0,_react3.injectI18n)(AddDataUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Welcome=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Welcome=exports.Welcome=function(_React$Component){_inherits(Welcome,_React$Component);function Welcome(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Welcome);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Welcome.__proto__||Object.getPrototypeOf(Welcome)).call.apply(_ref,[this].concat(args))),_this),_this.hideOnEsc=function(e){if(e.key==="Escape"){_this.props.onSkip()}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Welcome,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("keydown",this.hideOnEsc)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.hideOnEsc)}},{key:"render",value:function render(){var _props=this.props,urlBasePath=_props.urlBasePath,onSkip=_props.onSkip;return _react2.default.createElement("div",{className:"homWelcome"},_react2.default.createElement("header",{className:"homWelcome__header"},_react2.default.createElement("div",{className:"homWelcome__content eui-textCenter"},_react2.default.createElement(_eui.EuiSpacer,{size:"xxl"}),_react2.default.createElement("span",{className:"homWelcome__logo"},_react2.default.createElement(_eui.EuiIcon,{type:"logoKibana",size:"xxl"})),_react2.default.createElement(_eui.EuiTitle,{size:"l",className:"homWelcome__title"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.welcomeTitle",defaultMessage:"Welcome to Kibana"}))),_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"homWelcome__subtitle"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.welcomeDescription",defaultMessage:"Your window into the Elastic Stack"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}))),_react2.default.createElement("div",{className:"homWelcome__content homWelcome-body"},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"l"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiCard,{image:urlBasePath+"/plugins/kibana/assets/illo_dashboard.png",textAlign:"left",title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.letsStartTitle",defaultMessage:"Let's get started"}),description:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.letsStartDescription",defaultMessage:"We noticed that you don't have any data in your cluster.\nYou can try our sample data and dashboards or jump in with your own data."}),footer:_react2.default.createElement("footer",null,_react2.default.createElement(_eui.EuiButton,{fill:true,className:"homWelcome__footerAction",href:"#/home/tutorial_directory/sampleData"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tryButtonLabel",defaultMessage:"Try our sample data"})),_react2.default.createElement(_eui.EuiButtonEmpty,{className:"homWelcome__footerAction",onClick:onSkip,"data-test-subj":"skipWelcomeScreen"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.exploreButtonLabel",defaultMessage:"Explore on my own"})))})))))}}]);return Welcome}(_react2.default.Component);Welcome.propTypes={urlBasePath:_propTypes2.default.string.isRequired,onSkip:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureDirectory=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _synopsis=__webpack_require__(336);var _eui=__webpack_require__(2);var _feature_catalogue=__webpack_require__(39);var _i18n=__webpack_require__(8);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ALL_TAB_ID="all";var OTHERS_TAB_ID="others";var isOtherCategory=function isOtherCategory(directory){return directory.category!==_feature_catalogue.FeatureCatalogueCategory.DATA&&directory.category!==_feature_catalogue.FeatureCatalogueCategory.ADMIN};var FeatureDirectory=exports.FeatureDirectory=function(_React$Component){_inherits(FeatureDirectory,_React$Component);function FeatureDirectory(props){_classCallCheck(this,FeatureDirectory);var _this=_possibleConstructorReturn(this,(FeatureDirectory.__proto__||Object.getPrototypeOf(FeatureDirectory)).call(this,props));_this.onSelectedTabChanged=function(id){_this.setState({selectedTabId:id})};_this.renderTabs=function(){return _this.tabs.map(function(tab,index){return _react2.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})};_this.renderDirectories=function(){return _this.props.directories.filter(function(directory){if(_this.state.selectedTabId===ALL_TAB_ID){return true}if(_this.state.selectedTabId===OTHERS_TAB_ID){return isOtherCategory(directory)}return _this.state.selectedTabId===directory.category}).map(function(directory){return _react2.default.createElement(_eui.EuiFlexItem,{key:directory.id},_react2.default.createElement(_synopsis.Synopsis,{description:directory.description,iconType:directory.icon,title:directory.title,url:_this.props.addBasePath(directory.path),wrapInPanel:true}))})};_this.tabs=[{id:ALL_TAB_ID,name:_i18n.i18n.translate("kbn.home.directory.tabs.allTitle",{defaultMessage:"All"})},{id:_feature_catalogue.FeatureCatalogueCategory.DATA,name:_i18n.i18n.translate("kbn.home.directory.tabs.dataTitle",{defaultMessage:"Data Exploration & Visualization"})},{id:_feature_catalogue.FeatureCatalogueCategory.ADMIN,name:_i18n.i18n.translate("kbn.home.directory.tabs.administrativeTitle",{defaultMessage:"Administrative"})}];if(props.directories.some(isOtherCategory)){_this.tabs.push({id:OTHERS_TAB_ID,name:_i18n.i18n.translate("kbn.home.directory.tabs.otherTitle",{defaultMessage:"Other"})})}_this.state={selectedTabId:ALL_TAB_ID};return _this}_createClass(FeatureDirectory,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPage,{className:"homPage"},_react2.default.createElement(_eui.EuiPageBody,null,_react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.directory.directoryTitle",defaultMessage:"Directory"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiTabs,{className:"homeDirectoryTabs"},this.renderTabs()),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiFlexGrid,{columns:4},this.renderDirectories())))}}]);return FeatureDirectory}(_react2.default.Component);FeatureDirectory.propTypes={addBasePath:_propTypes2.default.func.isRequired,directories:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,title:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,icon:_propTypes2.default.string.isRequired,path:_propTypes2.default.string.isRequired,showOnHomePage:_propTypes2.default.bool.isRequired,category:_propTypes2.default.string.isRequired}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TutorialDirectory=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _synopsis=__webpack_require__(336);var _sample_data_set_cards=__webpack_require__(1611);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _eui=__webpack_require__(2);var _load_tutorials=__webpack_require__(563);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ALL_TAB_ID="all";var SAMPLE_DATA_TAB_ID="sampleData";var homeTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});var addDataTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.addDataTitle",{defaultMessage:"Add data"});var TutorialDirectoryUi=function(_React$Component){_inherits(TutorialDirectoryUi,_React$Component);function TutorialDirectoryUi(props){_classCallCheck(this,TutorialDirectoryUi);var _this=_possibleConstructorReturn(this,(TutorialDirectoryUi.__proto__||Object.getPrototypeOf(TutorialDirectoryUi)).call(this,props));_this.onSelectedTabChanged=function(id){_this.setState({selectedTabId:id})};_this.renderTabs=function(){return _this.tabs.map(function(tab,index){return _react2.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})};_this.renderTabContent=function(){if(_this.state.selectedTabId===SAMPLE_DATA_TAB_ID){return _react2.default.createElement(_sample_data_set_cards.SampleDataSetCards,{addBasePath:_this.props.addBasePath})}return _react2.default.createElement(_eui.EuiFlexGrid,{columns:4},_this.state.tutorialCards.filter(function(tutorial){return _this.state.selectedTabId===ALL_TAB_ID||_this.state.selectedTabId===tutorial.category}).map(function(tutorial){return _react2.default.createElement(_eui.EuiFlexItem,{key:tutorial.name},_react2.default.createElement(_synopsis.Synopsis,{iconType:tutorial.icon,description:tutorial.description,title:tutorial.name,wrapInPanel:true,url:tutorial.url,onClick:tutorial.onClick,isBeta:tutorial.isBeta}))}))};_this.tabs=[{id:ALL_TAB_ID,name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.allTitle",defaultMessage:"All"})},{id:"logging",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.loggingTitle",defaultMessage:"Logging"})},{id:"metrics",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.metricsTitle",defaultMessage:"Metrics"})},{id:"security",name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.securityAnalyticsTitle",defaultMessage:"Security analytics"})},{id:SAMPLE_DATA_TAB_ID,name:_this.props.intl.formatMessage({id:"kbn.home.tutorial.tabs.sampleDataTitle",defaultMessage:"Sample data"})}];var openTab=ALL_TAB_ID;if(props.openTab&&_this.tabs.some(function(tab){return tab.id===props.openTab})){openTab=props.openTab}_this.state={selectedTabId:openTab,tutorialCards:[]};return _this}_createClass(TutorialDirectoryUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var tutorialConfigs,tutorialCards;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this._isMounted=true;if(this.props.isK7Design){_chrome2.default.breadcrumbs.set([{text:homeTitle,href:"#/home"},{text:addDataTitle}])}_context.next=4;return(0,_load_tutorials.getTutorials)();case 4:tutorialConfigs=_context.sent;if(this._isMounted){_context.next=7;break}return _context.abrupt("return");case 7:tutorialCards=tutorialConfigs.map(function(tutorialConfig){return{category:tutorialConfig.category,icon:tutorialConfig.euiIconType,name:tutorialConfig.name,description:tutorialConfig.shortDescription,url:_this2.props.addBasePath("#/home/tutorial/"+tutorialConfig.id),elasticCloud:tutorialConfig.elasticCloud}});tutorialCards.push({name:this.props.intl.formatMessage({id:"kbn.home.tutorial.card.sampleDataTitle",defaultMessage:"Sample Data"}),description:this.props.intl.formatMessage({id:"kbn.home.tutorial.card.sampleDataDescription",defaultMessage:'Get started exploring Kibana with these "one click" data sets.'}),url:this.props.addBasePath("#/home/tutorial_directory/sampleData"),elasticCloud:true,onClick:this.onSelectedTabChanged.bind(null,SAMPLE_DATA_TAB_ID)});if(this.props.isCloudEnabled){tutorialCards=tutorialCards.filter(function(tutorial){return _lodash2.default.has(tutorial,"elasticCloud")})}tutorialCards.sort(function(a,b){return a.name.toLowerCase().localeCompare(b.name.toLowerCase())});this.setState({tutorialCards:tutorialCards});case 12:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _ref.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var breadcrumbs=void 0;if(!this.props.isK7Design){breadcrumbs=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiLink,{href:"#/home"},homeTitle)," / ",addDataTitle),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}))}return _react2.default.createElement(_eui.EuiPage,{className:"homPage"},_react2.default.createElement(_eui.EuiPageBody,null,breadcrumbs,_react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.addDataToKibanaTitle",defaultMessage:"Add Data to Kibana"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiTabs,null,this.renderTabs()),_react2.default.createElement(_eui.EuiSpacer,null),this.renderTabContent()))}}]);return TutorialDirectoryUi}(_react2.default.Component);TutorialDirectoryUi.propTypes={addBasePath:_propTypes2.default.func.isRequired,openTab:_propTypes2.default.string,isCloudEnabled:_propTypes2.default.bool.isRequired,isK7Design:_propTypes2.default.bool.isRequired};var TutorialDirectory=exports.TutorialDirectory=(0,_react3.injectI18n)(TutorialDirectoryUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SampleDataSetCards=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _sample_data_set_card=__webpack_require__(1612);var _notify=__webpack_require__(10);var _sample_data_client=__webpack_require__(1613);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SampleDataSetCards=exports.SampleDataSetCards=function(_React$Component){_inherits(SampleDataSetCards,_React$Component);function SampleDataSetCards(props){var _this2=this;_classCallCheck(this,SampleDataSetCards);var _this=_possibleConstructorReturn(this,(SampleDataSetCards.__proto__||Object.getPrototypeOf(SampleDataSetCards)).call(this,props));_this.loadSampleDataSets=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var sampleDataSets;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sampleDataSets=void 0;_context.prev=1;_context.next=4;return(0,_sample_data_client.listSampleDataSets)();case 4:sampleDataSets=_context.sent;_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToLoadListErrorMessage",{defaultMessage:"Unable to load sample data sets list"}),text:""+_context.t0.message});sampleDataSets=[];case 11:if(_this._isMounted){_context.next=13;break}return _context.abrupt("return");case 13:_this.setState({sampleDataSets:sampleDataSets.sort(function(a,b){return a.name.toLowerCase().localeCompare(b.name.toLowerCase())}),processingStatus:{}});case 14:case"end":return _context.stop()}}},_callee,_this2,[[1,7]])}));_this.install=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id){var targetSampleDataSet;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:targetSampleDataSet=_this.state.sampleDataSets.find(function(sampleDataSet){return sampleDataSet.id===id});_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,true))}});_context2.prev=2;_context2.next=5;return(0,_sample_data_client.installSampleDataSet)(id,targetSampleDataSet.defaultIndex);case 5:_context2.next=12;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](2);if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,false))}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToInstallErrorMessage",{defaultMessage:"Unable to install sample data set: {name}",values:{name:targetSampleDataSet.name}}),text:""+_context2.t0.message});return _context2.abrupt("return");case 12:if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,false)),sampleDataSets:prevState.sampleDataSets.map(function(sampleDataSet){if(sampleDataSet.id===id){sampleDataSet.status=_sample_data_set_card.INSTALLED_STATUS}return sampleDataSet})}})}_notify.toastNotifications.addSuccess(_defineProperty({title:_i18n.i18n.translate("kbn.home.sampleDataSet.installedLabel",{defaultMessage:"{name} installed",values:{name:targetSampleDataSet.name}})},"data-test-subj","sampleDataSetInstallToast"));case 14:case"end":return _context2.stop()}}},_callee2,_this2,[[2,7]])}));return function(_x){return _ref2.apply(this,arguments)}}();_this.uninstall=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id){var targetSampleDataSet;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:targetSampleDataSet=_this.state.sampleDataSets.find(function(sampleDataSet){return sampleDataSet.id===id});_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,true))}});_context3.prev=2;_context3.next=5;return(0,_sample_data_client.uninstallSampleDataSet)(id,targetSampleDataSet.defaultIndex);case 5:_context3.next=12;break;case 7:_context3.prev=7;_context3.t0=_context3["catch"](2);if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,false))}})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.home.sampleDataSet.unableToUninstallErrorMessage",{defaultMessage:"Unable to uninstall sample data set: {name}",values:{name:targetSampleDataSet.name}}),text:""+_context3.t0.message});return _context3.abrupt("return");case 12:if(_this._isMounted){_this.setState(function(prevState){return{processingStatus:_extends({},prevState.processingStatus,_defineProperty({},id,false)),sampleDataSets:prevState.sampleDataSets.map(function(sampleDataSet){if(sampleDataSet.id===id){sampleDataSet.status=_sample_data_set_card.UNINSTALLED_STATUS}return sampleDataSet})}})}_notify.toastNotifications.addSuccess(_defineProperty({title:_i18n.i18n.translate("kbn.home.sampleDataSet.uninstalledLabel",{defaultMessage:"{name} uninstalled",values:{name:targetSampleDataSet.name}})},"data-test-subj","sampleDataSetUninstallToast"));case 14:case"end":return _context3.stop()}}},_callee3,_this2,[[2,7]])}));return function(_x2){return _ref3.apply(this,arguments)}}();_this.state={sampleDataSets:[],processingStatus:{}};return _this}_createClass(SampleDataSetCards,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this._isMounted=true;this.loadSampleDataSets();case 2:case"end":return _context4.stop()}}},_callee4,this)}));function componentDidMount(){return _ref4.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var _this3=this;return _react2.default.createElement(_eui.EuiFlexGrid,{columns:4},this.state.sampleDataSets.map(function(sampleDataSet){return _react2.default.createElement(_eui.EuiFlexItem,{key:sampleDataSet.id},_react2.default.createElement(_sample_data_set_card.SampleDataSetCard,{id:sampleDataSet.id,description:sampleDataSet.description,name:sampleDataSet.name,launchUrl:_this3.props.addBasePath("/app/kibana#/dashboard/"+sampleDataSet.overviewDashboard),status:sampleDataSet.status,isProcessing:_lodash2.default.get(_this3.state.processingStatus,sampleDataSet.id,false),statusMsg:sampleDataSet.statusMsg,previewUrl:_this3.props.addBasePath(sampleDataSet.previewImagePath),onInstall:_this3.install,onUninstall:_this3.uninstall}))}))}}]);return SampleDataSetCards}(_react2.default.Component);SampleDataSetCards.propTypes={addBasePath:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SampleDataSetCard=exports.UNINSTALLED_STATUS=exports.INSTALLED_STATUS=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var INSTALLED_STATUS=exports.INSTALLED_STATUS="installed";var UNINSTALLED_STATUS=exports.UNINSTALLED_STATUS="not_installed";var SampleDataSetCard=exports.SampleDataSetCard=function(_React$Component){_inherits(SampleDataSetCard,_React$Component);function SampleDataSetCard(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SampleDataSetCard);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SampleDataSetCard.__proto__||Object.getPrototypeOf(SampleDataSetCard)).call.apply(_ref,[this].concat(args))),_this),_this.isInstalled=function(){if(_this.props.status===INSTALLED_STATUS){return true}return false},_this.install=function(){_this.props.onInstall(_this.props.id)},_this.uninstall=function(){_this.props.onUninstall(_this.props.id)},_this.renderBtn=function(){switch(_this.props.status){case INSTALLED_STATUS:return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{isLoading:_this.props.isProcessing,onClick:_this.uninstall,color:"danger","data-test-subj":"removeSampleDataSet"+_this.props.id},_this.props.isProcessing?_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.removingButtonLabel",defaultMessage:"Removing"}):_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.removeButtonLabel",defaultMessage:"Remove"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{href:_this.props.launchUrl,"data-test-subj":"launchSampleDataSet"+_this.props.id},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.viewDataButtonLabel",defaultMessage:"View data"}))));case UNINSTALLED_STATUS:return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{isLoading:_this.props.isProcessing,onClick:_this.install,"data-test-subj":"addSampleDataSet"+_this.props.id},_this.props.isProcessing?_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.addingButtonLabel",defaultMessage:"Adding"}):_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.addButtonLabel",defaultMessage:"Add"}))));default:{return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"top",content:_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.default.unableToVerifyErrorMessage",defaultMessage:"Unable to verify dataset status, error: {statusMsg}",values:{statusMsg:_this.props.statusMsg}}))},_react2.default.createElement(_eui.EuiButton,{isDisabled:true,"data-test-subj":"addSampleDataSet"+_this.props.id},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.sampleDataSetCard.default.addButtonLabel",defaultMessage:"Add"})))))}}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(SampleDataSetCard,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiCard,{className:"homSampleDataSetCard",image:this.props.previewUrl,title:this.props.name,description:this.props.description,betaBadgeLabel:this.isInstalled()?"INSTALLED":null,footer:this.renderBtn(),"data-test-subj":"sampleDataSetCard"+this.props.id})}}]);return SampleDataSetCard}(_react2.default.Component);SampleDataSetCard.propTypes={id:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,name:_propTypes2.default.string.isRequired,launchUrl:_propTypes2.default.string.isRequired,status:_propTypes2.default.oneOf([INSTALLED_STATUS,UNINSTALLED_STATUS,"unknown"]).isRequired,isProcessing:_propTypes2.default.bool.isRequired,statusMsg:_propTypes2.default.string,previewUrl:_propTypes2.default.string.isRequired,onInstall:_propTypes2.default.func.isRequired,onUninstall:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uninstallSampleDataSet=exports.installSampleDataSet=exports.listSampleDataSets=undefined;var listSampleDataSets=exports.listSampleDataSets=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_kfetch.kfetch)({method:"GET",pathname:sampleDataUrl});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}},_callee,this)}));return function listSampleDataSets(){return _ref.apply(this,arguments)}}();var installSampleDataSet=exports.installSampleDataSet=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id,sampleDataDefaultIndex){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_kfetch.kfetch)({method:"POST",pathname:sampleDataUrl+"/"+id});case 2:if(_chrome2.default.getUiSettingsClient().isDefault("defaultIndex")){_chrome2.default.getUiSettingsClient().set("defaultIndex",sampleDataDefaultIndex)}clearIndexPatternsCache();case 4:case"end":return _context2.stop()}}},_callee2,this)}));return function installSampleDataSet(_x,_x2){return _ref2.apply(this,arguments)}}();var uninstallSampleDataSet=exports.uninstallSampleDataSet=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(id,sampleDataDefaultIndex){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(0,_kfetch.kfetch)({method:"DELETE",pathname:sampleDataUrl+"/"+id});case 2:if(!_chrome2.default.getUiSettingsClient().isDefault("defaultIndex")&&_chrome2.default.getUiSettingsClient().get("defaultIndex")===sampleDataDefaultIndex){_chrome2.default.getUiSettingsClient().set("defaultIndex",null)}clearIndexPatternsCache();case 4:case"end":return _context3.stop()}}},_callee3,this)}));return function uninstallSampleDataSet(_x3,_x4){return _ref3.apply(this,arguments)}}();var _kfetch=__webpack_require__(79);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _kibana_services=__webpack_require__(1614);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var sampleDataUrl="/api/sample_data";function clearIndexPatternsCache(){_kibana_services.indexPatternService.getIds.clearCache()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.indexPatternService=undefined;var _modules=__webpack_require__(3);var indexPatternService=exports.indexPatternService=void 0;_modules.uiModules.get("kibana").run(function($injector){exports.indexPatternService=indexPatternService=$injector.get("indexPatterns")})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tutorial=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _footer=__webpack_require__(1616);var _introduction=__webpack_require__(1617);var _instruction_set=__webpack_require__(1618);var _saved_objects_installer=__webpack_require__(1624);var _eui=__webpack_require__(2);var _status_check_states=__webpack_require__(564);var StatusCheckStates=_interopRequireWildcard(_status_check_states);var _react3=__webpack_require__(5);var _i18n=__webpack_require__(8);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var INSTRUCTIONS_TYPE={ELASTIC_CLOUD:"elasticCloud",ON_PREM:"onPrem",ON_PREM_ELASTIC_CLOUD:"onPremElasticCloud"};var homeTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.homeTitle",{defaultMessage:"Home"});var addDataTitle=_i18n.i18n.translate("kbn.home.breadcrumbs.addDataTitle",{defaultMessage:"Add data"});var TutorialUi=function(_React$Component){_inherits(TutorialUi,_React$Component);function TutorialUi(props){var _this2=this;_classCallCheck(this,TutorialUi);var _this=_possibleConstructorReturn(this,(TutorialUi.__proto__||Object.getPrototypeOf(TutorialUi)).call(this,props));_this.getInstructions=function(){if(!_this.state.tutorial){return{instructionSets:[]}}switch(_this.state.visibleInstructions){case INSTRUCTIONS_TYPE.ELASTIC_CLOUD:return _this.state.tutorial.elasticCloud;case INSTRUCTIONS_TYPE.ON_PREM:return _this.state.tutorial.onPrem;case INSTRUCTIONS_TYPE.ON_PREM_ELASTIC_CLOUD:return _this.state.tutorial.onPremElasticCloud;default:throw new Error(_this.props.intl.formatMessage({id:"kbn.home.tutorial.unhandledInstructionTypeErrorDescription",defaultMessage:"Unhandled instruction type {visibleInstructions}"},{visibleInstructions:_this.state.visibleInstructions}))}};_this.getInstructionSets=function(){return _this.getInstructions().instructionSets};_this.initInstructionsState=function(){var instructions=_this.getInstructions();var paramValues={};if(instructions.params){instructions.params.forEach(function(param){paramValues[param.id]=param.defaultValue})}var statusCheckStates=new Array(instructions.instructionSets.length).fill(StatusCheckStates.NOT_CHECKED);_this.setState({paramValues:paramValues,statusCheckStates:statusCheckStates})};_this.setVisibleInstructions=function(instructionsType){_this.setState({visibleInstructions:instructionsType},_this.initInstructionsState)};_this.setParameter=function(paramId,newValue){_this.setState(function(previousState){var paramValues=_lodash2.default.cloneDeep(previousState.paramValues);paramValues[paramId]=newValue;return{paramValues:paramValues}})};_this.checkInstructionSetStatus=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(instructionSetIndex){var instructionSet,esHitsCheckConfig,statusCheckState;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:instructionSet=_this.getInstructionSets()[instructionSetIndex];esHitsCheckConfig=_lodash2.default.get(instructionSet,"statusCheck.esHitsCheck");if(!esHitsCheckConfig){_context.next=7;break}_context.next=5;return _this.fetchEsHitsStatus(esHitsCheckConfig);case 5:statusCheckState=_context.sent;_this.setState(function(prevState){return{statusCheckStates:_extends({},prevState.statusCheckStates,_defineProperty({},instructionSetIndex,statusCheckState))}});case 7:case"end":return _context.stop()}}},_callee,_this2)}));return function(_x){return _ref.apply(this,arguments)}}();_this.fetchEsHitsStatus=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(esHitsCheckConfig){var searchHeader,searchBody,response,results,numHits;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:searchHeader=JSON.stringify({index:esHitsCheckConfig.index});searchBody=JSON.stringify({query:esHitsCheckConfig.query,size:1});_context2.next=4;return fetch(_this.props.addBasePath("/elasticsearch/_msearch"),{method:"post",body:searchHeader+"\n"+searchBody+"\n",headers:{accept:"application/json","content-type":"application/x-ndjson","kbn-xsrf":"kibana"},credentials:"same-origin"});case 4:response=_context2.sent;if(!(response.status>300)){_context2.next=7;break}return _context2.abrupt("return",StatusCheckStates.ERROR);case 7:_context2.next=9;return response.json();case 9:results=_context2.sent;numHits=_lodash2.default.get(results,"responses.[0].hits.hits.length",0);return _context2.abrupt("return",numHits===0?StatusCheckStates.NO_DATA:StatusCheckStates.HAS_DATA);case 12:case"end":return _context2.stop()}}},_callee2,_this2)}));return function(_x2){return _ref2.apply(this,arguments)}}();_this.renderInstructionSetsToggle=function(){if(!_this.props.isCloudEnabled&&_this.state.tutorial.onPremElasticCloud){var selfManagedLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.selfManagedButtonLabel",defaultMessage:"Self managed"});var cloudLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.elasticCloudButtonLabel",defaultMessage:"Elastic Cloud"});var radioButtons=[{id:INSTRUCTIONS_TYPE.ON_PREM,label:selfManagedLabel},{id:INSTRUCTIONS_TYPE.ON_PREM_ELASTIC_CLOUD,label:cloudLabel}];return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonGroup,{options:radioButtons,idSelected:_this.state.visibleInstructions,onChange:_this.setVisibleInstructions,color:"primary"})))}};_this.onStatusCheck=function(instructionSetIndex){_this.setState(function(prevState){return{statusCheckStates:_extends({},prevState.statusCheckStates,_defineProperty({},instructionSetIndex,StatusCheckStates.FETCHING))}},_this.checkInstructionSetStatus.bind(null,instructionSetIndex))};_this.renderInstructionSets=function(instructions){var offset=1;return instructions.instructionSets.map(function(instructionSet,index){var currentOffset=offset;offset+=instructionSet.instructionVariants[0].instructions.length;return _react2.default.createElement(_instruction_set.InstructionSet,{title:instructionSet.title,instructionVariants:instructionSet.instructionVariants,statusCheckConfig:instructionSet.statusCheck,statusCheckState:_this.state.statusCheckStates[index],onStatusCheck:function onStatusCheck(){_this.onStatusCheck(index)},offset:currentOffset,params:instructions.params,paramValues:_this.state.paramValues,setParameter:_this.setParameter,replaceTemplateStrings:_this.props.replaceTemplateStrings,key:index})})};_this.renderSavedObjectsInstaller=function(){if(!_this.state.tutorial.savedObjects){return}return _react2.default.createElement(_saved_objects_installer.SavedObjectsInstaller,{bulkCreate:_this.props.bulkCreate,savedObjects:_this.state.tutorial.savedObjects,installMsg:_this.state.tutorial.savedObjectsInstallMsg})};_this.renderFooter=function(){var label=void 0;var url=void 0;if(_lodash2.default.has(_this.state,"tutorial.artifacts.application")){label=_this.state.tutorial.artifacts.application.label;url=_this.props.addBasePath(_this.state.tutorial.artifacts.application.path)}else if(_lodash2.default.has(_this.state,"tutorial.artifacts.dashboards")){var overviewDashboard=_this.state.tutorial.artifacts.dashboards.find(function(dashboard){return dashboard.isOverview});if(overviewDashboard){label=overviewDashboard.linkLabel;url=_this.props.addBasePath("/app/kibana#/dashboard/"+overviewDashboard.id)}}if(url&&label){return _react2.default.createElement(_footer.Footer,{label:label,url:url})}};_this.state={notFound:false,paramValues:{},statusCheckStates:[],tutorial:null};if(props.isCloudEnabled){_this.state.visibleInstructions=INSTRUCTIONS_TYPE.ELASTIC_CLOUD}else{_this.state.visibleInstructions=INSTRUCTIONS_TYPE.ON_PREM}return _this}_createClass(TutorialUi,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"componentDidMount",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var tutorial;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.props.getTutorial(this.props.tutorialId);case 2:tutorial=_context3.sent;if(this._isMounted){_context3.next=5;break}return _context3.abrupt("return");case 5:if(tutorial){this.setState({tutorial:tutorial},this.initInstructionsState)}else{this.setState({notFound:true})}if(this.props.isK7Design){_chrome2.default.breadcrumbs.set([{text:homeTitle,href:"#/home"},{text:addDataTitle,href:"#/home/tutorial_directory"},{text:tutorial?tutorial.name:this.props.tutorialId}])}case 7:case"end":return _context3.stop()}}},_callee3,this)}));function componentDidMount(){return _ref3.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var content=void 0;if(this.state.notFound){content=_react2.default.createElement("div",{className:"homTutorial__notFoundPanel"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.noTutorialLabel",defaultMessage:"Unable to find tutorial {tutorialId}",values:{tutorialId:this.props.tutorialId}}))))}if(this.state.tutorial){var previewUrl=void 0;if(this.state.tutorial.previewImagePath){previewUrl=this.props.addBasePath(this.state.tutorial.previewImagePath)}var exportedFieldsUrl=void 0;if(_lodash2.default.has(this.state,"tutorial.artifacts.exportedFields")){exportedFieldsUrl=this.props.replaceTemplateStrings(this.state.tutorial.artifacts.exportedFields.documentationUrl)}var instructions=this.getInstructions();content=_react2.default.createElement("div",null,_react2.default.createElement(_introduction.Introduction,{title:this.state.tutorial.name,description:this.props.replaceTemplateStrings(this.state.tutorial.longDescription),previewUrl:previewUrl,exportedFieldsUrl:exportedFieldsUrl,iconType:this.state.tutorial.euiIconType,isBeta:this.state.tutorial.isBeta}),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement("div",{className:"eui-textCenter"},this.renderInstructionSetsToggle()),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},this.renderInstructionSets(instructions),this.renderSavedObjectsInstaller(),this.renderFooter()))}var breadcrumbs=void 0;if(!this.props.isK7Design){breadcrumbs=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiLink,{href:"#/home"},homeTitle)," /"," ",_react2.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory"},addDataTitle)," /"," ",this.state.tutorial?this.state.tutorial.name:this.props.tutorialId),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}))}return _react2.default.createElement(_eui.EuiPage,{className:"homPage"},_react2.default.createElement(_eui.EuiPageBody,null,breadcrumbs,content))}}]);return TutorialUi}(_react2.default.Component);TutorialUi.propTypes={addBasePath:_propTypes2.default.func.isRequired,isCloudEnabled:_propTypes2.default.bool.isRequired,getTutorial:_propTypes2.default.func.isRequired,replaceTemplateStrings:_propTypes2.default.func.isRequired,tutorialId:_propTypes2.default.string.isRequired,bulkCreate:_propTypes2.default.func.isRequired,isK7Design:_propTypes2.default.bool.isRequired};var Tutorial=exports.Tutorial=(0,_react3.injectI18n)(TutorialUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Footer=Footer;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Footer(_ref){var url=_ref.url,label=_ref.label;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.exploreYourDataDescription",defaultMessage:"When all steps are complete, you're ready to explore your data."})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,href:url},label))))}Footer.propTypes={url:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Introduction=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _content=__webpack_require__(337);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IntroductionUI(_ref){var description=_ref.description,previewUrl=_ref.previewUrl,title=_ref.title,exportedFieldsUrl=_ref.exportedFieldsUrl,iconType=_ref.iconType,isBeta=_ref.isBeta,intl=_ref.intl;var img=void 0;if(previewUrl){img=_react2.default.createElement(_eui.EuiImage,{size:"l",hasShadow:true,allowFullScreen:true,fullScreenIconColor:"dark",alt:intl.formatMessage({id:"kbn.home.tutorial.introduction.imageAltDescription",defaultMessage:"screenshot of primary dashboard."}),url:previewUrl})}var exportedFields=void 0;if(exportedFieldsUrl){exportedFields=_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiButton,{href:exportedFieldsUrl,target:"_blank",rel:"noopener"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.introduction.viewButtonLabel",defaultMessage:"View exported fields"})))}var icon=void 0;if(iconType){icon=_react2.default.createElement(_eui.EuiIcon,{type:iconType,size:"xl",style:{marginRight:16}})}var betaBadge=void 0;if(isBeta){betaBadge=_react2.default.createElement(_eui.EuiBetaBadge,{label:intl.formatMessage({id:"kbn.home.tutorial.introduction.betaLabel",defaultMessage:"Beta"})})}return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},icon),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h2",null,title,"  ",betaBadge)))),_react2.default.createElement(_content.Content,{text:description}),exportedFields),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},img))}IntroductionUI.propTypes={description:_propTypes2.default.string.isRequired,title:_propTypes2.default.string.isRequired,previewUrl:_propTypes2.default.string,exportedFieldsUrl:_propTypes2.default.string,iconType:_propTypes2.default.string,isBeta:_propTypes2.default.bool};IntroductionUI.defaultProps={isBeta:false};var Introduction=exports.Introduction=(0,_react3.injectI18n)(IntroductionUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InstructionSet=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _components=__webpack_require__(115);var _instruction=__webpack_require__(1619);var _parameter_form=__webpack_require__(1620);var _content=__webpack_require__(337);var _instruction_variant=__webpack_require__(1623);var _eui=__webpack_require__(2);var _status_check_states=__webpack_require__(564);var StatusCheckStates=_interopRequireWildcard(_status_check_states);var _react3=__webpack_require__(5);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var InstructionSetUi=function(_React$Component){_inherits(InstructionSetUi,_React$Component);function InstructionSetUi(props){_classCallCheck(this,InstructionSetUi);var _this=_possibleConstructorReturn(this,(InstructionSetUi.__proto__||Object.getPrototypeOf(InstructionSetUi)).call(this,props));_this.handleToggleVisibility=function(){_this.setState(function(prevState){return{isParamFormVisible:!prevState.isParamFormVisible}})};_this.onSelectedTabChanged=function(id){_this.setState({selectedTabId:id})};_this.renderTabs=function(){return _this.tabs.map(function(tab,index){return _react2.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this.onSelectedTabChanged(tab.id)},isSelected:tab.id===_this.state.selectedTabId,key:index},tab.name)})};_this.renderInstructions=function(){var instructionVariant=_this.props.instructionVariants.find(function(variant){return variant.id===_this.state.selectedTabId});if(!instructionVariant){return}var steps=instructionVariant.instructions.map(function(instruction,index){var step=_react2.default.createElement(_instruction.Instruction,{commands:instruction.commands,paramValues:_this.props.paramValues,textPre:instruction.textPre,textPost:instruction.textPost,replaceTemplateStrings:_this.props.replaceTemplateStrings});return{title:instruction.title,children:step,key:index}});if(_this.props.statusCheckConfig){steps.push(_this.renderStatusCheck())}return _react2.default.createElement(_eui.EuiSteps,{steps:steps,firstStepNumber:_this.props.offset})};_this.renderHeader=function(){var paramsVisibilityToggle=void 0;if(_this.props.params){var visibilityToggleClasses=(0,_classnames2.default)("kuiIcon kuiSideBarCollapsibleTitle__caret",{"fa-caret-right":!_this.state.isParamFormVisible,"fa-caret-down":_this.state.isParamFormVisible});var ariaLabel=_this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.toggleAriaLabel",defaultMessage:"toggle command parameters visibility"});paramsVisibilityToggle=_react2.default.createElement("div",{className:"kuiSideBarCollapsibleTitle",style:{cursor:"pointer"}},_react2.default.createElement("div",{"aria-label":ariaLabel,className:"kuiSideBarCollapsibleTitle__label",onClick:_this.handleToggleVisibility},_react2.default.createElement("span",{className:visibilityToggleClasses}),_react2.default.createElement("span",{className:"kuiSideBarCollapsibleTitle__text"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.instructionSet.customizeLabel",defaultMessage:"Customize your code snippets"}))))}return _react2.default.createElement(_components.KuiBar,{className:"kuiVerticalRhythm"},_react2.default.createElement(_components.KuiBarSection,null,_react2.default.createElement("div",{className:"kuiTitle"},_this.props.title)),_react2.default.createElement(_components.KuiBarSection,null,paramsVisibilityToggle))};_this.tabs=props.instructionVariants.map(function(variant){return{id:variant.id,name:(0,_instruction_variant.getDisplayText)(variant.id)}});_this.state={isParamFormVisible:false};if(_this.tabs.length>0){_this.state.selectedTabId=_this.tabs[0].id}return _this}_createClass(InstructionSetUi,[{key:"renderStatusCheckMessage",value:function renderStatusCheckMessage(){var message=void 0;var color=void 0;switch(this.props.statusCheckState){case StatusCheckStates.NOT_CHECKED:case StatusCheckStates.FETCHING:return null;case StatusCheckStates.HAS_DATA:message=this.props.statusCheckConfig.success?this.props.statusCheckConfig.success:this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.successLabel",defaultMessage:"Success"});color="success";break;case StatusCheckStates.ERROR:case StatusCheckStates.NO_DATA:message=this.props.statusCheckConfig.error?this.props.statusCheckConfig.error:this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.noDataLabel",defaultMessage:"No data found"});color="warning";break}return _react2.default.createElement(_eui.EuiCallOut,{title:message,color:color})}},{key:"getStepStatus",value:function getStepStatus(statusCheckState){switch(statusCheckState){case undefined:case StatusCheckStates.NOT_CHECKED:case StatusCheckStates.FETCHING:return"incomplete";case StatusCheckStates.HAS_DATA:return"complete";case StatusCheckStates.NO_DATA:return"warning";case StatusCheckStates.ERROR:return"danger";default:throw new Error(this.props.intl.formatMessage({id:"kbn.home.tutorial.unexpectedStatusCheckStateErrorDescription",defaultMessage:"Unexpected status check state {statusCheckState}"},{statusCheckState:statusCheckState}))}}},{key:"renderStatusCheck",value:function renderStatusCheck(){var _props=this.props,statusCheckState=_props.statusCheckState,statusCheckConfig=_props.statusCheckConfig,onStatusCheck=_props.onStatusCheck;var checkStatusStep=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_content.Content,{text:statusCheckConfig.text})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{onClick:onStatusCheck,isLoading:statusCheckState===StatusCheckStates.FETCHING},statusCheckConfig.btnLabel||_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.instructionSet.checkStatusButtonLabel",defaultMessage:"Check status"})))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderStatusCheckMessage());return{title:statusCheckConfig.title||this.props.intl.formatMessage({id:"kbn.home.tutorial.instructionSet.statusCheckTitle",defaultMessage:"Status Check"}),status:this.getStepStatus(statusCheckState),children:checkStatusStep,key:"checkStatusStep"}}},{key:"render",value:function render(){var paramsForm=void 0;if(this.props.params&&this.state.isParamFormVisible){paramsForm=_react2.default.createElement(_parameter_form.ParameterForm,{params:this.props.params,paramValues:this.props.paramValues,setParameter:this.props.setParameter})}return _react2.default.createElement("div",{className:"kuiVerticalRhythmLarge"},this.renderHeader(),paramsForm,_react2.default.createElement(_eui.EuiTabs,{className:"kuiVerticalRhythm"},this.renderTabs()),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderInstructions())}}]);return InstructionSetUi}(_react2.default.Component);var instructionShape=_propTypes2.default.shape({title:_propTypes2.default.string,textPre:_propTypes2.default.string,commands:_propTypes2.default.arrayOf(_propTypes2.default.string),textPost:_propTypes2.default.string});var instructionVariantShape=_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,instructions:_propTypes2.default.arrayOf(instructionShape).isRequired});var statusCheckConfigShape=_propTypes2.default.shape({success:_propTypes2.default.string,error:_propTypes2.default.string,title:_propTypes2.default.string,text:_propTypes2.default.string,btnLabel:_propTypes2.default.string});InstructionSetUi.propTypes={title:_propTypes2.default.string.isRequired,instructionVariants:_propTypes2.default.arrayOf(instructionVariantShape).isRequired,statusCheckConfig:statusCheckConfigShape,statusCheckState:_propTypes2.default.oneOf([StatusCheckStates.FETCHING,StatusCheckStates.NOT_CHECKED,StatusCheckStates.HAS_DATA,StatusCheckStates.NO_DATA,StatusCheckStates.ERROR]),onStatusCheck:_propTypes2.default.func.isRequired,offset:_propTypes2.default.number.isRequired,params:_propTypes2.default.array,paramValues:_propTypes2.default.object.isRequired,setParameter:_propTypes2.default.func,replaceTemplateStrings:_propTypes2.default.func.isRequired};var InstructionSet=exports.InstructionSet=(0,_react3.injectI18n)(InstructionSetUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Instruction=Instruction;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _content=__webpack_require__(337);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Instruction(_ref){var commands=_ref.commands,paramValues=_ref.paramValues,textPost=_ref.textPost,textPre=_ref.textPre,replaceTemplateStrings=_ref.replaceTemplateStrings;var pre=void 0;if(textPre){pre=_react2.default.createElement(_content.Content,{text:replaceTemplateStrings(textPre)})}var post=void 0;if(textPost){post=_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_content.Content,{text:replaceTemplateStrings(textPost)}))}var copyButton=void 0;var commandBlock=void 0;if(commands){var cmdText=commands.map(function(cmd){return replaceTemplateStrings(cmd,paramValues)}).join("\n");copyButton=_react2.default.createElement(_eui.EuiCopy,{textToCopy:cmdText},function(copy){return _react2.default.createElement(_eui.EuiButton,{size:"s",onClick:copy},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.home.tutorial.instruction.copyButtonLabel",defaultMessage:"Copy snippet"}))});commandBlock=_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiCodeBlock,{language:"sh"},cmdText))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},pre),_react2.default.createElement(_eui.EuiFlexItem,{style:{minWidth:114},grow:false},copyButton)),commandBlock,post,_react2.default.createElement(_eui.EuiSpacer,null))}Instruction.propTypes={commands:_propTypes2.default.array,paramValues:_propTypes2.default.object.isRequired,textPost:_propTypes2.default.string,textPre:_propTypes2.default.string,replaceTemplateStrings:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ParameterForm=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _number_parameter=__webpack_require__(1621);var _string_parameter=__webpack_require__(1622);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ParameterForm=exports.ParameterForm=function(_React$Component){_inherits(ParameterForm,_React$Component);function ParameterForm(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ParameterForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ParameterForm.__proto__||Object.getPrototypeOf(ParameterForm)).call.apply(_ref,[this].concat(args))),_this),_this.renderInputs=function(){return _this.props.params.map(function(param){switch(param.type){case"number":return _react2.default.createElement(_number_parameter.NumberParameter,{key:param.id,id:param.id,label:param.label,value:_this.props.paramValues[param.id],setParameter:_this.props.setParameter});case"string":return _react2.default.createElement(_string_parameter.StringParameter,{key:param.id,id:param.id,label:param.label,value:_this.props.paramValues[param.id],setParameter:_this.props.setParameter});default:throw new Error("Unhandled parameter type "+param.type)}})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ParameterForm,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"kuiSideBarSection"},this.renderInputs()))}}]);return ParameterForm}(_react2.default.Component);var paramsShape=_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired,type:_propTypes2.default.string.isRequired});ParameterForm.propTypes={params:_propTypes2.default.arrayOf(paramsShape).isRequired,paramValues:_propTypes2.default.object.isRequired,setParameter:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NumberParameter=NumberParameter;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NumberParameter(_ref){var id=_ref.id,label=_ref.label,value=_ref.value,setParameter=_ref.setParameter;var handleChange=function handleChange(evt){setParameter(id,parseFloat(evt.target.value))};return _react2.default.createElement("div",{className:"kuiSideBarFormRow"},_react2.default.createElement("label",{className:"kuiSideBarFormRow__label",htmlFor:id},label),_react2.default.createElement("div",{className:"kuiSideBarFormRow__control kuiFieldGroupSection--wide"},_react2.default.createElement("input",{className:"kuiTextInput",type:"number",value:value,onChange:handleChange,id:id})))}NumberParameter.propTypes={id:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired,value:_propTypes2.default.number.isRequired,setParameter:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringParameter=StringParameter;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StringParameter(_ref){var id=_ref.id,label=_ref.label,value=_ref.value,setParameter=_ref.setParameter;var handleChange=function handleChange(evt){setParameter(id,evt.target.value)};return _react2.default.createElement("div",{className:"kuiSideBarFormRow"},_react2.default.createElement("label",{className:"kuiSideBarFormRow__label"},label),_react2.default.createElement("div",{className:"kuiSideBarFormRow__control kuiFieldGroupSection--wide"},_react2.default.createElement("input",{className:"kuiTextInput",type:"text",value:value,onChange:handleChange})))}StringParameter.propTypes={id:_propTypes2.default.string.isRequired,label:_propTypes2.default.string.isRequired,value:_propTypes2.default.string.isRequired,setParameter:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";var _DISPLAY_MAP;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayText=getDisplayText;var INSTRUCTION_VARIANT=exports.INSTRUCTION_VARIANT={OSX:"osx",DEB:"deb",RPM:"rpm",DOCKER:"docker",WINDOWS:"windows",NODE:"node",DJANGO:"django",FLASK:"flask",RAILS:"rails",RACK:"rack",JS:"js",GO:"go",JAVA:"java"};var DISPLAY_MAP=(_DISPLAY_MAP={},_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.OSX,"macOS"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DEB,"DEB"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RPM,"RPM"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DOCKER,"Docker"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.WINDOWS,"Windows"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.NODE,"Node.js"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DJANGO,"Django"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.FLASK,"Flask"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RAILS,"Ruby on Rails"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RACK,"Rack"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JS,"RUM (JS)"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.GO,"Go"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JAVA,"Java"),_DISPLAY_MAP);function getDisplayText(id){if(id in DISPLAY_MAP){return DISPLAY_MAP[id]}return id}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsInstaller=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SavedObjectsInstallerUi=function(_React$Component){_inherits(SavedObjectsInstallerUi,_React$Component);function SavedObjectsInstallerUi(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,SavedObjectsInstallerUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SavedObjectsInstallerUi.__proto__||Object.getPrototypeOf(SavedObjectsInstallerUi)).call.apply(_ref,[this].concat(args))),_this),_this.DEFAULT_BUTTON_LABEL=_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.defaultButtonLabel",defaultMessage:"Load Kibana objects"}),_this.state={isInstalling:false,isInstalled:false,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL},_this.installSavedObjects=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var resp,errors,overwriteErrors,hasErrors,statusMsg;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isInstalling:true});resp=void 0;_context.prev=2;_context.next=5;return _this.props.bulkCreate(_this.props.savedObjects,{overwrite:_this.state.overwrite});case 5:resp=_context.sent;_context.next=14;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);if(_this._isMounted){_context.next=12;break}return _context.abrupt("return");case 12:_this.setState({isInstalling:false,installStatusMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.requestFailedErrorMessage",defaultMessage:"Request failed, Error: {message}"},{message:_context.t0.message}),isInstalled:false,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL});return _context.abrupt("return");case 14:if(_this._isMounted){_context.next=16;break}return _context.abrupt("return");case 16:errors=resp.savedObjects.filter(function(savedObject){return savedObject.hasOwnProperty("error")});overwriteErrors=errors.filter(function(savedObject){return savedObject.error.statusCode===409});if(!(overwriteErrors.length>0)){_context.next=21;break}_this.setState({isInstalling:false,installStatusMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.installStatusLabel",defaultMessage:"{overwriteErrorsLength} of {savedObjectsLength} objects already exist. Click 'Confirm overwrite' to import and overwrite existing objects. Any changes to the objects will be lost."},{overwriteErrorsLength:overwriteErrors.length,savedObjectsLength:_this.props.savedObjects.length}),isInstalled:false,overwrite:true,buttonLabel:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.confirmButtonLabel",defaultMessage:"Confirm overwrite"})});return _context.abrupt("return");case 21:hasErrors=errors.length>0;statusMsg=hasErrors?_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.unableToAddErrorMessage",defaultMessage:"Unable to add {errorsLength} of {savedObjectsLength} kibana objects, Error: {errorMessage}"},{errorsLength:errors.length,savedObjectsLength:_this.props.savedObjects.length,errorMessage:errors[0].error.message}):_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.addedLabel",defaultMessage:"{savedObjectsLength} saved objects successfully added"},{savedObjectsLength:_this.props.savedObjects.length});_this.setState({isInstalling:false,installStatusMsg:statusMsg,isInstalled:!hasErrors,overwrite:false,buttonLabel:_this.DEFAULT_BUTTON_LABEL});case 24:case"end":return _context.stop()}}},_callee,_this2,[[2,8]])})),_this.renderInstallStep=function(){var installMsg=_this.props.installMsg?_this.props.installMsg:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.installLabel",defaultMessage:"Imports index pattern, visualizations and pre-defined dashboards."});var installStep=_react3.default.createElement(_react2.Fragment,null,_react3.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react3.default.createElement(_eui.EuiFlexItem,null,_react3.default.createElement(_eui.EuiText,null,_react3.default.createElement("p",null,installMsg))),_react3.default.createElement(_eui.EuiFlexItem,{grow:false},_react3.default.createElement(_eui.EuiButton,{onClick:_this.installSavedObjects,isLoading:_this.state.isInstalling,"data-test-subj":"loadSavedObjects"},_this.state.buttonLabel))),_react3.default.createElement(_eui.EuiSpacer,{size:"s"}),_this.renderInstallMessage());return{title:_this.props.intl.formatMessage({id:"kbn.home.tutorial.savedObject.loadTitle",defaultMessage:"Load Kibana objects"}),status:_this.state.isInstalled?"complete":"incomplete",children:installStep,key:"installStep"}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(SavedObjectsInstallerUi,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"renderInstallMessage",value:function renderInstallMessage(){if(!this.state.installStatusMsg){return}return _react3.default.createElement(_eui.EuiCallOut,{title:this.state.installStatusMsg,color:this.state.isInstalled?"success":"warning","data-test-subj":this.state.isInstalled?"loadSavedObjects_success":"loadSavedObjects_failed"})}},{key:"render",value:function render(){return _react3.default.createElement(_eui.EuiSteps,{steps:[this.renderInstallStep()]})}}]);return SavedObjectsInstallerUi}(_react3.default.Component);var savedObjectShape=_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,type:_propTypes2.default.string.isRequired,attributes:_propTypes2.default.object.isRequired});SavedObjectsInstallerUi.propTypes={bulkCreate:_propTypes2.default.func.isRequired,savedObjects:_propTypes2.default.arrayOf(savedObjectShape).isRequired,installMsg:_propTypes2.default.string};var SavedObjectsInstaller=exports.SavedObjectsInstaller=(0,_react.injectI18n)(SavedObjectsInstallerUi)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceTemplateStrings=replaceTemplateStrings;var _mustache=__webpack_require__(1951);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _metadata=__webpack_require__(69);var _documentation_links=__webpack_require__(103);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TEMPLATE_TAGS=["{","}"];var mustacheWriter=new _mustache.Writer;mustacheWriter.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return value}};function replaceTemplateStrings(text){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var variables={curlyOpen:"{",curlyClose:"}",config:{cloud:{id:_chrome2.default.getInjected("cloudId")},docs:{base_url:_documentation_links.ELASTIC_WEBSITE_URL,beats:{filebeat:_documentation_links.documentationLinks.filebeat.base,metricbeat:_documentation_links.documentationLinks.metricbeat.base,heartbeat:_documentation_links.documentationLinks.heartbeat.base,functionbeat:_documentation_links.documentationLinks.functionbeat.base},logstash:_documentation_links.documentationLinks.logstash.base,version:_documentation_links.DOC_LINK_VERSION},kibana:{version:_metadata.metadata.version}},params:params};mustacheWriter.parse(text,TEMPLATE_TAGS);return mustacheWriter.render(text,variables)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2714)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(316);__webpack_require__(1629);__webpack_require__(565);__webpack_require__(1634);__webpack_require__(1640);__webpack_require__(531);var _feature_catalogue=__webpack_require__(39);_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"discover",title:i18n("kbn.discover.discoverTitle",{defaultMessage:"Discover"}),description:i18n("kbn.discover.discoverDescription",{defaultMessage:"Interactively explore your data by querying and filtering raw documents."}),icon:"discoverApp",path:"/app/kibana#/discover",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(102);var _i18n=__webpack_require__(14);var _modules=__webpack_require__(3);var _no_results=__webpack_require__(1630);var _unsupported_index_pattern=__webpack_require__(1631);__webpack_require__(1632);var app=_modules.uiModules.get("apps/discover",["react"]);app.directive("discoverNoResults",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_no_results.DiscoverNoResults))});app.directive("discoverUnsupportedIndexPattern",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_unsupported_index_pattern.DiscoverUnsupportedIndexPattern),["unsupportedType"])})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverNoResults=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DiscoverNoResults=exports.DiscoverNoResults=function(_Component){_inherits(DiscoverNoResults,_Component);function DiscoverNoResults(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DiscoverNoResults);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DiscoverNoResults.__proto__||Object.getPrototypeOf(DiscoverNoResults)).call.apply(_ref,[this].concat(args))),_this),_this.onClickTimePickerButton=function(){_this.props.topNavToggle("filter")},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DiscoverNoResults,[{key:"render",value:function render(){var _props=this.props,shardFailures=_props.shardFailures,timeFieldName=_props.timeFieldName,queryLanguage=_props.queryLanguage,getDocLink=_props.getDocLink,isTimePickerOpen=_props.isTimePickerOpen;var shardFailuresMessage=void 0;if(shardFailures&&shardFailures.length){var failures=shardFailures.map(function(failure,index){return _react2.default.createElement("div",{key:""+failure.index+failure.shard+failure.reason},_react2.default.createElement(_eui.EuiText,{size:"xs"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.indexFailureShardText",defaultMessage:"{index}, shard {failureShard}",values:{index:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.indexFailureIndexText",defaultMessage:"Index {failureIndex}",values:{failureIndex:"&lsquo;"+failure.index+"&rsquo;"}})),failureShard:"&lsquo;"+failure.shard+"&rsquo;"}})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiCodeBlock,{paddingSize:"s"},JSON.stringify(failure.reason)),index<shardFailures.length-1?_react2.default.createElement(_eui.EuiSpacer,{size:"l"}):undefined)});shardFailuresMessage=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.addressShardFailuresTitle",defaultMessage:"Address shard failures"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.shardFailuresDescription",defaultMessage:"The following shard failures occurred:"})),failures))}var timeFieldMessage=void 0;if(timeFieldName){timeFieldMessage=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.expandYourTimeRangeTitle",defaultMessage:"Expand your time range"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.queryMayNotMatchTitle",defaultMessage:"One or more of the indices you’re looking at contains a date field. Your query may not match anything in the current time range, or there may not be any data at all in the currently selected time range. You can try {timepickerLink} and changing the time range to one which contains data.",values:{timepickerLink:_react2.default.createElement(_eui.EuiLink,{"data-test-subj":"discoverNoResultsTimefilter",onClick:this.onClickTimePickerButton,"aria-expanded":isTimePickerOpen},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.openingTimepickerLinkText",defaultMessage:"opening the time picker"}))}}))))}var luceneQueryMessage=void 0;if(queryLanguage==="lucene"){var searchExamples=[{description:_react2.default.createElement(_eui.EuiCode,null,"200"),title:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.anyField200StatusCodeExampleTitle",defaultMessage:"Find requests that contain the number 200, in any field"})))},{description:_react2.default.createElement(_eui.EuiCode,null,"status:200"),title:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.statusField200StatusCodeExampleTitle",defaultMessage:"Find 200 in the status field"})))},{description:_react2.default.createElement(_eui.EuiCode,null,"status:[400 TO 499]"),title:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeExampleTitle",defaultMessage:"Find all status codes between 400-499"})))},{description:_react2.default.createElement(_eui.EuiCode,null,"status:[400 TO 499] AND extension:PHP"),title:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php"})))},{description:_react2.default.createElement(_eui.EuiCode,null,"status:[400 TO 499] AND (extension:php OR extension:html)"),title:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.400to499StatusCodeWithPhpOrHtmlExtensionExampleTitle",defaultMessage:"Find status codes 400-499 with the extension php or html"})))}];luceneQueryMessage=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.refineYourQueryTitle",defaultMessage:"Refine your query"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.howTosearchForWebServerLogsDescription",defaultMessage:"The search bar at the top uses Elasticsearch’s support for Lucene {queryStringSyntaxLink}. Here are some examples of how you can search for web server logs that have been parsed into a few fields.",values:{queryStringSyntaxLink:_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:getDocLink("query.luceneQuerySyntax")},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.queryStringSyntaxLinkText",defaultMessage:"Query String syntax"}))}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiDescriptionList,{type:"column",listItems:searchExamples}),_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}))}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.searchExamples.noResultsMatchSearchCriteriaTitle",defaultMessage:"No results match your search criteria"}),color:"warning",iconType:"help","data-test-subj":"discoverNoResults"}),shardFailuresMessage,timeFieldMessage,luceneQueryMessage)))}}]);return DiscoverNoResults}(_react.Component);DiscoverNoResults.propTypes={shardFailures:_propTypes2.default.array,timeFieldName:_propTypes2.default.string,queryLanguage:_propTypes2.default.string,isTimePickerOpen:_propTypes2.default.bool.isRequired,getDocLink:_propTypes2.default.func.isRequired,topNavToggle:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverUnsupportedIndexPattern=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DiscoverUnsupportedIndexPattern=exports.DiscoverUnsupportedIndexPattern=function DiscoverUnsupportedIndexPattern(_ref){var unsupportedType=_ref.unsupportedType;var message=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.noResults.requiredPluginIsNotInstalledOrDisabledTitle",defaultMessage:"Index patterns based on {unsupportedType} indices require the {unsupportedType} plugin from X-Pack, which is not installed or disabled",values:{unsupportedType:unsupportedType}});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"dscNoResults"},_react2.default.createElement(_eui.EuiCallOut,{title:message,color:"danger",iconType:"alert"}))))}},function(module,exports,__webpack_require__){"use strict";var _vislib=__webpack_require__(281);var _vislib2=_interopRequireDefault(_vislib);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/discover").directive("discoverTimechart",function(Private){var vislib=Private(_vislib2.default);return{restrict:"E",scope:{data:"="},link:function link($scope,elem){var init=function init(){var myChart=new vislib.Chart(elem[0],{addLegend:false});$scope.$watch("data",function(data){if(data!=null){myChart.render(data)}})};init()}}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("collapsibleSidebar",function(){var listOfWidthClasses=_lodash2.default.times(11,function(i){return"col-md-"+i});return{restrict:"C",link:function link($scope,$elem){var isCollapsed=false;var $collapser=(0,_jquery2.default)('<button\n          data-test-subj="collapseSideBarButton"\n          type="button"\n          aria-expanded="true"\n          aria-label="Toggle sidebar"\n          class="kuiCollapseButton kbnCollapsibleSidebar__collapseButton"\n        ></button>');if($elem.attr("id")){$collapser.attr("aria-controls",$elem.attr("id"))}var $icon=(0,_jquery2.default)('<span class="kuiIcon fa-chevron-circle-left"></span>');$collapser.append($icon);var $siblings=$elem.siblings();var siblingsClass=listOfWidthClasses.reduce(function(prev,className){if(prev)return prev;return $siblings.hasClass(className)&&className},false);var hasSingleSibling=$siblings.length===1&&siblingsClass;$collapser.on("click",function(){if(isCollapsed){isCollapsed=false;$elem.removeClass("closed");$icon.addClass("fa-chevron-circle-left");$icon.removeClass("fa-chevron-circle-right");$collapser.attr("aria-expanded","true")}else{isCollapsed=true;$elem.addClass("closed");$icon.removeClass("fa-chevron-circle-left");$icon.addClass("fa-chevron-circle-right");$collapser.attr("aria-expanded","false")}if(hasSingleSibling){$siblings.toggleClass(siblingsClass+" col-md-12")}if($scope.toggleSidebar)$scope.toggleSidebar()});$collapser.appendTo($elem)}}})},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};__webpack_require__(334);__webpack_require__(335);__webpack_require__(561);__webpack_require__(1635);__webpack_require__(118);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _risonNode=__webpack_require__(55);var _risonNode2=_interopRequireDefault(_risonNode);var _field_calculator=__webpack_require__(1638);var _field_list=__webpack_require__(500);var _modules=__webpack_require__(3);var _field_chooser=__webpack_require__(1639);var _field_chooser2=_interopRequireDefault(_field_chooser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/discover");app.directive("discFieldChooser",function($location,globalState,config,$route,i18n){return{restrict:"E",scope:{columns:"=",hits:"=",fieldCounts:"=",state:"=",indexPattern:"=",indexPatternList:"=",onAddField:"=",onAddFilter:"=",onRemoveField:"="},template:_field_chooser2.default,link:function link($scope){$scope.$parent.$watch("showFilter",function(){$scope.toggleFieldFilterButtonAriaLabel=$scope.$parent.showFilter?i18n("kbn.discover.fieldChooser.toggleFieldFilterButtonHideAriaLabel",{defaultMessage:"Hide field settings"}):i18n("kbn.discover.fieldChooser.toggleFieldFilterButtonShowAriaLabel",{defaultMessage:"Show field settings"})});$scope.selectedIndexPattern=$scope.indexPatternList.find(function(pattern){return pattern.id===$scope.indexPattern.id});$scope.indexPatternList=_lodash2.default.sortBy($scope.indexPatternList,function(o){return o.get("title")});$scope.setIndexPattern=function(pattern){$scope.state.index=pattern.id;$scope.state.save()};$scope.$watch("state.index",function(id,previousId){if(previousId==null||previousId===id)return;$route.reload()});var filter=$scope.filter={props:["type","aggregatable","searchable","missing","name"],defaults:{missing:true,type:"any"},boolOpts:[{label:"any",value:undefined},{label:"yes",value:true},{label:"no",value:false}],toggleVal:function toggleVal(name,def){if(filter.vals[name]!==def)filter.vals[name]=def;else filter.vals[name]=undefined},reset:function reset(){filter.vals=_lodash2.default.clone(filter.defaults)},isFieldSelected:function isFieldSelected(field){return field.display},isFieldFiltered:function isFieldFiltered(field){var matchFilter=filter.vals.type==="any"||field.type===filter.vals.type;var isAggregatable=filter.vals.aggregatable==null||field.aggregatable===filter.vals.aggregatable;var isSearchable=filter.vals.searchable==null||field.searchable===filter.vals.searchable;var scriptedOrMissing=!filter.vals.missing||field.scripted||field.rowCount>0;var matchName=!filter.vals.name||field.name.indexOf(filter.vals.name)!==-1;return!field.display&&matchFilter&&isAggregatable&&isSearchable&&scriptedOrMissing&&matchName},popularity:function popularity(field){return field.count>0},getActive:function getActive(){return _lodash2.default.some(filter.props,function(prop){return filter.vals[prop]!==filter.defaults[prop]})}};filter.reset();$scope.$watchCollection("filter.vals",function(){filter.active=filter.getActive()});$scope.$watchMulti(["[]fieldCounts","[]columns","[]hits"],function(cur,prev){var newHits=cur[2]!==prev[2];var fields=$scope.fields;var columns=$scope.columns||[];var fieldCounts=$scope.fieldCounts;if(!fields||newHits){$scope.fields=fields=getFields()}if(!fields)return;_lodash2.default.chain(fields).each(function(field){field.displayOrder=_lodash2.default.indexOf(columns,field.name)+1;field.display=!!field.displayOrder;field.rowCount=fieldCounts[field.name]}).sortBy(function(field){return(field.count||0)*-1}).groupBy(function(field){if(field.display)return"selected";return field.count>0?"popular":"unpopular"}).tap(function(groups){groups.selected=_lodash2.default.sortBy(groups.selected||[],"displayOrder");groups.popular=groups.popular||[];groups.unpopular=groups.unpopular||[];var extras=groups.popular.splice(config.get("fields:popularLimit"));groups.unpopular=extras.concat(groups.unpopular)}).each(function(group,name){$scope[name+"Fields"]=_lodash2.default.sortBy(group,name==="selected"?"display":"name")}).commit();$scope.fieldTypes=_lodash2.default.union(["any"],_lodash2.default.pluck(fields,"type"))});$scope.increaseFieldCounter=function(fieldName){$scope.indexPattern.popularizeField(fieldName,1)};function getVisualizeUrl(field){if(!$scope.state){return""}var agg={};var isGeoPoint=field.type==="geo_point";var type=isGeoPoint?"tile_map":"histogram";if(field.type==="date"&&$scope.indexPattern.timeFieldName===field.name){agg={type:"date_histogram",schema:"segment",params:{field:field.name,interval:"auto"}}}else if(isGeoPoint){agg={type:"geohash_grid",schema:"segment",params:{field:field.name,precision:3}}}else{agg={type:"terms",schema:"segment",params:{field:field.name,size:parseInt(config.get("discover:aggs:terms:size"),10),orderBy:"2"}}}return"#/visualize/create?"+_jquery2.default.param(_lodash2.default.assign(_lodash2.default.clone($location.search()),{indexPattern:$scope.state.index,type:type,_a:_risonNode2.default.encode({filters:$scope.state.filters||[],query:$scope.state.query||undefined,vis:{type:type,aggs:[{schema:"metric",type:"count",id:"2"},agg]}})}))}$scope.computeDetails=function(field,recompute){if(_lodash2.default.isUndefined(field.details)||recompute){field.details=_extends({visualizeUrl:field.visualizable?getVisualizeUrl(field):null},_field_calculator.fieldCalculator.getFieldValueCounts({hits:$scope.hits,field:field,count:5,grouped:false}));_lodash2.default.each(field.details.buckets,function(bucket){bucket.display=field.format.convert(bucket.value)});$scope.increaseFieldCounter(field,1)}else{delete field.details}};function getFields(){var prevFields=$scope.fields;var indexPattern=$scope.indexPattern;var hits=$scope.hits;var fieldCounts=$scope.fieldCounts;if(!indexPattern||!hits||!fieldCounts)return;var fieldSpecs=indexPattern.fields.slice(0);var fieldNamesInDocs=_lodash2.default.keys(fieldCounts);var fieldNamesInIndexPattern=_lodash2.default.keys(indexPattern.fields.byName);_lodash2.default.difference(fieldNamesInDocs,fieldNamesInIndexPattern).forEach(function(unknownFieldName){fieldSpecs.push({name:unknownFieldName,type:"unknown"})});var fields=new _field_list.FieldList(indexPattern,fieldSpecs);if(prevFields){fields.forEach(function(field){field.details=_lodash2.default.get(prevFields,["byName",field.name,"details"])})}return fields}}}})},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _discover_field=__webpack_require__(1636);var _discover_field2=_interopRequireDefault(_discover_field);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(334);__webpack_require__(335);var _string=__webpack_require__(1637);var _string2=_interopRequireDefault(_string);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/discover");app.directive("discoverField",function($compile,i18n){return{restrict:"E",template:_discover_field2.default,replace:true,scope:{field:"=",onAddField:"=",onAddFilter:"=",onRemoveField:"=",onShowDetails:"="},link:function link($scope,$elem){var detailsElem=void 0;var detailScope=void 0;var init=function init(){if($scope.field.details){$scope.toggleDetails($scope.field,true)}$scope.addRemoveButtonLabel=$scope.field.display?i18n("kbn.discover.fieldChooser.discoverField.removeButtonLabel",{defaultMessage:"remove"}):i18n("kbn.discover.fieldChooser.discoverField.addButtonLabel",{defaultMessage:"add"})};var getWarnings=function getWarnings(field){var warnings=[];if(field.scripted){warnings.push(i18n("kbn.discover.fieldChooser.discoverField.scriptedFieldsTakeLongExecuteDescription",{defaultMessage:"Scripted fields can take a long time to execute."}))}if(warnings.length>1){warnings=warnings.map(function(warning,i){return(i>0?"\n":"")+(i+1)+" - "+warning})}return warnings};$scope.toggleDisplay=function(field){if(field.display){$scope.onRemoveField(field.name)}else{$scope.onAddField(field.name)}if(field.details){$scope.toggleDetails(field)}};$scope.onClickToggleDetails=function onClickToggleDetails($event,field){if($event.currentTarget!==$event.target){$event.preventDefault()}$scope.toggleDetails(field)};$scope.toggleDetails=function(field,recompute){if(_lodash2.default.isUndefined(field.details)||recompute){$scope.onShowDetails(field,recompute);detailScope=$scope.$new();detailScope.warnings=getWarnings(field);detailScope.getBucketAriaLabel=function(bucket){return i18n("kbn.discover.fieldChooser.discoverField.bucketAriaLabel",{defaultMessage:"Value: {value}",values:{value:bucket.display===""?i18n("kbn.discover.fieldChooser.discoverField.emptyStringText",{defaultMessage:"Empty string"}):bucket.display}})};detailsElem=(0,_jquery2.default)(_string2.default);$compile(detailsElem)(detailScope);$elem.append(detailsElem).addClass("active");$elem.find(".dscSidebarItem").addClass("dscSidebarItem--active")}else{delete field.details;detailScope.$destroy();detailsElem.remove();$elem.removeClass("active");$elem.find(".dscSidebarItem").removeClass("dscSidebarItem--active")}};init()}}})},function(module,exports){module.exports='<li\n  class="sidebar-item"\n  attr-field="{{::field.name}}"\n>\n  <div\n    data-test-subj="field-{{::field.name}}"\n    ng-click="onClickToggleDetails($event, field)"\n    kbn-accessible-click\n    class="sidebar-item-title dscSidebarItem"\n  >\n    <field-name\n      class="dscField dscSidebarItem__label"\n      field="field"\n    ></field-name>\n\n    <button\n      ng-if="field.name !== \'_source\'"\n      ng-click="toggleDisplay(field)"\n      ng-class="::field.display ? \'kuiButton--danger\' : \'kuiButton--primary\'"\n      ng-bind="::addRemoveButtonLabel"\n      class="dscSidebarItem__action kuiButton kuiButton--small"\n      data-test-subj="fieldToggle-{{::field.name}}"\n    ></button>\n  </div>\n</li>\n'},function(module,exports){module.exports='<div class="dscFieldDetails">\n  <div class="kuiVerticalRhythmSmall">\n    <p class="euiText euiText--extraSmall euiTextColor--subdued" ng-show="!field.details.error">\n      <span\n        i18n-id="kbn.discover.fieldChooser.detailViews.topValuesInRecordsDescription"\n        i18n-default-message="Top 5 values in"\n      ></span>\n      <span ng-if="!field.details.error">\n        <a\n          class="kuiLink"\n          kbn-accessible-click\n          ng-show="!field.indexPattern.metaFields.includes(field.name) && !field.scripted"\n          ng-click="onAddFilter(\'_exists_\', field.name, \'+\')">\n          {{::field.details.exists}}\n        </a>\n        <span\n          ng-show="field.indexPattern.metaFields.includes(field.name) || field.scripted">\n          {{::field.details.exists}}\n        </span>\n        / {{::field.details.total}}\n        <span\n          i18n-id="kbn.discover.fieldChooser.detailViews.recordsText"\n          i18n-default-message="records"\n        ></span>\n      </span>\n    </p>\n\n    <div class="clearfix"></div>\n\n    <div ng-if="field.details.error" class="euiText euiText--extraSmall euiTextColor--subdued">{{field.details.error}}</div>\n\n    <div ng-if="!field.details.error">\n      <div ng-repeat="bucket in ::field.details.buckets" class="dscFieldDetailsItem">\n        <div class="dscFieldDetailsItem__title">\n          \x3c!-- Field value --\x3e\n          <div\n            css-truncate\n            css-truncate-expandable="true"\n            class="dscFieldDetails__value"\n            aria-label="{{::getBucketAriaLabel(bucket)}}"\n          >\n            {{::bucket.display}}\n            <em\n              ng-show="bucket.display === \'\'"\n              i18n-id="kbn.discover.fieldChooser.detailViews.emptyStringText"\n              i18n-default-message="Empty string"\n            ></em>\n          </div>\n\n          \x3c!-- Add/remove filter buttons --\x3e\n          <div\n            class="dscFieldDetailsItem__buttonGroup"\n            ng-show="field.filterable"\n          >\n            <button\n              class="dscFieldDetailsItem__button"\n              ng-click="onAddFilter(field, bucket.value, \'+\')"\n              aria-label="{{::\'kbn.discover.fieldChooser.detailViews.filterValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter for this value\'} }}"\n              data-test-subj="plus-{{::field.name}}-{{::bucket.display}}"\n            >\n              <span\n                aria-hidden="true"\n                class="kuiIcon fa-search-plus dscFieldDetails__filter"\n              ></span>\n            </button>\n\n            <button\n              class="dscFieldDetailsItem__button"\n              ng-click="onAddFilter(field, bucket.value, \'-\')"\n              aria-label="{{::\'kbn.discover.fieldChooser.detailViews.filterOutValueButtonAriaLabel\' | i18n: {defaultMessage: \'Filter out this value\'} }}"\n              data-test-subj="minus-{{::field.name}}-{{::bucket.display}}"\n            >\n              <span\n                aria-hidden="true"\n                class="kuiIcon fa-search-minus dscFieldDetails__filter"\n              ></span>\n            </button>\n          </div>\n        </div>\n        <kbn-tooltip text="{{::bucket.count}}" placement="right" append-to-body="1">\n          <progressbar\n            value="bucket.percent"\n            max="100"\n            animate="false"\n          >\n            <span class="dscFieldDetails__progress">{{bucket.percent}}%</span>\n          </progressbar>\n        </kbn-tooltip>\n      </div>\n    </div>\n  </div>\n\n  <a\n    ng-href="{{field.details.visualizeUrl}}"\n    ng-show="field.visualizable"\n    class="kuiButton kuiButton--secondary kuiButton--small kuiButton--fullWidth kuiVerticalRhythmSmall"\n    data-test-subj="fieldVisualize-{{::field.name}}"\n  >\n    <span\n      i18n-id="kbn.discover.fieldChooser.detailViews.visualizeLinkText"\n      i18n-default-message="Visualize"\n    ></span>\n    <span class="discover-field-vis-warning" ng-show="warnings.length" tooltip="{{warnings.join(\' \')}}">\n    ( <span\n      i18n-id="kbn.discover.fieldChooser.detailViews.warningsText"\n      i18n-default-message="{warningsLength, plural, one {# warning} other {# warnings}}"\n      i18n-values="{ warningsLength: warnings.length }"\n    ></span> <i aria-hidden="true" class="fa fa-warning"></i> )\n    </span>\n  </a>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fieldCalculator=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFieldValues(hits,field){var name=field.name;var flattenHit=field.indexPattern.flattenHit;return _lodash2.default.map(hits,function(hit){return flattenHit(hit)[name]})}function getFieldValueCounts(params){params=_lodash2.default.defaults(params,{count:5,grouped:false});if(params.field.type==="geo_point"||params.field.type==="geo_shape"||params.field.type==="attachment"){return{error:_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForGeoFieldsErrorMessage",{defaultMessage:"Analysis is not available for geo fields."})}}var allValues=getFieldValues(params.hits,params.field);var counts=void 0;var missing=_countMissing(allValues);try{var groups=_groupValues(allValues,params);counts=_lodash2.default.map(_lodash2.default.sortBy(groups,"count").reverse().slice(0,params.count),function(bucket){return{value:bucket.value,count:bucket.count,percent:(bucket.count/(params.hits.length-missing)*100).toFixed(1)}});if(params.hits.length-missing===0){return{error:_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.fieldIsNotPresentInDocumentsErrorMessage",{defaultMessage:"This field is present in your Elasticsearch mapping but not in the {hitsLength} documents shown in the doc table. You may still be able to visualize or search on it.",values:{hitsLength:params.hits.length}})}}return{total:params.hits.length,exists:params.hits.length-missing,missing:missing,buckets:counts}}catch(e){return{error:e.message}}}function _countMissing(array){return array.length-_lodash2.default.without(array,undefined,null).length}function _groupValues(allValues,params){var groups={};var k=void 0;allValues.forEach(function(value){if(_lodash2.default.isObject(value)&&!Array.isArray(value)){throw new Error(_i18n.i18n.translate("kbn.discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForObjectFieldsErrorMessage",{defaultMessage:"Analysis is not available for object fields."}))}if(Array.isArray(value)&&!params.grouped){k=value}else{k=value==null?undefined:[value]}_lodash2.default.each(k,function(key){if(groups.hasOwnProperty(key)){groups[key].count++}else{groups[key]={value:params.grouped?value:key,count:1}}})});return groups}var fieldCalculator=exports.fieldCalculator={_groupValues:_groupValues,_countMissing:_countMissing,getFieldValues:getFieldValues,getFieldValueCounts:getFieldValueCounts}},function(module,exports){module.exports='<section class="sidebar-list" aria-label="{{::\'kbn.discover.fieldChooser.filter.indexAndFieldsSectionAriaLabel\' | i18n: {defaultMessage: \'Index and fields\'} }}">\n  <div ng-show="indexPatternList.length > 1">\n    <ui-select\n      class="index-pattern-selection"\n      ng-model="selectedIndexPattern"\n      on-select="setIndexPattern($item)"\n    >\n      <ui-select-match>\n        <span\n          class="uiSelectMatch--ellipsis"\n          tooltip="{{$select.selected.get(\'title\')}}"\n          tooltip-append-to-body="true"\n        >\n          {{$select.selected.get(\'title\')}}\n        </span>\n      </ui-select-match>\n      <ui-select-choices repeat="pattern in indexPatternList | filter:$select.search">\n        <div ng-bind-html="pattern.get(\'title\') | highlight: $select.search"></div>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n  <div ng-hide="indexPatternList.length > 1">\n    <div class="index-pattern">\n      <h2\n        class="index-pattern-label"\n        id="index_pattern_id"\n        tabindex="0"\n        css-truncate>\n\n        {{ indexPattern.title }}</h2>\n    </div>\n  </div>\n\n  <div class="dscSidebar__listHeader sidebar-list-header" ng-if="fields.length">\n    <h3\n      class="sidebar-list-header-label"\n      id="selected_fields"\n      tabindex="0"\n      i18n-id="kbn.discover.fieldChooser.filter.selectedFieldsTitle"\n      i18n-default-message="Selected fields"\n    ></h3>\n  </div>\n  <ul class="list-unstyled dscFieldList--selected" >\n    <discover-field\n      ng-repeat="field in fields.raw|filter:{display:true}"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n  <div class="sidebar-list-header sidebar-item euiFlexGroup euiFlexGroup--gutterMedium" ng-if="fields.length">\n    <h3\n      class="euiFlexItem sidebar-list-header-label"\n      id="available_fields"\n      tabindex="0"\n      i18n-id="kbn.discover.fieldChooser.filter.availableFieldsTitle"\n      i18n-default-message="Available fields"\n    ></h3>\n\n    <div class="euiFlexItem euiFlexItem--flexGrowZero">\n      <button\n        ng-click="$parent.showFields = !$parent.showFields"\n        aria-hidden="true"\n        class="kuiButton kuiButton--small visible-xs visible-sm pull-right dscFieldChooser__toggle"\n      >\n        <span\n          aria-hidden="true"\n          class="kuiIcon"\n          ng-class="{ \'fa-chevron-right\': !$parent.showFields, \'fa-chevron-down\': $parent.showFields }"\n        ></span>\n      </button>\n    </div>\n    <div class="euiFlexItem euiFlexItem--flexGrowZero">\n      <button\n        type="button"\n        ng-class="{ \'kuiButton--basic\': !filter.active, \'kuiButton--primary\': filter.active, \'hidden-xs\': !$parent.showFields, \'hidden-sm\': !$parent.showFields }"\n        class="kuiButton kuiButton--small pull-right discover-field-filter-toggle"\n        ng-click="$parent.showFilter = !$parent.showFilter"\n        aria-label="{{toggleFieldFilterButtonAriaLabel}}"\n        aria-expanded="{{!!$parent.showFilter}}"\n        aria-controls="discoverFieldFilter"\n        data-test-subj="toggleFieldFilterButton"\n      >\n        <span aria-hidden="true" class="kuiIcon fa-gear"></span>\n      </button>\n    </div>\n  </div>\n\n  <div class="sidebar-item dscFieldDetails" ng-show="showFilter" id="discoverFieldFilter" data-test-subj="discoverFieldFilter">\n    <form role="form">\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterAggregatable"\n          i18n-id="kbn.discover.fieldChooser.filter.aggregatableLabel"\n          i18n-default-message="Aggregatable"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterAggregatable"\n          ng-options="opt.value as opt.label for opt in filter.boolOpts"\n          ng-model="filter.vals.aggregatable"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterSearchable"\n          i18n-id="kbn.discover.fieldChooser.filter.searchableLabel"\n          i18n-default-message="Searchable"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterSearchable"\n          ng-options="opt.value as opt.label for opt in filter.boolOpts"\n          ng-model="filter.vals.searchable"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterType"\n          i18n-id="kbn.discover.fieldChooser.filter.typeLabel"\n          i18n-default-message="Type"\n        ></label>\n        <select\n          id="discoverFieldChooserFilterType"\n          ng-options="field as field for field in fieldTypes"\n          ng-model="filter.vals.type"\n          class="form-control">\n        </select>\n      </div>\n      <div class="form-group">\n        <label\n          for="discoverFieldChooserFilterFieldName"\n          i18n-id="kbn.discover.fieldChooser.filter.fieldNameLabel"\n          i18n-default-message="Field name"\n        ></label>\n        <input\n          id="discoverFieldChooserFilterFieldName"\n          type="text"\n          class="form-control"\n          ng-model="filter.vals.name"\n        >\n      </div>\n      <div class="form-group">\n        <label for="discoverFieldChooserHideMissingFields">\n          <input id="discoverFieldChooserHideMissingFields" type="checkbox" ng-model="filter.vals.missing">\n          <span\n            i18n-id="kbn.discover.fieldChooser.filter.hideMissingFieldsLabel"\n            i18n-default-message="Hide missing fields"\n          ></span>\n        </label>\n      </div>\n      <button\n        ng-click="filter.reset()"\n        ng-disabled="!filter.active"\n        class="kuiButton kuiButton--danger kuiButton--fullWidth"\n        i18n-id="kbn.discover.fieldChooser.filter.resetFiltersButtonLabel"\n        i18n-default-message="Reset filters"\n      ></button>\n    </form>\n  </div>\n\n  <ul\n    ng-show="(popularFields | filter:filter.isFieldFiltered).length > 0"\n    ng-class="{ \'hidden-sm\': !showFields, \'hidden-xs\': !showFields }"\n    class="list-unstyled sidebar-well dscFieldList--popular">\n    <li class="sidebar-item sidebar-list-header">\n      <h6\n        i18n-id="kbn.discover.fieldChooser.filter.popularTitle"\n        i18n-default-message="Popular"\n      ></h6>\n    </li>\n    <discover-field\n      ng-repeat="field in popularFields | filter:filter.isFieldFiltered"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n  <ul\n    ng-class="{ \'hidden-sm\': !showFields, \'hidden-xs\': !showFields  }"\n    class="list-unstyled dscFieldList--unpopular">\n    <discover-field\n      ng-repeat="field in unpopularFields | filter:filter.isFieldFiltered"\n      field="field"\n      on-add-field="onAddField"\n      on-add-filter="onAddFilter"\n      on-remove-field="onRemoveField"\n      on-show-details="computeDetails"\n    >\n    </discover-field>\n  </ul>\n\n</section>\n'},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _get_sort=__webpack_require__(529);var _columns=__webpack_require__(541);var columnActions=_interopRequireWildcard(_columns);var _filter=__webpack_require__(566);var filterActions=_interopRequireWildcard(_filter);var _datemath=__webpack_require__(40);var _datemath2=_interopRequireDefault(_datemath);__webpack_require__(528);__webpack_require__(567);__webpack_require__(1641);__webpack_require__(558);__webpack_require__(559);__webpack_require__(88);__webpack_require__(223);var _timefilter=__webpack_require__(19);__webpack_require__(338);var _courier=__webpack_require__(59);var _notify=__webpack_require__(10);var _vis=__webpack_require__(509);var _vislib=__webpack_require__(462);var _doc_title=__webpack_require__(91);var _hit_sort_fn=__webpack_require__(1642);var _hit_sort_fn2=_interopRequireDefault(_hit_sort_fn);var _query_filter=__webpack_require__(54);var _interval_options=__webpack_require__(477);var _state_monitor_factory=__webpack_require__(339);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _index=__webpack_require__(1643);var _index2=_interopRequireDefault(_index);var _state=__webpack_require__(260);var _migrate_legacy_query=__webpack_require__(244);var _filter_manager=__webpack_require__(251);var _saved_objects=__webpack_require__(24);var _visualize_loader=__webpack_require__(232);var _persisted_log=__webpack_require__(51);var _documentation_links=__webpack_require__(50);__webpack_require__(1644);var _get_painless_error=__webpack_require__(1646);var _share=__webpack_require__(340);var _state_hashing=__webpack_require__(78);var _inspector=__webpack_require__(83);var _adapters=__webpack_require__(105);var _courier_inspector_utils=__webpack_require__(240);var _show_open_search_panel=__webpack_require__(1653);var _tabify=__webpack_require__(1655);var _show_saved_object_save_modal=__webpack_require__(341);var _saved_object_save_modal=__webpack_require__(342);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var app=_modules.uiModules.get("apps/discover",["kibana/notify","kibana/courier","kibana/url","kibana/index_patterns"]);_routes2.default.defaults(/discover/,{requireDefaultIndex:true}).when("/discover/:id?",{template:_index2.default,reloadOnSearch:false,resolve:{ip:function ip(Promise,indexPatterns,config,$location,Private){var State=Private(_state.StateProvider);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4}).then(function(_ref){var savedObjects=_ref.savedObjects;var state=new State("_a",{});var specified=!!state.index;var exists=_lodash2.default.findIndex(savedObjects,function(o){return o.id===state.index})>-1;var id=exists?state.index:config.get("defaultIndex");state.destroy();return Promise.props({list:savedObjects,loaded:indexPatterns.get(id),stateVal:state.index,stateValFound:specified&&exists})})},savedSearch:function savedSearch(redirectWhenMissing,savedSearches,$route){var savedSearchId=$route.current.params.id;return savedSearches.get(savedSearchId).then(function(savedSearch){if(savedSearchId){_persisted_log.recentlyAccessed.add(savedSearch.getFullPath(),savedSearch.title,savedSearchId)}return savedSearch}).catch(redirectWhenMissing({search:"/discover","index-pattern":"/management/kibana/objects/savedSearches/"+$route.current.params.id}))}}});app.directive("discoverApp",function(){return{restrict:"E",controllerAs:"discoverApp",controller:discoverController}});function discoverController($element,$route,$scope,$timeout,$window,AppState,Notifier,Private,Promise,config,courier,kbnUrl,localStorage,i18n){var _this=this;var saveDataSource=function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(saveOptions){var id;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return $scope.updateDataSource();case 2:savedSearch.columns=$scope.state.columns;savedSearch.sort=$scope.state.sort;_context6.prev=4;_context6.next=7;return savedSearch.save(saveOptions);case 7:id=_context6.sent;$scope.$evalAsync(function(){stateMonitor.setInitialState($state.toJSON());if(id){_notify.toastNotifications.addSuccess({title:i18n("kbn.discover.notifications.savedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was saved",values:{savedSearchTitle:savedSearch.title}}),"data-test-subj":"saveSearchSuccess"});if(savedSearch.id!==$route.current.params.id){kbnUrl.change("/discover/{{id}}",{id:savedSearch.id})}else{$state.setDefaults(getStateDefaults());docTitle.change(savedSearch.lastSavedTitle)}}});return _context6.abrupt("return",{id:id});case 12:_context6.prev=12;_context6.t0=_context6["catch"](4);_notify.toastNotifications.addDanger({title:i18n("kbn.discover.notifications.notSavedSearchTitle",{defaultMessage:"Search '{savedSearchTitle}' was not saved.",values:{savedSearchTitle:savedSearch.title}}),text:_context6.t0.message});return _context6.abrupt("return",{error:_context6.t0});case 16:case"end":return _context6.stop()}}},_callee6,this,[[4,12]])}));return function saveDataSource(_x4){return _ref10.apply(this,arguments)}}();var setupVisualization=function(){var _ref12=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var _this2=this;var visStateAggs,visState,visSavedObject;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if($scope.opts.timefield){_context8.next=2;break}return _context8.abrupt("return");case 2:visStateAggs=[{type:"count",schema:"metric"},{type:"date_histogram",schema:"segment",params:{field:$scope.opts.timefield,interval:$state.interval,timeRange:_timefilter.timefilter.getTime()}}];if(!$scope.vis){_context8.next=8;break}visState=$scope.vis.getEnabledState();visState.aggs=visStateAggs;$scope.vis.setState(visState);return _context8.abrupt("return");case 8:visSavedObject={indexPattern:$scope.indexPattern.id,visState:{type:"histogram",title:savedSearch.title,params:{addLegend:false,addTimeMarker:true},aggs:visStateAggs}};$scope.vis=new Vis($scope.searchSource.getField("index"),visSavedObject.visState);visSavedObject.vis=$scope.vis;$scope.searchSource.onRequestStart(function(searchSource,searchRequest){return $scope.vis.getAggConfig().onSearchRequestStart(searchSource,searchRequest)});$scope.searchSource.setField("aggs",function(){return $scope.vis.getAggConfig().toDsl()});$timeout(_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var visEl;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:visEl=$element.find("#discoverHistogram")[0];_context7.next=3;return visualizeLoader.embedVisualizationWithSavedObject(visEl,visSavedObject,{autoFetch:false});case 3:visualizeHandler=_context7.sent;case 4:case"end":return _context7.stop()}}},_callee7,_this2)})));case 14:case"end":return _context8.stop()}}},_callee8,this)}));return function setupVisualization(){return _ref12.apply(this,arguments)}}();var visualizeLoader=Private(_visualize_loader.VisualizeLoaderProvider);var visualizeHandler=void 0;var Vis=Private(_vis.VisProvider);var docTitle=Private(_doc_title.DocTitleProvider);var HitSortFn=Private(_hit_sort_fn2.default);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var responseHandler=Private(_vislib.VislibSeriesResponseHandlerProvider).handler;var filterManager=Private(_filter_manager.FilterManagerProvider);var notify=new Notifier({location:"Discover"});var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);var inspectorAdapters={requests:new _adapters.RequestAdapter};$scope.getDocLink=_documentation_links.getDocLink;$scope.intervalOptions=_interval_options.intervalOptions;$scope.showInterval=false;$scope.minimumVisibleRows=50;$scope.intervalEnabled=function(interval){return interval.val!=="custom"};var savedSearch=$route.current.locals.savedSearch;$scope.$on("$destroy",savedSearch.destroy);var $appStatus=$scope.appStatus=this.appStatus={dirty:!savedSearch.id};$scope.topNavMenu=[{key:"new",label:i18n("kbn.discover.localMenu.localMenu.newSearchTitle",{defaultMessage:"New"}),description:i18n("kbn.discover.localMenu.newSearchDescription",{defaultMessage:"New Search"}),run:function run(){kbnUrl.change("/discover")},testId:"discoverNewButton"},{key:"save",label:i18n("kbn.discover.localMenu.saveTitle",{defaultMessage:"Save"}),description:i18n("kbn.discover.localMenu.saveSearchDescription",{defaultMessage:"Save Search"}),testId:"discoverSaveButton",run:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var onSave,saveModal;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onSave=function onSave(_ref3){var newTitle=_ref3.newTitle,newCopyOnSave=_ref3.newCopyOnSave,isTitleDuplicateConfirmed=_ref3.isTitleDuplicateConfirmed,onTitleDuplicate=_ref3.onTitleDuplicate;var currentTitle=savedSearch.title;savedSearch.title=newTitle;savedSearch.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return saveDataSource(saveOptions).then(function(_ref4){var id=_ref4.id,error=_ref4.error;if(!id||error){savedSearch.title=currentTitle}return{id:id,error:error}})};saveModal=_react2.default.createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:onSave,onClose:function onClose(){},title:savedSearch.title,showCopyOnSave:savedSearch.id?true:false,objectType:"search"});(0,_show_saved_object_save_modal.showSaveModal)(saveModal);case 3:case"end":return _context.stop()}}},_callee,_this)}));function run(){return _ref2.apply(this,arguments)}return run}()},{key:"open",label:i18n("kbn.discover.localMenu.openTitle",{defaultMessage:"Open"}),description:i18n("kbn.discover.localMenu.openSavedSearchDescription",{defaultMessage:"Open Saved Search"}),testId:"discoverOpenButton",run:function run(){(0,_show_open_search_panel.showOpenSearchPanel)({makeUrl:function makeUrl(searchId){return kbnUrl.eval("#/discover/{{id}}",{id:searchId})}})}},{key:"share",label:i18n("kbn.discover.localMenu.shareTitle",{defaultMessage:"Share"}),description:i18n("kbn.discover.localMenu.shareSearchDescription",{defaultMessage:"Share Search"}),testId:"shareTopNavButton",run:function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(menuItem,navController,anchorElement){var sharingData;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.getSharingData();case 2:sharingData=_context2.sent;(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:false,getUnhashableStates:getUnhashableStates,objectId:savedSearch.id,objectType:"search",shareContextMenuExtensions:shareContextMenuExtensions,sharingData:_extends({},sharingData,{title:savedSearch.title}),isDirty:$appStatus.dirty});case 4:case"end":return _context2.stop()}}},_callee2,_this)}));function run(_x,_x2,_x3){return _ref5.apply(this,arguments)}return run}()},{key:"inspect",label:i18n("kbn.discover.localMenu.inspectTitle",{defaultMessage:"Inspect"}),description:i18n("kbn.discover.localMenu.openInspectorForSearchDescription",{defaultMessage:"Open Inspector for search"}),testId:"openInspectorButton",run:function run(){_inspector.Inspector.open(inspectorAdapters,{title:savedSearch.title})}}];$scope.searchSource=savedSearch.searchSource;$scope.indexPattern=resolveIndexPatternLoading();$scope.searchSource.setField("index",$scope.indexPattern).setField("highlightAll",true).setField("version",true);$scope.searchSource.setPreferredSearchStrategyId("default");var timeRangeSearchSource=savedSearch.searchSource.create();if((0,_courier.isDefaultTypeIndexPattern)($scope.indexPattern)){timeRangeSearchSource.setField("filter",function(){return _timefilter.timefilter.createFilter($scope.indexPattern)})}$scope.searchSource.setParent(timeRangeSearchSource);var pageTitleSuffix=savedSearch.id&&savedSearch.title?": "+savedSearch.title:"";docTitle.change("Discover"+pageTitleSuffix);var discoverBreadcrumbsTitle=i18n("kbn.discover.discoverBreadcrumbTitle",{defaultMessage:"Discover"});if(savedSearch.id&&savedSearch.title){_chrome2.default.breadcrumbs.set([{text:discoverBreadcrumbsTitle,href:"#/discover"},{text:savedSearch.title}])}else{_chrome2.default.breadcrumbs.set([{text:discoverBreadcrumbsTitle}])}var stateMonitor=void 0;var $state=$scope.state=new AppState(getStateDefaults());var getFieldCounts=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if($scope.fetchStatus){_context3.next=2;break}return _context3.abrupt("return",$scope.fieldCounts);case 2:_context3.next=4;return new Promise(function(resolve){var unwatch=$scope.$watch("fetchStatus",function(newValue){if(newValue){return}unwatch();resolve($scope.fieldCounts)})});case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}},_callee3,_this)}));return function getFieldCounts(){return _ref6.apply(this,arguments)}}();var getSharingDataFields=function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var selectedFields,fieldCounts,timeFieldName,hideTimeColumn,fields;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:selectedFields=$state.columns;if(!(selectedFields.length===1&&selectedFields[0]==="_source")){_context4.next=6;break}_context4.next=4;return getFieldCounts();case 4:fieldCounts=_context4.sent;return _context4.abrupt("return",{searchFields:null,selectFields:_lodash2.default.keys(fieldCounts).sort()});case 6:timeFieldName=$scope.indexPattern.timeFieldName;hideTimeColumn=config.get("doc_table:hideTimeColumn");fields=timeFieldName&&!hideTimeColumn?[timeFieldName].concat(_toConsumableArray(selectedFields)):selectedFields;return _context4.abrupt("return",{searchFields:fields,selectFields:fields});case 10:case"end":return _context4.stop()}}},_callee4,_this)}));return function getSharingDataFields(){return _ref7.apply(this,arguments)}}();this.getSharingData=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var searchSource,_ref9,searchFields,selectFields,body;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:searchSource=$scope.searchSource.createCopy();_context5.next=3;return getSharingDataFields();case 3:_ref9=_context5.sent;searchFields=_ref9.searchFields;selectFields=_ref9.selectFields;searchSource.setField("fields",searchFields);searchSource.setField("sort",(0,_get_sort.getSort)($state.sort,$scope.indexPattern));searchSource.setField("highlight",null);searchSource.setField("highlightAll",null);searchSource.setField("aggs",null);searchSource.setField("size",null);_context5.next=14;return searchSource.getSearchRequestBody();case 14:body=_context5.sent;return _context5.abrupt("return",{searchRequest:{index:searchSource.getField("index").title,body:body},fields:selectFields,metaFields:$scope.indexPattern.metaFields,conflictedTypesFields:$scope.indexPattern.fields.filter(function(f){return f.type==="conflict"}).map(function(f){return f.name}),indexPatternId:searchSource.getField("index").id});case 16:case"end":return _context5.stop()}}},_callee5,_this)}));$scope.uiState=$state.makeStateful("uiState");function getStateDefaults(){return{query:$scope.searchSource.getField("query")||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},sort:_get_sort.getSort.array(savedSearch.sort,$scope.indexPattern,config.get("discover:sort:defaultOrder")),columns:savedSearch.columns.length>0?savedSearch.columns:config.get("defaultColumns").slice(),index:$scope.indexPattern.id,interval:"auto",filters:_lodash2.default.cloneDeep($scope.searchSource.getOwnField("filter"))}}$state.index=$scope.indexPattern.id;$state.sort=_get_sort.getSort.array($state.sort,$scope.indexPattern);$scope.getBucketIntervalToolTipText=function(){return i18n("kbn.discover.bucketIntervalTooltip",{defaultMessage:"This interval creates {bucketsDescription} to show in the selected time range, so it has been scaled to {bucketIntervalDescription}",values:{bucketsDescription:$scope.bucketInterval.scale>1?i18n("kbn.discover.bucketIntervalTooltip.tooLargeBucketsText",{defaultMessage:"buckets that are too large"}):i18n("kbn.discover.bucketIntervalTooltip.tooManyBucketsText",{defaultMessage:"too many buckets"}),bucketIntervalDescription:$scope.bucketInterval.description}})};$scope.$watchCollection("state.columns",function(){$state.save()});$scope.opts={sampleSize:config.get("discover:sampleSize"),timefield:(0,_courier.isDefaultTypeIndexPattern)($scope.indexPattern)&&$scope.indexPattern.timeFieldName,savedSearch:savedSearch,indexPatternList:$route.current.locals.ip.list};var init=_lodash2.default.once(function(){stateMonitor=_state_monitor_factory.stateMonitorFactory.create($state,getStateDefaults());stateMonitor.onChange(function(status){$appStatus.dirty=status.dirty||!savedSearch.id});$scope.$on("$destroy",function(){return stateMonitor.destroy()});$scope.updateDataSource().then(function(){$scope.$listen(_timefilter.timefilter,"fetch",function(){$scope.fetch()});$scope.$watchCollection("state.sort",function(sort){if(!sort)return;var currentSort=_lodash2.default.pairs($scope.searchSource.getField("sort")).pop();if(!_angular2.default.equals(sort,currentSort))$scope.fetch()});$scope.$listen(queryFilter,"update",function(){return $scope.updateDataSource().then(function(){$state.save()})});$scope.$listen($state,"fetch_with_changes",function(diff){if(diff.indexOf("query")>=0)$scope.fetch()});$scope.$listen(queryFilter,"fetch",$scope.fetch);_timefilter.timefilter.enableAutoRefreshSelector();$scope.$watch("opts.timefield",function(timefield){if(!!timefield){_timefilter.timefilter.enableTimeRangeSelector()}else{_timefilter.timefilter.disableTimeRangeSelector()}});$scope.$watch("state.interval",function(){$scope.fetch()});$scope.$watch("vis.aggs",function(){if(!$scope.opts.timefield)return;var buckets=$scope.vis.getAggConfig().bySchemaGroup.buckets;if(buckets&&buckets.length===1){$scope.bucketInterval=buckets[0].buckets.getInterval()}});$scope.$watch("state.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$scope.$watchMulti(["rows","fetchStatus"],function updateResultState(){var prev={};var status={LOADING:"loading",READY:"ready",NO_RESULTS:"none"};function pick(rows,oldRows,fetchStatus){if(rows==null&&oldRows==null)return status.LOADING;var rowsEmpty=_lodash2.default.isEmpty(rows);var preparingForFetch=_lodash2.default.isUndefined(fetchStatus);if(preparingForFetch)return status.LOADING;else if(rowsEmpty&&fetchStatus)return status.LOADING;else if(!rowsEmpty)return status.READY;else return status.NO_RESULTS}return function(){var current={rows:$scope.rows,fetchStatus:$scope.fetchStatus};$scope.resultState=pick(current.rows,prev.rows,current.fetchStatus,prev.fetchStatus);prev=current}}());if($scope.opts.timefield){setupVisualization();$scope.updateTime()}init.complete=true;$state.replace()})});$scope.opts.fetch=$scope.fetch=function(){if(!init.complete)return;$scope.fetchError=undefined;$scope.updateTime();$scope.updateDataSource().then(setupVisualization).then(function(){$state.save();return courier.fetch()}).catch(notify.error)};$scope.updateQueryAndFetch=function(_ref11){var query=_ref11.query;$state.query=query;$scope.fetch()};function handleSegmentedFetch(segmented){function flushResponseData(){$scope.fetchError=undefined;$scope.hits=0;$scope.failures=[];$scope.rows=[];$scope.fieldCounts={}}if(!$scope.rows)flushResponseData();var sort=$state.sort;var timeField=$scope.indexPattern.timeFieldName;var sortBy=function(){if(!Array.isArray(sort))return"implicit";else if(sort[0]==="_score")return"implicit";else if(sort[0]===timeField)return"time";else return"non-time"}();var sortFn=null;if(sortBy!=="implicit"){sortFn=new HitSortFn(sort[1])}$scope.updateTime();if(sort[0]==="_score"){segmented.setMaxSegments(1)}segmented.setDirection(sortBy==="time"?sort[1]||"desc":"desc");segmented.setSortFn(sortFn);segmented.setSize($scope.opts.sampleSize);var inspectorRequests=[];function logResponseInInspector(resp){if(inspectorRequests.length>0){var inspectorRequest=inspectorRequests.shift();inspectorRequest.stats((0,_courier_inspector_utils.getResponseInspectorStats)($scope.searchSource,resp)).ok({json:resp})}}segmented.on("status",function(status){$scope.fetchStatus=status;if(status.complete===0){inspectorAdapters.requests.reset();inspectorRequests=[]}if(status.remaining>0){var inspectorRequest=inspectorAdapters.requests.start(i18n("kbn.discover.inspectorRequest.segmentFetchCompleteStatusTitle",{defaultMessage:"Segment {fetchCompleteStatus}",values:{fetchCompleteStatus:$scope.fetchStatus.complete}}),{description:i18n("kbn.discover.inspectorRequest.segmentFetchCompleteStatusDescription",{defaultMessage:"This request queries Elasticsearch to fetch the data for the search."})});inspectorRequest.stats((0,_courier_inspector_utils.getRequestInspectorStats)($scope.searchSource));$scope.searchSource.getSearchRequestBody().then(function(body){inspectorRequest.json(body)});inspectorRequests.push(inspectorRequest)}});segmented.on("first",function(){flushResponseData()});segmented.on("segment",function(resp){logResponseInInspector(resp);if(resp._shards.failed>0){$scope.failures=_lodash2.default.union($scope.failures,resp._shards.failures);$scope.failures=_lodash2.default.uniq($scope.failures,false,function(failure){return failure.index+failure.shard+failure.reason})}});segmented.on("emptySegment",function(resp){logResponseInInspector(resp)});segmented.on("mergedSegment",function(merged){$scope.mergedEsResp=merged;if($scope.opts.timefield){var tabifiedData=(0,_tabify.tabifyAggResponse)($scope.vis.aggs,merged);$scope.searchSource.rawResponse=merged;Promise.resolve(responseHandler(tabifiedData)).then(function(resp){visualizeHandler.render(resp)})}$scope.hits=merged.hits.total;var indexPattern=$scope.searchSource.getField("index");$scope.rows=merged.hits.hits.slice();var counts=$scope.fieldCounts;if(!counts||sortFn)counts=$scope.fieldCounts={};$scope.rows.forEach(function(hit){if(hit.$$_counted)return;if(!sortFn)hit.$$_counted=true;var fields=_lodash2.default.keys(indexPattern.flattenHit(hit));var n=fields.length;var field=void 0;while(field=fields[--n]){if(counts[field])counts[field]+=1;else counts[field]=1}})});segmented.on("complete",function(){if($scope.fetchStatus.hitCount===0){flushResponseData()}$scope.fetchStatus=null})}function beginSegmentedFetch(){$scope.searchSource.onBeginSegmentedFetch(handleSegmentedFetch).catch(function(error){var fetchError=(0,_get_painless_error.getPainlessError)(error);if(fetchError){$scope.fetchError=fetchError}else{notify.error(error)}beginSegmentedFetch()})}beginSegmentedFetch();$scope.updateTime=function(){$scope.timeRange={from:_datemath2.default.parse(_timefilter.timefilter.getTime().from),to:_datemath2.default.parse(_timefilter.timefilter.getTime().to,{roundUp:true})}};$scope.resetQuery=function(){kbnUrl.change("/discover/{{id}}",{id:$route.current.params.id})};$scope.newQuery=function(){kbnUrl.change("/discover")};$scope.updateDataSource=Promise.method(function updateDataSource(){$scope.searchSource.setField("size",$scope.opts.sampleSize).setField("sort",(0,_get_sort.getSort)($state.sort,$scope.indexPattern)).setField("query",!$state.query?null:$state.query).setField("filter",queryFilter.getFilters())});$scope.setSortOrder=function setSortOrder(columnName,direction){$scope.state.sort=[columnName,direction]};$scope.filterQuery=function(field,values,operation){$scope.indexPattern.popularizeField(field,1);filterActions.addFilter(field,values,operation,$scope.indexPattern.id,$scope.state,filterManager)};$scope.addColumn=function addColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.addColumn($scope.state.columns,columnName)};$scope.removeColumn=function removeColumn(columnName){$scope.indexPattern.popularizeField(columnName,1);columnActions.removeColumn($scope.state.columns,columnName)};$scope.moveColumn=function moveColumn(columnName,newIndex){columnActions.moveColumn($scope.state.columns,columnName,newIndex)};$scope.scrollToTop=function(){$window.scrollTo(0,0)};$scope.scrollToBottom=function(){$timeout(function(){$element.find("#discoverBottomMarker").focus()},0)};$scope.showAllRows=function(){$scope.minimumVisibleRows=$scope.hits};function resolveIndexPatternLoading(){var _$route$current$local=$route.current.locals.ip,loadedIndexPattern=_$route$current$local.loaded,stateVal=_$route$current$local.stateVal,stateValFound=_$route$current$local.stateValFound;var ownIndexPattern=$scope.searchSource.getOwnField("index");if(ownIndexPattern&&!stateVal){return ownIndexPattern}if(stateVal&&!stateValFound){var warningTitle=i18n("kbn.discover.valueIsNotConfiguredIndexPatternIDWarningTitle",{defaultMessage:"{stateVal} is not a configured index pattern ID",values:{stateVal:'"'+stateVal+'"'}});if(ownIndexPattern){_notify.toastNotifications.addWarning({title:warningTitle,text:i18n("kbn.discover.showingSavedIndexPatternWarningDescription",{defaultMessage:'Showing the saved index pattern: "{ownIndexPatternTitle}" ({ownIndexPatternId})',values:{ownIndexPatternTitle:ownIndexPattern.title,ownIndexPatternId:ownIndexPattern.id}})});return ownIndexPattern}_notify.toastNotifications.addWarning({title:warningTitle,text:i18n("kbn.discover.showingDefaultIndexPatternWarningDescription",{defaultMessage:'Showing the default index pattern: "{loadedIndexPatternTitle}" ({loadedIndexPatternId})',values:{loadedIndexPatternTitle:loadedIndexPattern.title,loadedIndexPatternId:loadedIndexPattern.id}})})}return loadedIndexPattern}$scope.isUnsupportedIndexPattern=!(0,_courier.isDefaultTypeIndexPattern)($route.current.locals.ip.loaded)&&!(0,_courier.hasSearchStategyForIndexPattern)($route.current.locals.ip.loaded);if($scope.isUnsupportedIndexPattern){$scope.unsupportedIndexPatternType=$route.current.locals.ip.loaded.type;return}init()}},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SCROLLER_HEIGHT=20;_modules.uiModules.get("kibana").directive("fixedScroll",function(debounce){return{restrict:"A",link:function link($scope,$el){var $window=(0,_jquery2.default)(window);var $scroller=(0,_jquery2.default)('<div class="fixed-scroll-scroller">').height(SCROLLER_HEIGHT);var unlisten=_lodash2.default.noop;function listen(){if(unlisten!==_lodash2.default.noop){throw new Error("fixedScroll listeners were not cleaned up properly before re-listening!")}var blockTo=void 0;function bind($from,$to){function handler(){if(blockTo===$to)return blockTo=null;$to.scrollLeft((blockTo=$from).scrollLeft())}$from.on("scroll",handler);return function(){$from.off("scroll",handler)}}unlisten=_lodash2.default.flow(bind($el,$scroller),bind($scroller,$el),function(){unlisten=_lodash2.default.noop})}function cleanUp(){unlisten();$scroller.detach();$el.css("padding-bottom",0)}function setup(){cleanUp();var containerWidth=$el.width();var contentWidth=$el.prop("scrollWidth");var containerHorizOverflow=contentWidth-containerWidth;var elTop=$el.offset().top-$window.scrollTop();var elBottom=elTop+$el.height();var windowVertOverflow=elBottom-$window.height();var requireScroller=containerHorizOverflow>0&&windowVertOverflow>0;if(!requireScroller)return;$el.css("padding-bottom",SCROLLER_HEIGHT);$scroller.width(containerWidth).html((0,_jquery2.default)("<div>").css({width:contentWidth,height:SCROLLER_HEIGHT})).insertAfter($el);listen()}var width=void 0;var scrollWidth=void 0;function checkWidth(){var newScrollWidth=$el.prop("scrollWidth");var newWidth=$el.width();if(scrollWidth!==newScrollWidth||width!==newWidth){$scope.$apply(setup);scrollWidth=newScrollWidth;width=newWidth}}var debouncedCheckWidth=debounce(checkWidth,100,{invokeApply:false});$scope.$watch(debouncedCheckWidth);$scope.$on("$destroy",function(){cleanUp();debouncedCheckWidth.cancel();$scroller=$window=null})}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=HitSortFnFactory;function HitSortFnFactory(){return function createHitSortFn(direction){var descending=direction==="desc";return function sortHits(hitA,hitB){var bBelowa=null;var aSorts=hitA.sort||[];var bSorts=hitB.sort||[];for(var i=0;i<bSorts.length;i++){var a=aSorts[i];var b=bSorts[i];if(a==null||b>a){bBelowa=!descending;break}if(b<a){bBelowa=descending;break}}if(bBelowa!==null){return bBelowa?-1:1}else{return 0}}}}module.exports=exports["default"]},function(module,exports){module.exports='<discover-app class="app-container">\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="discover" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Breadcrumbs. --\x3e\n      <div data-transclude-slot="topLeftCorner" class="kuiLocalBreadcrumbs">\n        <h1 tabindex="0" id="kui_local_breadcrumb" class="kuiLocalBreadcrumb">\n          <span ng-show="opts.savedSearch.id" class="kuiLocalBreadcrumb__emphasis">\n            <span data-test-subj="discoverCurrentQuery" ng-bind="opts.savedSearch.lastSavedTitle"></span>\n            <span\n              id="reload_saved_search"\n              aria-label="{{::\'kbn.discover.reloadSavedSearchAriaLabel\' | i18n: {defaultMessage: \'Reload Saved Search\'} }}"\n              tooltip="{{::\'kbn.discover.reloadSavedSearchTooltip\' | i18n: {defaultMessage: \'Reload Saved Search\'} }}"\n              ng-click="resetQuery()"\n              kbn-accessible-click\n              class="kuiIcon fa-undo small"\n            ></span>&nbsp;\n          </span>\n          <span data-test-subj="discoverQueryHits" class="kuiLocalBreadcrumb__emphasis">{{(hits || 0) | number:0}}</span>\n          <span\n            i18n-id="kbn.discover.hitsPluralTitle"\n            i18n-default-message="{hits, plural, one {hit} other {hits}}"\n            i18n-values="{ hits }"\n          ></span>\n        </h1>\n      </div>\n\n      \x3c!-- Search. --\x3e\n      <div data-transclude-slot="bottomRow" class="fullWidth">\n        <query-bar\n          query="state.query"\n          on-submit="updateQueryAndFetch"\n          app-name="\'discover\'"\n          index-patterns="[indexPattern]"\n        ></query-bar>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  <main class="container-fluid">\n    <div class="row">\n      <filter-bar\n        state="state"\n        index-patterns="[indexPattern]"\n      ></filter-bar>\n    </div>\n    <div class="row">\n      <div class="col-md-2 sidebar-container collapsible-sidebar" id="discover-sidebar">\n        <disc-field-chooser\n          class="dscFieldChooser"\n          columns="state.columns"\n          hits="rows"\n          field-counts="fieldCounts"\n          index-pattern="searchSource.getField(\'index\')"\n          index-pattern-list="opts.indexPatternList"\n          state="state"\n          on-add-field="addColumn"\n          on-add-filter="filterQuery"\n          on-remove-field="removeColumn"\n        >\n        </disc-field-chooser>\n      </div>\n\n      <div class="dscWrapper col-md-10">\n        <div class="dscWrapper__content">\n          <discover-unsupported-index-pattern\n            ng-if="isUnsupportedIndexPattern"\n            unsupported-type="unsupportedIndexPatternType"\n          ></discover-unsupported-index-pattern>\n\n          <discover-no-results\n            ng-show="resultState === \'none\'"\n            top-nav-toggle="kbnTopNav.toggle"\n            is-time-picker-open="kbnTopNav.isCurrent(\'filter\')"\n            shard-failures="failures"\n            time-field-name="opts.timefield"\n            query-language="state.query.language"\n            get-doc-link="getDocLink"\n          ></discover-no-results>\n\n          \x3c!-- loading --\x3e\n          <div ng-show="resultState === \'loading\'">\n            <discover-fetch-error\n              ng-show="fetchError"\n              fetch-error="fetchError"\n            ></discover-fetch-error>\n\n            <div\n              ng-hide="fetchError"\n              class="dscOverlay"\n            >\n              <div class="euiTitle" >\n                <h2\n                  i18n-id="kbn.discover.searchingTitle"\n                  i18n-default-message="Searching"\n                ></h2>\n              </div>\n              <div class="euiSpacer euiSpacer--m"></div>\n              <div ng-show="fetchStatus">{{fetchStatus.complete}}/{{fetchStatus.total}}</div>\n            </div>\n          </div>\n\n          \x3c!-- result --\x3e\n          <div class="dscResults" ng-show="resultState === \'ready\'">\n            <button\n              class="kuiButton kuiButton--basic kuiButton--iconText dscSkipButton"\n              ng-click="showAllRows(); scrollToBottom()"\n            >\n              <span class="kuiButton__inner">\n                <span aria-hidden="true" class="kuiButton__icon kuiIcon fa-chevron-down"></span>\n                <span\n                  i18n-id="kbn.discover.skipToBottomButtonLabel"\n                  i18n-default-message="Skip to bottom"\n                ></span>\n              </span>\n            </button>\n\n            <section\n              aria-label="{{::\'kbn.discover.histogramOfFoundDocumentsAriaLabel\' | i18n: {defaultMessage: \'Histogram of found documents\'} }}"\n              class="dscTimechart"\n              ng-if="opts.timefield"\n            >\n              <header class="dscTimechart__header">\n                <div class="small">\n                  <span\n                    tooltip="{{::\'kbn.discover.howToChangeTheTimeTooltip\' | i18n: {defaultMessage: \'To change the time, click the clock icon in the navigation bar\'} }}"\n                  >\n                    {{timeRange.from | moment}} - {{timeRange.to | moment}}\n                  </span>\n\n                  &mdash;\n\n                  <span class="form-inline">\n                    <select\n                      class="dscResults__interval form-control"\n                      ng-model="state.interval"\n                      ng-options="interval.val as interval.display for interval in intervalOptions | filter: intervalEnabled"\n                      ng-blur="toggleInterval()"\n                      data-test-subj="discoverIntervalSelect"\n                      >\n                    </select>\n                    <span ng-if="bucketInterval.scaled">\n                      <icon-tip\n                        content="getBucketIntervalToolTipText()"\n                        position="\'top\'"\n                      ></icon-tip>\n                      <span\n                        i18n-id="kbn.discover.scaledToDescription"\n                        i18n-default-message="Scaled to {bucketIntervalDescription}"\n                        i18n-values="{\n                          bucketIntervalDescription: bucketInterval.description\n                        }"\n                      ></span>\n                    </span>\n                  </span>\n                </div>\n\n              </header>\n\n              <div id="discoverHistogram"\n                 ng-show="vis && rows.length !== 0"\n                 style="display: flex; height: 200px"\n                >\n              </div>\n            </section>\n\n            <section\n              class="dscTable"\n              fixed-scroll\n              aria-label="{{::\'kbn.discover.documentsAriaLabel\' | i18n: {defaultMessage: \'Documents\'} }}"\n            >\n              <doc-table\n                hits="rows"\n                index-pattern="indexPattern"\n                sorting="state.sort"\n                columns="state.columns"\n                infinite-scroll="true"\n                filter="filterQuery"\n                filters="state.filters"\n                data-shared-item\n                data-title="{{opts.savedSearch.lastSavedTitle}}"\n                data-description="{{opts.savedSearch.description}}"\n                minimum-visible-rows="minimumVisibleRows"\n                render-complete\n                on-add-column="addColumn"\n                on-change-sort-order="setSortOrder"\n                on-move-column="moveColumn"\n                on-remove-column="removeColumn"\n              ></doc-table>\n\n              <a tabindex="0" id="discoverBottomMarker"></a>\n\n              <div\n                ng-if="rows.length == opts.sampleSize"\n                class="dscTable__footer"\n              >\n                <span\n                  i18n-id="kbn.discover.howToSeeOtherMatchingDocumentsDescription"\n                  i18n-default-message="These are the first {sampleSize} documents matching\n                  your search, refine your search to see others. "\n                  i18n-values="{\n                    sampleSize: opts.sampleSize,\n                  }"\n                ></span>\n                <a\n                  kbn-accessible-click\n                  ng-click="scrollToTop()"\n                  i18n-id="kbn.discover.backToTopLinkText"\n                  i18n-default-message="Back to top."\n                ></a>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</discover-app>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1645)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(102);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _modules=__webpack_require__(3);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n=__webpack_require__(14);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DiscoverFetchError=function DiscoverFetchError(_ref){var fetchError=_ref.fetchError;if(!fetchError){return null}var body=void 0;if(fetchError.lang==="painless"){var managementUrl=_chrome2.default.getNavLinkById("kibana:management").url;var url=managementUrl+"/kibana/indices";body=_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.fetchError.howToAddressErrorDescription",defaultMessage:"You can address this error by editing the {fetchErrorScript} field in {managementLink}, under the {scriptedFields} tab.",values:{fetchErrorScript:"'"+fetchError.script+"'",scriptedFields:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.fetchError.scriptedFieldsText",defaultMessage:"“Scripted fields”"}),managementLink:_react2.default.createElement("a",{href:url},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.fetchError.managmentLinkText",defaultMessage:"Management > Index Patterns"}))}}))}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center","data-test-subj":"discoverFetchError"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"discoverFetchError"},_react2.default.createElement(_eui.EuiCallOut,{title:fetchError.message,color:"danger",iconType:"cross"},body,_react2.default.createElement(_eui.EuiCodeBlock,null,fetchError.error)))),_react2.default.createElement(_eui.EuiSpacer,{size:"xl"}))};var app=_modules.uiModules.get("apps/discover",["react"]);app.directive("discoverFetchError",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(DiscoverFetchError))})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPainlessError=getPainlessError;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _i18n=__webpack_require__(8);var _lodash=__webpack_require__(0);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function getPainlessError(error){var rootCause=(0,_lodash.get)(error,"resp.error.root_cause");if(!rootCause){return}var _a=tslib_1.__read(rootCause,1),_b=_a[0],lang=_b.lang,script=_b.script;if(lang!=="painless"){return}return{lang:lang,script:script,message:_i18n.i18n.translate("kbn.discover.painlessError.painlessScriptedFieldErrorMessage",{defaultMessage:"Error with Painless scripted field '{script}'.",values:{script:script}}),error:error.message}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showShareContextMenu=showShareContextMenu;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _share_context_menu=__webpack_require__(1648);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);isOpen=false};function showShareContextMenu(_a){var anchorElement=_a.anchorElement,allowEmbed=_a.allowEmbed,getUnhashableStates=_a.getUnhashableStates,objectId=_a.objectId,objectType=_a.objectType,shareContextMenuExtensions=_a.shareContextMenuExtensions,sharingData=_a.sharingData,isDirty=_a.isDirty;if(isOpen){onClose();return}isOpen=true;document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_eui.EuiWrappingPopover,{className:"kuiLocalNav__popover",anchorClassName:"kuiLocalNav__popoverAnchor",id:"sharePopover",button:anchorElement,isOpen:true,closePopover:onClose,panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_share_context_menu.ShareContextMenu,{allowEmbed:allowEmbed,getUnhashableStates:getUnhashableStates,objectId:objectId,objectType:objectType,shareContextMenuExtensions:shareContextMenuExtensions,sharingData:sharingData,isDirty:isDirty,onClose:onClose})));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenu=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);__webpack_require__(1649);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _url_panel_content=__webpack_require__(1650);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var ShareContextMenuUI=function(_super){tslib_1.__extends(ShareContextMenuUI,_super);function ShareContextMenuUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.getPanels=function(){var panels=[];var menuItems=[];var intl=_this.props.intl;var permalinkPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenu.permalinkPanelTitle",defaultMessage:"Permalink"}),content:_react2.default.createElement(_url_panel_content.UrlPanelContent,{objectId:_this.props.objectId,objectType:_this.props.objectType,getUnhashableStates:_this.props.getUnhashableStates})};menuItems.push({name:intl.formatMessage({id:"common.ui.share.contextMenu.permalinksLabel",defaultMessage:"Permalinks"}),icon:"link",panel:permalinkPanel.id,sortOrder:0});panels.push(permalinkPanel);if(_this.props.allowEmbed){var embedPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenu.embedCodePanelTitle",defaultMessage:"Embed Code"}),content:_react2.default.createElement(_url_panel_content.UrlPanelContent,{isEmbedded:true,objectId:_this.props.objectId,objectType:_this.props.objectType,getUnhashableStates:_this.props.getUnhashableStates})};panels.push(embedPanel);menuItems.push({name:intl.formatMessage({id:"common.ui.share.contextMenu.embedCodeLabel",defaultMessage:"Embed code"}),icon:"console",panel:embedPanel.id,sortOrder:0})}if(_this.props.shareContextMenuExtensions){var _a=_this.props,objectType_1=_a.objectType,objectId_1=_a.objectId,getUnhashableStates_1=_a.getUnhashableStates,sharingData_1=_a.sharingData,isDirty_1=_a.isDirty,onClose_1=_a.onClose;_this.props.shareContextMenuExtensions.forEach(function(provider){provider.getShareActions({objectType:objectType_1,objectId:objectId_1,getUnhashableStates:getUnhashableStates_1,sharingData:sharingData_1,isDirty:isDirty_1,onClose:onClose_1}).forEach(function(_a){var shareMenuItem=_a.shareMenuItem,panel=_a.panel;var panelId=panels.length+1;panels.push(tslib_1.__assign({},panel,{id:panelId}));menuItems.push(tslib_1.__assign({},shareMenuItem,{panel:panelId}))})})}if(menuItems.length>1){var topLevelMenuPanel={id:panels.length+1,title:intl.formatMessage({id:"common.ui.share.contextMenuTitle",defaultMessage:"Share this {objectType}"},{objectType:_this.props.objectType}),items:menuItems.sort(function(a,b){var aSortOrder=a.sortOrder||0;var bSortOrder=b.sortOrder||0;if(aSortOrder>bSortOrder){return 1}if(aSortOrder<bSortOrder){return-1}if(a.name.toLowerCase().localeCompare(b.name.toLowerCase())>0){return 1}return-1}).map(function(menuItem){menuItem["data-test-subj"]="sharePanel-"+menuItem.name.replace(" ","");delete menuItem.sortOrder;return menuItem})};panels.push(topLevelMenuPanel)}var lastPanelIndex=panels.length-1;var initialPanelId=panels[lastPanelIndex].id;return{panels:panels,initialPanelId:initialPanelId}};return _this}ShareContextMenuUI.prototype.render=function(){var _a=this.getPanels(),panels=_a.panels,initialPanelId=_a.initialPanelId;return _react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:initialPanelId,panels:panels,"data-test-subj":"shareContextMenu"})};return ShareContextMenuUI}(_react.Component);var ShareContextMenu=exports.ShareContextMenu=(0,_react3.injectI18n)(ShareContextMenuUI)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPanelContent=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _url=__webpack_require__(28);var _state_hashing=__webpack_require__(78);var _url_shortener=__webpack_require__(1651);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var FixedEuiIconTip=_eui.EuiIconTip;var ExportUrlAsType;(function(ExportUrlAsType){ExportUrlAsType["EXPORT_URL_AS_SAVED_OBJECT"]="savedObject";ExportUrlAsType["EXPORT_URL_AS_SNAPSHOT"]="snapshot"})(ExportUrlAsType||(ExportUrlAsType={}));var UrlPanelContentUI=function(_super){tslib_1.__extends(UrlPanelContentUI,_super);function UrlPanelContentUI(props){var _this=_super.call(this,props)||this;_this.isNotSaved=function(){return _this.props.objectId===undefined||_this.props.objectId===""};_this.resetUrl=function(){if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false},_this.setUrl)}};_this.getSavedObjectUrl=function(){if(_this.isNotSaved()){return}var url=window.location.href;var unhashedUrl=(0,_state_hashing.unhashUrl)(url,_this.props.getUnhashableStates());var parsedUrl=(0,_url.parse)(unhashedUrl);if(!parsedUrl||!parsedUrl.hash){return}var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);return(0,_url.format)({protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.host,pathname:parsedUrl.pathname,hash:(0,_url.format)({pathname:parsedAppUrl.pathname,query:{_g:parsedAppUrl.query._g}})})};_this.getSnapshotUrl=function(){var url=window.location.href;return(0,_state_hashing.unhashUrl)(url,_this.props.getUnhashableStates())};_this.makeUrlEmbeddable=function(url){var embedQueryParam="?embed=true";var urlHasQueryString=url.indexOf("?")!==-1;if(urlHasQueryString){return url.replace("?",embedQueryParam+"&")}return""+url+embedQueryParam};_this.makeIframeTag=function(url){if(!url){return}var embeddableUrl=_this.makeUrlEmbeddable(url);return'<iframe src="'+embeddableUrl+'" height="600" width="800"></iframe>'};_this.setUrl=function(){var url;if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT){url=_this.getSavedObjectUrl()}else if(_this.state.useShortUrl){url=_this.shortUrlCache}else{url=_this.getSnapshotUrl()}if(_this.props.isEmbedded){url=_this.makeIframeTag(url)}_this.setState({url:url})};_this.handleExportUrlAs=function(optionId){_this.setState({exportUrlAs:optionId},_this.setUrl)};_this.handleShortUrlChange=function(evt){return tslib_1.__awaiter(_this,void 0,void 0,function(){var isChecked,shortUrl,fetchError_1;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:isChecked=evt.target.checked;if(!isChecked||this.shortUrlCache!==undefined){this.setState({useShortUrl:isChecked},this.setUrl);return[2]}this.setState({isCreatingShortUrl:true,shortUrlErrorMsg:undefined});_a.label=1;case 1:_a.trys.push([1,3,,4]);return[4,(0,_url_shortener.shortenUrl)(this.getSnapshotUrl())];case 2:shortUrl=_a.sent();if(this.mounted){this.shortUrlCache=shortUrl;this.setState({isCreatingShortUrl:false,useShortUrl:isChecked},this.setUrl)}return[3,4];case 3:fetchError_1=_a.sent();if(this.mounted){this.shortUrlCache=undefined;this.setState({useShortUrl:false,isCreatingShortUrl:false,shortUrlErrorMsg:this.props.intl.formatMessage({id:"common.ui.share.urlPanel.unableCreateShortUrlErrorMessage",defaultMessage:"Unable to create short URL. Error: {errorMessage}"},{errorMessage:fetchError_1.message})},this.setUrl)}return[3,4];case 4:return[2]}})})};_this.renderExportUrlAsOptions=function(){var _a,_b;return[(_a={id:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,label:_this.renderWithIconTip(_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.snapshotLabel",defaultMessage:"Snapshot"}),_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.snapshotDescription",defaultMessage:"Snapshot URLs encode the current state of the {objectType} in the URL itself.\n            Edits to the saved {objectType} won't be visible via this URL.",values:{objectType:_this.props.objectType}}))},_a["data-test-subj"]="exportAsSnapshot",_a),(_b={id:ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT,disabled:_this.isNotSaved(),label:_this.renderWithIconTip(_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.savedObjectLabel",defaultMessage:"Saved object"}),_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.savedObjectDescription",defaultMessage:"You can share this URL with people to let them load the most recent saved version of this {objectType}.",values:{objectType:_this.props.objectType}}))},_b["data-test-subj"]="exportAsSavedObject",_b)]};_this.renderWithIconTip=function(child,tipContent){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react2.default.createElement(_eui.EuiFlexItem,null,child),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(FixedEuiIconTip,{content:tipContent,position:"bottom"})))};_this.renderExportAsRadioGroup=function(){var generateLinkAsHelp=_this.isNotSaved()?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.canNotShareAsSavedObjectHelpText",defaultMessage:"Can't share as saved object until the {objectType} has been saved.",values:{objectType:_this.props.objectType}}):undefined;return _react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.generateLinkAsLabel",defaultMessage:"Generate the link as"}),helpText:generateLinkAsHelp},_react2.default.createElement(_eui.EuiRadioGroup,{options:_this.renderExportUrlAsOptions(),idSelected:_this.state.exportUrlAs,onChange:_this.handleExportUrlAs}))};_this.renderShortUrlSwitch=function(){if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT){return}var shortUrlLabel=_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.shortUrlLabel",defaultMessage:"Short URL"});var switchLabel=_this.state.isCreatingShortUrl?_react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"s"})," ",shortUrlLabel):shortUrlLabel;var switchComponent=_react2.default.createElement(_eui.EuiSwitch,{label:switchLabel,checked:_this.state.useShortUrl,onChange:_this.handleShortUrlChange,"data-test-subj":"useShortUrl"});var tipContent=_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.shortUrlHelpText",defaultMessage:"We recommend sharing shortened snapshot URLs for maximum compatibility.\n        Internet Explorer has URL length restrictions,\n        and some wiki and markup parsers don't do well with the full-length version of the snapshot URL,\n        but the short URL should work great."});return _react2.default.createElement(_eui.EuiFormRow,{helpText:_this.state.shortUrlErrorMsg},_this.renderWithIconTip(switchComponent,tipContent))};_this.shortUrlCache=undefined;_this.state={exportUrlAs:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,useShortUrl:false,isCreatingShortUrl:false,url:""};return _this}UrlPanelContentUI.prototype.componentWillUnmount=function(){window.removeEventListener("hashchange",this.resetUrl);this.mounted=false};UrlPanelContentUI.prototype.componentDidMount=function(){this.mounted=true;this.setUrl();window.addEventListener("hashchange",this.resetUrl,false)};UrlPanelContentUI.prototype.render=function(){var _this=this;return _react2.default.createElement(_eui.EuiForm,{className:"sharePanelContent","data-test-subj":"shareUrlForm"},this.renderExportAsRadioGroup(),this.renderShortUrlSwitch(),_react2.default.createElement(_eui.EuiCopy,{textToCopy:this.state.url,anchorClassName:"sharePanel__copyAnchor"},function(copy){return _react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:copy,disabled:_this.state.isCreatingShortUrl||_this.state.url==="","data-share-url":_this.state.url,"data-test-subj":"copyShareUrlButton",size:"s"},_this.props.isEmbedded?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.copyIframeCodeButtonLabel",defaultMessage:"Copy iFrame code"}):_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.share.urlPanel.copyLinkButtonLabel",defaultMessage:"Copy link"})))}))};return UrlPanelContentUI}(_react.Component);var UrlPanelContent=exports.UrlPanelContent=(0,_react3.injectI18n)(UrlPanelContentUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenUrl=shortenUrl;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _kfetch=__webpack_require__(79);var _url=__webpack_require__(28);var _url2=_interopRequireDefault(_url);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function shortenUrl(absoluteUrl){return tslib_1.__awaiter(this,void 0,void 0,function(){var basePath,parsedUrl,path,hash,relativeUrl,body,resp;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:basePath=_chrome2.default.getBasePath();parsedUrl=_url2.default.parse(absoluteUrl);if(!parsedUrl||!parsedUrl.path){return[2]}path=parsedUrl.path.replace(basePath,"");hash=parsedUrl.hash?parsedUrl.hash:"";relativeUrl=path+hash;body=JSON.stringify({url:relativeUrl});return[4,(0,_kfetch.kfetch)({method:"POST",pathname:"/api/shorten_url",body:body})];case 1:resp=_a.sent();return[2,_url2.default.format({protocol:parsedUrl.protocol,host:parsedUrl.host,pathname:basePath+"/goto/"+resp.urlId})]}})})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenuExtensionsRegistryProvider=undefined;var _registry=__webpack_require__(23);var ShareContextMenuExtensionsRegistryProvider=exports.ShareContextMenuExtensionsRegistryProvider=(0,_registry.uiRegistry)({name:"shareContextMenuExtensions",index:["id"]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOpenSearchPanel=showOpenSearchPanel;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _open_search_panel=__webpack_require__(1654);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showOpenSearchPanel(_ref){var makeUrl=_ref.makeUrl;if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_open_search_panel.OpenSearchPanel,{onClose:onClose,makeUrl:makeUrl}));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OpenSearchPanel=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _saved_object_finder=__webpack_require__(568);var _risonNode=__webpack_require__(55);var _risonNode2=_interopRequireDefault(_risonNode);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SEARCH_OBJECT_TYPE="search";var OpenSearchPanel=exports.OpenSearchPanel=function(_React$Component){_inherits(OpenSearchPanel,_React$Component);function OpenSearchPanel(){_classCallCheck(this,OpenSearchPanel);return _possibleConstructorReturn(this,(OpenSearchPanel.__proto__||Object.getPrototypeOf(OpenSearchPanel)).apply(this,arguments))}_createClass(OpenSearchPanel,[{key:"renderMangageSearchesButton",value:function renderMangageSearchesButton(){return _react2.default.createElement(_eui.EuiButton,{onClick:this.props.onClose,href:"#/management/kibana/objects?_a="+_risonNode2.default.encode({tab:SEARCH_OBJECT_TYPE})},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.manageSearchesButtonLabel",defaultMessage:"Manage searches"}))}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"loadSearchForm"},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.openSearchTitle",defaultMessage:"Open Search"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_saved_object_finder.SavedObjectFinder,{noItemsMessage:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.discover.topNav.openSearchPanel.noSearchesFoundDescription",defaultMessage:"No matching searches found."}),savedObjectType:SEARCH_OBJECT_TYPE,makeUrl:this.props.makeUrl,onChoose:this.props.onClose,callToActionButton:this.renderMangageSearchesButton()})))}}]);return OpenSearchPanel}(_react2.default.Component);OpenSearchPanel.propTypes={onClose:_propTypes2.default.func.isRequired,makeUrl:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _tabify=__webpack_require__(304);Object.defineProperty(exports,"tabifyAggResponse",{enumerable:true,get:function get(){return _tabify.tabifyAggResponse}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1657);__webpack_require__(1660);__webpack_require__(1662);__webpack_require__(1665);__webpack_require__(1666);__webpack_require__(508);__webpack_require__(247);__webpack_require__(329);__webpack_require__(117);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _visualize_listing=__webpack_require__(1667);var _visualize_listing2=_interopRequireDefault(_visualize_listing);var _visualize_listing3=__webpack_require__(1668);var _visualize_constants=__webpack_require__(89);var _feature_catalogue=__webpack_require__(39);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.defaults(/visualize/,{requireDefaultIndex:true}).when(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH,{template:_visualize_listing2.default,controller:_visualize_listing3.VisualizeListingController,controllerAs:"listingController",resolve:{createNewVis:function createNewVis(){return false}}}).when(_visualize_constants.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH,{template:_visualize_listing2.default,controller:_visualize_listing3.VisualizeListingController,controllerAs:"listingController",resolve:{createNewVis:function createNewVis(){return true}}}).when("/visualize/step/1",{redirectTo:_visualize_constants.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"visualize",title:"Visualize",description:i18n("kbn.visualize.visualizeDescription",{defaultMessage:"Create visualizations and aggregate data stores in your Elasticsearch indices."}),icon:"visualizeApp",path:"/app/kibana#"+_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH,showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(247);__webpack_require__(1658);__webpack_require__(464);__webpack_require__(567);__webpack_require__(565);__webpack_require__(338);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _notify=__webpack_require__(10);var _vis_types=__webpack_require__(30);var _doc_title=__webpack_require__(91);var _query_filter=__webpack_require__(54);var _state_monitor_factory=__webpack_require__(339);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _editor=__webpack_require__(1659);var _editor2=_interopRequireDefault(_editor);var _dashboard_constants=__webpack_require__(58);var _visualize_constants=__webpack_require__(89);var _kibana_parsed_url=__webpack_require__(390);var _absolute_to_parsed_url=__webpack_require__(389);var _migrate_legacy_query=__webpack_require__(244);var _persisted_log=__webpack_require__(51);var _timefilter=__webpack_require__(19);var _loader=__webpack_require__(331);var _share=__webpack_require__(340);var _state_hashing=__webpack_require__(78);var _show_saved_object_save_modal=__webpack_require__(341);var _saved_object_save_modal=__webpack_require__(342);var _documentation_links=__webpack_require__(50);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}_routes2.default.when(_visualize_constants.VisualizeConstants.CREATE_PATH,{template:_editor2.default,resolve:{savedVis:function savedVis(savedVisualizations,redirectWhenMissing,$route,Private,i18n){var visTypes=Private(_vis_types.VisTypesRegistryProvider);var visType=_lodash2.default.find(visTypes,{name:$route.current.params.type});var shouldHaveIndex=visType.requiresSearch&&visType.options.showIndexSelection;var hasIndex=$route.current.params.indexPattern||$route.current.params.savedSearchId;if(shouldHaveIndex&&!hasIndex){throw new Error(i18n("kbn.visualize.createVisualization.noIndexPatternOrSavedSearchIdErrorMessage",{defaultMessage:"You must provide either an indexPattern or a savedSearchId"}))}return savedVisualizations.get($route.current.params).catch(redirectWhenMissing({"*":"/visualize"}))}}}).when(_visualize_constants.VisualizeConstants.EDIT_PATH+"/:id",{template:_editor2.default,resolve:{savedVis:function savedVis(savedVisualizations,redirectWhenMissing,$route){return savedVisualizations.get($route.current.params.id).then(function(savedVis){_persisted_log.recentlyAccessed.add(savedVis.getFullPath(),savedVis.title,savedVis.id);return savedVis}).catch(redirectWhenMissing({visualization:"/visualize",search:"/management/kibana/objects/savedVisualizations/"+$route.current.params.id,"index-pattern":"/management/kibana/objects/savedVisualizations/"+$route.current.params.id,"index-pattern-field":"/management/kibana/objects/savedVisualizations/"+$route.current.params.id}))}}});_modules.uiModules.get("app/visualize",["kibana/notify","kibana/url"]).directive("visualizeApp",function(){return{restrict:"E",controllerAs:"visualizeApp",controller:VisEditor}});function VisEditor($scope,$element,$route,AppState,$window,kbnUrl,redirectWhenMissing,Private,Promise,config,kbnBaseUrl,localStorage,i18n){var _this=this;var docTitle=Private(_doc_title.DocTitleProvider);var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);var savedVis=$route.current.locals.savedVis;var vis=savedVis.vis,searchSource=savedVis.searchSource;$scope.vis=vis;var $appStatus=this.appStatus={dirty:!savedVis.id};$scope.topNavMenu=[{key:i18n("kbn.topNavMenu.saveVisualizationButtonLabel",{defaultMessage:"save"}),description:i18n("kbn.visualize.topNavMenu.saveVisualizationButtonAriaLabel",{defaultMessage:"Save Visualization"}),testId:"visualizeSaveButton",disableButton:function disableButton(){return Boolean(vis.dirty)},tooltip:function tooltip(){if(vis.dirty){return i18n("kbn.visualize.topNavMenu.saveVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before saving"})}},run:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var onSave,saveModal;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onSave=function onSave(_ref2){var newTitle=_ref2.newTitle,newCopyOnSave=_ref2.newCopyOnSave,isTitleDuplicateConfirmed=_ref2.isTitleDuplicateConfirmed,onTitleDuplicate=_ref2.onTitleDuplicate;var currentTitle=savedVis.title;savedVis.title=newTitle;savedVis.copyOnSave=newCopyOnSave;var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return doSave(saveOptions).then(function(_ref3){var id=_ref3.id,error=_ref3.error;if(!id||error){savedVis.title=currentTitle}return{id:id,error:error}})};saveModal=_react2.default.createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:onSave,onClose:function onClose(){},title:savedVis.title,showCopyOnSave:savedVis.id?true:false,objectType:"visualization"});(0,_show_saved_object_save_modal.showSaveModal)(saveModal);case 3:case"end":return _context.stop()}}},_callee,_this)}));function run(){return _ref.apply(this,arguments)}return run}()},{key:i18n("kbn.topNavMenu.shareVisualizationButtonLabel",{defaultMessage:"share"}),description:i18n("kbn.visualize.topNavMenu.shareVisualizationButtonAriaLabel",{defaultMessage:"Share Visualization"}),testId:"shareTopNavButton",run:function run(menuItem,navController,anchorElement){var hasUnappliedChanges=vis.dirty;var hasUnsavedChanges=$appStatus.dirty;(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:true,getUnhashableStates:getUnhashableStates,objectId:savedVis.id,objectType:"visualization",shareContextMenuExtensions:shareContextMenuExtensions,sharingData:{title:savedVis.title},isDirty:hasUnappliedChanges||hasUnsavedChanges})}},{key:i18n("kbn.topNavMenu.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:i18n("kbn.visualize.topNavMenu.openInspectorButtonAriaLabel",{defaultMessage:"Open Inspector for visualization"}),testId:"openInspectorButton",disableButton:function disableButton(){return!vis.hasInspector||!vis.hasInspector()},run:function run(){vis.openInspector().bindToAngularScope($scope)},tooltip:function tooltip(){if(!vis.hasInspector||!vis.hasInspector()){return i18n("kbn.visualize.topNavMenu.openInspectorDisabledButtonTooltip",{defaultMessage:"This visualization doesn't support any inspectors."})}}},{key:i18n("kbn.topNavMenu.refreshButtonLabel",{defaultMessage:"refresh"}),description:i18n("kbn.visualize.topNavMenu.refreshButtonAriaLabel",{defaultMessage:"Refresh"}),run:function run(){vis.forceReload()},testId:"visualizeRefreshButton"},{key:i18n("kbn.topNavManu.documentationLabel",{defaultMessage:"documentation"}),description:i18n("kbn.visualize.topNavMenu.documentationButtonDescription",{defaultMessage:"Documentation"}),run:function run(){$window.open(_documentation_links.documentationLinks.kibana.visualize)}}];var stateMonitor=void 0;if(savedVis.id){docTitle.change(savedVis.title)}var savedVisState=vis.getState();var stateDefaults={uiState:savedVis.uiStateJSON?JSON.parse(savedVis.uiStateJSON):{},linked:!!savedVis.savedSearchId,query:searchSource.getOwnField("query")||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},filters:searchSource.getOwnField("filter")||[],vis:savedVisState};var $state=function initState(){var appState=new AppState(stateDefaults);if(!_angular2.default.equals(appState.vis,savedVisState)){Promise.try(function(){vis.setState(appState.vis)}).catch(redirectWhenMissing({"index-pattern-field":"/visualize"}))}return appState}();function init(){$scope.savedVis=savedVis;$scope.indexPattern=vis.indexPattern;$scope.searchSource=searchSource;$scope.state=$state;$scope.uiState=$state.makeStateful("uiState");$scope.appStatus=$appStatus;var addToDashMode=$route.current.params[_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM];kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);$scope.isAddToDashMode=function(){return addToDashMode};$scope.timeRange=_timefilter.timefilter.getTime();$scope.opts=_lodash2.default.pick($scope,"savedVis","isAddToDashMode");stateMonitor=_state_monitor_factory.stateMonitorFactory.create($state,stateDefaults);stateMonitor.ignoreProps(["vis.listeners"]).onChange(function(status){$appStatus.dirty=status.dirty||!savedVis.id});$scope.$watch("state.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$state.replace();$scope.getVisualizationTitle=function getVisualizationTitle(){return savedVis.lastSavedTitle||i18n("kbn.visualize.topNavMenu.unsavedVisualizationTitle",{defaultMessage:"{visTitle} (unsaved)",values:{visTitle:savedVis.title}})};$scope.$watchMulti(['searchSource.getField("index")',"vis.type.options.showTimePicker"],function(_ref4){var _ref5=_slicedToArray(_ref4,2),index=_ref5[0],requiresTimePicker=_ref5[1];var showTimeFilter=Boolean((!index||index.timeFieldName)&&requiresTimePicker);if(showTimeFilter){_timefilter.timefilter.enableTimeRangeSelector()}else{_timefilter.timefilter.disableTimeRangeSelector()}});var updateTimeRange=function updateTimeRange(){$scope.timeRange=_timefilter.timefilter.getTime();if($scope._handler){$scope._handler.update({timeRange:$scope.timeRange})}};_timefilter.timefilter.enableAutoRefreshSelector();$scope.$listenAndDigestAsync(_timefilter.timefilter,"timeUpdate",updateTimeRange);$scope.$listen(queryFilter,"update",function(){$scope.fetch()});$scope.fetch=function(){$state.save();savedVis.searchSource.setField("query",$state.query);savedVis.searchSource.setField("filter",$state.filters);$scope.globalFilters=queryFilter.getGlobalFilters();$scope.vis.forceReload()};$scope.$on("$destroy",function(){if($scope._handler){$scope._handler.destroy()}savedVis.destroy();stateMonitor.destroy()});if(!$scope.chrome.getVisible()){(0,_loader.getVisualizeLoader)().then(function(loader){$scope._handler=loader.embedVisualizationWithSavedObject($element.find(".visualize")[0],savedVis,{timeRange:$scope.timeRange,uiState:$scope.uiState,appState:$state,listenOnChange:false})})}}$scope.updateQueryAndFetch=function(_ref6){var query=_ref6.query;$state.query=query;$scope.fetch()};function doSave(saveOptions){$state.vis.title=savedVis.title;$state.vis.type=savedVis.type||$state.vis.type;savedVis.visState=$state.vis;savedVis.uiStateJSON=_angular2.default.toJson($scope.uiState.getChanges());return savedVis.save(saveOptions).then(function(id){$scope.$evalAsync(function(){stateMonitor.setInitialState($state.toJSON());if(id){_notify.toastNotifications.addSuccess({title:i18n("kbn.visualize.topNavMenu.saveVisualization.successNotificationText",{defaultMessage:"Saved '{visTitle}'",values:{visTitle:savedVis.title}}),"data-test-subj":"saveVisualizationSuccess"});if($scope.isAddToDashMode()){var savedVisualizationParsedUrl=new _kibana_parsed_url.KibanaParsedUrl({basePath:_chrome2.default.getBasePath(),appId:kbnBaseUrl.slice("/app/".length),appPath:kbnUrl.eval(_visualize_constants.VisualizeConstants.EDIT_PATH+"/{{id}}",{id:savedVis.id})});$window.history.pushState({},"",savedVisualizationParsedUrl.getRootRelativePath());_chrome2.default.trackSubUrlForApp("kibana:visualize",savedVisualizationParsedUrl);var lastDashboardAbsoluteUrl=_chrome2.default.getNavLinkById("kibana:dashboard").lastSubUrl;var dashboardParsedUrl=(0,_absolute_to_parsed_url.absoluteToParsedUrl)(lastDashboardAbsoluteUrl,_chrome2.default.getBasePath());dashboardParsedUrl.addQueryParameter(_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM,savedVis.id);kbnUrl.change(dashboardParsedUrl.appPath)}else if(savedVis.id===$route.current.params.id){docTitle.change(savedVis.lastSavedTitle)}else{kbnUrl.change(_visualize_constants.VisualizeConstants.EDIT_PATH+"/{{id}}",{id:savedVis.id})}}});return{id:id}},function(error){console.error(error);_notify.toastNotifications.addDanger({title:i18n("kbn.visualize.topNavMenu.saveVisualization.failureNotificationText",{defaultMessage:"Error on saving '{visTitle}'",values:{visTitle:savedVis.title}}),text:error.message,"data-test-subj":"saveVisualizationError"});return{error:error}})}$scope.unlink=function(){if(!$state.linked)return;$state.linked=false;var searchSourceParent=searchSource.getParent();var searchSourceGrandparent=searchSourceParent.getParent();delete savedVis.savedSearchId;delete vis.savedSearchId;searchSourceParent.setField("filter",_lodash2.default.union(searchSource.getOwnField("filter"),searchSourceParent.getOwnField("filter")));$state.query=searchSourceParent.getField("query");$state.filters=searchSourceParent.getField("filter");searchSource.setField("index",searchSourceParent.getField("index"));searchSource.setParent(searchSourceGrandparent);_notify.toastNotifications.addSuccess(i18n("kbn.visualize.linkedToSearch.unlinkSuccessNotificationText",{defaultMessage:"Unlinked from saved search '{searchTitle}'",values:{searchTitle:savedVis.savedSearch.title}}));$scope.fetch()};$scope.getAdditionalMessage=function(){return'<i class="kuiIcon fa-flask"></i>'+i18n("kbn.visualize.experimentalVisInfoText",{defaultMessage:"This visualization is marked as experimental."})+" "+vis.type.feedbackMessage};init()}},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _modules=__webpack_require__(3);__webpack_require__(285);var _vis_editor_types=__webpack_require__(487);_modules.uiModules.get("kibana/directive",["ngSanitize"]).directive("visualizationEditor",function(Private,$timeout,getAppState){var editorTypes=Private(_vis_editor_types.VisEditorTypesRegistryProvider);return{restrict:"E",scope:{savedObj:"=",uiState:"=?",timeRange:"=",filters:"="},link:function link($scope,element){var editorType=$scope.savedObj.vis.type.editor;var Editor=typeof editorType==="function"?editorType:editorTypes.find(function(editor){return editor.key===editorType});var editor=new Editor(element[0],$scope.savedObj);$scope.renderFunction=function(){editor.render({uiState:$scope.uiState,timeRange:$scope.timeRange,filters:$scope.filters,appState:getAppState()})};$scope.$on("render",function(event){event.preventDefault();$timeout(function(){$scope.renderFunction()})});$scope.$on("$destroy",function(){editor.destroy()});$scope.$watchGroup(["timeRange","filters"],(0,_lodash.debounce)(function(){$scope.renderFunction()},100))}}})},function(module,exports){module.exports='<visualize-app class="app-container visEditor visEditor--{{ vis.type.name }}">\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="visualize" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Breadcrumbs. --\x3e\n      <bread-crumbs\n        data-transclude-slot="topLeftCorner"\n        page-title="getVisualizationTitle()"\n        use-links="true"\n        omit-current-page="true"\n        omit-pages="[\'edit\']"\n      ></bread-crumbs>\n\n      \x3c!-- Search. --\x3e\n      <div\n        data-transclude-slot="bottomRow"\n        ng-show="chrome.getVisible()"\n        class="fullWidth"\n      >\n        <div ng-if="vis.type.requiresSearch && state.linked">\n          {{ ::\'kbn.visualize.linkedToSearchInfoText\' | i18n: { defaultMessage: \'Linked to Saved Search\' } }}\n          <a\n            href="#/discover/{{savedVis.savedSearch.id}}"\n          >\n            {{ savedVis.savedSearch.title }}\n          </a>\n          &nbsp;\n          <a\n            data-test-subj="unlinkSavedSearch"\n            href=""\n            ng-dblclick="unlink()"\n            tooltip="{{ ::\'kbn.visualize.linkedToSearch.unlinkButtonTooltip\' | i18n: { defaultMessage: \'Double click to unlink from Saved Search\' } }}"\n          >\n            <span aria-hidden="true" class="kuiIcon fa-chain-broken"></span>\n          </a>\n        </div>\n\n        <div ng-if="vis.type.requiresSearch && vis.type.options.showQueryBar" class="fullWidth">\n          <query-bar\n            query="state.query"\n            app-name="\'visualize\'"\n            on-submit="updateQueryAndFetch"\n            disable-auto-focus="true"\n            index-patterns="[indexPattern]"\n          ></query-bar>\n        </div>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  \x3c!-- Filters. --\x3e\n  <filter-bar\n    ng-if="vis.type.options.showFilterBar"\n    state="state"\n    index-patterns="[indexPattern]"\n  ></filter-bar>\n\n  <div\n    class="euiCallOut euiCallOut--primary euiCallOut--small hide-for-sharing"\n    ng-if="vis.type.shouldMarkAsExperimentalInUI()"\n    data-test-subj="experimentalVisInfo"\n  >\n    <div class="euiText">\n      <p ng-bind-html="getAdditionalMessage()"></p>\n    </div>\n  </div>\n\n  <div class="visualize" ng-if="!chrome.getVisible()"/>\n\n  <visualization-editor\n    ng-if="chrome.getVisible()"\n    saved-obj="savedVis"\n    ui-state="uiState"\n    time-range="timeRange"\n    filters="globalFilters"\n    class="visEditor__content"\n  />\n\n</visualize-app>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(247);__webpack_require__(557);__webpack_require__(556);__webpack_require__(316);var _dashboard_constants=__webpack_require__(58);var _visualize_constants=__webpack_require__(89);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _step_=__webpack_require__(1661);var _step_2=_interopRequireDefault(_step_);var _saved_objects=__webpack_require__(24);var _timefilter=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("app/visualize",["kibana/courier"]);_routes2.default.when("/visualize/step/2",{redirectTo:_visualize_constants.VisualizeConstants.WIZARD_STEP_1_PAGE_PATH});_routes2.default.when(_visualize_constants.VisualizeConstants.WIZARD_STEP_2_PAGE_PATH,{template:_step_2.default,controller:"VisualizeWizardStep2",resolve:{indexPatterns:function indexPatterns(Private){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4}).then(function(response){return response.savedObjects})}}});_module.controller("VisualizeWizardStep2",function($route,$scope,kbnUrl){var type=$route.current.params.type;var addToDashMode=$route.current.params[_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM];kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);$scope.step2WithSearchUrl=function(hit){if(addToDashMode){return kbnUrl.eval("#"+_visualize_constants.VisualizeConstants.CREATE_PATH+"?type={{type}}&savedSearchId={{id}}"+("&"+_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM),{type:type,id:hit.id})}return kbnUrl.eval("#"+_visualize_constants.VisualizeConstants.CREATE_PATH+"?type={{type}}&savedSearchId={{id}}",{type:type,id:hit.id})};_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.indexPattern={selection:null,list:$route.current.locals.indexPatterns};$scope.makeUrl=function(pattern){if(!pattern)return;if(addToDashMode){return"#"+_visualize_constants.VisualizeConstants.CREATE_PATH+("?"+_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM)+("&type="+type+"&indexPattern="+pattern.id)}return"#"+_visualize_constants.VisualizeConstants.CREATE_PATH+"?type="+type+"&indexPattern="+pattern.id}})},function(module,exports){module.exports='\x3c!-- Local nav. --\x3e\n<kbn-top-nav name="visualize">\n  \x3c!-- Transcluded elements. --\x3e\n  <div data-transclude-slots>\n    \x3c!-- Breadcrumbs. --\x3e\n    <bread-crumbs\n      data-transclude-slot="topLeftCorner"\n      use-links="true"\n      omit-current-page="true"\n      page-title="::\'kbn.visualize.newVisWizard.pageTitle\' | i18n: { defaultMessage: \'Choose search source\' }"\n    ></bread-crumbs>\n  </div>\n</kbn-top-nav>\n\n<div class="kuiViewContent kuiViewContent--constrainedWidth kuiViewContentItem" data-test-subj="visualizeSelectSearch">\n  <div class="visWizard kuiViewContentItem">\n    <div class="visWizard__column visWizard__column--small">\n      <h2\n        class="kuiTitle kuiVerticalRhythm"\n        i18n-id="kbn.visualize.newVisWizard.createFromNewSearchTitle"\n        i18n-default-message="From a New Search, Select Index"\n      ></h2>\n\n      <paginated-selectable-list\n        per-page="20"\n        list="indexPattern.list"\n        list-property="attributes.title"\n        user-make-url="makeUrl"\n        class="visWizard__row visWizard__list--paginated--selectable kuiVerticalRhythm"\n        disable-auto-focus="true"\n      ></paginated-selectable-list>\n    </div>\n\n    <div class="visWizard__column visWizard__column--large">\n      <h2\n        class="kuiTitle kuiVerticalRhythm"\n        i18n-id="kbn.visualize.newVisWizard.createFromSavedSearchTitle"\n        i18n-default-message="Or, From a Saved Search"\n      ></h2>\n\n      \x3c!-- Saved searches --\x3e\n      <saved-object-finder\n        type="searches"\n        class="visWizard__row visWizard__savedObjectFinder kuiVerticalRhythm"\n        make-url="step2WithSearchUrl"\n        disable-auto-focus="true"\n      ></saved-object-finder>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _dragula=__webpack_require__(1953);var _dragula2=_interopRequireDefault(_dragula);__webpack_require__(1664);var _modules=__webpack_require__(3);var _collection=__webpack_require__(77);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("kibana").directive("draggableContainer",function(){var $scopes=new WeakMap;return{restrict:"A",scope:true,controllerAs:"draggableContainerCtrl",controller:function controller($scope,$attrs,$parse,$element){$scopes.set($element.get(0),$scope);this.linkDraggableItem=function(el,$scope){$scopes.set(el,$scope)};this.getList=function(){return $parse($attrs.draggableContainer)($scope)}},link:function link($scope,$el){var drake=(0,_dragula2.default)({containers:$el.toArray(),moves:function moves(el,source,handle){var itemScope=$scopes.get(el);if(!itemScope||!("draggableItemCtrl"in itemScope)){return}return itemScope.draggableItemCtrl.moves(handle)}});var drakeEvents=["cancel","cloned","drag","dragend","drop","out","over","remove","shadow"];var prettifiedDrakeEvents={drag:"start",dragend:"end"};drakeEvents.forEach(function(type){drake.on(type,function(el){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return forwardEvent.apply(undefined,[type,el].concat(args))})});drake.on("drag",markDragging(true));drake.on("dragend",markDragging(false));drake.on("drop",drop);$scope.$on("$destroy",drake.destroy);$scope.drake=drake;function markDragging(isDragging){return function(el){var scope=$scopes.get(el);if(!scope)return;scope.isDragging=isDragging;scope.$apply()}}function forwardEvent(type,el){var name="drag-"+(prettifiedDrakeEvents[type]||type);var scope=$scopes.get(el);if(!scope)return;for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}scope.$broadcast.apply(scope,[name,el].concat(args))}function drop(el,target,source,sibling){var list=$scope.draggableContainerCtrl.getList();var itemScope=$scopes.get(el);if(!itemScope)return;var item=itemScope.draggableItemCtrl.getItem();var fromIndex=list.indexOf(item);var siblingIndex=getItemIndexFromElement(list,sibling);var toIndex=getTargetIndex(list,fromIndex,siblingIndex);(0,_collection.move)(list,item,toIndex)}function getTargetIndex(list,fromIndex,siblingIndex){if(siblingIndex===-1){return list.length-1}else if(fromIndex<siblingIndex){return siblingIndex-1}return siblingIndex}function getItemIndexFromElement(list,element){if(!element)return-1;var scope=$scopes.get(element);if(!scope)return;var item=scope.draggableItemCtrl.getItem();var index=list.indexOf(item);return index}}}})},,function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";var _jquery=__webpack_require__(11);var _jquery2=_interopRequireDefault(_jquery);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}_modules.uiModules.get("kibana").directive("draggableItem",function(){return{restrict:"A",require:"^draggableContainer",scope:true,controllerAs:"draggableItemCtrl",controller:function controller($scope,$attrs,$parse){var dragHandles=(0,_jquery2.default)();this.getItem=function(){return $parse($attrs.draggableItem)($scope)};this.registerHandle=function($el){dragHandles.push.apply(dragHandles,_toConsumableArray($el))};this.moves=function(handle){var $handle=(0,_jquery2.default)(handle);var $anywhereInParentChain=$handle.parents().addBack();var movable=dragHandles.is($anywhereInParentChain);return movable}},link:function link($scope,$el,attr,draggableController){draggableController.linkDraggableItem($el.get(0),$scope)}}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);_modules.uiModules.get("kibana").directive("draggableHandle",function(){return{restrict:"A",require:"^draggableItem",link:function link($scope,$el,attr,ctrl){ctrl.registerHandle($el);$el.addClass("gu-handle")}}})},function(module,exports){module.exports='\x3c!-- Local nav. --\x3e\n<kbn-top-nav name="visualize">\n  \x3c!-- Transcluded elements. --\x3e\n  <div data-transclude-slots>\n    \x3c!-- Title. --\x3e\n    <div\n      data-transclude-slot="topLeftCorner"\n    >\n      <div\n        class="kuiLocalTitle"\n        role="heading"\n        aria-level="1"\n        ng-if="listingController.showPluginBreadcrumbs"\n        i18n-id="kbn.visualize.listing.topLeftCornerTitle"\n        i18n-default-message="Visualize"\n      ></div>\n    </div>\n  </div>\n</kbn-top-nav>\n\n<div class="kuiViewContent kuiViewContent--constrainedWidth kuiViewContentItem"\n     data-test-subj="visualizeLandingPage"\n>\n  <div class="kuiViewContentItem kuiVerticalRhythm" ng-if="listingController.showLimitError">\n    <div class="kuiInfoPanel kuiInfoPanel--warning">\n      <div class="kuiInfoPanelBody">\n        <div class="kuiInfoPanelBody__message">\n          <span\n            i18n-id="kbn.visualize.listing.listingLimitHelpText"\n            i18n-default-message="You have {totalItems} visualizations, but your &quot;listingLimit&quot;\n                                  setting prevents the table below from displaying more than {listingLimit}.\n                                  You can change this setting under"\n            i18n-values="{\n              totalItems: listingController.totalItems,\n              listingLimit: listingController.listingLimit\n            }"\n            i18n-description="Part of composite text kbn.visualize.listing.listingLimitHelpText +\n                              kbn.visualize.listing.listingLimitAdvancedSettingsLinkText"\n          ></span>\n          <a\n            kbn-href="#/management/kibana/settings"\n            class="kuiLink"\n            i18n-id="kbn.visualize.listing.listingLimitAdvancedSettingsLinkText"\n            i18n-default-message="Advanced Settings"\n            i18n-description="Part of composite text kbn.visualize.listing.listingLimitHelpText +\n                              kbn.visualize.listing.listingLimitAdvancedSettingsLinkText"\n          ></a>.\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <visualize-listing-table\n    fetch-items="listingController.fetchItems"\n    delete-selected-items="listingController.deleteSelectedItems"\n    on-create-vis="listingController.createNewVis"\n  ></visualize-listing-table>\n\n  <new-vis-modal\n    is-open="listingController.showNewVisModal"\n    on-close="listingController.closeNewVisModal"\n    vis-types-registry="listingController.visTypeRegistry"\n  ></new-vis-modal>\n\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeListingController=VisualizeListingController;var _saved_object_registry=__webpack_require__(61);__webpack_require__(1669);__webpack_require__(569);var _modules=__webpack_require__(3);var _timefilter=__webpack_require__(19);var _vis_types=__webpack_require__(30);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n=__webpack_require__(14);var _visualize_listing_table=__webpack_require__(1675);var _new_vis_modal=__webpack_require__(343);var _visualize_constants=__webpack_require__(89);var _i18n2=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/visualize",["ngRoute","react"]);app.directive("visualizeListingTable",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_visualize_listing_table.VisualizeListingTable))});app.directive("newVisModal",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_new_vis_modal.NewVisModal))});function VisualizeListingController($injector,createNewVis){var _this=this;var Notifier=$injector.get("Notifier");var Private=$injector.get("Private");var config=$injector.get("config");var kbnUrl=$injector.get("kbnUrl");this.visTypeRegistry=Private(_vis_types.VisTypesRegistryProvider);_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();this.showNewVisModal=false;this.createNewVis=function(){_this.showNewVisModal=true};this.closeNewVisModal=function(){_this.showNewVisModal=false;if(createNewVis){kbnUrl.changePath(_visualize_constants.VisualizeConstants.LANDING_PAGE_PATH)}};if(createNewVis){this.createNewVis()}var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;var visualizationService=services.visualizations;var notify=new Notifier({location:"Visualize"});this.fetchItems=function(filter){var isLabsEnabled=config.get("visualize:enableLabs");return visualizationService.find(filter,config.get("savedObjects:listingLimit")).then(function(result){_this.totalItems=result.total;_this.showLimitError=result.total>config.get("savedObjects:listingLimit");_this.listingLimit=config.get("savedObjects:listingLimit");return result.hits.filter(function(result){return isLabsEnabled||result.type.stage!=="experimental"})})};this.deleteSelectedItems=function deleteSelectedItems(selectedIds){return visualizationService.delete(selectedIds).catch(function(error){return notify.error(error)})};_chrome2.default.breadcrumbs.set([{text:_i18n2.i18n.translate("kbn.visualize.visualizeListingBreadcrumbsTitle",{defaultMessage:"Visualize"})}]);config.watch("k7design",function(val){return _this.showPluginBreadcrumbs=!val})}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1670);__webpack_require__(1672)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _tool_bar_pager_text=__webpack_require__(1671);var _tool_bar_pager_text2=_interopRequireDefault(_tool_bar_pager_text);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerText",function(){return{restrict:"E",replace:true,template:_tool_bar_pager_text2.default,scope:{startItem:"=",endItem:"=",totalItems:"="},controllerAs:"toolBarPagerText",bindToController:true,controller:function ToolBarPagerTextController(){_classCallCheck(this,ToolBarPagerTextController)}}})},function(module,exports){module.exports='<div class="kuiToolBarText" data-test-subj="toolBarPagerText">\n  <span\n    i18n-id="common.ui.pagerControl.pagesCountLabel"\n    i18n-default-message="{startItem}&ndash;{endItem} of {totalItems}"\n    i18n-values="{\n      startItem: (toolBarPagerText.startItem | number),\n      endItem: (toolBarPagerText.endItem | number),\n      totalItems: (toolBarPagerText.totalItems | number)\n    }"\n  ></span>\n</div>'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _tool_bar_pager_buttons=__webpack_require__(1673);var _tool_bar_pager_buttons2=_interopRequireDefault(_tool_bar_pager_buttons);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var app=_modules.uiModules.get("kibana");app.directive("toolBarPagerButtons",function(){return{restrict:"E",replace:true,template:_tool_bar_pager_buttons2.default,scope:{hasNextPage:"=",hasPreviousPage:"=",onPageNext:"=",onPagePrevious:"="},controllerAs:"toolBarPagerButtons",bindToController:true,controller:function ToolBarPagerButtonsController(){var _this=this;_classCallCheck(this,ToolBarPagerButtonsController);this.nextPage=function(){_this.onPageNext()};this.previousPage=function(){_this.onPagePrevious()}}}})},function(module,exports){module.exports='<div class="kuiButtonGroup">\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.previousPage()"\n    ng-disabled="!toolBarPagerButtons.hasPreviousPage"\n    data-test-subj="btnPrevPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-left"></span>\n  </button>\n  <button\n    class="kuiButton kuiButton--basic kuiButton--icon"\n    ng-click="toolBarPagerButtons.nextPage()"\n    ng-disabled="!toolBarPagerButtons.hasNextPage"\n    data-test-subj="btnNextPage"\n  >\n    <span class="kuiButton__icon kuiIcon fa-chevron-right"></span>\n  </button>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _pager=__webpack_require__(570);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var app=_modules.uiModules.get("kibana");app.factory("pagerFactory",function(){return{create:function create(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return new(Function.prototype.bind.apply(_pager.Pager,[null].concat(_toConsumableArray(args))))}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizeListingTable=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react3=__webpack_require__(5);var _pager=__webpack_require__(569);var _no_visualizations_prompt=__webpack_require__(1676);var _components=__webpack_require__(115);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VisualizeListingTableUi=function(_Component){_inherits(VisualizeListingTableUi,_Component);function VisualizeListingTableUi(props){_classCallCheck(this,VisualizeListingTableUi);var _this=_possibleConstructorReturn(this,(VisualizeListingTableUi.__proto__||Object.getPrototypeOf(VisualizeListingTableUi)).call(this,props));_this.calculateItemsOnPage=function(){_this.items=_this.sortableProperties.sortItems(_this.items);_this.pager.setTotalItems(_this.items.length);var pageOfItems=_this.items.slice(_this.pager.startIndex,_this.pager.startIndex+_this.pager.pageSize);_this.setState({pageOfItems:pageOfItems,pageStartNumber:_this.pager.startItem})};_this.deselectAll=function(){_this.setState({selectedRowIds:[]})};_this.isAscending=function(name){return _this.sortableProperties.isAscendingByName(name)};_this.getSortedProperty=function(){return _this.sortableProperties.getSortedProperty()};_this.sortOn=function sortOn(propertyName){this.sortableProperties.sortOn(propertyName);this.setState({selectedRowIds:[],sortedColumn:this.sortableProperties.getSortedProperty().name});this.calculateItemsOnPage()};_this.fetchItems=function(filter){_this.setState({isFetchingItems:true,filter:filter});_this.debouncedFetch(filter)};_this.onNextPage=function(){_this.deselectAll();_this.pager.nextPage();_this.calculateItemsOnPage()};_this.onPreviousPage=function(){_this.deselectAll();_this.pager.previousPage();_this.calculateItemsOnPage()};_this.sortByTitle=function(){return _this.sortOn("title")};_this.sortByType=function(){return _this.sortOn("type")};_this.closeModal=function(){_this.setState({showDeleteModal:false})};_this.onDelete=function(){_this.setState({showDeleteModal:true})};_this.deleteSelectedItems=function(){_this.props.deleteSelectedItems(_this.state.selectedRowIds).then(function(){return _this.fetchItems(_this.state.filter)}).catch(function(){}).then(function(){return _this.deselectAll()}).then(function(){return _this.closeModal()})};_this.onItemSelectionChanged=function(newSelectedIds){_this.setState({selectedRowIds:newSelectedIds})};_this.onCreate=function(){_this.props.onCreateVis()};_this.state={selectedRowIds:[],pageOfItems:[],showDeleteModal:false,filter:"",sortedColumn:"title",pageStartNumber:1,isFetchingItems:false};_this.sortableProperties=new _eui.SortableProperties([{name:"title",getValue:function getValue(item){return item.title.toLowerCase()},isAscending:true},{name:"type",getValue:function getValue(item){return item.type.title.toLowerCase()},isAscending:true}],_this.state.sortedColumn);_this.items=[];_this.pager=new _pager.Pager(_this.items.length,20,1);_this.debouncedFetch=_lodash2.default.debounce(function(filter){_this.props.fetchItems(filter).then(function(items){if(filter===_this.state.filter){_this.setState({isFetchingItems:false,selectedRowIds:[]});_this.items=items;_this.calculateItemsOnPage()}})},300);return _this}_createClass(VisualizeListingTableUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.fetchItems(this.state.filter)}},{key:"getUrlForItem",value:function getUrlForItem(item){return"#/visualize/edit/"+item.id}},{key:"renderItemTypeIcon",value:function renderItemTypeIcon(item){var icon=void 0;if(item.type.image){icon=_react2.default.createElement("img",{className:"visListingTable__typeImage","aria-hidden":"true",alt:"",src:item.type.image})}else if(!item.type.image&&!item.type.icon){icon=_react2.default.createElement("span",{"aria-hidden":"true",className:"kuiStatusText__icon kuiIcon "+item.type.legacyIcon})}else{icon=_react2.default.createElement(_eui.EuiIcon,{className:"visListingTable__typeIcon","aria-hidden":"true",type:item.icon,size:"m"})}return icon}},{key:"renderHeader",value:function renderHeader(){return[{content:"Title",onSort:this.sortByTitle,isSorted:this.state.sortedColumn==="title",isSortAscending:this.sortableProperties.isAscendingByName("title")},{content:"Type",onSort:this.sortByType,isSorted:this.state.sortedColumn==="type",isSortAscending:this.sortableProperties.isAscendingByName("type")}]}},{key:"renderRowCells",value:function renderRowCells(item){var flaskHolder=void 0;if(item.type.shouldMarkAsExperimentalInUI()){flaskHolder=_react2.default.createElement("span",{className:"kuiIcon fa-flask ng-scope"}," ")}else{flaskHolder=_react2.default.createElement("span",null)}return[_react2.default.createElement("span",null,flaskHolder,_react2.default.createElement("a",{className:"kuiLink",href:this.getUrlForItem(item)},item.title)),_react2.default.createElement("span",{className:"kuiStatusText"},this.renderItemTypeIcon(item),item.type.title)]}},{key:"createRows",value:function createRows(){var _this2=this;return this.state.pageOfItems.map(function(item){return{id:item.id,cells:_this2.renderRowCells(item)}})}},{key:"renderConfirmDeleteModal",value:function renderConfirmDeleteModal(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:this.props.intl.formatMessage({id:"kbn.visualize.listing.deleteVisualizations.confirmModalTitle",defaultMessage:"Delete selected visualizations?"}),onCancel:this.closeModal,onConfirm:this.deleteSelectedItems,cancelButtonText:this.props.intl.formatMessage({id:"kbn.visualize.listing.deleteVisualizations.confirmModalCancelButtonText",defaultMessage:"Cancel"}),confirmButtonText:this.props.intl.formatMessage({id:"kbn.visualize.listing.deleteVisualizations.confirmModalConfirmButtonText",defaultMessage:"Delete"})},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.visualize.listing.deleteVisualizations.confirmModalText",defaultMessage:"You can't recover deleted visualizations."}))))}},{key:"renderToolBarActions",value:function renderToolBarActions(){return this.state.selectedRowIds.length>0?_react2.default.createElement(_components.KuiListingTableDeleteButton,{onDelete:this.onDelete,"aria-label":this.props.intl.formatMessage({id:"kbn.visualize.listing.deleteVisualizationsButtonAriaLabel",defaultMessage:"Delete selected visualizations"})}):_react2.default.createElement(_components.KuiListingTableCreateButton,{onCreate:this.onCreate,"data-test-subj":"createNewVis","aria-label":this.props.intl.formatMessage({id:"kbn.visualize.listing.createVisualizationButtonAriaLabel",defaultMessage:"Create new visualization"})})}},{key:"renderPager",value:function renderPager(){return _react2.default.createElement(_components.KuiPager,{startNumber:this.state.pageStartNumber,hasNextPage:this.pager.hasNextPage,hasPreviousPage:this.pager.hasPreviousPage,endNumber:this.pager.endItem,totalItems:this.items.length,onNextPage:this.onNextPage,onPreviousPage:this.onPreviousPage})}},{key:"renderPrompt",value:function renderPrompt(){if(this.state.isFetchingItems){return _react2.default.createElement(_components.KuiListingTableLoadingPrompt,null)}if(this.items.length===0){if(this.state.filter){return _react2.default.createElement(_components.KuiListingTableNoMatchesPrompt,null)}return _react2.default.createElement(_no_visualizations_prompt.NoVisualizationsPrompt,{onCreateVis:this.onCreate})}return null}},{key:"render",value:function render(){return _react2.default.createElement("div",null,this.state.showDeleteModal&&this.renderConfirmDeleteModal(),_react2.default.createElement(_components.KuiListingTable,{pager:this.renderPager(),toolBarActions:this.renderToolBarActions(),selectedRowIds:this.state.selectedRowIds,rows:this.createRows(),header:this.renderHeader(),onFilter:this.fetchItems,filter:this.state.filter,prompt:this.renderPrompt(),onItemSelectionChanged:this.onItemSelectionChanged}))}}]);return VisualizeListingTableUi}(_react.Component);VisualizeListingTableUi.propTypes={deleteSelectedItems:_propTypes2.default.func,fetchItems:_propTypes2.default.func,onCreateVis:_propTypes2.default.func.isRequired};var VisualizeListingTable=exports.VisualizeListingTable=(0,_react3.injectI18n)(VisualizeListingTableUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoVisualizationsPrompt=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _react3=__webpack_require__(5);var _components=__webpack_require__(115);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoVisualizationsPromptUi(_ref){var onCreateVis=_ref.onCreateVis,intl=_ref.intl;return _react2.default.createElement(_components.KuiEmptyTablePromptPanel,null,_react2.default.createElement(_components.KuiEmptyTablePrompt,{actions:_react2.default.createElement(_components.KuiButton,{onClick:onCreateVis,buttonType:"primary",icon:_react2.default.createElement(_components.KuiButtonIcon,{type:"create"})},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.visualize.listing.noVisualizations.createVisualizationButtonLabel",defaultMessage:"Create a visualization"})),message:intl.formatMessage({id:"kbn.visualize.listing.noVisualizationsText",defaultMessage:"Looks like you don't have any visualizations. Let's create some!"})}))}var NoVisualizationsPrompt=exports.NoVisualizationsPrompt=(0,_react3.injectI18n)(NoVisualizationsPromptUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _type_selection=__webpack_require__(1678);Object.defineProperty(exports,"TypeSelection",{enumerable:true,get:function get(){return _type_selection.TypeSelection}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TypeSelection=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _i18n=__webpack_require__(8);var _react=__webpack_require__(5);var _lodash=__webpack_require__(0);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _eui=__webpack_require__(2);var _new_vis_help=__webpack_require__(1679);var _vis_help_text=__webpack_require__(1680);var _vis_type_icon=__webpack_require__(1681);var _memoize=__webpack_require__(428);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var TypeSelection=function(_super){tslib_1.__extends(TypeSelection,_super);function TypeSelection(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={highlightedType:null,query:""};_this.getFilteredVisTypes=(0,_memoize.memoizeLast)(_this.filteredVisTypes);_this.renderVisType=function(visType){var stage={};if(visType.stage==="experimental"){stage={betaBadgeLabel:_i18n.i18n.translate("kbn.visualize.newVisWizard.experimentalTitle",{defaultMessage:"Experimental"}),betaBadgeTooltipContent:_i18n.i18n.translate("kbn.visualize.newVisWizard.experimentalTooltip",{defaultMessage:"This visualization is experimental."})}}var isDisabled=_this.state.query!==""&&!visType.highlighted;return _react3.default.createElement(_eui.EuiKeyPadMenuItemButton,tslib_1.__assign({key:visType.name,label:_react3.default.createElement("span",{"data-test-subj":"visTypeTitle"},visType.title),onClick:function onClick(){return _this.props.onVisTypeSelected(visType)},onFocus:function onFocus(){return _this.highlightType(visType)},onMouseEnter:function onMouseEnter(){return _this.highlightType(visType)},onMouseLeave:function onMouseLeave(){return _this.highlightType(null)},onBlur:function onBlur(){return _this.highlightType(null)},className:"visNewVisDialog__type","data-test-subj":"visType-"+visType.name,"data-vis-stage":visType.stage,disabled:isDisabled,"aria-describedby":"visTypeDescription-"+visType.name},stage),_react3.default.createElement(_vis_type_icon.VisTypeIcon,{visType:visType}))};_this.onQueryChange=function(ev){_this.setState({query:ev.target.value})};return _this}TypeSelection.prototype.render=function(){var _a=this.state,query=_a.query,highlightedType=_a.highlightedType;var visTypes=this.getFilteredVisTypes(this.props.visTypesRegistry,query);return _react3.default.createElement(_react3.default.Fragment,null,_react3.default.createElement(_eui.EuiModalHeader,null,_react3.default.createElement(_eui.EuiModalHeaderTitle,null,_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.title",defaultMessage:"New Visualization"}))),_react3.default.createElement("div",{className:"visNewVisDialog__body"},_react3.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xl"},_react3.default.createElement(_eui.EuiFlexItem,null,_react3.default.createElement(_eui.EuiFlexGroup,{className:"visNewVisDialog__list",direction:"column",gutterSize:"none",responsive:false},_react3.default.createElement(_eui.EuiFlexItem,{grow:false,className:"visNewVisDialog__searchWrapper"},_react3.default.createElement(_eui.EuiFieldSearch,{placeholder:"Filter",value:query,onChange:this.onQueryChange,fullWidth:true,"data-test-subj":"filterVisType","aria-label":_i18n.i18n.translate("kbn.visualize.newVisWizard.filterVisTypeAriaLabel",{defaultMessage:"Filter for a visualization type"})})),_react3.default.createElement(_eui.EuiFlexItem,{grow:1,className:"visNewVisDialog__typesWrapper"},_react3.default.createElement(_eui.EuiScreenReaderOnly,null,_react3.default.createElement("span",{"aria-live":"polite"},query&&_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.resultsFound",defaultMessage:"{resultCount} {resultCount, plural,\n                            one {type}\n                            other {types}\n                          } found",values:{resultCount:visTypes.filter(function(type){return type.highlighted}).length}}))),_react3.default.createElement(_eui.EuiKeyPadMenu,{className:"visNewVisDialog__types","data-test-subj":"visNewDialogTypes"},visTypes.map(this.renderVisType))))),_react3.default.createElement(_eui.EuiFlexItem,{className:"visNewVisDialog__description",grow:false},highlightedType?_react3.default.createElement(_vis_help_text.VisHelpText,{visType:highlightedType}):_react3.default.createElement(_react3.default.Fragment,null,_react3.default.createElement(_eui.EuiTitle,{size:"s"},_react3.default.createElement("h2",null,_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.selectVisType",defaultMessage:"Select a visualization type"}))),_react3.default.createElement(_eui.EuiSpacer,{size:"m"}),_react3.default.createElement(_new_vis_help.NewVisHelp,null))))))};TypeSelection.prototype.filteredVisTypes=function(visTypes,query){var _this=this;var types=visTypes.filter(function(type){if(!_this.props.showExperimental&&type.stage==="experimental"){return false}if(type.hidden){return false}return true});var entries;if(!query){entries=types.map(function(type){return tslib_1.__assign({},type,{highlighted:false})})}else{var q_1=query.toLowerCase();entries=types.map(function(type){var matchesQuery=type.name.toLowerCase().includes(q_1)||type.title.toLowerCase().includes(q_1)||typeof type.description==="string"&&type.description.toLowerCase().includes(q_1);return tslib_1.__assign({},type,{highlighted:matchesQuery})})}return(0,_lodash.sortByOrder)(entries,["highlighted","title"],["desc","asc"])};TypeSelection.prototype.highlightType=function(visType){this.setState({highlightedType:visType})};return TypeSelection}(_react3.default.Component);exports.TypeSelection=TypeSelection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NewVisHelp=undefined;var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NewVisHelp=exports.NewVisHelp=function NewVisHelp(){return _react3.default.createElement(_eui.EuiText,null,_react3.default.createElement("p",null,_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.helpText",defaultMessage:"Start creating your visualization by selecting a type for that visualization."})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisHelpText=undefined;var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VisHelpText=exports.VisHelpText=function VisHelpText(_a){var visType=_a.visType;return _react3.default.createElement(_react3.default.Fragment,null,_react3.default.createElement(_eui.EuiTitle,{size:"s"},_react3.default.createElement("h2",null,visType.title)),_react3.default.createElement(_eui.EuiSpacer,{size:"s"}),_react3.default.createElement("div",{id:"visTypeDescription-"+visType.name},visType.stage==="experimental"&&_react3.default.createElement(_react3.default.Fragment,null,_react3.default.createElement(_eui.EuiText,null,_react3.default.createElement("em",null,_react3.default.createElement(_react.FormattedMessage,{id:"kbn.visualize.newVisWizard.experimentalDescription",defaultMessage:"This visualization is experimental. The design and implementation\n                    are less mature than stable visualizations and might be subject to change."}))),_react3.default.createElement(_eui.EuiSpacer,{size:"s"})),_react3.default.createElement(_eui.EuiText,null,visType.description)))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VisTypeIcon=undefined;var _eui=__webpack_require__(2);var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VisTypeIcon=exports.VisTypeIcon=function VisTypeIcon(_a){var visType=_a.visType;var legacyIconClass=(0,_classnames2.default)("kuiIcon","visNewVisDialog__typeLegacyIcon",visType.legacyIcon);return _react2.default.createElement(_react2.default.Fragment,null,visType.image&&_react2.default.createElement("img",{src:visType.image,"aria-hidden":"true",role:"presentation",alt:"",className:"visNewVisDialog__typeImage"}),!visType.image&&visType.legacyIcon&&_react2.default.createElement("span",{className:legacyIconClass}),!visType.image&&!visType.legacyIcon&&_react2.default.createElement(_eui.EuiIcon,{type:visType.icon||"empty",size:"l",color:"secondary","aria-hidden":"true"}))}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1683);__webpack_require__(489);__webpack_require__(1740);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n=__webpack_require__(14);var _notify=__webpack_require__(10);var _dashboard_app=__webpack_require__(1741);var _dashboard_app2=_interopRequireDefault(_dashboard_app);var _dashboard_listing_ng_wrapper=__webpack_require__(1742);var _dashboard_listing_ng_wrapper2=_interopRequireDefault(_dashboard_listing_ng_wrapper);var _dashboard_constants=__webpack_require__(58);var _errors=__webpack_require__(20);var _feature_catalogue=__webpack_require__(39);var _saved_objects=__webpack_require__(24);var _persisted_log=__webpack_require__(51);var _saved_object_registry=__webpack_require__(61);var _dashboard_listing=__webpack_require__(1743);var _modules=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/dashboard",["ngRoute","react"]);app.directive("dashboardListing",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_dashboard_listing.DashboardListing))});function createNewDashboardCtrl($scope,i18n){$scope.visitVisualizeAppLinkText=i18n("kbn.dashboard.visitVisualizeAppLinkText",{defaultMessage:"visit the Visualize app"})}_routes2.default.defaults(/dashboard/,{requireDefaultIndex:true}).when(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,{template:_dashboard_listing_ng_wrapper2.default,controller:function controller($injector,$location,$scope,Private,config,i18n){var services=Private(_saved_object_registry.SavedObjectRegistryProvider).byLoaderPropertiesName;var dashboardConfig=$injector.get("dashboardConfig");$scope.listingLimit=config.get("savedObjects:listingLimit");$scope.find=function(search){return services.dashboards.find(search,$scope.listingLimit)};$scope.delete=function(ids){return services.dashboards.delete(ids)};$scope.hideWriteControls=dashboardConfig.getHideWriteControls();$scope.initialFilter=$location.search().filter||_dashboard_listing.EMPTY_FILTER;_chrome2.default.breadcrumbs.set([{text:i18n("kbn.dashboard.dashboardBreadcrumbsTitle",{defaultMessage:"Dashboards"})}])},resolve:{dash:function dash($route,Private,redirectWhenMissing,kbnUrl){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var title=$route.current.params.title;if(title){return savedObjectsClient.find({search:'"'+title+'"',search_fields:"title",type:"dashboard"}).then(function(results){var matchingDashboards=results.savedObjects.filter(function(dashboard){return dashboard.attributes.title.toLowerCase()===title.toLowerCase()});if(matchingDashboards.length===1){kbnUrl.redirect((0,_dashboard_constants.createDashboardEditUrl)(matchingDashboards[0].id))}else{kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH+'?filter="'+title+'"')}throw _routes2.default.WAIT_FOR_URL_CHANGE_TOKEN}).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}}).when(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{template:_dashboard_app2.default,controller:createNewDashboardCtrl,resolve:{dash:function dash(savedDashboards,redirectWhenMissing){return savedDashboards.get().catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}}).when((0,_dashboard_constants.createDashboardEditUrl)(":id"),{template:_dashboard_app2.default,controller:createNewDashboardCtrl,resolve:{dash:function dash(savedDashboards,Notifier,$route,$location,redirectWhenMissing,kbnUrl,AppState,i18n){var id=$route.current.params.id;return savedDashboards.get(id).then(function(savedDashboard){_persisted_log.recentlyAccessed.add(savedDashboard.getFullPath(),savedDashboard.title,id);return savedDashboard}).catch(function(error){if(error instanceof _errors.InvalidJSONProperty){_notify.toastNotifications.addDanger(error.message);kbnUrl.redirect(_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH);return}if(error instanceof _errors.SavedObjectNotFound&&id==="create"){kbnUrl.redirect(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{},new AppState);_notify.toastNotifications.addWarning(i18n("kbn.dashboard.urlWasRemovedInSixZeroWarningMessage",{defaultMessage:'The url "dashboard/create" was removed in 6.0. Please update your bookmarks.'}))}else{throw error}}).catch(redirectWhenMissing({dashboard:_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}))}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"dashboard",title:i18n("kbn.dashboard.featureCatalogue.dashboardTitle",{defaultMessage:"Dashboard"}),description:i18n("kbn.dashboard.featureCatalogue.dashboardDescription",{defaultMessage:"Display and share a collection of visualizations and saved searches."}),icon:"dashboardApp",path:"/app/kibana#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH,showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.DATA}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _modules=__webpack_require__(3);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n=__webpack_require__(14);var _theme=__webpack_require__(515);var _notify=__webpack_require__(10);__webpack_require__(338);var _panel_actions_store=__webpack_require__(571);var _dashboard_strings=__webpack_require__(1684);var _dashboard_view_mode=__webpack_require__(36);var _top_nav_ids=__webpack_require__(572);var _confirm_modal=__webpack_require__(333);var _query_filter=__webpack_require__(54);var _doc_title=__webpack_require__(91);var _get_top_nav_config=__webpack_require__(1685);var _dashboard_constants=__webpack_require__(58);var _dashboard_state_manager=__webpack_require__(1686);var _lib=__webpack_require__(579);var _show_clone_modal=__webpack_require__(1719);var _show_saved_object_save_modal=__webpack_require__(341);var _save_modal=__webpack_require__(1721);var _show_add_panel=__webpack_require__(1722);var _show_options_popover=__webpack_require__(1724);var _wizard=__webpack_require__(1726);var _share=__webpack_require__(340);var _migrate_legacy_query=__webpack_require__(244);var _filter=__webpack_require__(566);var filterActions=_interopRequireWildcard(_filter);var _filter_manager=__webpack_require__(251);var _embeddable_factories_registry=__webpack_require__(250);var _embeddable=__webpack_require__(42);var _vis_types=__webpack_require__(30);var _timefilter=__webpack_require__(19);var _state_hashing=__webpack_require__(78);var _documentation_links=__webpack_require__(50);var _dashboard_viewport_provider=__webpack_require__(1728);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("app/dashboard",["elasticsearch","ngRoute","react","kibana/courier","kibana/config"]);app.directive("dashboardViewportProvider",function(reactDirective){return reactDirective((0,_i18n.wrapInI18nContext)(_dashboard_viewport_provider.DashboardViewportProvider))});app.directive("dashboardApp",function($injector){var courier=$injector.get("courier");var AppState=$injector.get("AppState");var kbnUrl=$injector.get("kbnUrl");var confirmModal=$injector.get("confirmModal");var config=$injector.get("config");var Private=$injector.get("Private");return{restrict:"E",controllerAs:"dashboardApp",controller:function controller($scope,$rootScope,$route,$routeParams,$window,getAppState,dashboardConfig,localStorage,i18n){var _this=this;var filterManager=Private(_filter_manager.FilterManagerProvider);var filterBar=Private(_query_filter.FilterBarQueryFilterProvider);var docTitle=Private(_doc_title.DocTitleProvider);var embeddableFactories=Private(_embeddable_factories_registry.EmbeddableFactoriesRegistryProvider);var panelActionsRegistry=Private(_embeddable.ContextMenuActionsRegistryProvider);var getUnhashableStates=Private(_state_hashing.getUnhashableStatesProvider);var shareContextMenuExtensions=Private(_share.ShareContextMenuExtensionsRegistryProvider);_panel_actions_store.panelActionsStore.initializeFromRegistry(panelActionsRegistry);var visTypes=Private(_vis_types.VisTypesRegistryProvider);$scope.getEmbeddableFactory=function(panelType){return embeddableFactories.byName[panelType]};var dash=$scope.dash=$route.current.locals.dash;if(dash.id){docTitle.change(dash.title)}var dashboardStateManager=new _dashboard_state_manager.DashboardStateManager({savedDashboard:dash,AppState:AppState,hideWriteControls:dashboardConfig.getHideWriteControls(),addFilter:function addFilter(_ref){var field=_ref.field,value=_ref.value,operator=_ref.operator,index=_ref.index;filterActions.addFilter(field,value,operator,index,dashboardStateManager.getAppState(),filterManager)}});$scope.getDashboardState=function(){return dashboardStateManager};$scope.appState=dashboardStateManager.getAppState();if(dashboardStateManager.getIsTimeSavedWithDashboard()&&!getAppState.previouslyStored()){dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter,config.get("timepicker:quickRanges"))}var updateState=function updateState(){$scope.model={query:dashboardStateManager.getQuery(),timeRestore:dashboardStateManager.getTimeRestore(),title:dashboardStateManager.getTitle(),description:dashboardStateManager.getDescription()};$scope.panels=dashboardStateManager.getPanels();$scope.indexPatterns=dashboardStateManager.getPanelIndexPatterns()};this.appStatus={dirty:!dash.id};dashboardStateManager.registerChangeListener(function(status){_this.appStatus.dirty=status.dirty||!dash.id;updateState()});dashboardStateManager.applyFilters(dashboardStateManager.getQuery()||{query:"",language:localStorage.get("kibana.userQueryLanguage")||config.get("search:queryLanguage")},filterBar.getFilters());_timefilter.timefilter.enableAutoRefreshSelector();_timefilter.timefilter.enableTimeRangeSelector();updateState();$scope.refresh=function(){$rootScope.$broadcast("fetch");courier.fetch()};dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());$scope.expandedPanel=null;$scope.dashboardViewMode=dashboardStateManager.getViewMode();$scope.landingPageUrl=function(){return"#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH};$scope.hasExpandedPanel=function(){return $scope.expandedPanel!==null};$scope.getDashTitle=function(){return(0,_dashboard_strings.getDashboardTitle)(dashboardStateManager.getTitle(),dashboardStateManager.getViewMode(),dashboardStateManager.getIsDirty(_timefilter.timefilter))};var updateBreadcrumbs=function updateBreadcrumbs(){_chrome2.default.breadcrumbs.set([{text:i18n("kbn.dashboard.dashboardAppBreadcrumbsTitle",{defaultMessage:"Dashboard"}),href:$scope.landingPageUrl()},{text:$scope.getDashTitle()}])};updateBreadcrumbs();dashboardStateManager.registerChangeListener(updateBreadcrumbs);config.watch("k7design",function(val){return $scope.showPluginBreadcrumbs=!val});$scope.newDashboard=function(){kbnUrl.change(_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,{})};$scope.saveState=function(){return dashboardStateManager.saveState()};$scope.getShouldShowEditHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsEditMode()&&!dashboardConfig.getHideWriteControls()};$scope.getShouldShowViewHelp=function(){return!dashboardStateManager.getPanels().length&&dashboardStateManager.getIsViewMode()&&!dashboardConfig.getHideWriteControls()};$scope.minimizeExpandedPanel=function(){$scope.expandedPanel=null};$scope.expandPanel=function(panelIndex){$scope.expandedPanel=dashboardStateManager.getPanels().find(function(panel){return panel.panelIndex===panelIndex})};$scope.updateQueryAndFetch=function(_ref2){var query=_ref2.query;var oldQuery=$scope.model.query;if(_lodash2.default.isEqual(oldQuery,query)){dashboardStateManager.requestReload()}else{$scope.model.query=query;dashboardStateManager.applyFilters($scope.model.query,filterBar.getFilters())}$scope.refresh()};updateTheme();$scope.indexPatterns=[];$scope.onPanelRemoved=function(panelIndex){dashboardStateManager.removePanel(panelIndex);$scope.indexPatterns=dashboardStateManager.getPanelIndexPatterns()};$scope.$watch("model.query",function(newQuery){var query=(0,_migrate_legacy_query.migrateLegacyQuery)(newQuery);$scope.updateQueryAndFetch({query:query})});$scope.$listenAndDigestAsync(_timefilter.timefilter,"fetch",function(){dashboardStateManager.handleTimeChange(_timefilter.timefilter.getTime());$scope.refresh()});function updateViewMode(newMode){$scope.topNavMenu=(0,_get_top_nav_config.getTopNavConfig)(newMode,navActions,dashboardConfig.getHideWriteControls());dashboardStateManager.switchViewMode(newMode);$scope.dashboardViewMode=newMode}var onChangeViewMode=function onChangeViewMode(newMode){var isPageRefresh=newMode===dashboardStateManager.getViewMode();var isLeavingEditMode=!isPageRefresh&&newMode===_dashboard_view_mode.DashboardViewMode.VIEW;var willLoseChanges=isLeavingEditMode&&dashboardStateManager.getIsDirty(_timefilter.timefilter);if(!willLoseChanges){updateViewMode(newMode);return}function revertChangesAndExitEditMode(){dashboardStateManager.resetState();kbnUrl.change(dash.id?(0,_dashboard_constants.createDashboardEditUrl)(dash.id):_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW);if(dashboardStateManager.getIsTimeSavedWithDashboard()){dashboardStateManager.syncTimefilterWithDashboard(_timefilter.timefilter,config.get("timepicker:quickRanges"))}}confirmModal(i18n("kbn.dashboard.changeViewModeConfirmModal.discardChangesDescription",{defaultMessage:"Once you discard your changes, there's no getting them back."}),{onConfirm:revertChangesAndExitEditMode,onCancel:_lodash2.default.noop,confirmButtonText:i18n("kbn.dashboard.changeViewModeConfirmModal.confirmButtonLabel",{defaultMessage:"Discard changes"}),cancelButtonText:i18n("kbn.dashboard.changeViewModeConfirmModal.cancelButtonLabel",{defaultMessage:"Continue editing"}),defaultFocusedButton:_confirm_modal.ConfirmationButtonTypes.CANCEL,title:i18n("kbn.dashboard.changeViewModeConfirmModal.discardChangesTitle",{defaultMessage:"Discard changes to dashboard?"})})};function save(saveOptions){return(0,_lib.saveDashboard)(_angular2.default.toJson,_timefilter.timefilter,dashboardStateManager,saveOptions).then(function(id){if(id){_notify.toastNotifications.addSuccess({title:i18n("kbn.dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:dash.title}}),"data-test-subj":"saveDashboardSuccess"});if(dash.id!==$routeParams.id){kbnUrl.change((0,_dashboard_constants.createDashboardEditUrl)(dash.id))}else{docTitle.change(dash.lastSavedTitle);updateViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)}}return{id:id}}).catch(function(error){_notify.toastNotifications.addDanger({title:i18n("kbn.dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:dash.title,errorMessage:error.message}}),"data-test-subj":"saveDashboardFailure"});return{error:error}})}$scope.showFilterBar=function(){return filterBar.getFilters().length>0||!dashboardStateManager.getFullScreenMode()};$scope.showAddPanel=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click(_top_nav_ids.TopNavIds.ADD)};$scope.enterEditMode=function(){dashboardStateManager.setFullScreenMode(false);$scope.kbnTopNav.click("edit")};var navActions={};navActions[_top_nav_ids.TopNavIds.DOCUMENTATION]=function(){return $window.open(_documentation_links.documentationLinks.kibana.dashboard)};navActions[_top_nav_ids.TopNavIds.FULL_SCREEN]=function(){return dashboardStateManager.setFullScreenMode(true)};navActions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.VIEW)};navActions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]=function(){return onChangeViewMode(_dashboard_view_mode.DashboardViewMode.EDIT)};navActions[_top_nav_ids.TopNavIds.SAVE]=function(){var currentTitle=dashboardStateManager.getTitle();var currentDescription=dashboardStateManager.getDescription();var currentTimeRestore=dashboardStateManager.getTimeRestore();var onSave=function onSave(_ref3){var newTitle=_ref3.newTitle,newDescription=_ref3.newDescription,newCopyOnSave=_ref3.newCopyOnSave,newTimeRestore=_ref3.newTimeRestore,isTitleDuplicateConfirmed=_ref3.isTitleDuplicateConfirmed,onTitleDuplicate=_ref3.onTitleDuplicate;dashboardStateManager.setTitle(newTitle);dashboardStateManager.setDescription(newDescription);dashboardStateManager.savedDashboard.copyOnSave=newCopyOnSave;dashboardStateManager.setTimeRestore(newTimeRestore);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(_ref4){var id=_ref4.id,error=_ref4.error;if(!id||error){dashboardStateManager.setTitle(currentTitle);dashboardStateManager.setDescription(currentDescription);dashboardStateManager.setTimeRestore(currentTimeRestore)}return{id:id,error:error}})};var dashboardSaveModal=_react2.default.createElement(_save_modal.DashboardSaveModal,{onSave:onSave,onClose:function onClose(){},title:currentTitle,description:currentDescription,timeRestore:currentTimeRestore,showCopyOnSave:dash.id?true:false});(0,_show_saved_object_save_modal.showSaveModal)(dashboardSaveModal)};navActions[_top_nav_ids.TopNavIds.CLONE]=function(){var currentTitle=dashboardStateManager.getTitle();var onClone=function onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){dashboardStateManager.savedDashboard.copyOnSave=true;dashboardStateManager.setTitle(newTitle);var saveOptions={confirmOverwrite:false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate};return save(saveOptions).then(function(_ref5){var id=_ref5.id,error=_ref5.error;if(!id||error){dashboardStateManager.setTitle(currentTitle)}return{id:id,error:error}})};(0,_show_clone_modal.showCloneModal)(onClone,currentTitle)};navActions[_top_nav_ids.TopNavIds.ADD]=function(){var addNewVis=function addNewVis(){(0,_wizard.showNewVisModal)(visTypes,{editorParams:[_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM]})};(0,_show_add_panel.showAddPanel)(dashboardStateManager.addNewPanel,addNewVis,visTypes)};navActions[_top_nav_ids.TopNavIds.OPTIONS]=function(menuItem,navController,anchorElement){(0,_show_options_popover.showOptionsPopover)({anchorElement:anchorElement,darkTheme:dashboardStateManager.getDarkTheme(),onDarkThemeChange:function onDarkThemeChange(isChecked){dashboardStateManager.setDarkTheme(isChecked);updateTheme()},useMargins:dashboardStateManager.getUseMargins(),onUseMarginsChange:function onUseMarginsChange(isChecked){dashboardStateManager.setUseMargins(isChecked)},hidePanelTitles:dashboardStateManager.getHidePanelTitles(),onHidePanelTitlesChange:function onHidePanelTitlesChange(isChecked){dashboardStateManager.setHidePanelTitles(isChecked)}})};navActions[_top_nav_ids.TopNavIds.SHARE]=function(menuItem,navController,anchorElement){(0,_share.showShareContextMenu)({anchorElement:anchorElement,allowEmbed:true,getUnhashableStates:getUnhashableStates,objectId:dash.id,objectType:"dashboard",shareContextMenuExtensions:shareContextMenuExtensions,sharingData:{title:dash.title},isDirty:dashboardStateManager.getIsDirty()})};updateViewMode(dashboardStateManager.getViewMode());$scope.$listen(filterBar,"update",function(){dashboardStateManager.applyFilters($scope.model.query,filterBar.getFilters())});$scope.$listen(filterBar,"fetch",$scope.refresh);$scope.$on("$destroy",function(){dashboardStateManager.destroy();setLightTheme()});function updateTheme(){dashboardStateManager.getDarkTheme()?setDarkTheme():setLightTheme()}function setDarkTheme(){_chrome2.default.removeApplicationClass(["theme-light"]);_chrome2.default.addApplicationClass("theme-dark");(0,_theme.applyTheme)("dark")}function setLightTheme(){_chrome2.default.removeApplicationClass(["theme-dark"]);_chrome2.default.addApplicationClass("theme-light");(0,_theme.applyTheme)("light")}if($route.current.params&&$route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM]){dashboardStateManager.addNewPanel($route.current.params[_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM],"visualization");kbnUrl.removeParam(_dashboard_constants.DashboardConstants.ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM);kbnUrl.removeParam(_dashboard_constants.DashboardConstants.NEW_VISUALIZATION_ID_PARAM)}}}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardTitle=getDashboardTitle;var _i18n=__webpack_require__(8);var _dashboard_view_mode=__webpack_require__(36);function getDashboardTitle(title,viewMode,isDirty){var isEditMode=viewMode===_dashboard_view_mode.DashboardViewMode.EDIT;var displayTitle=void 0;if(isEditMode&&isDirty){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardUnsavedEditTitle",{defaultMessage:"Editing {title} (unsaved)",values:{title:title}})}else if(isEditMode){displayTitle=_i18n.i18n.translate("kbn.dashboard.strings.dashboardEditTitle",{defaultMessage:"Editing {title}",values:{title:title}})}else{displayTitle=title}return displayTitle}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTopNavConfig=getTopNavConfig;var _i18n=__webpack_require__(8);var _dashboard_view_mode=__webpack_require__(36);var _top_nav_ids=__webpack_require__(572);function getTopNavConfig(dashboardMode,actions,hideWriteControls){switch(dashboardMode){case _dashboard_view_mode.DashboardViewMode.VIEW:return hideWriteControls?[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN])]:[getFullScreenConfig(actions[_top_nav_ids.TopNavIds.FULL_SCREEN]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE]),getCloneConfig(actions[_top_nav_ids.TopNavIds.CLONE]),getEditConfig(actions[_top_nav_ids.TopNavIds.ENTER_EDIT_MODE]),getDocumentationConfig(actions[_top_nav_ids.TopNavIds.DOCUMENTATION])];case _dashboard_view_mode.DashboardViewMode.EDIT:return[getSaveConfig(actions[_top_nav_ids.TopNavIds.SAVE]),getViewConfig(actions[_top_nav_ids.TopNavIds.EXIT_EDIT_MODE]),getAddConfig(actions[_top_nav_ids.TopNavIds.ADD]),getOptionsConfig(actions[_top_nav_ids.TopNavIds.OPTIONS]),getShareConfig(actions[_top_nav_ids.TopNavIds.SHARE]),getDocumentationConfig(actions[_top_nav_ids.TopNavIds.DOCUMENTATION])];default:return[]}}function getFullScreenConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenButtonAriaLabel",{defaultMessage:"full screen"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.fullScreenConfigDescription",{defaultMessage:"Full Screen Mode"}),testId:"dashboardFullScreenMode",run:action}}function getEditConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.editButtonAriaLabel",{defaultMessage:"edit"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.editConfigDescription",{defaultMessage:"Switch to edit mode"}),testId:"dashboardEditMode",run:action}}function getSaveConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.saveButtonAriaLabel",{defaultMessage:"save"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.saveConfigDescription",{defaultMessage:"Save your dashboard"}),testId:"dashboardSaveMenuItem",run:action}}function getViewConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.cancelButtonAriaLabel",{defaultMessage:"cancel"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.viewConfigDescription",{defaultMessage:"Cancel editing and switch to view-only mode"}),testId:"dashboardViewOnlyMode",run:action}}function getCloneConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.cloneButtonAriaLabel",{defaultMessage:"clone"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.cloneConfigDescription",{defaultMessage:"Create a copy of your dashboard"}),testId:"dashboardClone",run:action}}function getAddConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.addButtonAriaLabel",{defaultMessage:"add"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.addConfigDescription",{defaultMessage:"Add a panel to the dashboard"}),testId:"dashboardAddPanelButton",run:action}}function getShareConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.shareButtonAriaLabel",{defaultMessage:"share"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.shareConfigDescription",{defaultMessage:"Share Dashboard"}),testId:"shareTopNavButton",run:action}}function getOptionsConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNave.optionsButtonAriaLabel",{defaultMessage:"options"}),description:_i18n.i18n.translate("kbn.dashboard.topNave.optionsConfigDescription",{defaultMessage:"Options"}),testId:"dashboardOptionsButton",run:action}}function getDocumentationConfig(action){return{key:_i18n.i18n.translate("kbn.dashboard.topNav.documentationButtonKey",{defaultMessage:"documentation"}),description:_i18n.i18n.translate("kbn.dashboard.topNav.documentationButtonDescription",{defaultMessage:"Documentation"}),run:action}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardStateManager=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _i18n=__webpack_require__(8);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _dashboard_view_mode=__webpack_require__(36);var _filter_utils=__webpack_require__(344);var _panel_utils=__webpack_require__(573);var _store=__webpack_require__(574);var _actions=__webpack_require__(60);var _state_monitor_factory=__webpack_require__(339);var _panel=__webpack_require__(578);var _lib=__webpack_require__(579);var _selectors=__webpack_require__(577);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var DashboardStateManager=exports.DashboardStateManager=function(){function DashboardStateManager(_ref){var _this=this;var savedDashboard=_ref.savedDashboard,AppState=_ref.AppState,hideWriteControls=_ref.hideWriteControls,addFilter=_ref.addFilter;_classCallCheck(this,DashboardStateManager);this.addNewPanel=function(id,type){var maxPanelIndex=_panel_utils.PanelUtils.getMaxPanelIndex(_this.getPanels());var newPanel=(0,_panel.createPanelState)(id,type,maxPanelIndex,_this.getPanels());_this.getPanels().push(newPanel);_this.saveState()};this.savedDashboard=savedDashboard;this.hideWriteControls=hideWriteControls;this.addFilter=addFilter;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.appState=new AppState(this.stateDefaults);(0,_lib.migrateAppState)(this.appState);this.isDirty=false;this.lastSavedDashboardFilters=this.getFilterState();this.panelIndexPatternMapping={};_panel_utils.PanelUtils.initPanelIndexes(this.getPanels());this.createStateMonitor();_store.store.dispatch((0,_actions.closeContextMenu)());_store.store.dispatch((0,_actions.minimizePanel)());this._pushAppStateChangesToStore();this.changeListeners=[];this.unsubscribe=_store.store.subscribe(function(){return _this._handleStoreChanges()});this.stateMonitor.onChange(function(status){_this.changeListeners.forEach(function(listener){return listener(status)});_this._pushAppStateChangesToStore()})}_createClass(DashboardStateManager,[{key:"registerChangeListener",value:function registerChangeListener(callback){this.changeListeners.push(callback)}},{key:"_areStoreAndAppStatePanelsEqual",value:function _areStoreAndAppStatePanelsEqual(){var state=_store.store.getState();var storePanels=(0,_selectors.getPanels)(_store.store.getState());var appStatePanels=this.getPanels();if(Object.values(storePanels).length!==appStatePanels.length){return false}return appStatePanels.every(function(appStatePanel){var storePanel=(0,_selectors.getPanel)(state,appStatePanel.panelIndex);return _lodash2.default.isEqual(appStatePanel,storePanel)})}},{key:"handleTimeChange",value:function handleTimeChange(newTimeFilter){_store.store.dispatch((0,_actions.updateTimeRange)({from:_filter_utils.FilterUtils.convertTimeToUTCString(newTimeFilter.from),to:_filter_utils.FilterUtils.convertTimeToUTCString(newTimeFilter.to),mode:newTimeFilter.mode}))}},{key:"_pushAppStateChangesToStore",value:function _pushAppStateChangesToStore(){if(!this._areStoreAndAppStatePanelsEqual()){var panelsMap=this.getPanels().reduce(function(acc,panel){acc[panel.panelIndex]=_lodash2.default.cloneDeep(panel);return acc},{});_store.store.dispatch((0,_actions.setPanels)(panelsMap))}var state=_store.store.getState();if((0,_selectors.getTitle)(state)!==this.getTitle()){_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()))}if((0,_selectors.getDescription)(state)!==this.getDescription()){_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()))}if((0,_selectors.getViewMode)(state)!==this.getViewMode()){_store.store.dispatch((0,_actions.updateViewMode)(this.getViewMode()))}if((0,_selectors.getUseMargins)(state)!==this.getUseMargins()){_store.store.dispatch((0,_actions.updateUseMargins)(this.getUseMargins()))}if((0,_selectors.getHidePanelTitles)(state)!==this.getHidePanelTitles()){_store.store.dispatch((0,_actions.updateHidePanelTitles)(this.getHidePanelTitles()))}if((0,_selectors.getFullScreenMode)(state)!==this.getFullScreenMode()){_store.store.dispatch((0,_actions.updateIsFullScreenMode)(this.getFullScreenMode()))}if((0,_selectors.getTitle)(state)!==this.getTitle()){_store.store.dispatch((0,_actions.updateTitle)(this.getTitle()))}if((0,_selectors.getDescription)(state)!==this.getDescription()){_store.store.dispatch((0,_actions.updateDescription)(this.getDescription()))}if((0,_selectors.getQuery)(state)!==this.getQuery()){_store.store.dispatch((0,_actions.updateQuery)(this.getQuery()))}this._pushFiltersToStore()}},{key:"_pushFiltersToStore",value:function _pushFiltersToStore(){var state=_store.store.getState();var dashboardFilters=this.getDashboardFilterBars();if(!_lodash2.default.isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(dashboardFilters),_filter_utils.FilterUtils.cleanFiltersForComparison((0,_selectors.getFilters)(state)))){_store.store.dispatch((0,_actions.updateFilters)(dashboardFilters))}}},{key:"requestReload",value:function requestReload(){_store.store.dispatch((0,_actions.requestReload)())}},{key:"_handleStoreChanges",value:function _handleStoreChanges(){var _this2=this;var dirty=false;if(!this._areStoreAndAppStatePanelsEqual()){var panels=(0,_selectors.getPanels)(_store.store.getState());this.appState.panels=[];this.panelIndexPatternMapping={};Object.values(panels).map(function(panel){_this2.appState.panels.push(_lodash2.default.cloneDeep(panel))});dirty=true}_lodash2.default.forEach((0,_selectors.getEmbeddables)(_store.store.getState()),function(embeddable,panelId){if(embeddable.initialized&&!_this2.panelIndexPatternMapping.hasOwnProperty(panelId)){var indexPattern=(0,_selectors.getEmbeddableMetadata)(_store.store.getState(),panelId).indexPattern;if(indexPattern){_this2.panelIndexPatternMapping[panelId]=indexPattern;_this2.dirty=true}}});var stagedFilters=(0,_selectors.getStagedFilters)(_store.store.getState());stagedFilters.forEach(function(filter){_this2.addFilter(filter)});if(stagedFilters.length>0){this.saveState();_store.store.dispatch((0,_actions.clearStagedFilters)())}var fullScreen=(0,_selectors.getFullScreenMode)(_store.store.getState());if(fullScreen!==this.getFullScreenMode()){this.setFullScreenMode(fullScreen)}this.changeListeners.forEach(function(listener){return listener({dirty:dirty})});this.saveState()}},{key:"getFullScreenMode",value:function getFullScreenMode(){return this.appState.fullScreenMode}},{key:"setFullScreenMode",value:function setFullScreenMode(fullScreenMode){this.appState.fullScreenMode=fullScreenMode;this.saveState()}},{key:"getPanelIndexPatterns",value:function getPanelIndexPatterns(){return _lodash2.default.uniq(Object.values(this.panelIndexPatternMapping))}},{key:"resetState",value:function resetState(){this.savedDashboard.title=this.savedDashboard.lastSavedTitle;this.stateDefaults=(0,_lib.getAppStateDefaults)(this.savedDashboard,this.hideWriteControls);this.stateDefaults.query=this.lastSavedDashboardFilters.query;this.stateDefaults.filters=[].concat(_toConsumableArray(this.getLastSavedFilterBars()));this.isDirty=false;this.appState.setDefaults(this.stateDefaults);this.appState.reset();this.stateMonitor.setInitialState(this.appState.toJSON())}},{key:"getFilterState",value:function getFilterState(){return{timeTo:this.savedDashboard.timeTo,timeFrom:this.savedDashboard.timeFrom,filterBars:this.getDashboardFilterBars(),query:this.getDashboardQuery()}}},{key:"getTitle",value:function getTitle(){return this.appState.title}},{key:"getDescription",value:function getDescription(){return this.appState.description}},{key:"setDescription",value:function setDescription(description){this.appState.description=description;this.saveState()}},{key:"setTitle",value:function setTitle(title){this.appState.title=title;this.savedDashboard.title=title;this.saveState()}},{key:"getAppState",value:function getAppState(){return this.appState}},{key:"getQuery",value:function getQuery(){return this.appState.query}},{key:"getUseMargins",value:function getUseMargins(){return this.appState.options.useMargins===undefined?false:this.appState.options.useMargins}},{key:"setUseMargins",value:function setUseMargins(useMargins){this.appState.options.useMargins=useMargins;this.saveState()}},{key:"getHidePanelTitles",value:function getHidePanelTitles(){return this.appState.options.hidePanelTitles}},{key:"setHidePanelTitles",value:function setHidePanelTitles(hidePanelTitles){this.appState.options.hidePanelTitles=hidePanelTitles;this.saveState()}},{key:"getDarkTheme",value:function getDarkTheme(){return this.appState.options.darkTheme}},{key:"setDarkTheme",value:function setDarkTheme(darkTheme){this.appState.options.darkTheme=darkTheme;this.saveState()}},{key:"getTimeRestore",value:function getTimeRestore(){return this.appState.timeRestore}},{key:"setTimeRestore",value:function setTimeRestore(timeRestore){this.appState.timeRestore=timeRestore;this.saveState()}},{key:"getIsTimeSavedWithDashboard",value:function getIsTimeSavedWithDashboard(){return this.savedDashboard.timeRestore}},{key:"getDashboardFilterBars",value:function getDashboardFilterBars(){return _filter_utils.FilterUtils.getFilterBarsForDashboard(this.savedDashboard)}},{key:"getDashboardQuery",value:function getDashboardQuery(){return _filter_utils.FilterUtils.getQueryFilterForDashboard(this.savedDashboard)}},{key:"getLastSavedFilterBars",value:function getLastSavedFilterBars(){return this.lastSavedDashboardFilters.filterBars}},{key:"getLastSavedQuery",value:function getLastSavedQuery(){return this.lastSavedDashboardFilters.query}},{key:"getQueryChanged",value:function getQueryChanged(){var currentQuery=this.appState.query;var lastSavedQuery=this.getLastSavedQuery();var isLegacyStringQuery=_lodash2.default.isString(lastSavedQuery)&&_lodash2.default.isPlainObject(currentQuery)&&_lodash2.default.has(currentQuery,"query");if(isLegacyStringQuery){return lastSavedQuery!==currentQuery.query}return!_lodash2.default.isEqual(currentQuery,lastSavedQuery)}},{key:"getFilterBarChanged",value:function getFilterBarChanged(){return!_lodash2.default.isEqual(_filter_utils.FilterUtils.cleanFiltersForComparison(this.appState.filters),_filter_utils.FilterUtils.cleanFiltersForComparison(this.getLastSavedFilterBars()))}},{key:"getTimeChanged",value:function getTimeChanged(timeFilter){return!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeFrom,timeFilter.getTime().from)||!_filter_utils.FilterUtils.areTimesEqual(this.lastSavedDashboardFilters.timeTo,timeFilter.getTime().to)}},{key:"getViewMode",value:function getViewMode(){return this.hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:this.appState.viewMode}},{key:"getIsViewMode",value:function getIsViewMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.VIEW}},{key:"getIsEditMode",value:function getIsEditMode(){return this.getViewMode()===_dashboard_view_mode.DashboardViewMode.EDIT}},{key:"getIsDirty",value:function getIsDirty(timeFilter){var hasTimeFilterChanged=timeFilter?this.getFiltersChanged(timeFilter):false;return this.getIsEditMode()&&(this.isDirty||hasTimeFilterChanged)}},{key:"getPanels",value:function getPanels(){return this.appState.panels}},{key:"updatePanel",value:function updatePanel(panelIndex,panelAttributes){var panel=this.getPanels().find(function(panel){return panel.panelIndex===panelIndex});Object.assign(panel,panelAttributes);this.saveState();return panel}},{key:"removePanel",value:function removePanel(panelIndex){var _this3=this;_lodash2.default.remove(this.getPanels(),function(panel){if(panel.panelIndex===panelIndex){delete _this3.panelIndexPatternMapping[panelIndex];return true}else{return false}});this.saveState()}},{key:"getChangedFilterTypes",value:function getChangedFilterTypes(timeFilter){var changedFilters=[];if(this.getFilterBarChanged()){changedFilters.push("filter")}if(this.getQueryChanged()){changedFilters.push("query")}if(this.savedDashboard.timeRestore&&this.getTimeChanged(timeFilter)){changedFilters.push("time range")}return changedFilters}},{key:"getFiltersChanged",value:function getFiltersChanged(timeFilter){return this.getChangedFilterTypes(timeFilter).length>0}},{key:"syncTimefilterWithDashboard",value:function syncTimefilterWithDashboard(timeFilter,quickTimeRanges){var _this4=this;if(!this.getIsTimeSavedWithDashboard()){throw new Error(_i18n.i18n.translate("kbn.dashboard.stateManager.timeNotSavedWithDashboardErrorMessage",{defaultMessage:"The time is not saved with this dashboard so should not be synced."}))}var mode=void 0;var isMoment=(0,_moment2.default)(this.savedDashboard.timeTo).isValid();if(isMoment){mode="absolute"}else{var quickTime=_lodash2.default.find(quickTimeRanges,function(timeRange){return timeRange.from===_this4.savedDashboard.timeFrom&&timeRange.to===_this4.savedDashboard.timeTo});mode=quickTime?"quick":"relative"}timeFilter.setTime({from:this.savedDashboard.timeFrom,to:this.savedDashboard.timeTo,mode:mode});if(this.savedDashboard.refreshInterval){timeFilter.setRefreshInterval(this.savedDashboard.refreshInterval)}}},{key:"saveState",value:function saveState(){this.appState.save()}},{key:"applyFilters",value:function applyFilters(query,filters){this.appState.query=query;this.savedDashboard.searchSource.setField("query",query);this.savedDashboard.searchSource.setField("filter",filters);this.saveState();this._pushFiltersToStore()}},{key:"createStateMonitor",value:function createStateMonitor(){var _this5=this;this.stateMonitor=_state_monitor_factory.stateMonitorFactory.create(this.appState,this.stateDefaults);this.stateMonitor.ignoreProps("viewMode");this.stateMonitor.ignoreProps("filters");this.stateMonitor.ignoreProps("query");this.stateMonitor.onChange(function(status){_this5.isDirty=status.dirty})}},{key:"switchViewMode",value:function switchViewMode(newMode){this.appState.viewMode=newMode;this.saveState()}},{key:"destroy",value:function destroy(){if(this.stateMonitor){this.stateMonitor.destroy()}this.savedDashboard.destroy();this.unsubscribe()}}]);return DashboardStateManager}()},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reducers=undefined;var _redux=__webpack_require__(363);var _reducers=__webpack_require__(1689);var reducers=exports.reducers=(0,_redux.combineReducers)({dashboard:_reducers.dashboard})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dashboard=undefined;var _redux=__webpack_require__(363);var _embeddables=__webpack_require__(1690);var _panels=__webpack_require__(1696);var _view=__webpack_require__(1697);var _metadata=__webpack_require__(1698);var dashboard=exports.dashboard=(0,_redux.combineReducers)({embeddables:_embeddables.embeddablesReducer,metadata:_metadata.metadataReducer,panels:_panels.panelsReducer,view:_view.viewReducer})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.embeddablesReducer=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _actions=__webpack_require__(60);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var embeddableIsInitializing=function embeddableIsInitializing(embeddables,panelId){var _a;return tslib_1.__assign({},embeddables,(_a={},_a[panelId]={error:undefined,initialized:false,metadata:{},stagedFilter:undefined,lastReloadRequestTime:0},_a))};var embeddableIsInitialized=function embeddableIsInitialized(embeddables,_a){var panelId=_a.panelId,metadata=_a.metadata;var _b;return tslib_1.__assign({},embeddables,(_b={},_b[panelId]=tslib_1.__assign({},embeddables[panelId],{initialized:true,metadata:tslib_1.__assign({},metadata)}),_b))};var setStagedFilter=function setStagedFilter(embeddables,_a){var panelId=_a.panelId,stagedFilter=_a.stagedFilter;var _b;return tslib_1.__assign({},embeddables,(_b={},_b[panelId]=tslib_1.__assign({},embeddables[panelId],{stagedFilter:stagedFilter}),_b))};var embeddableError=function embeddableError(embeddables,payload){var _a;return tslib_1.__assign({},embeddables,(_a={},_a[payload.panelId]=tslib_1.__assign({},embeddables[payload.panelId],{error:payload.error}),_a))};var clearStagedFilters=function clearStagedFilters(embeddables){var omitStagedFilters=function omitStagedFilters(embeddable){return _lodash2.default.omit(tslib_1.__assign({},embeddable),["stagedFilter"])};return _lodash2.default.mapValues(embeddables,omitStagedFilters)};var deleteEmbeddable=function deleteEmbeddable(embeddables,panelId){var embeddablesCopy=tslib_1.__assign({},embeddables);delete embeddablesCopy[panelId];return embeddablesCopy};var setReloadRequestTime=function setReloadRequestTime(embeddables,lastReloadRequestTime){return _lodash2.default.mapValues(embeddables,function(embeddable){return tslib_1.__assign({},embeddable,{lastReloadRequestTime:lastReloadRequestTime})})};var embeddablesReducer=exports.embeddablesReducer=function embeddablesReducer(embeddables,action){if(embeddables===void 0){embeddables={}}switch(action.type){case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING:return embeddableIsInitializing(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED:return embeddableIsInitialized(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.SET_STAGED_FILTER:return setStagedFilter(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS:return clearStagedFilters(embeddables);case _actions.EmbeddableActionTypeKeys.EMBEDDABLE_ERROR:return embeddableError(embeddables,action.payload);case _actions.PanelActionTypeKeys.DELETE_PANEL:return deleteEmbeddable(embeddables,action.payload);case _actions.EmbeddableActionTypeKeys.REQUEST_RELOAD:return setReloadRequestTime(embeddables,(new Date).getTime());default:return embeddables}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateQuery=exports.updateFilters=exports.updateTimeRange=exports.updateHidePanelTitles=exports.updateUseMargins=exports.updateIsFullScreenMode=exports.minimizePanel=exports.maximizePanel=exports.setVisibleContextMenuPanelId=exports.closeContextMenu=exports.updateViewMode=exports.ViewActionTypeKeys=undefined;var _reduxActions=__webpack_require__(261);var ViewActionTypeKeys=exports.ViewActionTypeKeys=undefined;(function(ViewActionTypeKeys){ViewActionTypeKeys["UPDATE_VIEW_MODE"]="UPDATE_VIEW_MODE";ViewActionTypeKeys["SET_VISIBLE_CONTEXT_MENU_PANEL_ID"]="SET_VISIBLE_CONTEXT_MENU_PANEL_ID";ViewActionTypeKeys["MAXIMIZE_PANEl"]="MAXIMIZE_PANEl";ViewActionTypeKeys["MINIMIZE_PANEL"]="MINIMIZE_PANEL";ViewActionTypeKeys["UPDATE_IS_FULL_SCREEN_MODE"]="UPDATE_IS_FULL_SCREEN_MODE";ViewActionTypeKeys["UPDATE_USE_MARGINS"]="UPDATE_USE_MARGINS";ViewActionTypeKeys["UPDATE_HIDE_PANEL_TITLES"]="UPDATE_HIDE_PANEL_TITLES";ViewActionTypeKeys["UPDATE_TIME_RANGE"]="UPDATE_TIME_RANGE";ViewActionTypeKeys["UPDATE_FILTERS"]="UPDATE_FILTERS";ViewActionTypeKeys["UPDATE_QUERY"]="UPDATE_QUERY";ViewActionTypeKeys["CLOSE_CONTEXT_MENU"]="CLOSE_CONTEXT_MENU"})(ViewActionTypeKeys||(exports.ViewActionTypeKeys=ViewActionTypeKeys={}));var updateViewMode=exports.updateViewMode=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_VIEW_MODE);var closeContextMenu=exports.closeContextMenu=(0,_reduxActions.createAction)(ViewActionTypeKeys.CLOSE_CONTEXT_MENU);var setVisibleContextMenuPanelId=exports.setVisibleContextMenuPanelId=(0,_reduxActions.createAction)(ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID);var maximizePanel=exports.maximizePanel=(0,_reduxActions.createAction)(ViewActionTypeKeys.MAXIMIZE_PANEl);var minimizePanel=exports.minimizePanel=(0,_reduxActions.createAction)(ViewActionTypeKeys.MINIMIZE_PANEL);var updateIsFullScreenMode=exports.updateIsFullScreenMode=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE);var updateUseMargins=exports.updateUseMargins=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_USE_MARGINS);var updateHidePanelTitles=exports.updateHidePanelTitles=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES);var updateTimeRange=exports.updateTimeRange=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_TIME_RANGE);var updateFilters=exports.updateFilters=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_FILTERS);var updateQuery=exports.updateQuery=(0,_reduxActions.createAction)(ViewActionTypeKeys.UPDATE_QUERY)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.requestReload=exports.embeddableError=exports.clearStagedFilters=exports.setStagedFilter=exports.embeddableIsInitialized=exports.embeddableIsInitializing=exports.EmbeddableActionTypeKeys=undefined;exports.embeddableStateChanged=embeddableStateChanged;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _reduxActions=__webpack_require__(261);var _selectors=__webpack_require__(577);var _panels=__webpack_require__(576);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var EmbeddableActionTypeKeys=exports.EmbeddableActionTypeKeys=undefined;(function(EmbeddableActionTypeKeys){EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZING"]="EMBEDDABLE_IS_INITIALIZING";EmbeddableActionTypeKeys["EMBEDDABLE_IS_INITIALIZED"]="EMBEDDABLE_IS_INITIALIZED";EmbeddableActionTypeKeys["SET_STAGED_FILTER"]="SET_STAGED_FILTER";EmbeddableActionTypeKeys["CLEAR_STAGED_FILTERS"]="CLEAR_STAGED_FILTERS";EmbeddableActionTypeKeys["EMBEDDABLE_ERROR"]="EMBEDDABLE_ERROR";EmbeddableActionTypeKeys["REQUEST_RELOAD"]="REQUEST_RELOAD"})(EmbeddableActionTypeKeys||(exports.EmbeddableActionTypeKeys=EmbeddableActionTypeKeys={}));var embeddableIsInitializing=exports.embeddableIsInitializing=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZING);var embeddableIsInitialized=exports.embeddableIsInitialized=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_IS_INITIALIZED);var setStagedFilter=exports.setStagedFilter=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.SET_STAGED_FILTER);var clearStagedFilters=exports.clearStagedFilters=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.CLEAR_STAGED_FILTERS);var embeddableError=exports.embeddableError=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.EMBEDDABLE_ERROR);var requestReload=exports.requestReload=(0,_reduxActions.createAction)(EmbeddableActionTypeKeys.REQUEST_RELOAD);function embeddableStateChanged(changeData){var panelId=changeData.panelId,embeddableState=changeData.embeddableState;return function(dispatch,getState){var customization=(0,_selectors.getEmbeddableCustomization)(getState(),panelId);if(!_lodash2.default.isEqual(embeddableState.customization,customization)){var originalPanelState=(0,_selectors.getPanel)(getState(),panelId);var newPanelState=tslib_1.__assign({},originalPanelState,{embeddableConfig:_lodash2.default.cloneDeep(embeddableState.customization)});dispatch((0,_panels.updatePanel)(newPanelState))}if(embeddableState.stagedFilter){dispatch(setStagedFilter({stagedFilter:embeddableState.stagedFilter,panelId:panelId}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDescription=exports.getTitle=exports.getQuery=exports.getFilters=exports.getTimeRange=exports.getHidePanelTitles=exports.getUseMargins=exports.getMaximizedPanelId=exports.getFullScreenMode=exports.getViewMode=exports.getStagedFilters=exports.getEmbeddableMetadata=exports.getEmbeddableStagedFilter=exports.getEmbeddableCustomization=exports.getEmbeddableInitialized=exports.getEmbeddableError=exports.getEmbeddables=exports.getPanelType=exports.getPanel=exports.getPanels=exports.getDashboard=undefined;var _selectors=__webpack_require__(94);var DashboardSelectors=_interopRequireWildcard(_selectors);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var getDashboard=exports.getDashboard=function getDashboard(state){return state.dashboard};var getPanels=exports.getPanels=function getPanels(state){return DashboardSelectors.getPanels(getDashboard(state))};var getPanel=exports.getPanel=function getPanel(state,panelId){return DashboardSelectors.getPanel(getDashboard(state),panelId)};var getPanelType=exports.getPanelType=function getPanelType(state,panelId){return DashboardSelectors.getPanelType(getDashboard(state),panelId)};var getEmbeddables=exports.getEmbeddables=function getEmbeddables(state){return DashboardSelectors.getEmbeddables(getDashboard(state))};var getEmbeddableError=exports.getEmbeddableError=function getEmbeddableError(state,panelId){return DashboardSelectors.getEmbeddableError(getDashboard(state),panelId)};var getEmbeddableInitialized=exports.getEmbeddableInitialized=function getEmbeddableInitialized(state,panelId){return DashboardSelectors.getEmbeddableInitialized(getDashboard(state),panelId)};var getEmbeddableCustomization=exports.getEmbeddableCustomization=function getEmbeddableCustomization(state,panelId){return DashboardSelectors.getEmbeddableCustomization(getDashboard(state),panelId)};var getEmbeddableStagedFilter=exports.getEmbeddableStagedFilter=function getEmbeddableStagedFilter(state,panelId){return DashboardSelectors.getEmbeddableStagedFilter(getDashboard(state),panelId)};var getEmbeddableMetadata=exports.getEmbeddableMetadata=function getEmbeddableMetadata(state,panelId){return DashboardSelectors.getEmbeddableMetadata(getDashboard(state),panelId)};var getStagedFilters=exports.getStagedFilters=function getStagedFilters(state){return DashboardSelectors.getStagedFilters(getDashboard(state))};var getViewMode=exports.getViewMode=function getViewMode(state){return DashboardSelectors.getViewMode(getDashboard(state))};var getFullScreenMode=exports.getFullScreenMode=function getFullScreenMode(state){return DashboardSelectors.getFullScreenMode(getDashboard(state))};var getMaximizedPanelId=exports.getMaximizedPanelId=function getMaximizedPanelId(state){return DashboardSelectors.getMaximizedPanelId(getDashboard(state))};var getUseMargins=exports.getUseMargins=function getUseMargins(state){return DashboardSelectors.getUseMargins(getDashboard(state))};var getHidePanelTitles=exports.getHidePanelTitles=function getHidePanelTitles(state){return DashboardSelectors.getHidePanelTitles(getDashboard(state))};var getTimeRange=exports.getTimeRange=function getTimeRange(state){return DashboardSelectors.getTimeRange(getDashboard(state))};var getFilters=exports.getFilters=function getFilters(state){return DashboardSelectors.getFilters(getDashboard(state))};var getQuery=exports.getQuery=function getQuery(state){return DashboardSelectors.getQuery(getDashboard(state))};var getTitle=exports.getTitle=function getTitle(state){return DashboardSelectors.getTitle(getDashboard(state))};var getDescription=exports.getDescription=function getDescription(state){return DashboardSelectors.getDescription(getDashboard(state))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getStagedFilters=exports.getContainerState=exports.getDescription=exports.getTitle=exports.getMetadata=exports.getQuery=exports.getFilters=exports.getTimeRange=exports.getMaximizedPanelId=exports.getHidePanelTitles=exports.getFullScreenMode=exports.getViewMode=exports.getUseMargins=exports.getVisibleContextMenuPanelId=exports.getEmbeddableEditUrl=exports.getEmbeddableMetadata=exports.getEmbeddableStagedFilter=exports.getEmbeddableInitialized=exports.getEmbeddableTitle=exports.getEmbeddableError=exports.getEmbeddable=exports.getEmbeddableCustomization=exports.getEmbeddables=exports.getPanelType=exports.getPanel=exports.getPanels=undefined;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getPanels=exports.getPanels=function getPanels(dashboard){return dashboard.panels};var getPanel=exports.getPanel=function getPanel(dashboard,panelId){return getPanels(dashboard)[panelId]};var getPanelType=exports.getPanelType=function getPanelType(dashboard,panelId){return getPanel(dashboard,panelId).type};var getEmbeddables=exports.getEmbeddables=function getEmbeddables(dashboard){return dashboard.embeddables};var getEmbeddableCustomization=exports.getEmbeddableCustomization=function getEmbeddableCustomization(dashboard,panelId){return getPanel(dashboard,panelId).embeddableConfig};var getEmbeddable=exports.getEmbeddable=function getEmbeddable(dashboard,panelId){return dashboard.embeddables[panelId]};var getEmbeddableError=exports.getEmbeddableError=function getEmbeddableError(dashboard,panelId){return getEmbeddable(dashboard,panelId).error};var getEmbeddableTitle=exports.getEmbeddableTitle=function getEmbeddableTitle(dashboard,panelId){var embeddable=getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.title:""};var getEmbeddableInitialized=exports.getEmbeddableInitialized=function getEmbeddableInitialized(dashboard,panelId){return getEmbeddable(dashboard,panelId).initialized};var getEmbeddableStagedFilter=exports.getEmbeddableStagedFilter=function getEmbeddableStagedFilter(dashboard,panelId){return getEmbeddable(dashboard,panelId).stagedFilter};var getEmbeddableMetadata=exports.getEmbeddableMetadata=function getEmbeddableMetadata(dashboard,panelId){return getEmbeddable(dashboard,panelId).metadata};var getEmbeddableEditUrl=exports.getEmbeddableEditUrl=function getEmbeddableEditUrl(dashboard,panelId){var embeddable=getEmbeddable(dashboard,panelId);return embeddable&&embeddable.initialized&&embeddable.metadata?embeddable.metadata.editUrl:""};var getVisibleContextMenuPanelId=exports.getVisibleContextMenuPanelId=function getVisibleContextMenuPanelId(dashboard){return dashboard.view.visibleContextMenuPanelId};var getUseMargins=exports.getUseMargins=function getUseMargins(dashboard){return dashboard.view.useMargins};var getViewMode=exports.getViewMode=function getViewMode(dashboard){return dashboard.view.viewMode};var getFullScreenMode=exports.getFullScreenMode=function getFullScreenMode(dashboard){return dashboard.view.isFullScreenMode};var getHidePanelTitles=exports.getHidePanelTitles=function getHidePanelTitles(dashboard){return dashboard.view.hidePanelTitles};var getMaximizedPanelId=exports.getMaximizedPanelId=function getMaximizedPanelId(dashboard){return dashboard.view.maximizedPanelId};var getTimeRange=exports.getTimeRange=function getTimeRange(dashboard){return dashboard.view.timeRange};var getFilters=exports.getFilters=function getFilters(dashboard){return dashboard.view.filters};var getQuery=exports.getQuery=function getQuery(dashboard){return dashboard.view.query};var getMetadata=exports.getMetadata=function getMetadata(dashboard){return dashboard.metadata};var getTitle=exports.getTitle=function getTitle(dashboard){return dashboard.metadata.title};var getDescription=exports.getDescription=function getDescription(dashboard){return dashboard.metadata.description};var getContainerState=exports.getContainerState=function getContainerState(dashboard,panelId){var time=getTimeRange(dashboard);return{customTitle:getPanel(dashboard,panelId).title,embeddableCustomization:_lodash2.default.cloneDeep(getEmbeddableCustomization(dashboard,panelId)||{}),filters:getFilters(dashboard),hidePanelTitles:getHidePanelTitles(dashboard),isPanelExpanded:getMaximizedPanelId(dashboard)===panelId,query:getQuery(dashboard),timeRange:{from:time.from,to:time.to},viewMode:getViewMode(dashboard)}};var getStagedFilters=exports.getStagedFilters=function getStagedFilters(dashboard){return _lodash2.default.compact(_lodash2.default.map(dashboard.embeddables,"stagedFilter"))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateTitle=exports.updateDescription=exports.MetadataActionTypeKeys=undefined;var _reduxActions=__webpack_require__(261);var MetadataActionTypeKeys=exports.MetadataActionTypeKeys=undefined;(function(MetadataActionTypeKeys){MetadataActionTypeKeys["UPDATE_DESCRIPTION"]="UPDATE_DESCRIPTION";MetadataActionTypeKeys["UPDATE_TITLE"]="UPDATE_TITLE"})(MetadataActionTypeKeys||(exports.MetadataActionTypeKeys=MetadataActionTypeKeys={}));var updateDescription=exports.updateDescription=(0,_reduxActions.createAction)(MetadataActionTypeKeys.UPDATE_DESCRIPTION);var updateTitle=exports.updateTitle=(0,_reduxActions.createAction)(MetadataActionTypeKeys.UPDATE_TITLE)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.panelsReducer=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _actions=__webpack_require__(60);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var deletePanel=function deletePanel(panels,panelId){var panelsCopy=tslib_1.__assign({},panels);delete panelsCopy[panelId];return panelsCopy};var updatePanel=function updatePanel(panels,panelState){var _a;return tslib_1.__assign({},panels,(_a={},_a[panelState.panelIndex]=panelState,_a))};var updatePanels=function updatePanels(panels,updatedPanels){var panelsCopy=tslib_1.__assign({},panels);Object.values(updatedPanels).forEach(function(panel){panelsCopy[panel.panelIndex]=panel});return panelsCopy};var resetPanelTitle=function resetPanelTitle(panels,panelId){var _a;return tslib_1.__assign({},panels,(_a={},_a[panelId]=tslib_1.__assign({},panels[panelId],{title:undefined}),_a))};var setPanelTitle=function setPanelTitle(panels,payload){var _a;return tslib_1.__assign({},panels,(_a={},_a[payload.panelId]=tslib_1.__assign({},panels[payload.panelId],{title:payload.title}),_a))};var setPanels=function setPanels(panels,newPanels){return _lodash2.default.cloneDeep(newPanels)};var panelsReducer=exports.panelsReducer=function panelsReducer(panels,action){if(panels===void 0){panels={}}switch(action.type){case _actions.PanelActionTypeKeys.DELETE_PANEL:return deletePanel(panels,action.payload);case _actions.PanelActionTypeKeys.UPDATE_PANEL:return updatePanel(panels,action.payload);case _actions.PanelActionTypeKeys.UPDATE_PANELS:return updatePanels(panels,action.payload);case _actions.PanelActionTypeKeys.RESET_PANEl_TITLE:return resetPanelTitle(panels,action.payload);case _actions.PanelActionTypeKeys.SET_PANEl_TITLE:return setPanelTitle(panels,action.payload);case _actions.PanelActionTypeKeys.SET_PANELS:return setPanels(panels,action.payload);default:return panels}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.viewReducer=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _lodash=__webpack_require__(0);var _actions=__webpack_require__(60);var _types=__webpack_require__(575);var _dashboard_view_mode=__webpack_require__(36);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var closeContextMenu=function closeContextMenu(view){return tslib_1.__assign({},view,{visibleContextMenuPanelId:undefined})};var setVisibleContextMenuPanelId=function setVisibleContextMenuPanelId(view,panelId){return tslib_1.__assign({},view,{visibleContextMenuPanelId:panelId})};var updateHidePanelTitles=function updateHidePanelTitles(view,hidePanelTitles){return tslib_1.__assign({},view,{hidePanelTitles:hidePanelTitles})};var minimizePanel=function minimizePanel(view){return tslib_1.__assign({},view,{maximizedPanelId:undefined})};var maximizePanel=function maximizePanel(view,panelId){return tslib_1.__assign({},view,{maximizedPanelId:panelId})};var updateIsFullScreenMode=function updateIsFullScreenMode(view,isFullScreenMode){return tslib_1.__assign({},view,{isFullScreenMode:isFullScreenMode})};var updateTimeRange=function updateTimeRange(view,timeRange){return tslib_1.__assign({},view,{timeRange:timeRange})};var updateFilters=function updateFilters(view,filters){return tslib_1.__assign({},view,{filters:(0,_lodash.cloneDeep)(filters)})};var updateQuery=function updateQuery(view,query){return tslib_1.__assign({},view,{query:query})};var updateUseMargins=function updateUseMargins(view,useMargins){return tslib_1.__assign({},view,{useMargins:useMargins})};var updateViewMode=function updateViewMode(view,viewMode){return tslib_1.__assign({},view,{viewMode:viewMode})};var viewReducer=exports.viewReducer=function viewReducer(view,action){if(view===void 0){view={filters:[],hidePanelTitles:false,isFullScreenMode:false,query:{language:_types.QueryLanguageType.LUCENE,query:""},timeRange:{to:"now",from:"now-15m"},useMargins:true,viewMode:_dashboard_view_mode.DashboardViewMode.VIEW}}switch(action.type){case _actions.ViewActionTypeKeys.MINIMIZE_PANEL:return minimizePanel(view);case _actions.ViewActionTypeKeys.MAXIMIZE_PANEl:return maximizePanel(view,action.payload);case _actions.ViewActionTypeKeys.SET_VISIBLE_CONTEXT_MENU_PANEL_ID:return setVisibleContextMenuPanelId(view,action.payload);case _actions.ViewActionTypeKeys.CLOSE_CONTEXT_MENU:return closeContextMenu(view);case _actions.ViewActionTypeKeys.UPDATE_HIDE_PANEL_TITLES:return updateHidePanelTitles(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_TIME_RANGE:return updateTimeRange(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_USE_MARGINS:return updateUseMargins(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_VIEW_MODE:return updateViewMode(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_IS_FULL_SCREEN_MODE:return updateIsFullScreenMode(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_FILTERS:return updateFilters(view,action.payload);case _actions.ViewActionTypeKeys.UPDATE_QUERY:return updateQuery(view,action.payload);default:return view}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.metadataReducer=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _actions=__webpack_require__(60);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var updateTitle=function updateTitle(metadata,title){return tslib_1.__assign({},metadata,{title:title})};var updateDescription=function updateDescription(metadata,description){return tslib_1.__assign({},metadata,{description:description})};var metadataReducer=exports.metadataReducer=function metadataReducer(metadata,action){if(metadata===void 0){metadata={description:"",title:""}}switch(action.type){case _actions.MetadataActionTypeKeys.UPDATE_TITLE:return updateTitle(metadata,action.payload);case _actions.MetadataActionTypeKeys.UPDATE_DESCRIPTION:return updateDescription(metadata,action.payload);default:return metadata}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanelContainer=undefined;var _reactRedux=__webpack_require__(98);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _i18n=__webpack_require__(8);var _dashboard_panel=__webpack_require__(1700);var _dashboard_view_mode=__webpack_require__(36);var _actions=__webpack_require__(60);var _selectors=__webpack_require__(94);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(_ref,_ref2){var dashboard=_ref.dashboard;var embeddableFactory=_ref2.embeddableFactory,panelId=_ref2.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var error=null;if(!embeddableFactory){var panelType=(0,_selectors.getPanelType)(dashboard,panelId);error=_i18n.i18n.translate("kbn.dashboard.panel.noFoundEmbeddableFactoryErrorMessage",{defaultMessage:"No embeddable factory found for panel type {panelType}",values:{panelType:panelType}})}else{error=embeddable&&(0,_selectors.getEmbeddableError)(dashboard,panelId)||""}var lastReloadRequestTime=embeddable?embeddable.lastReloadRequestTime:0;var initialized=embeddable?(0,_selectors.getEmbeddableInitialized)(dashboard,panelId):false;return{error:error,viewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,containerState:(0,_selectors.getContainerState)(dashboard,panelId),initialized:initialized,panel:(0,_selectors.getPanel)(dashboard,panelId),lastReloadRequestTime:lastReloadRequestTime}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var panelId=_ref3.panelId;return{destroy:function destroy(){return dispatch((0,_actions.deletePanel)(panelId))},embeddableIsInitializing:function embeddableIsInitializing(){return dispatch((0,_actions.embeddableIsInitializing)(panelId))},embeddableIsInitialized:function embeddableIsInitialized(metadata){return dispatch((0,_actions.embeddableIsInitialized)({panelId:panelId,metadata:metadata}))},embeddableStateChanged:function embeddableStateChanged(embeddableState){return dispatch((0,_actions.embeddableStateChanged)({panelId:panelId,embeddableState:embeddableState}))},embeddableError:function embeddableError(errorMessage){return dispatch((0,_actions.embeddableError)({panelId:panelId,error:errorMessage}))}}};var DashboardPanelContainer=exports.DashboardPanelContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_panel.DashboardPanel);DashboardPanelContainer.propTypes={panelId:_propTypes2.default.string.isRequired,embeddableFactory:_propTypes2.default.shape({create:_propTypes2.default.func.isRequired}).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardPanel=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _panel_header=__webpack_require__(1701);var _panel_error=__webpack_require__(1713);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DashboardPanelUi=function(_React$Component){_inherits(DashboardPanelUi,_React$Component);function DashboardPanelUi(props){_classCallCheck(this,DashboardPanelUi);var _this=_possibleConstructorReturn(this,(DashboardPanelUi.__proto__||Object.getPrototypeOf(DashboardPanelUi)).call(this,props));_this.onFocus=function(){var _this$props=_this.props,onPanelFocused=_this$props.onPanelFocused,panel=_this$props.panel;if(onPanelFocused){onPanelFocused(panel.panelIndex)}};_this.onBlur=function(){var _this$props2=_this.props,onPanelBlurred=_this$props2.onPanelBlurred,panel=_this$props2.panel;if(onPanelBlurred){onPanelBlurred(panel.panelIndex)}};_this.state={error:props.embeddableFactory?null:props.intl.formatMessage({id:"kbn.dashboard.panel.noEmbeddableFactoryErrorMessage",defaultMessage:"No factory found for embeddable"})};_this.mounted=false;return _this}_createClass(DashboardPanelUi,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;var _props,initialized,embeddableFactory,embeddableIsInitializing,panel,embeddableStateChanged,embeddableIsInitialized,embeddableError;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;_props=this.props,initialized=_props.initialized,embeddableFactory=_props.embeddableFactory,embeddableIsInitializing=_props.embeddableIsInitializing,panel=_props.panel,embeddableStateChanged=_props.embeddableStateChanged,embeddableIsInitialized=_props.embeddableIsInitialized,embeddableError=_props.embeddableError;if(!initialized){embeddableIsInitializing();embeddableFactory.create(panel,embeddableStateChanged).then(function(embeddable){if(_this2.mounted){_this2.embeddable=embeddable;embeddableIsInitialized(embeddable.metadata);_this2.embeddable.render(_this2.panelElement,_this2.props.containerState)}else{embeddable.destroy()}}).catch(function(error){if(_this2.mounted){embeddableError(error.message)}})}case 3:case"end":return _context.stop()}}},_callee,this)}));function componentDidMount(){return _ref.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.destroy();this.mounted=false;if(this.embeddable){this.embeddable.destroy()}}},{key:"renderEmbeddableViewport",value:function renderEmbeddableViewport(){var _this3=this;return _react2.default.createElement("div",{id:"embeddedPanel",className:"panel-content",ref:function ref(panelElement){return _this3.panelElement=panelElement}},!this.props.initialized&&_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.panel.embeddableViewport.loadingLabel",defaultMessage:"loading…"}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(this.embeddable&&!_lodash2.default.isEqual(nextProps.containerState,this.props.containerState)){this.embeddable.onContainerStateChanged(nextProps.containerState)}if(this.embeddable&&nextProps.lastReloadRequestTime!==this.props.lastReloadRequestTime){this.embeddable.reload()}return nextProps.error!==this.props.error||nextProps.initialized!==this.props.initialized}},{key:"renderEmbeddedError",value:function renderEmbeddedError(){return _react2.default.createElement(_panel_error.PanelError,{error:this.props.error})}},{key:"renderContent",value:function renderContent(){var error=this.props.error;if(error){return this.renderEmbeddedError(error)}else{return this.renderEmbeddableViewport()}}},{key:"render",value:function render(){var _props2=this.props,viewOnlyMode=_props2.viewOnlyMode,panel=_props2.panel;var classes=(0,_classnames2.default)("dshPanel",this.props.className,{"dshPanel--editing":!viewOnlyMode});return _react2.default.createElement(_eui.EuiPanel,{className:classes,"data-test-subj":"dashboardPanel",onFocus:this.onFocus,onBlur:this.onBlur,paddingSize:"none"},_react2.default.createElement(_panel_header.PanelHeader,{panelId:panel.panelIndex,embeddable:this.embeddable}),this.renderContent())}}]);return DashboardPanelUi}(_react2.default.Component);DashboardPanelUi.propTypes={viewOnlyMode:_propTypes2.default.bool.isRequired,onPanelFocused:_propTypes2.default.func,onPanelBlurred:_propTypes2.default.func,error:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),destroy:_propTypes2.default.func.isRequired,containerState:_propTypes2.default.shape({timeRange:_propTypes2.default.object,filters:_propTypes2.default.array,query:_propTypes2.default.object,embeddableCustomization:_propTypes2.default.object,hidePanelTitles:_propTypes2.default.bool.isRequired}),embeddableFactory:_propTypes2.default.shape({create:_propTypes2.default.func}).isRequired,lastReloadRequestTime:_propTypes2.default.number.isRequired,embeddableStateChanged:_propTypes2.default.func.isRequired,embeddableIsInitialized:_propTypes2.default.func.isRequired,embeddableError:_propTypes2.default.func.isRequired,embeddableIsInitializing:_propTypes2.default.func.isRequired,initialized:_propTypes2.default.bool.isRequired,panel:_propTypes2.default.shape({panelIndex:_propTypes2.default.string}).isRequired};var DashboardPanel=exports.DashboardPanel=(0,_react3.injectI18n)(DashboardPanelUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _panel_header_container=__webpack_require__(1702);Object.defineProperty(exports,"PanelHeader",{enumerable:true,get:function get(){return _panel_header_container.PanelHeaderContainer}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeaderContainer=undefined;var _reactRedux=__webpack_require__(98);var _dashboard_view_mode=__webpack_require__(36);var _panel_header=__webpack_require__(1703);var _selectors=__webpack_require__(94);var mapStateToProps=function mapStateToProps(_a,_b){var dashboard=_a.dashboard;var panelId=_b.panelId;var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);return{title:panel.title===undefined?embeddableTitle:panel.title,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,isViewOnlyMode:(0,_selectors.getFullScreenMode)(dashboard)||(0,_selectors.getViewMode)(dashboard)===_dashboard_view_mode.DashboardViewMode.VIEW,hidePanelTitles:(0,_selectors.getHidePanelTitles)(dashboard)}};var PanelHeaderContainer=exports.PanelHeaderContainer=(0,_reactRedux.connect)(mapStateToProps)(_panel_header.PanelHeader)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeader=undefined;var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _panel_options_menu_container=__webpack_require__(1704);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelHeaderUi(_a){var title=_a.title,panelId=_a.panelId,embeddable=_a.embeddable,isViewOnlyMode=_a.isViewOnlyMode,hidePanelTitles=_a.hidePanelTitles,intl=_a.intl;if(isViewOnlyMode&&(!title||hidePanelTitles)){return _react3.default.createElement("div",{className:"dshPanel__header--floater"},_react3.default.createElement("div",{className:"dshPanel__headerButtonGroup"},_react3.default.createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable})))}return _react3.default.createElement("div",{className:"dshPanel__header","data-test-subj":"dashboardPanelHeading-"+(title||"").replace(/\s/g,"")},_react3.default.createElement("span",{"data-test-subj":"dashboardPanelTitle",className:"dshPanel__title",title:title,"aria-label":intl.formatMessage({id:"kbn.dashboard.panel.dashboardPanelAriaLabel",defaultMessage:"Dashboard panel: {title}"},{title:title})},hidePanelTitles?"":title),_react3.default.createElement("div",{className:"dshPanel__headerButtonGroup"},_react3.default.createElement(_panel_options_menu_container.PanelOptionsMenuContainer,{panelId:panelId,embeddable:embeddable})))}var PanelHeader=exports.PanelHeader=(0,_react.injectI18n)(PanelHeaderUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuContainer=undefined;var _i18n=__webpack_require__(8);var _reactRedux=__webpack_require__(98);var _embeddable=__webpack_require__(42);var _panel_actions_store=__webpack_require__(571);var _panel_actions=__webpack_require__(1705);var _panel_options_menu=__webpack_require__(1712);var _actions=__webpack_require__(60);var _dashboard_view_mode=__webpack_require__(36);var _selectors=__webpack_require__(94);var mapStateToProps=function mapStateToProps(_a,_b){var dashboard=_a.dashboard;var panelId=_b.panelId;var embeddable=(0,_selectors.getEmbeddable)(dashboard,panelId);var panel=(0,_selectors.getPanel)(dashboard,panelId);var embeddableTitle=(0,_selectors.getEmbeddableTitle)(dashboard,panelId);var containerState=(0,_selectors.getContainerState)(dashboard,panelId);var visibleContextMenuPanelId=(0,_selectors.getVisibleContextMenuPanelId)(dashboard);var viewMode=(0,_selectors.getViewMode)(dashboard);return{panelTitle:panel.title===undefined?embeddableTitle:panel.title,editUrl:embeddable?(0,_selectors.getEmbeddableEditUrl)(dashboard,panelId):null,isExpanded:(0,_selectors.getMaximizedPanelId)(dashboard)===panelId,containerState:containerState,visibleContextMenuPanelId:visibleContextMenuPanelId,isViewMode:viewMode===_dashboard_view_mode.DashboardViewMode.VIEW}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_a){var panelId=_a.panelId;return{onDeletePanel:function onDeletePanel(){dispatch((0,_actions.deletePanel)(panelId))},onCloseContextMenu:function onCloseContextMenu(){return dispatch((0,_actions.closeContextMenu)())},openContextMenu:function openContextMenu(){return dispatch((0,_actions.setVisibleContextMenuPanelId)(panelId))},onMaximizePanel:function onMaximizePanel(){return dispatch((0,_actions.maximizePanel)(panelId))},onMinimizePanel:function onMinimizePanel(){return dispatch((0,_actions.minimizePanel)())},onResetPanelTitle:function onResetPanelTitle(){return dispatch((0,_actions.resetPanelTitle)(panelId))},onUpdatePanelTitle:function onUpdatePanelTitle(newTitle){return dispatch((0,_actions.setPanelTitle)({title:newTitle,panelId:panelId}))}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var isExpanded=stateProps.isExpanded,panelTitle=stateProps.panelTitle,containerState=stateProps.containerState,visibleContextMenuPanelId=stateProps.visibleContextMenuPanelId,isViewMode=stateProps.isViewMode;var isPopoverOpen=visibleContextMenuPanelId===ownProps.panelId;var onMaximizePanel=dispatchProps.onMaximizePanel,onMinimizePanel=dispatchProps.onMinimizePanel,onDeletePanel=dispatchProps.onDeletePanel,onResetPanelTitle=dispatchProps.onResetPanelTitle,onUpdatePanelTitle=dispatchProps.onUpdatePanelTitle,onCloseContextMenu=dispatchProps.onCloseContextMenu,openContextMenu=dispatchProps.openContextMenu;var toggleContextMenu=function toggleContextMenu(){return isPopoverOpen?onCloseContextMenu():openContextMenu()};var closeMyContextMenuPanel=function closeMyContextMenuPanel(){if(isPopoverOpen){onCloseContextMenu()}};var toggleExpandedPanel=function toggleExpandedPanel(){isExpanded?onMinimizePanel():onMaximizePanel();closeMyContextMenuPanel()};var panels=[];if(isPopoverOpen){var contextMenuPanel=new _embeddable.ContextMenuPanel({title:_i18n.i18n.translate("kbn.dashboard.panel.optionsMenu.optionsContextMenuTitle",{defaultMessage:"Options"}),id:"mainMenu"});var actions=[(0,_panel_actions.getInspectorPanelAction)({closeContextMenu:closeMyContextMenuPanel,panelTitle:panelTitle}),(0,_panel_actions.getEditPanelAction)(),(0,_panel_actions.getCustomizePanelAction)({onResetPanelTitle:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:panelTitle,closeContextMenu:closeMyContextMenuPanel}),(0,_panel_actions.getToggleExpandPanelAction)({isExpanded:isExpanded,toggleExpandedPanel:toggleExpandedPanel}),(0,_panel_actions.getRemovePanelAction)(onDeletePanel)].concat(_panel_actions_store.panelActionsStore.actions);panels=(0,_embeddable.buildEuiContextMenuPanels)({contextMenuPanel:contextMenuPanel,actions:actions,embeddable:ownProps.embeddable,containerState:containerState})}return{panels:panels,toggleContextMenu:toggleContextMenu,closeContextMenu:closeMyContextMenuPanel,isPopoverOpen:isPopoverOpen,isViewMode:isViewMode}};var PanelOptionsMenuContainer=exports.PanelOptionsMenuContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_panel_options_menu.PanelOptionsMenu)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get_edit_panel_action=__webpack_require__(1706);Object.defineProperty(exports,"getEditPanelAction",{enumerable:true,get:function get(){return _get_edit_panel_action.getEditPanelAction}});var _get_remove_panel_action=__webpack_require__(1707);Object.defineProperty(exports,"getRemovePanelAction",{enumerable:true,get:function get(){return _get_remove_panel_action.getRemovePanelAction}});var _get_customize_panel_action=__webpack_require__(1708);Object.defineProperty(exports,"getCustomizePanelAction",{enumerable:true,get:function get(){return _get_customize_panel_action.getCustomizePanelAction}});var _get_toggle_expand_panel_action=__webpack_require__(1710);Object.defineProperty(exports,"getToggleExpandPanelAction",{enumerable:true,get:function get(){return _get_toggle_expand_panel_action.getToggleExpandPanelAction}});var _get_inspector_panel_action=__webpack_require__(1711);Object.defineProperty(exports,"getInspectorPanelAction",{enumerable:true,get:function get(){return _get_inspector_panel_action.getInspectorPanelAction}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEditPanelAction=getEditPanelAction;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _embeddable=__webpack_require__(42);var _dashboard_view_mode=__webpack_require__(36);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEditPanelAction(){return new _embeddable.ContextMenuAction({displayName:_i18n.i18n.translate("kbn.dashboard.panel.editPanel.displayName",{defaultMessage:"Edit visualization"}),id:"editPanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"pencil"}),isDisabled:function isDisabled(_a){var embeddable=_a.embeddable;return!embeddable||!embeddable.metadata||!embeddable.metadata.editUrl},isVisible:function isVisible(_a){var containerState=_a.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT},getHref:function getHref(_a){var embeddable=_a.embeddable;if(embeddable&&embeddable.metadata.editUrl){return embeddable.metadata.editUrl}}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRemovePanelAction=getRemovePanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _embeddable=__webpack_require__(42);var _dashboard_view_mode=__webpack_require__(36);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRemovePanelAction(onDeletePanel){return new _embeddable.ContextMenuAction({displayName:_i18n.i18n.translate("kbn.dashboard.panel.removePanel.displayName",{defaultMessage:"Delete from dashboard"}),id:"deletePanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"trash"}),isVisible:function isVisible(_a){var containerState=_a.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT&&!containerState.isPanelExpanded},onClick:onDeletePanel})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCustomizePanelAction=getCustomizePanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _embeddable=__webpack_require__(42);var _dashboard_view_mode=__webpack_require__(36);var _panel_options_menu_form=__webpack_require__(1709);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getCustomizePanelAction(_a){var onResetPanelTitle=_a.onResetPanelTitle,onUpdatePanelTitle=_a.onUpdatePanelTitle,closeContextMenu=_a.closeContextMenu,title=_a.title;return new _embeddable.ContextMenuAction({displayName:_i18n.i18n.translate("kbn.dashboard.panel.customizePanel.displayName",{defaultMessage:"Customize panel"}),id:"customizePanel",parentPanelId:"mainMenu"},{childContextMenuPanel:new _embeddable.ContextMenuPanel({id:"panelSubOptionsMenu",title:_i18n.i18n.translate("kbn.dashboard.panel.customizePanelTitle",{defaultMessage:"Customize panel"})},{getContent:function getContent(){return _react2.default.createElement(_panel_options_menu_form.PanelOptionsMenuForm,{onReset:onResetPanelTitle,onUpdatePanelTitle:onUpdatePanelTitle,title:title,onClose:closeContextMenu})}}),icon:_react2.default.createElement(_eui.EuiIcon,{type:"pencil"}),isVisible:function isVisible(_a){var containerState=_a.containerState;return containerState.viewMode===_dashboard_view_mode.DashboardViewMode.EDIT}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenuForm=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenuFormUi(_a){var title=_a.title,onReset=_a.onReset,onUpdatePanelTitle=_a.onUpdatePanelTitle,onClose=_a.onClose,intl=_a.intl;function onInputChange(event){onUpdatePanelTitle(event.target.value)}function onKeyDown(event){if(event.keyCode===_eui.keyCodes.ENTER){onClose()}}return _react2.default.createElement("div",{className:"dshPanel__optionsMenuForm","data-test-subj":"dashboardPanelTitleInputMenuItem"},_react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"kbn.dashboard.panel.optionsMenuForm.panelTitleFormRowLabel",defaultMessage:"Panel title"})},_react2.default.createElement(_eui.EuiFieldText,{id:"panelTitleInput","data-test-subj":"customDashboardPanelTitleInput",name:"min",type:"text",value:title,onChange:onInputChange,onKeyDown:onKeyDown,"aria-label":intl.formatMessage({id:"kbn.dashboard.panel.optionsMenuForm.panelTitleInputAriaLabel",defaultMessage:"Changes to this input are applied immediately. Press enter to exit."})})),_react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"resetCustomDashboardPanelTitle",onClick:onReset},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.panel.optionsMenuForm.resetCustomDashboardButtonLabel",defaultMessage:"Reset title"})))}var PanelOptionsMenuForm=exports.PanelOptionsMenuForm=(0,_react3.injectI18n)(PanelOptionsMenuFormUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getToggleExpandPanelAction=getToggleExpandPanelAction;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _embeddable=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getToggleExpandPanelAction(_a){var isExpanded=_a.isExpanded,toggleExpandedPanel=_a.toggleExpandedPanel;return new _embeddable.ContextMenuAction({displayName:isExpanded?_i18n.i18n.translate("kbn.dashboard.panel.toggleExpandPanel.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("kbn.dashboard.panel.toggleExpandPanel.notExpandedDisplayName",{defaultMessage:"Full screen"}),id:"togglePanel",parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:isExpanded?"expand":"expand"}),onClick:toggleExpandedPanel})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInspectorPanelAction=getInspectorPanelAction;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _embeddable=__webpack_require__(42);var _inspector=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getInspectorPanelAction(_a){var closeContextMenu=_a.closeContextMenu,panelTitle=_a.panelTitle;return new _embeddable.ContextMenuAction({id:"openInspector",displayName:_i18n.i18n.translate("kbn.dashboard.panel.inspectorPanel.displayName",{defaultMessage:"Inspect"}),parentPanelId:"mainMenu"},{icon:_react2.default.createElement(_eui.EuiIcon,{type:"inspect"}),isVisible:function isVisible(_a){var embeddable=_a.embeddable;if(!embeddable){return false}return _inspector.Inspector.isAvailable(embeddable.getInspectorAdapters())},onClick:function onClick(_a){var embeddable=_a.embeddable;if(!embeddable){return}closeContextMenu();var adapters=embeddable.getInspectorAdapters();if(!adapters){return}var session=_inspector.Inspector.open(adapters,{title:panelTitle});var originalDestroy=embeddable.destroy;embeddable.destroy=function(){session.close();if(originalDestroy){originalDestroy.call(embeddable)}};session.on("closed",function(){embeddable.destroy=originalDestroy})}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenu=undefined;var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelOptionsMenuUi(_a){var toggleContextMenu=_a.toggleContextMenu,isPopoverOpen=_a.isPopoverOpen,closeContextMenu=_a.closeContextMenu,panels=_a.panels,isViewMode=_a.isViewMode,intl=_a.intl;var button=_react3.default.createElement(_eui.EuiButtonIcon,{iconType:isViewMode?"boxesHorizontal":"gear",color:"text",className:isViewMode&&!isPopoverOpen?"dshPanel_optionsMenuButton":"","aria-label":intl.formatMessage({id:"kbn.dashboard.panel.optionsMenu.panelOptionsButtonAriaLabel",defaultMessage:"Panel options"}),"data-test-subj":"dashboardPanelToggleMenuIcon",onClick:toggleContextMenu});return _react3.default.createElement(_eui.EuiPopover,{id:"dashboardPanelContextMenu",className:"dshPanel_optionsMenuPopover",button:button,isOpen:isPopoverOpen,closePopover:closeContextMenu,panelPaddingSize:"none",anchorPosition:"downRight","data-test-subj":isPopoverOpen?"dashboardPanelContextMenuOpen":"dashboardPanelContextMenuClosed",withTitle:true},_react3.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels}))}var PanelOptionsMenu=exports.PanelOptionsMenu=(0,_react.injectI18n)(PanelOptionsMenuUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelError=PanelError;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PanelError(_a){var error=_a.error;return _react2.default.createElement("div",{className:"dshPanel__error panel-content"},_react2.default.createElement("span",{"aria-hidden":"true",className:"kuiIcon fa-exclamation-triangle"}),_react2.default.createElement("span",null,error))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _dashboard_constants=__webpack_require__(58);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach(function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)});if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach(function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var y=panel.gridData.y;y<panel.gridData.y+panel.gridData.h;y++){grid[y][x]=1}}});for(var y=0;y<maxY;y++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[y][x]===1){continue}else{for(var h=y;h<Math.min(y+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(y+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:y}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:Infinity}}function createPanelState(id,type,panelIndex,currentPanels){var _a=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_a.x,y=_a.y;return{gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelIndex.toString()},version:_chrome2.default.getKibanaVersion(),panelIndex:panelIndex.toString(),type:type,id:id,embeddableConfig:{}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveDashboard=saveDashboard;var _update_saved_dashboard=__webpack_require__(1716);function saveDashboard(toJson,timeFilter,dashboardStateManager,saveOptions){dashboardStateManager.saveState();var savedDashboard=dashboardStateManager.savedDashboard;var appState=dashboardStateManager.appState;(0,_update_saved_dashboard.updateSavedDashboard)(savedDashboard,appState,timeFilter,toJson);return savedDashboard.save(saveOptions).then(function(id){dashboardStateManager.lastSavedDashboardFilters=dashboardStateManager.getFilterState();dashboardStateManager.resetState();return id})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateSavedDashboard=updateSavedDashboard;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _filter_utils=__webpack_require__(344);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function updateSavedDashboard(savedDashboard,appState,timeFilter,toJson){savedDashboard.title=appState.title;savedDashboard.description=appState.description;savedDashboard.timeRestore=appState.timeRestore;savedDashboard.panelsJSON=toJson(appState.panels);savedDashboard.optionsJSON=toJson(appState.options);savedDashboard.timeFrom=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().from):undefined;savedDashboard.timeTo=savedDashboard.timeRestore?_filter_utils.FilterUtils.convertTimeToUTCString(timeFilter.getTime().to):undefined;var timeRestoreObj=_lodash2.default.pick(timeFilter.getRefreshInterval(),["display","pause","section","value"]);savedDashboard.refreshInterval=savedDashboard.timeRestore?timeRestoreObj:undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.getAppStateDefaults=getAppStateDefaults;var _dashboard_view_mode=__webpack_require__(36);var _filter_utils=__webpack_require__(344);function getAppStateDefaults(savedDashboard,hideWriteControls){var appState={fullScreenMode:false,title:savedDashboard.title,description:savedDashboard.description,timeRestore:savedDashboard.timeRestore,panels:savedDashboard.panelsJSON?JSON.parse(savedDashboard.panelsJSON):[],options:savedDashboard.optionsJSON?JSON.parse(savedDashboard.optionsJSON):{},query:_filter_utils.FilterUtils.getQueryFilterForDashboard(savedDashboard),filters:_filter_utils.FilterUtils.getFilterBarsForDashboard(savedDashboard),viewMode:savedDashboard.id||hideWriteControls?_dashboard_view_mode.DashboardViewMode.VIEW:_dashboard_view_mode.DashboardViewMode.EDIT};if(savedDashboard.uiStateJSON){var uiState=JSON.parse(savedDashboard.uiStateJSON);appState.panels.forEach(function(panel){panel.embeddableConfig=uiState["P-"+panel.panelIndex]});delete savedDashboard.uiStateJSON}appState.panels.forEach(function(panel){if(panel.columns||panel.sort){panel.embeddableConfig=_extends({},panel.embeddableConfig,{columns:panel.columns,sort:panel.sort});delete panel.columns;delete panel.sort}});return appState}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateAppState=migrateAppState;function migrateAppState(appState){if(appState.uiState){appState.panels.forEach(function(panel){panel.embeddableConfig=appState.uiState["P-"+panel.panelIndex]});delete appState.uiState;appState.save()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showCloneModal=showCloneModal;var _i18n=__webpack_require__(14);var _clone_modal=__webpack_require__(1720);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _i18n2=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showCloneModal(onClone,title){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onCloneConfirmed=function onCloneConfirmed(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate){onClone(newTitle,isTitleDuplicateConfirmed,onTitleDuplicate).then(function(_ref){var id=_ref.id,error=_ref.error;if(id||error){closeModal()}})};document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_clone_modal.DashboardCloneModal,{onClone:onCloneConfirmed,onClose:closeModal,title:_i18n2.i18n.translate("kbn.dashboard.topNav.showCloneModal.dashboardCopyTitle",{defaultMessage:"{title} Copy",values:{title:title}})}));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardCloneModal=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DashboardCloneModalUi=function(_React$Component){_inherits(DashboardCloneModalUi,_React$Component);function DashboardCloneModalUi(props){var _this2=this;_classCallCheck(this,DashboardCloneModalUi);var _this=_possibleConstructorReturn(this,(DashboardCloneModalUi.__proto__||Object.getPrototypeOf(DashboardCloneModalUi)).call(this,props));_this.onTitleDuplicate=function(){_this.setState({isTitleDuplicateConfirmed:true,hasTitleDuplicate:true})};_this.cloneDashboard=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.next=3;return _this.props.onClone(_this.state.newDashboardName,_this.state.isTitleDuplicateConfirmed,_this.onTitleDuplicate);case 3:if(_this._isMounted){_this.setState({isLoading:false})}case 4:case"end":return _context.stop()}}},_callee,_this2)}));_this.onInputChange=function(event){_this.setState({newDashboardName:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})};_this.renderDuplicateTitleCallout=function(){if(!_this.state.hasTitleDuplicate){return}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_this.props.intl.formatMessage({id:"kbn.dashboard.topNav.cloneModal.dashboardExistsTitle",defaultMessage:"A Dashboard with the title {newDashboardName} already exists."},{newDashboardName:"'"+_this.state.newDashboardName+"'"}),color:"warning","data-test-subj":"titleDupicateWarnMsg"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.dashboardExistsDescription",defaultMessage:"Click {confirmClone} to clone the dashboard with the duplicate title.",values:{confirmClone:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmCloneDescription",defaultMessage:"Confirm Clone"}))}}))),_react2.default.createElement(_eui.EuiSpacer,null))};_this.state={newDashboardName:props.title,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false};return _this}_createClass(DashboardCloneModalUi,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"dashboardCloneModal",className:"dshCloneModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cloneDashboardModalHeaderTitle",defaultMessage:"Clone Dashboard"}))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.enterNewNameForDashboardDescription",defaultMessage:"Please enter a new name for your dashboard."}))),_react2.default.createElement(_eui.EuiSpacer,null),this.renderDuplicateTitleCallout(),_react2.default.createElement(_eui.EuiFieldText,{autoFocus:true,"data-test-subj":"clonedDashboardTitle",value:this.state.newDashboardName,onChange:this.onInputChange,isInvalid:this.state.hasTitleDuplicate})),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"cloneCancelButton",onClick:this.props.onClose},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"cloneConfirmButton",onClick:this.cloneDashboard,isLoading:this.state.isLoading},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.cloneModal.confirmButtonLabel",defaultMessage:"Confirm Clone"})))))}}]);return DashboardCloneModalUi}(_react2.default.Component);DashboardCloneModalUi.propTypes={onClone:_propTypes2.default.func,onClose:_propTypes2.default.func,title:_propTypes2.default.string};var DashboardCloneModal=exports.DashboardCloneModal=(0,_react3.injectI18n)(DashboardCloneModalUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardSaveModal=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _saved_object_save_modal=__webpack_require__(342);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DashboardSaveModalUi=function(_React$Component){_inherits(DashboardSaveModalUi,_React$Component);function DashboardSaveModalUi(props){_classCallCheck(this,DashboardSaveModalUi);var _this=_possibleConstructorReturn(this,(DashboardSaveModalUi.__proto__||Object.getPrototypeOf(DashboardSaveModalUi)).call(this,props));_this.saveDashboard=function(_ref){var newTitle=_ref.newTitle,newCopyOnSave=_ref.newCopyOnSave,isTitleDuplicateConfirmed=_ref.isTitleDuplicateConfirmed,onTitleDuplicate=_ref.onTitleDuplicate;_this.props.onSave({newTitle:newTitle,newDescription:_this.state.description,newCopyOnSave:newCopyOnSave,newTimeRestore:_this.state.timeRestore,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,onTitleDuplicate:onTitleDuplicate})};_this.onDescriptionChange=function(event){_this.setState({description:event.target.value})};_this.onTimeRestoreChange=function(event){_this.setState({timeRestore:event.target.checked})};_this.state={description:props.description,timeRestore:props.timeRestore};return _this}_createClass(DashboardSaveModalUi,[{key:"renderDashboardSaveOptions",value:function renderDashboardSaveOptions(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.descriptionFormRowLabel",defaultMessage:"Description"})},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"dashboardDescription",value:this.state.description,onChange:this.onDescriptionChange,compressed:true})),_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowLabel",defaultMessage:"Store time with dashboard"}),helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.saveModal.storeTimeWithDashboardFormRowHelpText",defaultMessage:"This changes the time filter to the currently selected time each time this dashboard is loaded."})},_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"storeTimeWithDashboard",checked:this.state.timeRestore,onChange:this.onTimeRestoreChange})))}},{key:"render",value:function render(){return _react2.default.createElement(_saved_object_save_modal.SavedObjectSaveModal,{onSave:this.saveDashboard,onClose:this.props.onClose,title:this.props.title,showCopyOnSave:this.props.showCopyOnSave,objectType:"dashboard",options:this.renderDashboardSaveOptions()})}}]);return DashboardSaveModalUi}(_react2.default.Component);DashboardSaveModalUi.propTypes={onSave:_propTypes2.default.func.isRequired,onClose:_propTypes2.default.func.isRequired,title:_propTypes2.default.string.isRequired,description:_propTypes2.default.string.isRequired,timeRestore:_propTypes2.default.bool.isRequired,showCopyOnSave:_propTypes2.default.bool.isRequired};var DashboardSaveModal=exports.DashboardSaveModal=(0,_react3.injectI18n)(DashboardSaveModalUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showAddPanel=showAddPanel;var _i18n=__webpack_require__(14);var _add_panel=__webpack_require__(1723);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;function showAddPanel(addNewPanel,addNewVis,visTypes){if(isOpen){return}isOpen=true;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container);isOpen=false};var addNewVisWithCleanup=function addNewVisWithCleanup(){onClose();addNewVis()};document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_add_panel.DashboardAddPanel,{onClose:onClose,visTypes:visTypes,addNewPanel:addNewPanel,addNewVis:addNewVisWithCleanup}));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardAddPanel=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _notify=__webpack_require__(10);var _saved_object_finder=__webpack_require__(568);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VIS_TAB_ID="vis";var SAVED_SEARCH_TAB_ID="search";var DashboardAddPanelUi=function(_React$Component){_inherits(DashboardAddPanelUi,_React$Component);function DashboardAddPanelUi(props){_classCallCheck(this,DashboardAddPanelUi);var _this=_possibleConstructorReturn(this,(DashboardAddPanelUi.__proto__||Object.getPrototypeOf(DashboardAddPanelUi)).call(this,props));_this.onSelectedTabChanged=function(tab){_this.setState({selectedTab:tab})};_this.onAddPanel=function(id,type){_this.props.addNewPanel(id,type);if(_this.lastToast){_notify.toastNotifications.remove(_this.lastToast)}_this.lastToast=_notify.toastNotifications.addSuccess({title:_this.props.intl.formatMessage({id:"kbn.dashboard.topNav.addPanel.selectedTabAddedToDashboardSuccessMessageTitle",defaultMessage:"{selectedTabName} was added to your dashboard"},{selectedTabName:_this.state.selectedTab.name}),"data-test-subj":_this.state.selectedTab.toastDataTestSubj})};var addNewVisBtn=_react2.default.createElement(_eui.EuiButton,{onClick:_this.props.addNewVis,"data-test-subj":"addNewSavedObjectLink"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.addPanel.addNewVisualizationButtonLabel",defaultMessage:"Add new Visualization"}));var tabs=[{id:VIS_TAB_ID,name:props.intl.formatMessage({id:"kbn.dashboard.topNav.addPanel.visualizationTabName",defaultMessage:"Visualization"}),dataTestSubj:"addVisualizationTab",toastDataTestSubj:"addVisualizationToDashboardSuccess",savedObjectFinder:_react2.default.createElement(_saved_object_finder.SavedObjectFinder,{key:"visSavedObjectFinder",callToActionButton:addNewVisBtn,onChoose:_this.onAddPanel,visTypes:_this.props.visTypes,noItemsMessage:props.intl.formatMessage({id:"kbn.dashboard.topNav.addPanel.visSavedObjectFinder.noMatchingVisualizationsMessage",defaultMessage:"No matching visualizations found."}),savedObjectType:"visualization"})},{id:SAVED_SEARCH_TAB_ID,name:props.intl.formatMessage({id:"kbn.dashboard.topNav.addPanel.savedSearchTabName",defaultMessage:"Saved Search"}),dataTestSubj:"addSavedSearchTab",toastDataTestSubj:"addSavedSearchToDashboardSuccess",savedObjectFinder:_react2.default.createElement(_saved_object_finder.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:_this.onAddPanel,noItemsMessage:props.intl.formatMessage({id:"kbn.dashboard.topNav.addPanel.searchSavedObjectFinder.noMatchingVisualizationsMessage",defaultMessage:"No matching saved searches found."}),savedObjectType:"search"})}];_this.state={tabs:tabs,selectedTab:tabs[0]};return _this}_createClass(DashboardAddPanelUi,[{key:"renderTabs",value:function renderTabs(){var _this2=this;return this.state.tabs.map(function(tab){return _react2.default.createElement(_eui.EuiTab,{onClick:function onClick(){return _this2.onSelectedTabChanged(tab)},isSelected:tab.id===_this2.state.selectedTab.id,key:tab.id,"data-test-subj":tab.dataTestSubj},tab.name)})}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardAddPanel"},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.topNav.addPanelsTitle",defaultMessage:"Add Panels"}))),_react2.default.createElement(_eui.EuiTabs,null,this.renderTabs()),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.state.selectedTab.savedObjectFinder))}}]);return DashboardAddPanelUi}(_react2.default.Component);DashboardAddPanelUi.propTypes={onClose:_propTypes2.default.func.isRequired,visTypes:_propTypes2.default.object.isRequired,addNewPanel:_propTypes2.default.func.isRequired,addNewVis:_propTypes2.default.func.isRequired};var DashboardAddPanel=exports.DashboardAddPanel=(0,_react3.injectI18n)(DashboardAddPanelUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showOptionsPopover=showOptionsPopover;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _i18n=__webpack_require__(14);var _options=__webpack_require__(1725);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isOpen=false;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);isOpen=false};function showOptionsPopover(_ref){var anchorElement=_ref.anchorElement,darkTheme=_ref.darkTheme,onDarkThemeChange=_ref.onDarkThemeChange,useMargins=_ref.useMargins,onUseMarginsChange=_ref.onUseMarginsChange,hidePanelTitles=_ref.hidePanelTitles,onHidePanelTitlesChange=_ref.onHidePanelTitlesChange;if(isOpen){onClose();return}isOpen=true;document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_eui.EuiWrappingPopover,{className:"kuiLocalNav__popover",anchorClassName:"kuiLocalNav__popoverAnchor",id:"popover",button:anchorElement,isOpen:true,closePopover:onClose},_react2.default.createElement(_options.OptionsMenu,{darkTheme:darkTheme,onDarkThemeChange:onDarkThemeChange,useMargins:useMargins,onUseMarginsChange:onUseMarginsChange,hidePanelTitles:hidePanelTitles,onHidePanelTitlesChange:onHidePanelTitlesChange})));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionsMenu=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var OptionsMenuUi=function(_Component){_inherits(OptionsMenuUi,_Component);function OptionsMenuUi(){var _ref;var _temp,_this,_ret;_classCallCheck(this,OptionsMenuUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=OptionsMenuUi.__proto__||Object.getPrototypeOf(OptionsMenuUi)).call.apply(_ref,[this].concat(args))),_this),_this.state={darkTheme:_this.props.darkTheme,useMargins:_this.props.useMargins,hidePanelTitles:_this.props.hidePanelTitles},_this.handleDarkThemeChange=function(evt){var isChecked=evt.target.checked;_this.props.onDarkThemeChange(isChecked);_this.setState({darkTheme:isChecked})},_this.handleUseMarginsChange=function(evt){var isChecked=evt.target.checked;_this.props.onUseMarginsChange(isChecked);_this.setState({useMargins:isChecked})},_this.handleHidePanelTitlesChange=function(evt){var isChecked=evt.target.checked;_this.props.onHidePanelTitlesChange(isChecked);_this.setState({hidePanelTitles:isChecked})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(OptionsMenuUi,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiForm,{"data-test-subj":"dashboardOptionsMenu"},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiSwitch,{label:this.props.intl.formatMessage({id:"kbn.dashboard.topNav.options.useDarkThemeSwitchLabel",defaultMessage:"Use dark theme"}),checked:this.state.darkTheme,onChange:this.handleDarkThemeChange,"data-test-subj":"dashboardDarkThemeCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiSwitch,{label:this.props.intl.formatMessage({id:"kbn.dashboard.topNav.options.useMarginsBetweenPanelsSwitchLabel",defaultMessage:"Use margins between panels"}),checked:this.state.useMargins,onChange:this.handleUseMarginsChange,"data-test-subj":"dashboardMarginsCheckbox"})),_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiSwitch,{label:this.props.intl.formatMessage({id:"kbn.dashboard.topNav.options.hideAllPanelTitlesSwitchLabel",defaultMessage:"Hide all panel titles"}),checked:this.state.hidePanelTitles,onChange:this.handleHidePanelTitlesChange,"data-test-subj":"dashboardPanelTitlesCheckbox"})))}}]);return OptionsMenuUi}(_react.Component);OptionsMenuUi.propTypes={darkTheme:_propTypes2.default.bool.isRequired,onDarkThemeChange:_propTypes2.default.func.isRequired,useMargins:_propTypes2.default.bool.isRequired,onUseMarginsChange:_propTypes2.default.func.isRequired,hidePanelTitles:_propTypes2.default.bool.isRequired,onHidePanelTitlesChange:_propTypes2.default.func.isRequired};var OptionsMenu=exports.OptionsMenu=(0,_react3.injectI18n)(OptionsMenuUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _new_vis_modal=__webpack_require__(343);Object.defineProperty(exports,"NewVisModal",{enumerable:true,get:function get(){return _new_vis_modal.NewVisModal}});var _show_new_vis=__webpack_require__(1727);Object.defineProperty(exports,"showNewVisModal",{enumerable:true,get:function get(){return _show_new_vis.showNewVisModal}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showNewVisModal=showNewVisModal;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _reactDom2=_interopRequireDefault(_reactDom);var _i18n=__webpack_require__(14);var _new_vis_modal=__webpack_require__(343);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function showNewVisModal(visTypeRegistry,_a){var _b=(_a===void 0?{}:_a).editorParams,editorParams=_b===void 0?[]:_b;var container=document.createElement("div");var onClose=function onClose(){_reactDom2.default.unmountComponentAtNode(container);document.body.removeChild(container)};document.body.appendChild(container);var element=_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_new_vis_modal.NewVisModal,{isOpen:true,onClose:onClose,visTypesRegistry:visTypeRegistry,editorParams:editorParams}));_reactDom2.default.render(element,container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportProvider=DashboardViewportProvider;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _store=__webpack_require__(574);var _reactRedux=__webpack_require__(98);var _dashboard_viewport_container=__webpack_require__(1729);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewportProvider(props){return _react2.default.createElement(_reactRedux.Provider,{store:_store.store},_react2.default.createElement(_dashboard_viewport_container.DashboardViewportContainer,props))}DashboardViewportProvider.propTypes={getEmbeddableFactory:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewportContainer=undefined;var _reactRedux=__webpack_require__(98);var _dashboard_viewport=__webpack_require__(1730);var _actions=__webpack_require__(60);var _selectors=__webpack_require__(94);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;var maximizedPanelId=(0,_selectors.getMaximizedPanelId)(dashboard);return{maximizedPanelId:maximizedPanelId,panelCount:Object.keys((0,_selectors.getPanels)(dashboard)).length,description:(0,_selectors.getDescription)(dashboard),title:(0,_selectors.getTitle)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard),isFullScreenMode:(0,_selectors.getFullScreenMode)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onExitFullScreenMode:function onExitFullScreenMode(){return dispatch((0,_actions.updateIsFullScreenMode)(false))}}};var DashboardViewportContainer=exports.DashboardViewportContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_viewport.DashboardViewport)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=DashboardViewport;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _grid=__webpack_require__(1731);var _exit_full_screen=__webpack_require__(1738);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DashboardViewport(_ref){var maximizedPanelId=_ref.maximizedPanelId,getEmbeddableFactory=_ref.getEmbeddableFactory,panelCount=_ref.panelCount,title=_ref.title,description=_ref.description,useMargins=_ref.useMargins,isFullScreenMode=_ref.isFullScreenMode,onExitFullScreenMode=_ref.onExitFullScreenMode;return _react2.default.createElement("div",{"data-shared-items-count":panelCount,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},isFullScreenMode&&_react2.default.createElement(_exit_full_screen.ExitFullScreenButton,{onExitFullScreenMode:onExitFullScreenMode}),_react2.default.createElement(_grid.DashboardGrid,{getEmbeddableFactory:getEmbeddableFactory,maximizedPanelId:maximizedPanelId}))}DashboardViewport.propTypes={getEmbeddableFactory:_propTypes2.default.func,maximizedPanelId:_propTypes2.default.string,panelCount:_propTypes2.default.number,title:_propTypes2.default.string,description:_propTypes2.default.string,useMargins:_propTypes2.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _dashboard_grid_container=__webpack_require__(1732);Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid_container.DashboardGridContainer}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGridContainer=undefined;var _reactRedux=__webpack_require__(98);var _dashboard_grid=__webpack_require__(1733);var _actions=__webpack_require__(60);var _selectors=__webpack_require__(94);var mapStateToProps=function mapStateToProps(_ref){var dashboard=_ref.dashboard;return{panels:(0,_selectors.getPanels)(dashboard),dashboardViewMode:(0,_selectors.getViewMode)(dashboard),useMargins:(0,_selectors.getUseMargins)(dashboard)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onPanelsUpdated:function onPanelsUpdated(updatedPanels){return dispatch((0,_actions.updatePanels)(updatedPanels))}}};var DashboardGridContainer=exports.DashboardGridContainer=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_dashboard_grid.DashboardGrid)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _reactGridLayout=__webpack_require__(1956);var _reactGridLayout2=_interopRequireDefault(_reactGridLayout);var _classnames=__webpack_require__(48);var _classnames2=_interopRequireDefault(_classnames);__webpack_require__(1735);__webpack_require__(1736);var _panel_utils=__webpack_require__(573);var _dashboard_view_mode=__webpack_require__(36);var _panel=__webpack_require__(578);var _notify=__webpack_require__(10);var _dashboard_constants=__webpack_require__(58);var _reactSizeme=__webpack_require__(1959);var _reactSizeme2=_interopRequireDefault(_reactSizeme);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var config={monitorWidth:true};var lastValidGridSize=0;function ensureWindowScrollsToBottom(layout,oldResizeItem,l,placeholder,event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames2.default)({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout2.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".dshPanel__title",layout:layout,onLayoutChange:onLayoutChange,measureBeforeMount:false,onResize:ensureWindowScrollsToBottom},children)}var ResponsiveSizedGrid=(0,_reactSizeme2.default)(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){_classCallCheck(this,DashboardGridUi);var _this=_possibleConstructorReturn(this,(DashboardGridUi.__proto__||Object.getPrototypeOf(DashboardGridUi)).call(this,props));_initialiseProps.call(_this);_this.gridItems={};var isLayoutInvalid=false;var layout=void 0;try{layout=_this.buildLayoutFromPanels()}catch(error){isLayoutInvalid=true;_notify.toastNotifications.addDanger({title:props.intl.formatMessage({id:"kbn.dashboard.dashboardGrid.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),text:error.message});window.location="#"+_dashboard_constants.DashboardConstants.LANDING_PAGE_PATH}_this.state={focusedPanelIndex:undefined,layout:layout,isLayoutInvalid:isLayoutInvalid};_this.embeddableFactoryMap={};return _this}_createClass(DashboardGridUi,[{key:"buildLayoutFromPanels",value:function buildLayoutFromPanels(){var _this2=this;return _lodash2.default.map(this.props.panels,function(panel){var panelVersion=panel.version?_panel_utils.PanelUtils.parseVersion(panel.version):_panel_utils.PanelUtils.parseVersion("6.0.0");if(panelVersion.major<6||panelVersion.major===6&&panelVersion.minor<1){_panel_utils.PanelUtils.convertPanelDataPre_6_1(panel)}if(panelVersion.major<6||panelVersion.major===6&&panelVersion.minor<3){_panel_utils.PanelUtils.convertPanelDataPre_6_3(panel,_this2.props.useMargins)}return panel.gridData})}},{key:"createEmbeddableFactoriesMap",value:function createEmbeddableFactoriesMap(panels){var _this3=this;Object.values(panels).map(function(panel){if(!_this3.embeddableFactoryMap[panel.type]){_this3.embeddableFactoryMap[panel.type]=_this3.props.getEmbeddableFactory(panel.type)}})}},{key:"componentWillMount",value:function componentWillMount(){this.createEmbeddableFactoriesMap(this.props.panels)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.createEmbeddableFactoriesMap(nextProps.panels)}},{key:"renderDOM",value:function renderDOM(){var _this4=this;var _props=this.props,panels=_props.panels,maximizedPanelId=_props.maximizedPanelId;var focusedPanelIndex=this.state.focusedPanelIndex;var panelsInOrder=Object.keys(panels).map(function(key){return panels[key]});panelsInOrder.sort(function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}});return _lodash2.default.map(panelsInOrder,function(panel){var expandPanel=maximizedPanelId!==undefined&&maximizedPanelId===panel.panelIndex;var hidePanel=maximizedPanelId!==undefined&&maximizedPanelId!==panel.panelIndex;var classes=(0,_classnames2.default)({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.panelIndex?"2":"auto"},className:classes,key:panel.panelIndex,ref:function ref(reactGridItem){_this4.gridItems[panel.panelIndex]=reactGridItem}},_react2.default.createElement(_panel.DashboardPanel,{panelId:panel.panelIndex,embeddableFactory:_this4.embeddableFactoryMap[panel.type],onPanelFocused:_this4.onPanelFocused,onPanelBlurred:_this4.onPanelBlurred}))})}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var _props2=this.props,dashboardViewMode=_props2.dashboardViewMode,maximizedPanelId=_props2.maximizedPanelId,useMargins=_props2.useMargins;var isViewMode=dashboardViewMode===_dashboard_view_mode.DashboardViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:maximizedPanelId,useMargins:useMargins},this.renderDOM())}}]);return DashboardGridUi}(_react2.default.Component);var _initialiseProps=function _initialiseProps(){var _this5=this;this.onLayoutChange=function(layout){var _props3=_this5.props,onPanelsUpdated=_props3.onPanelsUpdated,panels=_props3.panels;var updatedPanels=layout.reduce(function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_extends({},panels[panelLayout.i],{panelIndex:panelLayout.i,gridData:_lodash2.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc},[]);onPanelsUpdated(updatedPanels)};this.onPanelFocused=function(focusedPanelIndex){_this5.setState({focusedPanelIndex:focusedPanelIndex})};this.onPanelBlurred=function(blurredPanelIndex){if(_this5.state.focusedPanelIndex===blurredPanelIndex){_this5.setState({focusedPanelIndex:undefined})}}};DashboardGridUi.propTypes={panels:_propTypes2.default.object.isRequired,getEmbeddableFactory:_propTypes2.default.func.isRequired,dashboardViewMode:_propTypes2.default.oneOf([_dashboard_view_mode.DashboardViewMode.EDIT,_dashboard_view_mode.DashboardViewMode.VIEW]).isRequired,onPanelsUpdated:_propTypes2.default.func.isRequired,maximizedPanelId:_propTypes2.default.string,useMargins:_propTypes2.default.bool.isRequired};var DashboardGrid=exports.DashboardGrid=(0,_react3.injectI18n)(DashboardGridUi)},,function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exit_full_screen_button=__webpack_require__(1739);Object.defineProperty(exports,"ExitFullScreenButton",{enumerable:true,get:function get(){return _exit_full_screen_button.ExitFullScreenButton}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExitFullScreenButton=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _react3=__webpack_require__(5);var _components=__webpack_require__(115);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ExitFullScreenButtonUi=function(_PureComponent){_inherits(ExitFullScreenButtonUi,_PureComponent);function ExitFullScreenButtonUi(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ExitFullScreenButtonUi);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ExitFullScreenButtonUi.__proto__||Object.getPrototypeOf(ExitFullScreenButtonUi)).call.apply(_ref,[this].concat(args))),_this),_this.onKeyDown=function(e){if(e.keyCode===_eui.keyCodes.ESCAPE){_this.props.onExitFullScreenMode()}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ExitFullScreenButtonUi,[{key:"componentWillMount",value:function componentWillMount(){document.addEventListener("keydown",this.onKeyDown,false);_chrome2.default.setVisible(false)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown,false);_chrome2.default.setVisible(true)}},{key:"render",value:function render(){var intl=this.props.intl;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiScreenReaderOnly,null,_react2.default.createElement("p",{"aria-live":"polite"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.exitFullScreenButton.fullScreenModeDescription",defaultMessage:"In full screen mode, press ESC to exit."}))),_react2.default.createElement("div",{className:"dshExitFullScreenButton"},_react2.default.createElement(_components.KuiButton,{type:"hollow","aria-label":intl.formatMessage({id:"common.ui.exitFullScreenButton.exitFullScreenModeButtonAreaLabel",defaultMessage:"Exit full screen mode"}),className:"dshExitFullScreenButton__mode",onClick:this.props.onExitFullScreenMode},_react2.default.createElement("span",{className:"dshExitFullScreenButton__logo","data-test-subj":"exitFullScreenModeLogo"}),_react2.default.createElement("span",{className:"dshExitFullScreenButton__text","data-test-subj":"exitFullScreenModeText"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.exitFullScreenButton.exitFullScreenModeButtonLabel",defaultMessage:"Exit full screen"}),_react2.default.createElement("span",{className:"kuiIcon fa fa-angle-left"})))))}}]);return ExitFullScreenButtonUi}(_react.PureComponent);ExitFullScreenButtonUi.propTypes={onExitFullScreenMode:_propTypes2.default.func.isRequired};var ExitFullScreenButton=exports.ExitFullScreenButton=(0,_react3.injectI18n)(ExitFullScreenButtonUi)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);_modules.uiModules.get("kibana").provider("dashboardConfig",function(){var hideWriteControls=false;return{turnHideWriteControlsOn:function turnHideWriteControlsOn(){hideWriteControls=true},$get:function $get(){return{getHideWriteControls:function getHideWriteControls(){return hideWriteControls}}}}})},function(module,exports){module.exports='<dashboard-app\n  class="app-container dshAppContainer"\n  ng-class="{\'dshAppContainer--withMargins\': model.useMargins}"\n>\n  \x3c!-- Local nav. --\x3e\n  <kbn-top-nav name="dashboard" config="topNavMenu">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Title. --\x3e\n        <div data-transclude-slot="topLeftCorner">\n          <div\n            class="kuiLocalBreadcrumbs"\n            data-test-subj="breadcrumbs"\n            role="heading"\n            aria-level="1"\n            ng-if="showPluginBreadcrumbs">\n            <div class="kuiLocalBreadcrumb">\n              <a\n                class="kuiLocalBreadcrumb__link"\n                href="{{landingPageUrl()}}"\n                i18n-id="kbn.dashboard.dashboardLinkLabel"\n                i18n-default-message="Dashboard"\n              ></a>\n            </div>\n            <div class="kuiLocalBreadcrumb">\n              {{ getDashTitle() }}\n            </div>\n          </div>\n        </div>\n\n      \x3c!-- Search. --\x3e\n      <div ng-show="chrome.getVisible()" class="fullWidth" data-transclude-slot="bottomRow">\n        <query-bar\n          query="model.query"\n          app-name="\'dashboard\'"\n          on-submit="updateQueryAndFetch"\n          index-patterns="indexPatterns"\n        ></query-bar>\n      </div>\n    </div>\n  </kbn-top-nav>\n\n  \x3c!-- Filters. --\x3e\n  <filter-bar\n    ng-show="showFilterBar()"\n    state="state"\n    index-patterns="indexPatterns"\n  ></filter-bar>\n\n  <div\n    ng-show="getShouldShowEditHelp()"\n    class="dshStartScreen"\n  >\n    <h2\n      class="kuiTitle kuiVerticalRhythm"\n      i18n-id="kbn.dashboard.fillDashboardTitle"\n      i18n-default-message="This dashboard is empty. Let&rsquo;s fill it up!"\n    >\n    </h2>\n\n    <p>\n      <span\n        i18n-id="kbn.dashboard.addVisualizationDescription1"\n        i18n-default-message="Click the "\n        i18n-context="Part of composite label kbn.dashboard.addVisualizationDescription1 + kbn.dashboard.addVisualizationLinkText + kbn.dashboard.addVisualizationDescription2"\n      ></span>\n      <a\n        kbn-accessible-click\n        class="kuiButton kuiButton--primary kuiButton--small"\n        ng-click="showAddPanel()"\n        aria-label="{{::\'kbn.dashboard.addVisualizationLinkAriaLabel\' | i18n: { defaultMessage: \'Add visualization\' } }}"\n        data-test-subj="emptyDashboardAddPanelButton"\n        i18n-id="kbn.dashboard.addVisualizationLinkText"\n        i18n-default-message="Add"\n      ></a>\n      <span\n        i18n-id="kbn.dashboard.addVisualizationDescription2"\n        i18n-default-message=" button in the menu bar above to add a visualization to the dashboard. {br}If you haven\'t set up any visualizations yet, {visitVisualizeAppLink} to create your first visualization."\n        i18n-values="{\n          html_br: \'<br/>\',\n          html_visitVisualizeAppLink: \'<a class=\\\'kuiLink\\\' href=\\\'#/visualize\\\'>\' + visitVisualizeAppLinkText + \'</a>\'\n        }"\n      ></span>\n    </p>\n  </div>\n\n  <div ng-show="getShouldShowViewHelp()" class="dshStartScreen">\n    <h2\n      class="kuiTitle kuiVerticalRhythm"\n      i18n-id="kbn.dashboard.fillDashboardTitle"\n      i18n-default-message="This dashboard is empty. Let&rsquo;s fill it up!"\n    >\n    </h2>\n\n    <p class="kuiText kuiVerticalRhythm">\n      <span\n        i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardDescription1"\n        i18n-default-message="Click the "\n        i18n-context="Part of composite label kbn.dashboard.howToStartWorkingOnNewDashboardDescription1 + kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText + kbn.dashboard.howToStartWorkingOnNewDashboardDescription2"\n      ></span>\n      <a\n        kbn-accessible-click\n        class="kuiButton kuiButton--primary kuiButton--small"\n        ng-click="enterEditMode()"\n        i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardEditLinkText"\n        i18n-default-message="Edit"\n      ></a>\n      <span\n        i18n-id="kbn.dashboard.howToStartWorkingOnNewDashboardDescription2"\n        i18n-default-message=" button in the menu bar above to start working on your new dashboard."\n      ></span>\n    </p>\n  </div>\n\n  <dashboard-viewport-provider\n    get-embeddable-factory="getEmbeddableFactory"\n  >\n  </dashboard-viewport-provider>\n\n</dashboard-app>\n'},function(module,exports){module.exports='<dashboard-listing\n  find="find"\n  delete="delete"\n  listing-limit="listingLimit"\n  hide-write-controls="hideWriteControls"\n  initial-filter="initialFilter"\n/>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardListing=exports.EMPTY_FILTER=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _notify=__webpack_require__(10);var _eui=__webpack_require__(2);var _dashboard_constants=__webpack_require__(58);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EMPTY_FILTER=exports.EMPTY_FILTER="";var DashboardListingUi=function(_React$Component){_inherits(DashboardListingUi,_React$Component);function DashboardListingUi(props){var _this2=this;_classCallCheck(this,DashboardListingUi);var _this=_possibleConstructorReturn(this,(DashboardListingUi.__proto__||Object.getPrototypeOf(DashboardListingUi)).call(this,props));_this.debouncedFetch=_lodash2.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(filter){var response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.find(filter);case 2:response=_context.sent;if(_this._isMounted){_context.next=5;break}return _context.abrupt("return");case 5:if(filter===_this.state.filter){_this.setState({hasInitialFetchReturned:true,isFetchingItems:false,dashboards:response.hits,totalDashboards:response.total,showLimitError:response.total>_this.props.listingLimit})}case 6:case"end":return _context.stop()}}},_callee,_this2)}));return function(_x){return _ref.apply(this,arguments)}}(),300);_this.fetchItems=function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.filter))};_this.deleteSelectedItems=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _this.props.delete(_this.state.selectedIds);case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2["catch"](0);_notify.toastNotifications.addDanger({title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.unableToDeleteDashboardsDangerMessage",defaultMessage:"Unable to delete dashboard(s)"}),text:""+_context2.t0});case 8:_this.fetchItems();_this.setState({selectedIds:[]});_this.closeDeleteModal();case 11:case"end":return _context2.stop()}}},_callee2,_this2,[[0,5]])}));_this.closeDeleteModal=function(){_this.setState({showDeleteModal:false})};_this.openDeleteModal=function(){_this.setState({showDeleteModal:true})};_this.onTableChange=function(_ref3){var page=_ref3.page,_ref3$sort=_ref3.sort,sort=_ref3$sort===undefined?{}:_ref3$sort;var pageIndex=page.index,pageSize=page.size;var sortField=sort.field,sortDirection=sort.direction;if(_this.state.sortField===sortField&&_this.state.sortDirection==="desc"&&sortDirection==="asc"){var defaultSort=defaultSortOrder(_this.state.filter);sortField=defaultSort.sortField;sortDirection=defaultSort.sortDirection}_this.setState({page:pageIndex,perPage:pageSize,sortField:sortField,sortDirection:sortDirection})};_this.getPageOfItems=function(){var dashboardsCopy=_this.state.dashboards.slice();if(_this.state.sortField){dashboardsCopy.sort(function(a,b){var fieldA=_lodash2.default.get(a,_this.state.sortField,"");var fieldB=_lodash2.default.get(b,_this.state.sortField,"");var order=1;if(_this.state.sortDirection==="desc"){order=-1}return order*fieldA.toLowerCase().localeCompare(fieldB.toLowerCase())})}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return dashboardsCopy.slice(startIndex,lastIndex)};_this.state=_extends({},defaultSortOrder(_this.props.initialFilter),{hasInitialFetchReturned:false,isFetchingItems:false,showDeleteModal:false,showLimitError:false,filter:_this.props.initialFilter,dashboards:[],selectedIds:[],page:0,perPage:20});return _this}_createClass(DashboardListingUi,[{key:"componentWillMount",value:function componentWillMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.fetchItems()}},{key:"setFilter",value:function setFilter(filter){this.setState(_extends({},defaultSortOrder(filter),{filter:filter}),this.fetchItems)}},{key:"hasNoDashboards",value:function hasNoDashboards(){if(!this.state.isFetchingItems&&this.state.dashboards.length===0&&!this.state.filter){return true}return false}},{key:"renderConfirmDeleteModal",value:function renderConfirmDeleteModal(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.deleteSelectedDashboardsConfirmModal.title",defaultMessage:"Delete selected dashboards?"}),onCancel:this.closeDeleteModal,onConfirm:this.deleteSelectedItems,cancelButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.deleteSelectedDashboardsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.deleteSelectedDashboardsConfirmModal.confirmButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:"cancel"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.deleteDashboardsConfirmModalDescription",defaultMessage:"You can't recover deleted dashboards."}))))}},{key:"renderListingLimitWarning",value:function renderListingLimitWarning(){if(this.state.showLimitError){return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.listingLimitExceededTitle",defaultMessage:"Listing limit exceeded"}),color:"warning",iconType:"help"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.listingLimitExceededDescription",defaultMessage:"You have {totalDashboards} dashboards, but your {listingLimitText} setting prevents the table below from displaying more than {listingLimitValue}. You can change this setting under {advancedSettingsLink}.",values:{totalDashboards:this.state.totalDashboards,listingLimitValue:this.props.listingLimit,listingLimitText:_react2.default.createElement("strong",null,"listingLimit"),advancedSettingsLink:_react2.default.createElement(_eui.EuiLink,{href:"#/management/kibana/settings"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.listingLimitExceeded.advancedSettingsLinkText",defaultMessage:"Advanced Settings"}))}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))}}},{key:"renderNoResultsMessage",value:function renderNoResultsMessage(){if(this.state.isFetchingItems){return""}return _react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.noMatchedDashboardsMessage",defaultMessage:"No dashboards matched your search."})}},{key:"renderNoItemsMessage",value:function renderNoItemsMessage(){if(this.props.hideWriteControls){return _react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h2",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.noDashboardsItemsMessage",defaultMessage:"Looks like you don't have any dashboards."}))))}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"dashboardApp",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.title",defaultMessage:"Create your first dashboard"})),body:_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.combineDataViewFromKibanaAppDescription",defaultMessage:"You can combine data views from any Kibana app into one dashboard and see everything in one place."})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.newToKibanaDescription",defaultMessage:"New to Kibana? {sampleDataInstallLink} to take a test drive.",values:{sampleDataInstallLink:_react2.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.sampleDataInstallLinkText",defaultMessage:"Install some sample data"}))}}))),actions:_react2.default.createElement(_eui.EuiButton,{href:"#"+_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,fill:true,iconType:"plusInCircle","data-test-subj":"createDashboardPromptButton"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboard.createButtonLabel",defaultMessage:"Create new dashboard"}))}))}},{key:"renderSearchBar",value:function renderSearchBar(){var _this3=this;var intl=this.props.intl;var deleteBtn=void 0;if(this.state.selectedIds.length>0){deleteBtn=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{color:"danger",onClick:this.openDeleteModal,"data-test-subj":"deleteSelectedDashboards",key:"delete"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.searchBar.deleteSelectedButtonLabel",defaultMessage:"Delete selected"})))}return _react2.default.createElement(_eui.EuiFlexGroup,null,deleteBtn,_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFieldSearch,{"aria-label":intl.formatMessage({id:"kbn.dashboard.listing.searchBar.searchFieldAriaLabel",defaultMessage:"Filter dashboards",description:'"Filter" is used as a verb here, similar to "search through dashboards".'}),placeholder:intl.formatMessage({id:"kbn.dashboard.listing.searchBar.searchFieldPlaceholder",defaultMessage:"Search…"}),fullWidth:true,value:this.state.filter,onChange:function onChange(e){return _this3.setFilter(e.target.value)},"data-test-subj":"searchFilter"})))}},{key:"renderTable",value:function renderTable(){var _this4=this;var intl=this.props.intl;var tableColumns=[{field:"title",name:intl.formatMessage({id:"kbn.dashboard.listing.table.titleColumnName",defaultMessage:"Title"}),sortable:true,render:function render(field,record){return _react2.default.createElement(_eui.EuiLink,{href:"#"+(0,_dashboard_constants.createDashboardEditUrl)(record.id),"data-test-subj":"dashboardListingTitleLink-"+record.title.split(" ").join("-")},field)}},{field:"description",name:intl.formatMessage({id:"kbn.dashboard.listing.table.descriptionColumnName",defaultMessage:"Description"}),dataType:"string",sortable:true}];if(!this.props.hideWriteControls){tableColumns.push({name:intl.formatMessage({id:"kbn.dashboard.listing.table.actionsColumnName",defaultMessage:"Actions"}),actions:[{render:function render(record){return _react2.default.createElement(_eui.EuiLink,{href:"#"+(0,_dashboard_constants.createDashboardEditUrl)(record.id)+"?_a=(viewMode:edit)"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.table.actionsColumn.editLinkText",defaultMessage:"Edit"}))}}]})}var pagination={pageIndex:this.state.page,pageSize:this.state.perPage,totalItemCount:this.state.dashboards.length,pageSizeOptions:[10,20,50]};var selection={onSelectionChange:function onSelectionChange(selection){_this4.setState({selectedIds:selection.map(function(item){return item.id})})}};var sorting={};if(this.state.sortField){sorting.sort={field:this.state.sortField,direction:this.state.sortDirection}}var items=this.state.dashboards.length===0?[]:this.getPageOfItems();return _react2.default.createElement(_eui.EuiBasicTable,{itemId:"id",items:items,loading:this.state.isFetchingItems,columns:tableColumns,selection:selection,noItemsMessage:this.renderNoResultsMessage(),pagination:pagination,sorting:sorting,onChange:this.onTableChange})}},{key:"renderListingOrEmptyState",value:function renderListingOrEmptyState(){if(this.hasNoDashboards()){return this.renderNoItemsMessage()}return this.renderListing()}},{key:"renderListing",value:function renderListing(){var createButton=void 0;if(!this.props.hideWriteControls){createButton=_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{href:"#"+_dashboard_constants.DashboardConstants.CREATE_NEW_DASHBOARD_URL,"data-test-subj":"newDashboardLink",fill:true},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.createNewDashboardButtonLabel",defaultMessage:"Create new dashboard"})))}return _react2.default.createElement("div",null,this.state.showDeleteModal&&this.renderConfirmDeleteModal(),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd","data-test-subj":"top-nav"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.dashboard.listing.dashboardsTitle",defaultMessage:"Dashboards"})))),createButton),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderListingLimitWarning(),this.renderSearchBar(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderTable())}},{key:"renderPageContent",value:function renderPageContent(){if(!this.state.hasInitialFetchReturned){return}return _react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.renderListingOrEmptyState())}},{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPage,{"data-test-subj":"dashboardLandingPage",className:"dshDashboardListing__page",restrictWidth:true},_react2.default.createElement(_eui.EuiPageBody,null,this.renderPageContent()))}}]);return DashboardListingUi}(_react2.default.Component);DashboardListingUi.propTypes={find:_propTypes2.default.func.isRequired,delete:_propTypes2.default.func.isRequired,listingLimit:_propTypes2.default.number.isRequired,hideWriteControls:_propTypes2.default.bool.isRequired,initialFilter:_propTypes2.default.string};DashboardListingUi.defaultProps={initialFilter:EMPTY_FILTER};var DashboardListing=exports.DashboardListing=(0,_react3.injectI18n)(DashboardListingUi);function defaultSortOrder(filter){if(filter.length>0){return{sortField:undefined,sortDirection:undefined}}return{sortField:"title",sortDirection:"asc"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.destroyReact=undefined;exports.updateLandingPage=updateLandingPage;exports.updateSidebar=updateSidebar;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _react3=__webpack_require__(5);__webpack_require__(1745);__webpack_require__(560);__webpack_require__(593);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _i18n=__webpack_require__(14);var _modules=__webpack_require__(3);var _app=__webpack_require__(1896);var _app2=_interopRequireDefault(_app);var _landing=__webpack_require__(1897);var _landing2=_interopRequireDefault(_landing);var _management=__webpack_require__(74);var _feature_catalogue=__webpack_require__(39);var _timefilter=__webpack_require__(19);var _eui=__webpack_require__(2);__webpack_require__(332);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SIDENAV_ID="management-sidenav";var LANDING_ID="management-landing";_routes2.default.when("/management",{template:_landing2.default,k7Breadcrumbs:function k7Breadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB]}});_routes2.default.when("/management/:section",{redirectTo:"/management"});__webpack_require__(1898)({whenMissingRedirectTo:"/management/kibana/index"});function updateLandingPage(version){var node=document.getElementById(LANDING_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"eui-textCenter"},_react2.default.createElement(_eui.EuiIcon,{type:"managementApp",size:"xxl"}),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.landing.header",defaultMessage:"Kibana {version} management",values:{version:version}}))),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.landing.subhead",defaultMessage:"Manage your indices, index patterns, saved objects, Kibana settings, and more."}))),_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiText,{color:"subdued",size:"s",textAlign:"center"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.landing.text",defaultMessage:"A full list of tools can be found in the left menu"})))))),node)}function updateSidebar(items,id){var node=document.getElementById(SIDENAV_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_management.SidebarNav,{sections:items,selectedId:id,className:"mgtSideNav"})),node)}var destroyReact=exports.destroyReact=function destroyReact(id){var node=document.getElementById(id);node&&(0,_reactDom.unmountComponentAtNode)(node)};_modules.uiModules.get("apps/management").directive("kbnManagementApp",function(Private,$location){return{restrict:"E",template:_app2.default,transclude:true,scope:{sectionName:"@section",omitPages:"@omitBreadcrumbPages",pageTitle:"="},link:function link($scope){_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.sections=_management.management.items.inOrder;$scope.section=_management.management.getSection($scope.sectionName)||_management.management;if($scope.section){$scope.section.items.forEach(function(item){item.active=("#"+$location.path()).indexOf(item.url)>-1})}updateSidebar($scope.sections,$scope.section.id);$scope.$on("$destroy",function(){return destroyReact(SIDENAV_ID)});_management.management.addListener(function(){return updateSidebar(_management.management.items.inOrder,$scope.section.id)});updateLandingPage($scope.$root.chrome.getKibanaVersion());$scope.$on("$destroy",function(){return destroyReact(LANDING_ID)})}}});_modules.uiModules.get("apps/management").directive("kbnManagementLanding",function(kbnVersion){return{restrict:"E",link:function link($scope){$scope.sections=_management.management.items.inOrder;$scope.kbnVersion=kbnVersion}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"management",title:i18n("kbn.management.managementLabel",{defaultMessage:"Management"}),description:i18n("kbn.management.managementDescription",{defaultMessage:"Your center console for managing the Elastic Stack."}),icon:"managementApp",path:"/app/kibana#/management",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1746);__webpack_require__(1773);__webpack_require__(1795)},function(module,exports,__webpack_require__){"use strict";var _management=__webpack_require__(74);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _i18n=__webpack_require__(14);var _index=__webpack_require__(1763);var _index2=_interopRequireDefault(_index);var _feature_catalogue=__webpack_require__(39);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _advanced_settings=__webpack_require__(1764);var _i18n2=__webpack_require__(8);var _breadcrumbs=__webpack_require__(1772);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID="reactAdvancedSettings";function updateAdvancedSettings($scope,config,query){$scope.$$postDigest(function(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_advanced_settings.AdvancedSettings,{config:config,query:query})),node)})}function destroyAdvancedSettings(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes2.default.when("/management/kibana/settings/:setting?",{template:_index2.default,k7Breadcrumbs:_breadcrumbs.getBreadcrumbs});_modules.uiModules.get("apps/management").directive("kbnManagementAdvanced",function(config,$route){return{restrict:"E",link:function link($scope){config.watchAll(function(){updateAdvancedSettings($scope,config,$route.current.params.setting||"")},$scope);$scope.$on("$destroy",function(){destroyAdvancedSettings()});$route.updateParams({setting:null})}}});_management.management.getSection("kibana").register("settings",{display:_i18n2.i18n.translate("kbn.management.settings.sectionLabel",{defaultMessage:"Advanced Settings"}),order:20,url:"#/management/kibana/settings"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"advanced_settings",title:i18n("kbn.management.settings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),description:i18n("kbn.management.settings.advancedSettingsDescription",{defaultMessage:"Directly edit settings that control behavior in Kibana."}),icon:"advancedSettingsApp",path:"/app/kibana#/management/kibana/settings",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page_title=__webpack_require__(1748);Object.defineProperty(exports,"PageTitle",{enumerable:true,get:function get(){return _page_title.PageTitle}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageTitle=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageTitle=exports.PageTitle=function PageTitle(){return _react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h1",{"data-test-subj":"managementSettingsTitle"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.pageTitle",defaultMessage:"Settings"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page_subtitle=__webpack_require__(1750);Object.defineProperty(exports,"PageSubtitle",{enumerable:true,get:function get(){return _page_subtitle.PageSubtitle}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var PageSubtitle=exports.PageSubtitle=function PageSubtitle(){return null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page_footer=__webpack_require__(1752);Object.defineProperty(exports,"PageFooter",{enumerable:true,get:function get(){return _page_footer.PageFooter}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var PageFooter=exports.PageFooter=function PageFooter(){return null}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(786)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultValue=isDefaultValue;function isDefaultValue(setting){return setting.isCustom||setting.value===undefined||setting.value===""||String(setting.value)===String(setting.defVal)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toEditableConfig=toEditableConfig;var _get_val_type=__webpack_require__(1756);var _get_aria_name=__webpack_require__(582);var _default_category=__webpack_require__(583);function toEditableConfig(_ref){var def=_ref.def,name=_ref.name,value=_ref.value,isCustom=_ref.isCustom,isOverridden=_ref.isOverridden;if(!def){def={}}var conf={name:name,displayName:def.name||name,ariaName:def.name||(0,_get_aria_name.getAriaName)(name),value:value,category:def.category&&def.category.length?def.category:[_default_category.DEFAULT_CATEGORY],isCustom:isCustom,isOverridden:isOverridden,readonly:!!def.readonly,defVal:def.value,type:(0,_get_val_type.getValType)(def,value),description:def.description,options:def.options,optionLabels:def.optionLabels};return conf}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getValType=getValType;function getValType(def,value){if(def.type){return def.type}if(Array.isArray(value)||Array.isArray(def.value)){return"array"}return def.value!=null?_typeof(def.value):typeof value==="undefined"?"undefined":_typeof(value)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCategoryName=getCategoryName;var _string_utils=__webpack_require__(507);var _i18n=__webpack_require__(8);var names={general:_i18n.i18n.translate("kbn.management.settings.categoryNames.generalLabel",{defaultMessage:"General"}),timelion:_i18n.i18n.translate("kbn.management.settings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),notifications:_i18n.i18n.translate("kbn.management.settings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:_i18n.i18n.translate("kbn.management.settings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:_i18n.i18n.translate("kbn.management.settings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:_i18n.i18n.translate("kbn.management.settings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:_i18n.i18n.translate("kbn.management.settings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:_i18n.i18n.translate("kbn.management.settings.categoryNames.searchLabel",{defaultMessage:"Search"})};function getCategoryName(category){return category?names[category]||_string_utils.StringUtils.upperFirst(category):""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.management=undefined;var _section=__webpack_require__(1759);var _i18n=__webpack_require__(8);var management=exports.management=new _section.ManagementSection("management",{display:_i18n.i18n.translate("common.ui.management.displayName",{defaultMessage:"Management"})});management.register("data",{display:_i18n.i18n.translate("common.ui.management.connectDataDisplayName",{defaultMessage:"Connect Data"}),order:0});management.register("elasticsearch",{display:"Elasticsearch",order:20,icon:"logoElasticsearch"});management.register("kibana",{display:"Kibana",order:30,icon:"logoKibana"});management.register("logstash",{display:"Logstash",order:30,icon:"logoLogstash"})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementSection=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(0);var _indexed_array=__webpack_require__(43);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var listeners=[];var ManagementSection=exports.ManagementSection=function(){function ManagementSection(id){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ManagementSection);this.display=id;this.id=id;this.items=new _indexed_array.IndexedArray({index:["id"],order:["order"]});this.visible=true;this.disabled=false;this.tooltip="";this.icon="";this.url="";(0,_lodash.assign)(this,options)}_createClass(ManagementSection,[{key:"addListener",value:function addListener(fn){listeners.push(fn)}},{key:"register",value:function register(id){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var item=new ManagementSection(id,(0,_lodash.assign)(options,{parent:this}));if(this.hasItem(id)){throw new Error("'"+id+"' is already registered")}this.items.push(item);listeners.forEach(function(fn){return fn()});return item}},{key:"deregister",value:function deregister(id){var _this=this;this.items.remove(function(item){return item.id===id});listeners.forEach(function(fn){return fn(_this.items)})}},{key:"hasItem",value:function hasItem(id){return this.items.byId.hasOwnProperty(id)}},{key:"getSection",value:function getSection(id){if(!id){return}var sectionPath=id.split("/");return sectionPath.reduce(function(currentSection,nextSection){if(!currentSection){return}return currentSection.items.byId[nextSection]},this)}},{key:"hide",value:function hide(){this.visible=false}},{key:"show",value:function show(){this.visible=true}},{key:"disable",value:function disable(){this.disabled=true}},{key:"enable",value:function enable(){this.disabled=false}},{key:"visibleItems",get:function get(){return this.items.inOrder.filter(function(item){return item.visible})}}]);return ManagementSection}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _sidebar_nav=__webpack_require__(1761);Object.defineProperty(exports,"SidebarNav",{enumerable:true,get:function get(){return _sidebar_nav.SidebarNav}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SidebarNav=exports.sideNavItems=undefined;var _tslib=__webpack_require__(9);var tslib_1=_interopRequireWildcard(_tslib);var _eui=__webpack_require__(2);var _react=__webpack_require__(5);var _react2=__webpack_require__(1);var _react3=_interopRequireDefault(_react2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var sectionVisible=function sectionVisible(section){return!section.disabled&&section.visible};var sectionToNav=function sectionToNav(selectedId){return function(_a){var display=_a.display,id=_a.id,url=_a.url,icon=_a.icon;return{id:id,name:display,icon:icon?_react3.default.createElement(_eui.EuiIcon,{type:icon}):null,isSelected:selectedId===id,href:url,"data-test-subj":id}}};var sideNavItems=exports.sideNavItems=function sideNavItems(sections,selectedId){return sections.filter(sectionVisible).filter(function(section){return section.items.filter(sectionVisible).length}).map(function(section){return tslib_1.__assign({items:section.items.inOrder.filter(sectionVisible).map(sectionToNav(selectedId))},sectionToNav(selectedId)(section))})};var SidebarNav=function(_super){tslib_1.__extends(SidebarNav,_super);function SidebarNav(props){var _this=_super.call(this,props)||this;_this.toggleOpenOnMobile=function(){_this.setState({isSideNavOpenOnMobile:!_this.state.isSideNavOpenOnMobile})};_this.state={isSideNavOpenOnMobile:false};return _this}SidebarNav.prototype.render=function(){return _react3.default.createElement(_eui.EuiSideNav,{mobileTitle:this.renderMobileTitle(),isOpenOnMobile:this.state.isSideNavOpenOnMobile,toggleOpenOnMobile:this.toggleOpenOnMobile,items:sideNavItems(this.props.sections,this.props.selectedId),className:"mgtSideBarNav"})};SidebarNav.prototype.renderMobileTitle=function(){return _react3.default.createElement(_react.FormattedMessage,{id:"common.ui.management.nav.menu",defaultMessage:"Management menu"})};return SidebarNav}(_react3.default.Component);exports.SidebarNav=SidebarNav},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MANAGEMENT_BREADCRUMB=undefined;var _i18n=__webpack_require__(8);var MANAGEMENT_BREADCRUMB=exports.MANAGEMENT_BREADCRUMB=Object.freeze({text:_i18n.i18n.translate("common.ui.management.breadcrumb",{defaultMessage:"Management"}),href:"#/management"})},function(module,exports){module.exports='<kbn-management-app section="kibana/settings">\n  <kbn-management-advanced>\n    <div id="reactAdvancedSettings"></div>\n  </kbn-management-advanced>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettings=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _call_outs=__webpack_require__(1765);var _search=__webpack_require__(1767);var _form=__webpack_require__(1769);var _lib=__webpack_require__(253);var _default_component_registry=__webpack_require__(580);var _component_registry=__webpack_require__(346);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var AdvancedSettings=exports.AdvancedSettings=function(_Component){_inherits(AdvancedSettings,_Component);function AdvancedSettings(props){_classCallCheck(this,AdvancedSettings);var _this=_possibleConstructorReturn(this,(AdvancedSettings.__proto__||Object.getPrototypeOf(AdvancedSettings)).call(this,props));_initialiseProps.call(_this);var _this$props=_this.props,config=_this$props.config,query=_this$props.query;var parsedQuery=_eui.Query.parse(query?'ariaName:"'+(0,_lib.getAriaName)(query)+'"':"");_this.init(config);_this.state={query:parsedQuery,footerQueryMatched:false,filteredSettings:_this.mapSettings(_eui.Query.execute(parsedQuery,_this.settings))};(0,_default_component_registry.registerDefaultComponents)();return _this}_createClass(AdvancedSettings,[{key:"init",value:function init(config){var _this2=this;this.settings=this.mapConfig(config);this.groupedSettings=this.mapSettings(this.settings);this.categories=Object.keys(this.groupedSettings).sort(function(a,b){if(a===_lib.DEFAULT_CATEGORY)return-1;if(b===_lib.DEFAULT_CATEGORY)return 1;if(a>b)return 1;return a===b?0:-1});this.categoryCounts=Object.keys(this.groupedSettings).reduce(function(counts,category){counts[category]=_this2.groupedSettings[category].length;return counts},{})}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){var config=nextProps.config;var query=this.state.query;this.init(config);this.setState({filteredSettings:this.mapSettings(_eui.Query.execute(query,this.settings))})}},{key:"mapConfig",value:function mapConfig(config){var all=config.getAll();return Object.entries(all).map(function(setting){return(0,_lib.toEditableConfig)({def:setting[1],name:setting[0],value:setting[1].userValue,isCustom:config.isCustom(setting[0]),isOverridden:config.isOverridden(setting[0])})}).filter(function(c){return!c.readonly}).sort(_eui.Comparators.property("name",_eui.Comparators.default("asc")))}},{key:"mapSettings",value:function mapSettings(settings){return settings.reduce(function(groupedSettings,setting){var category=setting.category[0];(groupedSettings[category]=groupedSettings[category]||[]).push(setting);return groupedSettings},{})}},{key:"render",value:function render(){var _state=this.state,filteredSettings=_state.filteredSettings,query=_state.query,footerQueryMatched=_state.footerQueryMatched;var PageTitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_TITLE_COMPONENT);var PageSubtitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_SUBTITLE_COMPONENT);var PageFooter=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_FOOTER_COMPONENT);return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(PageTitle,null)),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_search.Search,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),_react2.default.createElement(PageSubtitle,null),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_call_outs.CallOuts,null),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_form.Form,{settings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,clear:this.clearConfig,showNoResultsMessage:!footerQueryMatched}),_react2.default.createElement(PageFooter,{query:query,onQueryMatchChange:this.onFooterQueryMatchChange}))}}]);return AdvancedSettings}(_react.Component);AdvancedSettings.propTypes={config:_propTypes2.default.object.isRequired,query:_propTypes2.default.string};var _initialiseProps=function _initialiseProps(){var _this3=this;this.saveConfig=function(name,value){return _this3.props.config.set(name,value)};this.clearConfig=function(name){return _this3.props.config.remove(name)};this.onQueryChange=function(_ref){var query=_ref.query;_this3.setState({query:query,filteredSettings:_this3.mapSettings(_eui.Query.execute(query,_this3.settings))})};this.clearQuery=function(){_this3.setState({query:_eui.Query.parse(""),footerQueryMatched:false,filteredSettings:_this3.groupedSettings})};this.onFooterQueryMatchChange=function(matched){_this3.setState({footerQueryMatched:matched})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _call_outs=__webpack_require__(1766);Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=exports.CallOuts=function CallOuts(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _search=__webpack_require__(1768);Object.defineProperty(exports,"Search",{enumerable:true,get:function get(){return _search.Search}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Search=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);var _lib=__webpack_require__(253);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SearchUI=function(_PureComponent){_inherits(SearchUI,_PureComponent);function SearchUI(props){_classCallCheck(this,SearchUI);var _this=_possibleConstructorReturn(this,(SearchUI.__proto__||Object.getPrototypeOf(SearchUI)).call(this,props));_this.state={isSearchTextValid:true,parseErrorMessage:null};_this.onChange=function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})};var categories=props.categories;_this.categories=categories.map(function(category){return{value:category,name:(0,_lib.getCategoryName)(category)}});return _this}_createClass(SearchUI,[{key:"render",value:function render(){var _props=this.props,query=_props.query,intl=_props.intl;var box={incremental:true,"data-test-subj":"settingsSearchBar","aria-label":intl.formatMessage({id:"kbn.management.settings.searchBarAriaLabel",defaultMessage:"Search advanced settings"})};var filters=[{type:"field_value_selection",field:"category",name:intl.formatMessage({id:"kbn.management.settings.categorySearchLabel",defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];var queryParseError=void 0;if(!this.state.isSearchTextValid){var parseErrorMsg=intl.formatMessage({id:"kbn.management.settings.searchBar.unableToParseQueryErrorMessage",defaultMessage:"Unable to parse query"});queryParseError=_react2.default.createElement(_eui.EuiFormErrorText,null,parseErrorMsg+". "+this.state.parseErrorMessage)}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSearchBar,{box:box,filters:filters,onChange:this.onChange,query:query}),queryParseError)}}]);return SearchUI}(_react.PureComponent);SearchUI.propTypes={categories:_propTypes2.default.array.isRequired,query:_propTypes2.default.object.isRequired,onQueryChange:_propTypes2.default.func.isRequired};var Search=exports.Search=(0,_react3.injectI18n)(SearchUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _form=__webpack_require__(1770);Object.defineProperty(exports,"Form",{enumerable:true,get:function get(){return _form.Form}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Form=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lib=__webpack_require__(253);var _field=__webpack_require__(1771);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FormUI=function(_PureComponent){_inherits(FormUI,_PureComponent);function FormUI(){_classCallCheck(this,FormUI);return _possibleConstructorReturn(this,(FormUI.__proto__||Object.getPrototypeOf(FormUI)).apply(this,arguments))}_createClass(FormUI,[{key:"renderClearQueryLink",value:function renderClearQueryLink(totalSettings,currentSettings){var clearQuery=this.props.clearQuery;if(totalSettings!==currentSettings){return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("em",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:_react2.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react2.default.createElement("em",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}})))}return null}},{key:"renderCategory",value:function renderCategory(category,settings,totalSettings){var _this2=this;return _react2.default.createElement(_react.Fragment,{key:category},_react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("h2",null,(0,_lib.getCategoryName)(category))),this.renderClearQueryLink(totalSettings,settings.length))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),settings.map(function(setting){return _react2.default.createElement(_field.Field,{key:setting.name,setting:setting,save:_this2.props.save,clear:_this2.props.clear})}))),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}))}},{key:"maybeRenderNoSettings",value:function maybeRenderNoSettings(clearQuery){if(this.props.showNoResultsMessage){return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:_react2.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.settings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}}))}return null}},{key:"render",value:function render(){var _this3=this;var _props=this.props,settings=_props.settings,categories=_props.categories,categoryCounts=_props.categoryCounts,clearQuery=_props.clearQuery;var currentCategories=[];categories.forEach(function(category){if(settings[category]&&settings[category].length){currentCategories.push(category)}});return _react2.default.createElement(_react.Fragment,null,currentCategories.length?currentCategories.map(function(category){return _this3.renderCategory(category,settings[category],categoryCounts[category])}):this.maybeRenderNoSettings(clearQuery))}}]);return FormUI}(_react.PureComponent);FormUI.propTypes={settings:_propTypes2.default.object.isRequired,categories:_propTypes2.default.array.isRequired,categoryCounts:_propTypes2.default.object.isRequired,clearQuery:_propTypes2.default.func.isRequired,save:_propTypes2.default.func.isRequired,clear:_propTypes2.default.func.isRequired,showNoResultsMessage:_propTypes2.default.bool.isRequired};var Form=exports.Form=(0,_react3.injectI18n)(FormUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field=__webpack_require__(581);Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBreadcrumbs=getBreadcrumbs;var _management=__webpack_require__(74);var _i18n=__webpack_require__(8);function getBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.settings.breadcrumb",{defaultMessage:"Advanced settings"})}]}},function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(8);var _management=__webpack_require__(74);__webpack_require__(1774);__webpack_require__(1776);__webpack_require__(345);__webpack_require__(555);var _modules=__webpack_require__(3);var _feature_catalogue=__webpack_require__(39);_modules.uiModules.get("apps/management");_management.management.getSection("kibana").register("objects",{display:_i18n.i18n.translate("kbn.management.objects.savedObjectsSectionLabel",{defaultMessage:"Saved Objects"}),order:10,url:"#/management/kibana/objects"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"saved_objects",title:_i18n.i18n.translate("kbn.management.objects.savedObjectsTitle",{defaultMessage:"Saved Objects"}),description:_i18n.i18n.translate("kbn.management.objects.savedObjectsDescription",{defaultMessage:"Import, export, and manage your saved searches, visualizations, and dashboards."}),icon:"savedObjectsApp",path:"/app/kibana#/management/kibana/objects",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _angular=__webpack_require__(15);var _angular2=_interopRequireDefault(_angular);var _risonNode=__webpack_require__(55);var _risonNode2=_interopRequireDefault(_risonNode);var _saved_object_registry=__webpack_require__(72);var _view=__webpack_require__(1775);var _view2=_interopRequireDefault(_view);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _notify=__webpack_require__(10);__webpack_require__(303);var _utils=__webpack_require__(97);var _saved_objects=__webpack_require__(24);var _numeric=__webpack_require__(315);var _breadcrumbs=__webpack_require__(584);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var location="SavedObject view";_routes2.default.when("/management/kibana/objects/:service/:id",{template:_view2.default,k7Breadcrumbs:_breadcrumbs.getViewBreadcrumbs});_modules.uiModules.get("apps/management").directive("kbnManagementObjectsView",function(kbnIndex,confirmModal,i18n){return{restrict:"E",controller:function controller($scope,$injector,$routeParams,$location,$window,$rootScope,Private){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var createField=function createField(memo,val,key,collection,parents){if(Array.isArray(parents)){parents.push(key)}else{parents=[key]}var field={type:"text",name:parents.join("."),value:val};if(_lodash2.default.isString(field.value)){try{field.value=_angular2.default.toJson(JSON.parse(field.value),true);field.type="json"}catch(err){field.value=field.value}}else if((0,_numeric.isNumeric)(field.value)){field.type="number"}else if(Array.isArray(field.value)){field.type="array";field.value=_angular2.default.toJson(field.value,true)}else if(_lodash2.default.isBoolean(field.value)){field.type="boolean";field.value=field.value}else if(_lodash2.default.isPlainObject(field.value)){return _lodash2.default.reduce(field.value,_lodash2.default.partialRight(createField,parents),memo)}memo.push(field);parents.pop();return memo};var readObjectClass=function readObjectClass(fields,Class){var fieldMap=_lodash2.default.indexBy(fields,"name");_lodash2.default.forOwn(Class.mapping,function(esType,name){if(fieldMap[name])return;fields.push({name:name,type:function(){switch((0,_utils.castEsToKbnFieldTypeName)(esType)){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"json"}}()})});if(Class.searchSource&&!fieldMap["kibanaSavedObjectMeta.searchSourceJSON"]){fields.push({name:"kibanaSavedObjectMeta.searchSourceJSON",type:"json",value:"{}"})}};$scope.notFound=$routeParams.notFound;$scope.title=service.type;savedObjectsClient.get(service.type,$routeParams.id).then(function(obj){$scope.obj=obj;$scope.link=service.urlFor(obj.id);var fields=_lodash2.default.reduce(obj.attributes,createField,[]);if(service.Class)readObjectClass(fields,service.Class);var nameSortedFields=_lodash2.default.sortBy(fields,"name");$scope.fields=_lodash2.default.sortBy(nameSortedFields,function(field){var orderIndex=service.Class.fieldOrder?service.Class.fieldOrder.indexOf(field.name):-1;return orderIndex>-1?orderIndex:Infinity})}).catch(function(error){return(0,_notify.fatalError)(error,location)});var loadedEditors=[];$scope.aceInvalidEditors=[];$scope.aceLoaded=function(editor){if(_lodash2.default.contains(loadedEditors,editor))return;loadedEditors.push(editor);editor.$blockScrolling=Infinity;var session=editor.getSession();var fieldName=editor.container.id;session.setTabSize(2);session.setUseSoftTabs(true);session.on("changeAnnotation",function(){var annotations=session.getAnnotations();if(_lodash2.default.some(annotations,{type:"error"})){if(!_lodash2.default.contains($scope.aceInvalidEditors,fieldName)){$scope.aceInvalidEditors.push(fieldName)}}else{$scope.aceInvalidEditors=_lodash2.default.without($scope.aceInvalidEditors,fieldName)}if(!$rootScope.$$phase)$scope.$apply()})};$scope.cancel=function(){$window.history.back();return false};$scope.delete=function(){function doDelete(){savedObjectsClient.delete(service.type,$routeParams.id).then(function(){return redirectHandler("deleted")}).catch(function(error){return(0,_notify.fatalError)(error,location)})}var confirmModalOptions={onConfirm:doDelete,confirmButtonText:i18n("kbn.management.objects.confirmModalOptions.deleteButtonLabel",{defaultMessage:"Delete"}),title:i18n("kbn.management.objects.confirmModalOptions.modalTitle",{defaultMessage:"Delete saved Kibana object?"})};confirmModal(i18n("kbn.management.objects.confirmModalOptions.modalDescription",{defaultMessage:"You can't recover deleted objects"}),confirmModalOptions)};$scope.submit=function(){var source=_lodash2.default.cloneDeep($scope.obj.attributes);_lodash2.default.each($scope.fields,function(field){var value=field.value;if(field.type==="number"){value=Number(field.value)}if(field.type==="array"){value=JSON.parse(field.value)}_lodash2.default.set(source,field.name,value)});savedObjectsClient.update(service.type,$routeParams.id,source).then(function(){return redirectHandler("updated")}).catch(function(error){return(0,_notify.fatalError)(error,location)})};function redirectHandler(action){$location.path("/management/kibana/objects").search({_a:_risonNode2.default.encode({tab:serviceObj.title})});_notify.toastNotifications.addSuccess(_lodash2.default.capitalize(action)+" '"+$scope.obj.attributes.title+"' "+$scope.title.toLowerCase()+" object")}}}})},function(module,exports){module.exports='<kbn-management-app section="kibana/objects" class="kuiView">\n  <kbn-management-objects-view class="kuiViewContent kuiViewContent--constrainedWidth">\n    \x3c!-- Header --\x3e\n    <div class="kuiViewContentItem kuiBar kuiVerticalRhythm">\n      <div class="kuiBarSection">\n        <h1\n          class="kuiTitle"\n          i18n-id="kbn.management.objects.view.editItemTitle"\n          i18n-default-message="Edit {title}"\n          i18n-values="{ title }"\n        ></h1>\n      </div>\n\n      <div class="kuiBarSection">\n        <a\n          class="kuiButton kuiButton--basic kuiButton--iconText"\n          href="{{ link }}"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-eye"></span>\n            <span\n              i18n-id="kbn.management.objects.view.viewItemButtonLabel"\n              i18n-default-message="View {title}"\n              i18n-values="{ title }"\n            ></span>\n          </span>\n        </a>\n\n        <button\n          class="kuiButton kuiButton--danger kuiButton--iconText"\n          ng-click="delete()"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n            <span\n              i18n-id="kbn.management.objects.view.deleteItemButtonLabel"\n              i18n-default-message="Delete {title}"\n              i18n-values="{ title }"\n              ></span>\n          </span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- Errors --\x3e\n    <div\n      class="kuiViewContentItem kuiVerticalRhythm"\n      ng-if="notFound"\n    >\n      <div class="kuiInfoPanel kuiInfoPanel--error">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.savedObjectProblemErrorMessage"\n            i18n-default-message="There is a problem with this saved object"\n            ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'search\'"\n            i18n-id="kbn.management.objects.view.savedSearchDoesNotExistErrorMessage"\n            i18n-default-message="The saved search associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern\'"\n            i18n-id="kbn.management.objects.view.indexPatternDoesNotExistErrorMessage"\n            i18n-default-message="The index pattern associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern-field\'"\n            i18n-id="kbn.management.objects.view.fieldDoesNotExistErrorMessage"\n            i18n-default-message="A field associated with this object no longer exists in the index pattern."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToFixErrorDescription"\n            i18n-default-message="If you know what this error means, go ahead and fix it &mdash; otherwise click the delete button above."\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Intro --\x3e\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      <div class="kuiInfoPanel kuiInfoPanel--warning">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.howToModifyObjectTitle"\n            i18n-default-message="Proceed with caution!"\n          ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToModifyObjectDescription"\n            i18n-default-message=" Modifying objects is for advanced users only. Object properties are not validated and invalid objects could cause errors, data loss, or worse. Unless someone with intimate knowledge of the code told you to be in here, you probably shouldn&rsquo;t be."\n          >\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      \x3c!-- Form --\x3e\n      <form\n        role="form"\n        name="objectForm"\n        ng-submit="submit()"\n      >\n        <div class="kuiFormSection" ng-repeat="field in fields">\n          <label for="{{ field.name }}" class="kuiFormLabel">\n            {{ field.name }}\n          </label>\n\n          <input\n            id="{{ field.name }}"\n            ng-if="field.type === \'number\'"\n            class="kuiTextInput"\n            type="number"\n            ng-model="field.value"\n          >\n\n          <textarea\n            id="{{ field.name }}"\n            ng-if="field.type === \'text\'"\n            class="kuiTextArea"\n            rows="1"\n            msd-elastic=" "\n            ng-model="field.value"\n          ></textarea>\n\n          <input\n            ng-if="field.type === \'boolean\'"\n            class="kuiCheckBox"\n            type="checkbox"\n            ng-model="field.value"\n            ng-checked="field.value"\n          >\n\n          <div\n            ng-if="field.type === \'json\' || field.type === \'array\'"\n            kbn-ui-ace-keyboard-mode\n            ui-ace="{ onLoad: aceLoaded, mode: \'json\' }"\n            id="{{field.name}}"\n            ng-model="field.value"\n            class="form-control"\n          ></div>\n        </div>\n      </form>\n\n      \x3c!-- Actions --\x3e\n      <div class="kuiButtonGroup">\n        <button\n          class="kuiButton kuiButton--primary"\n          aria-label="{{ \'kbn.management.objects.view.saveButtonAriaLabel\' | i18n: { defaultMessage: \'Save { title } Object\', values: { title } } }}"\n          ng-click="submit()"\n          ng-disabled="objectForm.$invalid || aceInvalidEditors.length !==0"\n          i18n-id="kbn.management.objects.view.saveButtonLabel"\n          i18n-default-message="Save { title } Object"\n          i18n-values="{ title }"\n        ></button>\n\n        <button\n          class="kuiButton kuiButton--basic"\n          aria-label="{{ \'kbn.management.objects.view.cancelButtonAriaLabel\' | i18n: { defaultMessage: \'Cancel\'} }}"\n          ng-click="cancel()"\n          i18n-id="kbn.management.objects.view.cancelButtonLabel"\n          i18n-default-message="Cancel"\n        ></button>\n      </div>\n    </div>\n  </kbn-management-objects-view>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(72);var _objects=__webpack_require__(1777);var _objects2=_interopRequireDefault(_objects);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _notify=__webpack_require__(10);var _saved_objects=__webpack_require__(24);var _modules=__webpack_require__(3);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _objects_table=__webpack_require__(1778);var _get_in_app_url=__webpack_require__(588);var _i18n=__webpack_require__(14);var _breadcrumbs=__webpack_require__(584);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_OBJECTS_TABLE_DOM_ELEMENT_ID="reactSavedObjectsTable";function updateObjectsTable($scope,$injector,i18n){var Private=$injector.get("Private");var indexPatterns=$injector.get("indexPatterns");var $http=$injector.get("$http");var kbnUrl=$injector.get("kbnUrl");var config=$injector.get("config");var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var services=_saved_object_registry.savedObjectManagementRegistry.all().map(function(obj){return $injector.get(obj.service)});var allServices=_saved_object_registry.savedObjectManagementRegistry.all();var typeToServiceName=function typeToServiceName(type){return allServices.reduce(function(serviceName,service){return service.title.includes(type)?service.service:serviceName},null)};$scope.$$postDigest(function(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_objects_table.ObjectsTable,{savedObjectsClient:savedObjectsClient,services:services,indexPatterns:indexPatterns,$http:$http,perPageConfig:config.get("savedObjects:perPage"),basePath:_chrome2.default.getBasePath(),newIndexPatternUrl:kbnUrl.eval("#/management/kibana/index"),getEditUrl:function getEditUrl(id,type){if(type==="index-pattern"||type==="indexPatterns"){return kbnUrl.eval("#/management/kibana/indices/"+id)}var serviceName=typeToServiceName(type);if(!serviceName){_notify.toastNotifications.addWarning(i18n("kbn.management.objects.unknownSavedObjectTypeNotificationMessage",{defaultMessage:"Unknown saved object type: {type}",values:{type:type}}));return null}return kbnUrl.eval("#/management/kibana/objects/"+serviceName+"/"+id)},goInApp:function goInApp(id,type){kbnUrl.change((0,_get_in_app_url.getInAppUrl)(id,type));$scope.$apply()}})),node)})}function destroyObjectsTable(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes2.default.when("/management/kibana/objects",{template:_objects2.default,k7Breadcrumbs:_breadcrumbs.getIndexBreadcrumbs}).when("/management/kibana/objects/:service",{redirectTo:"/management/kibana/objects"});_modules.uiModules.get("apps/management").directive("kbnManagementObjects",function(){return{restrict:"E",controllerAs:"managementObjectsController",controller:function controller($scope,$injector,i18n){updateObjectsTable($scope,$injector,i18n);$scope.$on("$destroy",destroyObjectsTable)}}})},function(module,exports){module.exports='<kbn-management-app section="kibana/objects">\n  <kbn-management-objects>\n    <div id="reactSavedObjectsTable"></div>\n  </kbn-management-objects>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _objects_table=__webpack_require__(585);Object.defineProperty(exports,"ObjectsTable",{enumerable:true,get:function get(){return _objects_table.ObjectsTable}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1780);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=exports.Header=function Header(_ref){var onExportAll=_ref.onExportAll,onImport=_ref.onImport,onRefresh=_ref.onRefresh,filteredCount=_ref.filteredCount;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.savedObjectsTitle",defaultMessage:"Saved Objects"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",gutterSize:"m",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"exportAction","data-test-subj":"exportAllObjects",onClick:onExportAll},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.exportButtonLabel",defaultMessage:"Export {filteredCount, plural, one{# object} other {# objects}}",values:{filteredCount:filteredCount}}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"importAction","data-test-subj":"importObjects",onClick:onImport},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.importButtonLabel",defaultMessage:"Import"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"refresh",onClick:onRefresh},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.refreshButtonLabel",defaultMessage:"Refresh"})))))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.howToDeleteSavedObjectsDescription",defaultMessage:"From here you can delete saved objects, such as saved searches. You can also edit the raw data of saved objects. Typically objects are only modified via their associated application, which is probably what you should use instead of this screen."})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))};Header.propTypes={onExportAll:_propTypes2.default.func.isRequired,onImport:_propTypes2.default.func.isRequired,onRefresh:_propTypes2.default.func.isRequired,filteredCount:_propTypes2.default.number.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flyout=__webpack_require__(1782);Object.defineProperty(exports,"Flyout",{enumerable:true,get:function get(){return _flyout.Flyout}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Flyout=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(0);var _eui=__webpack_require__(2);var _import_file=__webpack_require__(586);var _resolve_saved_objects=__webpack_require__(587);var _objects_table=__webpack_require__(585);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FlyoutUI=function(_Component){_inherits(FlyoutUI,_Component);function FlyoutUI(props){var _this2=this;_classCallCheck(this,FlyoutUI);var _this=_possibleConstructorReturn(this,(FlyoutUI.__proto__||Object.getPrototypeOf(FlyoutUI)).call(this,props));_this.fetchIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var indexPatterns;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.indexPatterns.getFields(["id","title"]);case 2:indexPatterns=_context.sent;_this.setState({indexPatterns:indexPatterns});case 4:case"end":return _context.stop()}}},_callee,_this2)}));_this.changeOverwriteAll=function(){_this.setState(function(state){return{isOverwriteAllChecked:!state.isOverwriteAllChecked}})};_this.setImportFile=function(_ref2){var _ref3=_slicedToArray(_ref2,1),file=_ref3[0];_this.setState({file:file})};_this.import=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this$props,services,indexPatterns,intl,_this$state,file,isOverwriteAllChecked,contents,_ref5,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,importedObjectCount,failedImports,byId,conflicts;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,services=_this$props.services,indexPatterns=_this$props.indexPatterns,intl=_this$props.intl;_this$state=_this.state,file=_this$state.file,isOverwriteAllChecked=_this$state.isOverwriteAllChecked;_this.setState({isLoading:true,error:undefined});contents=void 0;_context2.prev=4;_context2.next=7;return(0,_import_file.importFile)(file);case 7:contents=_context2.sent;_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](4);_this.setState({isLoading:false,error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.importFileErrorMessage",defaultMessage:"The file could not be processed."})});return _context2.abrupt("return");case 14:if(Array.isArray(contents)){_context2.next=17;break}_this.setState({isLoading:false,error:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.invalidFormatOfImportedFileErrorMessage",defaultMessage:"Saved objects file format is invalid and cannot be imported."})});return _context2.abrupt("return");case 17:contents=contents.filter(function(content){return _objects_table.INCLUDED_TYPES.includes(content._type)}).map(function(doc){return _extends({},doc,{_migrationVersion:doc._migrationVersion||{}})});_context2.next=20;return(0,_resolve_saved_objects.resolveSavedObjects)(contents,isOverwriteAllChecked,services,indexPatterns);case 20:_ref5=_context2.sent;conflictedIndexPatterns=_ref5.conflictedIndexPatterns;conflictedSavedObjectsLinkedToSavedSearches=_ref5.conflictedSavedObjectsLinkedToSavedSearches;conflictedSearchDocs=_ref5.conflictedSearchDocs;importedObjectCount=_ref5.importedObjectCount;failedImports=_ref5.failedImports;byId=(0,_lodash.groupBy)(conflictedIndexPatterns,function(_ref6){var obj=_ref6.obj;return obj.searchSource.getOwnField("index")});conflicts=Object.entries(byId).reduce(function(accum,_ref7){var _ref8=_slicedToArray(_ref7,2),existingIndexPatternId=_ref8[0],list=_ref8[1];accum.push({existingIndexPatternId:existingIndexPatternId,newIndexPatternId:undefined,list:list.map(function(_ref9){var doc=_ref9.doc;return{id:existingIndexPatternId,type:doc._type,name:doc._source.title}})});return accum},[]);_this.setState({conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports,conflicts:conflicts,importCount:importedObjectCount,isLoading:false,wasImportSuccessful:conflicts.length===0});case 29:case"end":return _context2.stop()}}},_callee2,_this2,[[4,10]])}));_this.confirmImport=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var _this$state2,conflictedIndexPatterns,isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,failedImports,_this$props2,services,indexPatterns,intl,importCount,resolutions;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state2=_this.state,conflictedIndexPatterns=_this$state2.conflictedIndexPatterns,isOverwriteAllChecked=_this$state2.isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches=_this$state2.conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs=_this$state2.conflictedSearchDocs,failedImports=_this$state2.failedImports;_this$props2=_this.props,services=_this$props2.services,indexPatterns=_this$props2.indexPatterns,intl=_this$props2.intl;_this.setState({error:undefined,isLoading:true,loadingMessage:undefined});importCount=_this.state.importCount;if(!_this.hasConflicts){_context3.next=30;break}_context3.prev=5;resolutions=_this.resolutions;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmImport.resolvingConflictsLoadingMessage",defaultMessage:"Resolving conflicts…"})});if(!resolutions.length){_context3.next=12;break}_context3.next=11;return(0,_resolve_saved_objects.resolveIndexPatternConflicts)(resolutions,conflictedIndexPatterns,isOverwriteAllChecked);case 11:importCount+=_context3.sent;case 12:_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmImport.savingConflictsLoadingMessage",defaultMessage:"Saving conflicts…"})});_context3.next=15;return(0,_resolve_saved_objects.saveObjects)(conflictedSavedObjectsLinkedToSavedSearches,isOverwriteAllChecked);case 15:importCount+=_context3.sent;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmImport.savedSearchAreLinkedProperlyLoadingMessage",defaultMessage:"Ensure saved searches are linked properly…"})});_context3.next=19;return(0,_resolve_saved_objects.resolveSavedSearches)(conflictedSearchDocs,services,indexPatterns,isOverwriteAllChecked);case 19:importCount+=_context3.sent;_this.setState({loadingMessage:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.confirmImport.retryingFailedObjectsLoadingMessage",defaultMessage:"Retrying failed objects…"})});_context3.next=23;return(0,_resolve_saved_objects.saveObjects)(failedImports.map(function(_ref11){var obj=_ref11.obj;return obj}),isOverwriteAllChecked);case 23:importCount+=_context3.sent;_context3.next=30;break;case 26:_context3.prev=26;_context3.t0=_context3["catch"](5);_this.setState({error:_context3.t0.message,isLoading:false,loadingMessage:undefined});return _context3.abrupt("return");case 30:_this.setState({isLoading:false,wasImportSuccessful:true,importCount:importCount});case 31:case"end":return _context3.stop()}}},_callee3,_this2,[[5,26]])}));_this.onIndexChanged=function(id,e){var value=e.target.value;_this.setState(function(state){var conflictIndex=state.conflicts.findIndex(function(conflict){return conflict.existingIndexPatternId===id});if(conflictIndex===-1){return state}return{conflicts:[].concat(_toConsumableArray(state.conflicts.slice(0,conflictIndex)),[_extends({},state.conflicts[conflictIndex],{newIndexPatternId:value})],_toConsumableArray(state.conflicts.slice(conflictIndex+1)))}})};_this.state={conflictedIndexPatterns:undefined,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined,conflicts:undefined,error:undefined,file:undefined,importCount:0,indexPatterns:undefined,isOverwriteAllChecked:true,isLoading:false,loadingMessage:undefined,wasImportSuccessful:false};return _this}_createClass(FlyoutUI,[{key:"componentDidMount",value:function componentDidMount(){this.fetchIndexPatterns()}},{key:"renderConflicts",value:function renderConflicts(){var _this3=this;var conflicts=this.state.conflicts;var intl=this.props.intl;if(!conflicts){return null}var columns=[{field:"existingIndexPatternId",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdName",defaultMessage:"ID"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdDescription",defaultMessage:"ID of the index pattern"}),sortable:true},{field:"list",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountName",defaultMessage:"Count"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountDescription",defaultMessage:"How many affected objects"}),render:function render(list){return _react2.default.createElement(_react.Fragment,null,list.length)}},{field:"list",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsName",defaultMessage:"Sample of affected objects"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsDescription",defaultMessage:"Sample of affected objects"}),render:function render(list){return _react2.default.createElement("ul",{style:{listStyle:"none"}},(0,_lodash.take)(list,3).map(function(obj,key){return _react2.default.createElement("li",{key:key},obj.name)}))}},{field:"existingIndexPatternId",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.flyout.renderConflicts.columnNewIndexPatternName",defaultMessage:"New index pattern"}),render:function render(id){var options=_this3.state.indexPatterns.map(function(indexPattern){return _defineProperty({text:indexPattern.get("title"),value:indexPattern.id},"data-test-subj","indexPatternOption-"+indexPattern.get("title"))});options.unshift({text:"-- Skip Import --",value:""});return _react2.default.createElement(_eui.EuiSelect,{"data-test-subj":"managementChangeIndexSelection-"+id,onChange:function onChange(e){return _this3.onIndexChanged(id,e)},options:options})}}];var pagination={pageSizeOptions:[5,10,25]};return _react2.default.createElement(_eui.EuiInMemoryTable,{items:conflicts,columns:columns,pagination:pagination})}},{key:"renderError",value:function renderError(){var error=this.state.error;if(!error){return null}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.errorCalloutTitle",defaultMessage:"Sorry, there was an error"}),color:"danger",iconType:"cross"},_react2.default.createElement("p",null,error)),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}))}},{key:"renderBody",value:function renderBody(){var _state=this.state,isLoading=_state.isLoading,loadingMessage=_state.loadingMessage,isOverwriteAllChecked=_state.isOverwriteAllChecked,wasImportSuccessful=_state.wasImportSuccessful,importCount=_state.importCount,_state$failedImports=_state.failedImports,failedImports=_state$failedImports===undefined?[]:_state$failedImports;if(isLoading){return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLoadingKibana,{size:"xl"}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,loadingMessage))))}if(failedImports.length&&!this.hasConflicts){return _react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedTitle",defaultMessage:"Import failed"}),color:"warning",iconType:"help"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedDescription",defaultMessage:"Failed to import {failedImportCount} of {totalImportCount} objects.Import failed",values:{failedImportCount:failedImports.length,totalImportCount:importCount+failedImports.length}})),_react2.default.createElement("p",null,failedImports.map(function(_ref13){var error=_ref13.error;return(0,_lodash.get)(error,"body.message",error.message||"")}).join(" ")))}if(wasImportSuccessful){if(importCount===0){return _react2.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccessNoneImported",title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulCallout.noObjectsImportedTitle",defaultMessage:"No objects imported"}),color:"primary"})}return _react2.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccess",title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulTitle",defaultMessage:"Import successful"}),color:"success",iconType:"check"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulDescription",defaultMessage:"Successfully imported {importCount} objects.",values:{importCount:importCount}})))}if(this.hasConflicts){return this.renderConflicts()}return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.selectFileToImportFormRowLabel",defaultMessage:"Please select a JSON file to import"})},_react2.default.createElement(_eui.EuiFilePicker,{initialPromptText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importPromptText",defaultMessage:"Import"}),onChange:this.setImportFile})),_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiSwitch,{name:"overwriteAll",label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.overwriteSavedObjectsLabel",defaultMessage:"Automatically overwrite all saved objects?"}),"data-test-subj":"importSavedObjectsOverwriteToggle",checked:isOverwriteAllChecked,onChange:this.changeOverwriteAll})))}},{key:"renderFooter",value:function renderFooter(){var _state2=this.state,isLoading=_state2.isLoading,wasImportSuccessful=_state2.wasImportSuccessful;var _props=this.props,done=_props.done,close=_props.close;var confirmButton=void 0;if(wasImportSuccessful){confirmButton=_react2.default.createElement(_eui.EuiButton,{onClick:done,size:"s",fill:true,"data-test-subj":"importSavedObjectsDoneBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmButtonLabel",defaultMessage:"Done"}))}else if(this.hasConflicts){confirmButton=_react2.default.createElement(_eui.EuiButton,{onClick:this.confirmImport,size:"s",fill:true,isLoading:isLoading,"data-test-subj":"importSavedObjectsConfirmBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmAllChangesButtonLabel",defaultMessage:"Confirm all changes"}))}else{confirmButton=_react2.default.createElement(_eui.EuiButton,{onClick:this.import,size:"s",fill:true,isLoading:isLoading,"data-test-subj":"importSavedObjectsImportBtn"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.confirmButtonLabel",defaultMessage:"Import"}))}return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:close,size:"s"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},confirmButton))}},{key:"renderSubheader",value:function renderSubheader(){if(!this.hasConflicts||this.state.isLoading||this.state.wasImportSuccessful){return null}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsTitle",defaultMessage:"Index Pattern Conflicts"}),color:"warning",iconType:"help"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsDescription",defaultMessage:"The following saved objects use index patterns that do not exist. Please select the index patterns you'd like re-associated with them. You can {indexPatternLink} if necessary.",values:{indexPatternLink:_react2.default.createElement(_eui.EuiLink,{href:this.props.newIndexPatternUrl},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsCalloutLinkText",defaultMessage:"create a new index pattern"}))}}))))}},{key:"render",value:function render(){var close=this.props.close;return _react2.default.createElement(_eui.EuiFlyout,{onClose:close,size:"s"},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSavedObjectTitle",defaultMessage:"Import saved objects"}))),this.renderSubheader()),_react2.default.createElement(_eui.EuiFlyoutBody,null,this.renderError(),this.renderBody()),_react2.default.createElement(_eui.EuiFlyoutFooter,null,this.renderFooter()))}},{key:"hasConflicts",get:function get(){return this.state.conflicts&&this.state.conflicts.length>0}},{key:"resolutions",get:function get(){return this.state.conflicts.reduce(function(accum,_ref14){var existingIndexPatternId=_ref14.existingIndexPatternId,newIndexPatternId=_ref14.newIndexPatternId;if(newIndexPatternId){accum.push({oldId:existingIndexPatternId,newId:newIndexPatternId})}return accum},[])}}]);return FlyoutUI}(_react.Component);FlyoutUI.propTypes={close:_propTypes2.default.func.isRequired,done:_propTypes2.default.func.isRequired,services:_propTypes2.default.array.isRequired,newIndexPatternUrl:_propTypes2.default.string.isRequired,indexPatterns:_propTypes2.default.object.isRequired};var Flyout=exports.Flyout=(0,_react3.injectI18n)(FlyoutUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _relationships=__webpack_require__(1784);Object.defineProperty(exports,"Relationships",{enumerable:true,get:function get(){return _relationships.Relationships}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Relationships=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _lib=__webpack_require__(254);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var RelationshipsUI=function(_Component){_inherits(RelationshipsUI,_Component);function RelationshipsUI(props){_classCallCheck(this,RelationshipsUI);var _this=_possibleConstructorReturn(this,(RelationshipsUI.__proto__||Object.getPrototypeOf(RelationshipsUI)).call(this,props));_this.state={relationships:undefined,isLoading:false,error:undefined};return _this}_createClass(RelationshipsUI,[{key:"componentWillMount",value:function componentWillMount(){this.getRelationshipData()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.id!==this.props.id){this.getRelationshipData()}}},{key:"getRelationshipData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _props,id,type,getRelationships,relationships;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_props=this.props,id=_props.id,type=_props.type,getRelationships=_props.getRelationships;this.setState({isLoading:true});_context.prev=2;_context.next=5;return getRelationships(type,id);case 5:relationships=_context.sent;this.setState({relationships:relationships,isLoading:false,error:undefined});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);this.setState({error:_context.t0.message,isLoading:false});case 12:case"end":return _context.stop()}}},_callee,this,[[2,9]])}));function getRelationshipData(){return _ref.apply(this,arguments)}return getRelationshipData}()},{key:"renderError",value:function renderError(){var error=this.state.error;if(!error){return null}return _react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.renderErrorMessage",defaultMessage:"Error"}),color:"danger"},error)}},{key:"renderRelationships",value:function renderRelationships(){var _this2=this;var _props2=this.props,getEditUrl=_props2.getEditUrl,goInApp=_props2.goInApp,intl=_props2.intl;var _state=this.state,relationships=_state.relationships,isLoading=_state.isLoading,error=_state.error;if(error){return this.renderError()}if(isLoading){return _react2.default.createElement(_eui.EuiLoadingKibana,{size:"xl"})}var items=[];var _loop=function _loop(type,list){if(list.length===0){items.push(_react2.default.createElement(_eui.EuiDescriptionListTitle,{key:type+"_not_found"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.itemNotFoundText",defaultMessage:"No {type} found.",values:{type:type}})))}else{var calloutTitle=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.warningTitle",defaultMessage:"Warning"});var calloutColor="warning";var calloutText=void 0;switch(_this2.props.type){case"dashboard":calloutColor="success";calloutTitle=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.dashboard.calloutTitle",defaultMessage:"Dashboard"});calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.dashboard.calloutText",defaultMessage:"Here are some visualizations used on this dashboard. You can safely delete this dashboard and the visualizations will still work properly."});break;case"search":if(type==="visualizations"){calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.search.visualizations.calloutText",defaultMessage:"Here are some visualizations that use this saved search. If you delete this saved search, these visualizations will not longer work properly."})}else{calloutColor="success";calloutTitle=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.search.calloutTitle",defaultMessage:"Saved Search"});calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.search.calloutText",defaultMessage:"Here is the index pattern tied to this saved search."})}break;case"visualization":calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.visualization.calloutText",defaultMessage:"Here are some dashboards which contain this visualization. If you delete this visualization, these dashboards will no longer show them."});break;case"index-pattern":if(type==="visualizations"){calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.indexPattern.visualizations.calloutText",defaultMessage:"Here are some visualizations that use this index pattern. If you delete this index pattern, these visualizations will not longer work properly."})}else if(type==="searches"){calloutText=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.indexPattern.searches.calloutText",defaultMessage:"Here are some saved searches that use this index pattern. If you delete this index pattern, these saved searches will not longer work properly."})}break}items.push(_react2.default.createElement(_react.Fragment,{key:type},_react2.default.createElement(_eui.EuiDescriptionListTitle,{style:{marginBottom:"1rem"}},_react2.default.createElement(_eui.EuiCallOut,{color:calloutColor,title:calloutTitle},_react2.default.createElement("p",null,calloutText))),_react2.default.createElement(_eui.EuiInMemoryTable,{items:list,columns:[{width:24,render:function render(){return _react2.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react2.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),size:"s",type:(0,_lib.getSavedObjectIcon)(type)}))}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnTitleName",defaultMessage:"Title"}),field:"title",render:function render(title,item){return _react2.default.createElement(_eui.EuiLink,{href:""+getEditUrl(item.id,type)},title)}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActionsName",defaultMessage:"Actions"}),actions:[{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActions.inAppName",defaultMessage:"In app"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.relationships.columnActions.inAppDescription",defaultMessage:"View this saved object within Kibana"}),icon:"eye",onClick:function onClick(object){return goInApp(object.id,type)}}]}],pagination:true})))}};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.entries(relationships)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _ref2=_step.value;var _ref3=_slicedToArray(_ref2,2);var type=_ref3[0];var list=_ref3[1];_loop(type,list)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return _react2.default.createElement(_eui.EuiDescriptionList,null,items)}},{key:"render",value:function render(){var _props3=this.props,close=_props3.close,title=_props3.title,type=_props3.type;return _react2.default.createElement(_eui.EuiFlyout,{onClose:close},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_react2.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react2.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),size:"m",type:(0,_lib.getSavedObjectIcon)(type)})),"  ",title))),_react2.default.createElement(_eui.EuiFlyoutBody,null,this.renderRelationships()))}}]);return RelationshipsUI}(_react.Component);RelationshipsUI.propTypes={getRelationships:_propTypes2.default.func.isRequired,id:_propTypes2.default.string.isRequired,type:_propTypes2.default.string.isRequired,title:_propTypes2.default.string.isRequired,close:_propTypes2.default.func.isRequired,getEditUrl:_propTypes2.default.func.isRequired,goInApp:_propTypes2.default.func.isRequired};var Relationships=exports.Relationships=(0,_react3.injectI18n)(RelationshipsUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRelationships=undefined;var getRelationships=exports.getRelationships=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type,id,$http,basePath){var url,options,response,respBody,err;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=basePath+"/api/kibana/management/saved_objects/relationships/"+type+"/"+id;options={method:"GET",url:url};_context.prev=2;_context.next=5;return $http(options);case 5:response=_context.sent;return _context.abrupt("return",response?response.data:undefined);case 9:_context.prev=9;_context.t0=_context["catch"](2);respBody=(0,_lodash.get)(_context.t0,"data",{});err=new Error(respBody.message||respBody.error||_context.t0.status+" Response");err.statusCode=respBody.statusCode||_context.t0.status;err.body=respBody;throw err;case 16:case"end":return _context.stop()}}},_callee,this,[[2,9]])}));return function getRelationships(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}();var _lodash=__webpack_require__(0);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectCounts=undefined;var getSavedObjectCounts=exports.getSavedObjectCounts=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee($http,typesToInclude,searchString){var results;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return $http.post(apiBase+"/counts",{typesToInclude:typesToInclude,searchString:searchString});case 2:results=_context.sent;return _context.abrupt("return",results.data);case 4:case"end":return _context.stop()}}},_callee,this)}));return function getSavedObjectCounts(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var apiBase=_chrome2.default.addBasePath("/api/kibana/management/saved_objects/scroll")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectIcon=getSavedObjectIcon;function getSavedObjectIcon(type){switch(type){case"search":case"searches":return"search";case"visualization":case"visualizations":return"visualizeApp";case"dashboard":case"dashboards":return"dashboardApp";case"index-pattern":case"index-patterns":case"indexPatterns":return"indexPatternApp";default:return"apps"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectLabel=getSavedObjectLabel;function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQuery=parseQuery;function parseQuery(query){var queryText=undefined;var visibleTypes=undefined;if(query){if(query.ast.getTermClauses().length){queryText=query.ast.getTermClauses().map(function(clause){return clause.value}).join(" ")}if(query.ast.getFieldClauses("type")){visibleTypes=query.ast.getFieldClauses("type")[0].value}}return{queryText:queryText,visibleTypes:visibleTypes}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.retrieveAndExportDocs=undefined;var retrieveAndExportDocs=exports.retrieveAndExportDocs=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(objs,savedObjectsClient){var response,objects;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedObjectsClient.bulkGet(objs);case 2:response=_context.sent;objects=response.savedObjects.map(function(obj){return{_id:obj.id,_type:obj.type,_source:obj.attributes,_migrationVersion:obj.migrationVersion}});(0,_.saveToFile)(JSON.stringify(objects,null,2));case 5:case"end":return _context.stop()}}},_callee,this)}));return function retrieveAndExportDocs(_x,_x2){return _ref.apply(this,arguments)}}();var _=__webpack_require__(254);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveToFile=saveToFile;var _filesaver=__webpack_require__(326);function saveToFile(resultsJson){var blob=new Blob([resultsJson],{type:"application/json"});(0,_filesaver.saveAs)(blob,"export.json")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scanAllTypes=undefined;var scanAllTypes=exports.scanAllTypes=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee($http,typesToInclude){var results;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return $http.post(apiBase+"/export",{typesToInclude:typesToInclude});case 2:results=_context.sent;return _context.abrupt("return",results.data);case 4:case"end":return _context.stop()}}},_callee,this)}));return function scanAllTypes(_x,_x2){return _ref.apply(this,arguments)}}();var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var apiBase=_chrome2.default.addBasePath("/api/kibana/management/saved_objects/scroll")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(1794);Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lib=__webpack_require__(254);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TableUI=function(_PureComponent){_inherits(TableUI,_PureComponent);function TableUI(){var _ref;var _temp,_this,_ret;_classCallCheck(this,TableUI);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=TableUI.__proto__||Object.getPrototypeOf(TableUI)).call.apply(_ref,[this].concat(args))),_this),_this.state={isSearchTextValid:true,parseErrorMessage:null},_this.onChange=function(_ref2){var query=_ref2.query,error=_ref2.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(TableUI,[{key:"render",value:function render(){var _props=this.props,pageIndex=_props.pageIndex,pageSize=_props.pageSize,itemId=_props.itemId,items=_props.items,totalItemCount=_props.totalItemCount,isSearching=_props.isSearching,filterOptions=_props.filterOptions,selection=_props.selectionConfig,onDelete=_props.onDelete,onExport=_props.onExport,selectedSavedObjects=_props.selectedSavedObjects,onTableChange=_props.onTableChange,goInApp=_props.goInApp,getEditUrl=_props.getEditUrl,onShowRelationships=_props.onShowRelationships,intl=_props.intl;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[5,10,20,50]};var filters=[{type:"field_value_selection",field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.typeFilterName",defaultMessage:"Type"}),multiSelect:"or",options:filterOptions}];var columns=[{field:"type",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTypeName",defaultMessage:"Type"}),width:"50px",align:"center",description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTypeDescription",defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type){return _react2.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react2.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),type:(0,_lib.getSavedObjectIcon)(type),size:"s"}))}},{field:"title",name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTitleName",defaultMessage:"Title"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnTitleDescription",defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){return _react2.default.createElement(_eui.EuiLink,{href:getEditUrl(object.id,object.type)},title)}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActionsName",defaultMessage:"Actions"}),actions:[{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewInAppActionName",defaultMessage:"In app"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewInAppActionDescription",defaultMessage:"View this saved object within Kibana"}),type:"icon",icon:"eye",onClick:function onClick(object){return goInApp(object.id,object.type)}},{name:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionName",defaultMessage:"Relationships"}),description:intl.formatMessage({id:"kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionDescription",defaultMessage:"View the relationships this saved object has to other saved objects"}),type:"icon",icon:"kqlSelector",onClick:function onClick(object){return onShowRelationships(object.id,object.type,object.title)}}]}];var queryParseError=void 0;if(!this.state.isSearchTextValid){var parseErrorMsg=intl.formatMessage({id:"kbn.management.objects.objectsTable.searchBar.unableToParseQueryErrorMessage",defaultMessage:"Unable to parse query"});queryParseError=_react2.default.createElement(_eui.EuiFormErrorText,null,parseErrorMsg+". "+this.state.parseErrorMessage)}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSearchBar,{box:{"data-test-subj":"savedObjectSearchBar"},filters:filters,onChange:this.onChange,toolsRight:[_react2.default.createElement(_eui.EuiButton,{key:"deleteSO",iconType:"trash",color:"danger",onClick:onDelete,isDisabled:selectedSavedObjects.length===0},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.deleteButtonLabel",defaultMessage:"Delete"})),_react2.default.createElement(_eui.EuiButton,{key:"exportSO",iconType:"exportAction",onClick:onExport,isDisabled:selectedSavedObjects.length===0},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.exportButtonLabel",defaultMessage:"Export"}))]}),queryParseError,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"savedObjectsTable"},_react2.default.createElement(_eui.EuiBasicTable,{loading:isSearching,itemId:itemId,items:items,columns:columns,pagination:pagination,selection:selection,onChange:onTableChange})))}}]);return TableUI}(_react.PureComponent);TableUI.propTypes={selectedSavedObjects:_propTypes2.default.array.isRequired,selectionConfig:_propTypes2.default.shape({selectable:_propTypes2.default.func,selectableMessage:_propTypes2.default.func,onSelectionChange:_propTypes2.default.func.isRequired}).isRequired,filterOptions:_propTypes2.default.array.isRequired,onDelete:_propTypes2.default.func.isRequired,onExport:_propTypes2.default.func.isRequired,getEditUrl:_propTypes2.default.func.isRequired,goInApp:_propTypes2.default.func.isRequired,pageIndex:_propTypes2.default.number.isRequired,pageSize:_propTypes2.default.number.isRequired,items:_propTypes2.default.array.isRequired,itemId:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.func]),totalItemCount:_propTypes2.default.number.isRequired,onQueryChange:_propTypes2.default.func.isRequired,onTableChange:_propTypes2.default.func.isRequired,isSearching:_propTypes2.default.bool.isRequired,onShowRelationships:_propTypes2.default.func.isRequired};var Table=exports.Table=(0,_react3.injectI18n)(TableUI)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.destroyIndexPatternList=undefined;exports.updateIndexPatternList=updateIndexPatternList;var _management=__webpack_require__(74);var _index_pattern_list=__webpack_require__(589);var _index_pattern_creation=__webpack_require__(591);__webpack_require__(1800);__webpack_require__(1838);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _index=__webpack_require__(1886);var _index2=_interopRequireDefault(_index);var _saved_objects=__webpack_require__(24);var _feature_catalogue=__webpack_require__(39);var _i18n=__webpack_require__(8);var _i18n2=__webpack_require__(14);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _index_pattern_list2=__webpack_require__(1887);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var INDEX_PATTERN_LIST_DOM_ELEMENT_ID="indexPatternListReact";function updateIndexPatternList($scope,indexPatternCreationOptions,defaultIndex,indexPatterns){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n2.I18nContext,null,_react2.default.createElement(_index_pattern_list2.IndexPatternList,{indexPatternCreationOptions:indexPatternCreationOptions,defaultIndex:defaultIndex,indexPatterns:indexPatterns})),node)}var destroyIndexPatternList=exports.destroyIndexPatternList=function destroyIndexPatternList(){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};var indexPatternsResolutions={indexPatterns:function indexPatterns(Private){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title","type"],perPage:1e4}).then(function(response){return response.savedObjects})}};_routes2.default.defaults(/management\/kibana\/(indices|index)/,{resolve:indexPatternsResolutions});_modules.uiModules.get("apps/management").directive("kbnManagementIndices",function($route,config,kbnUrl,Private){return{restrict:"E",transclude:true,template:_index2.default,link:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee($scope){var indexPatternListProvider,indexPatternCreationProvider,indexPatternCreationOptions,renderList;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternListProvider=Private(_index_pattern_list.IndexPatternListFactory)();indexPatternCreationProvider=Private(_index_pattern_creation.IndexPatternCreationFactory)();_context.next=4;return indexPatternCreationProvider.getIndexPatternCreationOptions(function(url){$scope.$evalAsync(function(){return kbnUrl.change(url)})});case 4:indexPatternCreationOptions=_context.sent;renderList=function renderList(){$scope.indexPatternList=$route.current.locals.indexPatterns.map(function(pattern){var id=pattern.id;var tags=indexPatternListProvider.getIndexPatternTags(pattern,$scope.defaultIndex===id);return{id:id,title:pattern.get("title"),url:kbnUrl.eval("#/management/kibana/indices/{{id}}",{id:id}),active:$scope.editingId===id,default:$scope.defaultIndex===id,tag:tags&&tags.length?tags[0]:null}}).sort(function(a,b){if(a.default){return-1}if(b.default){return 1}if(a.title<b.title){return-1}if(a.title>b.title){return 1}return 0})||[];updateIndexPatternList($scope,indexPatternCreationOptions,$scope.defaultIndex,$scope.indexPatternList)};$scope.$on("$destroy",destroyIndexPatternList);$scope.editingId=$route.current.params.indexPatternId;$scope.$watch("defaultIndex",function(){return renderList()});config.bindToScope($scope,"defaultIndex");$scope.$apply();case 11:case"end":return _context.stop()}}},_callee,this)}));function link(_x){return _ref.apply(this,arguments)}return link}()}});_management.management.getSection("kibana").register("indices",{display:_i18n.i18n.translate("kbn.management.indexPattern.sectionsHeader",{defaultMessage:"Index Patterns"}),order:0,url:"#/management/kibana/indices/"});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(){return{id:"index_patterns",title:_i18n.i18n.translate("kbn.management.indexPatternHeader",{defaultMessage:"Index Patterns"}),description:_i18n.i18n.translate("kbn.management.indexPatternLabel",{defaultMessage:"Manage the index patterns that help retrieve your data from Elasticsearch."}),icon:"indexPatternApp",path:"/app/kibana#/management/kibana/indices",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListFactory=undefined;var _index_pattern_list_config_registry=__webpack_require__(347);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var IndexPatternList=function IndexPatternList(registry){var _this=this;_classCallCheck(this,IndexPatternList);this.getIndexPatternTags=function(indexPattern){return _this._plugins.reduce(function(tags,plugin){return plugin.getIndexPatternTags?tags.concat(plugin.getIndexPatternTags(indexPattern)):tags},[])};this.getFieldInfo=function(indexPattern,field){return _this._plugins.reduce(function(info,plugin){return plugin.getFieldInfo?info.concat(plugin.getFieldInfo(indexPattern,field)):info},[])};this.areScriptedFieldsEnabled=function(indexPattern){return _this._plugins.every(function(plugin){return plugin.areScriptedFieldsEnabled?plugin.areScriptedFieldsEnabled(indexPattern):true})};this._plugins=registry.inOrder.map(function(Plugin){return new Plugin})};var IndexPatternListFactory=exports.IndexPatternListFactory=function IndexPatternListFactory(Private){return function(){var indexPatternListRegistry=Private(_index_pattern_list_config_registry.IndexPatternListConfigRegistry);var indexPatternListProvider=new IndexPatternList(indexPatternListRegistry);return indexPatternListProvider}}},function(module,exports,__webpack_require__){"use strict";var _index_pattern_list_config=__webpack_require__(590);var _index_pattern_list_config_registry=__webpack_require__(347);_index_pattern_list_config_registry.IndexPatternListConfigRegistry.register(function(){return _index_pattern_list_config.IndexPatternListConfig})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationFactory=undefined;var _index_pattern_creation_config_registry=__webpack_require__(348);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var IndexPatternCreation=function IndexPatternCreation(registry,httpClient,type){_classCallCheck(this,IndexPatternCreation);_initialiseProps.call(this);this._registry=registry;this._allTypes=this._registry.inOrder.map(function(Plugin){return new Plugin({httpClient:httpClient})});this._setCurrentType(type)};var _initialiseProps=function _initialiseProps(){var _this=this;this._setCurrentType=function(type){var index=type?_this._registry.inOrder.findIndex(function(Plugin){return Plugin.key===type}):-1;_this._currentType=index>-1&&_this._allTypes[index]?_this._allTypes[index]:null};this.getType=function(){return _this._currentType||null};this.getIndexPatternCreationOptions=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(urlHandler){var options;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options=[];_context2.next=3;return Promise.all(_this._allTypes.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(type){var option;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!type.getIndexPatternCreationOption){_context.next=6;break}_context.next=3;return type.getIndexPatternCreationOption(urlHandler);case 3:_context.t0=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:option=_context.t0;if(option){options.push(option)}case 9:case"end":return _context.stop()}}},_callee,_this)}));return function(_x3){return _ref2.apply(this,arguments)}}()));case 3:return _context2.abrupt("return",options);case 4:case"end":return _context2.stop()}}},_callee2,_this)}));return function(_x2){return _ref.apply(this,arguments)}}()};var IndexPatternCreationFactory=exports.IndexPatternCreationFactory=function IndexPatternCreationFactory(Private,$http){return function(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";var indexPatternCreationRegistry=Private(_index_pattern_creation_config_registry.IndexPatternCreationConfigRegistry);var indexPatternCreationProvider=new IndexPatternCreation(indexPatternCreationRegistry,$http,type);return indexPatternCreationProvider}}},function(module,exports,__webpack_require__){"use strict";var _index_pattern_creation_config=__webpack_require__(592);var _index_pattern_creation_config_registry=__webpack_require__(348);_index_pattern_creation_config_registry.IndexPatternCreationConfigRegistry.register(function(){return _index_pattern_creation_config.IndexPatternCreationConfig})},function(module,exports,__webpack_require__){"use strict";var _saved_objects=__webpack_require__(24);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _angular_template=__webpack_require__(1801);var _angular_template2=_interopRequireDefault(_angular_template);__webpack_require__(88);var _index_pattern_creation=__webpack_require__(591);var _breadcrumbs=__webpack_require__(349);var _render=__webpack_require__(1802);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.when("/management/kibana/index",{template:_angular_template2.default,k7Breadcrumbs:_breadcrumbs.getCreateBreadcrumbs,controller:function controller($scope,$injector){var kbnUrl=$injector.get("kbnUrl");var Private=$injector.get("Private");$scope.$$postDigest(function(){var $routeParams=$injector.get("$routeParams");var indexPatternCreationProvider=Private(_index_pattern_creation.IndexPatternCreationFactory)($routeParams.type);var indexPatternCreationType=indexPatternCreationProvider.getType();var services={config:$injector.get("config"),es:$injector.get("es"),indexPatterns:$injector.get("indexPatterns"),$http:$injector.get("$http"),savedObjectsClient:Private(_saved_objects.SavedObjectsClientProvider),indexPatternCreationType:indexPatternCreationType,changeUrl:function changeUrl(url){$scope.$evalAsync(function(){return kbnUrl.changePath(url)})}};var initialQuery=$routeParams.id?decodeURIComponent($routeParams.id):undefined;(0,_render.renderCreateIndexPatternWizard)(initialQuery,services)});$scope.$on("$destroy",_render.destroyCreateIndexPatternWizard)}})},function(module,exports){module.exports='<kbn-management-app section="kibana/indices">\n  <kbn-management-indices>\n    <div id="createIndexPatternReact"></div>\n  </kbn-management-indices>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderCreateIndexPatternWizard=renderCreateIndexPatternWizard;exports.destroyCreateIndexPatternWizard=destroyCreateIndexPatternWizard;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _create_index_pattern_wizard=__webpack_require__(1803);var _i18n=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CREATE_INDEX_PATTERN_DOM_ELEMENT_ID="createIndexPatternReact";function renderCreateIndexPatternWizard(initialQuery,services){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_create_index_pattern_wizard.CreateIndexPatternWizard,{initialQuery:initialQuery,services:services})),node)}function destroyCreateIndexPatternWizard(){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateIndexPatternWizard=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _step_index_pattern=__webpack_require__(1804);var _step_time_field=__webpack_require__(1821);var _header=__webpack_require__(1832);var _loading_state=__webpack_require__(1834);var _empty_state=__webpack_require__(1836);var _constants=__webpack_require__(255);var _lib=__webpack_require__(350);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CreateIndexPatternWizard=exports.CreateIndexPatternWizard=function(_Component){_inherits(CreateIndexPatternWizard,_Component);function CreateIndexPatternWizard(props){var _this2=this;_classCallCheck(this,CreateIndexPatternWizard);var _this=_possibleConstructorReturn(this,(CreateIndexPatternWizard.__proto__||Object.getPrototypeOf(CreateIndexPatternWizard)).call(this,props));_this.catchAndWarn=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(asyncFn,errorValue,errorMsg){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return asyncFn;case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);_this.setState(function(prevState){return{toasts:prevState.toasts.concat([{title:errorMsg,id:errorMsg,color:"warning",iconType:"alert"}])}});return _context.abrupt("return",errorValue);case 10:case"end":return _context.stop()}}},_callee,_this2,[[0,6]])}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}();_this.fetchData=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var services,indicesFailMsg,clustersFailMsg;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:services=_this.props.services;_this.setState({allIndices:[],isInitiallyLoadingIndices:true,remoteClustersExist:false});indicesFailMsg=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.loadIndicesFailMsg",defaultMessage:"Failed to load indices"});clustersFailMsg=_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.loadClustersFailMsg",defaultMessage:"Failed to load remote clusters"});(0,_lib.ensureMinimumTime)(_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*",_constants.MAX_SEARCH_SIZE),[],indicesFailMsg)).then(function(allIndices){return _this.setState({allIndices:allIndices,isInitiallyLoadingIndices:false})});_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*:*",1),["a"],clustersFailMsg).then(function(remoteIndices){return _this.setState({remoteClustersExist:!!remoteIndices.length})});case 6:case"end":return _context2.stop()}}},_callee2,_this2)}));_this.createIndexPattern=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(timeFieldName,indexPatternId){var services,indexPattern,emptyPattern,createdId;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:services=_this.props.services;indexPattern=_this.state.indexPattern;_context3.next=4;return services.indexPatterns.get();case 4:emptyPattern=_context3.sent;Object.assign(emptyPattern,_extends({id:indexPatternId,title:indexPattern,timeFieldName:timeFieldName},_this.indexPatternCreationType.getIndexPatternMappings()));_context3.next=8;return emptyPattern.create();case 8:createdId=_context3.sent;if(services.config.get("defaultIndex")){_context3.next=12;break}_context3.next=12;return services.config.set("defaultIndex",createdId);case 12:services.indexPatterns.cache.clear(createdId);services.changeUrl("/management/kibana/indices/"+createdId);case 14:case"end":return _context3.stop()}}},_callee3,_this2)}));return function(_x4,_x5){return _ref3.apply(this,arguments)}}();_this.goToTimeFieldStep=function(indexPattern){_this.setState({step:2,indexPattern:indexPattern})};_this.goToIndexPatternStep=function(){_this.setState({step:1})};_this.onChangeIncludingSystemIndices=function(){_this.setState(function(state){return{isIncludingSystemIndices:!state.isIncludingSystemIndices}})};_this.removeToast=function(removedToast){_this.setState(function(prevState){return{toasts:prevState.toasts.filter(function(toast){return toast.id!==removedToast.id})}})};_this.indexPatternCreationType=_this.props.services.indexPatternCreationType;_this.state={step:1,indexPattern:"",allIndices:[],remoteClustersExist:false,isInitiallyLoadingIndices:true,isIncludingSystemIndices:false,toasts:[]};return _this}_createClass(CreateIndexPatternWizard,[{key:"componentWillMount",value:function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.fetchData();case 1:case"end":return _context4.stop()}}},_callee4,this)}));function componentWillMount(){return _ref4.apply(this,arguments)}return componentWillMount}()},{key:"renderHeader",value:function renderHeader(){var isIncludingSystemIndices=this.state.isIncludingSystemIndices;return _react2.default.createElement(_header.Header,{prompt:this.indexPatternCreationType.renderPrompt(),showSystemIndices:this.indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,onChangeIncludingSystemIndices:this.onChangeIncludingSystemIndices,indexPatternName:this.indexPatternCreationType.getIndexPatternName(),isBeta:this.indexPatternCreationType.getIsBeta()})}},{key:"renderContent",value:function renderContent(){var _state=this.state,allIndices=_state.allIndices,isInitiallyLoadingIndices=_state.isInitiallyLoadingIndices,isIncludingSystemIndices=_state.isIncludingSystemIndices,step=_state.step,indexPattern=_state.indexPattern,remoteClustersExist=_state.remoteClustersExist;if(isInitiallyLoadingIndices){return _react2.default.createElement(_loading_state.LoadingState,null)}var hasDataIndices=allIndices.some(function(_ref5){var name=_ref5.name;return!name.startsWith(".")});if(!hasDataIndices&&!isIncludingSystemIndices&&!remoteClustersExist){return _react2.default.createElement(_empty_state.EmptyState,{onRefresh:this.fetchData})}if(step===1){var _props=this.props,services=_props.services,initialQuery=_props.initialQuery;return _react2.default.createElement(_step_index_pattern.StepIndexPattern,{allIndices:allIndices,initialQuery:indexPattern||initialQuery,isIncludingSystemIndices:isIncludingSystemIndices,esService:services.es,savedObjectsClient:services.savedObjectsClient,indexPatternCreationType:this.indexPatternCreationType,goToNextStep:this.goToTimeFieldStep})}if(step===2){var _services=this.props.services;return _react2.default.createElement(_step_time_field.StepTimeField,{indexPattern:indexPattern,indexPatternsService:_services.indexPatterns,goToPreviousStep:this.goToIndexPatternStep,createIndexPattern:this.createIndexPattern,indexPatternCreationType:this.indexPatternCreationType})}return null}},{key:"render",value:function render(){var header=this.renderHeader();var content=this.renderContent();return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",null,header,content),_react2.default.createElement(_eui.EuiGlobalToastList,{toasts:this.state.toasts,dismissToast:this.removeToast,toastLifeTimeMs:6e3}))}}]);return CreateIndexPatternWizard}(_react.Component);CreateIndexPatternWizard.propTypes={initialQuery:_propTypes2.default.string,services:_propTypes2.default.shape({es:_propTypes2.default.object.isRequired,indexPatterns:_propTypes2.default.object.isRequired,savedObjectsClient:_propTypes2.default.object.isRequired,indexPatternCreationType:_propTypes2.default.object.isRequired,config:_propTypes2.default.object.isRequired,changeUrl:_propTypes2.default.func.isRequired}).isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _step_index_pattern=__webpack_require__(1805);Object.defineProperty(exports,"StepIndexPattern",{enumerable:true,get:function get(){return _step_index_pattern.StepIndexPattern}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepIndexPattern=exports.StepIndexPatternComponent=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _index_patterns=__webpack_require__(88);var _constants=__webpack_require__(255);var _lib=__webpack_require__(350);var _loading_indices=__webpack_require__(1812);var _status_message=__webpack_require__(1814);var _indices_list=__webpack_require__(1816);var _header=__webpack_require__(1819);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var uiSettings=_chrome2.default.getUiSettingsClient();var StepIndexPatternComponent=exports.StepIndexPatternComponent=function(_Component){_inherits(StepIndexPatternComponent,_Component);function StepIndexPatternComponent(props){_classCallCheck(this,StepIndexPatternComponent);var _this=_possibleConstructorReturn(this,(StepIndexPatternComponent.__proto__||Object.getPrototypeOf(StepIndexPatternComponent)).call(this,props));_initialiseProps.call(_this);var indexPatternCreationType=_this.props.indexPatternCreationType;_this.state={partialMatchedIndices:[],exactMatchedIndices:[],isLoadingIndices:false,existingIndexPatterns:[],indexPatternExists:false,query:props.initialQuery,appendedWildcard:false,showingIndexPatternQueryErrors:false,indexPatternName:indexPatternCreationType.getIndexPatternName()};_this.ILLEGAL_CHARACTERS=[].concat(_toConsumableArray(_index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS));_this.lastQuery=null;return _this}_createClass(StepIndexPatternComponent,[{key:"componentWillMount",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.fetchExistingIndexPatterns();if(this.state.query){this.lastQuery=this.state.query;this.fetchIndices(this.state.query)}case 2:case"end":return _context.stop()}}},_callee,this)}));function componentWillMount(){return _ref.apply(this,arguments)}return componentWillMount}()},{key:"renderLoadingState",value:function renderLoadingState(){var isLoadingIndices=this.state.isLoadingIndices;if(!isLoadingIndices){return null}return _react2.default.createElement(_loading_indices.LoadingIndices,{"data-test-subj":"createIndexPatternStep1Loading"})}},{key:"renderStatusMessage",value:function renderStatusMessage(matchedIndices){var indexPatternCreationType=this.props.indexPatternCreationType;var _state=this.state,query=_state.query,isLoadingIndices=_state.isLoadingIndices,indexPatternExists=_state.indexPatternExists,isIncludingSystemIndices=_state.isIncludingSystemIndices;if(isLoadingIndices||indexPatternExists){return null}return _react2.default.createElement(_status_message.StatusMessage,{matchedIndices:matchedIndices,showSystemIndices:indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,query:query})}},{key:"renderList",value:function renderList(_ref2){var visibleIndices=_ref2.visibleIndices,allIndices=_ref2.allIndices;var _state2=this.state,query=_state2.query,isLoadingIndices=_state2.isLoadingIndices,indexPatternExists=_state2.indexPatternExists;if(isLoadingIndices||indexPatternExists){return null}var indicesToList=query.length?visibleIndices:allIndices;return _react2.default.createElement(_indices_list.IndicesList,{"data-test-subj":"createIndexPatternStep1IndicesList",query:query,indices:indicesToList})}},{key:"renderIndexPatternExists",value:function renderIndexPatternExists(){var _state3=this.state,indexPatternExists=_state3.indexPatternExists,query=_state3.query;if(!indexPatternExists){return null}return _react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.warningHeader",defaultMessage:"There's already an index pattern called {query}",values:{query:query}}),iconType:"help",color:"warning"})}},{key:"renderHeader",value:function renderHeader(_ref3){var indices=_ref3.exactMatchedIndices;var _props=this.props,goToNextStep=_props.goToNextStep,indexPatternCreationType=_props.indexPatternCreationType,intl=_props.intl;var _state4=this.state,query=_state4.query,showingIndexPatternQueryErrors=_state4.showingIndexPatternQueryErrors,indexPatternExists=_state4.indexPatternExists,indexPatternName=_state4.indexPatternName;var containsErrors=false;var errors=[];var characterList=this.ILLEGAL_CHARACTERS.slice(0,this.ILLEGAL_CHARACTERS.length-1).join(", ");var checkIndices=indexPatternCreationType.checkIndicesForErrors(indices);if(!query||!query.length||query==="."||query===".."){containsErrors=true}else if((0,_lib.containsIllegalCharacters)(query,_index_patterns.INDEX_PATTERN_ILLEGAL_CHARACTERS)){var errorMessage=intl.formatMessage({id:"kbn.management.createIndexPattern.step.invalidCharactersErrorMessage",defaultMessage:"A {indexPatternName} cannot contain spaces or the characters: {characterList}"},{characterList:characterList,indexPatternName:indexPatternName});errors.push(errorMessage);containsErrors=true}else if(checkIndices){errors.push.apply(errors,_toConsumableArray(checkIndices));containsErrors=true}var isInputInvalid=showingIndexPatternQueryErrors&&containsErrors&&errors.length>0;var isNextStepDisabled=containsErrors||indices.length===0||indexPatternExists;return _react2.default.createElement(_header.Header,{"data-test-subj":"createIndexPatternStep1Header",isInputInvalid:isInputInvalid,errors:errors,characterList:characterList,query:query,onQueryChanged:this.onQueryChanged,goToNextStep:goToNextStep,isNextStepDisabled:isNextStepDisabled})}},{key:"render",value:function render(){var _props2=this.props,isIncludingSystemIndices=_props2.isIncludingSystemIndices,allIndices=_props2.allIndices;var _state5=this.state,query=_state5.query,partialMatchedIndices=_state5.partialMatchedIndices,exactMatchedIndices=_state5.exactMatchedIndices;var matchedIndices=(0,_lib.getMatchedIndices)(allIndices,partialMatchedIndices,exactMatchedIndices,query,isIncludingSystemIndices);return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},this.renderHeader(matchedIndices),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderLoadingState(matchedIndices),this.renderIndexPatternExists(),this.renderStatusMessage(matchedIndices),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderList(matchedIndices))}}]);return StepIndexPatternComponent}(_react.Component);StepIndexPatternComponent.propTypes={allIndices:_propTypes2.default.array.isRequired,isIncludingSystemIndices:_propTypes2.default.bool.isRequired,esService:_propTypes2.default.object.isRequired,savedObjectsClient:_propTypes2.default.object.isRequired,indexPatternCreationType:_propTypes2.default.object.isRequired,goToNextStep:_propTypes2.default.func.isRequired,initialQuery:_propTypes2.default.string};StepIndexPatternComponent.defaultProps={initialQuery:uiSettings.get("indexPattern:placeholder")};var _initialiseProps=function _initialiseProps(){var _this2=this;this.fetchExistingIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _ref5,savedObjects,existingIndexPatterns;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.props.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});case 2:_ref5=_context2.sent;savedObjects=_ref5.savedObjects;existingIndexPatterns=savedObjects.map(function(obj){return obj&&obj.attributes?obj.attributes.title:""});_this2.setState({existingIndexPatterns:existingIndexPatterns});case 6:case"end":return _context2.stop()}}},_callee2,_this2)}));this.fetchIndices=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(query){var _props3,esService,indexPatternCreationType,existingIndexPatterns,_exactMatchedIndices,_ref7,_ref8,partialMatchedIndices,exactMatchedIndices;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_props3=_this2.props,esService=_props3.esService,indexPatternCreationType=_props3.indexPatternCreationType;existingIndexPatterns=_this2.state.existingIndexPatterns;if(!existingIndexPatterns.includes(query)){_context3.next=5;break}_this2.setState({indexPatternExists:true});return _context3.abrupt("return");case 5:_this2.setState({isLoadingIndices:true,indexPatternExists:false});if(!query.endsWith("*")){_context3.next=14;break}_context3.next=9;return(0,_lib.ensureMinimumTime)((0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE));case 9:_exactMatchedIndices=_context3.sent;if(!(query!==_this2.lastQuery)){_context3.next=12;break}return _context3.abrupt("return");case 12:_this2.setState({exactMatchedIndices:_exactMatchedIndices,isLoadingIndices:false});return _context3.abrupt("return");case 14:_context3.next=16;return(0,_lib.ensureMinimumTime)([(0,_lib.getIndices)(esService,indexPatternCreationType,query+"*",_constants.MAX_SEARCH_SIZE),(0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE)]);case 16:_ref7=_context3.sent;_ref8=_slicedToArray(_ref7,2);partialMatchedIndices=_ref8[0];exactMatchedIndices=_ref8[1];if(!(query!==_this2.lastQuery)){_context3.next=22;break}return _context3.abrupt("return");case 22:_this2.setState({partialMatchedIndices:partialMatchedIndices,exactMatchedIndices:exactMatchedIndices,isLoadingIndices:false});case 23:case"end":return _context3.stop()}}},_callee3,_this2)}));return function(_x){return _ref6.apply(this,arguments)}}();this.onQueryChanged=function(e){var appendedWildcard=_this2.state.appendedWildcard;var target=e.target;var query=target.value;if(query.length===1&&(0,_lib.canAppendWildcard)(query)){query+="*";_this2.setState({appendedWildcard:true});setTimeout(function(){return target.setSelectionRange(1,1)})}else{if(query==="*"&&appendedWildcard){query="";_this2.setState({appendedWildcard:false})}}_this2.lastQuery=query;_this2.setState({query:query,showingIndexPatternQueryErrors:!!query.length});_this2.fetchIndices(query)}};var StepIndexPattern=exports.StepIndexPattern=(0,_react3.injectI18n)(StepIndexPatternComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var canAppendWildcard=exports.canAppendWildcard=function canAppendWildcard(keyPressed){if(!keyPressed||!/[a-z0-9]/i.test(keyPressed)||keyPressed.length!==1){return false}return true}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ensureMinimumTime=exports.ensureMinimumTime=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(promiseOrPromises){var minimumTimeMs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_MINIMUM_TIME_MS;var returnValue,bufferedMinimumTimeMs,asyncActionStartTime,asyncActionCompletionTime,asyncActionDuration,additionalWaitingTime;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:returnValue=void 0;bufferedMinimumTimeMs=minimumTimeMs+5;asyncActionStartTime=(new Date).getTime();if(!Array.isArray(promiseOrPromises)){_context.next=9;break}_context.next=6;return Promise.all(promiseOrPromises);case 6:returnValue=_context.sent;_context.next=12;break;case 9:_context.next=11;return promiseOrPromises;case 11:returnValue=_context.sent;case 12:asyncActionCompletionTime=(new Date).getTime();asyncActionDuration=asyncActionCompletionTime-asyncActionStartTime;if(!(asyncActionDuration<bufferedMinimumTimeMs)){_context.next=18;break}additionalWaitingTime=bufferedMinimumTimeMs-(asyncActionCompletionTime-asyncActionStartTime);_context.next=18;return new Promise(function(resolve){return setTimeout(resolve,additionalWaitingTime)});case 18:return _context.abrupt("return",returnValue);case 19:case"end":return _context.stop()}}},_callee,this)}));return function ensureMinimumTime(_x2){return _ref.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var DEFAULT_MINIMUM_TIME_MS=exports.DEFAULT_MINIMUM_TIME_MS=300},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndices=undefined;var getIndices=exports.getIndices=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(es,indexPatternCreationType,rawPattern,limit){var pattern,params,response,type;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pattern=rawPattern.trim();if(!(pattern==="*:")){_context.next=3;break}return _context.abrupt("return",[]);case 3:if(!(pattern==="")){_context.next=5;break}return _context.abrupt("return",[]);case 5:if(!pattern.startsWith(",")){_context.next=7;break}return _context.abrupt("return",[]);case 7:if(limit){_context.next=9;break}throw new Error("`getIndices()` was called without the required `limit` parameter.");case 9:params={ignoreUnavailable:true,index:pattern,ignore:[404],body:{size:0,aggs:{indices:{terms:{field:"_index",size:limit}}}}};_context.prev=10;_context.next=13;return es.search(params);case 13:response=_context.sent;if(!(!response||response.error||!response.aggregations)){_context.next=16;break}return _context.abrupt("return",[]);case 16:return _context.abrupt("return",(0,_lodash.sortBy)(response.aggregations.indices.buckets.map(function(bucket){return bucket.key}).map(function(indexName){return{name:indexName,tags:indexPatternCreationType.getIndexTags(indexName)}}),"name"));case 19:_context.prev=19;_context.t0=_context["catch"](10);type=(0,_lodash.get)(_context.t0,"body.error.caused_by.type");if(!(type==="index_not_found_exception")){_context.next=24;break}return _context.abrupt("return",[]);case 24:throw _context.t0;case 25:case"end":return _context.stop()}}},_callee,this,[[10,19]])}));return function getIndices(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}();var _lodash=__webpack_require__(0);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMatchedIndices=getMatchedIndices;var _constants=__webpack_require__(255);function isSystemIndex(index){if(index.startsWith(".")){return true}if(index.includes(":")){return index.split(":").reduce(function(isSystem,index){return isSystem||isSystemIndex(index)},false)}return false}function filterSystemIndices(indices,isIncludingSystemIndices){if(!indices){return indices}var acceptableIndices=isIncludingSystemIndices?indices:indices.filter(function(index){return!isSystemIndex(index.name)});return acceptableIndices.slice(0,_constants.MAX_NUMBER_OF_MATCHING_INDICES)}function getMatchedIndices(unfilteredAllIndices,unfilteredPartialMatchedIndices,unfilteredExactMatchedIndices,query,isIncludingSystemIndices){var allIndices=filterSystemIndices(unfilteredAllIndices,isIncludingSystemIndices);var partialMatchedIndices=filterSystemIndices(unfilteredPartialMatchedIndices,isIncludingSystemIndices);var exactMatchedIndices=filterSystemIndices(unfilteredExactMatchedIndices,isIncludingSystemIndices);var visibleIndices=void 0;if(exactMatchedIndices.length){visibleIndices=exactMatchedIndices}else if(partialMatchedIndices.length){visibleIndices=partialMatchedIndices}else{visibleIndices=allIndices}return{allIndices:allIndices,exactMatchedIndices:exactMatchedIndices,partialMatchedIndices:partialMatchedIndices,visibleIndices:visibleIndices}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.containsIllegalCharacters=containsIllegalCharacters;function containsIllegalCharacters(pattern,illegalCharacters){return illegalCharacters.some(function(char){return pattern.includes(char)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFields=extractTimeFields;var _i18n=__webpack_require__(8);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function extractTimeFields(fields){var dateFields=fields.filter(function(field){return field.type==="date"});var label=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldsLabel",{defaultMessage:"The indices which match this index pattern don't contain any time fields."});if(dateFields.length===0){return[{display:label}]}var disabledDividerOption={isDisabled:true,display:"───",fieldName:""};var noTimeFieldLabel=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldOptionLabel",{defaultMessage:"I don't want to use the Time Filter"});var noTimeFieldOption={display:noTimeFieldLabel,fieldName:undefined};return[].concat(_toConsumableArray(dateFields.map(function(field){return{display:field.name,fieldName:field.name}})),[disabledDividerOption,noTimeFieldOption])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _loading_indices=__webpack_require__(1813);Object.defineProperty(exports,"LoadingIndices",{enumerable:true,get:function get(){return _loading_indices.LoadingIndices}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndices=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var LoadingIndices=function LoadingIndices(_ref){var rest=_objectWithoutProperties(_ref,[]);return _react2.default.createElement(_eui.EuiFlexGroup,_extends({justifyContent:"center",alignItems:"center"},rest),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingHeader",defaultMessage:"Looking for matching indices…"}))),_react2.default.createElement(_eui.EuiText,{size:"s",style:{textAlign:"center"}},_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingLabel",defaultMessage:"Just a sec…"})))))};exports.LoadingIndices=LoadingIndices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _status_message=__webpack_require__(1815);Object.defineProperty(exports,"StatusMessage",{enumerable:true,get:function get(){return _status_message.StatusMessage}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StatusMessage=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StatusMessage=exports.StatusMessage=function StatusMessage(_ref){var _ref$matchedIndices=_ref.matchedIndices,_ref$matchedIndices$a=_ref$matchedIndices.allIndices,allIndices=_ref$matchedIndices$a===undefined?[]:_ref$matchedIndices$a,_ref$matchedIndices$e=_ref$matchedIndices.exactMatchedIndices,exactMatchedIndices=_ref$matchedIndices$e===undefined?[]:_ref$matchedIndices$e,_ref$matchedIndices$p=_ref$matchedIndices.partialMatchedIndices,partialMatchedIndices=_ref$matchedIndices$p===undefined?[]:_ref$matchedIndices$p,isIncludingSystemIndices=_ref.isIncludingSystemIndices,query=_ref.query,showSystemIndicies=_ref.showSystemIndicies;var statusIcon=void 0;var statusMessage=void 0;var statusColor=void 0;var allIndicesLength=allIndices.length;if(query.length===0){statusIcon=null;statusColor="default";if(allIndicesLength>1){statusMessage=_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.matchAnyLabel.matchAnyDetail",defaultMessage:"Your index pattern can match any of your {strongIndices}, below.",values:{strongIndices:_react2.default.createElement("strong",null,allIndicesLength," indices")}}))}else if(!isIncludingSystemIndices&&showSystemIndicies){statusMessage=_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesWithPromptLabel",defaultMessage:"No Elasticsearch indices match your pattern. To view the matching system indices, toggle the switch in the upper right."}))}else{statusMessage=_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesLabel",defaultMessage:"No Elasticsearch indices match your pattern."}))}}else if(exactMatchedIndices.length){statusIcon="check";statusColor="secondary";statusMessage=_react2.default.createElement("span",null," ",_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.successDetail",defaultMessage:"{strongSuccess} Your index pattern matches {strongIndices}.",values:{strongSuccess:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongSuccessLabel",defaultMessage:"Success!"})),strongIndices:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:exactMatchedIndices.length}}))}}))}else if(partialMatchedIndices.length){statusIcon=null;statusColor="default";statusMessage=_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.partialMatchDetail",defaultMessage:"Your index pattern doesn't match any indices, but you have {strongIndices} which {matchedIndicesLength, plural, one {looks} other {look}} similar.",values:{matchedIndicesLength:partialMatchedIndices.length,strongIndices:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.strongIndicesLabel",defaultMessage:"{matchedIndicesLength, plural, one {# index} other {# indices}}",values:{matchedIndicesLength:partialMatchedIndices.length}}))}}))}else if(allIndicesLength){statusIcon=null;statusColor="default";statusMessage=_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.notMatchDetail",defaultMessage:"The index pattern you've entered doesn't match any indices. You can match {indicesLength, plural, one {your} other {any of your}} {strongIndices}, below.",values:{strongIndices:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.allIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:allIndicesLength}})),indicesLength:allIndicesLength}}))}return _react2.default.createElement(_eui.EuiText,{size:"s","data-test-subj":"createIndexPatternStatusMessage"},_react2.default.createElement(_eui.EuiTextColor,{color:statusColor},statusIcon?_react2.default.createElement(_eui.EuiIcon,{type:statusIcon}):null,statusMessage))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _indices_list=__webpack_require__(1817);Object.defineProperty(exports,"IndicesList",{enumerable:true,get:function get(){return _indices_list.IndicesList}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesList=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _constants=__webpack_require__(255);var _eui=__webpack_require__(2);var _services=__webpack_require__(1961);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var IndicesList=exports.IndicesList=function(_Component){_inherits(IndicesList,_Component);function IndicesList(props){_classCallCheck(this,IndicesList);var _this=_possibleConstructorReturn(this,(IndicesList.__proto__||Object.getPrototypeOf(IndicesList)).call(this,props));_this.resetPageTo0=function(){return _this.onChangePage(0)};_this.onChangePage=function(page){_this.pager.goToPageIndex(page);_this.setState({page:page})};_this.onChangePerPage=function(perPage){_this.pager.setItemsPerPage(perPage);_this.setState({perPage:perPage});_this.resetPageTo0();_this.closePerPageControl()};_this.openPerPageControl=function(){_this.setState({isPerPageControlOpen:true})};_this.closePerPageControl=function(){_this.setState({isPerPageControlOpen:false})};_this.state={page:0,perPage:_constants.PER_PAGE_INCREMENTS[1],isPerPageControlOpen:false};_this.pager=new _services.Pager(props.indices.length,_this.state.perPage,_this.state.page);return _this}_createClass(IndicesList,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.indices.length!==this.props.indices.length){this.pager.setTotalItems(nextProps.indices.length);this.resetPageTo0()}}},{key:"renderPagination",value:function renderPagination(){var _this2=this;var _state=this.state,perPage=_state.perPage,page=_state.page,isPerPageControlOpen=_state.isPerPageControlOpen;var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"text",iconType:"arrowDown",iconSide:"right",onClick:this.openPerPageControl},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.pagingLabel",defaultMessage:"Rows per page: {perPage}",values:{perPage:perPage}}));var items=_constants.PER_PAGE_INCREMENTS.map(function(increment){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:increment,icon:"empty",onClick:function onClick(){return _this2.onChangePerPage(increment)}},increment)});var pageCount=this.pager.getTotalPages();var paginationControls=pageCount>1?_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:page,onPageClick:this.onChangePage})):null;return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"customizablePagination",button:button,isOpen:isPerPageControlOpen,closePopover:this.closePerPageControl,panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:items}))),paginationControls)}},{key:"highlightIndexName",value:function highlightIndexName(indexName,query){var queryIdx=indexName.indexOf(query);if(!query||queryIdx===-1){return indexName}var preStr=indexName.substr(0,queryIdx);var postStr=indexName.substr(queryIdx+query.length);return _react2.default.createElement("span",null,preStr,_react2.default.createElement("strong",null,query),postStr)}},{key:"render",value:function render(){var _this3=this;var _props=this.props,indices=_props.indices,query=_props.query,rest=_objectWithoutProperties(_props,["indices","query"]);var queryWithoutWildcard=query.endsWith("*")?query.substr(0,query.length-1):query;var paginatedIndices=indices.slice(this.pager.firstItemIndex,this.pager.lastItemIndex+1);var rows=paginatedIndices.map(function(index,key){return _react2.default.createElement(_eui.EuiTableRow,{key:key},_react2.default.createElement(_eui.EuiTableRowCell,null,_this3.highlightIndexName(index.name,queryWithoutWildcard)),_react2.default.createElement(_eui.EuiTableRowCell,null,index.tags.map(function(tag){return _react2.default.createElement(_eui.EuiBadge,{key:"index_"+key+"_tag_"+tag.key,color:"primary"},tag.name)})))});return _react2.default.createElement("div",rest,_react2.default.createElement(_eui.EuiTable,null,_react2.default.createElement(_eui.EuiTableBody,null,rows)),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderPagination())}}]);return IndicesList}(_react.Component);IndicesList.propTypes={indices:_propTypes2.default.array.isRequired,query:_propTypes2.default.string.isRequired}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2006)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1820);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=exports.HeaderComponent=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var HeaderComponent=function HeaderComponent(_ref){var isInputInvalid=_ref.isInputInvalid,errors=_ref.errors,characterList=_ref.characterList,query=_ref.query,onQueryChanged=_ref.onQueryChanged,goToNextStep=_ref.goToNextStep,isNextStepDisabled=_ref.isNextStepDisabled,intl=_ref.intl,rest=_objectWithoutProperties(_ref,["isInputInvalid","errors","characterList","query","onQueryChanged","goToNextStep","isNextStepDisabled","intl"]);return _react2.default.createElement("div",rest,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepHeader",defaultMessage:"Step 1 of 2: Define index pattern"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiForm,{isInvalid:isInputInvalid},_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPatternLabel",defaultMessage:"Index pattern"}),isInvalid:isInputInvalid,error:errors,helpText:_react2.default.createElement("div",null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.allowLabel",defaultMessage:"You can use a {asterisk} as a wildcard in your index pattern.",values:{asterisk:_react2.default.createElement("strong",null,"*")}})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.disallowLabel",defaultMessage:"You can't use spaces or the characters {characterList}.",values:{characterList:_react2.default.createElement("strong",null,characterList)}})))},_react2.default.createElement(_eui.EuiFieldText,{name:"indexPattern",placeholder:intl.formatMessage({id:"kbn.management.createIndexPattern.step.indexPatternPlaceholder",defaultMessage:"index-name-*"}),value:query,isInvalid:isInputInvalid,onChange:onQueryChanged,"data-test-subj":"createIndexPatternNameInput"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{iconType:"arrowRight",onClick:function onClick(){return goToNextStep(query)},isDisabled:isNextStepDisabled,"data-test-subj":"createIndexPatternGoToStep2Button"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.step.nextStepButton",defaultMessage:"Next step"})))))};exports.HeaderComponent=HeaderComponent;var Header=exports.Header=(0,_react3.injectI18n)(HeaderComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _step_time_field=__webpack_require__(1822);Object.defineProperty(exports,"StepTimeField",{enumerable:true,get:function get(){return _step_time_field.StepTimeField}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepTimeField=exports.StepTimeFieldComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lib=__webpack_require__(350);var _header=__webpack_require__(1823);var _time_field=__webpack_require__(1825);var _advanced_options=__webpack_require__(1828);var _action_buttons=__webpack_require__(1830);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var StepTimeFieldComponent=exports.StepTimeFieldComponent=function(_Component){_inherits(StepTimeFieldComponent,_Component);function StepTimeFieldComponent(props){var _this2=this;_classCallCheck(this,StepTimeFieldComponent);var _this=_possibleConstructorReturn(this,(StepTimeFieldComponent.__proto__||Object.getPrototypeOf(StepTimeFieldComponent)).call(this,props));_this.fetchTimeFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,indexPatternsService,indexPattern,getFetchForWildcardOptions,fields,timeFields;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPatternsService=_this$props.indexPatternsService,indexPattern=_this$props.indexPattern;getFetchForWildcardOptions=_this.props.indexPatternCreationType.getFetchForWildcardOptions;_this.setState({isFetchingTimeFields:true});_context.next=5;return(0,_lib.ensureMinimumTime)(indexPatternsService.fieldsFetcher.fetchForWildcard(indexPattern,getFetchForWildcardOptions()));case 5:fields=_context.sent;timeFields=(0,_lib.extractTimeFields)(fields);_this.setState({timeFields:timeFields,isFetchingTimeFields:false});case 8:case"end":return _context.stop()}}},_callee,_this2)}));_this.onTimeFieldChanged=function(e){var value=e.target.value;var timeField=_this.state.timeFields.find(function(timeField){return timeField.fieldName===value});var validSelection=value!=="";_this.setState({selectedTimeField:timeField?timeField.fieldName:undefined,timeFieldSet:validSelection})};_this.onChangeIndexPatternId=function(e){_this.setState({indexPatternId:e.target.value})};_this.toggleAdvancedOptions=function(){_this.setState(function(state){return{isAdvancedOptionsVisible:!state.isAdvancedOptionsVisible}})};_this.createIndexPattern=function(){var _this$state=_this.state,selectedTimeField=_this$state.selectedTimeField,indexPatternId=_this$state.indexPatternId;_this.setState({isCreating:true});_this.props.createIndexPattern(selectedTimeField,indexPatternId)};var _props$indexPatternCr=props.indexPatternCreationType,getIndexPatternType=_props$indexPatternCr.getIndexPatternType,getIndexPatternName=_props$indexPatternCr.getIndexPatternName;_this.state={timeFields:[],selectedTimeField:undefined,timeFieldSet:false,isAdvancedOptionsVisible:false,isFetchingTimeFields:false,isCreating:false,indexPatternId:"",indexPatternType:getIndexPatternType(),indexPatternName:getIndexPatternName()};return _this}_createClass(StepTimeFieldComponent,[{key:"componentWillMount",value:function componentWillMount(){this.fetchTimeFields()}},{key:"render",value:function render(){var _state=this.state,timeFields=_state.timeFields,selectedTimeField=_state.selectedTimeField,timeFieldSet=_state.timeFieldSet,isAdvancedOptionsVisible=_state.isAdvancedOptionsVisible,indexPatternId=_state.indexPatternId,isCreating=_state.isCreating,isFetchingTimeFields=_state.isFetchingTimeFields,indexPatternName=_state.indexPatternName;if(isCreating){return _react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLoadingSpinner,null)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.creatingLabel",defaultMessage:"Creating index pattern…"})))))}var _props=this.props,indexPattern=_props.indexPattern,goToPreviousStep=_props.goToPreviousStep;var timeFieldOptions=timeFields?[{text:"",value:""}].concat(_toConsumableArray(timeFields.map(function(timeField){return{text:timeField.display,value:timeField.fieldName,disabled:timeFields.isDisabled}}))):[];var showTimeField=!timeFields||timeFields.length>1;var submittable=!showTimeField||timeFieldSet;return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react2.default.createElement(_header.Header,{indexPattern:indexPattern,indexPatternName:indexPatternName}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_time_field.TimeField,{isVisible:showTimeField,fetchTimeFields:this.fetchTimeFields,timeFieldOptions:timeFieldOptions,isLoading:isFetchingTimeFields,selectedTimeField:selectedTimeField,onTimeFieldChanged:this.onTimeFieldChanged}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_advanced_options.AdvancedOptions,{isVisible:isAdvancedOptionsVisible,indexPatternId:indexPatternId,toggleAdvancedOptions:this.toggleAdvancedOptions,onChangeIndexPatternId:this.onChangeIndexPatternId}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_action_buttons.ActionButtons,{goToPreviousStep:goToPreviousStep,submittable:submittable,createIndexPattern:this.createIndexPattern}))}}]);return StepTimeFieldComponent}(_react.Component);StepTimeFieldComponent.propTypes={indexPattern:_propTypes2.default.string.isRequired,indexPatternsService:_propTypes2.default.object.isRequired,goToPreviousStep:_propTypes2.default.func.isRequired,createIndexPattern:_propTypes2.default.func.isRequired,indexPatternCreationType:_propTypes2.default.object.isRequired};var StepTimeField=exports.StepTimeField=(0,_react3.injectI18n)(StepTimeFieldComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1824);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=exports.Header=function Header(_ref){var indexPattern=_ref.indexPattern,indexPatternName=_ref.indexPatternName;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h2",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeHeader",defaultMessage:"Step 2 of 2: Configure settings"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiText,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeLabel",defaultMessage:"You've defined {indexPattern} as your {indexPatternName}. Now you can specify some settings before we create it.",values:{indexPattern:_react2.default.createElement("strong",null,indexPattern),indexPatternName:indexPatternName}})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _time_field=__webpack_require__(1826);Object.defineProperty(exports,"TimeField",{enumerable:true,get:function get(){return _time_field.TimeField}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeField=exports.TimeFieldComponent=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);__webpack_require__(1827);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimeFieldComponent=exports.TimeFieldComponent=function TimeFieldComponent(_ref){var isVisible=_ref.isVisible,fetchTimeFields=_ref.fetchTimeFields,timeFieldOptions=_ref.timeFieldOptions,isLoading=_ref.isLoading,selectedTimeField=_ref.selectedTimeField,onTimeFieldChanged=_ref.onTimeFieldChanged,intl=_ref.intl;return _react2.default.createElement(_eui.EuiForm,null,isVisible?_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("span",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldHeader",defaultMessage:"Time Filter field name"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},isLoading?_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"s"}):_react2.default.createElement(_eui.EuiLink,{className:"timeFieldRefreshButton",onClick:fetchTimeFields},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.refreshButton",defaultMessage:"Refresh"})))),helpText:_react2.default.createElement("div",null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldLabel",defaultMessage:"The Time Filter will use this field to filter your data by time."})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldWarningLabel",defaultMessage:"You can choose not to have a time field, but you will not be able to narrow down your data by a time range."})))},isLoading?_react2.default.createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:[{text:intl.formatMessage({id:"kbn.management.createIndexPattern.stepTime.field.loadingDropDown",defaultMessage:"Loading…"}),value:""}],disabled:true}):_react2.default.createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:timeFieldOptions,isLoading:isLoading,disabled:isLoading,value:selectedTimeField,onChange:onTimeFieldChanged})):_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.field.noTimeFieldsLabel",defaultMessage:"The indices which match this index pattern don't contain any time fields."}))))};var TimeField=exports.TimeField=(0,_react3.injectI18n)(TimeFieldComponent)},function(module,exports,__webpack_require__){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _advanced_options=__webpack_require__(1829);Object.defineProperty(exports,"AdvancedOptions",{enumerable:true,get:function get(){return _advanced_options.AdvancedOptions}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedOptions=exports.AdvancedOptionsComponent=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedOptionsComponent=exports.AdvancedOptionsComponent=function AdvancedOptionsComponent(_ref){var isVisible=_ref.isVisible,indexPatternId=_ref.indexPatternId,toggleAdvancedOptions=_ref.toggleAdvancedOptions,onChangeIndexPatternId=_ref.onChangeIndexPatternId,intl=_ref.intl;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiButtonEmpty,{iconType:isVisible?"arrowDown":"arrowRight",onClick:toggleAdvancedOptions},isVisible?_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.hideButton",defaultMessage:"Hide advanced options"}):_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.showButton",defaultMessage:"Show advanced options"})),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),isVisible?_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternHeader",defaultMessage:"Custom index pattern ID"}),helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternLabel",defaultMessage:"Kibana will provide a unique identifier for each index pattern. If you do not want to use this unique ID, enter a custom one."})},_react2.default.createElement(_eui.EuiFieldText,{name:"indexPatternId","data-test-subj":"createIndexPatternIdInput",value:indexPatternId,onChange:onChangeIndexPatternId,placeholder:intl.formatMessage({id:"kbn.management.createIndexPattern.stepTime.options.patternPlaceholder",defaultMessage:"custom-index-pattern-id"})}))):null)};var AdvancedOptions=exports.AdvancedOptions=(0,_react3.injectI18n)(AdvancedOptionsComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _action_buttons=__webpack_require__(1831);Object.defineProperty(exports,"ActionButtons",{enumerable:true,get:function get(){return _action_buttons.ActionButtons}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionButtons=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActionButtons=exports.ActionButtons=function ActionButtons(_ref){var goToPreviousStep=_ref.goToPreviousStep,submittable=_ref.submittable,createIndexPattern=_ref.createIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowLeft",onClick:goToPreviousStep},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.backButton",defaultMessage:"Back"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{isDisabled:!submittable,"data-test-subj":"createIndexPatternCreateButton",fill:true,onClick:createIndexPattern},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.createPatternButton",defaultMessage:"Create index pattern"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1833);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HeaderUi=function HeaderUi(_ref){var prompt=_ref.prompt,indexPatternName=_ref.indexPatternName,showSystemIndices=_ref.showSystemIndices,isIncludingSystemIndices=_ref.isIncludingSystemIndices,onChangeIncludingSystemIndices=_ref.onChangeIncludingSystemIndices,isBeta=_ref.isBeta,intl=_ref.intl;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h1",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPatternHeader",defaultMessage:"Create {indexPatternName}",values:{indexPatternName:indexPatternName}}),isBeta?_react2.default.createElement(_react.Fragment,null," ",_react2.default.createElement(_eui.EuiBetaBadge,{label:intl.formatMessage({id:"kbn.management.createIndexPattern.betaLabel",defaultMessage:"Beta"})})):null)),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPatternLabel",defaultMessage:"Kibana uses index patterns to retrieve data from Elasticsearch indices for things like visualizations."}))))),showSystemIndices?_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiSwitch,{label:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.includeSystemIndicesToggleSwitchLabel",defaultMessage:"Include system indices"}),id:"checkboxShowSystemIndices",checked:isIncludingSystemIndices,onChange:onChangeIncludingSystemIndices})):null),prompt?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),prompt):null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))};var Header=exports.Header=(0,_react3.injectI18n)(HeaderUi)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _loading_state=__webpack_require__(1835);Object.defineProperty(exports,"LoadingState",{enumerable:true,get:function get(){return _loading_state.LoadingState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingState=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoadingState=exports.LoadingState=function LoadingState(){return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",direction:"column",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h2",{style:{textAlign:"center"}},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.loadingState.checkingLabel",defaultMessage:"Checking for Elasticsearch data"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _empty_state=__webpack_require__(1837);Object.defineProperty(exports,"EmptyState",{enumerable:true,get:function get(){return _empty_state.EmptyState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyState=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyState=exports.EmptyState=function EmptyState(_ref){var onRefresh=_ref.onRefresh;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{color:"warning",title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateHeader",defaultMessage:"Couldn't find any Elasticsearch data"})},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.emptyStateDetail",defaultMessage:"{needToIndex} {learnHowLink} or {getStartedLink}",values:{needToIndex:_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.needToIndexLabel",defaultMessage:"You'll need to index some data into Elasticsearch before you can create an index pattern."})),learnHowLink:_react2.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.learnHowLink",defaultMessage:"Learn how"})),getStartedLink:_react2.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.getStartedLink",defaultMessage:"get started with some sample data sets."}))}})),_react2.default.createElement(_eui.EuiButton,{iconType:"refresh",onClick:onRefresh,"data-test-subj":"refreshIndicesButton",color:"warning"},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyState.checkDataButton",defaultMessage:"Check for new data"}))))};EmptyState.propTypes={onRefresh:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1839)},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);__webpack_require__(1840);__webpack_require__(1843);var _url=__webpack_require__(76);var _edit_sections=__webpack_require__(1861);var _notify=__webpack_require__(10);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _edit_index_pattern=__webpack_require__(1862);var _edit_index_pattern2=_interopRequireDefault(_edit_index_pattern);var _field_wildcard=__webpack_require__(497);var _index_pattern_list=__webpack_require__(589);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _source_filters_table=__webpack_require__(1863);var _indexed_fields_table=__webpack_require__(1871);var _scripted_fields_table=__webpack_require__(1877);var _i18n=__webpack_require__(8);var _chrome=__webpack_require__(7);var _chrome2=_interopRequireDefault(_chrome);var _i18n2=__webpack_require__(14);var _breadcrumbs=__webpack_require__(349);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var REACT_SOURCE_FILTERS_DOM_ELEMENT_ID="reactSourceFiltersTable";var REACT_INDEXED_FIELDS_DOM_ELEMENT_ID="reactIndexedFieldsTable";var REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID="reactScriptedFieldsTable";function updateSourceFiltersTable($scope,$state){if($state.tab==="sourceFilters"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n2.I18nContext,null,_react2.default.createElement(_source_filters_table.SourceFiltersTable,{indexPattern:$scope.indexPattern,filterFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,onAddOrRemoveFilter:function onAddOrRemoveFilter(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.indexPatternListProvider);$scope.refreshFilters();$scope.$apply()}})),node)})}else{destroySourceFiltersTable()}}function destroySourceFiltersTable(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateScriptedFieldsTable($scope,$state){if($state.tab==="scriptedFields"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n2.I18nContext,null,_react2.default.createElement(_scripted_fields_table.ScriptedFieldsTable,{indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,scriptedFieldLanguageFilter:$scope.scriptedFieldLanguageFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getRouteHref:function getRouteHref(obj,route){return $scope.kbnUrl.getRouteHref(obj,route)}},onRemoveField:function onRemoveField(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.indexPatternListProvider);$scope.refreshFilters()}})),node)})}else{destroyScriptedFieldsTable()}}function destroyScriptedFieldsTable(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateIndexedFieldsTable($scope,$state){if($state.tab==="indexedFields"){$scope.$$postDigest(function(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n2.I18nContext,null,_react2.default.createElement(_indexed_fields_table.IndexedFieldsTable,{fields:$scope.fields,indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,indexedFieldTypeFilter:$scope.indexedFieldTypeFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getFieldInfo:$scope.getFieldInfo}})),node)})}else{destroyIndexedFieldsTable()}}function destroyIndexedFieldsTable(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes2.default.when("/management/kibana/indices/:indexPatternId",{template:_edit_index_pattern2.default,k7Breadcrumbs:_breadcrumbs.getEditBreadcrumbs,resolve:{indexPattern:function indexPattern($route,redirectWhenMissing,indexPatterns){return indexPatterns.get($route.current.params.indexPatternId).catch(redirectWhenMissing("/management/kibana/index"))}}});_routes2.default.when("/management/kibana/indices",{redirectTo:function redirectTo(){var defaultIndex=_chrome2.default.getUiSettingsClient().get("defaultIndex");if(defaultIndex){return"/management/kibana/indices/"+defaultIndex}return"/management/kibana/index"}});_modules.uiModules.get("apps/management").controller("managementIndicesEdit",function($scope,$location,$route,config,indexPatterns,Private,AppState,docTitle,confirmModal){var $state=$scope.state=new AppState;var _Private=Private(_field_wildcard.FieldWildcardProvider),fieldWildcardMatcher=_Private.fieldWildcardMatcher;var indexPatternListProvider=Private(_index_pattern_list.IndexPatternListFactory)();$scope.fieldWildcardMatcher=fieldWildcardMatcher;$scope.editSectionsProvider=Private(_edit_sections.IndicesEditSectionsProvider);$scope.kbnUrl=Private(_url.KbnUrlProvider);$scope.indexPattern=$route.current.locals.indexPattern;$scope.indexPatternListProvider=indexPatternListProvider;$scope.indexPattern.tags=indexPatternListProvider.getIndexPatternTags($scope.indexPattern);$scope.getFieldInfo=indexPatternListProvider.getFieldInfo;docTitle.change($scope.indexPattern.title);var otherPatterns=_lodash2.default.filter($route.current.locals.indexPatterns,function(pattern){return pattern.id!==$scope.indexPattern.id});$scope.$watch("indexPattern.fields",function(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,indexPatternListProvider);$scope.refreshFilters();$scope.fields=$scope.indexPattern.getNonScriptedFields();updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state)});$scope.refreshFilters=function(){var indexedFieldTypes=[];var scriptedFieldLanguages=[];$scope.indexPattern.fields.forEach(function(field){if(field.scripted){scriptedFieldLanguages.push(field.lang)}else{indexedFieldTypes.push(field.type)}});$scope.indexedFieldTypes=_lodash2.default.unique(indexedFieldTypes);$scope.scriptedFieldLanguages=_lodash2.default.unique(scriptedFieldLanguages)};$scope.changeFilter=function(filter,val){$scope[filter]=val||""};$scope.changeTab=function(obj){$state.tab=obj.index;updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state);$state.save()};$scope.$watch("state.tab",function(tab){if(!tab)$scope.changeTab($scope.editSections[0])});$scope.$watchCollection("indexPattern.fields",function(){$scope.conflictFields=$scope.indexPattern.fields.filter(function(field){return field.type==="conflict"})});$scope.refreshFields=function(){var _this=this;var confirmMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.refreshLabel",{defaultMessage:"This action resets the popularity counter of each field."});var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshButton",{defaultMessage:"Refresh"}),onConfirm:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return $scope.indexPattern.init(true);case 2:$scope.fields=$scope.indexPattern.getNonScriptedFields();case 3:case"end":return _context.stop()}}},_callee,_this)}));function onConfirm(){return _ref.apply(this,arguments)}return onConfirm}(),title:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshHeader",{defaultMessage:"Refresh field list?"})};confirmModal(confirmMessage,confirmModalOptions)};$scope.removePattern=function(){function doRemove(){if($scope.indexPattern.id===config.get("defaultIndex")){config.remove("defaultIndex");if(otherPatterns.length){config.set("defaultIndex",otherPatterns[0].id)}}indexPatterns.delete($scope.indexPattern).then(function(){$location.url("/management/kibana/index")}).catch(_notify.fatalError)}var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteButton",{defaultMessage:"Delete"}),onConfirm:doRemove,title:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteHeader",{defaultMessage:"Delete index pattern?"})};confirmModal("",confirmModalOptions)};$scope.setDefaultPattern=function(){config.set("defaultIndex",$scope.indexPattern.id)};$scope.setIndexPatternsTimeField=function(field){if(field.type!=="date"){var errorMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.notDateErrorMessage",{defaultMessage:"That field is a {fieldType} not a date.",values:{fieldType:field.type}});_notify.toastNotifications.addDanger(errorMessage);return}$scope.indexPattern.timeFieldName=field.name;return $scope.indexPattern.save()};$scope.$watch("fieldFilter",function(){if($scope.fieldFilter===undefined){return}switch($state.tab){case"indexedFields":updateIndexedFieldsTable($scope,$state);case"scriptedFields":updateScriptedFieldsTable($scope,$state);case"sourceFilters":updateSourceFiltersTable($scope,$state)}});$scope.$watch("indexedFieldTypeFilter",function(){if($scope.indexedFieldTypeFilter!==undefined&&$state.tab==="indexedFields"){updateIndexedFieldsTable($scope,$state)}});$scope.$watch("scriptedFieldLanguageFilter",function(){if($scope.scriptedFieldLanguageFilter!==undefined&&$state.tab==="scriptedFields"){updateScriptedFieldsTable($scope,$state)}});$scope.$on("$destroy",function(){destroyIndexedFieldsTable();destroyScriptedFieldsTable()});updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state)})},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1841)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _index_header=__webpack_require__(1842);var _index_header2=_interopRequireDefault(_index_header);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/management").directive("kbnManagementIndexHeader",function(config){return{restrict:"E",template:_index_header2.default,replace:true,scope:{indexPattern:"=",setDefault:"&",refreshFields:"&",delete:"&"},link:function link($scope,$el,attrs){$scope.delete=attrs.delete?$scope.delete:null;$scope.setDefault=attrs.setDefault?$scope.setDefault:null;$scope.refreshFields=attrs.refreshFields?$scope.refreshFields:null;config.bindToScope($scope,"defaultIndex")}}})},function(module,exports){module.exports='<div class="kuiBar kuiVerticalRhythm">\n  <div class="kuiBarSection">\n    \x3c!-- Index pattern name --\x3e\n    <h1\n      class="euiTitle euiTitle--medium"\n      data-test-subj="indexPatternTitle"\n    >\n      <span\n        aria-hidden="true"\n        ng-if="defaultIndex === indexPattern.id"\n        class="kuiIcon fa-star"\n      ></span>\n      {{indexPattern.title}}\n    </h1>\n  </div>\n\n  <div class="kuiBarSection">\n    <button\n      ng-if="setDefault"\n      ng-click="setDefault()"\n      aria-label="{{::\'kbn.management.editIndexPattern.setDefaultAria\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.setDefaultTooltip\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      class="kuiButton kuiButton--basic"\n      data-test-subj="setDefaultIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-star"\n      ></span>\n    </button>\n\n    <button\n      ng-if="refreshFields"\n      ng-click="refreshFields()"\n      aria-label="{{::\'kbn.management.editIndexPattern.refreshAria\' | i18n: { defaultMessage: \'Reload field list\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.refreshTooltip\' | i18n: { defaultMessage: \'Refresh field list\' } }}"\n      class="kuiButton kuiButton--basic"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-refresh"\n      ></span>\n    </button>\n\n    <button\n      ng-if="delete"\n      ng-click="delete()"\n      aria-label="{{::\'kbn.management.editIndexPattern.removeAria\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.removeTooltip\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      class="kuiButton kuiButton--danger"\n      data-test-subj="deleteIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-trash"\n      ></span>\n    </button>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1844)},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _field=__webpack_require__(501);var _field_format_editors=__webpack_require__(513);var _url=__webpack_require__(76);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _notify=__webpack_require__(10);var _create_edit_field=__webpack_require__(1845);var _create_edit_field2=_interopRequireDefault(_create_edit_field);var _breadcrumbs=__webpack_require__(349);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(26);var _field_editor=__webpack_require__(593);var _i18n=__webpack_require__(14);var _i18n2=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_FIELD_EDITOR_ID="reactFieldEditor";var renderFieldEditor=function renderFieldEditor($scope,indexPattern,field,_ref){var Field=_ref.Field,getConfig=_ref.getConfig,$http=_ref.$http,fieldFormatEditors=_ref.fieldFormatEditors,redirectAway=_ref.redirectAway;$scope.$$postDigest(function(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n.I18nContext,null,_react2.default.createElement(_field_editor.FieldEditor,{indexPattern:indexPattern,field:field,helpers:{Field:Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:redirectAway}})),node)})};var destroyFieldEditor=function destroyFieldEditor(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};_routes2.default.when("/management/kibana/indices/:indexPatternId/field/:fieldName*",{mode:"edit",k7Breadcrumbs:_breadcrumbs.getEditFieldBreadcrumbs}).when("/management/kibana/indices/:indexPatternId/create-field/",{mode:"create",k7Breadcrumbs:_breadcrumbs.getCreateFieldBreadcrumbs}).defaults(/management\/kibana\/indices\/[^\/]+\/(field|create-field)(\/|$)/,{template:_create_edit_field2.default,mapBreadcrumbs:function mapBreadcrumbs($route,breadcrumbs){var indexPattern=$route.current.locals.indexPattern;return breadcrumbs.map(function(crumb){if(crumb.id!==indexPattern.id){return crumb}return _extends({},crumb,{display:indexPattern.title})})},resolve:{indexPattern:function indexPattern($route,redirectWhenMissing,indexPatterns){return indexPatterns.get($route.current.params.indexPatternId).catch(redirectWhenMissing("/management/kibana/indices"))}},controllerAs:"fieldSettings",controller:function FieldEditorPageController($scope,$route,$timeout,$http,Private,docTitle,config){var _this=this;var getConfig=function getConfig(){return config.get.apply(config,arguments)};var fieldFormatEditors=Private(_field_format_editors.RegistryFieldFormatEditorsProvider);var kbnUrl=Private(_url.KbnUrlProvider);this.mode=$route.current.mode;this.indexPattern=$route.current.locals.indexPattern;if(this.mode==="edit"){var _fieldName=$route.current.params.fieldName;this.field=this.indexPattern.fields.byName[_fieldName];if(!this.field){var message=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.noFieldLabel",{defaultMessage:"'{indexPatternTitle}' index pattern doesn't have a scripted field called '{fieldName}'",values:{indexPatternTitle:this.indexPattern.title,fieldName:_fieldName}});_notify.toastNotifications.add(message);kbnUrl.redirectToRoute(this.indexPattern,"edit");return}}else if(this.mode==="create"){this.field=new _field.Field(this.indexPattern,{scripted:true,type:"number"})}else{var errorMessage=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.unknownModeErrorMessage",{defaultMessage:"unknown fieldSettings mode {mode}",values:{mode:this.mode}});throw new Error(errorMessage)}var fieldName=this.field.name||_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.newFieldPlaceholder",{defaultMessage:"New Scripted Field"});docTitle.change([fieldName,this.indexPattern.title]);renderFieldEditor($scope,this.indexPattern,this.field,{Field:_field.Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:function redirectAway(){$timeout(function(){kbnUrl.changeToRoute(_this.indexPattern,_this.field.scripted?"scriptedFields":"indexedFields")})}});$scope.$on("$destroy",function(){destroyFieldEditor()})}})},function(module,exports){module.exports='<kbn-management-app section="kibana/indices">\n  <kbn-management-indices>\n    <div class="kuiViewContent">\n      <kbn-management-index-header\n        index-pattern="fieldSettings.indexPattern"\n      ></kbn-management-index-header>\n    </div>\n\n    <div id="reactFieldEditor"></div>\n\n  </kbn-management-indices>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldEditor=exports.FieldEditorComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(0);var _scripting_languages=__webpack_require__(594);var _field_formats=__webpack_require__(35);var _documentation_links=__webpack_require__(50);var _notify=__webpack_require__(10);var _eui=__webpack_require__(2);var _scripting_call_outs=__webpack_require__(1847);var _scripting_help=__webpack_require__(1850);var _field_format_editor=__webpack_require__(1854);var _constants=__webpack_require__(1856);var _lib=__webpack_require__(1857);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FieldEditorComponent=exports.FieldEditorComponent=function(_PureComponent){_inherits(FieldEditorComponent,_PureComponent);function FieldEditorComponent(props){_classCallCheck(this,FieldEditorComponent);var _this=_possibleConstructorReturn(this,(FieldEditorComponent.__proto__||Object.getPrototypeOf(FieldEditorComponent)).call(this,props));_initialiseProps.call(_this);var field=props.field,indexPattern=props.indexPattern,Field=props.helpers.Field;_this.state={isReady:false,isCreating:false,isDeprecatedLang:false,scriptingLangs:[],fieldTypes:[],fieldTypeFormats:[],existingFieldNames:indexPattern.fields.map(function(f){return f.name}),field:(0,_lib.copyField)(field,indexPattern,Field),fieldFormatId:undefined,fieldFormatParams:{},showScriptingHelp:false,showDeleteModal:false,hasFormatError:false,hasScriptError:false,isSaving:false};_this.supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_this.deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();_this.init();return _this}_createClass(FieldEditorComponent,[{key:"init",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var $http,field,indexPattern,getEnabledScriptingLanguages,enabledLangs,scriptingLangs,fieldTypes,DefaultFieldFormat,fieldTypeFormats;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:$http=this.props.helpers.$http;field=this.state.field;indexPattern=this.props.indexPattern;getEnabledScriptingLanguages=new _scripting_languages.GetEnabledScriptingLanguagesProvider($http);_context.next=6;return getEnabledScriptingLanguages();case 6:enabledLangs=_context.sent;scriptingLangs=(0,_lodash.intersection)(enabledLangs,(0,_lodash.union)(this.supportedLangs,this.deprecatedLangs));field.lang=scriptingLangs.includes(field.lang)?field.lang:undefined;fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,field.lang,_constants.DEFAULT_FIELD_TYPES);field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];DefaultFieldFormat=_field_formats.fieldFormats.getDefaultType(field.type);fieldTypeFormats=[(0,_lib.getDefaultFormat)(DefaultFieldFormat)].concat(_toConsumableArray(_field_formats.fieldFormats.byFieldType[field.type]));this.setState({isReady:true,isCreating:!indexPattern.fields.byName[field.name],isDeprecatedLang:this.deprecatedLangs.includes(field.lang),errors:[],scriptingLangs:scriptingLangs,fieldTypes:fieldTypes,fieldTypeFormats:fieldTypeFormats,fieldFormatId:(0,_lodash.get)(indexPattern,["fieldFormatMap",field.name,"type","id"]),fieldFormatParams:field.format.params()});case 14:case"end":return _context.stop()}}},_callee,this)}));function init(){return _ref.apply(this,arguments)}return init}()},{key:"isDuplicateName",value:function isDuplicateName(){var _state=this.state,isCreating=_state.isCreating,field=_state.field,existingFieldNames=_state.existingFieldNames;return isCreating&&existingFieldNames.includes(field.name)}},{key:"renderName",value:function renderName(){var _this2=this;var _state2=this.state,isCreating=_state2.isCreating,field=_state2.field;var intl=this.props.intl;var isInvalid=!field.name||!field.name.trim();return isCreating?_react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.nameLabel",defaultMessage:"Name"}),helpText:this.isDuplicateName()?_react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"})," ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictDetail",defaultMessage:"{mappingConflict} You already have a field with the name {fieldName}. Naming your scripted field with the same name means you won't be able to query both fields at the same time.",values:{mappingConflict:_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictLabel",defaultMessage:"Mapping Conflict:"})),fieldName:_react2.default.createElement(_eui.EuiCode,null,field.name)}})):null,isInvalid:isInvalid,error:isInvalid?intl.formatMessage({id:"common.ui.fieldEditor.nameErrorMessage",defaultMessage:"Name is required"}):null},_react2.default.createElement(_eui.EuiFieldText,{value:field.name||"",placeholder:intl.formatMessage({id:"common.ui.fieldEditor.namePlaceholder",defaultMessage:"New scripted field"}),"data-test-subj":"editorFieldName",onChange:function onChange(e){_this2.onFieldChange("name",e.target.value)},isInvalid:isInvalid})):null}},{key:"renderLanguage",value:function renderLanguage(){var _this3=this;var _state3=this.state,field=_state3.field,scriptingLangs=_state3.scriptingLangs,isDeprecatedLang=_state3.isDeprecatedLang;var intl=this.props.intl;return field.scripted?_react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.languageLabel",defaultMessage:"Language"}),helpText:isDeprecatedLang?_react2.default.createElement("span",null,_react2.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"})," ",_react2.default.createElement("strong",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningHeader",defaultMessage:"Deprecation Warning:"}))," ",_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.warningDetail",defaultMessage:"{language} is deprecated and support will be removed in the next major version of Kibana and Elasticsearch. We recommend using {painlessLink} for new scripted fields.",values:{language:_react2.default.createElement(_eui.EuiCode,null,field.lang),painlessLink:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.painlessLinkLabel",defaultMessage:"Painless"}))}})):null},_react2.default.createElement(_eui.EuiSelect,{value:field.lang,options:scriptingLangs.map(function(lang){return{value:lang,text:lang}}),"data-test-subj":"editorFieldLang",onChange:function onChange(e){_this3.onLangChange(e.target.value)}})):null}},{key:"renderType",value:function renderType(){var _this4=this;var _state4=this.state,field=_state4.field,fieldTypes=_state4.fieldTypes;var intl=this.props.intl;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.typeLabel",defaultMessage:"Type"})},_react2.default.createElement(_eui.EuiSelect,{value:field.type,disabled:!field.scripted,options:fieldTypes.map(function(type){return{value:type,text:type}}),"data-test-subj":"editorFieldType",onChange:function onChange(e){_this4.onTypeChange(e.target.value)}}))}},{key:"renderFormat",value:function renderFormat(){var _this5=this;var _state5=this.state,field=_state5.field,fieldTypeFormats=_state5.fieldTypeFormats,fieldFormatId=_state5.fieldFormatId,fieldFormatParams=_state5.fieldFormatParams;var fieldFormatEditors=this.props.helpers.fieldFormatEditors;var defaultFormat=fieldTypeFormats[0]&&fieldTypeFormats[0].resolvedTitle;var label=defaultFormat?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:_react2.default.createElement(_eui.EuiCode,null,defaultFormat)}}):_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.formatHeader",defaultMessage:"Format"});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:label,helpText:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.formatLabel",defaultMessage:"Formatting allows you to control the way that specific values are displayed. It can also cause values to be completely changed and prevent highlighting in Discover from working."})},_react2.default.createElement(_eui.EuiSelect,{value:fieldFormatId,options:fieldTypeFormats.map(function(format){return{value:format.id||"",text:format.title}}),"data-test-subj":"editorSelectedFormatId",onChange:function onChange(e){_this5.onFormatChange(e.target.value)}})),fieldFormatId?_react2.default.createElement(_field_format_editor.FieldFormatEditor,{fieldType:field.type,fieldFormat:field.format,fieldFormatId:fieldFormatId,fieldFormatParams:fieldFormatParams,fieldFormatEditors:fieldFormatEditors,onChange:this.onFormatParamsChange,onError:this.onFormatParamsError}):null)}},{key:"renderPopularity",value:function renderPopularity(){var _this6=this;var field=this.state.field;var intl=this.props.intl;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.popularityLabel",defaultMessage:"Popularity"})},_react2.default.createElement(_eui.EuiFieldNumber,{value:field.count,"data-test-subj":"editorFieldCount",onChange:function onChange(e){_this6.onFieldChange("count",e.target.value?Number(e.target.value):"")}}))}},{key:"renderScript",value:function renderScript(){var _state6=this.state,field=_state6.field,hasScriptError=_state6.hasScriptError;var intl=this.props.intl;var isInvalid=!field.script||!field.script.trim()||hasScriptError;var errorMsg=hasScriptError?_react2.default.createElement("span",{"data-test-subj":"invalidScriptError"},intl.formatMessage({id:"common.ui.fieldEditor.scriptInvalidErrorMessage",defaultMessage:"Script is invalid. View script preview for details"})):intl.formatMessage({id:"common.ui.fieldEditor.scriptRequiredErrorMessage",defaultMessage:"Script is required"});return field.scripted?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"common.ui.fieldEditor.scriptLabel",defaultMessage:"Script"}),isInvalid:isInvalid,error:isInvalid?errorMsg:null},_react2.default.createElement(_eui.EuiTextArea,{value:field.script,"data-test-subj":"editorFieldScript",onChange:this.onScriptChange,isInvalid:isInvalid})),_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.script.accessWithLabel",defaultMessage:"Access fields with {code}.",values:{code:_react2.default.createElement("code",null,"doc['some_field'].value")}})),_react2.default.createElement("br",null),_react2.default.createElement(_eui.EuiLink,{onClick:this.showScriptingHelp,"data-test-subj":"scriptedFieldsHelpLink"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.script.getHelpLabel",defaultMessage:"Get help with the syntax and preview the results of your script."}))))):null}},{key:"renderActions",value:function renderActions(){var _state7=this.state,isCreating=_state7.isCreating,field=_state7.field,isSaving=_state7.isSaving;var redirectAway=this.props.helpers.redirectAway;return _react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.saveField,isDisabled:this.isSavingDisabled(),isLoading:isSaving,"data-test-subj":"fieldSaveButton"},isCreating?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.actions.createButton",defaultMessage:"Create field"}):_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.actions.saveButton",defaultMessage:"Save field"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:redirectAway,"data-test-subj":"fieldCancelButton"},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.actions.cancelButton",defaultMessage:"Cancel"}))),!isCreating&&field.scripted?_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.showDeleteModal},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.actions.deleteButton",defaultMessage:"Delete"}))))):null))}},{key:"isSavingDisabled",value:function isSavingDisabled(){var _state8=this.state,field=_state8.field,hasFormatError=_state8.hasFormatError,hasScriptError=_state8.hasScriptError;if(hasFormatError||hasScriptError||!field.name||!field.name.trim()||field.scripted&&(!field.script||!field.script.trim())){return true}return false}},{key:"render",value:function render(){var _state9=this.state,isReady=_state9.isReady,isCreating=_state9.isCreating,field=_state9.field;return isReady?_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,isCreating?_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.createHeader",defaultMessage:"Create scripted field"}):_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.editHeader",defaultMessage:"Edit {fieldName}",values:{fieldName:field.name}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,this.renderScriptingPanels(),this.renderName(),this.renderLanguage(),this.renderType(),this.renderFormat(),this.renderPopularity(),this.renderScript(),this.renderActions(),this.renderDeleteModal()),_react2.default.createElement(_eui.EuiSpacer,{size:"l"})):null}}]);return FieldEditorComponent}(_react.PureComponent);FieldEditorComponent.propTypes={indexPattern:_propTypes2.default.object.isRequired,field:_propTypes2.default.object.isRequired,helpers:_propTypes2.default.shape({Field:_propTypes2.default.func.isRequired,getConfig:_propTypes2.default.func.isRequired,$http:_propTypes2.default.func.isRequired,fieldFormatEditors:_propTypes2.default.object.isRequired,redirectAway:_propTypes2.default.func.isRequired})};var _initialiseProps=function _initialiseProps(){var _this7=this;this.onFieldChange=function(fieldName,value){var field=_this7.state.field;field[fieldName]=value;_this7.forceUpdate()};this.onTypeChange=function(type){var getConfig=_this7.props.helpers.getConfig;var field=_this7.state.field;var DefaultFieldFormat=_field_formats.fieldFormats.getDefaultType(type);field.type=type;var fieldTypeFormats=[(0,_lib.getDefaultFormat)(DefaultFieldFormat)].concat(_toConsumableArray(_field_formats.fieldFormats.byFieldType[field.type]));var FieldFormat=fieldTypeFormats[0];field.format=new FieldFormat(null,getConfig);_this7.setState({fieldTypeFormats:fieldTypeFormats,fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})};this.onLangChange=function(lang){var field=_this7.state.field;var fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,lang,_constants.DEFAULT_FIELD_TYPES);field.lang=lang;field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];_this7.setState({fieldTypes:fieldTypes})};this.onFormatChange=function(formatId,params){var getConfig=_this7.props.helpers.getConfig;var _state10=_this7.state,field=_state10.field,fieldTypeFormats=_state10.fieldTypeFormats;var FieldFormat=fieldTypeFormats.find(function(format){return format.id===formatId})||fieldTypeFormats[0];field.format=new FieldFormat(params,getConfig);_this7.setState({fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})};this.onFormatParamsChange=function(newParams){var fieldFormatId=_this7.state.fieldFormatId;_this7.onFormatChange(fieldFormatId,newParams)};this.onFormatParamsError=function(error){_this7.setState({hasFormatError:!!error})};this.onScriptChange=function(e){_this7.setState({hasScriptError:false});_this7.onFieldChange("script",e.target.value)};this.showScriptingHelp=function(){_this7.setState({showScriptingHelp:true})};this.hideScriptingHelp=function(){_this7.setState({showScriptingHelp:false})};this.renderDeleteModal=function(){var field=_this7.state.field;var intl=_this7.props.intl;return _this7.state.showDeleteModal?_react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:intl.formatMessage({id:"common.ui.fieldEditor.deleteFieldHeader",defaultMessage:"Delete field '{fieldName}'"},{fieldName:field.name}),onCancel:_this7.hideDeleteModal,onConfirm:function onConfirm(){_this7.hideDeleteModal();_this7.deleteField()},cancelButtonText:intl.formatMessage({id:"common.ui.fieldEditor.deleteField.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:intl.formatMessage({id:"common.ui.fieldEditor.deleteField.deleteButton",defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.deleteFieldLabel",defaultMessage:"You can't recover a deleted field.{separator}Are you sure you want to do this?",values:{separator:_react2.default.createElement("span",null,_react2.default.createElement("br",null),_react2.default.createElement("br",null))}})))):null};this.showDeleteModal=function(){_this7.setState({showDeleteModal:true})};this.hideDeleteModal=function(){_this7.setState({showDeleteModal:false})};this.renderScriptingPanels=function(){var _state11=_this7.state,scriptingLangs=_state11.scriptingLangs,field=_state11.field,showScriptingHelp=_state11.showScriptingHelp;if(!field.scripted){return}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_scripting_call_outs.ScriptingDisabledCallOut,{isVisible:!scriptingLangs.length}),_react2.default.createElement(_scripting_call_outs.ScriptingWarningCallOut,{isVisible:true}),_react2.default.createElement(_scripting_help.ScriptingHelpFlyout,{isVisible:showScriptingHelp,onClose:_this7.hideScriptingHelp,indexPattern:_this7.props.indexPattern,lang:field.lang,name:field.name,script:field.script,executeScript:_lib.executeScript}))};this.deleteField=function(){var redirectAway=_this7.props.helpers.redirectAway;var _props=_this7.props,indexPattern=_props.indexPattern,intl=_props.intl;var field=_this7.state.field;var remove=indexPattern.removeScriptedField(field.name);if(remove){remove.then(function(){var message=intl.formatMessage({id:"common.ui.fieldEditor.deleteField.deletedHeader",defaultMessage:"Deleted '{fieldName}'"},{fieldName:field.name});_notify.toastNotifications.addSuccess(message);redirectAway()})}else{redirectAway()}};this.saveField=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var field,_props2,indexPattern,intl,fieldFormatId,isValid,redirectAway,index;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:field=_this7.state.field.toActualField();_props2=_this7.props,indexPattern=_props2.indexPattern,intl=_props2.intl;fieldFormatId=_this7.state.fieldFormatId;if(!field.scripted){_context2.next=11;break}_this7.setState({isSaving:true});_context2.next=7;return(0,_lib.isScriptValid)({name:field.name,lang:field.lang,script:field.script,indexPatternTitle:indexPattern.title});case 7:isValid=_context2.sent;if(isValid){_context2.next=11;break}_this7.setState({hasScriptError:true,isSaving:false});return _context2.abrupt("return");case 11:redirectAway=_this7.props.helpers.redirectAway;index=indexPattern.fields.findIndex(function(f){return f.name===field.name});if(index>-1){indexPattern.fields.splice(index,1,field)}else{indexPattern.fields.push(field)}if(!fieldFormatId){indexPattern.fieldFormatMap[field.name]={}}else{indexPattern.fieldFormatMap[field.name]=field.format}return _context2.abrupt("return",indexPattern.save().then(function(){var message=intl.formatMessage({id:"common.ui.fieldEditor.deleteField.savedHeader",defaultMessage:"Saved '{fieldName}'"},{fieldName:field.name});_notify.toastNotifications.addSuccess(message);redirectAway()}));case 16:case"end":return _context2.stop()}}},_callee2,_this7)}))};var FieldEditor=exports.FieldEditor=(0,_react3.injectI18n)(FieldEditorComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _disabled_call_out=__webpack_require__(1848);Object.defineProperty(exports,"ScriptingDisabledCallOut",{enumerable:true,get:function get(){return _disabled_call_out.ScriptingDisabledCallOut}});var _warning_call_out=__webpack_require__(1849);Object.defineProperty(exports,"ScriptingWarningCallOut",{enumerable:true,get:function get(){return _warning_call_out.ScriptingWarningCallOut}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingDisabledCallOut=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ScriptingDisabledCallOut=exports.ScriptingDisabledCallOut=function ScriptingDisabledCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===undefined?false:_ref$isVisible;return isVisible?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutHeader",defaultMessage:"Scripting disabled"}),color:"danger",iconType:"alert"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutLabel",defaultMessage:"All inline scripting has been disabled in Elasticsearch. You must enable inline scripting for at least one language in order to use scripted fields in Kibana."}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"})):null};ScriptingDisabledCallOut.displayName="ScriptingDisabledCallOut"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingWarningCallOut=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _documentation_links=__webpack_require__(50);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ScriptingWarningCallOut=exports.ScriptingWarningCallOut=function ScriptingWarningCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===undefined?false:_ref$isVisible;return isVisible?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutHeader",defaultMessage:"Proceed with caution"}),color:"warning",iconType:"alert"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.callOutDetail",defaultMessage:"Please familiarize yourself with {scripFields} and with {scriptsInAggregation} before using scripted fields.",values:{scripFields:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptFields")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scripFieldsLink",defaultMessage:"script fields"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"})),scriptsInAggregation:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptAggs")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scriptsInAggregationLink",defaultMessage:"scripts in aggregations"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOut.descriptionLabel",defaultMessage:"Scripted fields can be used to display and aggregate calculated values. As such, they can be very slow, and if done incorrectly, can cause Kibana to be unusable. There's no safety net here. If you make a typo, unexpected exceptions will be thrown all over the place!"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"})):null};ScriptingWarningCallOut.displayName="ScriptingWarningCallOut"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _help_flyout=__webpack_require__(1851);Object.defineProperty(exports,"ScriptingHelpFlyout",{enumerable:true,get:function get(){return _help_flyout.ScriptingHelpFlyout}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingHelpFlyout=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _scripting_syntax=__webpack_require__(1852);var _test_script=__webpack_require__(1853);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ScriptingHelpFlyout=exports.ScriptingHelpFlyout=function ScriptingHelpFlyout(_ref){var _ref2,_ref3;var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===undefined?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===undefined?function(){}:_ref$onClose,indexPattern=_ref.indexPattern,lang=_ref.lang,name=_ref.name,script=_ref.script,executeScript=_ref.executeScript;var tabs=[(_ref2={id:"syntax",name:"Syntax"},_defineProperty(_ref2,"data-test-subj","syntaxTab"),_defineProperty(_ref2,"content",_react2.default.createElement(_scripting_syntax.ScriptingSyntax,null)),_ref2),(_ref3={id:"test",name:"Preview results"},_defineProperty(_ref3,"data-test-subj","testTab"),_defineProperty(_ref3,"content",_react2.default.createElement(_test_script.TestScript,{indexPattern:indexPattern,lang:lang,name:name,script:script,executeScript:executeScript})),_ref3)];return isVisible?_react2.default.createElement(_eui.EuiFlyout,{onClose:onClose,"data-test-subj":"scriptedFieldsHelpFlyout"},_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0]}))):null};ScriptingHelpFlyout.displayName="ScriptingHelpFlyout";ScriptingHelpFlyout.propTypes={indexPattern:_propTypes2.default.object.isRequired,lang:_propTypes2.default.string.isRequired,name:_propTypes2.default.string,script:_propTypes2.default.string,executeScript:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingSyntax=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _documentation_links=__webpack_require__(50);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ScriptingSyntax=exports.ScriptingSyntax=function ScriptingSyntax(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntaxHeader",defaultMessage:"Syntax"})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.defaultDetail",defaultMessage:"By default, Kibana scripted fields use {painless}, a simple and secure scripting language designed specifically for use with Elasticsearch, to access values in the document use the following format:",values:{painless:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.painlessLink",defaultMessage:"Painless"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_eui.EuiCode,null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.default.formatLabel",defaultMessage:"doc['some_field'].value"}))),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.painlessDetail",defaultMessage:"Painless is powerful but easy to use. It provides access to many {javaAPIs}. Read up on its {syntax} and you'll be up to speed in no time!",values:{javaAPIs:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessApi")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.javaAPIsLink",defaultMessage:"native Java APIs"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"})),syntax:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessSyntax")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.syntaxLink",defaultMessage:"syntax"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.kibanaLabel",defaultMessage:"Kibana currently imposes one special limitation on the painless scripts you write. They cannot contain named functions."})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.commonDetail",defaultMessage:"Coming from an older version of Kibana? The {lucene} you know and love are still available. Lucene expressions are a lot like JavaScript, but limited to basic arithmetic, bitwise and comparison operations.",values:{lucene:_react2.default.createElement(_eui.EuiLink,{target:"_window",href:(0,_documentation_links.getDocLink)("scriptedFields.luceneExpressions")},_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.luceneLink",defaultMessage:"Lucene Expressions"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limitsLabel",defaultMessage:"There are a few limitations when using Lucene Expressions:"})),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.typesLabel",defaultMessage:"Only numeric, boolean, date, and geo_point fields may be accessed"})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.fieldsLabel",defaultMessage:"Stored fields are not available"})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.sparseLabel",defaultMessage:"If a field is sparse (only some documents contain a value), documents missing the field will have a value of 0"}))),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operationsLabel",defaultMessage:"Here are all the operations available to lucene expressions:"})),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.arithmeticLabel",defaultMessage:"Arithmetic operators: {operators}",values:{operators:_react2.default.createElement("code",null,"+ - * / %")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.bitwiseLabel",defaultMessage:"Bitwise operators: {operators}",values:{operators:_react2.default.createElement("code",null,"| & ^ ~ << >> >>>")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.booleanLabel",defaultMessage:"Boolean operators (including the ternary operator): {operators}",values:{operators:_react2.default.createElement("code",null,"&& || ! ?:")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.comparisonLabel",defaultMessage:"Comparison operators: {operators}",values:{operators:_react2.default.createElement("code",null,"< <= == >= >")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.mathLabel",defaultMessage:"Common mathematic functions: {operators}",values:{operators:_react2.default.createElement("code",null,"abs ceil exp floor ln log10 logn max min sqrt pow")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.trigLabel",defaultMessage:"Trigonometric library functions: {operators}",values:{operators:_react2.default.createElement("code",null,"acosh acos asinh asin atanh atan atan2 cosh cos sinh sin tanh tan")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.distanceLabel",defaultMessage:"Distance functions: {operators}",values:{operators:_react2.default.createElement("code",null,"haversin")}})),_react2.default.createElement("li",null,_react2.default.createElement(_react3.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.miscellaneousLabel",defaultMessage:"Miscellaneous functions: {operators}",values:{operators:_react2.default.createElement("code",null,"min, max")}})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TestScript=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TestScript=exports.TestScript=function(_Component){_inherits(TestScript,_Component);function TestScript(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,TestScript);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=TestScript.__proto__||Object.getPrototypeOf(TestScript)).call.apply(_ref,[this].concat(args))),_this),_this.state={isLoading:false,additionalFields:[]},_this.previewScript=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props,indexPattern,lang,name,script,executeScript,scriptResponse;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPattern=_this$props.indexPattern,lang=_this$props.lang,name=_this$props.name,script=_this$props.script,executeScript=_this$props.executeScript;if(!(!script||script.length===0)){_context.next=3;break}return _context.abrupt("return");case 3:_this.setState({isLoading:true});_context.next=6;return executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPattern.title,additionalFields:_this.state.additionalFields.map(function(option){return option.value})});case 6:scriptResponse=_context.sent;if(!(scriptResponse.status!==200)){_context.next=10;break}_this.setState({isLoading:false,previewData:scriptResponse});return _context.abrupt("return");case 10:_this.setState({isLoading:false,previewData:scriptResponse.hits.hits.map(function(hit){return _extends({_id:hit._id},hit._source,hit.fields)})});case 11:case"end":return _context.stop()}}},_callee,_this2)})),_this.onAdditionalFieldsChange=function(selectedOptions){_this.setState({additionalFields:selectedOptions})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(TestScript,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.script){this.previewScript()}}},{key:"renderPreview",value:function renderPreview(){var previewData=this.state.previewData;if(!previewData){return null}if(previewData.error){return _react2.default.createElement(_eui.EuiCallOut,{title:"There's an error in your script",color:"danger",iconType:"cross"},_react2.default.createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData.error,null," ")))}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("p",null,"First 10 results")),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData,null," ")))}},{key:"renderToolbar",value:function renderToolbar(){var fieldsByTypeMap=new Map;var fields=[];this.props.indexPattern.fields.filter(function(field){return!field.name.startsWith("_")}).forEach(function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else{fieldsByTypeMap.set(field.type,[field.name])}});fieldsByTypeMap.forEach(function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map(function(fieldName){return{value:fieldName,label:fieldName}})})});fields.sort(function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Additional fields"},_react2.default.createElement(_eui.EuiComboBox,{placeholder:"Select...",options:fields,selectedOptions:this.state.additionalFields,onChange:this.onAdditionalFieldsChange,"data-test-subj":"additionalFieldsSelect"})),_react2.default.createElement(_eui.EuiButton,{onClick:this.previewScript,disabled:this.props.script?false:true,isLoading:this.state.isLoading,"data-test-subj":"runScriptButton"},"Run script"))}},{key:"render",value:function render(){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h3",null,"Preview results"),_react2.default.createElement("p",null,"Run your script to preview the first 10 results. You can also select some additional fields to include in your results to gain more context.")),_react2.default.createElement(_eui.EuiSpacer,null),this.renderToolbar(),_react2.default.createElement(_eui.EuiSpacer,null),this.renderPreview())}}]);return TestScript}(_react.Component);TestScript.propTypes={indexPattern:_propTypes2.default.object.isRequired,lang:_propTypes2.default.string.isRequired,name:_propTypes2.default.string,script:_propTypes2.default.string,executeScript:_propTypes2.default.func.isRequired};TestScript.defaultProps={name:"myScriptedField"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_format_editor=__webpack_require__(1855);Object.defineProperty(exports,"FieldFormatEditor",{enumerable:true,get:function get(){return _field_format_editor.FieldFormatEditor}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatEditor=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FieldFormatEditor=exports.FieldFormatEditor=function(_PureComponent){_inherits(FieldFormatEditor,_PureComponent);function FieldFormatEditor(props){_classCallCheck(this,FieldFormatEditor);var _this=_possibleConstructorReturn(this,(FieldFormatEditor.__proto__||Object.getPrototypeOf(FieldFormatEditor)).call(this,props));_this.state={EditorComponent:null};return _this}_createClass(FieldFormatEditor,[{key:"render",value:function render(){var EditorComponent=this.state.EditorComponent;var _props=this.props,fieldType=_props.fieldType,fieldFormat=_props.fieldFormat,fieldFormatParams=_props.fieldFormatParams,onChange=_props.onChange,onError=_props.onError;return _react2.default.createElement(_react.Fragment,null,EditorComponent?_react2.default.createElement(EditorComponent,{fieldType:fieldType,format:fieldFormat,formatParams:fieldFormatParams,onChange:onChange,onError:onError}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){return{EditorComponent:nextProps.fieldFormatEditors.getEditor(nextProps.fieldFormatId)||null}}}]);return FieldFormatEditor}(_react.PureComponent);FieldFormatEditor.propTypes={fieldType:_propTypes2.default.string.isRequired,fieldFormat:_propTypes2.default.object.isRequired,fieldFormatId:_propTypes2.default.string.isRequired,fieldFormatParams:_propTypes2.default.object.isRequired,fieldFormatEditors:_propTypes2.default.object.isRequired,onChange:_propTypes2.default.func.isRequired,onError:_propTypes2.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_FIELD_TYPES=exports.FIELD_TYPES_BY_LANG=undefined;var _utils=__webpack_require__(97);var FIELD_TYPES_BY_LANG=exports.FIELD_TYPES_BY_LANG={painless:["number","string","date","boolean"],expression:["number"]};var DEFAULT_FIELD_TYPES=exports.DEFAULT_FIELD_TYPES=(0,_utils.getKbnTypeNames)()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _copy_field=__webpack_require__(1858);Object.defineProperty(exports,"copyField",{enumerable:true,get:function get(){return _copy_field.copyField}});var _get_default_format=__webpack_require__(1859);Object.defineProperty(exports,"getDefaultFormat",{enumerable:true,get:function get(){return _get_default_format.getDefaultFormat}});var _validate_script=__webpack_require__(1860);Object.defineProperty(exports,"executeScript",{enumerable:true,get:function get(){return _validate_script.executeScript}});Object.defineProperty(exports,"isScriptValid",{enumerable:true,get:function get(){return _validate_script.isScriptValid}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.copyField=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _lodash=__webpack_require__(0);var copyField=exports.copyField=function copyField(field,indexPattern,Field){var changes={};var newFieldProps={toActualField:{value:function value(){return new Field(indexPattern,_extends({},field.$$spec,changes))}}};Object.getOwnPropertyNames(field).forEach(function(prop){var desc=Object.getOwnPropertyDescriptor(field,prop);newFieldProps[prop]={enumerable:desc.enumerable,get:function get(){return(0,_lodash.has)(changes,prop)?changes[prop]:field[prop]},set:function set(v){changes[prop]=v}}});return Object.create(null,newFieldProps)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultFormat=undefined;var _i18n=__webpack_require__(8);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var getDefaultFormat=exports.getDefaultFormat=function getDefaultFormat(Format){var DefaultFormat=function(_Format){_inherits(DefaultFormat,_Format);function DefaultFormat(){_classCallCheck(this,DefaultFormat);return _possibleConstructorReturn(this,(DefaultFormat.__proto__||Object.getPrototypeOf(DefaultFormat)).apply(this,arguments))}return DefaultFormat}(Format);DefaultFormat.id="";DefaultFormat.resolvedTitle=Format.title;DefaultFormat.title=_i18n.i18n.translate("common.ui.fieldEditor.defaultFormatDropDown",{defaultMessage:"- Default -"});return DefaultFormat}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isScriptValid=exports.executeScript=undefined;var _kfetch=__webpack_require__(79);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var executeScript=exports.executeScript=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var name=_ref.name,lang=_ref.lang,script=_ref.script,indexPatternTitle=_ref.indexPatternTitle,_ref$additionalFields=_ref.additionalFields,additionalFields=_ref$additionalFields===undefined?[]:_ref$additionalFields;var header,search,body,esResp;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:header={index:indexPatternTitle,ignore_unavailable:true};search={query:{match_all:{}},script_fields:_defineProperty({},name,{script:{lang:lang,source:script}}),size:10,timeout:"30s"};if(additionalFields.length>0){search._source=additionalFields}body=JSON.stringify(header)+"\n"+JSON.stringify(search)+"\n";_context.next=6;return(0,_kfetch.kfetch)({method:"POST",pathname:"/elasticsearch/_msearch",body:body});case 6:esResp=_context.sent;return _context.abrupt("return",esResp.responses[0]);case 8:case"end":return _context.stop()}}},_callee,undefined)}));return function executeScript(_x){return _ref2.apply(this,arguments)}}();var isScriptValid=exports.isScriptValid=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var name=_ref3.name,lang=_ref3.lang,script=_ref3.script,indexPatternTitle=_ref3.indexPatternTitle;var scriptResponse;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPatternTitle});case 2:scriptResponse=_context2.sent;if(!(scriptResponse.status!==200)){_context2.next=5;break}return _context2.abrupt("return",false);case 5:return _context2.abrupt("return",true);case 6:case"end":return _context2.stop()}}},_callee2,undefined)}));return function isScriptValid(_x2){return _ref4.apply(this,arguments)}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesEditSectionsProvider=IndicesEditSectionsProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function IndicesEditSectionsProvider(){return function(indexPattern,indexPatternListProvider){var fieldCount=_lodash2.default.countBy(indexPattern.fields,function(field){return field.scripted?"scripted":"indexed"});_lodash2.default.defaults(fieldCount,{indexed:0,scripted:0,sourceFilters:indexPattern.sourceFilters?indexPattern.sourceFilters.length:0});var editSections=[];editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.fieldsHeader",{defaultMessage:"Fields"}),index:"indexedFields",count:fieldCount.indexed});if(indexPatternListProvider.areScriptedFieldsEnabled(indexPattern)){editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.scriptedHeader",{defaultMessage:"Scripted fields"}),index:"scriptedFields",count:fieldCount.scripted})}editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.sourceHeader",{defaultMessage:"Source filters"}),index:"sourceFilters",count:fieldCount.sourceFilters});return editSections}}},function(module,exports){module.exports='<kbn-management-app section="kibana/indices" omit-breadcrumb-pages="[\'indices\']">\n  <kbn-management-indices>\n    <div\n      ng-controller="managementIndicesEdit"\n      data-test-subj="editIndexPattern"\n      role="region"\n      aria-label="{{::\'kbn.management.editIndexPattern.detailsAria\' | i18n: { defaultMessage: \'Index pattern details\' } }}"\n    >\n      \x3c!-- Header --\x3e\n      <kbn-management-index-header\n        index-pattern="indexPattern"\n        set-default="setDefaultPattern()"\n        refresh-fields="refreshFields()"\n        delete="removePattern()"\n      ></kbn-management-index-header>\n\n      <div class="euiSpacer euiSpacer--s"></div>\n      <p ng-if="::(indexPattern.timeFieldName || (indexPattern.tags && indexPattern.tags.length))">\n        <span ng-if="::indexPattern.timeFieldName">\n          <span class="euiBadge euiBadge--warning">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                <span\n                  i18n-id="kbn.management.editIndexPattern.timeFilterHeader"\n                  i18n-default-message="Time Filter field name: {timeFieldName}"\n                  i18n-values="{ timeFieldName: indexPattern.timeFieldName }">\n                </span>\n              </span>\n            </span>\n          </span>\n          &nbsp;\n        </span>\n        <span ng-repeat="tag in indexPattern.tags">\n          <span class="euiBadge euiBadge--hollow">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                  {{tag.name}}\n                </span>\n              </span>\n            </span>\n        </span>\n      </p>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      <div class="euiText">\n        <p>\n          <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.timeFilterDetail"\n            i18n-default-message="This page lists every field in the {indexPatternTitle} index and the field\'s associated core type as recorded by Elasticsearch. To change a field type, use the Elasticsearch"\n            i18n-values="{ html_indexPatternTitle: \'<strong>\' + indexPattern.title + \'</strong>\' }"></span>\n          <a target="_window" class="euiLink euiLink--primary" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">\n            <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.mappingAPILink"\n                  i18n-default-message="Mapping API"></span>\n            <i aria-hidden="true" class="fa-link fa"></i>\n          </a>\n        </p>\n      </div>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      \x3c!-- Alerts --\x3e\n      <div\n        ng-if="indexPattern.isUnsupportedTimePattern()"\n        class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternHeader"\n                i18n-default-message="Support for repeating index patterns removed">\n          </span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternLabel"\n                  i18n-default-message="Support for time-interval based index patterns has been removed! In the next major version of Kibana this index patterns will stop working. Migrate saved objects that use this index pattern to a wildcard pattern and delete this one."></span>\n          </div>\n        </div>\n      </div>\n\n      <div\n        ng-if="conflictFields.length"\n        class="kuiInfoPanel kuiInfoPanel--warning kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.mappingConflictHeader"\n                i18n-default-message="Mapping conflict"></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.mappingConflictLabel"\n                  i18n-default-message="{conflictFieldsLength, plural, one {A field is} other {# fields are}} defined as several types (string, integer, etc) across the indices that match this pattern. You may still be able to use these conflict fields in parts of Kibana, but they will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data."\n                  i18n-values="{ conflictFieldsLength: conflictFields.length }"></span>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Tabs --\x3e\n      <div class="kuiTabs kuiVerticalRhythm">\n        <button\n          class="kuiTab"\n          ng-repeat="editSection in editSections"\n          ng-class="{ \'kuiTab-isSelected\': state.tab === editSection.index }"\n          ng-click="changeTab(editSection)"\n          data-test-subj="tab-{{ editSection.index }}"\n        >\n          {{ editSection.title }}\n          <span\n            data-test-subj="tab-count-{{ editSection.index }}"\n            aria-label="{{:: editSection.count + \' \' + editSection.title}}"\n          >\n            ({{ editSection.count }})\n          </span>\n        </button>\n      </div>\n\n      \x3c!-- Field Filters --\x3e\n      <form role="form" class="kuiFieldGroup kuiVerticalRhythm">\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <div class="kuiSearchInput">\n            <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n            <input\n              class="kuiSearchInput__input"\n              type="text"\n              aria-label="{{::\'kbn.management.editIndexPattern.fields.filterAria\' | i18n: {defaultMessage: \'Filter\'} }}"\n              ng-model="fieldFilter"\n              placeholder="{{::\'kbn.management.editIndexPattern.fields.filterPlaceholder\' | i18n: {defaultMessage: \'Filter\'} }}"\n              data-test-subj="indexPatternFieldFilter"\n            >\n          </div>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'indexedFields\' && indexedFieldTypes.length > 0"\n        >\n          <select\n            data-test-subj="indexedFieldTypeFilterDropdown"\n            class="kuiSelect"\n            ng-model="indexedFieldTypeFilter"\n            ng-change="changeFilter(\'indexedFieldTypeFilter\', indexedFieldTypeFilter)"\n            ng-options="o for o in indexedFieldTypes"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allTypesDropDown"\n                    i18n-default-message="All field types"></option>\n          </select>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'scriptedFields\' && scriptedFieldLanguages.length > 0"\n        >\n          <select\n            data-test-subj="scriptedFieldLanguageFilterDropdown"\n            class="kuiSelect"\n            ng-model="scriptedFieldLanguageFilter"\n            ng-change="changeFilter(\'scriptedFieldLanguageFilter\', scriptedFieldLanguageFilter)"\n            ng-options="o for o in scriptedFieldLanguages"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allLangsDropDown"\n                    i18n-default-message="All languages"></option>\n          </select>\n        </div>\n      </form>\n\n      \x3c!-- Tab content --\x3e\n      <div class="kuiVerticalRhythm">\n        <div id="reactIndexedFieldsTable"></div>\n\n        <div id="reactScriptedFieldsTable"></div>\n\n        <div id="reactSourceFiltersTable"></div>\n      </div>\n    </div>\n  </kbn-management-indices>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _source_filters_table=__webpack_require__(1864);Object.defineProperty(exports,"SourceFiltersTable",{enumerable:true,get:function get(){return _source_filters_table.SourceFiltersTable}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFiltersTable=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _reselect=__webpack_require__(600);var _eui=__webpack_require__(2);var _table=__webpack_require__(1865);var _header=__webpack_require__(1867);var _add_filter=__webpack_require__(1869);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var SourceFiltersTable=exports.SourceFiltersTable=function(_Component){_inherits(SourceFiltersTable,_Component);function SourceFiltersTable(props){_classCallCheck(this,SourceFiltersTable);var _this=_possibleConstructorReturn(this,(SourceFiltersTable.__proto__||Object.getPrototypeOf(SourceFiltersTable)).call(this,props));_initialiseProps.call(_this);_this.clientSideId=0;_this.state={filterToDelete:undefined,isDeleteConfirmationModalVisible:false,isSaving:false,filters:[]};return _this}_createClass(SourceFiltersTable,[{key:"componentWillMount",value:function componentWillMount(){this.updateFilters()}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var filterToDelete=this.state.filterToDelete;if(!filterToDelete){return null}return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteSourceFilterLabel",defaultMessage:"Delete source filter '{value}'?",values:{value:filterToDelete.value}}),onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteFilter,cancelButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _props=this.props,indexPattern=_props.indexPattern,fieldWildcardMatcher=_props.fieldWildcardMatcher;var isSaving=this.state.isSaving;var filteredFilters=this.getFilteredFilters(this.state,this.props);return _react2.default.createElement("div",null,_react2.default.createElement(_header.Header,null),_react2.default.createElement(_add_filter.AddFilter,{onAddFilter:this.onAddFilter}),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_table.Table,{isSaving:isSaving,indexPattern:indexPattern,items:filteredFilters,fieldWildcardMatcher:fieldWildcardMatcher,deleteFilter:this.startDeleteFilter,saveFilter:this.saveFilter}),this.renderDeleteConfirmationModal())}}]);return SourceFiltersTable}(_react.Component);SourceFiltersTable.propTypes={indexPattern:_propTypes2.default.object.isRequired,filterFilter:_propTypes2.default.string,fieldWildcardMatcher:_propTypes2.default.func.isRequired,onAddOrRemoveFilter:_propTypes2.default.func};var _initialiseProps=function _initialiseProps(){var _this2=this;this.updateFilters=function(){var sourceFilters=_this2.props.indexPattern.sourceFilters||[];var filters=sourceFilters.map(function(filter){return _extends({},filter,{clientId:++_this2.clientSideId})});_this2.setState({filters:filters})};this.getFilteredFilters=(0,_reselect.createSelector)(function(state){return state.filters},function(state,props){return props.filterFilter},function(filters,filterFilter){if(filterFilter){var filterFilterToLowercase=filterFilter.toLowerCase();return filters.filter(function(filter){return filter.value.toLowerCase().includes(filterFilterToLowercase)})}return filters});this.startDeleteFilter=function(filter){_this2.setState({filterToDelete:filter,isDeleteConfirmationModalVisible:true})};this.hideDeleteConfirmationModal=function(){_this2.setState({filterToDelete:undefined,isDeleteConfirmationModalVisible:false})};this.deleteFilter=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _props2,indexPattern,onAddOrRemoveFilter,_state,filterToDelete,filters;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_props2=_this2.props,indexPattern=_props2.indexPattern,onAddOrRemoveFilter=_props2.onAddOrRemoveFilter;_state=_this2.state,filterToDelete=_state.filterToDelete,filters=_state.filters;indexPattern.sourceFilters=filters.filter(function(filter){return filter.clientId!==filterToDelete.clientId});_this2.setState({isSaving:true});_context.next=6;return indexPattern.save();case 6:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this2.updateFilters();_this2.setState({isSaving:false});_this2.hideDeleteConfirmationModal();case 10:case"end":return _context.stop()}}},_callee,_this2)}));this.onAddFilter=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(value){var _props3,indexPattern,onAddOrRemoveFilter;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_props3=_this2.props,indexPattern=_props3.indexPattern,onAddOrRemoveFilter=_props3.onAddOrRemoveFilter;indexPattern.sourceFilters=[].concat(_toConsumableArray(indexPattern.sourceFilters||[]),[{value:value}]);_this2.setState({isSaving:true});_context2.next=5;return indexPattern.save();case 5:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this2.updateFilters();_this2.setState({isSaving:false});case 8:case"end":return _context2.stop()}}},_callee2,_this2)}));return function(_x){return _ref2.apply(this,arguments)}}();this.saveFilter=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref3){var filterId=_ref3.filterId,newFilterValue=_ref3.newFilterValue;var indexPattern,filters;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:indexPattern=_this2.props.indexPattern;filters=_this2.state.filters;indexPattern.sourceFilters=filters.map(function(filter){if(filter.clientId===filterId){return{value:newFilterValue,clientId:filter.clientId}}return filter});_this2.setState({isSaving:true});_context3.next=6;return indexPattern.save();case 6:_this2.updateFilters();_this2.setState({isSaving:false});case 8:case"end":return _context3.stop()}}},_callee3,_this2)}));return function(_x2){return _ref4.apply(this,arguments)}}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(1866);Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TableComponent=exports.TableComponent=function(_Component){_inherits(TableComponent,_Component);function TableComponent(props){_classCallCheck(this,TableComponent);var _this=_possibleConstructorReturn(this,(TableComponent.__proto__||Object.getPrototypeOf(TableComponent)).call(this,props));_this.startEditingFilter=function(id,value){return _this.setState({editingFilterId:id,editingFilterValue:value})};_this.stopEditingFilter=function(){return _this.setState({editingFilterId:null})};_this.onEditingFilterChange=function(e){return _this.setState({editingFilterValue:e.target.value})};_this.onEditFieldKeyDown=function(_ref){var keyCode=_ref.keyCode;if(_eui.keyCodes.ENTER===keyCode){_this.props.saveFilter({filterId:_this.state.editingFilterId,newFilterValue:_this.state.editingFilterValue});_this.stopEditingFilter()}if(_eui.keyCodes.ESCAPE===keyCode){_this.stopEditingFilter()}};_this.state={editingFilterId:null,editingFilterValue:null};return _this}_createClass(TableComponent,[{key:"getColumns",value:function getColumns(){var _this2=this;var _props=this.props,deleteFilter=_props.deleteFilter,fieldWildcardMatcher=_props.fieldWildcardMatcher,indexPattern=_props.indexPattern,saveFilter=_props.saveFilter,intl=_props.intl;return[{field:"value",name:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.filterHeader",defaultMessage:"Filter"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.filterDescription",defaultMessage:"Filter name"}),dataType:"string",sortable:true,render:function render(value,filter){if(_this2.state.editingFilterId===filter.clientId){return _react2.default.createElement(_eui.EuiFieldText,{autoFocus:true,value:_this2.state.editingFilterValue,onChange:_this2.onEditingFilterChange,onKeyDown:_this2.onEditFieldKeyDown})}return _react2.default.createElement("span",null,value)}},{field:"value",name:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.matchesHeader",defaultMessage:"Matches"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.matchesDescription",defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,render:function render(value,filter){var realtimeValue=_this2.state.editingFilterId===filter.clientId?_this2.state.editingFilterValue:value;var matcher=fieldWildcardMatcher([realtimeValue]);var matches=indexPattern.getNonScriptedFields().map(function(f){return f.name}).filter(matcher).sort();if(matches.length){return _react2.default.createElement("span",null,matches.join(", "))}return _react2.default.createElement("em",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.table.notMatchedLabel",defaultMessage:"The source filter doesn't match any known fields."}))}},{name:"",align:_eui.RIGHT_ALIGNMENT,width:"100",render:function render(filter){if(_this2.state.editingFilterId===filter.clientId){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){saveFilter({filterId:_this2.state.editingFilterId,newFilterValue:_this2.state.editingFilterValue});_this2.stopEditingFilter()},iconType:"checkInCircleFilled","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.saveAria",defaultMessage:"Save"})}),_react2.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){_this2.stopEditingFilter()},iconType:"cross","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.cancelAria",defaultMessage:"Cancel"})}))}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiButtonIcon,{size:"s",color:"danger",onClick:function onClick(){return deleteFilter(filter)},iconType:"trash","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.deleteAria",defaultMessage:"Delete"})}),_react2.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){return _this2.startEditingFilter(filter.clientId,filter.value)},iconType:"pencil","aria-label":intl.formatMessage({id:"kbn.management.editIndexPattern.source.table.editAria",defaultMessage:"Edit"})}))}}]}},{key:"render",value:function render(){var _props2=this.props,items=_props2.items,isSaving=_props2.isSaving;var columns=this.getColumns();var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react2.default.createElement(_eui.EuiInMemoryTable,{loading:isSaving,items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.Component);TableComponent.propTypes={indexPattern:_propTypes2.default.object.isRequired,items:_propTypes2.default.array.isRequired,deleteFilter:_propTypes2.default.func.isRequired,fieldWildcardMatcher:_propTypes2.default.func.isRequired,saveFilter:_propTypes2.default.func.isRequired,isSaving:_propTypes2.default.bool.isRequired};var Table=exports.Table=(0,_react3.injectI18n)(TableComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1868);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=exports.Header=function Header(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceHeader",defaultMessage:"Source filters"}))),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceLabel",defaultMessage:"Source filters can be used to exclude one or more fields when fetching the document source. This happens when viewing a document in the Discover app, or with a table displaying results from a saved search in the Dashboard app. Each row is built using the source of a single document, and if you have documents with large or unimportant fields you may benefit from filtering those out at this lower level."})),_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.noteLabel",defaultMessage:"Note that multi-fields will incorrectly appear as matches in the table below. These filters only actually apply to fields in the original source document, so matching multi-fields are not actually being filtered."}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _add_filter=__webpack_require__(1870);Object.defineProperty(exports,"AddFilter",{enumerable:true,get:function get(){return _add_filter.AddFilter}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddFilter=exports.AddFilterComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var AddFilterComponent=exports.AddFilterComponent=function(_Component){_inherits(AddFilterComponent,_Component);function AddFilterComponent(props){_classCallCheck(this,AddFilterComponent);var _this=_possibleConstructorReturn(this,(AddFilterComponent.__proto__||Object.getPrototypeOf(AddFilterComponent)).call(this,props));_this.onAddFilter=function(){_this.props.onAddFilter(_this.state.filter);_this.setState({filter:""})};_this.state={filter:""};return _this}_createClass(AddFilterComponent,[{key:"render",value:function render(){var _this2=this;var filter=this.state.filter;var intl=this.props.intl;var placeholder=intl.formatMessage({id:"kbn.management.editIndexPattern.sourcePlaceholder",defaultMessage:"source filter, accepts wildcards (e.g., `user*` to filter fields starting with 'user')"});return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:10},_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:filter,onChange:function onChange(e){return _this2.setState({filter:e.target.value.trim()})},placeholder:placeholder})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiButton,{isDisabled:filter.length===0,onClick:this.onAddFilter},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.source.addButtonLabel",defaultMessage:"Add"}))))}}]);return AddFilterComponent}(_react.Component);AddFilterComponent.propTypes={onAddFilter:_propTypes2.default.func.isRequired};var AddFilter=exports.AddFilter=(0,_react3.injectI18n)(AddFilterComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _indexed_fields_table=__webpack_require__(1872);Object.defineProperty(exports,"IndexedFieldsTable",{enumerable:true,get:function get(){return _indexed_fields_table.IndexedFieldsTable}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexedFieldsTable=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _reselect=__webpack_require__(600);var _table=__webpack_require__(1873);var _lib=__webpack_require__(1875);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var IndexedFieldsTable=exports.IndexedFieldsTable=function(_Component){_inherits(IndexedFieldsTable,_Component);function IndexedFieldsTable(props){_classCallCheck(this,IndexedFieldsTable);var _this=_possibleConstructorReturn(this,(IndexedFieldsTable.__proto__||Object.getPrototypeOf(IndexedFieldsTable)).call(this,props));_initialiseProps.call(_this);_this.state={fields:_this.mapFields(_this.props.fields)};return _this}_createClass(IndexedFieldsTable,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.fields!==this.props.fields){this.setState({fields:this.mapFields(nextProps.fields)})}}},{key:"mapFields",value:function mapFields(fields){var _props=this.props,indexPattern=_props.indexPattern,fieldWildcardMatcher=_props.fieldWildcardMatcher,helpers=_props.helpers;var sourceFilters=indexPattern.sourceFilters&&indexPattern.sourceFilters.map(function(f){return f.value});var fieldWildcardMatch=fieldWildcardMatcher(sourceFilters||[]);return fields&&fields.map(function(field){return _extends({},field,{displayName:field.displayName,routes:field.routes,indexPattern:field.indexPattern,format:(0,_lib.getFieldFormat)(indexPattern,field.name),excluded:fieldWildcardMatch?fieldWildcardMatch(field.name):false,info:helpers.getFieldInfo&&helpers.getFieldInfo(indexPattern,field.name)})})||[]}},{key:"render",value:function render(){var _this2=this;var indexPattern=this.props.indexPattern;var fields=this.getFilteredFields(this.state,this.props);return _react2.default.createElement("div",null,_react2.default.createElement(_table.Table,{indexPattern:indexPattern,items:fields,editField:function editField(field){return _this2.props.helpers.redirectToRoute(field,"edit")}}))}}]);return IndexedFieldsTable}(_react.Component);IndexedFieldsTable.propTypes={fields:_propTypes2.default.array.isRequired,indexPattern:_propTypes2.default.object.isRequired,fieldFilter:_propTypes2.default.string,indexedFieldTypeFilter:_propTypes2.default.string,helpers:_propTypes2.default.shape({redirectToRoute:_propTypes2.default.func.isRequired,getFieldInfo:_propTypes2.default.func}),fieldWildcardMatcher:_propTypes2.default.func.isRequired};var _initialiseProps=function _initialiseProps(){this.getFilteredFields=(0,_reselect.createSelector)(function(state){return state.fields},function(state,props){return props.fieldFilter},function(state,props){return props.indexedFieldTypeFilter},function(fields,fieldFilter,indexedFieldTypeFilter){if(fieldFilter){var normalizedFieldFilter=fieldFilter.toLowerCase();fields=fields.filter(function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)})}if(indexedFieldTypeFilter){fields=fields.filter(function(field){return field.type===indexedFieldTypeFilter})}return fields})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(1874);Object.keys(_table).forEach(function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _table[key]}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TableComponent=exports.TableComponent=function(_PureComponent){_inherits(TableComponent,_PureComponent);function TableComponent(){_classCallCheck(this,TableComponent);return _possibleConstructorReturn(this,(TableComponent.__proto__||Object.getPrototypeOf(TableComponent)).apply(this,arguments))}_createClass(TableComponent,[{key:"renderBooleanTemplate",value:function renderBooleanTemplate(value,label){return value?_react2.default.createElement(_eui.EuiIcon,{type:"dot",color:"secondary","aria-label":label}):_react2.default.createElement("span",null)}},{key:"renderFieldName",value:function renderFieldName(name,field){var indexPattern=this.props.indexPattern;var intl=this.props.intl;var infoLabel=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.additionalInfoAriaLabel",defaultMessage:"Additional field information"});var timeLabel=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.primaryTimeAriaLabel",defaultMessage:"Primary time field"});var timeContent=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.primaryTimeTooltip",defaultMessage:"This field represents the time that events occurred."});return _react2.default.createElement("span",null,name,field.info&&field.info.length?_react2.default.createElement("span",null," ",_react2.default.createElement(_eui.EuiIconTip,{type:"questionInCircle",color:"primary","aria-label":infoLabel,content:field.info.map(function(info,i){return _react2.default.createElement("div",{key:i},info)})})):null,indexPattern.timeFieldName===name?_react2.default.createElement("span",null," ",_react2.default.createElement(_eui.EuiIconTip,{type:"clock",color:"primary","aria-label":timeLabel,content:timeContent})):null)}},{key:"renderFieldType",value:function renderFieldType(type,isConflict){var intl=this.props.intl;var label=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.multiTypeAria",defaultMessage:"Multiple type field"});var content=intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.multiTypeTooltip",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions."});return _react2.default.createElement("span",null,type,isConflict?_react2.default.createElement("span",null," ",_react2.default.createElement(_eui.EuiIconTip,{type:"alert",color:"warning","aria-label":label,content:content})):"")}},{key:"render",value:function render(){var _this2=this;var _props=this.props,items=_props.items,editField=_props.editField,intl=_props.intl;var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};var columns=[{field:"displayName",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.nameHeader",defaultMessage:"Name"}),dataType:"string",sortable:true,render:function render(value,field){return _this2.renderFieldName(value,field)},width:"38%","data-test-subj":"indexedFieldName"},{field:"type",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.typeHeader",defaultMessage:"Type"}),dataType:"string",sortable:true,render:function render(value){return _this2.renderFieldType(value,value==="conflict")},"data-test-subj":"indexedFieldType"},{field:"format",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.formatHeader",defaultMessage:"Format"}),dataType:"string",sortable:true},{field:"searchable",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.searchableHeader",defaultMessage:"Searchable"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.searchableDescription",defaultMessage:"These fields can be used in the filter bar"}),dataType:"boolean",sortable:true,render:function render(value){return _this2.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isSearchableAria",defaultMessage:"Is searchable"}))}},{field:"aggregatable",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.aggregatableLabel",defaultMessage:"Aggregatable"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.aggregatableDescription",defaultMessage:"These fields can be used in visualization aggregations"}),dataType:"boolean",sortable:true,render:function render(value){return _this2.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isAggregatableAria",defaultMessage:"Is aggregatable"}))}},{field:"excluded",name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.excludedLabel",defaultMessage:"Excluded"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.excludedDescription",defaultMessage:"Fields that are excluded from _source when it is fetched"}),dataType:"boolean",sortable:true,render:function render(value){return _this2.renderBooleanTemplate(value,intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.isExcludedAria",defaultMessage:"Is excluded"}))}},{name:"",actions:[{name:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.editLabel",defaultMessage:"Edit"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.fields.table.editDescription",defaultMessage:"Edit"}),icon:"pencil",onClick:editField,type:"icon"}],width:"40px"}];return _react2.default.createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.PureComponent);TableComponent.propTypes={indexPattern:_propTypes2.default.object.isRequired,items:_propTypes2.default.array.isRequired,editField:_propTypes2.default.func.isRequired};var Table=exports.Table=(0,_react3.injectI18n)(TableComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get_field_format=__webpack_require__(1876);Object.defineProperty(exports,"getFieldFormat",{enumerable:true,get:function get(){return _get_field_format.getFieldFormat}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFormat=getFieldFormat;var _lodash=__webpack_require__(0);function getFieldFormat(indexPattern,fieldName){return indexPattern&&fieldName?(0,_lodash.get)(indexPattern,["fieldFormatMap",fieldName,"type","title"]):""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _scripted_fields_table=__webpack_require__(1878);Object.defineProperty(exports,"ScriptedFieldsTable",{enumerable:true,get:function get(){return _scripted_fields_table.ScriptedFieldsTable}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptedFieldsTable=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _scripting_languages=__webpack_require__(594);var _documentation_links=__webpack_require__(50);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(8);var _components=__webpack_require__(1879);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ScriptedFieldsTable=exports.ScriptedFieldsTable=function(_Component){_inherits(ScriptedFieldsTable,_Component);function ScriptedFieldsTable(props){var _this2=this;_classCallCheck(this,ScriptedFieldsTable);var _this=_possibleConstructorReturn(this,(ScriptedFieldsTable.__proto__||Object.getPrototypeOf(ScriptedFieldsTable)).call(this,props));_this.fetchFields=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var fields,deprecatedLangsInUse,deprecatedLangs,supportedLangs,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_ref2,lang;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.indexPattern.getScriptedFields();case 2:fields=_context.sent;deprecatedLangsInUse=[];deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=9;for(_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){_ref2=_step.value;lang=_ref2.lang;if(deprecatedLangs.includes(lang)||!supportedLangs.includes(lang)){deprecatedLangsInUse.push(lang)}}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](9);_didIteratorError=true;_iteratorError=_context.t0;case 17:_context.prev=17;_context.prev=18;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}case 20:_context.prev=20;if(!_didIteratorError){_context.next=23;break}throw _iteratorError;case 23:return _context.finish(20);case 24:return _context.finish(17);case 25:_this.setState({fields:fields,deprecatedLangsInUse:deprecatedLangsInUse});case 26:case"end":return _context.stop()}}},_callee,_this2,[[9,13,17,25],[18,,20,24]])}));_this.getFilteredItems=function(){var fields=_this.state.fields;var _this$props=_this.props,fieldFilter=_this$props.fieldFilter,scriptedFieldLanguageFilter=_this$props.scriptedFieldLanguageFilter;var languageFilteredFields=fields;if(scriptedFieldLanguageFilter){languageFilteredFields=fields.filter(function(field){return field.lang===_this.props.scriptedFieldLanguageFilter})}var filteredFields=languageFilteredFields;if(fieldFilter){var normalizedFieldFilter=_this.props.fieldFilter.toLowerCase();filteredFields=languageFilteredFields.filter(function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)})}return filteredFields};_this.startDeleteField=function(field){_this.setState({fieldToDelete:field,isDeleteConfirmationModalVisible:true})};_this.hideDeleteConfirmationModal=function(){_this.setState({fieldToDelete:undefined,isDeleteConfirmationModalVisible:false})};_this.deleteField=function(){var _this$props2=_this.props,indexPattern=_this$props2.indexPattern,onRemoveField=_this$props2.onRemoveField;var fieldToDelete=_this.state.fieldToDelete;indexPattern.removeScriptedField(fieldToDelete.name);onRemoveField&&onRemoveField();_this.fetchFields();_this.hideDeleteConfirmationModal()};_this.state={deprecatedLangsInUse:[],fieldToDelete:undefined,isDeleteConfirmationModalVisible:false,fields:[]};return _this}_createClass(ScriptedFieldsTable,[{key:"componentWillMount",value:function componentWillMount(){this.fetchFields()}},{key:"renderCallOuts",value:function renderCallOuts(){var deprecatedLangsInUse=this.state.deprecatedLangsInUse;return _react2.default.createElement(_components.CallOuts,{deprecatedLangsInUse:deprecatedLangsInUse,painlessDocLink:_documentation_links.documentationLinks.scriptedFields.painless})}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var fieldToDelete=this.state.fieldToDelete;if(!fieldToDelete){return null}var title=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteFieldLabel",{defaultMessage:"Delete scripted field '{fieldName}'?",values:{fieldName:fieldToDelete.name}});var cancelButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.cancelButton",{defaultMessage:"Cancel"});var confirmButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.deleteButton",{defaultMessage:"Delete"});return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:title,onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteField,cancelButtonText:cancelButtonText,confirmButtonText:confirmButtonText,defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _this3=this;var _props=this.props,helpers=_props.helpers,indexPattern=_props.indexPattern;var items=this.getFilteredItems();return _react2.default.createElement("div",null,_react2.default.createElement(_components.Header,{addScriptedFieldUrl:helpers.getRouteHref(indexPattern,"addField")}),this.renderCallOuts(),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_components.Table,{indexPattern:indexPattern,items:items,editField:function editField(field){return _this3.props.helpers.redirectToRoute(field,"edit")},deleteField:this.startDeleteField}),this.renderDeleteConfirmationModal())}}]);return ScriptedFieldsTable}(_react.Component);ScriptedFieldsTable.propTypes={indexPattern:_propTypes2.default.object.isRequired,fieldFilter:_propTypes2.default.string,scriptedFieldLanguageFilter:_propTypes2.default.string,helpers:_propTypes2.default.shape({redirectToRoute:_propTypes2.default.func.isRequired,getRouteHref:_propTypes2.default.func.isRequired}),onRemoveField:_propTypes2.default.func}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(1880);Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _header=__webpack_require__(1882);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _call_outs=__webpack_require__(1884);Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(1881);Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=exports.TableComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TableComponent=exports.TableComponent=function(_PureComponent){_inherits(TableComponent,_PureComponent);function TableComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,TableComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=TableComponent.__proto__||Object.getPrototypeOf(TableComponent)).call.apply(_ref,[this].concat(args))),_this),_this.renderFormatCell=function(value){var indexPattern=_this.props.indexPattern;var title=indexPattern.fieldFormatMap[value]&&indexPattern.fieldFormatMap[value].type?indexPattern.fieldFormatMap[value].type.title:"";return _react2.default.createElement("span",null,title)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(TableComponent,[{key:"render",value:function render(){var _props=this.props,items=_props.items,editField=_props.editField,deleteField=_props.deleteField,intl=_props.intl;var columns=[{field:"displayName",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.nameHeader",defaultMessage:"Name"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.nameDescription",defaultMessage:"Name of the field"}),dataType:"string",sortable:true,width:"38%"},{field:"lang",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.langHeader",defaultMessage:"Lang"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.langDescription",defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,"data-test-subj":"scriptedFieldLang"},{field:"script",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.scriptHeader",defaultMessage:"Script"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.scriptDescription",defaultMessage:"Script for the field"}),dataType:"string",sortable:true},{field:"name",name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.formatHeader",defaultMessage:"Format"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.formatDescription",defaultMessage:"Format used for the field"}),render:this.renderFormatCell,sortable:false},{name:"",actions:[{name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.editHeader",defaultMessage:"Edit"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.editDescription",defaultMessage:"Edit this field"}),icon:"pencil",onClick:editField},{name:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.deleteHeader",defaultMessage:"Delete"}),description:intl.formatMessage({id:"kbn.management.editIndexPattern.scripted.table.deleteDescription",defaultMessage:"Delete this field"}),icon:"trash",color:"danger",onClick:deleteField}],width:"40px"}];var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react2.default.createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return TableComponent}(_react.PureComponent);TableComponent.propTypes={indexPattern:_propTypes2.default.object.isRequired,items:_propTypes2.default.array.isRequired,editField:_propTypes2.default.func.isRequired,deleteField:_propTypes2.default.func.isRequired};var Table=exports.Table=(0,_react3.injectI18n)(TableComponent)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1883);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=exports.Header=function Header(_ref){var addScriptedFieldUrl=_ref.addScriptedFieldUrl;return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h3",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedHeader",defaultMessage:"Scripted fields"}))),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedLabel",defaultMessage:"You can use scripted fields in visualizations and display them in your documents. However, you cannot search scripted fields."})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"addScriptedFieldLink",href:addScriptedFieldUrl},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.addFieldButton",defaultMessage:"Add scripted field"}))))};Header.propTypes={addScriptedFieldUrl:_propTypes2.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _call_outs=__webpack_require__(1885);Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=exports.CallOuts=function CallOuts(_ref){var deprecatedLangsInUse=_ref.deprecatedLangsInUse,painlessDocLink=_ref.painlessDocLink;if(!deprecatedLangsInUse.length){return null}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangHeader",defaultMessage:"Deprecation languages in use"}),color:"danger",iconType:"cross"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.deprecationLangDetail",defaultMessage:"The following deprecated languages are in use: {deprecatedLangsInUse}. Support for these languages will be removed in the next major version of Kibana and Elasticsearch. Convert you scripted fields to {link} to avoid any problems.",values:{deprecatedLangsInUse:deprecatedLangsInUse.join(", "),link:_react2.default.createElement(_eui.EuiLink,{href:painlessDocLink},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.painlessDescription",defaultMessage:"Painless"}))}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}))}},function(module,exports){module.exports='<div class="col-md-2 sidebar-container" role="region" aria-label="{{::\'kbn.management.editIndexPatternAria\' | i18n: { defaultMessage: \'Index patterns\' } }}">\n  <div class="sidebar-list">\n    <div id="indexPatternListReact" role="region" aria-label="{{\'kbn.management.editIndexPatternLiveRegionAriaLabel\' | i18n: { defaultMessage: \'Index patterns\' } }}"></div>\n  </div>\n</div>\n\n<div class="col-md-10">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div ng-transclude></div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_list=__webpack_require__(1888);Object.defineProperty(exports,"IndexPatternList",{enumerable:true,get:function get(){return _index_pattern_list.IndexPatternList}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternList=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _header=__webpack_require__(1889);var _list=__webpack_require__(1894);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IndexPatternList=exports.IndexPatternList=function IndexPatternList(_ref){var indexPatternCreationOptions=_ref.indexPatternCreationOptions,defaultIndex=_ref.defaultIndex,indexPatterns=_ref.indexPatterns;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement("div",{className:"indexPatternList__headerWrapper","data-test-subj":"createIndexPatternParent"},_react2.default.createElement(_header.Header,{indexPatternCreationOptions:indexPatternCreationOptions})),_react2.default.createElement(_list.List,{indexPatterns:indexPatterns,defaultIndex:defaultIndex}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _header=__webpack_require__(1890);Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _create_button=__webpack_require__(1891);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=exports.Header=function Header(_ref){var indexPatternCreationOptions=_ref.indexPatternCreationOptions;return _react2.default.createElement(_create_button.CreateButton,{options:indexPatternCreationOptions},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.indexPatternList.header.createIndexPatternButtonLabel",defaultMessage:"Create index pattern"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_button=__webpack_require__(1892);Object.defineProperty(exports,"CreateButton",{enumerable:true,get:function get(){return _create_button.CreateButton}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateButton=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui_theme_k6_light=__webpack_require__(1963);var _eui=__webpack_require__(2);var _react3=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CreateButton=exports.CreateButton=function(_Component){_inherits(CreateButton,_Component);function CreateButton(props){_classCallCheck(this,CreateButton);var _this=_possibleConstructorReturn(this,(CreateButton.__proto__||Object.getPrototypeOf(CreateButton)).call(this,props));_this.togglePopover=function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})};_this.closePopover=function(){_this.setState({isPopoverOpen:false})};_this.renderBetaBadge=function(){var color=(0,_eui.rgbToHex)(_eui_theme_k6_light.euiColorAccent);return _react2.default.createElement(_eui.EuiBadge,{color:color},_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.indexPatternList.createButton.betaLabel",defaultMessage:"Beta"}))};_this.state={isPopoverOpen:false};return _this}_createClass(CreateButton,[{key:"render",value:function render(){var _this2=this;var _props=this.props,options=_props.options,children=_props.children;var isPopoverOpen=this.state.isPopoverOpen;if(!options||!options.length){return null}if(options.length===1){return _react2.default.createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,size:"s",onClick:options[0].onClick},children)}var button=_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.togglePopover},children);if(options.length>1){return _react2.default.createElement(_eui.EuiPopover,{id:"singlePanel",button:button,isOpen:isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:options.map(function(option){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:option.text,onClick:option.onClick,"data-test-subj":option.testSubj},_react2.default.createElement(_eui.EuiDescriptionList,{style:{whiteSpace:"nowrap"}},_react2.default.createElement(_eui.EuiDescriptionListTitle,null,option.text,option.isBeta?_react2.default.createElement(_react.Fragment,null," ",_this2.renderBetaBadge()):null),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,option.description)))})}))}}}]);return CreateButton}(_react.Component);CreateButton.propTypes={options:_propTypes2.default.arrayOf(_propTypes2.default.shape({text:_propTypes2.default.string.isRequired,description:_propTypes2.default.string,onClick:_propTypes2.default.func.isRequired}))}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _list=__webpack_require__(1895);Object.defineProperty(exports,"List",{enumerable:true,get:function get(){return _list.List}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.List=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react3=__webpack_require__(5);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ListUi=function(_Component){_inherits(ListUi,_Component);function ListUi(){_classCallCheck(this,ListUi);return _possibleConstructorReturn(this,(ListUi.__proto__||Object.getPrototypeOf(ListUi)).apply(this,arguments))}_createClass(ListUi,[{key:"renderList",value:function renderList(){var _props=this.props,indexPatterns=_props.indexPatterns,intl=_props.intl;if(indexPatterns&&indexPatterns.length){return _react2.default.createElement("div",null,indexPatterns.map(function(pattern){var id=pattern.id,isDefault=pattern.default,active=pattern.active,url=pattern.url,title=pattern.title,tag=pattern.tag;var icon=void 0;if(isDefault){icon=_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("em",{"aria-label":intl.formatMessage({id:"kbn.management.indexPatternList.defaultIndexPatternIconAriaLabel",defaultMessage:"Default index pattern"}),className:"fa fa-star"})," ")}var titleElement=void 0;if(active){titleElement=_react2.default.createElement("strong",null,title)}else{titleElement=title}var tagElement=void 0;if(tag){var key=tag.key,color=tag.color,name=tag.name;tagElement=_react2.default.createElement(_react.Fragment,{key:key}," ",_react2.default.createElement(_eui.EuiBadge,{color:color||"primary"},name))}return _react2.default.createElement("div",{key:id},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",href:url,"data-test-subj":"indexPatternLink"},icon,titleElement,tagElement),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}))}))}return null}},{key:"renderNoDefaultMessage",value:function renderNoDefaultMessage(){var defaultIndex=this.props.defaultIndex;return!defaultIndex?_react2.default.createElement("div",{className:"indexPatternList__headerWrapper"},_react2.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react2.default.createElement("p",null,_react2.default.createElement(_react3.FormattedMessage,{id:"kbn.management.indexPatternList.noDefaultIndexPatternTitle",defaultMessage:"No default index pattern. You must select or create one to continue."})))):null}},{key:"render",value:function render(){return _react2.default.createElement("div",null,this.renderNoDefaultMessage(),this.renderList())}}]);return ListUi}(_react.Component);ListUi.propTypes={indexPatterns:_propTypes2.default.array,defaultIndex:_propTypes2.default.string};var List=exports.List=(0,_react3.injectI18n)(ListUi)},function(module,exports){module.exports='<div class="euiPage mgtPage">\n  <div id="management-sidenav" class="euiPageSideBar" style="position: static;"></div>\n  <main class="euiPageBody euiPageBody--restrictWidth-default mgtPage__body" ng-transclude></main>\n</div>'},function(module,exports){module.exports='<kbn-management-app>\n  <div id="management-landing"></div>\n</kbn-management-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(opts){opts=opts||{};var whenMissingRedirectTo=opts.whenMissingRedirectTo||null;_routes2.default.addSetupWork(function loadDefaultIndexPattern(Private,Promise,$route,config){var getIds=Private(_get.IndexPatternsGetProvider)("id");var route=_lodash2.default.get($route,"current.$$route");if(!route.requireDefaultIndex){return}return getIds().then(function(patterns){var defaultId=config.get("defaultIndex");var defined=!!defaultId;var exists=_lodash2.default.contains(patterns,defaultId);if(defined&&!exists){config.remove("defaultIndex");defaultId=defined=false}if(!defined){if(patterns.length===1){defaultId=patterns[0];config.set("defaultIndex",defaultId)}else{throw new _errors.NoDefaultIndexPattern}}})}).afterWork(null,function(err,kbnUrl){var hasDefault=!(err instanceof _errors.NoDefaultIndexPattern);if(hasDefault||!whenMissingRedirectTo)throw err;kbnUrl.change(whenMissingRedirectTo);displayBanner()})};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _notify=__webpack_require__(10);var _errors=__webpack_require__(20);var _get=__webpack_require__(314);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _eui=__webpack_require__(2);var _timers=__webpack_require__(1964);var _i18n=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var bannerId=void 0;var timeoutId=void 0;function displayBanner(){(0,_timers.clearTimeout)(timeoutId);bannerId=_notify.banners.set({id:bannerId,component:_react2.default.createElement(_eui.EuiCallOut,{color:"warning",iconType:"iInCircle",title:_i18n.i18n.translate("common.ui.indexPattern.bannerLabel",{defaultMessage:"In order to visualize and explore data in Kibana, you'll need to create an index pattern to retrieve data from Elasticsearch."})})});timeoutId=setTimeout(function(){_notify.banners.remove(bannerId);timeoutId=undefined},15e3)}module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";__webpack_require__(1901)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(10);__webpack_require__(59);__webpack_require__(532);__webpack_require__(88);var _index=__webpack_require__(1902);var _index2=_interopRequireDefault(_index);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _modules=__webpack_require__(3);var _timefilter=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=_modules.uiModules.get("apps/doc",["kibana/notify","kibana/courier","kibana/index_patterns"]);var resolveIndexPattern={indexPattern:function indexPattern(indexPatterns,savedSearches,$route){return indexPatterns.get($route.current.params.indexPattern)}};_routes2.default.when("/doc/:indexPattern/:index/:type/:id",{template:_index2.default,resolve:resolveIndexPattern}).when("/doc/:indexPattern/:index/:type",{template:_index2.default,resolve:resolveIndexPattern});app.controller("doc",function($scope,$route,es){_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.indexPattern=$route.current.locals.indexPattern;var computedFields=$scope.indexPattern.getComputedFields();es.search({index:$route.current.params.index,body:{query:{ids:{type:$route.current.params.type,values:[$route.current.params.id]}},stored_fields:computedFields.storedFields,_source:true,script_fields:computedFields.scriptFields,docvalue_fields:computedFields.docvalueFields}}).then(function(resp){if(resp.hits){if(resp.hits.total<1){$scope.status="notFound"}else{$scope.status="found";$scope.hit=resp.hits.hits[0]}}}).catch(function(err){if(err.status===404){$scope.status="notFound"}else{$scope.status="error";$scope.resp=err}})})},function(module,exports){module.exports='<div ng-controller="doc" class="app-container">\n  <div class="kuiLocalNav">\n    <div class="kuiLocalNavRow">\n      <div class="kuiLocalNavRow__section">\n        <div\n          class="kuiLocalTitle"\n          i18n-id="kbn.doc.singleDocumentTitle"\n          i18n-default-message="Single Document"\n        ></div>\n      </div>\n    </div>\n    <div class="kuiLocalNavRow kuiLocalNavRow--secondary">\n      <div class="kuiLocalTabs">\n        <div\n          class="kuiLocalTab kuiLocalTab-isSelected"\n          ng-bind-template="{{ hit._type }}#{{ hit._id | uriescape }}"\n          ng-if="!!hit"\n        ></div>\n        <div\n          class="kuiLocalTab kuiLocalTab-isSelected"\n          ng-if="!hit"\n          i18n-id="kbn.doc.unknownIdTitle"\n          i18n-default-message="Unknown Id"\n        ></div>\n      </div>\n    </div>\n  </div>\n\n  <div class="kuiViewContent">\n    \x3c!-- no results --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'notFound\'">\n      <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.doc.failedToLocateDocumentDescription"\n            i18n-default-message="Failed to locate document"\n          ></span>\n        </div>\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.doc.couldNotFindDocumentsDescription"\n            i18n-default-message="Unfortunately I could not find any documents matching that id, of that type, in that index. I tried really hard. I wanted it to be there. Sometimes I swear documents grow legs and just walk out of the index. Sneaky. I wish I could offer some advice here, something to make you feel better"  \n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- error --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'error\'">\n      <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.doc.failedToExecuteQueryDescription"\n            i18n-default-message="Failed to execute query"\n          ></span>\n        </div>\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.doc.somethingWentWrongDescription"\n            i18n-default-message="Oh no. Something went very wrong. Its not just that I couldn\'t find your document, I couldn\'t even try. The index was missing, or the type. Go check out Elasticsearch, something isn\'t quite right here."  \n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- loading --\x3e\n    <div class="kuiViewContentItem" ng-if="status === undefined">\n      <div class="kuiPanel kuiPanel--centered">\n        <div\n          class="kuiTableInfo"\n          i18n-id="kbn.doc.loadingDescription"\n          i18n-default-message="Loading…"\n        ></div>\n      </div>\n    </div>\n\n    \x3c!-- result --\x3e\n    <div class="kuiViewContentItem" ng-if="status === \'found\'">\n      <doc-viewer hit="hit" index-pattern="indexPattern"></doc-viewer>\n    </div>\n  </div>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);var _dev_tools=__webpack_require__(225);var _feature_catalogue=__webpack_require__(39);__webpack_require__(1904);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.when("/dev_tools",{resolve:{redirect:function redirect(Private,kbnUrl){var items=Private(_dev_tools.DevToolsRegistryProvider).inOrder;kbnUrl.redirect(items[0].url.substring(1))}}});_feature_catalogue.FeatureCatalogueRegistryProvider.register(function(i18n){return{id:"console",title:i18n("kbn.devTools.consoleTitle",{defaultMessage:"Console"}),description:i18n("kbn.devTools.consoleDescription",{defaultMessage:"Skip cURL and use this JSON interface to work with your data directly."}),icon:"consoleApp",path:"/app/kibana#/dev_tools/console",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}})},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _dev_tools=__webpack_require__(225);var _dev_tools_app=__webpack_require__(1905);var _dev_tools_app2=_interopRequireDefault(_dev_tools_app);__webpack_require__(332);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/dev_tools").directive("kbnDevToolsApp",function(Private,$location){var devToolsRegistry=Private(_dev_tools.DevToolsRegistryProvider);return{restrict:"E",replace:true,template:_dev_tools_app2.default,transclude:true,scope:{topNavConfig:"="},bindToController:true,controllerAs:"kbnDevToolsApp",controller:function controller(){this.devTools=devToolsRegistry.inOrder;this.currentPath="#"+$location.path();this.onClick=function(item,$event){if(item.disabled){$event.preventDefault()}}}}})},function(module,exports){module.exports='<div class="devApp app-container">\n  <kbn-top-nav name="devtools" config="kbnDevToolsApp.topNavConfig">\n    \x3c!-- Transcluded elements. --\x3e\n    <div data-transclude-slots>\n      \x3c!-- Breadcrumbs. --\x3e\n      <bread-crumbs\n        data-transclude-slot="topLeftCorner"\n        omit-current-page="true"\n      ></bread-crumbs>\n\n      \x3c!-- Tabs. --\x3e\n      <div data-transclude-slot="bottomRow" class="euiTabs" role="tablist">\n        <a\n          role="tab"\n          aria-selected="{{kbnDevToolsApp.currentPath === item.url}}"\n          ng-repeat="item in kbnDevToolsApp.devTools"\n          class="euiTab"\n          ng-class="{\'euiTab-isSelected\': kbnDevToolsApp.currentPath === item.url, \'euiTab-isDisabled\': item.disabled}"\n          ng-disabled="item.disabled"\n          kbn-href="{{::item.url}}"\n          ng-click="kbnDevToolsApp.onClick(item, $event)"\n          tooltip="{{ item.tooltipContent }}"\n          tooltip-placement="bottom"\n          tooltip-popup-delay="0"\n          tooltip-append-to-body="1"\n        >\n          {{::item.display}}\n        </a>\n      </div>\n    </div>\n  </kbn-top-nav>\n  <main class="devApp__container" role="tabpanel" ng-transclude></main>\n</div>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _query_filter=__webpack_require__(54);var _routes=__webpack_require__(16);var _routes2=_interopRequireDefault(_routes);__webpack_require__(1907);var _index=__webpack_require__(1920);var _index2=_interopRequireDefault(_index);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes2.default.when("/context/:indexPatternId/:type/:id*",{controller:ContextAppRouteController,controllerAs:"contextAppRoute",resolve:{indexPattern:function indexPattern($route,indexPatterns){return indexPatterns.get($route.current.params.indexPatternId)}},template:_index2.default});function ContextAppRouteController($routeParams,$scope,AppState,chrome,config,indexPattern,Private){var _this=this;var queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);this.state=new AppState(createDefaultAppState(config,indexPattern));this.state.save(true);$scope.$watchGroup(["contextAppRoute.state.columns","contextAppRoute.state.predecessorCount","contextAppRoute.state.successorCount"],function(){return _this.state.save(true)});$scope.$listen(queryFilter,"update",function(){_this.filters=_lodash2.default.cloneDeep(queryFilter.getFilters())});this.anchorType=$routeParams.type;this.anchorId=$routeParams.id;this.indexPattern=indexPattern;this.discoverUrl=chrome.getNavLinkById("kibana:discover").lastSubUrl;this.filters=_lodash2.default.cloneDeep(queryFilter.getFilters())}function createDefaultAppState(config,indexPattern){return{columns:["_source"],filters:[],predecessorCount:parseInt(config.get("context:defaultSize"),10),sort:[indexPattern.timeFieldName,"desc"],successorCount:parseInt(config.get("context:defaultSize"),10)}}},function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _compat=__webpack_require__(327);var _modules=__webpack_require__(3);var _app=__webpack_require__(1908);var _app2=_interopRequireDefault(_app);__webpack_require__(1909);__webpack_require__(1912);var _sorting=__webpack_require__(596);var _query_parameters=__webpack_require__(597);var _query=__webpack_require__(1915);var _timefilter=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var _module=_modules.uiModules.get("apps/context",["elasticsearch","kibana","kibana/config","kibana/notify","ngRoute"]);_module.directive("contextApp",function ContextApp(){return{bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(ContextAppController),controllerAs:"contextApp",restrict:"E",scope:{anchorType:"=",anchorId:"=",columns:"=",indexPattern:"=",filters:"=",predecessorCount:"=",successorCount:"=",sort:"=",discoverUrl:"="},template:_app2.default}});function ContextAppController($scope,config,Private){var _this=this;var queryParameterActions=Private(_query_parameters.QueryParameterActionsProvider);var queryActions=Private(_query.QueryActionsProvider);_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();this.state=createInitialState(parseInt(config.get("context:step"),10),(0,_sorting.getFirstSortableField)(this.indexPattern,config.get("context:tieBreakerFields")),this.discoverUrl);this.actions=_lodash2.default.mapValues(_extends({},queryParameterActions,queryActions),function(action){return function(){return action(_this.state).apply(undefined,arguments)}});this.constants={FAILURE_REASONS:_query.FAILURE_REASONS,LOADING_STATUS:_query.LOADING_STATUS};$scope.$watchGroup([function(){return _this.state.rows.predecessors},function(){return _this.state.rows.anchor},function(){return _this.state.rows.successors}],function(newValues){var _actions;return(_actions=_this.actions).setAllRows.apply(_actions,_toConsumableArray(newValues))});$scope.$watchCollection(function(){return _extends({},_lodash2.default.pick(_this,_query_parameters.QUERY_PARAMETER_KEYS),{indexPatternId:_this.indexPattern.id})},function(newQueryParameters){var queryParameters=_this.state.queryParameters;if(newQueryParameters.indexPatternId!==queryParameters.indexPatternId||newQueryParameters.anchorType!==queryParameters.anchorType||newQueryParameters.anchorId!==queryParameters.anchorId||!_lodash2.default.isEqual(newQueryParameters.sort,queryParameters.sort)){_this.actions.fetchAllRowsWithNewQueryParameters(_lodash2.default.cloneDeep(newQueryParameters))}else if(newQueryParameters.predecessorCount!==queryParameters.predecessorCount||newQueryParameters.successorCount!==queryParameters.successorCount||!_lodash2.default.isEqual(newQueryParameters.filters,queryParameters.filters)){_this.actions.fetchContextRowsWithNewQueryParameters(_lodash2.default.cloneDeep(newQueryParameters))}});$scope.$watchCollection(function(){return{predecessorCount:_this.state.queryParameters.predecessorCount,successorCount:_this.state.queryParameters.successorCount}},function(newParameters){_lodash2.default.assign(_this,newParameters)})}function createInitialState(defaultStepSize,tieBreakerField,discoverUrl){return{queryParameters:(0,_query_parameters.createInitialQueryParametersState)(defaultStepSize,tieBreakerField),rows:{all:[],anchor:null,predecessors:[],successors:[]},loadingStatus:(0,_query.createInitialLoadingStatusState)(),navigation:{discover:{url:discoverUrl}}}}},function(module,exports){module.exports='<div class="kuiLocalNav">\n  <div class="kuiLocalNavRow">\n    <div class="kuiLocalNavRow__section">\n      <div\n        class="kuiLocalTitle"\n        role="heading"\n        aria-level="1"\n        i18n-id="kbn.context.surroundingDocumentsDescription"\n        i18n-default-message="Surrounding Documents in {indexPatternId}"\n        i18n-values="{\n          indexPatternId: contextApp.state.queryParameters.indexPatternId \n        }"\n      ></div>\n    </div>\n  </div>\n  <div class="kuiLocalNavRow kuiLocalNavRow--secondary">\n    <div class="kuiLocalTabs">\n      <div class="kuiLocalTab kuiLocalTab-isSelected" >\n        {{ contextApp.state.queryParameters.anchorType }}#{{ contextApp.state.queryParameters.anchorId }}\n      </div>\n    </div>\n  </div>\n</div>\n\n<filter-bar index-patterns="[contextApp.indexPattern]"></filter-bar>\n\n\x3c!-- Error feedback --\x3e\n<div\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.FAILED"\n>\n  <div class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm">\n    <div class="kuiInfoPanelHeader">\n      <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n      <span\n        class="kuiInfoPanelHeader__title"\n        i18n-id="kbn.context.failedToLoadAnchorDocumentDescription"\n        i18n-default-message="Failed to load the anchor document"\n      ></span>\n    </div>\n\n    <div class="kuiInfoPanelBody">\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.INVALID_TIEBREAKER"\n        i18n-id="kbn.context.noSearchableTiebreakerFieldDescription"\n        i18n-default-message="No searchable tiebreaker field could be found in the index pattern {indexPatternId}. Please change the advanced setting {tieBreakerFields} to include a valid field for this index pattern."\n        i18n-values="{\n          indexPatternId: contextApp.state.queryParameters.indexPatternId,\n          html_tieBreakerFields: \'<code>context:tieBreakerFields</code>\'\n        }"\n      >\n      </div>\n      <div\n        class="kuiInfoPanelBody__message"\n        ng-if="contextApp.state.loadingStatus.anchor.reason === contextApp.constants.FAILURE_REASONS.UNKNOWN"\n      >\n        <span\n          i18n-id="kbn.context.reloadPageDescription.reloadOrVisitTextMessage"\n          i18n-default-message="Please reload or visit"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></span>\n        <a\n          ng-href="{{ contextApp.state.navigation.discover.url }}"\n          i18n-id="kbn.context.reloadPageDescription.discoverLinkText"\n          i18n-default-message="Discover"\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n        ></a>\n        <span\n          i18n-id="kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n          i18n-default-message="to select a valid anchor document."\n          i18n-description="Part of composite text kbn.context.reloadPageDescription.reloadOrVisitTextMessage + kbn.context.reloadPageDescription.discoverLinkText + kbn.context.reloadPageDescription.selectValidAnchorDocumentTextMessage"\n      ></span>\n    </div>\n    </div>\n  </div>\n</div>\n\n<main\n  class="kuiViewContent kuiViewContentItem"\n  ng-if="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.FAILED"\n>\n  \x3c!-- Controls --\x3e\n  <div class="kuiBar kuiVerticalRhythm">\n    <div class="kuiBarSection">\n      <context-loading-button\n        data-test-subj="predecessorLoadMoreButton"\n        is-disabled="![\n          contextApp.constants.LOADING_STATUS.LOADED,\n          contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.predecessors.status)"\n        icon="\'fa-chevron-up\'"\n        ng-click="contextApp.actions.fetchMorePredecessorRows()"\n      >\n        <span\n          i18n-id="kbn.context.loadMoreDescription"\n          i18n-default-message="Load {defaultStepSize} more"\n          i18n-values="{\n            defaultStepSize: contextApp.state.queryParameters.defaultStepSize\n          }"\n        ></span>\n      </context-loading-button>\n      <context-size-picker\n        count="contextApp.state.queryParameters.predecessorCount"\n        data-test-subj="predecessorCountPicker"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        on-change-count="contextApp.actions.fetchGivenPredecessorRows"\n      ></context-size-picker>\n      <span\n        i18n-id="kbn.context.newerDocumentsDescription"\n        i18n-default-message="newer documents"\n      ></span>\n      <span\n        class="kuiStatusText kuiStatusText--warning"\n        ng-if="(contextApp.state.loadingStatus.predecessors.status === contextApp.constants.LOADING_STATUS.LOADED)\n          && (contextApp.state.queryParameters.predecessorCount > contextApp.state.rows.predecessors.length)"\n      >\n        <span class="kuiStatusText__icon kuiIcon fa-bolt"></span>\n        <span ng-bind-template="Only {{ contextApp.state.rows.predecessors.length }} documents newer than the anchor could be found."></span>\n      </span>\n    </div>\n\n    <div class="kuiBarSection">\n    </div>\n  </div>\n\n  \x3c!-- Loading feedback --\x3e\n  <div\n    ng-if="[\n      contextApp.constants.LOADING_STATUS.UNINITIALIZED,\n      contextApp.constants.LOADING_STATUS.LOADING,\n    ].includes(contextApp.state.loadingStatus.anchor.status)"\n    class="kuiPanel kuiPanel--centered kuiVerticalRhythm"\n  >\n    <div\n      class="kuiTableInfo"\n      i18n-id="kbn.context.loadingDescription"\n      i18n-default-message="Loading…"\n    ></div>\n  </div>\n\n  \x3c!-- Table --\x3e\n  <div\n    ng-if="contextApp.state.loadingStatus.anchor.status === contextApp.constants.LOADING_STATUS.LOADED"\n    class="kuiPanel kuiVerticalRhythm"\n  >\n    <div class="discover-table" fixed-scroll>\n      <doc-table\n        filter="contextApp.actions.addFilter"\n        hits="contextApp.state.rows.all"\n        index-pattern="contextApp.indexPattern"\n        sorting="contextApp.state.queryParameters.sort"\n        columns="contextApp.state.queryParameters.columns"\n        infinite-scroll="true"\n        minimum-visible-rows="contextApp.state.rows.all.length"\n      ></doc-table>\n    </div>\n  </div>\n\n  \x3c!-- Controls --\x3e\n  <div class="kuiBar kuiVerticalRhythm">\n    <div class="kuiBarSection">\n      <context-loading-button\n        data-test-subj="successorLoadMoreButton"\n        is-disabled="![\n          contextApp.constants.LOADING_STATUS.LOADED,\n          contextApp.constants.LOADING_STATUS.FAILED,\n        ].includes(contextApp.state.loadingStatus.successors.status)"\n        icon="\'fa-chevron-down\'"\n        ng-click="contextApp.actions.fetchMoreSuccessorRows()"\n      >\n        <span\n          i18n-id="kbn.context.loadMoreDescription"\n          i18n-default-message="Load {defaultStepSize} more"\n          i18n-values="{\n            defaultStepSize: contextApp.state.queryParameters.defaultStepSize\n          }"\n        ></span>\n      </context-loading-button>\n      <context-size-picker\n        count="contextApp.state.queryParameters.successorCount"\n        data-test-subj="successorCountPicker"\n        is-disabled="contextApp.state.loadingStatus.anchor.status !== contextApp.constants.LOADING_STATUS.LOADED"\n        on-change-count="contextApp.actions.fetchGivenSuccessorRows"\n      ></context-size-picker>\n      <div\n        i18n-id="kbn.context.olderDocumentsDescription"\n        i18n-default-message="older documents"\n      ></div>\n      <span\n        class="kuiStatusText kuiStatusText--warning"\n        ng-if="(contextApp.state.loadingStatus.successors.status === contextApp.constants.LOADING_STATUS.LOADED)\n          && (contextApp.state.queryParameters.successorCount > contextApp.state.rows.successors.length)"\n      >\n        <span class="kuiStatusText__icon kuiIcon fa-bolt"></span>\n        <span ng-bind-template="Only {{ contextApp.state.rows.successors.length }} documents older than the anchor could be found."></span>\n      </span>\n    </div>\n\n    <div class="kuiBarSection">\n    </div>\n  </div>\n</main>\n'},function(module,exports,__webpack_require__){"use strict";__webpack_require__(1910)},function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _loading_button=__webpack_require__(1911);var _loading_button2=_interopRequireDefault(_loading_button);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("apps/context",["kibana","ngRoute"]);_module.directive("contextLoadingButton",function ContextLoadingButton(){return{replace:true,restrict:"E",scope:{isDisabled:"=",icon:"="},template:_loading_button2.default,transclude:true}})},function(module,exports){module.exports='<button\n  class="kuiButton kuiButton--basic kuiButton--iconText"\n  ng-disabled="isDisabled"\n>\n  <span class="kuiButton__inner">\n    <span\n      class="kuiButton__icon kuiIcon fa-spinner fa-spin"\n      ng-class="isDisabled ? [\'fa-spinner\', \'fa-spin\'] : [icon]"\n    />\n    <span ng-transclude />\n  </span>\n</button>\n'},function(module,exports,__webpack_require__){"use strict";var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _modules=__webpack_require__(3);var _compat=__webpack_require__(327);var _size_picker=__webpack_require__(1913);var _size_picker2=_interopRequireDefault(_size_picker);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _module=_modules.uiModules.get("apps/context",["kibana"]);_module.directive("contextSizePicker",function ContextSizePicker(){return{bindToController:true,controller:(0,_compat.callAfterBindingsWorkaround)(ContextSizePickerController),controllerAs:"contextSizePicker",link:linkContextSizePicker,replace:true,restrict:"E",require:"ngModel",scope:{count:"=",isDisabled:"=",onChangeCount:"="},template:_size_picker2.default}});function linkContextSizePicker(scope,element,attrs,ngModel){scope.countModel=ngModel}function ContextSizePickerController($scope){var _this=this;$scope.$watch(function(){return _this.count},function(){return $scope.countModel.$rollbackViewValue()});this.getOrSetCount=function(count){return _lodash2.default.isUndefined(count)?_this.count:_this.onChangeCount(count)}}},function(module,exports){module.exports='<input\n  class="kuiTextInput cxtSizePicker"\n  ng-disabled="contextSizePicker.isDisabled"\n  ng-model-options="{updateOn: \'change\', getterSetter: true, debounce: 200}"\n  ng-model="contextSizePicker.getOrSetCount"\n  type="number"\n>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryParameterActionsProvider=QueryParameterActionsProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _filter_manager=__webpack_require__(251);var _constants=__webpack_require__(598);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function QueryParameterActionsProvider(indexPatterns,Private){var _this=this;var filterManager=Private(_filter_manager.FilterManagerProvider);var setPredecessorCount=function setPredecessorCount(state){return function(predecessorCount){return state.queryParameters.predecessorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,predecessorCount)}};var increasePredecessorCount=function increasePredecessorCount(state){return function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state.queryParameters.defaultStepSize;return setPredecessorCount(state)(state.queryParameters.predecessorCount+value)}};var setSuccessorCount=function setSuccessorCount(state){return function(successorCount){return state.queryParameters.successorCount=clamp(_constants.MIN_CONTEXT_SIZE,_constants.MAX_CONTEXT_SIZE,successorCount)}};var increaseSuccessorCount=function increaseSuccessorCount(state){return function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state.queryParameters.defaultStepSize;return setSuccessorCount(state)(state.queryParameters.successorCount+value)}};var setQueryParameters=function setQueryParameters(state){return function(queryParameters){return Object.assign(state.queryParameters,_lodash2.default.pick(queryParameters,_constants.QUERY_PARAMETER_KEYS))}};var addFilter=function addFilter(state){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(field,values,operation){var indexPatternId,indexPattern;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternId=state.queryParameters.indexPatternId;filterManager.add(field,values,operation,indexPatternId);_context.next=4;return indexPatterns.get(indexPatternId);case 4:indexPattern=_context.sent;indexPattern.popularizeField(field.name,1);case 6:case"end":return _context.stop()}}},_callee,_this)}));return function(_x3,_x4,_x5){return _ref.apply(this,arguments)}}()};return{addFilter:addFilter,increasePredecessorCount:increasePredecessorCount,increaseSuccessorCount:increaseSuccessorCount,setPredecessorCount:setPredecessorCount,setQueryParameters:setQueryParameters,setSuccessorCount:setSuccessorCount}}function clamp(minimum,maximum,value){return Math.max(Math.min(maximum,value),minimum)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _actions=__webpack_require__(1916);Object.defineProperty(exports,"QueryActionsProvider",{enumerable:true,get:function get(){return _actions.QueryActionsProvider}});var _constants=__webpack_require__(351);Object.defineProperty(exports,"FAILURE_REASONS",{enumerable:true,get:function get(){return _constants.FAILURE_REASONS}});Object.defineProperty(exports,"LOADING_STATUS",{enumerable:true,get:function get(){return _constants.LOADING_STATUS}});var _state=__webpack_require__(1919);Object.defineProperty(exports,"createInitialLoadingStatusState",{enumerable:true,get:function get(){return _state.createInitialLoadingStatusState}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.QueryActionsProvider=QueryActionsProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _markdown=__webpack_require__(220);var _notify=__webpack_require__(10);var _anchor=__webpack_require__(1917);var _context=__webpack_require__(1918);var _query_parameters=__webpack_require__(597);var _constants=__webpack_require__(351);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function QueryActionsProvider(courier,Private,Promise,i18n){var fetchAnchor=Private(_anchor.fetchAnchorProvider);var _Private=Private(_context.fetchContextProvider),fetchPredecessors=_Private.fetchPredecessors,fetchSuccessors=_Private.fetchSuccessors;var _Private2=Private(_query_parameters.QueryParameterActionsProvider),increasePredecessorCount=_Private2.increasePredecessorCount,increaseSuccessorCount=_Private2.increaseSuccessorCount,setPredecessorCount=_Private2.setPredecessorCount,setQueryParameters=_Private2.setQueryParameters,setSuccessorCount=_Private2.setSuccessorCount;var setFailedStatus=function setFailedStatus(state){return function(subject){var details=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return state.loadingStatus[subject]=_extends({status:_constants.LOADING_STATUS.FAILED,reason:_constants.FAILURE_REASONS.UNKNOWN},details)}};var setLoadedStatus=function setLoadedStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADED}}};var setLoadingStatus=function setLoadingStatus(state){return function(subject){return state.loadingStatus[subject]={status:_constants.LOADING_STATUS.LOADING}}};var fetchAnchorRow=function fetchAnchorRow(state){return function(){var _state$queryParameter=state.queryParameters,indexPatternId=_state$queryParameter.indexPatternId,anchorType=_state$queryParameter.anchorType,anchorId=_state$queryParameter.anchorId,sort=_state$queryParameter.sort,tieBreakerField=_state$queryParameter.tieBreakerField;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("anchor",{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)("anchor");return Promise.try(function(){return fetchAnchor(indexPatternId,anchorType,anchorId,[_lodash2.default.zipObject([sort]),_defineProperty({},tieBreakerField,"asc")])}).then(function(anchorDocument){setLoadedStatus(state)("anchor");state.rows.anchor=anchorDocument;return anchorDocument},function(error){setFailedStatus(state)("anchor",{error:error});_notify.toastNotifications.addDanger({title:i18n("kbn.context.unableToLoadAnchorDocumentDescription",{defaultMessage:"Unable to load the anchor document"}),text:_react2.default.createElement(_markdown.MarkdownSimple,null,error.message)});throw error})}};var fetchPredecessorRows=function fetchPredecessorRows(state){return function(){var _state$queryParameter2=state.queryParameters,indexPatternId=_state$queryParameter2.indexPatternId,filters=_state$queryParameter2.filters,predecessorCount=_state$queryParameter2.predecessorCount,sort=_state$queryParameter2.sort,tieBreakerField=_state$queryParameter2.tieBreakerField,anchor=state.rows.anchor;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("predecessors",{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)("predecessors");return Promise.try(function(){return fetchPredecessors(indexPatternId,sort[0],sort[1],anchor.sort[0],tieBreakerField,"asc",anchor.sort[1],predecessorCount,filters)}).then(function(predecessorDocuments){setLoadedStatus(state)("predecessors");state.rows.predecessors=predecessorDocuments;return predecessorDocuments},function(error){setFailedStatus(state)("predecessors",{error:error});_notify.toastNotifications.addDanger({title:i18n("kbn.context.unableToLoadDocumentDescription",{defaultMessage:"Unable to load documents"}),text:_react2.default.createElement(_markdown.MarkdownSimple,null,error.message)});throw error})}};var fetchSuccessorRows=function fetchSuccessorRows(state){return function(){var _state$queryParameter3=state.queryParameters,indexPatternId=_state$queryParameter3.indexPatternId,filters=_state$queryParameter3.filters,sort=_state$queryParameter3.sort,successorCount=_state$queryParameter3.successorCount,tieBreakerField=_state$queryParameter3.tieBreakerField,anchor=state.rows.anchor;if(!tieBreakerField){return Promise.reject(setFailedStatus(state)("successors",{reason:_constants.FAILURE_REASONS.INVALID_TIEBREAKER}))}setLoadingStatus(state)("successors");return Promise.try(function(){return fetchSuccessors(indexPatternId,sort[0],sort[1],anchor.sort[0],tieBreakerField,"asc",anchor.sort[1],successorCount,filters)}).then(function(successorDocuments){setLoadedStatus(state)("successors");state.rows.successors=successorDocuments;return successorDocuments},function(error){setFailedStatus(state)("successors",{error:error});_notify.toastNotifications.addDanger({title:"Unable to load documents",text:_react2.default.createElement(_markdown.MarkdownSimple,null,error.message)});throw error})}};var fetchContextRows=function fetchContextRows(state){return function(){return Promise.all([fetchPredecessorRows(state)(),fetchSuccessorRows(state)()])}};var fetchAllRows=function fetchAllRows(state){return function(){return Promise.try(fetchAnchorRow(state)).then(fetchContextRows(state))}};var fetchContextRowsWithNewQueryParameters=function fetchContextRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchContextRows(state)()}};var fetchAllRowsWithNewQueryParameters=function fetchAllRowsWithNewQueryParameters(state){return function(queryParameters){setQueryParameters(state)(queryParameters);return fetchAllRows(state)()}};var fetchGivenPredecessorRows=function fetchGivenPredecessorRows(state){return function(count){setPredecessorCount(state)(count);return fetchPredecessorRows(state)()}};var fetchGivenSuccessorRows=function fetchGivenSuccessorRows(state){return function(count){setSuccessorCount(state)(count);return fetchSuccessorRows(state)()}};var fetchMorePredecessorRows=function fetchMorePredecessorRows(state){return function(){increasePredecessorCount(state)();return fetchPredecessorRows(state)()}};var fetchMoreSuccessorRows=function fetchMoreSuccessorRows(state){return function(){increaseSuccessorCount(state)();return fetchSuccessorRows(state)()}};var setAllRows=function setAllRows(state){return function(predecessorRows,anchorRow,successorRows){return state.rows.all=[].concat(_toConsumableArray(predecessorRows||[]),_toConsumableArray(anchorRow?[anchorRow]:[]),_toConsumableArray(successorRows||[]))}};return{fetchAllRows:fetchAllRows,fetchAllRowsWithNewQueryParameters:fetchAllRowsWithNewQueryParameters,fetchAnchorRow:fetchAnchorRow,fetchContextRows:fetchContextRows,fetchContextRowsWithNewQueryParameters:fetchContextRowsWithNewQueryParameters,fetchGivenPredecessorRows:fetchGivenPredecessorRows,fetchGivenSuccessorRows:fetchGivenSuccessorRows,fetchMorePredecessorRows:fetchMorePredecessorRows,fetchMoreSuccessorRows:fetchMoreSuccessorRows,fetchPredecessorRows:fetchPredecessorRows,fetchSuccessorRows:fetchSuccessorRows,setAllRows:setAllRows}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.fetchAnchorProvider=fetchAnchorProvider;var _lodash=__webpack_require__(0);var _lodash2=_interopRequireDefault(_lodash);var _courier=__webpack_require__(59);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function fetchAnchorProvider(indexPatterns,Private,i18n){var SearchSource=Private(_courier.SearchSourceProvider);return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId,anchorType,anchorId,sort){var indexPattern,searchSource,response;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return indexPatterns.get(indexPatternId);case 2:indexPattern=_context.sent;searchSource=(new SearchSource).setParent(false).setField("index",indexPattern).setField("version",true).setField("size",1).setField("query",{query:{constant_score:{filter:{ids:{type:anchorType,values:[anchorId]}}}},language:"lucene"}).setField("sort",sort);_context.next=6;return searchSource.fetch();case 6:response=_context.sent;if(!(_lodash2.default.get(response,["hits","total"],0)<1)){_context.next=9;break}throw new Error(i18n("kbn.context.failedToLoadAnchorDocumentErrorDescription",{defaultMessage:"Failed to load anchor document."}));case 9:return _context.abrupt("return",_extends({},_lodash2.default.get(response,["hits","hits",0]),{$$_isAnchor:true}));case 10:case"end":return _context.stop()}}},_callee,this)}));function fetchAnchor(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}return fetchAnchor}()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchContextProvider=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _courier=__webpack_require__(59);var _sorting=__webpack_require__(596);var _marked=regeneratorRuntime.mark(asPairs);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}var DAY_MILLIS=24*60*60*1e3;var LOOKUP_OFFSETS=[0,1,7,30,365,1e4].map(function(days){return days*DAY_MILLIS});function fetchContextProvider(indexPatterns,Private){var fetchSuccessors=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(indexPatternId,timeField,timeSortDirection,timeValue,tieBreakerField,tieBreakerSortDirection,tieBreakerValue,size,filters){var searchSource,offsetSign,intervals,successors,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_ref2,_ref3,startTimeValue,endTimeValue,remainingSize,_ref4,_ref5,afterTimeValue,afterTieBreakerValue,hits;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createSearchSource(indexPatternId,filters);case 2:searchSource=_context.sent;offsetSign=timeSortDirection==="asc"?1:-1;intervals=asPairs([].concat(_toConsumableArray(LOOKUP_OFFSETS.map(function(offset){return timeValue+offset*offsetSign})),[null]));successors=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=9;_iterator=intervals[Symbol.iterator]();case 11:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=27;break}_ref2=_step.value;_ref3=_slicedToArray(_ref2,2);startTimeValue=_ref3[0];endTimeValue=_ref3[1];remainingSize=size-successors.length;if(!(remainingSize<=0)){_context.next=19;break}return _context.abrupt("break",27);case 19:_ref4=successors.length>0?successors[successors.length-1].sort:[timeValue,tieBreakerValue],_ref5=_slicedToArray(_ref4,2),afterTimeValue=_ref5[0],afterTieBreakerValue=_ref5[1];_context.next=22;return fetchHitsInInterval(searchSource,timeField,timeSortDirection,startTimeValue,endTimeValue,afterTimeValue,tieBreakerField,tieBreakerSortDirection,afterTieBreakerValue,remainingSize);case 22:hits=_context.sent;successors=[].concat(_toConsumableArray(successors),_toConsumableArray(hits));case 24:_iteratorNormalCompletion=true;_context.next=11;break;case 27:_context.next=33;break;case 29:_context.prev=29;_context.t0=_context["catch"](9);_didIteratorError=true;_iteratorError=_context.t0;case 33:_context.prev=33;_context.prev=34;if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}case 36:_context.prev=36;if(!_didIteratorError){_context.next=39;break}throw _iteratorError;case 39:return _context.finish(36);case 40:return _context.finish(33);case 41:return _context.abrupt("return",successors);case 42:case"end":return _context.stop()}}},_callee,this,[[9,29,33,41],[34,,36,40]])}));return function fetchSuccessors(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9){return _ref.apply(this,arguments)}}();var fetchPredecessors=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(indexPatternId,timeField,timeSortDirection,timeValue,tieBreakerField,tieBreakerSortDirection,tieBreakerValue,size,filters){var searchSource,offsetSign,intervals,predecessors,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,_ref7,_ref8,startTimeValue,endTimeValue,remainingSize,_ref9,_ref10,afterTimeValue,afterTieBreakerValue,hits;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return createSearchSource(indexPatternId,filters);case 2:searchSource=_context2.sent;offsetSign=timeSortDirection==="desc"?1:-1;intervals=asPairs([].concat(_toConsumableArray(LOOKUP_OFFSETS.map(function(offset){return timeValue+offset*offsetSign})),[null]));predecessors=[];_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context2.prev=9;_iterator2=intervals[Symbol.iterator]();case 11:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context2.next=27;break}_ref7=_step2.value;_ref8=_slicedToArray(_ref7,2);startTimeValue=_ref8[0];endTimeValue=_ref8[1];remainingSize=size-predecessors.length;if(!(remainingSize<=0)){_context2.next=19;break}return _context2.abrupt("break",27);case 19:_ref9=predecessors.length>0?predecessors[0].sort:[timeValue,tieBreakerValue],_ref10=_slicedToArray(_ref9,2),afterTimeValue=_ref10[0],afterTieBreakerValue=_ref10[1];_context2.next=22;return fetchHitsInInterval(searchSource,timeField,(0,_sorting.reverseSortDirection)(timeSortDirection),startTimeValue,endTimeValue,afterTimeValue,tieBreakerField,(0,_sorting.reverseSortDirection)(tieBreakerSortDirection),afterTieBreakerValue,remainingSize);case 22:hits=_context2.sent;predecessors=[].concat(_toConsumableArray(hits.slice().reverse()),_toConsumableArray(predecessors));case 24:_iteratorNormalCompletion2=true;_context2.next=11;break;case 27:_context2.next=33;break;case 29:_context2.prev=29;_context2.t0=_context2["catch"](9);_didIteratorError2=true;_iteratorError2=_context2.t0;case 33:_context2.prev=33;_context2.prev=34;if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}case 36:_context2.prev=36;if(!_didIteratorError2){_context2.next=39;break}throw _iteratorError2;case 39:return _context2.finish(36);case 40:return _context2.finish(33);case 41:return _context2.abrupt("return",predecessors);case 42:case"end":return _context2.stop()}}},_callee2,this,[[9,29,33,41],[34,,36,40]])}));return function fetchPredecessors(_x10,_x11,_x12,_x13,_x14,_x15,_x16,_x17,_x18){return _ref6.apply(this,arguments)}}();var createSearchSource=function(){var _ref11=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(indexPatternId,filters){var indexPattern;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return indexPatterns.get(indexPatternId);case 2:indexPattern=_context3.sent;return _context3.abrupt("return",(new SearchSource).setParent(false).setField("index",indexPattern).setField("filter",filters));case 4:case"end":return _context3.stop()}}},_callee3,this)}));return function createSearchSource(_x19,_x20){return _ref11.apply(this,arguments)}}();var fetchHitsInInterval=function(){var _ref12=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(searchSource,timeField,timeSortDirection,startTimeValue,endTimeValue,afterTimeValue,tieBreakerField,tieBreakerSortDirection,tieBreakerValue,maxCount){var startRange,endRange,response;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:startRange=_defineProperty({},timeSortDirection==="asc"?"gte":"lte",startTimeValue);endRange=endTimeValue===null?{}:_defineProperty({},timeSortDirection==="asc"?"lte":"gte",endTimeValue);_context4.next=4;return searchSource.setField("size",maxCount).setField("query",{query:{constant_score:{filter:{range:_defineProperty({},timeField,_extends({format:"epoch_millis"},startRange,endRange))}}},language:"lucene"}).setField("searchAfter",[afterTimeValue!==null?afterTimeValue:startTimeValue,tieBreakerValue]).setField("sort",[_defineProperty({},timeField,timeSortDirection),_defineProperty({},tieBreakerField,tieBreakerSortDirection)]).setField("version",true).fetch();case 4:response=_context4.sent;return _context4.abrupt("return",response.hits?response.hits.hits:[]);case 6:case"end":return _context4.stop()}}},_callee4,this)}));return function fetchHitsInInterval(_x21,_x22,_x23,_x24,_x25,_x26,_x27,_x28,_x29,_x30){return _ref12.apply(this,arguments)}}();var SearchSource=Private(_courier.SearchSourceProvider);return{fetchPredecessors:fetchPredecessors,fetchSuccessors:fetchSuccessors}}function asPairs(iterable){var currentPair,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,value;return regeneratorRuntime.wrap(function asPairs$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:currentPair=[];_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context5.prev=4;_iterator3=iterable[Symbol.iterator]();case 6:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context5.next=15;break}value=_step3.value;currentPair=[].concat(_toConsumableArray(currentPair),[value]).slice(-2);if(!(currentPair.length===2)){_context5.next=12;break}_context5.next=12;return currentPair;case 12:_iteratorNormalCompletion3=true;_context5.next=6;break;case 15:_context5.next=21;break;case 17:_context5.prev=17;_context5.t0=_context5["catch"](4);_didIteratorError3=true;_iteratorError3=_context5.t0;case 21:_context5.prev=21;_context5.prev=22;if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}case 24:_context5.prev=24;if(!_didIteratorError3){_context5.next=27;break}throw _iteratorError3;case 27:return _context5.finish(24);case 28:return _context5.finish(21);case 29:case"end":return _context5.stop()}}},_marked,this,[[4,17,21,29],[22,,24,28]])}exports.fetchContextProvider=fetchContextProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createInitialLoadingStatusState=createInitialLoadingStatusState;var _constants=__webpack_require__(351);function createInitialLoadingStatusState(){return{anchor:_constants.LOADING_STATUS.UNINITIALIZED,predecessors:_constants.LOADING_STATUS.UNINITIALIZED,successors:_constants.LOADING_STATUS.UNINITIALIZED}}},function(module,exports){module.exports='<context-app\n  anchor-type="contextAppRoute.anchorType"\n  anchor-id="contextAppRoute.anchorId"\n  columns="contextAppRoute.state.columns"\n  discover-url="contextAppRoute.discoverUrl"\n  index-pattern="contextAppRoute.indexPattern"\n  filters="contextAppRoute.filters"\n  predecessor-count="contextAppRoute.state.predecessorCount"\n  successor-count="contextAppRoute.state.successorCount"\n  sort="contextAppRoute.state.sort"\n></context-app>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggResponseIndexProvider=AggResponseIndexProvider;var _build_hierarchical_data=__webpack_require__(463);var _point_series=__webpack_require__(274);var _tabify=__webpack_require__(304);function AggResponseIndexProvider(Private){return{hierarchical:Private(_build_hierarchical_data.BuildHierarchicalDataProvider),pointSeries:Private(_point_series.AggResponsePointSeriesProvider),tabify:_tabify.tabifyAggResponse}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2479)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2284)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2140)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2576)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2353)},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2508)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(2017)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(22)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(949)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(4)(464)}]);