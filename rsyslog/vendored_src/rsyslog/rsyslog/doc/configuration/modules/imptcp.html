
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>imptcp: Plain TCP Syslog &#8212; rsyslog 8.37.0 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/rsyslog.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '8.37.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="imrelp: RELP Input Module" href="imrelp.html" />
    <link rel="prev" title="impstats: Generate Periodic Statistics of Internal Counters" href="impstats.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="imrelp.html" title="imrelp: RELP Input Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="impstats.html" title="impstats: Generate Periodic Statistics of Internal Counters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">rsyslog 8.37.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Configuration</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Modules</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="idx_input.html" accesskey="U">Input Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="imptcp-plain-tcp-syslog">
<h1>imptcp: Plain TCP Syslog<a class="headerlink" href="#imptcp-plain-tcp-syslog" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Module Name:</strong></td>
<td><strong>imptcp</strong></td>
</tr>
<tr class="row-even"><td><strong>Author:</strong></td>
<td><a class="reference external" href="https://rainer.gerhards.net/">Rainer Gerhards</a> &lt;<a class="reference external" href="mailto:rgerhards&#37;&#52;&#48;adiscon&#46;com">rgerhards<span>&#64;</span>adiscon<span>&#46;</span>com</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="purpose">
<h2>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>Provides the ability to receive syslog messages via plain TCP syslog.
This is a specialised input plugin tailored for high performance on
Linux. It will probably not run on any other platform. Also, it does not
provide TLS services. Encryption can be provided by using
<a class="reference external" href="rsyslog_stunnel.html">stunnel</a>.</p>
<p>This module has no limit on the number of listeners and sessions that
can be used.</p>
</div>
<div class="section" id="notable-features">
<h2>Notable Features<a class="headerlink" href="#notable-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#imptcp-statistic-counter"><span class="std std-ref">Statistic Counter</span></a></li>
<li><a class="reference internal" href="#error-messages"><span class="std std-ref">Error Messages</span></a></li>
</ul>
</div>
<div class="section" id="configuration-parameters">
<h2>Configuration Parameters<a class="headerlink" href="#configuration-parameters" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Parameter names are case-insensitive.</p>
</div>
<div class="section" id="module-parameters">
<h3>Module Parameters<a class="headerlink" href="#module-parameters" title="Permalink to this headline">¶</a></h3>
<div class="section" id="threads">
<h4>Threads<a class="headerlink" href="#threads" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>2</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerHelperThreads</span></code></td>
</tr>
</tbody>
</table>
<p>Number of helper worker threads to process incoming messages. These
threads are utilized to pull data off the network. On a busy system,
additional helper threads (but not more than there are CPUs/Cores)
can help improving performance. The default value is two, which means
there is a default thread count of three (the main input thread plus
two helpers). No more than 16 threads can be set (if tried to,
rsyslog always resorts to 16).</p>
</div>
<div class="section" id="processonpoller">
<h4>ProcessOnPoller<a class="headerlink" href="#processonpoller" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>on</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Instructs imptcp to process messages on poller thread opportunistically.
This leads to lower resource footprint(as poller thread doubles up as
message-processing thread too). “On” works best when imptcp is handling
low ingestion rates.</p>
<p>At high throughput though, it causes polling delay(as poller spends time
processing messages, which keeps connections in read-ready state longer
than they need to be, filling socket-buffer, hence eventually applying
backpressure).</p>
<p>It defaults to allowing messages to be processed on poller (for backward
compatibility).</p>
</div>
</div>
<div class="section" id="input-parameters">
<h3>Input Parameters<a class="headerlink" href="#input-parameters" title="Permalink to this headline">¶</a></h3>
<p>These parameters can be used with the “input()” statement. They apply to
the input they are specified with.</p>
<div class="section" id="port">
<h4>Port<a class="headerlink" href="#port" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>none</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerRun</span></code></td>
</tr>
</tbody>
</table>
<p>Select a port to listen on. It is an error to specify
both <cite>path</cite> and <cite>port</cite>.</p>
</div>
<div class="section" id="path">
<h4>Path<a class="headerlink" href="#path" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>none</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>A path on the filesystem for a unix domain socket. It is an error to specify
both <cite>path</cite> and <cite>port</cite>.</p>
</div>
<div class="section" id="discardtruncatedmsg">
<h4>DiscardTruncatedMsg<a class="headerlink" href="#discardtruncatedmsg" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>When a message is split because it is to long the second part is normally
processed as the next message. This can cause Problems. When this parameter
is turned on the part of the message after the truncation will be discarded.</p>
</div>
<div class="section" id="fileowner">
<h4>FileOwner<a class="headerlink" href="#fileowner" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UID</td>
<td>system default</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set the file owner for the domain socket. The
parameter is a user name, for which the userid is obtained by
rsyslogd during startup processing. Interim changes to the user
mapping are <em>not</em> detected.</p>
</div>
<div class="section" id="fileownernum">
<h4>FileOwnerNum<a class="headerlink" href="#fileownernum" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>system default</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set the file owner for the domain socket. The
parameter is a numerical ID, which which is used regardless of
whether the user actually exists. This can be useful if the user
mapping is not available to rsyslog during startup.</p>
</div>
<div class="section" id="filegroup">
<h4>FileGroup<a class="headerlink" href="#filegroup" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GID</td>
<td>system default</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set the group for the domain socket. The parameter is
a group name, for which the groupid is obtained by rsyslogd during
startup processing. Interim changes to the user mapping are not
detected.</p>
</div>
<div class="section" id="filegroupnum">
<h4>FileGroupNum<a class="headerlink" href="#filegroupnum" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>system default</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set the group for the domain socket. The parameter is
a numerical ID, which is used regardless of whether the group
actually exists. This can be useful if the group mapping is not
available to rsyslog during startup.</p>
</div>
<div class="section" id="filecreatemode">
<h4>FileCreateMode<a class="headerlink" href="#filecreatemode" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>octalNumber</td>
<td>0644</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set the access permissions for the domain socket. The value given must
always be a 4-digit octal number, with the initial digit being zero.
Please note that the actual permission depend on rsyslogd’s process
umask. If in doubt, use “$umask 0000” right at the beginning of the
configuration file to remove any restrictions.</p>
</div>
<div class="section" id="failonchownfailure">
<h4>FailOnChOwnFailure<a class="headerlink" href="#failonchownfailure" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>on</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Rsyslog will not start if this is on and changing the file owner, group,
or access permissions fails. Disable this to ignore these errors.</p>
</div>
<div class="section" id="unlink">
<h4>Unlink<a class="headerlink" href="#unlink" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>If a unix domain socket is being used this controls whether or not the socket
is unlinked before listening and after closing.</p>
</div>
<div class="section" id="name">
<h4>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>imptcp</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerInputName</span></code></td>
</tr>
</tbody>
</table>
<p>Sets a name for the inputname property. If no name is set “imptcp”
is used by default. Setting a name is not strictly necessary, but can
be useful to apply filtering based on which input the message was
received from. Note that the name also shows up in
<a class="reference internal" href="impstats.html"><span class="doc">impstats</span></a> logs.</p>
</div>
<div class="section" id="ruleset">
<h4>Ruleset<a class="headerlink" href="#ruleset" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>none</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerBindRuleset</span></code></td>
</tr>
</tbody>
</table>
<p>Binds specified ruleset to this input. If not set, the default
ruleset is bound.</p>
</div>
<div class="section" id="maxframesize">
<h4>MaxFrameSize<a class="headerlink" href="#maxframesize" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>200000</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>When in octet counted mode, the frame size is given at the beginning
of the message. With this parameter the max size this frame can have
is specified and when the frame gets to large the mode is switched to
octet stuffing.
The max value this parameter can have was specified because otherwise
the integer could become negative and this would result in a
Segmentation Fault. (Max Value: 200000000)</p>
</div>
<div class="section" id="address">
<h4>Address<a class="headerlink" href="#address" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>none</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerListenIP</span></code></td>
</tr>
</tbody>
</table>
<p>On multi-homed machines, specifies to which local address the
listerner should be bound.</p>
</div>
<div class="section" id="addtlframedelimiter">
<h4>AddtlFrameDelimiter<a class="headerlink" href="#addtlframedelimiter" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>-1</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerAddtlFrameDelimiter</span></code></td>
</tr>
</tbody>
</table>
<p>This directive permits to specify an additional frame delimiter for
plain tcp syslog. The industry-standard specifies using the LF
character as frame delimiter. Some vendors, notable Juniper in their
NetScreen products, use an invalid frame delimiter, in Juniper’s case
the NUL character. This directive permits to specify the ASCII value
of the delimiter in question. Please note that this does not
guarantee that all wrong implementations can be cured with this
directive. It is not even a sure fix with all versions of NetScreen,
as I suggest the NUL character is the effect of a (common) coding
error and thus will probably go away at some time in the future. But
for the time being, the value 0 can probably be used to make rsyslog
handle NetScreen’s invalid syslog/tcp framing. For additional
information, see this <a class="reference external" href="http://kb.monitorware.com/problem-with-netscreen-log-t1652.html">forum
thread</a>.
<strong>If this doesn’t work for you, please do not blame the rsyslog team.
Instead file a bug report with Juniper!</strong></p>
<p>Note that a similar, but worse, issue exists with Cisco’s IOS
implementation. They do not use any framing at all. This is confirmed
from Cisco’s side, but there seems to be very limited interest in
fixing this issue. This directive <strong>can not</strong> fix the Cisco bug. That
would require much more code changes, which I was unable to do so
far. Full details can be found at the <a class="reference external" href="http://www.rsyslog.com/Article321.phtml">Cisco tcp syslog
anomaly</a> page.</p>
</div>
<div class="section" id="supportoctetcountetframing">
<h4>SupportOctetCountetFraming<a class="headerlink" href="#supportoctetcountetframing" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>on</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPSupportOctetCountedFraming</span></code></td>
</tr>
</tbody>
</table>
<p>The legacy octed-counted framing (similar to RFC5425
framing) is activated. This is the default and should be left
unchanged until you know very well what you do. It may be useful to
turn it off, if you know this framing is not used and some senders
emit multi-line messages into the message stream.</p>
</div>
<div class="section" id="notifyonconnectionclose">
<h4>NotifyOnConnectionClose<a class="headerlink" href="#notifyonconnectionclose" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerNotifyOnConnectionClose</span></code></td>
</tr>
</tbody>
</table>
<p>instructs imptcp to emit a message if a remote peer closes the
connection.</p>
</div>
<div class="section" id="notifyonconnectionopen">
<h4>NotifyOnConnectionOpen<a class="headerlink" href="#notifyonconnectionopen" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Instructs imptcp to emit a message if a remote peer opens a
connection. Hostname of the remote peer is given in the message.</p>
</div>
<div class="section" id="keepalive">
<h4>KeepAlive<a class="headerlink" href="#keepalive" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerKeepAlive</span></code></td>
</tr>
</tbody>
</table>
<p>Enable of disable keep-alive packets at the tcp socket layer. The
default is to disable them.</p>
</div>
<div class="section" id="keepalive-probes">
<h4>KeepAlive.Probes<a class="headerlink" href="#keepalive-probes" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>0</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerKeepAlive_probes</span></code></td>
</tr>
</tbody>
</table>
<p>The number of unacknowledged probes to send before considering the
connection dead and notifying the application layer. The default, 0,
means that the operating system defaults are used. This has only
effect if keep-alive is enabled. The functionality may not be
available on all platforms.</p>
</div>
<div class="section" id="keepalive-interval">
<h4>KeepAlive.Interval<a class="headerlink" href="#keepalive-interval" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>0</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerKeepAlive_intvl</span></code></td>
</tr>
</tbody>
</table>
<p>The interval between subsequential keepalive probes, regardless of
what the connection has exchanged in the meantime. The default, 0,
means that the operating system defaults are used. This has only
effect if keep-alive is enabled. The functionality may not be
available on all platforms.</p>
</div>
<div class="section" id="keepalive-time">
<h4>KeepAlive.Time<a class="headerlink" href="#keepalive-time" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>0</td>
<td>no</td>
<td><code class="docutils literal"><span class="pre">$InputPTCPServerKeepAlive_time</span></code></td>
</tr>
</tbody>
</table>
<p>The interval between the last data packet sent (simple ACKs are not
considered data) and the first keepalive probe; after the connection
is marked to need keepalive, this counter is not used any further.
The default, 0, means that the operating system defaults are used.
This has only effect if keep-alive is enabled. The functionality may
not be available on all platforms.</p>
</div>
<div class="section" id="ratelimit-interval">
<h4>RateLimit.Interval<a class="headerlink" href="#ratelimit-interval" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>0</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Specifies the rate-limiting interval in seconds. Set it to a number
of seconds (5 recommended) to activate rate-limiting.</p>
</div>
<div class="section" id="ratelimit-burst">
<h4>RateLimit.Burst<a class="headerlink" href="#ratelimit-burst" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>10000</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Specifies the rate-limiting burst in number of messages.</p>
</div>
<div class="section" id="compression-mode">
<h4>Compression.mode<a class="headerlink" href="#compression-mode" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>word</td>
<td>none</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>This is the counterpart to the compression modes set in
<a class="reference internal" href="omfwd.html"><span class="doc">omfwd</span></a>.
Please see it’s documentation for details.</p>
</div>
<div class="section" id="flowcontrol">
<h4>flowControl<a class="headerlink" href="#flowcontrol" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>on</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Flow control is used to throttle the sender if the receiver queue is
near-full preserving some space for input that can not be throttled.</p>
</div>
<div class="section" id="multiline">
<h4>MultiLine<a class="headerlink" href="#multiline" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Experimental parameter which caues rsyslog to recognise a new message
only if the line feed is followed by a ‘&lt;’ or if there are no more characters.</p>
</div>
<div class="section" id="framing-delimiter-regex">
<h4>framing.delimiter.regex<a class="headerlink" href="#framing-delimiter-regex" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Experimental parameter. It is similar to “MultiLine”, but provides greater
control of when a log message ends. You can specify a regular expression that
characterizes the header to expect at the start of the next message. As such,
it indicates the end of the current message. For example, one can use this
setting to use a RFC3164 header as frame delimiter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">framing</span><span class="o">.</span><span class="n">delimiter</span><span class="o">.</span><span class="n">regex</span><span class="o">=</span><span class="s2">&quot;^&lt;[0-9]{1,3}&gt;(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)&quot;</span>
</pre></div>
</div>
<p>Note that when oversize messages arrive this mode may have problems finding
the proper frame terminator. There are some provisions inside imptcp to make
these kinds of problems unlikely, but if the messages are very much over the
configured MaxMessageSize, imptcp emits an error messages. Chances are great
it will properly recover from such a situation.</p>
</div>
<div class="section" id="socketbacklog">
<h4>SocketBacklog<a class="headerlink" href="#socketbacklog" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>integer</td>
<td>5</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Specifies the backlog parameter sent to the listen() function.
It defines the maximum length to which the queue of pending connections may grow.
See man page of listen(2) for more information.
The parameter controls both TCP and UNIX sockets backlog parameter.
Default value is arbitrary set to 5.</p>
</div>
<div class="section" id="defaulttz">
<h4>Defaulttz<a class="headerlink" href="#defaulttz" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>string</td>
<td>none</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Set default time zone. At most seven chars are set, as we would otherwise
overrun our buffer.</p>
</div>
<div class="section" id="framingfix-cisco-asa">
<h4>Framingfix.cisco.asa<a class="headerlink" href="#framingfix-cisco-asa" title="Permalink to this headline">¶</a></h4>
<table border="1" class="colwidths-auto parameter-table docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">type</th>
<th class="head">default</th>
<th class="head">mandatory</th>
<th class="head"><code class="docutils literal"><span class="pre">obsolete</span> <span class="pre">legacy</span></code> directive</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>binary</td>
<td>off</td>
<td>no</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>Cisco very occasionally sends a space after a line feed, which thrashes framing
if not taken special care of. When this parameter is set to “on”, we permit
space <em>in front of the next frame</em> and ignore it.</p>
</div>
</div>
</div>
<div class="section" id="statistic-counter">
<span id="imptcp-statistic-counter"></span><h2>Statistic Counter<a class="headerlink" href="#statistic-counter" title="Permalink to this headline">¶</a></h2>
<p>This plugin maintains <a class="reference internal" href="../rsyslog_statistic_counter.html"><span class="doc">statistics</span></a> for each listener. The statistic is
named “imtcp” , followed by the bound address, listener port and IP
version in parenthesis. For example, the counter for a listener on port
514, bound to all interfaces and listening on IPv6 is called
“imptcp(*/514/IPv6)”.</p>
<p>The following properties are maintained for each listener:</p>
<ul class="simple">
<li><strong>submitted</strong> - total number of messages submitted for processing since startup</li>
</ul>
</div>
<div class="section" id="error-messages">
<span id="id1"></span><h2>Error Messages<a class="headerlink" href="#error-messages" title="Permalink to this headline">¶</a></h2>
<p>When a message is to long it will be truncated and an error will show the remaining length of the message and the beginning of it. It will be easier to comprehend the truncation.</p>
</div>
<div class="section" id="caveats-known-bugs">
<h2>Caveats/Known Bugs<a class="headerlink" href="#caveats-known-bugs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>module always binds to all interfaces</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="example-1">
<h3>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<p>This sets up a TCP server on port 514:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>module(load=&quot;imptcp&quot;) # needs to be done just once
input(type=&quot;imptcp&quot; port=&quot;514&quot;)
</pre></div>
</div>
</div>
<div class="section" id="example-2">
<h3>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h3>
<p>This creates a listener that listens on the local loopback
interface, only.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>module(load=&quot;imptcp&quot;) # needs to be done just once
input(type=&quot;imptcp&quot; port=&quot;514&quot; address=&quot;127.0.0.1&quot;)
</pre></div>
</div>
</div>
<div class="section" id="example-3">
<h3>Example 3<a class="headerlink" href="#example-3" title="Permalink to this headline">¶</a></h3>
<p>Create a unix domain socket:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>module(load=&quot;imptcp&quot;) # needs to be done just once
input(type=&quot;imptcp&quot; path=&quot;/tmp/unix.sock&quot; unlink=&quot;on&quot;)
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>Help with configuring/using <code class="docutils literal"><span class="pre">Rsyslog</span></code>:</p>
<ul class="last simple">
<li><a class="reference external" href="http://lists.adiscon.net/mailman/listinfo/rsyslog">Mailing list</a> - best route for general questions</li>
<li>GitHub: <a class="reference external" href="https://github.com/rsyslog/rsyslog/">rsyslog source project</a> - detailed questions, reporting issues
that are believed to be bugs with <code class="docutils literal"><span class="pre">Rsyslog</span></code></li>
<li>Stack Exchange (<a class="reference external" href="https://stackexchange.com/filters/327462/rsyslog">View</a>, <a class="reference external" href="https://serverfault.com/questions/ask?tags=rsyslog">Ask</a>)
- experimental support from rsyslog community</li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p>Contributing to <code class="docutils literal"><span class="pre">Rsyslog</span></code>:</p>
<ul class="last simple">
<li>Source project: <a class="reference external" href="https://github.com/rsyslog/rsyslog/blob/master/README.md">rsyslog project README</a>.</li>
<li>Documentation: <a class="reference external" href="https://github.com/rsyslog/rsyslog-doc/blob/master/README.md">rsyslog-doc project README</a></li>
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">imptcp: Plain TCP Syslog</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#notable-features">Notable Features</a></li>
<li><a class="reference internal" href="#configuration-parameters">Configuration Parameters</a><ul>
<li><a class="reference internal" href="#module-parameters">Module Parameters</a><ul>
<li><a class="reference internal" href="#threads">Threads</a></li>
<li><a class="reference internal" href="#processonpoller">ProcessOnPoller</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-parameters">Input Parameters</a><ul>
<li><a class="reference internal" href="#port">Port</a></li>
<li><a class="reference internal" href="#path">Path</a></li>
<li><a class="reference internal" href="#discardtruncatedmsg">DiscardTruncatedMsg</a></li>
<li><a class="reference internal" href="#fileowner">FileOwner</a></li>
<li><a class="reference internal" href="#fileownernum">FileOwnerNum</a></li>
<li><a class="reference internal" href="#filegroup">FileGroup</a></li>
<li><a class="reference internal" href="#filegroupnum">FileGroupNum</a></li>
<li><a class="reference internal" href="#filecreatemode">FileCreateMode</a></li>
<li><a class="reference internal" href="#failonchownfailure">FailOnChOwnFailure</a></li>
<li><a class="reference internal" href="#unlink">Unlink</a></li>
<li><a class="reference internal" href="#name">Name</a></li>
<li><a class="reference internal" href="#ruleset">Ruleset</a></li>
<li><a class="reference internal" href="#maxframesize">MaxFrameSize</a></li>
<li><a class="reference internal" href="#address">Address</a></li>
<li><a class="reference internal" href="#addtlframedelimiter">AddtlFrameDelimiter</a></li>
<li><a class="reference internal" href="#supportoctetcountetframing">SupportOctetCountetFraming</a></li>
<li><a class="reference internal" href="#notifyonconnectionclose">NotifyOnConnectionClose</a></li>
<li><a class="reference internal" href="#notifyonconnectionopen">NotifyOnConnectionOpen</a></li>
<li><a class="reference internal" href="#keepalive">KeepAlive</a></li>
<li><a class="reference internal" href="#keepalive-probes">KeepAlive.Probes</a></li>
<li><a class="reference internal" href="#keepalive-interval">KeepAlive.Interval</a></li>
<li><a class="reference internal" href="#keepalive-time">KeepAlive.Time</a></li>
<li><a class="reference internal" href="#ratelimit-interval">RateLimit.Interval</a></li>
<li><a class="reference internal" href="#ratelimit-burst">RateLimit.Burst</a></li>
<li><a class="reference internal" href="#compression-mode">Compression.mode</a></li>
<li><a class="reference internal" href="#flowcontrol">flowControl</a></li>
<li><a class="reference internal" href="#multiline">MultiLine</a></li>
<li><a class="reference internal" href="#framing-delimiter-regex">framing.delimiter.regex</a></li>
<li><a class="reference internal" href="#socketbacklog">SocketBacklog</a></li>
<li><a class="reference internal" href="#defaulttz">Defaulttz</a></li>
<li><a class="reference internal" href="#framingfix-cisco-asa">Framingfix.cisco.asa</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#statistic-counter">Statistic Counter</a></li>
<li><a class="reference internal" href="#error-messages">Error Messages</a></li>
<li><a class="reference internal" href="#caveats-known-bugs">Caveats/Known Bugs</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#example-1">Example 1</a></li>
<li><a class="reference internal" href="#example-2">Example 2</a></li>
<li><a class="reference internal" href="#example-3">Example 3</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="impstats.html"
                        title="previous chapter">impstats: Generate Periodic Statistics of Internal Counters</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="imrelp.html"
                        title="next chapter">imrelp: RELP Input Module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/configuration/modules/imptcp.rst.txt"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/rsyslog/rsyslog-doc/edit/master/source/configuration/modules/imptcp.rst"
           rel="nofollow">Edit on GitHub</a></li>
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="imrelp.html" title="imrelp: RELP Input Module"
             >next</a> |</li>
        <li class="right" >
          <a href="impstats.html" title="impstats: Generate Periodic Statistics of Internal Counters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">rsyslog 8.37.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Configuration</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >Modules</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="idx_input.html" >Input Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2017, Rainer Gerhards and Others.
    </div>
  </body>
</html>